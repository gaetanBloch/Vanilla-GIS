var $localize=Object.assign(void 0===$localize?{}:$localize,{locale:"en"});
"use strict";(function(global){global.ng=global.ng||{};global.ng.common=global.ng.common||{};global.ng.common.locales=global.ng.common.locales||{};const u=undefined;function plural(n){const i=Math.floor(Math.abs(n)),v=n.toString().replace(/^[^.]*\.?/,"").length;if(i===1&&v===0)return 1;return 5}global.ng.common.locales["en"]=["en",[["a","p"],["AM","PM"],u],[["AM","PM"],u,u],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],u,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],u,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",u,"{1} 'at' {0}",u],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",plural,[[["mi","n","in the morning","in the afternoon","in the evening","at night"],["midnight","noon","in the morning","in the afternoon","in the evening","at night"],u],[["midnight","noon","morning","afternoon","evening","night"],u,u],["00:00","12:00",["06:00","12:00"],["12:00","18:00"],["18:00","21:00"],["21:00","06:00"]]]]})(typeof globalThis!=="undefined"&&globalThis||typeof global!=="undefined"&&global||typeof window!=="undefined"&&window);;
(self.webpackChunkfr_gis=self.webpackChunkfr_gis||[]).push([[179],{8255:Tt=>{function St(ee){return Promise.resolve().then(()=>{var Q=new Error("Cannot find module '"+ee+"'");throw Q.code="MODULE_NOT_FOUND",Q})}St.keys=()=>[],St.resolve=St,St.id=8255,Tt.exports=St},7238:(Tt,St,ee)=>{"use strict";ee.d(St,{l3:()=>Pe,_j:()=>Q,LC:()=>_,ZN:()=>ge,jt:()=>Ke,pV:()=>at,IO:()=>Se,vP:()=>nt,SB:()=>We,oB:()=>xe,eR:()=>Ge,X$:()=>we,ZE:()=>ue,k1:()=>Me});class Q{}class _{}const Pe="*";function we(qe,Ye){return{type:7,name:qe,definitions:Ye,options:{}}}function Ke(qe,Ye=null){return{type:4,styles:Ye,timings:qe}}function nt(qe,Ye=null){return{type:2,steps:qe,options:Ye}}function xe(qe){return{type:6,styles:qe,offset:null}}function We(qe,Ye,_t){return{type:0,name:qe,styles:Ye,options:_t}}function Ge(qe,Ye,_t=null){return{type:1,expr:qe,animation:Ye,options:_t}}function at(qe=null){return{type:9,options:qe}}function Se(qe,Ye,_t=null){return{type:11,selector:qe,animation:Ye,options:_t}}function Be(qe){Promise.resolve(null).then(qe)}class ge{constructor(Ye=0,_t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ye+_t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ye=>Ye()),this._onDoneFns=[])}onStart(Ye){this._onStartFns.push(Ye)}onDone(Ye){this._onDoneFns.push(Ye)}onDestroy(Ye){this._onDestroyFns.push(Ye)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Be(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ye=>Ye()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ye=>Ye()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(Ye){this._position=this.totalTime?Ye*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ye){const _t="start"==Ye?this._onStartFns:this._onDoneFns;_t.forEach(Ue=>Ue()),_t.length=0}}class ue{constructor(Ye){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ye;let _t=0,Ue=0,ht=0;const it=this.players.length;0==it?Be(()=>this._onFinish()):this.players.forEach(It=>{It.onDone(()=>{++_t==it&&this._onFinish()}),It.onDestroy(()=>{++Ue==it&&this._onDestroy()}),It.onStart(()=>{++ht==it&&this._onStart()})}),this.totalTime=this.players.reduce((It,xt)=>Math.max(It,xt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ye=>Ye()),this._onDoneFns=[])}init(){this.players.forEach(Ye=>Ye.init())}onStart(Ye){this._onStartFns.push(Ye)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ye=>Ye()),this._onStartFns=[])}onDone(Ye){this._onDoneFns.push(Ye)}onDestroy(Ye){this._onDestroyFns.push(Ye)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ye=>Ye.play())}pause(){this.players.forEach(Ye=>Ye.pause())}restart(){this.players.forEach(Ye=>Ye.restart())}finish(){this._onFinish(),this.players.forEach(Ye=>Ye.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ye=>Ye.destroy()),this._onDestroyFns.forEach(Ye=>Ye()),this._onDestroyFns=[])}reset(){this.players.forEach(Ye=>Ye.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ye){const _t=Ye*this.totalTime;this.players.forEach(Ue=>{const ht=Ue.totalTime?Math.min(1,_t/Ue.totalTime):1;Ue.setPosition(ht)})}getPosition(){const Ye=this.players.reduce((_t,Ue)=>null===_t||Ue.totalTime>_t.totalTime?Ue:_t,null);return null!=Ye?Ye.getPosition():0}beforeDestroy(){this.players.forEach(Ye=>{Ye.beforeDestroy&&Ye.beforeDestroy()})}triggerCallback(Ye){const _t="start"==Ye?this._onStartFns:this._onDoneFns;_t.forEach(Ue=>Ue()),_t.length=0}}const Me="!"},8583:(Tt,St,ee)=>{"use strict";ee.d(St,{mr:()=>ue,ez:()=>ml,K0:()=>nt,Do:()=>qe,V_:()=>ve,Ye:()=>Ye,S$:()=>Be,mk:()=>fe,sg:()=>Lt,O5:()=>bn,RF:()=>Nr,n9:()=>Fr,ED:()=>Oo,b0:()=>Me,lw:()=>xe,EM:()=>hu,JF:()=>rd,NF:()=>cu,w_:()=>_e,bD:()=>td,q:()=>Pe,Mx:()=>oe,HT:()=>Ke});var Q=ee(7716);let _=null;function Pe(){return _}function Ke(H){_||(_=H)}class _e{}const nt=new Q.OlP("DocumentToken");let xe=(()=>{class H{historyGo(q){throw new Error("Not implemented")}}return H.\u0275fac=function(q){return new(q||H)},H.\u0275prov=(0,Q.Yz7)({factory:We,token:H,providedIn:"platform"}),H})();function We(){return(0,Q.LFG)(Ge)}const ve=new Q.OlP("Location Initialized");let Ge=(()=>{class H extends xe{constructor(q){super(),this._doc=q,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pe().getBaseHref(this._doc)}onPopState(q){const he=Pe().getGlobalEventTarget(this._doc,"window");return he.addEventListener("popstate",q,!1),()=>he.removeEventListener("popstate",q)}onHashChange(q){const he=Pe().getGlobalEventTarget(this._doc,"window");return he.addEventListener("hashchange",q,!1),()=>he.removeEventListener("hashchange",q)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(q){this.location.pathname=q}pushState(q,he,ze){Ie()?this._history.pushState(q,he,ze):this.location.hash=ze}replaceState(q,he,ze){Ie()?this._history.replaceState(q,he,ze):this.location.hash=ze}forward(){this._history.forward()}back(){this._history.back()}historyGo(q=0){this._history.go(q)}getState(){return this._history.state}}return H.\u0275fac=function(q){return new(q||H)(Q.LFG(nt))},H.\u0275prov=(0,Q.Yz7)({factory:at,token:H,providedIn:"platform"}),H})();function Ie(){return!!window.history.pushState}function at(){return new Ge((0,Q.LFG)(nt))}function Ft(H,se){if(0==H.length)return se;if(0==se.length)return H;let q=0;return H.endsWith("/")&&q++,se.startsWith("/")&&q++,2==q?H+se.substring(1):1==q?H+se:H+"/"+se}function Se(H){const se=H.match(/#|\?|$/),q=se&&se.index||H.length;return H.slice(0,q-("/"===H[q-1]?1:0))+H.slice(q)}function Le(H){return H&&"?"!==H[0]?"?"+H:H}let Be=(()=>{class H{historyGo(q){throw new Error("Not implemented")}}return H.\u0275fac=function(q){return new(q||H)},H.\u0275prov=(0,Q.Yz7)({factory:ge,token:H,providedIn:"root"}),H})();function ge(H){const se=(0,Q.LFG)(nt).location;return new Me((0,Q.LFG)(xe),se&&se.origin||"")}const ue=new Q.OlP("appBaseHref");let Me=(()=>{class H extends Be{constructor(q,he){if(super(),this._platformLocation=q,this._removeListenerFns=[],null==he&&(he=this._platformLocation.getBaseHrefFromDOM()),null==he)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=he}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(q){this._removeListenerFns.push(this._platformLocation.onPopState(q),this._platformLocation.onHashChange(q))}getBaseHref(){return this._baseHref}prepareExternalUrl(q){return Ft(this._baseHref,q)}path(q=!1){const he=this._platformLocation.pathname+Le(this._platformLocation.search),ze=this._platformLocation.hash;return ze&&q?`${he}${ze}`:he}pushState(q,he,ze,Gt){const on=this.prepareExternalUrl(ze+Le(Gt));this._platformLocation.pushState(q,he,on)}replaceState(q,he,ze,Gt){const on=this.prepareExternalUrl(ze+Le(Gt));this._platformLocation.replaceState(q,he,on)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(q=0){var he,ze;null===(ze=(he=this._platformLocation).historyGo)||void 0===ze||ze.call(he,q)}}return H.\u0275fac=function(q){return new(q||H)(Q.LFG(xe),Q.LFG(ue,8))},H.\u0275prov=Q.Yz7({token:H,factory:H.\u0275fac}),H})(),qe=(()=>{class H extends Be{constructor(q,he){super(),this._platformLocation=q,this._baseHref="",this._removeListenerFns=[],null!=he&&(this._baseHref=he)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(q){this._removeListenerFns.push(this._platformLocation.onPopState(q),this._platformLocation.onHashChange(q))}getBaseHref(){return this._baseHref}path(q=!1){let he=this._platformLocation.hash;return null==he&&(he="#"),he.length>0?he.substring(1):he}prepareExternalUrl(q){const he=Ft(this._baseHref,q);return he.length>0?"#"+he:he}pushState(q,he,ze,Gt){let on=this.prepareExternalUrl(ze+Le(Gt));0==on.length&&(on=this._platformLocation.pathname),this._platformLocation.pushState(q,he,on)}replaceState(q,he,ze,Gt){let on=this.prepareExternalUrl(ze+Le(Gt));0==on.length&&(on=this._platformLocation.pathname),this._platformLocation.replaceState(q,he,on)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(q=0){var he,ze;null===(ze=(he=this._platformLocation).historyGo)||void 0===ze||ze.call(he,q)}}return H.\u0275fac=function(q){return new(q||H)(Q.LFG(xe),Q.LFG(ue,8))},H.\u0275prov=Q.Yz7({token:H,factory:H.\u0275fac}),H})(),Ye=(()=>{class H{constructor(q,he){this._subject=new Q.vpe,this._urlChangeListeners=[],this._platformStrategy=q;const ze=this._platformStrategy.getBaseHref();this._platformLocation=he,this._baseHref=Se(ht(ze)),this._platformStrategy.onPopState(Gt=>{this._subject.emit({url:this.path(!0),pop:!0,state:Gt.state,type:Gt.type})})}path(q=!1){return this.normalize(this._platformStrategy.path(q))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(q,he=""){return this.path()==this.normalize(q+Le(he))}normalize(q){return H.stripTrailingSlash(function(H,se){return H&&se.startsWith(H)?se.substring(H.length):se}(this._baseHref,ht(q)))}prepareExternalUrl(q){return q&&"/"!==q[0]&&(q="/"+q),this._platformStrategy.prepareExternalUrl(q)}go(q,he="",ze=null){this._platformStrategy.pushState(ze,"",q,he),this._notifyUrlChangeListeners(this.prepareExternalUrl(q+Le(he)),ze)}replaceState(q,he="",ze=null){this._platformStrategy.replaceState(ze,"",q,he),this._notifyUrlChangeListeners(this.prepareExternalUrl(q+Le(he)),ze)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(q=0){var he,ze;null===(ze=(he=this._platformStrategy).historyGo)||void 0===ze||ze.call(he,q)}onUrlChange(q){this._urlChangeListeners.push(q),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(he=>{this._notifyUrlChangeListeners(he.url,he.state)}))}_notifyUrlChangeListeners(q="",he){this._urlChangeListeners.forEach(ze=>ze(q,he))}subscribe(q,he,ze){return this._subject.subscribe({next:q,error:he,complete:ze})}}return H.\u0275fac=function(q){return new(q||H)(Q.LFG(Be),Q.LFG(xe))},H.normalizeQueryParams=Le,H.joinWithSlash=Ft,H.stripTrailingSlash=Se,H.\u0275prov=(0,Q.Yz7)({factory:_t,token:H,providedIn:"root"}),H})();function _t(){return new Ye((0,Q.LFG)(Be),(0,Q.LFG)(xe))}function ht(H){return H.replace(/\/index.html$/,"")}var xt=(()=>((xt=xt||{})[xt.Zero=0]="Zero",xt[xt.One=1]="One",xt[xt.Two=2]="Two",xt[xt.Few=3]="Few",xt[xt.Many=4]="Many",xt[xt.Other=5]="Other",xt))();const Wn=Q.kL8;class tt{}let Te=(()=>{class H extends tt{constructor(q){super(),this.locale=q}getPluralCategory(q,he){switch(Wn(he||this.locale)(q)){case xt.Zero:return"zero";case xt.One:return"one";case xt.Two:return"two";case xt.Few:return"few";case xt.Many:return"many";default:return"other"}}}return H.\u0275fac=function(q){return new(q||H)(Q.LFG(Q.soG))},H.\u0275prov=Q.Yz7({token:H,factory:H.\u0275fac}),H})();function oe(H,se){se=encodeURIComponent(se);for(const q of H.split(";")){const he=q.indexOf("="),[ze,Gt]=-1==he?[q,""]:[q.slice(0,he),q.slice(he+1)];if(ze.trim()===se)return decodeURIComponent(Gt)}return null}let fe=(()=>{class H{constructor(q,he,ze,Gt){this._iterableDiffers=q,this._keyValueDiffers=he,this._ngEl=ze,this._renderer=Gt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(q){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof q?q.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(q){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof q?q.split(/\s+/):q,this._rawClass&&((0,Q.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const q=this._iterableDiffer.diff(this._rawClass);q&&this._applyIterableChanges(q)}else if(this._keyValueDiffer){const q=this._keyValueDiffer.diff(this._rawClass);q&&this._applyKeyValueChanges(q)}}_applyKeyValueChanges(q){q.forEachAddedItem(he=>this._toggleClass(he.key,he.currentValue)),q.forEachChangedItem(he=>this._toggleClass(he.key,he.currentValue)),q.forEachRemovedItem(he=>{he.previousValue&&this._toggleClass(he.key,!1)})}_applyIterableChanges(q){q.forEachAddedItem(he=>{if("string"!=typeof he.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,Q.AaK)(he.item)}`);this._toggleClass(he.item,!0)}),q.forEachRemovedItem(he=>this._toggleClass(he.item,!1))}_applyClasses(q){q&&(Array.isArray(q)||q instanceof Set?q.forEach(he=>this._toggleClass(he,!0)):Object.keys(q).forEach(he=>this._toggleClass(he,!!q[he])))}_removeClasses(q){q&&(Array.isArray(q)||q instanceof Set?q.forEach(he=>this._toggleClass(he,!1)):Object.keys(q).forEach(he=>this._toggleClass(he,!1)))}_toggleClass(q,he){(q=q.trim())&&q.split(/\s+/g).forEach(ze=>{he?this._renderer.addClass(this._ngEl.nativeElement,ze):this._renderer.removeClass(this._ngEl.nativeElement,ze)})}}return H.\u0275fac=function(q){return new(q||H)(Q.Y36(Q.ZZ4),Q.Y36(Q.aQg),Q.Y36(Q.SBq),Q.Y36(Q.Qsj))},H.\u0275dir=Q.lG2({type:H,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),H})();class vt{constructor(se,q,he,ze){this.$implicit=se,this.ngForOf=q,this.index=he,this.count=ze}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Lt=(()=>{class H{constructor(q,he,ze){this._viewContainer=q,this._template=he,this._differs=ze,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(q){this._ngForOf=q,this._ngForOfDirty=!0}set ngForTrackBy(q){this._trackByFn=q}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(q){q&&(this._template=q)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const q=this._ngForOf;if(!this._differ&&q)try{this._differ=this._differs.find(q).create(this.ngForTrackBy)}catch(he){throw new Error(`Cannot find a differ supporting object '${q}' of type '${function(H){return H.name||typeof H}(q)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const q=this._differ.diff(this._ngForOf);q&&this._applyChanges(q)}}_applyChanges(q){const he=[];q.forEachOperation((ze,Gt,on)=>{if(null==ze.previousIndex){const Yn=this._viewContainer.createEmbeddedView(this._template,new vt(null,this._ngForOf,-1,-1),null===on?void 0:on),tr=new nn(ze,Yn);he.push(tr)}else if(null==on)this._viewContainer.remove(null===Gt?void 0:Gt);else if(null!==Gt){const Yn=this._viewContainer.get(Gt);this._viewContainer.move(Yn,on);const tr=new nn(ze,Yn);he.push(tr)}});for(let ze=0;ze<he.length;ze++)this._perViewChange(he[ze].view,he[ze].record);for(let ze=0,Gt=this._viewContainer.length;ze<Gt;ze++){const on=this._viewContainer.get(ze);on.context.index=ze,on.context.count=Gt,on.context.ngForOf=this._ngForOf}q.forEachIdentityChange(ze=>{this._viewContainer.get(ze.currentIndex).context.$implicit=ze.item})}_perViewChange(q,he){q.context.$implicit=he.item}static ngTemplateContextGuard(q,he){return!0}}return H.\u0275fac=function(q){return new(q||H)(Q.Y36(Q.s_b),Q.Y36(Q.Rgc),Q.Y36(Q.ZZ4))},H.\u0275dir=Q.lG2({type:H,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),H})();class nn{constructor(se,q){this.record=se,this.view=q}}let bn=(()=>{class H{constructor(q,he){this._viewContainer=q,this._context=new Tn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=he}set ngIf(q){this._context.$implicit=this._context.ngIf=q,this._updateView()}set ngIfThen(q){Tr("ngIfThen",q),this._thenTemplateRef=q,this._thenViewRef=null,this._updateView()}set ngIfElse(q){Tr("ngIfElse",q),this._elseTemplateRef=q,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(q,he){return!0}}return H.\u0275fac=function(q){return new(q||H)(Q.Y36(Q.s_b),Q.Y36(Q.Rgc))},H.\u0275dir=Q.lG2({type:H,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),H})();class Tn{constructor(){this.$implicit=null,this.ngIf=null}}function Tr(H,se){if(se&&!se.createEmbeddedView)throw new Error(`${H} must be a TemplateRef, but received '${(0,Q.AaK)(se)}'.`)}class Jn{constructor(se,q){this._viewContainerRef=se,this._templateRef=q,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(se){se&&!this._created?this.create():!se&&this._created&&this.destroy()}}let Nr=(()=>{class H{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(q){this._ngSwitch=q,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(q){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(q)}_matchCase(q){const he=q==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||he,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),he}_updateDefaultCases(q){if(this._defaultViews&&q!==this._defaultUsed){this._defaultUsed=q;for(let he=0;he<this._defaultViews.length;he++)this._defaultViews[he].enforceState(q)}}}return H.\u0275fac=function(q){return new(q||H)},H.\u0275dir=Q.lG2({type:H,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),H})(),Fr=(()=>{class H{constructor(q,he,ze){this.ngSwitch=ze,ze._addCase(),this._view=new Jn(q,he)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return H.\u0275fac=function(q){return new(q||H)(Q.Y36(Q.s_b),Q.Y36(Q.Rgc),Q.Y36(Nr,9))},H.\u0275dir=Q.lG2({type:H,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),H})(),Oo=(()=>{class H{constructor(q,he,ze){ze._addDefault(new Jn(q,he))}}return H.\u0275fac=function(q){return new(q||H)(Q.Y36(Q.s_b),Q.Y36(Q.Rgc),Q.Y36(Nr,9))},H.\u0275dir=Q.lG2({type:H,selectors:[["","ngSwitchDefault",""]]}),H})(),ml=(()=>{class H{}return H.\u0275fac=function(q){return new(q||H)},H.\u0275mod=Q.oAB({type:H}),H.\u0275inj=Q.cJS({providers:[{provide:tt,useClass:Te}]}),H})();const td="browser";function cu(H){return H===td}let hu=(()=>{class H{}return H.\u0275prov=(0,Q.Yz7)({token:H,providedIn:"root",factory:()=>new vl((0,Q.LFG)(nt),window)}),H})();class vl{constructor(se,q){this.document=se,this.window=q,this.offset=()=>[0,0]}setOffset(se){this.offset=Array.isArray(se)?()=>se:se}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(se){this.supportsScrolling()&&this.window.scrollTo(se[0],se[1])}scrollToAnchor(se){if(!this.supportsScrolling())return;const q=function(H,se){const q=H.getElementById(se)||H.getElementsByName(se)[0];if(q)return q;if("function"==typeof H.createTreeWalker&&H.body&&(H.body.createShadowRoot||H.body.attachShadow)){const he=H.createTreeWalker(H.body,NodeFilter.SHOW_ELEMENT);let ze=he.currentNode;for(;ze;){const Gt=ze.shadowRoot;if(Gt){const on=Gt.getElementById(se)||Gt.querySelector(`[name="${se}"]`);if(on)return on}ze=he.nextNode()}}return null}(this.document,se);q&&(this.scrollToElement(q),this.attemptFocus(q))}setHistoryScrollRestoration(se){if(this.supportScrollRestoration()){const q=this.window.history;q&&q.scrollRestoration&&(q.scrollRestoration=se)}}scrollToElement(se){const q=se.getBoundingClientRect(),he=q.left+this.window.pageXOffset,ze=q.top+this.window.pageYOffset,Gt=this.offset();this.window.scrollTo(he-Gt[0],ze-Gt[1])}attemptFocus(se){return se.focus(),this.document.activeElement===se}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const se=ba(this.window.history)||ba(Object.getPrototypeOf(this.window.history));return!(!se||!se.writable&&!se.set)}catch(se){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(se){return!1}}}function ba(H){return Object.getOwnPropertyDescriptor(H,"scrollRestoration")}class rd{}},1841:(Tt,St,ee)=>{"use strict";ee.d(St,{eN:()=>bt,JF:()=>Ln});var Q=ee(8583),_=ee(7716),Pe=ee(5917),we=ee(7574),Ke=ee(4612),_e=ee(5435),nt=ee(8002);class xe{}class We{}class ve{constructor(Ae){this.normalizedNames=new Map,this.lazyUpdate=null,Ae?this.lazyInit="string"==typeof Ae?()=>{this.headers=new Map,Ae.split("\n").forEach(ke=>{const mt=ke.indexOf(":");if(mt>0){const Bt=ke.slice(0,mt),vn=Bt.toLowerCase(),Yt=ke.slice(mt+1).trim();this.maybeSetNormalizedName(Bt,vn),this.headers.has(vn)?this.headers.get(vn).push(Yt):this.headers.set(vn,[Yt])}})}:()=>{this.headers=new Map,Object.keys(Ae).forEach(ke=>{let mt=Ae[ke];const Bt=ke.toLowerCase();"string"==typeof mt&&(mt=[mt]),mt.length>0&&(this.headers.set(Bt,mt),this.maybeSetNormalizedName(ke,Bt))})}:this.headers=new Map}has(Ae){return this.init(),this.headers.has(Ae.toLowerCase())}get(Ae){this.init();const ke=this.headers.get(Ae.toLowerCase());return ke&&ke.length>0?ke[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ae){return this.init(),this.headers.get(Ae.toLowerCase())||null}append(Ae,ke){return this.clone({name:Ae,value:ke,op:"a"})}set(Ae,ke){return this.clone({name:Ae,value:ke,op:"s"})}delete(Ae,ke){return this.clone({name:Ae,value:ke,op:"d"})}maybeSetNormalizedName(Ae,ke){this.normalizedNames.has(ke)||this.normalizedNames.set(ke,Ae)}init(){this.lazyInit&&(this.lazyInit instanceof ve?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ae=>this.applyUpdate(Ae)),this.lazyUpdate=null))}copyFrom(Ae){Ae.init(),Array.from(Ae.headers.keys()).forEach(ke=>{this.headers.set(ke,Ae.headers.get(ke)),this.normalizedNames.set(ke,Ae.normalizedNames.get(ke))})}clone(Ae){const ke=new ve;return ke.lazyInit=this.lazyInit&&this.lazyInit instanceof ve?this.lazyInit:this,ke.lazyUpdate=(this.lazyUpdate||[]).concat([Ae]),ke}applyUpdate(Ae){const ke=Ae.name.toLowerCase();switch(Ae.op){case"a":case"s":let mt=Ae.value;if("string"==typeof mt&&(mt=[mt]),0===mt.length)return;this.maybeSetNormalizedName(Ae.name,ke);const Bt=("a"===Ae.op?this.headers.get(ke):void 0)||[];Bt.push(...mt),this.headers.set(ke,Bt);break;case"d":const vn=Ae.value;if(vn){let Yt=this.headers.get(ke);if(!Yt)return;Yt=Yt.filter(Sn=>-1===vn.indexOf(Sn)),0===Yt.length?(this.headers.delete(ke),this.normalizedNames.delete(ke)):this.headers.set(ke,Yt)}else this.headers.delete(ke),this.normalizedNames.delete(ke)}}forEach(Ae){this.init(),Array.from(this.normalizedNames.keys()).forEach(ke=>Ae(this.normalizedNames.get(ke),this.headers.get(ke)))}}class Ge{encodeKey(Ae){return Se(Ae)}encodeValue(Ae){return Se(Ae)}decodeKey(Ae){return decodeURIComponent(Ae)}decodeValue(Ae){return decodeURIComponent(Ae)}}const at=/%(\d[a-f0-9])/gi,Ft={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Se(rt){return encodeURIComponent(rt).replace(at,(Ae,ke)=>{var mt;return null!==(mt=Ft[ke])&&void 0!==mt?mt:Ae})}function Le(rt){return`${rt}`}class Be{constructor(Ae={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ae.encoder||new Ge,Ae.fromString){if(Ae.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(rt,Ae){const ke=new Map;return rt.length>0&&rt.replace(/^\?/,"").split("&").forEach(Bt=>{const vn=Bt.indexOf("="),[Yt,Sn]=-1==vn?[Ae.decodeKey(Bt),""]:[Ae.decodeKey(Bt.slice(0,vn)),Ae.decodeValue(Bt.slice(vn+1))],ur=ke.get(Yt)||[];ur.push(Sn),ke.set(Yt,ur)}),ke}(Ae.fromString,this.encoder)}else Ae.fromObject?(this.map=new Map,Object.keys(Ae.fromObject).forEach(ke=>{const mt=Ae.fromObject[ke];this.map.set(ke,Array.isArray(mt)?mt:[mt])})):this.map=null}has(Ae){return this.init(),this.map.has(Ae)}get(Ae){this.init();const ke=this.map.get(Ae);return ke?ke[0]:null}getAll(Ae){return this.init(),this.map.get(Ae)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ae,ke){return this.clone({param:Ae,value:ke,op:"a"})}appendAll(Ae){const ke=[];return Object.keys(Ae).forEach(mt=>{const Bt=Ae[mt];Array.isArray(Bt)?Bt.forEach(vn=>{ke.push({param:mt,value:vn,op:"a"})}):ke.push({param:mt,value:Bt,op:"a"})}),this.clone(ke)}set(Ae,ke){return this.clone({param:Ae,value:ke,op:"s"})}delete(Ae,ke){return this.clone({param:Ae,value:ke,op:"d"})}toString(){return this.init(),this.keys().map(Ae=>{const ke=this.encoder.encodeKey(Ae);return this.map.get(Ae).map(mt=>ke+"="+this.encoder.encodeValue(mt)).join("&")}).filter(Ae=>""!==Ae).join("&")}clone(Ae){const ke=new Be({encoder:this.encoder});return ke.cloneFrom=this.cloneFrom||this,ke.updates=(this.updates||[]).concat(Ae),ke}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ae=>this.map.set(Ae,this.cloneFrom.map.get(Ae))),this.updates.forEach(Ae=>{switch(Ae.op){case"a":case"s":const ke=("a"===Ae.op?this.map.get(Ae.param):void 0)||[];ke.push(Le(Ae.value)),this.map.set(Ae.param,ke);break;case"d":if(void 0===Ae.value){this.map.delete(Ae.param);break}{let mt=this.map.get(Ae.param)||[];const Bt=mt.indexOf(Le(Ae.value));-1!==Bt&&mt.splice(Bt,1),mt.length>0?this.map.set(Ae.param,mt):this.map.delete(Ae.param)}}}),this.cloneFrom=this.updates=null)}}class ue{constructor(){this.map=new Map}set(Ae,ke){return this.map.set(Ae,ke),this}get(Ae){return this.map.has(Ae)||this.map.set(Ae,Ae.defaultValue()),this.map.get(Ae)}delete(Ae){return this.map.delete(Ae),this}keys(){return this.map.keys()}}function qe(rt){return"undefined"!=typeof ArrayBuffer&&rt instanceof ArrayBuffer}function Ye(rt){return"undefined"!=typeof Blob&&rt instanceof Blob}function _t(rt){return"undefined"!=typeof FormData&&rt instanceof FormData}class ht{constructor(Ae,ke,mt,Bt){let vn;if(this.url=ke,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ae.toUpperCase(),function(rt){switch(rt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Bt?(this.body=void 0!==mt?mt:null,vn=Bt):vn=mt,vn&&(this.reportProgress=!!vn.reportProgress,this.withCredentials=!!vn.withCredentials,vn.responseType&&(this.responseType=vn.responseType),vn.headers&&(this.headers=vn.headers),vn.context&&(this.context=vn.context),vn.params&&(this.params=vn.params)),this.headers||(this.headers=new ve),this.context||(this.context=new ue),this.params){const Yt=this.params.toString();if(0===Yt.length)this.urlWithParams=ke;else{const Sn=ke.indexOf("?");this.urlWithParams=ke+(-1===Sn?"?":Sn<ke.length-1?"&":"")+Yt}}else this.params=new Be,this.urlWithParams=ke}serializeBody(){return null===this.body?null:qe(this.body)||Ye(this.body)||_t(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Be?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_t(this.body)?null:Ye(this.body)?this.body.type||null:qe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Be?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ae={}){var ke;const mt=Ae.method||this.method,Bt=Ae.url||this.url,vn=Ae.responseType||this.responseType,Yt=void 0!==Ae.body?Ae.body:this.body,Sn=void 0!==Ae.withCredentials?Ae.withCredentials:this.withCredentials,ur=void 0!==Ae.reportProgress?Ae.reportProgress:this.reportProgress;let Mi=Ae.headers||this.headers,Yr=Ae.params||this.params;const kr=null!==(ke=Ae.context)&&void 0!==ke?ke:this.context;return void 0!==Ae.setHeaders&&(Mi=Object.keys(Ae.setHeaders).reduce((Kr,Cr)=>Kr.set(Cr,Ae.setHeaders[Cr]),Mi)),Ae.setParams&&(Yr=Object.keys(Ae.setParams).reduce((Kr,Cr)=>Kr.set(Cr,Ae.setParams[Cr]),Yr)),new ht(mt,Bt,Yt,{params:Yr,headers:Mi,context:kr,reportProgress:ur,responseType:vn,withCredentials:Sn})}}var it=(()=>((it=it||{})[it.Sent=0]="Sent",it[it.UploadProgress=1]="UploadProgress",it[it.ResponseHeader=2]="ResponseHeader",it[it.DownloadProgress=3]="DownloadProgress",it[it.Response=4]="Response",it[it.User=5]="User",it))();class It{constructor(Ae,ke=200,mt="OK"){this.headers=Ae.headers||new ve,this.status=void 0!==Ae.status?Ae.status:ke,this.statusText=Ae.statusText||mt,this.url=Ae.url||null,this.ok=this.status>=200&&this.status<300}}class xt extends It{constructor(Ae={}){super(Ae),this.type=it.ResponseHeader}clone(Ae={}){return new xt({headers:Ae.headers||this.headers,status:void 0!==Ae.status?Ae.status:this.status,statusText:Ae.statusText||this.statusText,url:Ae.url||this.url||void 0})}}class te extends It{constructor(Ae={}){super(Ae),this.type=it.Response,this.body=void 0!==Ae.body?Ae.body:null}clone(Ae={}){return new te({body:void 0!==Ae.body?Ae.body:this.body,headers:Ae.headers||this.headers,status:void 0!==Ae.status?Ae.status:this.status,statusText:Ae.statusText||this.statusText,url:Ae.url||this.url||void 0})}}class Ee extends It{constructor(Ae){super(Ae,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ae.url||"(unknown url)"}`:`Http failure response for ${Ae.url||"(unknown url)"}: ${Ae.status} ${Ae.statusText}`,this.error=Ae.error||null}}function Ve(rt,Ae){return{body:Ae,headers:rt.headers,context:rt.context,observe:rt.observe,params:rt.params,reportProgress:rt.reportProgress,responseType:rt.responseType,withCredentials:rt.withCredentials}}let bt=(()=>{class rt{constructor(ke){this.handler=ke}request(ke,mt,Bt={}){let vn;if(ke instanceof ht)vn=ke;else{let ur,Mi;ur=Bt.headers instanceof ve?Bt.headers:new ve(Bt.headers),Bt.params&&(Mi=Bt.params instanceof Be?Bt.params:new Be({fromObject:Bt.params})),vn=new ht(ke,mt,void 0!==Bt.body?Bt.body:null,{headers:ur,context:Bt.context,params:Mi,reportProgress:Bt.reportProgress,responseType:Bt.responseType||"json",withCredentials:Bt.withCredentials})}const Yt=(0,Pe.of)(vn).pipe((0,Ke.b)(ur=>this.handler.handle(ur)));if(ke instanceof ht||"events"===Bt.observe)return Yt;const Sn=Yt.pipe((0,_e.h)(ur=>ur instanceof te));switch(Bt.observe||"body"){case"body":switch(vn.responseType){case"arraybuffer":return Sn.pipe((0,nt.U)(ur=>{if(null!==ur.body&&!(ur.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ur.body}));case"blob":return Sn.pipe((0,nt.U)(ur=>{if(null!==ur.body&&!(ur.body instanceof Blob))throw new Error("Response is not a Blob.");return ur.body}));case"text":return Sn.pipe((0,nt.U)(ur=>{if(null!==ur.body&&"string"!=typeof ur.body)throw new Error("Response is not a string.");return ur.body}));case"json":default:return Sn.pipe((0,nt.U)(ur=>ur.body))}case"response":return Sn;default:throw new Error(`Unreachable: unhandled observe type ${Bt.observe}}`)}}delete(ke,mt={}){return this.request("DELETE",ke,mt)}get(ke,mt={}){return this.request("GET",ke,mt)}head(ke,mt={}){return this.request("HEAD",ke,mt)}jsonp(ke,mt){return this.request("JSONP",ke,{params:(new Be).append(mt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ke,mt={}){return this.request("OPTIONS",ke,mt)}patch(ke,mt,Bt={}){return this.request("PATCH",ke,Ve(Bt,mt))}post(ke,mt,Bt={}){return this.request("POST",ke,Ve(Bt,mt))}put(ke,mt,Bt={}){return this.request("PUT",ke,Ve(Bt,mt))}}return rt.\u0275fac=function(ke){return new(ke||rt)(_.LFG(xe))},rt.\u0275prov=_.Yz7({token:rt,factory:rt.\u0275fac}),rt})();class Vt{constructor(Ae,ke){this.next=Ae,this.interceptor=ke}handle(Ae){return this.interceptor.intercept(Ae,this.next)}}const tn=new _.OlP("HTTP_INTERCEPTORS");let Ot=(()=>{class rt{intercept(ke,mt){return mt.handle(ke)}}return rt.\u0275fac=function(ke){return new(ke||rt)},rt.\u0275prov=_.Yz7({token:rt,factory:rt.\u0275fac}),rt})();const Ht=/^\)\]\}',?\n/;let Jt=(()=>{class rt{constructor(ke){this.xhrFactory=ke}handle(ke){if("JSONP"===ke.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new we.y(mt=>{const Bt=this.xhrFactory.build();if(Bt.open(ke.method,ke.urlWithParams),ke.withCredentials&&(Bt.withCredentials=!0),ke.headers.forEach((Cr,rn)=>Bt.setRequestHeader(Cr,rn.join(","))),ke.headers.has("Accept")||Bt.setRequestHeader("Accept","application/json, text/plain, */*"),!ke.headers.has("Content-Type")){const Cr=ke.detectContentTypeHeader();null!==Cr&&Bt.setRequestHeader("Content-Type",Cr)}if(ke.responseType){const Cr=ke.responseType.toLowerCase();Bt.responseType="json"!==Cr?Cr:"text"}const vn=ke.serializeBody();let Yt=null;const Sn=()=>{if(null!==Yt)return Yt;const Cr=1223===Bt.status?204:Bt.status,rn=Bt.statusText||"OK",ce=new ve(Bt.getAllResponseHeaders()),pe=function(rt){return"responseURL"in rt&&rt.responseURL?rt.responseURL:/^X-Request-URL:/m.test(rt.getAllResponseHeaders())?rt.getResponseHeader("X-Request-URL"):null}(Bt)||ke.url;return Yt=new xt({headers:ce,status:Cr,statusText:rn,url:pe}),Yt},ur=()=>{let{headers:Cr,status:rn,statusText:ce,url:pe}=Sn(),Ze=null;204!==rn&&(Ze=void 0===Bt.response?Bt.responseText:Bt.response),0===rn&&(rn=Ze?200:0);let At=rn>=200&&rn<300;if("json"===ke.responseType&&"string"==typeof Ze){const _n=Ze;Ze=Ze.replace(Ht,"");try{Ze=""!==Ze?JSON.parse(Ze):null}catch(_r){Ze=_n,At&&(At=!1,Ze={error:_r,text:Ze})}}At?(mt.next(new te({body:Ze,headers:Cr,status:rn,statusText:ce,url:pe||void 0})),mt.complete()):mt.error(new Ee({error:Ze,headers:Cr,status:rn,statusText:ce,url:pe||void 0}))},Mi=Cr=>{const{url:rn}=Sn(),ce=new Ee({error:Cr,status:Bt.status||0,statusText:Bt.statusText||"Unknown Error",url:rn||void 0});mt.error(ce)};let Yr=!1;const kr=Cr=>{Yr||(mt.next(Sn()),Yr=!0);let rn={type:it.DownloadProgress,loaded:Cr.loaded};Cr.lengthComputable&&(rn.total=Cr.total),"text"===ke.responseType&&!!Bt.responseText&&(rn.partialText=Bt.responseText),mt.next(rn)},Kr=Cr=>{let rn={type:it.UploadProgress,loaded:Cr.loaded};Cr.lengthComputable&&(rn.total=Cr.total),mt.next(rn)};return Bt.addEventListener("load",ur),Bt.addEventListener("error",Mi),Bt.addEventListener("timeout",Mi),Bt.addEventListener("abort",Mi),ke.reportProgress&&(Bt.addEventListener("progress",kr),null!==vn&&Bt.upload&&Bt.upload.addEventListener("progress",Kr)),Bt.send(vn),mt.next({type:it.Sent}),()=>{Bt.removeEventListener("error",Mi),Bt.removeEventListener("abort",Mi),Bt.removeEventListener("load",ur),Bt.removeEventListener("timeout",Mi),ke.reportProgress&&(Bt.removeEventListener("progress",kr),null!==vn&&Bt.upload&&Bt.upload.removeEventListener("progress",Kr)),Bt.readyState!==Bt.DONE&&Bt.abort()}})}}return rt.\u0275fac=function(ke){return new(ke||rt)(_.LFG(Q.JF))},rt.\u0275prov=_.Yz7({token:rt,factory:rt.\u0275fac}),rt})();const Gr=new _.OlP("XSRF_COOKIE_NAME"),Ro=new _.OlP("XSRF_HEADER_NAME");class Br{}let Vi=(()=>{class rt{constructor(ke,mt,Bt){this.doc=ke,this.platform=mt,this.cookieName=Bt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ke=this.doc.cookie||"";return ke!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,Q.Mx)(ke,this.cookieName),this.lastCookieString=ke),this.lastToken}}return rt.\u0275fac=function(ke){return new(ke||rt)(_.LFG(Q.K0),_.LFG(_.Lbi),_.LFG(Gr))},rt.\u0275prov=_.Yz7({token:rt,factory:rt.\u0275fac}),rt})(),Wn=(()=>{class rt{constructor(ke,mt){this.tokenService=ke,this.headerName=mt}intercept(ke,mt){const Bt=ke.url.toLowerCase();if("GET"===ke.method||"HEAD"===ke.method||Bt.startsWith("http://")||Bt.startsWith("https://"))return mt.handle(ke);const vn=this.tokenService.getToken();return null!==vn&&!ke.headers.has(this.headerName)&&(ke=ke.clone({headers:ke.headers.set(this.headerName,vn)})),mt.handle(ke)}}return rt.\u0275fac=function(ke){return new(ke||rt)(_.LFG(Br),_.LFG(Ro))},rt.\u0275prov=_.Yz7({token:rt,factory:rt.\u0275fac}),rt})(),Wt=(()=>{class rt{constructor(ke,mt){this.backend=ke,this.injector=mt,this.chain=null}handle(ke){if(null===this.chain){const mt=this.injector.get(tn,[]);this.chain=mt.reduceRight((Bt,vn)=>new Vt(Bt,vn),this.backend)}return this.chain.handle(ke)}}return rt.\u0275fac=function(ke){return new(ke||rt)(_.LFG(We),_.LFG(_.zs3))},rt.\u0275prov=_.Yz7({token:rt,factory:rt.\u0275fac}),rt})(),en=(()=>{class rt{static disable(){return{ngModule:rt,providers:[{provide:Wn,useClass:Ot}]}}static withOptions(ke={}){return{ngModule:rt,providers:[ke.cookieName?{provide:Gr,useValue:ke.cookieName}:[],ke.headerName?{provide:Ro,useValue:ke.headerName}:[]]}}}return rt.\u0275fac=function(ke){return new(ke||rt)},rt.\u0275mod=_.oAB({type:rt}),rt.\u0275inj=_.cJS({providers:[Wn,{provide:tn,useExisting:Wn,multi:!0},{provide:Br,useClass:Vi},{provide:Gr,useValue:"XSRF-TOKEN"},{provide:Ro,useValue:"X-XSRF-TOKEN"}]}),rt})(),Ln=(()=>{class rt{}return rt.\u0275fac=function(ke){return new(ke||rt)},rt.\u0275mod=_.oAB({type:rt}),rt.\u0275inj=_.cJS({providers:[bt,{provide:xe,useClass:Wt},Jt,{provide:We,useExisting:Jt}],imports:[[en.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),rt})()},7716:(Tt,St,ee)=>{"use strict";ee.d(St,{deG:()=>Zl,tb:()=>pF,AFp:()=>SC,ip1:()=>hE,CZH:()=>eu,hGG:()=>SO,z2F:()=>fv,sBO:()=>oN,Sil:()=>uf,_Vd:()=>Qh,EJc:()=>mF,SBq:()=>fh,qLn:()=>qf,vpe:()=>of,gxx:()=>bd,tBr:()=>Lh,XFs:()=>en,OlP:()=>fo,zs3:()=>po,ZZ4:()=>tv,aQg:()=>J_,soG:()=>Sp,YKP:()=>iv,v3s:()=>fO,h0i:()=>Zg,PXZ:()=>SF,R0b:()=>ec,FiY:()=>Ha,Lbi:()=>dv,g9A:()=>om,n_E:()=>EC,Qsj:()=>HM,FYo:()=>Jw,JOm:()=>Uu,Tiy:()=>vp,q3G:()=>Io,tp0:()=>Jl,EAV:()=>yt,Rgc:()=>Kg,dDg:()=>bF,DyG:()=>Ff,GfV:()=>WM,s_b:()=>rC,ifc:()=>Yt,eFA:()=>cO,G48:()=>sO,Gpc:()=>Ge,f3M:()=>Tl,X6Q:()=>qT,_c5:()=>G4,VLi:()=>O4,c2e:()=>gF,zSh:()=>Dg,wAp:()=>nr,vHH:()=>Se,EiD:()=>Pb,mCW:()=>pd,qzn:()=>yg,JVY:()=>Gh,pB0:()=>Zo,eBb:()=>UI,L6k:()=>Iy,LAX:()=>fd,cg1:()=>F_,Tjo:()=>bO,kL8:()=>q0,yhl:()=>Py,dqk:()=>kr,sIi:()=>Gg,CqO:()=>Wu,QGY:()=>S1,F4k:()=>zA,RDi:()=>wa,AaK:()=>xe,z3N:()=>xc,qOj:()=>On,TTD:()=>ml,_Bn:()=>Q0,xp6:()=>ip,uIk:()=>l1,Gre:()=>H0,ekj:()=>M1,Suo:()=>$N,Xpm:()=>xo,lG2:()=>$s,Yz7:()=>cn,cJS:()=>qn,oAB:()=>To,Yjl:()=>Ho,Y36:()=>Nw,_UZ:()=>UA,BQk:()=>C1,ynx:()=>w1,qZA:()=>b1,TgZ:()=>Lc,EpF:()=>VA,n5z:()=>K,Ikx:()=>N1,SDv:()=>BM,LFG:()=>As,$8M:()=>Ne,NdJ:()=>x1,CRH:()=>eF,oxw:()=>Gw,Hsn:()=>YA,F$t:()=>T1,Q6J:()=>_1,iGM:()=>JN,MAs:()=>TA,CHM:()=>qd,LSH:()=>n0,kYT:()=>hl,Udp:()=>A1,YNc:()=>xA,_uU:()=>uM,Oqu:()=>O1,hij:()=>k_,Gf:()=>QN});var Q=ee(9765),_=ee(5319),Pe=ee(7574),we=ee(6682),Ke=ee(8819);function _e(l){for(let u in l)if(l[u]===_e)return u;throw Error("Could not find renamed property on target object.")}function nt(l,u){for(const d in u)u.hasOwnProperty(d)&&!l.hasOwnProperty(d)&&(l[d]=u[d])}function xe(l){if("string"==typeof l)return l;if(Array.isArray(l))return"["+l.map(xe).join(", ")+"]";if(null==l)return""+l;if(l.overriddenName)return`${l.overriddenName}`;if(l.name)return`${l.name}`;const u=l.toString();if(null==u)return""+u;const d=u.indexOf("\n");return-1===d?u:u.substring(0,d)}function We(l,u){return null==l||""===l?null===u?"":u:null==u||""===u?l:l+" "+u}const ve=_e({__forward_ref__:_e});function Ge(l){return l.__forward_ref__=Ge,l.toString=function(){return xe(this())},l}function Ie(l){return at(l)?l():l}function at(l){return"function"==typeof l&&l.hasOwnProperty(ve)&&l.__forward_ref__===Ge}class Se extends Error{constructor(u,d){super(function(l,u){return`${l?`NG0${l}: `:""}${u}`}(u,d)),this.code=u}}function ge(l){return"string"==typeof l?l:null==l?"":String(l)}function ue(l){return"function"==typeof l?l.name||l.toString():"object"==typeof l&&null!=l&&"function"==typeof l.type?l.type.name||l.type.toString():ge(l)}function _t(l,u){const d=u?` in ${u}`:"";throw new Se("201",`No provider for ${ue(l)} found${d}`)}function un(l,u,d,g){throw new Error(`ASSERTION ERROR: ${l}`+(null==g?"":` [Expected=> ${d} ${g} ${u} <=Actual]`))}function cn(l){return{token:l.token,providedIn:l.providedIn||null,factory:l.factory,value:void 0}}function qn(l){return{providers:l.providers||[],imports:l.imports||[]}}function Jt(l){return Gr(l,Wn)||Gr(l,io)}function Gr(l,u){return l.hasOwnProperty(u)?l[u]:null}function Vi(l){return l&&(l.hasOwnProperty(Wt)||l.hasOwnProperty(wr))?l[Wt]:null}const Wn=_e({\u0275prov:_e}),Wt=_e({\u0275inj:_e}),io=_e({ngInjectableDef:_e}),wr=_e({ngInjectorDef:_e});var en=(()=>((en=en||{})[en.Default=0]="Default",en[en.Host=1]="Host",en[en.Self=2]="Self",en[en.SkipSelf=4]="SkipSelf",en[en.Optional=8]="Optional",en))();let Ln;function zt(l){const u=Ln;return Ln=l,u}function rt(l,u,d){const g=Jt(l);return g&&"root"==g.providedIn?void 0===g.value?g.value=g.factory():g.value:d&en.Optional?null:void 0!==u?u:void _t(xe(l),"Injector")}function ke(l){return{toString:l}.toString()}var mt=(()=>((mt=mt||{})[mt.OnPush=0]="OnPush",mt[mt.Default=1]="Default",mt))(),Yt=(()=>((Yt=Yt||{})[Yt.Emulated=0]="Emulated",Yt[Yt.None=2]="None",Yt[Yt.ShadowDom=3]="ShadowDom",Yt))();const Sn="undefined"!=typeof globalThis&&globalThis,ur="undefined"!=typeof window&&window,Mi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Yr="undefined"!=typeof global&&global,kr=Sn||Yr||ur||Mi,rn={},ce=[],pe=_e({\u0275cmp:_e}),Ze=_e({\u0275dir:_e}),At=_e({\u0275pipe:_e}),_n=_e({\u0275mod:_e}),_r=_e({\u0275loc:_e}),Sr=_e({\u0275fac:_e}),Zr=_e({__NG_ELEMENT_ID__:_e});let zi=0;function xo(l){return ke(()=>{const d={},g={type:l.type,providersResolver:null,decls:l.decls,vars:l.vars,factory:null,template:l.template||null,consts:l.consts||null,ngContentSelectors:l.ngContentSelectors,hostBindings:l.hostBindings||null,hostVars:l.hostVars||0,hostAttrs:l.hostAttrs||null,contentQueries:l.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:l.exportAs||null,onPush:l.changeDetection===mt.OnPush,directiveDefs:null,pipeDefs:null,selectors:l.selectors||ce,viewQuery:l.viewQuery||null,features:l.features||null,data:l.data||{},encapsulation:l.encapsulation||Yt.Emulated,id:"c",styles:l.styles||ce,_:null,setInput:null,schemas:l.schemas||null,tView:null},v=l.directives,C=l.features,T=l.pipes;return g.id+=zi++,g.inputs=Hi(l.inputs,d),g.outputs=Hi(l.outputs),C&&C.forEach(I=>I(g)),g.directiveDefs=v?()=>("function"==typeof v?v():v).map(cr):null,g.pipeDefs=T?()=>("function"==typeof T?T():T).map(fr):null,g})}function cr(l){return ns(l)||function(l){return l[Ze]||null}(l)}function fr(l){return function(l){return l[At]||null}(l)}const Vn={};function To(l){return ke(()=>{const u={type:l.type,bootstrap:l.bootstrap||ce,declarations:l.declarations||ce,imports:l.imports||ce,exports:l.exports||ce,transitiveCompileScopes:null,schemas:l.schemas||null,id:l.id||null};return null!=l.id&&(Vn[l.id]=l.type),u})}function hl(l,u){return ke(()=>{const d=oo(l,!0);d.declarations=u.declarations||ce,d.imports=u.imports||ce,d.exports=u.exports||ce})}function Hi(l,u){if(null==l)return rn;const d={};for(const g in l)if(l.hasOwnProperty(g)){let v=l[g],C=v;Array.isArray(v)&&(C=v[1],v=v[0]),d[v]=g,u&&(u[v]=C)}return d}const $s=xo;function Ho(l){return{type:l.type,name:l.name,factory:null,pure:!1!==l.pure,onDestroy:l.type.prototype.ngOnDestroy||null}}function ns(l){return l[pe]||null}function oo(l,u){const d=l[_n]||null;if(!d&&!0===u)throw new Error(`Type ${xe(l)} does not have '\u0275mod' property.`);return d}function Fi(l){return Array.isArray(l)&&"object"==typeof l[1]}function qr(l){return Array.isArray(l)&&!0===l[1]}function Ts(l){return 0!=(8&l.flags)}function Xo(l){return 2==(2&l.flags)}function Hs(l){return 1==(1&l.flags)}function ho(l){return null!==l.template}function ao(l){return 0!=(512&l[2])}function Ga(l,u){return l.hasOwnProperty(Sr)?l[Sr]:null}class gc{constructor(u,d,g){this.previousValue=u,this.currentValue=d,this.firstChange=g}isFirstChange(){return this.firstChange}}function ml(){return td}function td(l){return l.type.prototype.ngOnChanges&&(l.setInput=nd),Zi}function Zi(){const l=cu(this),u=null==l?void 0:l.current;if(u){const d=l.previous;if(d===rn)l.previous=u;else for(let g in u)d[g]=u[g];l.current=null,this.ngOnChanges(u)}}function nd(l,u,d,g){const v=cu(l)||function(l,u){return l[mc]=u}(l,{previous:rn,current:null}),C=v.current||(v.current={}),T=v.previous,I=this.declaredInputs[d],N=T[I];C[I]=new gc(N&&N.currentValue,u,T===rn),l[g]=u}ml.ngInherit=!0;const mc="__ngSimpleChanges__";function cu(l){return l[mc]||null}let ba;function wa(l){ba=l}function yl(){return void 0!==ba?ba:"undefined"!=typeof document?document:void 0}function H(l){return!!l.listen}const q={createRenderer:(l,u)=>yl()};function ze(l){for(;Array.isArray(l);)l=l[0];return l}function Yn(l,u){return ze(u[l])}function tr(l,u){return ze(u[l.index])}function Gn(l,u){return l.data[u]}function xi(l,u){const d=u[l];return Fi(d)?d:d[0]}function ei(l){return 4==(4&l[2])}function Bs(l){return 128==(128&l[2])}function Xs(l,u){return null==u?null:l[u]}function _l(l){l[18]=0}function Ks(l,u){l[5]+=u;let d=l,g=l[3];for(;null!==g&&(1===u&&1===d[5]||-1===u&&0===d[5]);)g[5]+=u,d=g,g=g[3]}const sr={lFrame:cs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Rf(){return sr.bindingsEnabled}function Qt(){return sr.lFrame.lView}function ui(){return sr.lFrame.tView}function qd(l){return sr.lFrame.contextLView=l,l[8]}function Do(){let l=Lu();for(;null!==l&&64===l.type;)l=l.parent;return l}function Lu(){return sr.lFrame.currentTNode}function Kl(){const l=sr.lFrame,u=l.currentTNode;return l.isParent?u:u.parent}function fa(l,u){const d=sr.lFrame;d.currentTNode=l,d.isParent=u}function re(){return sr.lFrame.isParent}function A(){sr.lFrame.isParent=!1}function ne(){return sr.isInCheckNoChangesMode}function ye(l){sr.isInCheckNoChangesMode=l}function Ut(){return sr.lFrame.bindingIndex++}function gn(l){const u=sr.lFrame,d=u.bindingIndex;return u.bindingIndex=u.bindingIndex+l,d}function Er(l){sr.lFrame.inI18n=l}function yi(l,u){const d=sr.lFrame;d.bindingIndex=d.bindingRootIndex=l,Or(u)}function Or(l){sr.lFrame.currentDirectiveIndex=l}function Po(){return sr.lFrame.currentQueryIndex}function lo(l){sr.lFrame.currentQueryIndex=l}function pa(l){const u=l[1];return 2===u.type?u.declTNode:1===u.type?l[6]:null}function Ps(l,u,d){if(d&en.SkipSelf){let v=u,C=l;for(;!(v=v.parent,null!==v||d&en.Host||(v=pa(C),null===v||(C=C[15],10&v.type))););if(null===v)return!1;u=v,l=C}const g=sr.lFrame=to();return g.currentTNode=u,g.lView=l,!0}function El(l){const u=to(),d=l[1];sr.lFrame=u,u.currentTNode=d.firstChild,u.lView=l,u.tView=d,u.contextLView=l,u.bindingIndex=d.bindingStartIndex,u.inI18n=!1}function to(){const l=sr.lFrame,u=null===l?null:l.child;return null===u?cs(l):u}function cs(l){const u={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:l,child:null,inI18n:!1};return null!==l&&(l.child=u),u}function Ba(){const l=sr.lFrame;return sr.lFrame=l.parent,l.currentTNode=null,l.lView=null,l}const ga=Ba;function ja(){const l=Ba();l.isParent=!0,l.tView=null,l.selectedIndex=-1,l.contextLView=null,l.elementDepthCount=0,l.currentDirectiveIndex=-1,l.currentNamespace=null,l.bindingRootIndex=-1,l.bindingIndex=-1,l.currentQueryIndex=0}function ko(){return sr.lFrame.selectedIndex}function gu(l){sr.lFrame.selectedIndex=l}function Ko(){const l=sr.lFrame;return Gn(l.tView,l.selectedIndex)}function ds(l,u){for(let d=u.directiveStart,g=u.directiveEnd;d<g;d++){const C=l.data[d].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:I,ngAfterViewInit:N,ngAfterViewChecked:V,ngOnDestroy:Z}=C;T&&(l.contentHooks||(l.contentHooks=[])).push(-d,T),I&&((l.contentHooks||(l.contentHooks=[])).push(d,I),(l.contentCheckHooks||(l.contentCheckHooks=[])).push(d,I)),N&&(l.viewHooks||(l.viewHooks=[])).push(-d,N),V&&((l.viewHooks||(l.viewHooks=[])).push(d,V),(l.viewCheckHooks||(l.viewCheckHooks=[])).push(d,V)),null!=Z&&(l.destroyHooks||(l.destroyHooks=[])).push(d,Z)}}function Is(l,u,d){wl(l,u,3,d)}function _o(l,u,d,g){(3&l[2])===d&&wl(l,u,d,g)}function ku(l,u){let d=l[2];(3&d)===u&&(d&=2047,d+=1,l[2]=d)}function wl(l,u,d,g){const C=null!=g?g:-1,T=u.length-1;let I=0;for(let N=void 0!==g?65535&l[18]:0;N<T;N++)if("number"==typeof u[N+1]){if(I=u[N],null!=g&&I>=g)break}else u[N]<0&&(l[18]+=65536),(I<C||-1==C)&&(od(l,d,u,N),l[18]=(4294901760&l[18])+N+2),N++}function od(l,u,d,g){const v=d[g]<0,C=d[g+1],I=l[v?-d[g]:d[g]];if(v){if(l[2]>>11<l[18]>>16&&(3&l[2])===u){l[2]+=2048;try{C.call(I)}finally{}}}else try{C.call(I)}finally{}}class Cl{constructor(u,d,g){this.factory=u,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=g}}function mu(l,u,d){const g=H(l);let v=0;for(;v<d.length;){const C=d[v];if("number"==typeof C){if(0!==C)break;v++;const T=d[v++],I=d[v++],N=d[v++];g?l.setAttribute(u,I,N,T):u.setAttributeNS(T,I,N)}else{const T=C,I=d[++v];Fm(T)?g&&l.setProperty(u,T,I):g?l.setAttribute(u,T,I):u.setAttribute(T,I),v++}}return v}function ng(l){return 3===l||4===l||6===l}function Fm(l){return 64===l.charCodeAt(0)}function ad(l,u){if(null!==u&&0!==u.length)if(null===l||0===l.length)l=u.slice();else{let d=-1;for(let g=0;g<u.length;g++){const v=u[g];"number"==typeof v?d=v:0===d||rg(l,d,v,null,-1===d||2===d?u[++g]:null)}}return l}function rg(l,u,d,g,v){let C=0,T=l.length;if(-1===u)T=-1;else for(;C<l.length;){const I=l[C++];if("number"==typeof I){if(I===u){T=-1;break}if(I>u){T=C-1;break}}}for(;C<l.length;){const I=l[C];if("number"==typeof I)break;if(I===d){if(null===g)return void(null!==v&&(l[C+1]=v));if(g===l[C+1])return void(l[C+2]=v)}C++,null!==g&&C++,null!==v&&C++}-1!==T&&(l.splice(T,0,u),C=T+1),l.splice(C++,0,d),null!==g&&l.splice(C++,0,g),null!==v&&l.splice(C++,0,v)}function Gm(l){return-1!==l}function Mh(l){return 32767&l}function _c(l,u){let d=function(l){return l>>16}(l),g=u;for(;d>0;)g=g[15],d--;return g}let kf=!0;function ly(l){const u=kf;return kf=l,u}let pb=0;function Nf(l,u){const d=Bm(l,u);if(-1!==d)return d;const g=u[1];g.firstCreatePass&&(l.injectorIndex=u.length,og(g.data,l),og(u,null),og(g.blueprint,null));const v=bc(l,u),C=l.injectorIndex;if(Gm(v)){const T=Mh(v),I=_c(v,u),N=I[1].data;for(let V=0;V<8;V++)u[C+V]=I[T+V]|N[T+V]}return u[C+8]=v,C}function og(l,u){l.push(0,0,0,0,0,0,0,0,u)}function Bm(l,u){return-1===l.injectorIndex||l.parent&&l.parent.injectorIndex===l.injectorIndex||null===u[l.injectorIndex+8]?-1:l.injectorIndex}function bc(l,u){if(l.parent&&-1!==l.parent.injectorIndex)return l.parent.injectorIndex;let d=0,g=null,v=u;for(;null!==v;){const C=v[1],T=C.type;if(g=2===T?C.declTNode:1===T?v[6]:null,null===g)return-1;if(d++,v=v[15],-1!==g.injectorIndex)return g.injectorIndex|d<<16}return-1}function ld(l,u,d){!function(l,u,d){let g;"string"==typeof d?g=d.charCodeAt(0)||0:d.hasOwnProperty(Zr)&&(g=d[Zr]),null==g&&(g=d[Zr]=pb++);const v=255&g;u.data[l+(v>>5)]|=1<<v}(l,u,d)}function jm(l,u,d){if(d&en.Optional)return l;_t(u,"NodeInjector")}function Um(l,u,d,g){if(d&en.Optional&&void 0===g&&(g=null),0==(d&(en.Self|en.Host))){const v=l[9],C=zt(void 0);try{return v?v.get(u,g,d&en.Optional):rt(u,g,d&en.Optional)}finally{zt(C)}}return jm(g,u,d)}function sg(l,u,d,g=en.Default,v){if(null!==l){const C=function(l){if("string"==typeof l)return l.charCodeAt(0)||0;const u=l.hasOwnProperty(Zr)?l[Zr]:void 0;return"number"==typeof u?u>=0?255&u:gb:u}(d);if("function"==typeof C){if(!Ps(u,l,g))return g&en.Host?jm(v,d,g):Um(u,d,g,v);try{const T=C(g);if(null!=T||g&en.Optional)return T;_t(d)}finally{ga()}}else if("number"==typeof C){let T=null,I=Bm(l,u),N=-1,V=g&en.Host?u[16][6]:null;for((-1===I||g&en.SkipSelf)&&(N=-1===I?bc(l,u):u[I+8],-1!==N&&O(g,!1)?(T=u[1],I=Mh(N),u=_c(N,u)):I=-1);-1!==I;){const Z=u[1];if(k(C,I,Z.data)){const de=Vm(I,u,d,T,g,V);if(de!==cy)return de}N=u[I+8],-1!==N&&O(g,u[1].data[I+8]===V)&&k(C,I,u)?(T=Z,I=Mh(N),u=_c(N,u)):I=-1}}}return Um(u,d,g,v)}const cy={};function gb(){return new z(Do(),Qt())}function Vm(l,u,d,g,v,C){const T=u[1],I=T.data[l+8],Z=ag(I,T,d,null==g?Xo(I)&&kf:g!=T&&0!=(3&I.type),v&en.Host&&C===I);return null!==Z?lg(u,T,Z,I):cy}function ag(l,u,d,g,v){const C=l.providerIndexes,T=u.data,I=1048575&C,N=l.directiveStart,Z=C>>20,be=v?I+Z:l.directiveEnd;for(let He=g?I:I+Z;He<be;He++){const lt=T[He];if(He<N&&d===lt||He>=N&&lt.type===d)return He}if(v){const He=T[N];if(He&&ho(He)&&He.type===d)return N}return null}function lg(l,u,d,g){let v=l[d];const C=u.data;if(function(l){return l instanceof Cl}(v)){const T=v;T.resolving&&function(l,u){throw new Se("200",`Circular dependency in DI detected for ${l}`)}(ue(C[d]));const I=ly(T.canSeeViewProviders);T.resolving=!0;const N=T.injectImpl?zt(T.injectImpl):null;Ps(l,g,en.Default);try{v=l[d]=T.factory(void 0,C,l,g),u.firstCreatePass&&d>=g.directiveStart&&function(l,u,d){const{ngOnChanges:g,ngOnInit:v,ngDoCheck:C}=u.type.prototype;if(g){const T=td(u);(d.preOrderHooks||(d.preOrderHooks=[])).push(l,T),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(l,T)}v&&(d.preOrderHooks||(d.preOrderHooks=[])).push(0-l,v),C&&((d.preOrderHooks||(d.preOrderHooks=[])).push(l,C),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(l,C))}(d,C[d],u)}finally{null!==N&&zt(N),ly(I),T.resolving=!1,ga()}}return v}function k(l,u,d){return!!(d[u+(l>>5)]&1<<l)}function O(l,u){return!(l&en.Self||l&en.Host&&u)}class z{constructor(u,d){this._tNode=u,this._lView=d}get(u,d){return sg(this._tNode,this._lView,u,void 0,d)}}function K(l){return ke(()=>{const u=l.prototype.constructor,d=u[Sr]||ae(u),g=Object.prototype;let v=Object.getPrototypeOf(l.prototype).constructor;for(;v&&v!==g;){const C=v[Sr]||ae(v);if(C&&C!==d)return C;v=Object.getPrototypeOf(v)}return C=>new C})}function ae(l){return at(l)?()=>{const u=ae(Ie(l));return u&&u()}:Ga(l)}function Ne(l){return function(l,u){if("class"===u)return l.classes;if("style"===u)return l.styles;const d=l.attrs;if(d){const g=d.length;let v=0;for(;v<g;){const C=d[v];if(ng(C))break;if(0===C)v+=2;else if("number"==typeof C)for(v++;v<g&&"string"==typeof d[v];)v++;else{if(C===u)return d[v+1];v+=2}}}return null}(Do(),l)}const jt="__parameters__";function uo(l,u,d){return ke(()=>{const g=function(l){return function(...d){if(l){const g=l(...d);for(const v in g)this[v]=g[v]}}}(u);function v(...C){if(this instanceof v)return g.apply(this,C),this;const T=new v(...C);return I.annotation=T,I;function I(N,V,Z){const de=N.hasOwnProperty(jt)?N[jt]:Object.defineProperty(N,jt,{value:[]})[jt];for(;de.length<=Z;)de.push(null);return(de[Z]=de[Z]||[]).push(T),N}}return d&&(v.prototype=Object.create(d.prototype)),v.prototype.ngMetadataName=l,v.annotationCls=v,v})}class fo{constructor(u,d){this._desc=u,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=cn({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Zl=new fo("AnalyzeForEntryComponents"),Ff=Function;function Eo(l,u){void 0===u&&(u=l);for(let d=0;d<l.length;d++){let g=l[d];Array.isArray(g)?(u===l&&(u=l.slice(0,d)),Eo(g,u)):u!==l&&u.push(g)}return u}function Fu(l,u){l.forEach(d=>Array.isArray(d)?Fu(d,u):u(d))}function cg(l,u,d){u>=l.length?l.push(d):l.splice(u,0,d)}function No(l,u){return u>=l.length-1?l.pop():l.splice(u,1)[0]}function Ca(l,u){const d=[];for(let g=0;g<l;g++)d.push(u);return d}function Di(l,u,d){let g=Ri(l,u);return g>=0?l[1|g]=d:(g=~g,function(l,u,d,g){let v=l.length;if(v==u)l.push(d,g);else if(1===v)l.push(g,l[0]),l[0]=d;else{for(v--,l.push(l[v-1],l[v]);v>u;)l[v]=l[v-2],v--;l[u]=d,l[u+1]=g}}(l,g,u,d)),g}function Cc(l,u){const d=Ri(l,u);if(d>=0)return l[1|d]}function Ri(l,u){return function(l,u,d){let g=0,v=l.length>>d;for(;v!==g;){const C=g+(v-g>>1),T=l[C<<d];if(u===T)return C<<d;T>u?v=C:g=C+1}return~(v<<d)}(l,u,1)}const hg={},gy="__NG_DI_FLAG__",Gu="ngTempTokenPath",Hm=/\n/gm,vy="__source",zS=_e({provide:String,useValue:_e});let Uf;function Zd(l){const u=Uf;return Uf=l,u}function NI(l,u=en.Default){if(void 0===Uf)throw new Error("inject() must be called from an injection context");return null===Uf?rt(l,void 0,u):Uf.get(l,u&en.Optional?null:void 0,u)}function As(l,u=en.Default){return(Ln||NI)(Ie(l),u)}const Tl=As;function fg(l){const u=[];for(let d=0;d<l.length;d++){const g=Ie(l[d]);if(Array.isArray(g)){if(0===g.length)throw new Error("Arguments array must have arguments.");let v,C=en.Default;for(let T=0;T<g.length;T++){const I=g[T],N=HS(I);"number"==typeof N?-1===N?v=I.token:C|=N:v=I}u.push(As(v,C))}else u.push(As(g))}return u}function yy(l,u){return l[gy]=u,l.prototype[gy]=u,l}function HS(l){return l[gy]}function _y(l,u,d,g){const v=l[Gu];throw u[vy]&&v.unshift(u[vy]),l.message=function(l,u,d,g=null){l=l&&"\n"===l.charAt(0)&&"\u0275"==l.charAt(1)?l.substr(2):l;let v=xe(u);if(Array.isArray(u))v=u.map(xe).join(" -> ");else if("object"==typeof u){let C=[];for(let T in u)if(u.hasOwnProperty(T)){let I=u[T];C.push(T+":"+("string"==typeof I?JSON.stringify(I):xe(I)))}v=`{${C.join(", ")}}`}return`${d}${g?"("+g+")":""}[${v}]: ${l.replace(Hm,"\n  ")}`}("\n"+l.message,v,d,g),l.ngTokenPath=v,l[Gu]=null,l}const Lh=yy(uo("Inject",l=>({token:l})),-1),Ha=yy(uo("Optional"),8),Jl=yy(uo("SkipSelf"),4);let mg;function vg(l){var u;return(null===(u=function(){if(void 0===mg&&(mg=null,kr.trustedTypes))try{mg=kr.trustedTypes.createPolicy("angular",{createHTML:l=>l,createScript:l=>l,createScriptURL:l=>l})}catch(l){}return mg}())||void 0===u?void 0:u.createHTML(l))||l}class ju{constructor(u){this.changingThisBreaksApplicationSecurity=u}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Hf extends ju{getTypeName(){return"HTML"}}class vu extends ju{getTypeName(){return"Style"}}class _b extends ju{getTypeName(){return"Script"}}class Ty extends ju{getTypeName(){return"URL"}}class Eb extends ju{getTypeName(){return"ResourceURL"}}function xc(l){return l instanceof ju?l.changingThisBreaksApplicationSecurity:l}function yg(l,u){const d=Py(l);if(null!=d&&d!==u){if("ResourceURL"===d&&"URL"===u)return!0;throw new Error(`Required a safe ${u}, got a ${d} (see https://g.co/ng/security#xss)`)}return d===u}function Py(l){return l instanceof ju&&l.getTypeName()||null}function Gh(l){return new Hf(l)}function Iy(l){return new vu(l)}function UI(l){return new _b(l)}function fd(l){return new Ty(l)}function Zo(l){return new Eb(l)}function Wf(l){const u=new VI(l);return function(){try{return!!(new window.DOMParser).parseFromString(vg(""),"text/html")}catch(l){return!1}}()?new bb(u):u}class bb{constructor(u){this.inertDocumentHelper=u}getInertBodyElement(u){u="<body><remove></remove>"+u;try{const d=(new window.DOMParser).parseFromString(vg(u),"text/html").body;return null===d?this.inertDocumentHelper.getInertBodyElement(u):(d.removeChild(d.firstChild),d)}catch(d){return null}}}class VI{constructor(u){if(this.defaultDoc=u,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const d=this.inertDocument.createElement("html");this.inertDocument.appendChild(d);const g=this.inertDocument.createElement("body");d.appendChild(g)}}getInertBodyElement(u){const d=this.inertDocument.createElement("template");if("content"in d)return d.innerHTML=vg(u),d;const g=this.inertDocument.createElement("body");return g.innerHTML=vg(u),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(g),g}stripCustomNsAttrs(u){const d=u.attributes;for(let v=d.length-1;0<v;v--){const T=d.item(v).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&u.removeAttribute(T)}let g=u.firstChild;for(;g;)g.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(g),g=g.nextSibling}}const Jm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ay=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function pd(l){return(l=String(l)).match(Jm)||l.match(Ay)?l:"unsafe:"+l}function My(l){return(l=String(l)).split(",").map(u=>pd(u.trim())).join(", ")}function yn(l){const u={};for(const d of l.split(","))u[d]=!0;return u}function _g(...l){const u={};for(const d of l)for(const g in d)d.hasOwnProperty(g)&&(u[g]=!0);return u}const Cb=yn("area,br,col,hr,img,wbr"),Sb=yn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xb=yn("rp,rt"),$a=_g(Cb,_g(Sb,yn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),_g(xb,yn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),_g(xb,Sb)),Qm=yn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ry=yn("srcset"),$m=_g(Qm,Ry,yn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),yn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Oy=yn("script,style,template");class Bh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(u){let d=u.firstChild,g=!0;for(;d;)if(d.nodeType===Node.ELEMENT_NODE?g=this.startElement(d):d.nodeType===Node.TEXT_NODE?this.chars(d.nodeValue):this.sanitizedSomething=!0,g&&d.firstChild)d=d.firstChild;else for(;d;){d.nodeType===Node.ELEMENT_NODE&&this.endElement(d);let v=this.checkClobberedElement(d,d.nextSibling);if(v){d=v;break}d=this.checkClobberedElement(d,d.parentNode)}return this.buf.join("")}startElement(u){const d=u.nodeName.toLowerCase();if(!$a.hasOwnProperty(d))return this.sanitizedSomething=!0,!Oy.hasOwnProperty(d);this.buf.push("<"),this.buf.push(d);const g=u.attributes;for(let v=0;v<g.length;v++){const C=g.item(v),T=C.name,I=T.toLowerCase();if(!$m.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let N=C.value;Qm[I]&&(N=pd(N)),Ry[I]&&(N=My(N)),this.buf.push(" ",T,'="',KS(N),'"')}return this.buf.push(">"),!0}endElement(u){const d=u.nodeName.toLowerCase();$a.hasOwnProperty(d)&&!Cb.hasOwnProperty(d)&&(this.buf.push("</"),this.buf.push(d),this.buf.push(">"))}chars(u){this.buf.push(KS(u))}checkClobberedElement(u,d){if(d&&(u.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${u.outerHTML}`);return d}}const XS=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Tb=/([^\#-~ |!])/g;function KS(l){return l.replace(/&/g,"&amp;").replace(XS,function(u){return"&#"+(1024*(u.charCodeAt(0)-55296)+(u.charCodeAt(1)-56320)+65536)+";"}).replace(Tb,function(u){return"&#"+u.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let e0;function Pb(l,u){let d=null;try{e0=e0||Wf(l);let g=u?String(u):"";d=e0.getInertBodyElement(g);let v=5,C=g;do{if(0===v)throw new Error("Failed to sanitize html because the input is unstable");v--,g=C,C=d.innerHTML,d=e0.getInertBodyElement(g)}while(g!==C);return vg((new Bh).sanitizeChildren(t0(d)||d))}finally{if(d){const g=t0(d)||d;for(;g.firstChild;)g.removeChild(g.firstChild)}}}function t0(l){return"content"in l&&function(l){return l.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===l.nodeName}(l)?l.content:null}var Io=(()=>((Io=Io||{})[Io.NONE=0]="NONE",Io[Io.HTML=1]="HTML",Io[Io.STYLE=2]="STYLE",Io[Io.SCRIPT=3]="SCRIPT",Io[Io.URL=4]="URL",Io[Io.RESOURCE_URL=5]="RESOURCE_URL",Io))();function n0(l){const u=function(){const l=Qt();return l&&l[12]}();return u?u.sanitize(Io.URL,l)||"":yg(l,"URL")?xc(l):pd(ge(l))}const Tc="__ngContext__";function xa(l,u){l[Tc]=u}function l0(l){const u=function(l){return l[Tc]||null}(l);return u?Array.isArray(u)?u:u.lView:null}function Yf(l){return l.ngOriginalError}function ox(l,...u){l.error(...u)}class qf{constructor(){this._console=console}handleError(u){const d=this._findOriginalError(u),g=this._findContext(u),v=(l=u)&&l.ngErrorLogger||ox;var l;v(this._console,"ERROR",u),d&&v(this._console,"ORIGINAL ERROR",d),g&&v(this._console,"ERROR CONTEXT",g)}_findContext(u){return u?u.ngDebugContext||this._findContext(Yf(u)):null}_findOriginalError(u){let d=u&&Yf(u);for(;d&&Yf(d);)d=Yf(d);return d||null}}const ux=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(kr))();function Pc(l){return l instanceof Function?l():l}var Uu=(()=>((Uu=Uu||{})[Uu.Important=1]="Important",Uu[Uu.DashCase=2]="DashCase",Uu))();let Uy;function Zf(l,u){return Uy(l,u)}function eh(l){const u=l[3];return qr(u)?u[3]:u}function Jf(l){return Gb(l[13])}function d0(l){return Gb(l[4])}function Gb(l){for(;null!==l&&!qr(l);)l=l[4];return l}function Qf(l,u,d,g,v){if(null!=g){let C,T=!1;qr(g)?C=g:Fi(g)&&(T=!0,g=g[0]);const I=ze(g);0===l&&null!==d?null==v?hs(u,d,I):el(u,d,I,v||null,!0):1===l&&null!==d?el(u,d,I,v||null,!0):2===l?function(l,u,d){const g=f0(l,u);g&&function(l,u,d,g){H(l)?l.removeChild(u,d,g):u.removeChild(d)}(l,g,u,d)}(u,I,T):3===l&&u.destroyNode(I),null!=C&&function(l,u,d,g,v){const C=d[7];C!==ze(d)&&Qf(u,l,g,C,v);for(let I=10;I<d.length;I++){const N=d[I];Cg(N[1],N,l,u,g,C)}}(u,l,C,d,v)}}function Vy(l,u){return H(l)?l.createText(u):l.createTextNode(u)}function th(l,u,d){return H(l)?l.createElement(u,d):null===d?l.createElement(u):l.createElementNS(d,u)}function ep(l,u){const d=l[9],g=d.indexOf(u),v=u[3];1024&u[2]&&(u[2]&=-1025,Ks(v,-1)),d.splice(g,1)}function Hy(l,u){if(l.length<=10)return;const d=10+u,g=l[d];if(g){const v=g[17];null!==v&&v!==l&&ep(v,g),u>0&&(l[d-1][4]=g[4]);const C=No(l,10+u);!function(l,u){Cg(l,u,u[11],2,null,null),u[0]=null,u[6]=null}(g[1],g);const T=C[19];null!==T&&T.detachView(C[1]),g[3]=null,g[4]=null,g[2]&=-129}return g}function px(l,u){if(!(256&u[2])){const d=u[11];H(d)&&d.destroyNode&&Cg(l,u,d,3,null,null),function(l){let u=l[13];if(!u)return jh(l[1],l);for(;u;){let d=null;if(Fi(u))d=u[13];else{const g=u[10];g&&(d=g)}if(!d){for(;u&&!u[4]&&u!==l;)Fi(u)&&jh(u[1],u),u=u[3];null===u&&(u=l),Fi(u)&&jh(u[1],u),d=u&&u[4]}u=d}}(u)}}function jh(l,u){if(!(256&u[2])){u[2]&=-129,u[2]|=256,function(l,u){let d;if(null!=l&&null!=(d=l.destroyHooks))for(let g=0;g<d.length;g+=2){const v=u[d[g]];if(!(v instanceof Cl)){const C=d[g+1];if(Array.isArray(C))for(let T=0;T<C.length;T+=2){const I=v[C[T]],N=C[T+1];try{N.call(I)}finally{}}else try{C.call(v)}finally{}}}}(l,u),function(l,u){const d=l.cleanup,g=u[7];let v=-1;if(null!==d)for(let C=0;C<d.length-1;C+=2)if("string"==typeof d[C]){const T=d[C+1],I="function"==typeof T?T(u):ze(u[T]),N=g[v=d[C+2]],V=d[C+3];"boolean"==typeof V?I.removeEventListener(d[C],N,V):V>=0?g[v=V]():g[v=-V].unsubscribe(),C+=2}else{const T=g[v=d[C+1]];d[C].call(T)}if(null!==g){for(let C=v+1;C<g.length;C++)g[C]();u[7]=null}}(l,u),1===u[1].type&&H(u[11])&&u[11].destroy();const d=u[17];if(null!==d&&qr(u[3])){d!==u[3]&&ep(d,u);const g=u[19];null!==g&&g.detachView(l)}}}function Wb(l,u,d){return Yb(l,u.parent,d)}function Yb(l,u,d){let g=u;for(;null!==g&&40&g.type;)g=(u=g).parent;if(null===g)return d[0];if(2&g.flags){const v=l.data[g.directiveStart].encapsulation;if(v===Yt.None||v===Yt.Emulated)return null}return tr(g,d)}function el(l,u,d,g,v){H(l)?l.insertBefore(u,d,g,v):u.insertBefore(d,g,v)}function hs(l,u,d){H(l)?l.appendChild(u,d):u.appendChild(d)}function Yy(l,u,d,g,v){null!==g?el(l,u,d,g,v):hs(l,u,d)}function f0(l,u){return H(l)?l.parentNode(u):u.parentNode}function tp(l,u,d){return gd(l,u,d)}function gx(l,u,d){return 40&l.type?tr(l,d):null}let np,gd=gx;function p0(l,u){gd=l,np=u}function g0(l,u,d,g){const v=Wb(l,g,u),C=u[11],I=tp(g.parent||u[6],g,u);if(null!=v)if(Array.isArray(d))for(let N=0;N<d.length;N++)Yy(C,v,d[N],I,!1);else Yy(C,v,d,I,!1);void 0!==np&&np(C,g,u,d,v)}function rp(l,u){if(null!==u){const d=u.type;if(3&d)return tr(u,l);if(4&d)return Xy(-1,l[u.index]);if(8&d){const g=u.child;if(null!==g)return rp(l,g);{const v=l[u.index];return qr(v)?Xy(-1,v):ze(v)}}if(32&d)return Zf(u,l)()||ze(l[u.index]);{const g=mx(l,u);return null!==g?Array.isArray(g)?g[0]:rp(eh(l[16]),g):rp(l,u.next)}}return null}function mx(l,u){return null!==u?l[16][6].projection[u.projection]:null}function Xy(l,u){const d=10+l+1;if(d<u.length){const g=u[d],v=g[1].firstChild;if(null!==v)return rp(g,v)}return u[7]}function Uh(l,u,d,g,v,C,T){for(;null!=d;){const I=g[d.index],N=d.type;if(T&&0===u&&(I&&xa(ze(I),g),d.flags|=4),64!=(64&d.flags))if(8&N)Uh(l,u,d.child,g,v,C,!1),Qf(u,l,v,I,C);else if(32&N){const V=Zf(d,g);let Z;for(;Z=V();)Qf(u,l,v,Z,C);Qf(u,l,v,I,C)}else 16&N?m0(l,u,g,d,v,C):Qf(u,l,v,I,C);d=T?d.projectionNext:d.next}}function Cg(l,u,d,g,v,C){Uh(d,g,l.firstChild,u,v,C,!1)}function m0(l,u,d,g,v,C){const T=d[16],N=T[6].projection[g.projection];if(Array.isArray(N))for(let V=0;V<N.length;V++)Qf(u,l,v,N[V],C);else Uh(l,u,N,T[3],v,C,!0)}function Sg(l,u,d){H(l)?l.setAttribute(u,"style",d):u.style.cssText=d}function Vh(l,u,d){H(l)?""===d?l.removeAttribute(u,"class"):l.setAttribute(u,"class",d):u.className=d}function yx(l,u,d){let g=l.length;for(;;){const v=l.indexOf(u,d);if(-1===v)return v;if(0===v||l.charCodeAt(v-1)<=32){const C=u.length;if(v+C===g||l.charCodeAt(v+C)<=32)return v}d=v+1}}const Ky="ng-template";function Kb(l,u,d){let g=0;for(;g<l.length;){let v=l[g++];if(d&&"class"===v){if(v=l[g],-1!==yx(v.toLowerCase(),u,0))return!0}else if(1===v){for(;g<l.length&&"string"==typeof(v=l[g++]);)if(v.toLowerCase()===u)return!0;return!1}}return!1}function Zy(l){return 4===l.type&&l.value!==Ky}function _x(l,u,d){return u===(4!==l.type||d?l.value:Ky)}function zh(l,u,d){let g=4;const v=l.attrs||[],C=function(l){for(let u=0;u<l.length;u++)if(ng(l[u]))return u;return l.length}(v);let T=!1;for(let I=0;I<u.length;I++){const N=u[I];if("number"!=typeof N){if(!T)if(4&g){if(g=2|1&g,""!==N&&!_x(l,N,d)||""===N&&1===u.length){if(Ql(g))return!1;T=!0}}else{const V=8&g?N:u[++I];if(8&g&&null!==l.attrs){if(!Kb(l.attrs,V,d)){if(Ql(g))return!1;T=!0}continue}const de=Zb(8&g?"class":N,v,Zy(l),d);if(-1===de){if(Ql(g))return!1;T=!0;continue}if(""!==V){let be;be=de>C?"":v[de+1].toLowerCase();const He=8&g?be:null;if(He&&-1!==yx(He,V,0)||2&g&&V!==be){if(Ql(g))return!1;T=!0}}}}else{if(!T&&!Ql(g)&&!Ql(N))return!1;if(T&&Ql(N))continue;T=!1,g=N|1&g}}return Ql(g)||T}function Ql(l){return 0==(1&l)}function Zb(l,u,d,g){if(null===u)return-1;let v=0;if(g||!d){let C=!1;for(;v<u.length;){const T=u[v];if(T===l)return v;if(3===T||6===T)C=!0;else{if(1===T||2===T){let I=u[++v];for(;"string"==typeof I;)I=u[++v];continue}if(4===T)break;if(0===T){v+=4;continue}}v+=C?1:2}return-1}return function(l,u){let d=l.indexOf(4);if(d>-1)for(d++;d<l.length;){const g=l[d];if("number"==typeof g)return-1;if(g===u)return d;d++}return-1}(u,l)}function Ex(l,u,d=!1){for(let g=0;g<u.length;g++)if(zh(l,u[g],d))return!0;return!1}function bx(l,u){e:for(let d=0;d<u.length;d++){const g=u[d];if(l.length===g.length){for(let v=0;v<l.length;v++)if(l[v]!==g[v])continue e;return!0}}return!1}function Jy(l,u){return l?":not("+u.trim()+")":u}function wx(l){let u=l[0],d=1,g=2,v="",C=!1;for(;d<l.length;){let T=l[d];if("string"==typeof T)if(2&g){const I=l[++d];v+="["+T+(I.length>0?'="'+I+'"':"")+"]"}else 8&g?v+="."+T:4&g&&(v+=" "+T);else""!==v&&!Ql(T)&&(u+=Jy(C,v),v=""),g=T,C=C||!Ql(g);d++}return""!==v&&(u+=Jy(C,v)),u}const zr={};function ip(l){Vu(ui(),Qt(),ko()+l,ne())}function Vu(l,u,d,g){if(!g)if(3==(3&u[2])){const C=l.preOrderCheckHooks;null!==C&&Is(u,C,d)}else{const C=l.preOrderHooks;null!==C&&_o(u,C,0,d)}gu(d)}function v0(l,u){return l<<17|u<<2}function zu(l){return l>>17&32767}function Qy(l){return 2|l}function Ml(l){return(131068&l)>>2}function y0(l,u){return-131069&l|u<<2}function ew(l){return 1|l}function s_(l,u){const d=l.contentQueries;if(null!==d)for(let g=0;g<d.length;g+=2){const v=d[g],C=d[g+1];if(-1!==C){const T=l.data[C];lo(v),T.contentQueries(2,u[C],C)}}}function Rl(l,u,d,g,v,C,T,I,N,V){const Z=u.blueprint.slice();return Z[0]=v,Z[2]=140|g,_l(Z),Z[3]=Z[15]=l,Z[8]=d,Z[10]=T||l&&l[10],Z[11]=I||l&&l[11],Z[12]=N||l&&l[12]||null,Z[9]=V||l&&l[9]||null,Z[6]=C,Z[16]=2==u.type?l[16]:Z,Z}function Ol(l,u,d,g,v){let C=l.data[u];if(null===C)C=Ac(l,u,d,g,v),sr.lFrame.inI18n&&(C.flags|=64);else if(64&C.type){C.type=d,C.value=g,C.attrs=v;const T=Kl();C.injectorIndex=null===T?-1:T.injectorIndex}return fa(C,!0),C}function Ac(l,u,d,g,v){const C=Lu(),T=re(),N=l.data[u]=function(l,u,d,g,v,C){return{type:d,index:g,insertBeforeIndex:null,injectorIndex:u?u.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:v,attrs:C,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:u,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?C:C&&C.parent,d,u,g,v);return null===l.firstChild&&(l.firstChild=N),null!==C&&(T?null==C.child&&null!==N.parent&&(C.child=N):null===C.next&&(C.next=N)),N}function lp(l,u,d,g){if(0===d)return-1;const v=u.length;for(let C=0;C<d;C++)u.push(g),l.blueprint.push(g),l.data.push(null);return v}function Ig(l,u,d){El(u);try{const g=l.viewQuery;null!==g&&P0(1,g,d);const v=l.template;null!==v&&iw(l,u,v,1,d),l.firstCreatePass&&(l.firstCreatePass=!1),l.staticContentQueries&&s_(l,u),l.staticViewQueries&&P0(2,l.viewQuery,d);const C=l.components;null!==C&&function(l,u){for(let d=0;d<u.length;d++)gA(l,u[d])}(u,C)}catch(g){throw l.firstCreatePass&&(l.incompleteFirstPass=!0,l.firstCreatePass=!1),g}finally{u[2]&=-5,ja()}}function Mc(l,u,d,g){const v=u[2];if(256==(256&v))return;El(u);const C=ne();try{_l(u),function(l){sr.lFrame.bindingIndex=l}(l.bindingStartIndex),null!==d&&iw(l,u,d,2,g);const T=3==(3&v);if(!C)if(T){const V=l.preOrderCheckHooks;null!==V&&Is(u,V,null)}else{const V=l.preOrderHooks;null!==V&&_o(u,V,0,null),ku(u,0)}if(function(l){for(let u=Jf(l);null!==u;u=d0(u)){if(!u[2])continue;const d=u[9];for(let g=0;g<d.length;g++){const v=d[g],C=v[3];0==(1024&v[2])&&Ks(C,1),v[2]|=1024}}}(u),function(l){for(let u=Jf(l);null!==u;u=d0(u))for(let d=10;d<u.length;d++){const g=u[d],v=g[1];Bs(g)&&Mc(v,g,v.template,g[8])}}(u),null!==l.contentQueries&&s_(l,u),!C)if(T){const V=l.contentCheckHooks;null!==V&&Is(u,V)}else{const V=l.contentHooks;null!==V&&_o(u,V,1),ku(u,1)}!function(l,u){const d=l.hostBindingOpCodes;if(null!==d)try{for(let g=0;g<d.length;g++){const v=d[g];if(v<0)gu(~v);else{const C=v,T=d[++g],I=d[++g];yi(T,C),I(2,u[C])}}}finally{gu(-1)}}(l,u);const I=l.components;null!==I&&function(l,u){for(let d=0;d<u.length;d++)Vx(l,u[d])}(u,I);const N=l.viewQuery;if(null!==N&&P0(2,N,g),!C)if(T){const V=l.viewCheckHooks;null!==V&&Is(u,V)}else{const V=l.viewHooks;null!==V&&_o(u,V,2),ku(u,2)}!0===l.firstUpdatePass&&(l.firstUpdatePass=!1),C||(u[2]&=-73),1024&u[2]&&(u[2]&=-1025,Ks(u[3],-1))}finally{ja()}}function rw(l,u,d,g){const v=u[10],C=!ne(),T=ei(u);try{C&&!T&&v.begin&&v.begin(),T&&Ig(l,u,g),Mc(l,u,d,g)}finally{C&&!T&&v.end&&v.end()}}function iw(l,u,d,g,v){const C=ko(),T=2&g;try{gu(-1),T&&u.length>20&&Vu(l,u,20,ne()),d(g,v)}finally{gu(C)}}function yd(l,u,d){if(Ts(u)){const v=u.directiveEnd;for(let C=u.directiveStart;C<v;C++){const T=l.data[C];T.contentQueries&&T.contentQueries(1,d[C],C)}}}function a_(l,u,d){!Rf()||(function(l,u,d,g){const v=d.directiveStart,C=d.directiveEnd;l.firstCreatePass||Nf(d,u),xa(g,u);const T=d.initialInputs;for(let I=v;I<C;I++){const N=l.data[I],V=ho(N);V&&u_(u,d,N);const Z=lg(u,l,I,d);xa(Z,u),null!==T&&c_(0,I-v,Z,N,0,T),V&&(xi(d.index,u)[8]=Z)}}(l,u,d,tr(d,u)),128==(128&d.flags)&&function(l,u,d){const g=d.directiveStart,v=d.directiveEnd,T=d.index,I=sr.lFrame.currentDirectiveIndex;try{gu(T);for(let N=g;N<v;N++){const V=l.data[N],Z=u[N];Or(N),(null!==V.hostBindings||0!==V.hostVars||null!==V.hostAttrs)&&Nx(V,Z)}}finally{gu(-1),Or(I)}}(l,u,d))}function Ag(l,u,d=tr){const g=u.localNames;if(null!==g){let v=u.index+1;for(let C=0;C<g.length;C+=2){const T=g[C+1],I=-1===T?d(u,l):l[T];l[v++]=I}}}function ow(l){const u=l.tView;return null===u||u.incompleteFirstPass?l.tView=oh(1,null,l.template,l.decls,l.vars,l.directiveDefs,l.pipeDefs,l.viewQuery,l.schemas,l.consts):u}function oh(l,u,d,g,v,C,T,I,N,V){const Z=20+g,de=Z+v,be=function(l,u){const d=[];for(let g=0;g<u;g++)d.push(g<l?null:zr);return d}(Z,de),He="function"==typeof V?V():V;return be[1]={type:l,blueprint:be,template:d,queries:null,viewQuery:I,declTNode:u,data:be.slice().fill(null,Z),bindingStartIndex:Z,expandoStartIndex:de,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof C?C():C,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:N,consts:He,incompleteFirstPass:!1}}function Ax(l,u,d,g){const v=p_(u);null===d?v.push(g):(v.push(d),l.firstCreatePass&&_d(l).push(g,v.length-1))}function Mx(l,u,d){for(let g in l)if(l.hasOwnProperty(g)){const v=l[g];(d=null===d?{}:d).hasOwnProperty(g)?d[g].push(u,v):d[g]=[u,v]}return d}function Ms(l,u,d,g,v,C,T,I){const N=tr(u,d);let Z,V=u.inputs;!I&&null!=V&&(Z=V[g])?(I0(l,d,Z,g,v),Xo(u)&&function(l,u){const d=xi(u,l);16&d[2]||(d[2]|=64)}(d,u.index)):3&u.type&&(g=function(l){return"class"===l?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l}(g),v=null!=T?T(v,u.value||"",g):v,H(C)?C.setProperty(N,g,v):Fm(g)||(N.setProperty?N.setProperty(g,v):N[g]=v))}function S0(l,u,d,g){let v=!1;if(Rf()){const C=function(l,u,d){const g=l.directiveRegistry;let v=null;if(g)for(let C=0;C<g.length;C++){const T=g[C];Ex(d,T.selectors,!1)&&(v||(v=[]),ld(Nf(d,u),l,T.type),ho(T)?(uw(l,d),v.unshift(T)):v.push(T))}return v}(l,u,d),T=null===g?null:{"":-1};if(null!==C){v=!0,cw(d,l.data.length,C.length);for(let Z=0;Z<C.length;Z++){const de=C[Z];de.providersResolver&&de.providersResolver(de)}let I=!1,N=!1,V=lp(l,u,C.length,null);for(let Z=0;Z<C.length;Z++){const de=C[Z];d.mergedAttrs=ad(d.mergedAttrs,de.hostAttrs),Bx(l,d,u,V,de),Gx(V,de,T),null!==de.contentQueries&&(d.flags|=8),(null!==de.hostBindings||null!==de.hostAttrs||0!==de.hostVars)&&(d.flags|=128);const be=de.type.prototype;!I&&(be.ngOnChanges||be.ngOnInit||be.ngDoCheck)&&((l.preOrderHooks||(l.preOrderHooks=[])).push(d.index),I=!0),!N&&(be.ngOnChanges||be.ngDoCheck)&&((l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(d.index),N=!0),V++}!function(l,u){const g=u.directiveEnd,v=l.data,C=u.attrs,T=[];let I=null,N=null;for(let V=u.directiveStart;V<g;V++){const Z=v[V],de=Z.inputs,be=null===C||Zy(u)?null:jx(de,C);T.push(be),I=Mx(de,V,I),N=Mx(Z.outputs,V,N)}null!==I&&(I.hasOwnProperty("class")&&(u.flags|=16),I.hasOwnProperty("style")&&(u.flags|=32)),u.initialInputs=T,u.inputs=I,u.outputs=N}(l,d)}T&&function(l,u,d){if(u){const g=l.localNames=[];for(let v=0;v<u.length;v+=2){const C=d[u[v+1]];if(null==C)throw new Se("301",`Export of name '${u[v+1]}' not found!`);g.push(u[v],C)}}}(d,g,T)}return d.mergedAttrs=ad(d.mergedAttrs,d.attrs),v}function Lx(l,u,d,g,v,C){const T=C.hostBindings;if(T){let I=l.hostBindingOpCodes;null===I&&(I=l.hostBindingOpCodes=[]);const N=~u.index;(function(l){let u=l.length;for(;u>0;){const d=l[--u];if("number"==typeof d&&d<0)return d}return 0})(I)!=N&&I.push(N),I.push(g,v,T)}}function Nx(l,u){null!==l.hostBindings&&l.hostBindings(1,u)}function uw(l,u){u.flags|=2,(l.components||(l.components=[])).push(u.index)}function Gx(l,u,d){if(d){if(u.exportAs)for(let g=0;g<u.exportAs.length;g++)d[u.exportAs[g]]=l;ho(u)&&(d[""]=l)}}function cw(l,u,d){l.flags|=1,l.directiveStart=u,l.directiveEnd=u+d,l.providerIndexes=u}function Bx(l,u,d,g,v){l.data[g]=v;const C=v.factory||(v.factory=Ga(v.type)),T=new Cl(C,ho(v),null);l.blueprint[g]=T,d[g]=T,Lx(l,u,0,g,lp(l,d,v.hostVars,zr),v)}function u_(l,u,d){const g=tr(u,l),v=ow(d),C=l[10],T=x0(l,Rl(l,v,null,d.onPush?64:16,g,u,C,C.createRenderer(g,d),null,null));l[u.index]=T}function _s(l,u,d,g,v,C){const T=tr(l,u);!function(l,u,d,g,v,C,T){if(null==C)H(l)?l.removeAttribute(u,v,d):u.removeAttribute(v);else{const I=null==T?ge(C):T(C,g||"",v);H(l)?l.setAttribute(u,v,I,d):d?u.setAttributeNS(d,v,I):u.setAttribute(v,I)}}(u[11],T,C,l.value,d,g,v)}function c_(l,u,d,g,v,C){const T=C[u];if(null!==T){const I=g.setInput;for(let N=0;N<T.length;){const V=T[N++],Z=T[N++],de=T[N++];null!==I?g.setInput(d,de,V,Z):d[Z]=de}}}function jx(l,u){let d=null,g=0;for(;g<u.length;){const v=u[g];if(0!==v)if(5!==v){if("number"==typeof v)break;l.hasOwnProperty(v)&&(null===d&&(d=[]),d.push(v,l[v],u[g+1])),g+=2}else g+=2;else g+=4}return d}function d_(l,u,d,g){return new Array(l,!0,!1,u,null,0,g,d,null,null)}function Vx(l,u){const d=xi(u,l);if(Bs(d)){const g=d[1];80&d[2]?Mc(g,d,g.template,d[8]):d[5]>0&&Rg(d)}}function Rg(l){for(let g=Jf(l);null!==g;g=d0(g))for(let v=10;v<g.length;v++){const C=g[v];if(1024&C[2]){const T=C[1];Mc(T,C,T.template,C[8])}else C[5]>0&&Rg(C)}const d=l[1].components;if(null!==d)for(let g=0;g<d.length;g++){const v=xi(d[g],l);Bs(v)&&v[5]>0&&Rg(v)}}function gA(l,u){const d=xi(u,l),g=d[1];(function(l,u){for(let d=u.length;d<l.blueprint.length;d++)u.push(l.blueprint[d])})(g,d),Ig(g,d,d[8])}function x0(l,u){return l[13]?l[14][4]=u:l[13]=u,l[14]=u,u}function f_(l){for(;l;){l[2]|=64;const u=eh(l);if(ao(l)&&!u)return l;l=u}return null}function Og(l,u,d){const g=u[10];g.begin&&g.begin();try{Mc(l,u,l.template,d)}catch(v){throw mw(u,v),v}finally{g.end&&g.end()}}function fw(l){!function(l){for(let u=0;u<l.components.length;u++){const d=l.components[u],g=l0(d),v=g[1];rw(v,g,v.template,d)}}(l[8])}function P0(l,u,d){lo(0),u(l,d)}const gw=(()=>Promise.resolve(null))();function p_(l){return l[7]||(l[7]=[])}function _d(l){return l.cleanup||(l.cleanup=[])}function mw(l,u){const d=l[9],g=d?d.get(qf,null):null;g&&g.handleError(u)}function I0(l,u,d,g,v){for(let C=0;C<d.length;){const T=d[C++],I=d[C++],N=u[T],V=l.data[T];null!==V.setInput?V.setInput(N,v,g,I):N[I]=v}}function Ed(l,u,d){const g=Yn(u,l);!function(l,u,d){H(l)?l.setValue(u,d):u.textContent=d}(l[11],g,d)}function Xh(l,u,d){let g=d?l.styles:null,v=d?l.classes:null,C=0;if(null!==u)for(let T=0;T<u.length;T++){const I=u[T];"number"==typeof I?C=I:1==C?v=We(v,I):2==C&&(g=We(g,I+": "+u[++T]+";"))}d?l.styles=g:l.stylesWithoutHost=g,d?l.classes=v:l.classesWithoutHost=v}const bd=new fo("INJECTOR",-1);class yw{get(u,d=hg){if(d===hg){const g=new Error(`NullInjectorError: No provider for ${xe(u)}!`);throw g.name="NullInjectorError",g}return d}}const Dg=new fo("Set Injector scope."),lh={},vA={};let m_;function _w(){return void 0===m_&&(m_=new yw),m_}function Ew(l,u=null,d=null,g){return new Yx(l,d,u||_w(),g)}class Yx{constructor(u,d,g,v=null){this.parent=g,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const C=[];d&&Fu(d,I=>this.processProvider(I,u,d)),Fu([u],I=>this.processInjectorType(I,[],C)),this.records.set(bd,dp(void 0,this));const T=this.records.get(Dg);this.scope=null!=T?T.value:null,this.source=v||("object"==typeof u?null:xe(u))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(u=>u.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(u,d=hg,g=en.Default){this.assertNotDestroyed();const v=Zd(this),C=zt(void 0);try{if(!(g&en.SkipSelf)){let I=this.records.get(u);if(void 0===I){const N=("function"==typeof(l=u)||"object"==typeof l&&l instanceof fo)&&Jt(u);I=N&&this.injectableDefInScope(N)?dp(v_(u),lh):null,this.records.set(u,I)}if(null!=I)return this.hydrate(u,I)}return(g&en.Self?_w():this.parent).get(u,d=g&en.Optional&&d===hg?null:d)}catch(T){if("NullInjectorError"===T.name){if((T[Gu]=T[Gu]||[]).unshift(xe(u)),v)throw T;return _y(T,u,"R3InjectorError",this.source)}throw T}finally{zt(C),Zd(v)}var l}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(u=>this.get(u))}toString(){const u=[];return this.records.forEach((g,v)=>u.push(xe(v))),`R3Injector[${u.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(u,d,g){if(!(u=Ie(u)))return!1;let v=Vi(u);const C=null==v&&u.ngModule||void 0,T=void 0===C?u:C,I=-1!==g.indexOf(T);if(void 0!==C&&(v=Vi(C)),null==v)return!1;if(null!=v.imports&&!I){let Z;g.push(T);try{Fu(v.imports,de=>{this.processInjectorType(de,d,g)&&(void 0===Z&&(Z=[]),Z.push(de))})}finally{}if(void 0!==Z)for(let de=0;de<Z.length;de++){const{ngModule:be,providers:He}=Z[de];Fu(He,lt=>this.processProvider(lt,be,He||ce))}}this.injectorDefTypes.add(T);const N=Ga(T)||(()=>new T);this.records.set(T,dp(N,lh));const V=v.providers;if(null!=V&&!I){const Z=u;Fu(V,de=>this.processProvider(de,Z,V))}return void 0!==C&&void 0!==u.providers}processProvider(u,d,g){let v=Lg(u=Ie(u))?u:Ie(u&&u.provide);const C=A0(l=u)?dp(void 0,l.useValue):dp(bw(l),lh);var l;if(Lg(u)||!0!==u.multi)this.records.get(v);else{let T=this.records.get(v);T||(T=dp(void 0,lh,!0),T.factory=()=>fg(T.multi),this.records.set(v,T)),v=u,T.multi.push(u)}this.records.set(v,C)}hydrate(u,d){return d.value===lh&&(d.value=vA,d.value=d.factory()),"object"==typeof d.value&&d.value&&null!==(l=d.value)&&"object"==typeof l&&"function"==typeof l.ngOnDestroy&&this.onDestroy.add(d.value),d.value;var l}injectableDefInScope(u){if(!u.providedIn)return!1;const d=Ie(u.providedIn);return"string"==typeof d?"any"===d||d===this.scope:this.injectorDefTypes.has(d)}}function v_(l){const u=Jt(l),d=null!==u?u.factory:Ga(l);if(null!==d)return d;if(l instanceof fo)throw new Error(`Token ${xe(l)} is missing a \u0275prov definition.`);if(l instanceof Function)return function(l){const u=l.length;if(u>0){const g=Ca(u,"?");throw new Error(`Can't resolve all parameters for ${xe(l)}: (${g.join(", ")}).`)}const d=function(l){const u=l&&(l[Wn]||l[io]);if(u){const d=function(l){if(l.hasOwnProperty("name"))return l.name;const u=(""+l).match(/^function\s*([^\s(]+)/);return null===u?"":u[1]}(l);return console.warn(`DEPRECATED: DI is instantiating a token "${d}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${d}" class.`),u}return null}(l);return null!==d?()=>d.factory(l):()=>new l}(l);throw new Error("unreachable")}function bw(l,u,d){let g;if(Lg(l)){const v=Ie(l);return Ga(v)||v_(v)}if(A0(l))g=()=>Ie(l.useValue);else if(function(l){return!(!l||!l.useFactory)}(l))g=()=>l.useFactory(...fg(l.deps||[]));else if(function(l){return!(!l||!l.useExisting)}(l))g=()=>As(Ie(l.useExisting));else{const v=Ie(l&&(l.useClass||l.provide));if(!function(l){return!!l.deps}(l))return Ga(v)||v_(v);g=()=>new v(...fg(l.deps))}return g}function dp(l,u,d=!1){return{factory:l,value:u,multi:d?[]:void 0}}function A0(l){return null!==l&&"object"==typeof l&&zS in l}function Lg(l){return"function"==typeof l}const Ng=function(l,u,d){return function(l,u=null,d=null,g){const v=Ew(l,u,d,g);return v._resolveInjectorDefTypes(),v}({name:d},u,l,d)};class po{static create(u,d){return Array.isArray(u)?Ng(u,d,""):Ng(u.providers,u.parent,u.name||"")}}function pt(l,u){ds(l0(l)[1],Do())}function On(l){let u=function(l){return Object.getPrototypeOf(l.prototype).constructor}(l.type),d=!0;const g=[l];for(;u;){let v;if(ho(l))v=u.\u0275cmp||u.\u0275dir;else{if(u.\u0275cmp)throw new Error("Directives cannot inherit Components");v=u.\u0275dir}if(v){if(d){g.push(v);const T=l;T.inputs=bo(l.inputs),T.declaredInputs=bo(l.declaredInputs),T.outputs=bo(l.outputs);const I=v.hostBindings;I&&Ta(l,I);const N=v.viewQuery,V=v.contentQueries;if(N&&na(l,N),V&&Jo(l,V),nt(l.inputs,v.inputs),nt(l.declaredInputs,v.declaredInputs),nt(l.outputs,v.outputs),ho(v)&&v.data.animation){const Z=l.data;Z.animation=(Z.animation||[]).concat(v.data.animation)}}const C=v.features;if(C)for(let T=0;T<C.length;T++){const I=C[T];I&&I.ngInherit&&I(l),I===On&&(d=!1)}}u=Object.getPrototypeOf(u)}!function(l){let u=0,d=null;for(let g=l.length-1;g>=0;g--){const v=l[g];v.hostVars=u+=v.hostVars,v.hostAttrs=ad(v.hostAttrs,d=ad(d,v.hostAttrs))}}(g)}function bo(l){return l===rn?{}:l===ce?[]:l}function na(l,u){const d=l.viewQuery;l.viewQuery=d?(g,v)=>{u(g,v),d(g,v)}:u}function Jo(l,u){const d=l.contentQueries;l.contentQueries=d?(g,v,C)=>{u(g,v,C),d(g,v,C)}:u}function Ta(l,u){const d=l.hostBindings;l.hostBindings=d?(g,v)=>{u(g,v),d(g,v)}:u}po.THROW_IF_NOT_FOUND=hg,po.NULL=new yw,po.\u0275prov=cn({token:po,providedIn:"any",factory:()=>As(bd)}),po.__NG_ELEMENT_ID__=-1;let _u=null;function Cd(){if(!_u){const l=kr.Symbol;if(l&&l.iterator)_u=l.iterator;else{const u=Object.getOwnPropertyNames(Map.prototype);for(let d=0;d<u.length;++d){const g=u[d];"entries"!==g&&"size"!==g&&Map.prototype[g]===Map.prototype.entries&&(_u=g)}}}return _u}function Gg(l){return!!a1(l)&&(Array.isArray(l)||!(l instanceof Map)&&Cd()in l)}function a1(l){return null!==l&&("function"==typeof l||"object"==typeof l)}function Dl(l,u,d){return!Object.is(l[u],d)&&(l[u]=d,!0)}function l1(l,u,d,g){const v=Qt();return Dl(v,Ut(),u)&&(ui(),_s(Ko(),v,l,u,d,g)),l1}function L0(l,u,d,g){return Dl(l,Ut(),d)?u+ge(d)+g:zr}function xA(l,u,d,g,v,C,T,I){const N=Qt(),V=ui(),Z=l+20,de=V.firstCreatePass?function(l,u,d,g,v,C,T,I,N){const V=u.consts,Z=Ol(u,l,4,T||null,Xs(V,I));S0(u,d,Z,Xs(V,N)),ds(u,Z);const de=Z.tViews=oh(2,Z,g,v,C,u.directiveRegistry,u.pipeRegistry,null,u.schemas,V);return null!==u.queries&&(u.queries.template(u,Z),de.queries=u.queries.embeddedTView(Z)),Z}(Z,V,N,u,d,g,v,C,T):V.data[Z];fa(de,!1);const be=N[11].createComment("");g0(V,N,be,de),xa(be,N),x0(N,N[Z]=d_(be,N,be,de)),Hs(de)&&a_(V,N,de),null!=T&&Ag(N,de,I)}function TA(l){return function(l,u){return l[u]}(sr.lFrame.contextLView,20+l)}function Nw(l,u=en.Default){const d=Qt();return null===d?As(l,u):sg(Do(),d,Ie(l),u)}function _1(l,u,d){const g=Qt();return Dl(g,Ut(),u)&&Ms(ui(),Ko(),g,l,u,g[11],d,!1),_1}function E1(l,u,d,g,v){const T=v?"class":"style";I0(l,d,u.inputs[T],T,g)}function Lc(l,u,d,g){const v=Qt(),C=ui(),T=20+l,I=v[11],N=v[T]=th(I,u,sr.lFrame.currentNamespace),V=C.firstCreatePass?function(l,u,d,g,v,C,T){const I=u.consts,V=Ol(u,l,2,v,Xs(I,C));return S0(u,d,V,Xs(I,T)),null!==V.attrs&&Xh(V,V.attrs,!1),null!==V.mergedAttrs&&Xh(V,V.mergedAttrs,!0),null!==u.queries&&u.queries.elementStart(u,V),V}(T,C,v,0,u,d,g):C.data[T];fa(V,!0);const Z=V.mergedAttrs;null!==Z&&mu(I,N,Z);const de=V.classes;null!==de&&Vh(I,N,de);const be=V.styles;null!==be&&Sg(I,N,be),64!=(64&V.flags)&&g0(C,v,N,V),0===sr.lFrame.elementDepthCount&&xa(N,v),sr.lFrame.elementDepthCount++,Hs(V)&&(a_(C,v,V),yd(C,V,v)),null!==g&&Ag(v,V)}function b1(){let l=Do();re()?A():(l=l.parent,fa(l,!1));const u=l;sr.lFrame.elementDepthCount--;const d=ui();d.firstCreatePass&&(ds(d,l),Ts(l)&&d.queries.elementEnd(l)),null!=u.classesWithoutHost&&function(l){return 0!=(16&l.flags)}(u)&&E1(d,u,Qt(),u.classesWithoutHost,!0),null!=u.stylesWithoutHost&&function(l){return 0!=(32&l.flags)}(u)&&E1(d,u,Qt(),u.stylesWithoutHost,!1)}function UA(l,u,d,g){Lc(l,u,d,g),b1()}function w1(l,u,d){const g=Qt(),v=ui(),C=l+20,T=v.firstCreatePass?function(l,u,d,g,v){const C=u.consts,T=Xs(C,g),I=Ol(u,l,8,"ng-container",T);return null!==T&&Xh(I,T,!0),S0(u,d,I,Xs(C,v)),null!==u.queries&&u.queries.elementStart(u,I),I}(C,v,g,u,d):v.data[C];fa(T,!0);const I=g[C]=g[11].createComment("");g0(v,g,I,T),xa(I,g),Hs(T)&&(a_(v,g,T),yd(v,T,g)),null!=d&&Ag(g,T)}function C1(){let l=Do();const u=ui();re()?A():(l=l.parent,fa(l,!1)),u.firstCreatePass&&(ds(u,l),Ts(l)&&u.queries.elementEnd(l))}function VA(){return Qt()}function S1(l){return!!l&&"function"==typeof l.then}function zA(l){return!!l&&"function"==typeof l.subscribe}const Wu=zA;function x1(l,u,d,g){const v=Qt(),C=ui(),T=Do();return function(l,u,d,g,v,C,T,I){const N=Hs(g),Z=l.firstCreatePass&&_d(l),de=u[8],be=p_(u);let He=!0;if(3&g.type||I){const Ct=tr(g,u),hn=I?I(Ct):Ct,Dt=be.length,ir=I?Ur=>I(ze(Ur[g.index])):g.index;if(H(d)){let Ur=null;if(!I&&N&&(Ur=function(l,u,d,g){const v=l.cleanup;if(null!=v)for(let C=0;C<v.length-1;C+=2){const T=v[C];if(T===d&&v[C+1]===g){const I=u[7],N=v[C+2];return I.length>N?I[N]:null}"string"==typeof T&&(C+=2)}return null}(l,u,v,g.index)),null!==Ur)(Ur.__ngLastListenerFn__||Ur).__ngNextListenerFn__=C,Ur.__ngLastListenerFn__=C,He=!1;else{C=Fw(g,u,de,C,!1);const Xi=d.listen(hn,v,C);be.push(C,Xi),Z&&Z.push(v,ir,Dt,Dt+1)}}else C=Fw(g,u,de,C,!0),hn.addEventListener(v,C,T),be.push(C),Z&&Z.push(v,ir,Dt,T)}else C=Fw(g,u,de,C,!1);const lt=g.outputs;let Rt;if(He&&null!==lt&&(Rt=lt[v])){const Ct=Rt.length;if(Ct)for(let hn=0;hn<Ct;hn+=2){const _a=u[Rt[hn]][Rt[hn+1]].subscribe(C),Gd=be.length;be.push(C,_a),Z&&Z.push(v,g.index,Gd,-(Gd+1))}}}(C,v,v[11],T,l,u,!!d,g),x1}function jg(l,u,d,g){try{return!1!==d(g)}catch(v){return mw(l,v),!1}}function Fw(l,u,d,g,v){return function C(T){if(T===Function)return g;const I=2&l.flags?xi(l.index,u):u;0==(32&u[2])&&f_(I);let N=jg(u,0,g,T),V=C.__ngNextListenerFn__;for(;V;)N=jg(u,0,V,T)&&N,V=V.__ngNextListenerFn__;return v&&!1===N&&(T.preventDefault(),T.returnValue=!1),N}}function Gw(l=1){return function(l){return(sr.lFrame.contextLView=function(l,u){for(;l>0;)u=u[15],l--;return u}(l,sr.lFrame.contextLView))[8]}(l)}function D_(l,u){let d=null;const g=function(l){const u=l.attrs;if(null!=u){const d=u.indexOf(5);if(0==(1&d))return u[d+1]}return null}(l);for(let v=0;v<u.length;v++){const C=u[v];if("*"!==C){if(null===g?Ex(l,C,!0):bx(g,C))return v}else d=v}return d}function T1(l){const u=Qt()[16][6];if(!u.projection){const g=u.projection=Ca(l?l.length:1,null),v=g.slice();let C=u.child;for(;null!==C;){const T=l?D_(C,l):0;null!==T&&(v[T]?v[T].projectionNext=C:g[T]=C,v[T]=C),C=C.next}}}function YA(l,u=0,d){const g=Qt(),v=ui(),C=Ol(v,20+l,16,null,d||null);null===C.projection&&(C.projection=u),A(),64!=(64&C.flags)&&function(l,u,d){m0(u[11],0,u,d,Wb(l,d,u),tp(d.parent||u[6],d,u))}(v,g,C)}function JA(l,u,d,g,v){const C=l[d+1],T=null===u;let I=g?zu(C):Ml(C),N=!1;for(;0!==I&&(!1===N||T);){const Z=l[I+1];rk(l[I],u)&&(N=!0,l[I+1]=g?ew(Z):Qy(Z)),I=g?zu(Z):Ml(Z)}N&&(l[d+1]=g?Qy(C):ew(C))}function rk(l,u){return null===l||null==u||(Array.isArray(l)?l[1]:l)===u||!(!Array.isArray(l)||"string"!=typeof u)&&Ri(l,u)>=0}const Pa={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function QA(l){return l.substring(Pa.key,Pa.keyEnd)}function $A(l,u){const d=Pa.textEnd;return d===u?-1:(u=Pa.keyEnd=function(l,u,d){for(;u<d&&l.charCodeAt(u)>32;)u++;return u}(l,Pa.key=u,d),z0(l,u,d))}function z0(l,u,d){for(;u<d&&l.charCodeAt(u)<=32;)u++;return u}function A1(l,u,d){return xd(l,u,d,!1),A1}function M1(l,u){return xd(l,u,null,!0),M1}function dh(l,u){for(let d=function(l){return function(l){Pa.key=0,Pa.keyEnd=0,Pa.value=0,Pa.valueEnd=0,Pa.textEnd=l.length}(l),$A(l,z0(l,0,Pa.textEnd))}(u);d>=0;d=$A(u,d))Di(l,QA(u),!0)}function xd(l,u,d,g){const v=Qt(),C=ui(),T=gn(2);C.firstUpdatePass&&oM(C,l,T,g),u!==zr&&Dl(v,T,u)&&aM(C,C.data[ko()],v,v[11],l,v[T+1]=function(l,u){return null==l||("string"==typeof u?l+=u:"object"==typeof l&&(l=xe(xc(l)))),l}(u,d),g,T)}function iM(l,u){return u>=l.expandoStartIndex}function oM(l,u,d,g){const v=l.data;if(null===v[d+1]){const C=v[ko()],T=iM(l,d);Ya(C,g)&&null===u&&!T&&(u=!1),u=function(l,u,d,g){const v=function(l){const u=sr.lFrame.currentDirectiveIndex;return-1===u?null:l[u]}(l);let C=g?u.residualClasses:u.residualStyles;if(null===v)0===(g?u.classBindings:u.styleBindings)&&(d=L_(d=R1(null,l,u,d,g),u.attrs,g),C=null);else{const T=u.directiveStylingLast;if(-1===T||l[T]!==v)if(d=R1(v,l,u,d,g),null===C){let N=function(l,u,d){const g=d?u.classBindings:u.styleBindings;if(0!==Ml(g))return l[zu(g)]}(l,u,g);void 0!==N&&Array.isArray(N)&&(N=R1(null,l,u,N[1],g),N=L_(N,u.attrs,g),function(l,u,d,g){l[zu(d?u.classBindings:u.styleBindings)]=g}(l,u,g,N))}else C=function(l,u,d){let g;const v=u.directiveEnd;for(let C=1+u.directiveStylingLast;C<v;C++)g=L_(g,l[C].hostAttrs,d);return L_(g,u.attrs,d)}(l,u,g)}return void 0!==C&&(g?u.residualClasses=C:u.residualStyles=C),d}(v,C,u,g),function(l,u,d,g,v,C){let T=C?u.classBindings:u.styleBindings,I=zu(T),N=Ml(T);l[g]=d;let Z,V=!1;if(Array.isArray(d)){const de=d;Z=de[1],(null===Z||Ri(de,Z)>0)&&(V=!0)}else Z=d;if(v)if(0!==N){const be=zu(l[I+1]);l[g+1]=v0(be,I),0!==be&&(l[be+1]=y0(l[be+1],g)),l[I+1]=function(l,u){return 131071&l|u<<17}(l[I+1],g)}else l[g+1]=v0(I,0),0!==I&&(l[I+1]=y0(l[I+1],g)),I=g;else l[g+1]=v0(N,0),0===I?I=g:l[N+1]=y0(l[N+1],g),N=g;V&&(l[g+1]=Qy(l[g+1])),JA(l,Z,g,!0),JA(l,Z,g,!1),function(l,u,d,g,v){const C=v?l.residualClasses:l.residualStyles;null!=C&&"string"==typeof u&&Ri(C,u)>=0&&(d[g+1]=ew(d[g+1]))}(u,Z,l,g,C),T=v0(I,N),C?u.classBindings=T:u.styleBindings=T}(v,C,u,d,T,g)}}function R1(l,u,d,g,v){let C=null;const T=d.directiveEnd;let I=d.directiveStylingLast;for(-1===I?I=d.directiveStart:I++;I<T&&(C=u[I],g=L_(g,C.hostAttrs,v),C!==l);)I++;return null!==l&&(d.directiveStylingLast=I),g}function L_(l,u,d){const g=d?1:2;let v=-1;if(null!==u)for(let C=0;C<u.length;C++){const T=u[C];"number"==typeof T?v=T:v===g&&(Array.isArray(l)||(l=void 0===l?[]:["",l]),Di(l,T,!!d||u[++C]))}return void 0===l?null:l}function aM(l,u,d,g,v,C,T,I){if(!(3&u.type))return;const N=l.data,V=N[I+1];jw(function(l){return 1==(1&l)}(V)?lM(N,u,d,v,Ml(V),T):void 0)||(jw(C)||function(l){return 2==(2&l)}(V)&&(C=lM(N,null,d,v,I,T)),function(l,u,d,g,v){const C=H(l);if(u)v?C?l.addClass(d,g):d.classList.add(g):C?l.removeClass(d,g):d.classList.remove(g);else{let T=-1===g.indexOf("-")?void 0:Uu.DashCase;if(null==v)C?l.removeStyle(d,g,T):d.style.removeProperty(g);else{const I="string"==typeof v&&v.endsWith("!important");I&&(v=v.slice(0,-10),T|=Uu.Important),C?l.setStyle(d,g,v,T):d.style.setProperty(g,v,I?"important":"")}}}(g,T,Yn(ko(),d),v,C))}function lM(l,u,d,g,v,C){const T=null===u;let I;for(;v>0;){const N=l[v],V=Array.isArray(N),Z=V?N[1]:N,de=null===Z;let be=d[v+1];be===zr&&(be=de?ce:void 0);let He=de?Cc(be,g):Z===g?be:void 0;if(V&&!jw(He)&&(He=Cc(N,g)),jw(He)&&(I=He,T))return I;const lt=l[v+1];v=T?zu(lt):Ml(lt)}if(null!==u){let N=C?u.residualClasses:u.residualStyles;null!=N&&(I=Cc(N,g))}return I}function jw(l){return void 0!==l}function Ya(l,u){return 0!=(l.flags&(u?16:32))}function uM(l,u=""){const d=Qt(),g=ui(),v=l+20,C=g.firstCreatePass?Ol(g,v,1,u,null):g.data[v],T=d[v]=Vy(d[11],u);g0(g,d,T,C),fa(C,!1)}function O1(l){return k_("",l,""),O1}function k_(l,u,d){const g=Qt(),v=L0(g,l,u,d);return v!==zr&&Ed(g,ko(),v),k_}function H0(l,u,d){!function(l,u,d,g){const v=ui(),C=gn(2);v.firstUpdatePass&&oM(v,null,C,g);const T=Qt();if(d!==zr&&Dl(T,C,d)){const I=v.data[ko()];if(Ya(I,g)&&!iM(v,C)){let N=g?I.classesWithoutHost:I.stylesWithoutHost;null!==N&&(d=We(N,d||"")),E1(v,I,T,d,g)}else!function(l,u,d,g,v,C,T,I){v===zr&&(v=ce);let N=0,V=0,Z=0<v.length?v[0]:null,de=0<C.length?C[0]:null;for(;null!==Z||null!==de;){const be=N<v.length?v[N+1]:void 0,He=V<C.length?C[V+1]:void 0;let Rt,lt=null;Z===de?(N+=2,V+=2,be!==He&&(lt=de,Rt=He)):null===de||null!==Z&&Z<de?(N+=2,lt=Z):(V+=2,lt=de,Rt=He),null!==lt&&aM(l,u,d,g,lt,Rt,T,I),Z=N<v.length?v[N]:null,de=V<C.length?C[V]:null}}(v,I,T,T[11],T[C+1],T[C+1]=function(l,u,d){if(null==d||""===d)return ce;const g=[],v=xc(d);if(Array.isArray(v))for(let C=0;C<v.length;C++)l(g,v[C],!0);else if("object"==typeof v)for(const C in v)v.hasOwnProperty(C)&&l(g,C,v[C]);else"string"==typeof v&&u(g,v);return g}(l,u,d),g,C)}}(Di,dh,L0(Qt(),l,u,d),!0)}function N1(l,u,d){const g=Qt();return Dl(g,Ut(),u)&&Ms(ui(),Ko(),g,l,u,g[11],d,!0),N1}const gp=void 0;var F1=["en",[["a","p"],["AM","PM"],gp],[["AM","PM"],gp,gp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],gp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],gp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",gp,"{1} 'at' {0}",gp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(l){const u=Math.floor(Math.abs(l)),d=l.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let mp={};function F_(l){const u=function(l){return l.toLowerCase().replace(/_/g,"-")}(l);let d=wM(u);if(d)return d;const g=u.split("-")[0];if(d=wM(g),d)return d;if("en"===g)return F1;throw new Error(`Missing locale data for the locale "${l}".`)}function q0(l){return F_(l)[nr.PluralCase]}function wM(l){return l in mp||(mp[l]=kr.ng&&kr.ng.common&&kr.ng.common.locales&&kr.ng.common.locales[l]),mp[l]}var nr=(()=>((nr=nr||{})[nr.LocaleId=0]="LocaleId",nr[nr.DayPeriodsFormat=1]="DayPeriodsFormat",nr[nr.DayPeriodsStandalone=2]="DayPeriodsStandalone",nr[nr.DaysFormat=3]="DaysFormat",nr[nr.DaysStandalone=4]="DaysStandalone",nr[nr.MonthsFormat=5]="MonthsFormat",nr[nr.MonthsStandalone=6]="MonthsStandalone",nr[nr.Eras=7]="Eras",nr[nr.FirstDayOfWeek=8]="FirstDayOfWeek",nr[nr.WeekendRange=9]="WeekendRange",nr[nr.DateFormat=10]="DateFormat",nr[nr.TimeFormat=11]="TimeFormat",nr[nr.DateTimeFormat=12]="DateTimeFormat",nr[nr.NumberSymbols=13]="NumberSymbols",nr[nr.NumberFormats=14]="NumberFormats",nr[nr.CurrencyCode=15]="CurrencyCode",nr[nr.CurrencySymbol=16]="CurrencySymbol",nr[nr.CurrencyName=17]="CurrencyName",nr[nr.Currencies=18]="Currencies",nr[nr.Directionality=19]="Directionality",nr[nr.PluralCase=20]="PluralCase",nr[nr.ExtraData=21]="ExtraData",nr))();const di="en-US",Nc={marker:"element"},Zh={marker:"ICU"};var Qn=(()=>((Qn=Qn||{})[Qn.SHIFT=2]="SHIFT",Qn[Qn.APPEND_EAGERLY=1]="APPEND_EAGERLY",Qn[Qn.COMMENT=2]="COMMENT",Qn))();let B_=di;function X0(l){(function(l,u){null==l&&un(u,l,null,"!=")})(l,"Expected localeId to be defined"),"string"==typeof l&&(B_=l.toLowerCase().replace(/_/g,"-"))}function Yu(l,u,d){const g=u.insertBeforeIndex,v=Array.isArray(g)?g[0]:g;return null===v?gx(l,0,d):ze(d[v])}function Es(l,u,d,g,v){const C=u.insertBeforeIndex;if(Array.isArray(C)){let T=g,I=null;if(3&u.type||(I=T,T=v),null!==T&&0==(2&u.flags))for(let N=1;N<C.length;N++)el(l,T,d[C[N]],I,!1)}}function CM(l,u){if(l.push(u),l.length>1)for(let d=l.length-2;d>=0;d--){const g=l[d];K0(g)||B1(g,u)&&null===U_(g)&&SM(g,u.index)}}function K0(l){return!(64&l.type)}function B1(l,u){return K0(u)||l.index>u.index}function U_(l){const u=l.insertBeforeIndex;return Array.isArray(u)?u[0]:u}function SM(l,u){const d=l.insertBeforeIndex;Array.isArray(d)?d[0]=u:(p0(Yu,Es),l.insertBeforeIndex=u)}function Id(l,u,d){const g=Ac(l,d,64,null,null);return CM(u,g),g}function Lk(){const l=[];let d,g,u=-1;function C(I,N){u=0;const V=function(l,u){const d=u[l.currentCaseLViewIndex];return null===d?d:d<0?~d:d}(I,N);g=null!==V?I.remove[V]:ce}function T(){if(u<g.length){const I=g[u++];return I>0?d[I]:(l.push(u,g),C(d[1].data[~I],d),T())}return 0===l.length?null:(g=l.pop(),u=l.pop(),T())}return function(I,N){for(d=N;l.length;)l.pop();return C(I.value,N),T}}const zg=/\ufffd(\d+):?\d*\ufffd/gi,Nk=/\ufffd(\d+)\ufffd/,IM=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Fk=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Gk=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,AM=/\uE500/g;function Y1(l,u,d,g,v,C,T){const I=lp(l,g,1,null);let N=I<<Qn.SHIFT,V=Kl();u===V&&(V=null),null===V&&(N|=Qn.APPEND_EAGERLY),T&&(N|=Qn.COMMENT,function(l){void 0===Uy&&(Uy=l())}(Lk)),v.push(N,null===C?"":C);const Z=Ac(l,I,T?32:1,null===C?"":C,null);CM(d,Z);const de=Z.index;return fa(Z,!1),null!==V&&u!==V&&function(l,u){let d=l.insertBeforeIndex;null===d?(p0(Yu,Es),d=l.insertBeforeIndex=[null,u]):(function(l,u,d){l!=u&&un(d,l,u,"==")}(Array.isArray(d),!0,"Expecting array here"),d.push(u))}(V,de),Z}function Uk(l,u,d,g,v,C,T){const I=T.match(zg),N=Y1(l,u,d,C,g,I?null:T,!1);I&&Wg(v,T,N.index,null,0,null)}function Wg(l,u,d,g,v,C){const T=l.length,I=T+1;l.push(null,null);const N=T+2,V=u.split(zg);let Z=0;for(let de=0;de<V.length;de++){const be=V[de];if(1&de){const He=v+parseInt(be,10);l.push(-1-He),Z|=RM(He)}else""!==be&&l.push(be)}return l.push(d<<2|(g?1:0)),g&&l.push(g,C),l[T]=Z,l[I]=l.length-N,Z}function RM(l){return 1<<Math.min(l,31)}function X1(l){let u,C,d="",g=0,v=!1;for(;null!==(u=Fk.exec(l));)v?u[0]===`\ufffd/*${C}\ufffd`&&(g=u.index,v=!1):(d+=l.substring(g,u.index+u[0].length),C=u[1],v=!0);return d+=l.substr(g),d}function DM(l,u,d,g,v,C){let T=0;const I={type:v.type,currentCaseLViewIndex:lp(l,u,1,null),anchorIdx:C,cases:[],create:[],remove:[],update:[]};(function(l,u,d){l.push(RM(u.mainBinding),2,-1-u.mainBinding,d<<2|2)})(d,v,C),function(l,u,d){const g=l.data[u];null===g?l.data[u]=d:g.value=d}(l,C,I);const N=v.values;for(let V=0;V<N.length;V++){const Z=N[V],de=[];for(let be=0;be<Z.length;be++){const He=Z[be];if("string"!=typeof He){const lt=de.push(He)-1;Z[be]=`\x3c!--\ufffd${lt}\ufffd--\x3e`}}T=W_(l,I,u,d,g,v.cases[V],Z.join(""),de)|T}T&&function(l,u,d){l.push(u,1,d<<2|3)}(d,T,C)}function Yg(l){const u=[],d=[];let g=1,v=0;const C=Z0(l=l.replace(IM,function(T,I,N){return g="select"===N?0:1,v=parseInt(I.substr(1),10),""}));for(let T=0;T<C.length;){let I=C[T++].trim();1===g&&(I=I.replace(/\s*(?:=)?(\w+)\s*/,"$1")),I.length&&u.push(I);const N=Z0(C[T++]);u.length>d.length&&d.push(N)}return{type:g,mainBinding:v,cases:u,values:d}}function Z0(l){if(!l)return[];let u=0;const d=[],g=[],v=/[{}]/g;let C;for(v.lastIndex=0;C=v.exec(l);){const I=C.index;if("}"==C[0]){if(d.pop(),0==d.length){const N=l.substring(u,I);IM.test(N)?g.push(Yg(N)):g.push(N),u=I+1}}else{if(0==d.length){const N=l.substring(u,I);g.push(N),u=I+1}d.push("{")}}const T=l.substring(u);return g.push(T),g}function W_(l,u,d,g,v,C,T,I){const N=[],V=[],Z=[];u.cases.push(C),u.create.push(N),u.remove.push(V),u.update.push(Z);const be=Wf(yl()).getInertBodyElement(T),He=t0(be)||be;return He?Y_(l,u,d,g,N,V,Z,He,v,I,0):0}function Y_(l,u,d,g,v,C,T,I,N,V,Z){let de=0,be=I.firstChild;for(;be;){const He=lp(l,d,1,null);switch(be.nodeType){case Node.ELEMENT_NODE:const lt=be,Rt=lt.tagName.toLowerCase();if($a.hasOwnProperty(Rt)){J0(v,Nc,Rt,N,He),l.data[He]=Rt;const ir=lt.attributes;for(let Ur=0;Ur<ir.length;Ur++){const Xi=ir.item(Ur),_a=Xi.name.toLowerCase();Xi.value.match(zg)?$m.hasOwnProperty(_a)&&Wg(T,Xi.value,He,Xi.name,0,Qm[_a]?pd:Ry[_a]?My:null):zk(v,He,Xi)}de=Y_(l,u,d,g,v,C,T,be,He,V,Z+1)|de,q_(C,He,Z)}break;case Node.TEXT_NODE:const Ct=be.textContent||"",hn=Ct.match(zg);J0(v,null,hn?"":Ct,N,He),q_(C,He,Z),hn&&(de=Wg(T,Ct,He,null,0,null)|de);break;case Node.COMMENT_NODE:const Dt=Nk.exec(be.textContent||"");if(Dt){const Ur=V[parseInt(Dt[1],10)];J0(v,Zh,"",N,He),DM(l,d,g,N,Ur,He),Ww(C,He,Z)}}be=be.nextSibling}return de}function q_(l,u,d){0===d&&l.push(u)}function Ww(l,u,d){0===d&&(l.push(~u),l.push(u))}function J0(l,u,d,g,v){null!==u&&l.push(u),l.push(d,v,function(l,u,d){return 0|u<<17|d<<1}(0,g,v))}function zk(l,u,d){l.push(u<<1|1,d.name,d.value)}function Xg(l,u,d=-1){const g=ui(),v=Qt(),C=20+l,T=Xs(g.consts,u),I=Kl();g.firstCreatePass&&function(l,u,d,g,v,C){const T=Kl(),I=[],N=[],V=[[]],Z=function(l){return l.replace(AM," ")}(v=function(l,u){if(function(l){return-1===l}(u))return X1(l);{const d=l.indexOf(`:${u}\ufffd`)+2+u.toString().length,g=l.search(new RegExp(`\ufffd\\/\\*\\d+:${u}\ufffd`));return X1(l.substring(d,g))}}(v,C)).split(Gk);for(let de=0;de<Z.length;de++){let be=Z[de];if(0==(1&de)){const He=Z0(be);for(let lt=0;lt<He.length;lt++){let Rt=He[lt];if(0==(1&lt)){const Ct=Rt;""!==Ct&&Uk(l,T,V[0],I,N,d,Ct)}else{const Ct=Rt;if("object"!=typeof Ct)throw new Error(`Unable to parse ICU expression in "${v}" message.`);DM(l,d,N,u,Ct,Y1(l,T,V[0],d,I,"",!0).index)}}}else{const He=47===be.charCodeAt(0),Rt=(be.charCodeAt(He?1:0),20+Number.parseInt(be.substring(He?2:1)));if(He)V.shift(),fa(Kl(),!1);else{const Ct=Id(l,V[0],Rt);V.unshift([]),fa(Ct,!0)}}}l.data[g]={create:I,update:N}}(g,null===I?0:I.index,v,C,T,d);const N=g.data[C],Z=Yb(g,I===v[6]?null:I,v);(function(l,u,d,g){const v=l[11];for(let C=0;C<u.length;C++){const T=u[C++],I=u[C],N=(T&Qn.COMMENT)===Qn.COMMENT,V=(T&Qn.APPEND_EAGERLY)===Qn.APPEND_EAGERLY,Z=T>>>Qn.SHIFT;let de=l[Z];null===de&&(de=l[Z]=N?v.createComment(I):Vy(v,I)),V&&null!==d&&el(v,d,de,g,!1)}})(v,N.create,Z,I&&8&I.type?v[I.index]:null),Er(!0)}function BM(l,u,d){Xg(l,u,d),Er(!1)}function X_(l,u,d,g,v){if(l=Ie(l),Array.isArray(l))for(let C=0;C<l.length;C++)X_(l[C],u,d,g,v);else{const C=ui(),T=Qt();let I=Lg(l)?l:Ie(l.provide),N=bw(l);const V=Do(),Z=1048575&V.providerIndexes,de=V.directiveStart,be=V.providerIndexes>>20;if(Lg(l)||!l.multi){const He=new Cl(N,v,Nw),lt=tT(I,u,v?Z:Z+be,de);-1===lt?(ld(Nf(V,T),C,I),qw(C,l,u.length),u.push(I),V.directiveStart++,V.directiveEnd++,v&&(V.providerIndexes+=1048576),d.push(He),T.push(He)):(d[lt]=He,T[lt]=He)}else{const He=tT(I,u,Z+be,de),lt=tT(I,u,Z,Z+be),Rt=He>=0&&d[He],Ct=lt>=0&&d[lt];if(v&&!Ct||!v&&!Rt){ld(Nf(V,T),C,I);const hn=function(l,u,d,g,v){const C=new Cl(l,d,Nw);return C.multi=[],C.index=u,C.componentProviders=0,eT(C,v,g&&!d),C}(v?Xk:qk,d.length,v,g,N);!v&&Ct&&(d[lt].providerFactory=hn),qw(C,l,u.length,0),u.push(I),V.directiveStart++,V.directiveEnd++,v&&(V.providerIndexes+=1048576),d.push(hn),T.push(hn)}else qw(C,l,He>-1?He:lt,eT(d[v?lt:He],N,!v&&g));!v&&g&&Ct&&d[lt].componentProviders++}}}function qw(l,u,d,g){const v=Lg(u);if(v||function(l){return!!l.useClass}(u)){const T=(u.useClass||u).prototype.ngOnDestroy;if(T){const I=l.destroyHooks||(l.destroyHooks=[]);if(!v&&u.multi){const N=I.indexOf(d);-1===N?I.push(d,[g,T]):I[N+1].push(g,T)}else I.push(d,T)}}}function eT(l,u,d){return d&&l.componentProviders++,l.multi.push(u)-1}function tT(l,u,d,g){for(let v=d;v<g;v++)if(u[v]===l)return v;return-1}function qk(l,u,d,g){return nT(this.multi,[])}function Xk(l,u,d,g){const v=this.multi;let C;if(this.providerFactory){const T=this.providerFactory.componentProviders,I=lg(d,d[1],this.providerFactory.index,g);C=I.slice(0,T),nT(v,C);for(let N=T;N<I.length;N++)C.push(I[N])}else C=[],nT(v,C);return C}function nT(l,u){for(let d=0;d<l.length;d++)u.push((0,l[d])());return u}function Q0(l,u=[]){return d=>{d.providersResolver=(g,v)=>function(l,u,d){const g=ui();if(g.firstCreatePass){const v=ho(l);X_(d,g.data,g.blueprint,v,!0),X_(u,g.data,g.blueprint,v,!1)}}(g,v?v(l):l,u)}}class rT{}const Xw="ngComponent";class Zw{resolveComponentFactory(u){throw function(l){const u=Error(`No component factory found for ${xe(l)}. Did you add it to @NgModule.entryComponents?`);return u[Xw]=l,u}(u)}}class Qh{}function ev(...l){}function $h(l,u){return new fh(tr(l,u))}Qh.NULL=new Zw;const Zk=function(){return $h(Do(),Qt())};let fh=(()=>{class l{constructor(d){this.nativeElement=d}}return l.__NG_ELEMENT_ID__=Zk,l})();function zM(l){return l instanceof fh?l.nativeElement:l}class Jw{}let HM=(()=>{class l{}return l.__NG_ELEMENT_ID__=()=>Qk(),l})();const Qk=function(){const l=Qt(),d=xi(Do().index,l);return function(l){return l[11]}(Fi(d)?d:l)};let vp=(()=>{class l{}return l.\u0275prov=cn({token:l,providedIn:"root",factory:()=>null}),l})();class WM{constructor(u){this.full=u,this.major=u.split(".")[0],this.minor=u.split(".")[1],this.patch=u.split(".").slice(2).join(".")}}const YM=new WM("12.2.4");class qM{constructor(){}supports(u){return Gg(u)}create(u){return new nN(u)}}const tN=(l,u)=>u;class nN{constructor(u){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=u||tN}forEachItem(u){let d;for(d=this._itHead;null!==d;d=d._next)u(d)}forEachOperation(u){let d=this._itHead,g=this._removalsHead,v=0,C=null;for(;d||g;){const T=!g||d&&d.currentIndex<aT(g,v,C)?d:g,I=aT(T,v,C),N=T.currentIndex;if(T===g)v--,g=g._nextRemoved;else if(d=d._next,null==T.previousIndex)v++;else{C||(C=[]);const V=I-v,Z=N-v;if(V!=Z){for(let be=0;be<V;be++){const He=be<C.length?C[be]:C[be]=0,lt=He+be;Z<=lt&&lt<V&&(C[be]=He+1)}C[T.previousIndex]=Z-V}}I!==N&&u(T,I,N)}}forEachPreviousItem(u){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)u(d)}forEachAddedItem(u){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)u(d)}forEachMovedItem(u){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)u(d)}forEachRemovedItem(u){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)u(d)}forEachIdentityChange(u){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)u(d)}diff(u){if(null==u&&(u=[]),!Gg(u))throw new Error(`Error trying to diff '${xe(u)}'. Only arrays and iterables are allowed`);return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let v,C,T,d=this._itHead,g=!1;if(Array.isArray(u)){this.length=u.length;for(let I=0;I<this.length;I++)C=u[I],T=this._trackByFn(I,C),null!==d&&Object.is(d.trackById,T)?(g&&(d=this._verifyReinsertion(d,C,T,I)),Object.is(d.item,C)||this._addIdentityChange(d,C)):(d=this._mismatch(d,C,T,I),g=!0),d=d._next}else v=0,function(l,u){if(Array.isArray(l))for(let d=0;d<l.length;d++)u(l[d]);else{const d=l[Cd()]();let g;for(;!(g=d.next()).done;)u(g.value)}}(u,I=>{T=this._trackByFn(v,I),null!==d&&Object.is(d.trackById,T)?(g&&(d=this._verifyReinsertion(d,I,T,v)),Object.is(d.item,I)||this._addIdentityChange(d,I)):(d=this._mismatch(d,I,T,v),g=!0),d=d._next,v++}),this.length=v;return this._truncate(d),this.collection=u,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let u;for(u=this._previousItHead=this._itHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._additionsHead;null!==u;u=u._nextAdded)u.previousIndex=u.currentIndex;for(this._additionsHead=this._additionsTail=null,u=this._movesHead;null!==u;u=u._nextMoved)u.previousIndex=u.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(u,d,g,v){let C;return null===u?C=this._itTail:(C=u._prev,this._remove(u)),null!==(u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(g,null))?(Object.is(u.item,d)||this._addIdentityChange(u,d),this._reinsertAfter(u,C,v)):null!==(u=null===this._linkedRecords?null:this._linkedRecords.get(g,v))?(Object.is(u.item,d)||this._addIdentityChange(u,d),this._moveAfter(u,C,v)):u=this._addAfter(new oT(d,g),C,v),u}_verifyReinsertion(u,d,g,v){let C=null===this._unlinkedRecords?null:this._unlinkedRecords.get(g,null);return null!==C?u=this._reinsertAfter(C,u._prev,v):u.currentIndex!=v&&(u.currentIndex=v,this._addToMoves(u,v)),u}_truncate(u){for(;null!==u;){const d=u._next;this._addToRemovals(this._unlink(u)),u=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(u,d,g){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(u);const v=u._prevRemoved,C=u._nextRemoved;return null===v?this._removalsHead=C:v._nextRemoved=C,null===C?this._removalsTail=v:C._prevRemoved=v,this._insertAfter(u,d,g),this._addToMoves(u,g),u}_moveAfter(u,d,g){return this._unlink(u),this._insertAfter(u,d,g),this._addToMoves(u,g),u}_addAfter(u,d,g){return this._insertAfter(u,d,g),this._additionsTail=null===this._additionsTail?this._additionsHead=u:this._additionsTail._nextAdded=u,u}_insertAfter(u,d,g){const v=null===d?this._itHead:d._next;return u._next=v,u._prev=d,null===v?this._itTail=u:v._prev=u,null===d?this._itHead=u:d._next=u,null===this._linkedRecords&&(this._linkedRecords=new Qw),this._linkedRecords.put(u),u.currentIndex=g,u}_remove(u){return this._addToRemovals(this._unlink(u))}_unlink(u){null!==this._linkedRecords&&this._linkedRecords.remove(u);const d=u._prev,g=u._next;return null===d?this._itHead=g:d._next=g,null===g?this._itTail=d:g._prev=d,u}_addToMoves(u,d){return u.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=u:this._movesTail._nextMoved=u),u}_addToRemovals(u){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Qw),this._unlinkedRecords.put(u),u.currentIndex=null,u._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=u,u._prevRemoved=null):(u._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=u),u}_addIdentityChange(u,d){return u.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=u:this._identityChangesTail._nextIdentityChange=u,u}}class oT{constructor(u,d){this.item=u,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sT{constructor(){this._head=null,this._tail=null}add(u){null===this._head?(this._head=this._tail=u,u._nextDup=null,u._prevDup=null):(this._tail._nextDup=u,u._prevDup=this._tail,u._nextDup=null,this._tail=u)}get(u,d){let g;for(g=this._head;null!==g;g=g._nextDup)if((null===d||d<=g.currentIndex)&&Object.is(g.trackById,u))return g;return null}remove(u){const d=u._prevDup,g=u._nextDup;return null===d?this._head=g:d._nextDup=g,null===g?this._tail=d:g._prevDup=d,null===this._head}}class Qw{constructor(){this.map=new Map}put(u){const d=u.trackById;let g=this.map.get(d);g||(g=new sT,this.map.set(d,g)),g.add(u)}get(u,d){const v=this.map.get(u);return v?v.get(u,d):null}remove(u){const d=u.trackById;return this.map.get(d).remove(u)&&this.map.delete(d),u}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function aT(l,u,d){const g=l.previousIndex;if(null===g)return g;let v=0;return d&&g<d.length&&(v=d[g]),g+u+v}class lT{constructor(){}supports(u){return u instanceof Map||a1(u)}create(){return new uT}}class uT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(u){let d;for(d=this._mapHead;null!==d;d=d._next)u(d)}forEachPreviousItem(u){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)u(d)}forEachChangedItem(u){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)u(d)}forEachAddedItem(u){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)u(d)}forEachRemovedItem(u){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)u(d)}diff(u){if(u){if(!(u instanceof Map||a1(u)))throw new Error(`Error trying to diff '${xe(u)}'. Only maps and objects are allowed`)}else u=new Map;return this.check(u)?this:null}onDestroy(){}check(u){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(u,(g,v)=>{if(d&&d.key===v)this._maybeAddToChanges(d,g),this._appendAfter=d,d=d._next;else{const C=this._getOrCreateRecordForKey(v,g);d=this._insertBeforeOrAppend(d,C)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let g=d;null!==g;g=g._nextRemoved)g===this._mapHead&&(this._mapHead=null),this._records.delete(g.key),g._nextRemoved=g._next,g.previousValue=g.currentValue,g.currentValue=null,g._prev=null,g._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(u,d){if(u){const g=u._prev;return d._next=u,d._prev=g,u._prev=d,g&&(g._next=d),u===this._mapHead&&(this._mapHead=d),this._appendAfter=u,u}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(u,d){if(this._records.has(u)){const v=this._records.get(u);this._maybeAddToChanges(v,d);const C=v._prev,T=v._next;return C&&(C._next=T),T&&(T._prev=C),v._next=null,v._prev=null,v}const g=new rN(u);return this._records.set(u,g),g.currentValue=d,this._addToAdditions(g),g}_reset(){if(this.isDirty){let u;for(this._previousMapHead=this._mapHead,u=this._previousMapHead;null!==u;u=u._next)u._nextPrevious=u._next;for(u=this._changesHead;null!==u;u=u._nextChanged)u.previousValue=u.currentValue;for(u=this._additionsHead;null!=u;u=u._nextAdded)u.previousValue=u.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(u,d){Object.is(d,u.currentValue)||(u.previousValue=u.currentValue,u.currentValue=d,this._addToChanges(u))}_addToAdditions(u){null===this._additionsHead?this._additionsHead=this._additionsTail=u:(this._additionsTail._nextAdded=u,this._additionsTail=u)}_addToChanges(u){null===this._changesHead?this._changesHead=this._changesTail=u:(this._changesTail._nextChanged=u,this._changesTail=u)}_forEach(u,d){u instanceof Map?u.forEach(d):Object.keys(u).forEach(g=>d(u[g],g))}}class rN{constructor(u){this.key=u,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yp(){return new tv([new qM])}let tv=(()=>{class l{constructor(d){this.factories=d}static create(d,g){if(null!=g){const v=g.factories.slice();d=d.concat(v)}return new l(d)}static extend(d){return{provide:l,useFactory:g=>l.create(d,g||yp()),deps:[[l,new Jl,new Ha]]}}find(d){const g=this.factories.find(v=>v.supports(d));if(null!=g)return g;throw new Error(`Cannot find a differ supporting object '${d}' of type '${function(l){return l.name||typeof l}(d)}'`)}}return l.\u0275prov=cn({token:l,providedIn:"root",factory:yp}),l})();function Z_(){return new J_([new lT])}let J_=(()=>{class l{constructor(d){this.factories=d}static create(d,g){if(g){const v=g.factories.slice();d=d.concat(v)}return new l(d)}static extend(d){return{provide:l,useFactory:g=>l.create(d,g||Z_()),deps:[[l,new Jl,new Ha]]}}find(d){const g=this.factories.find(v=>v.supports(d));if(g)return g;throw new Error(`Cannot find a differ supporting object '${d}'`)}}return l.\u0275prov=cn({token:l,providedIn:"root",factory:Z_}),l})();function rv(l,u,d,g,v=!1){for(;null!==d;){const C=u[d.index];if(null!==C&&g.push(ze(C)),qr(C))for(let I=10;I<C.length;I++){const N=C[I],V=N[1].firstChild;null!==V&&rv(N[1],N,V,g)}const T=d.type;if(8&T)rv(l,u,d.child,g);else if(32&T){const I=Zf(d,u);let N;for(;N=I();)g.push(N)}else if(16&T){const I=mx(u,d);if(Array.isArray(I))g.push(...I);else{const N=eh(u[16]);rv(N[1],N,I,g,!0)}}d=v?d.projectionNext:d.next}return g}class Li{constructor(u,d){this._lView=u,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const u=this._lView,d=u[1];return rv(d,u,d.firstChild,[])}get context(){return this._lView[8]}set context(u){this._lView[8]=u}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const u=this._lView[3];if(qr(u)){const d=u[8],g=d?d.indexOf(this):-1;g>-1&&(Hy(u,g),No(d,g))}this._attachedToViewContainer=!1}px(this._lView[1],this._lView)}onDestroy(u){Ax(this._lView[1],this._lView,null,u)}markForCheck(){f_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Og(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(l,u,d){ye(!0);try{Og(l,u,d)}finally{ye(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var u;this._appRef=null,Cg(this._lView[1],u=this._lView,u[11],2,null,null)}attachToAppRef(u){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=u}}class Q_ extends Li{constructor(u){super(u),this._view=u}detectChanges(){fw(this._view)}checkNoChanges(){!function(l){ye(!0);try{fw(l)}finally{ye(!1)}}(this._view)}get context(){return null}}const $_=function(l){return function(l,u,d){if(Xo(l)&&!d){const g=xi(l.index,u);return new Li(g,g)}return 47&l.type?new Li(u[16],u):null}(Do(),Qt(),16==(16&l))};let oN=(()=>{class l{}return l.__NG_ELEMENT_ID__=$_,l})();const aN=[new lT],ZM=new tv([new qM]),eE=new J_(aN),cT=function(){return nC(Do(),Qt())};let Kg=(()=>{class l{}return l.__NG_ELEMENT_ID__=cT,l})();const eC=Kg,uN=class extends eC{constructor(u,d,g){super(),this._declarationLView=u,this._declarationTContainer=d,this.elementRef=g}createEmbeddedView(u){const d=this._declarationTContainer.tViews,g=Rl(this._declarationLView,d,u,16,null,d.declTNode,null,null,null,null);g[17]=this._declarationLView[this._declarationTContainer.index];const C=this._declarationLView[19];return null!==C&&(g[19]=C.createEmbeddedView(d)),Ig(d,g,u),new Li(g)}};function nC(l,u){return 4&l.type?new uN(u,l,$h(l,u)):null}class Zg{}class iv{}const dT=function(){return Jg(Do(),Qt())};let rC=(()=>{class l{}return l.__NG_ELEMENT_ID__=dT,l})();const $M=rC,iC=class extends $M{constructor(u,d,g){super(),this._lContainer=u,this._hostTNode=d,this._hostLView=g}get element(){return $h(this._hostTNode,this._hostLView)}get injector(){return new z(this._hostTNode,this._hostLView)}get parentInjector(){const u=bc(this._hostTNode,this._hostLView);if(Gm(u)){const d=_c(u,this._hostLView),g=Mh(u);return new z(d[1].data[g+8],d)}return new z(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(u){const d=eR(this._lContainer);return null!==d&&d[u]||null}get length(){return this._lContainer.length-10}createEmbeddedView(u,d,g){const v=u.createEmbeddedView(d||{});return this.insert(v,g),v}createComponent(u,d,g,v,C){const T=g||this.parentInjector;if(!C&&null==u.ngModule&&T){const N=T.get(Zg,null);N&&(C=N)}const I=u.create(T,v,void 0,C);return this.insert(I.hostView,d),I}insert(u,d){const g=u._lView,v=g[1];if(qr(g[3])){const Z=this.indexOf(u);if(-1!==Z)this.detach(Z);else{const de=g[3],be=new iC(de,de[6],de[3]);be.detach(be.indexOf(u))}}const C=this._adjustIndex(d),T=this._lContainer;!function(l,u,d,g){const v=10+g,C=d.length;g>0&&(d[v-1][4]=u),g<C-10?(u[4]=d[v],cg(d,10+g,u)):(d.push(u),u[4]=null),u[3]=d;const T=u[17];null!==T&&d!==T&&function(l,u){const d=l[9];u[16]!==u[3][3][16]&&(l[2]=!0),null===d?l[9]=[u]:d.push(u)}(T,u);const I=u[19];null!==I&&I.insertView(l),u[2]|=128}(v,g,T,C);const I=Xy(C,T),N=g[11],V=f0(N,T[7]);return null!==V&&function(l,u,d,g,v,C){g[0]=v,g[6]=u,Cg(l,g,d,1,v,C)}(v,T[6],N,g,V,I),u.attachToViewContainerRef(),cg(tE(T),C,u),u}move(u,d){return this.insert(u,d)}indexOf(u){const d=eR(this._lContainer);return null!==d?d.indexOf(u):-1}remove(u){const d=this._adjustIndex(u,-1),g=Hy(this._lContainer,d);g&&(No(tE(this._lContainer),d),px(g[1],g))}detach(u){const d=this._adjustIndex(u,-1),g=Hy(this._lContainer,d);return g&&null!=No(tE(this._lContainer),d)?new Li(g):null}_adjustIndex(u,d=0){return null==u?this.length+d:u}};function eR(l){return l[8]}function tE(l){return l[8]||(l[8]=[])}function Jg(l,u){let d;const g=u[l.index];if(qr(g))d=g;else{let v;if(8&l.type)v=ze(g);else{const C=u[11];v=C.createComment("");const T=tr(l,u);el(C,f0(C,T),v,function(l,u){return H(l)?l.nextSibling(u):u.nextSibling}(C,T),!1)}u[l.index]=d=d_(g,u,v,l),x0(u,d)}return new iC(d,l,u)}const jc={};class SR extends Qh{constructor(u){super(),this.ngModule=u}resolveComponentFactory(u){const d=ns(u);return new xR(d,this.ngModule)}}function PT(l){const u=[];for(let d in l)l.hasOwnProperty(d)&&u.push({propName:l[d],templateName:d});return u}const NN=new fo("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ux});class xR extends rT{constructor(u,d){super(),this.componentDef=u,this.ngModule=d,this.componentType=u.type,this.selector=u.selectors.map(wx).join(","),this.ngContentSelectors=u.ngContentSelectors?u.ngContentSelectors:[],this.isBoundToModule=!!d}get inputs(){return PT(this.componentDef.inputs)}get outputs(){return PT(this.componentDef.outputs)}create(u,d,g,v){const C=(v=v||this.ngModule)?function(l,u){return{get:(d,g,v)=>{const C=l.get(d,jc,v);return C!==jc||g===jc?C:u.get(d,g,v)}}}(u,v.injector):u,T=C.get(Jw,q),I=C.get(vp,null),N=T.createRenderer(null,this.componentDef),V=this.componentDef.selectors[0][0]||"div",Z=g?function(l,u,d){if(H(l))return l.selectRootElement(u,d===Yt.ShadowDom);let g="string"==typeof u?l.querySelector(u):u;return g.textContent="",g}(N,g,this.componentDef.encapsulation):th(T.createRenderer(null,this.componentDef),V,function(l){const u=l.toLowerCase();return"svg"===u?"http://www.w3.org/2000/svg":"math"===u?"http://www.w3.org/1998/MathML/":null}(V)),de=this.componentDef.onPush?576:528,be=function(l,u){return{components:[],scheduler:l||ux,clean:gw,playerHandler:u||null,flags:0}}(),He=oh(0,null,null,1,0,null,null,null,null,null),lt=Rl(null,He,be,de,null,null,T,N,I,C);let Rt,Ct;El(lt);try{const hn=function(l,u,d,g,v,C){const T=d[1];d[20]=l;const N=Ol(T,20,2,"#host",null),V=N.mergedAttrs=u.hostAttrs;null!==V&&(Xh(N,V,!0),null!==l&&(mu(v,l,V),null!==N.classes&&Vh(v,l,N.classes),null!==N.styles&&Sg(v,l,N.styles)));const Z=g.createRenderer(l,u),de=Rl(d,ow(u),null,u.onPush?64:16,d[20],N,g,Z,C||null,null);return T.firstCreatePass&&(ld(Nf(N,d),T,u.type),uw(T,N),cw(N,d.length,1)),x0(d,de),d[20]=de}(Z,this.componentDef,lt,T,N);if(Z)if(g)mu(N,Z,["ng-version",YM.full]);else{const{attrs:Dt,classes:ir}=function(l){const u=[],d=[];let g=1,v=2;for(;g<l.length;){let C=l[g];if("string"==typeof C)2===v?""!==C&&u.push(C,l[++g]):8===v&&d.push(C);else{if(!Ql(v))break;v=C}g++}return{attrs:u,classes:d}}(this.componentDef.selectors[0]);Dt&&mu(N,Z,Dt),ir&&ir.length>0&&Vh(N,Z,ir.join(" "))}if(Ct=Gn(He,20),void 0!==d){const Dt=Ct.projection=[];for(let ir=0;ir<this.ngContentSelectors.length;ir++){const Ur=d[ir];Dt.push(null!=Ur?Array.from(Ur):null)}}Rt=function(l,u,d,g,v){const C=d[1],T=function(l,u,d){const g=Do();l.firstCreatePass&&(d.providersResolver&&d.providersResolver(d),Bx(l,g,u,lp(l,u,1,null),d));const v=lg(u,l,g.directiveStart,g);xa(v,u);const C=tr(g,u);return C&&xa(C,u),v}(C,d,u);if(g.components.push(T),l[8]=T,v&&v.forEach(N=>N(T,u)),u.contentQueries){const N=Do();u.contentQueries(1,T,N.directiveStart)}const I=Do();return!C.firstCreatePass||null===u.hostBindings&&null===u.hostAttrs||(gu(I.index),Lx(d[1],I,0,I.directiveStart,I.directiveEnd,u),Nx(u,T)),T}(hn,this.componentDef,lt,be,[pt]),Ig(He,lt,null)}finally{ja()}return new FN(this.componentType,Rt,$h(Ct,lt),lt,Ct)}}class FN extends class{}{constructor(u,d,g,v,C){super(),this.location=g,this._rootLView=v,this._tNode=C,this.instance=d,this.hostView=this.changeDetectorRef=new Q_(v),this.componentType=u}get injector(){return new z(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(u){this.hostView.onDestroy(u)}}const rf=new Map;class jN extends Zg{constructor(u,d){super(),this._parent=d,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new SR(this);const g=oo(u),v=u[_r]||null;v&&X0(v),this._bootstrapComponents=Pc(g.bootstrap),this._r3Injector=Ew(u,d,[{provide:Zg,useValue:this},{provide:Qh,useValue:this.componentFactoryResolver}],xe(u)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(u)}get(u,d=po.THROW_IF_NOT_FOUND,g=en.Default){return u===po||u===Zg||u===bd?this:this._r3Injector.get(u,d,g)}destroy(){const u=this._r3Injector;!u.destroyed&&u.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(u){this.destroyCbs.push(u)}}class mC extends iv{constructor(u){super(),this.moduleType=u,null!==oo(u)&&function(l){const u=new Set;!function d(g){const v=oo(g,!0),C=v.id;null!==C&&(function(l,u,d){if(u&&u!==d)throw new Error(`Duplicate module registered for ${l} - ${xe(u)} vs ${xe(u.name)}`)}(C,rf.get(C),g),rf.set(C,g));const T=Pc(v.imports);for(const I of T)u.has(I)||(u.add(I),d(I))}(l)}(u)}create(u){return new jN(this.moduleType,u)}}function DR(l){return u=>{setTimeout(l,void 0,u)}}const of=class extends Q.xQ{constructor(u=!1){super(),this.__isAsync=u}emit(u){super.next(u)}subscribe(u,d,g){var v,C,T;let I=u,N=d||(()=>null),V=g;if(u&&"object"==typeof u){const de=u;I=null===(v=de.next)||void 0===v?void 0:v.bind(de),N=null===(C=de.error)||void 0===C?void 0:C.bind(de),V=null===(T=de.complete)||void 0===T?void 0:T.bind(de)}this.__isAsync&&(N=DR(N),I&&(I=DR(I)),V&&(V=DR(V)));const Z=super.subscribe({next:I,error:N,complete:V});return u instanceof _.w&&u.add(Z),Z}};function h4(){return this._results[Cd()]()}class EC{constructor(u=!1){this._emitDistinctChangesOnly=u,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=Cd(),g=EC.prototype;g[d]||(g[d]=h4)}get changes(){return this._changes||(this._changes=new of)}get(u){return this._results[u]}map(u){return this._results.map(u)}filter(u){return this._results.filter(u)}find(u){return this._results.find(u)}reduce(u,d){return this._results.reduce(u,d)}forEach(u){this._results.forEach(u)}some(u){return this._results.some(u)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(u,d){const g=this;g.dirty=!1;const v=Eo(u);(this._changesDetected=!function(l,u,d){if(l.length!==u.length)return!1;for(let g=0;g<l.length;g++){let v=l[g],C=u[g];if(d&&(v=d(v),C=d(C)),C!==v)return!1}return!0}(g._results,v,d))&&(g._results=v,g.length=v.length,g.last=v[this.length-1],g.first=v[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class LR{constructor(u){this.queryList=u,this.matches=null}clone(){return new LR(this.queryList)}setDirty(){this.queryList.setDirty()}}class kR{constructor(u=[]){this.queries=u}createEmbeddedView(u){const d=u.queries;if(null!==d){const g=null!==u.contentQueries?u.contentQueries[0]:d.length,v=[];for(let C=0;C<g;C++){const T=d.getByIndex(C);v.push(this.queries[T.indexInDeclarationView].clone())}return new kR(v)}return null}insertView(u){this.dirtyQueriesWithMatches(u)}detachView(u){this.dirtyQueriesWithMatches(u)}dirtyQueriesWithMatches(u){for(let d=0;d<this.queries.length;d++)null!==bC(u,d).matches&&this.queries[d].setDirty()}}class KN{constructor(u,d,g=null){this.predicate=u,this.flags=d,this.read=g}}class NR{constructor(u=[]){this.queries=u}elementStart(u,d){for(let g=0;g<this.queries.length;g++)this.queries[g].elementStart(u,d)}elementEnd(u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(u)}embeddedTView(u){let d=null;for(let g=0;g<this.length;g++){const v=null!==d?d.length:0,C=this.getByIndex(g).embeddedTView(u,v);C&&(C.indexInDeclarationView=g,null!==d?d.push(C):d=[C])}return null!==d?new NR(d):null}template(u,d){for(let g=0;g<this.queries.length;g++)this.queries[g].template(u,d)}getByIndex(u){return this.queries[u]}get length(){return this.queries.length}track(u){this.queries.push(u)}}class FR{constructor(u,d=-1){this.metadata=u,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(u,d){this.isApplyingToNode(d)&&this.matchTNode(u,d)}elementEnd(u){this._declarationNodeIndex===u.index&&(this._appliesToNextNode=!1)}template(u,d){this.elementStart(u,d)}embeddedTView(u,d){return this.isApplyingToNode(u)?(this.crossesNgTemplate=!0,this.addMatch(-u.index,d),new FR(this.metadata)):null}isApplyingToNode(u){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let g=u.parent;for(;null!==g&&8&g.type&&g.index!==d;)g=g.parent;return d===(null!==g?g.index:-1)}return this._appliesToNextNode}matchTNode(u,d){const g=this.metadata.predicate;if(Array.isArray(g))for(let v=0;v<g.length;v++){const C=g[v];this.matchTNodeWithReadOption(u,d,g4(d,C)),this.matchTNodeWithReadOption(u,d,ag(d,u,C,!1,!1))}else g===Kg?4&d.type&&this.matchTNodeWithReadOption(u,d,-1):this.matchTNodeWithReadOption(u,d,ag(d,u,g,!1,!1))}matchTNodeWithReadOption(u,d,g){if(null!==g){const v=this.metadata.read;if(null!==v)if(v===fh||v===rC||v===Kg&&4&d.type)this.addMatch(d.index,-2);else{const C=ag(d,u,v,!1,!1);null!==C&&this.addMatch(d.index,C)}else this.addMatch(d.index,g)}}addMatch(u,d){null===this.matches?this.matches=[u,d]:this.matches.push(u,d)}}function g4(l,u){const d=l.localNames;if(null!==d)for(let g=0;g<d.length;g+=2)if(d[g]===u)return d[g+1];return null}function v4(l,u,d,g){return-1===d?function(l,u){return 11&l.type?$h(l,u):4&l.type?nC(l,u):null}(u,l):-2===d?function(l,u,d){return d===fh?$h(u,l):d===Kg?nC(u,l):d===rC?Jg(u,l):void 0}(l,u,g):lg(l,l[1],d,u)}function ZN(l,u,d,g){const v=u[19].queries[g];if(null===v.matches){const C=l.data,T=d.matches,I=[];for(let N=0;N<T.length;N+=2){const V=T[N];I.push(V<0?null:v4(u,C[V],T[N+1],d.metadata.read))}v.matches=I}return v.matches}function GR(l,u,d,g){const v=l.queries.getByIndex(d),C=v.matches;if(null!==C){const T=ZN(l,u,v,d);for(let I=0;I<C.length;I+=2){const N=C[I];if(N>0)g.push(T[I/2]);else{const V=C[I+1],Z=u[-N];for(let de=10;de<Z.length;de++){const be=Z[de];be[17]===be[3]&&GR(be[1],be,V,g)}if(null!==Z[9]){const de=Z[9];for(let be=0;be<de.length;be++){const He=de[be];GR(He[1],He,V,g)}}}}}return g}function JN(l){const u=Qt(),d=ui(),g=Po();lo(g+1);const v=bC(d,g);if(l.dirty&&ei(u)===(2==(2&v.metadata.flags))){if(null===v.matches)l.reset([]);else{const C=v.crossesNgTemplate?GR(d,u,g,[]):ZN(d,u,v,g);l.reset(C,zM),l.notifyOnChanges()}return!0}return!1}function QN(l,u,d){const g=ui();g.firstCreatePass&&(jR(g,new KN(l,u,d),-1),2==(2&u)&&(g.staticViewQueries=!0)),Ir(g,Qt(),u)}function $N(l,u,d,g){const v=ui();if(v.firstCreatePass){const C=Do();jR(v,new KN(u,d,g),C.index),function(l,u){const d=l.contentQueries||(l.contentQueries=[]);u!==(d.length?d[d.length-1]:-1)&&d.push(l.queries.length-1,u)}(v,l),2==(2&d)&&(v.staticContentQueries=!0)}Ir(v,Qt(),d)}function eF(){return l=Qt(),u=Po(),l[19].queries[u].queryList;var l,u}function Ir(l,u,d){const g=new EC(4==(4&d));Ax(l,u,g,g.destroy),null===u[19]&&(u[19]=new kR),u[19].queries.push(new LR(g))}function jR(l,u,d){null===l.queries&&(l.queries=new NR),l.queries.track(new FR(u,d))}function bC(l,u){return l.queries.getByIndex(u)}const hE=new fo("Application Initializer");let eu=(()=>{class l{constructor(d){this.appInits=d,this.resolve=ev,this.reject=ev,this.initialized=!1,this.done=!1,this.donePromise=new Promise((g,v)=>{this.resolve=g,this.reject=v})}runInitializers(){if(this.initialized)return;const d=[],g=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let v=0;v<this.appInits.length;v++){const C=this.appInits[v]();if(S1(C))d.push(C);else if(Wu(C)){const T=new Promise((I,N)=>{C.subscribe({complete:I,error:N})});d.push(T)}}Promise.all(d).then(()=>{g()}).catch(v=>{this.reject(v)}),0===d.length&&g(),this.initialized=!0}}return l.\u0275fac=function(d){return new(d||l)(As(hE,8))},l.\u0275prov=cn({token:l,factory:l.\u0275fac}),l})();const SC=new fo("AppId"),tu={provide:SC,useFactory:function(){return`${Qu()}${Qu()}${Qu()}`},deps:[]};function Qu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const om=new fo("Platform Initializer"),dv=new fo("Platform ID"),pF=new fo("appBootstrapListener");let gF=(()=>{class l{log(d){console.log(d)}warn(d){console.warn(d)}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275prov=cn({token:l,factory:l.\u0275fac}),l})();const Sp=new fo("LocaleId"),mF=new fo("DefaultCurrencyCode");class rO{constructor(u,d){this.ngModuleFactory=u,this.componentFactories=d}}const sm=function(l){return new mC(l)},xp=sm,jT=function(l){return Promise.resolve(sm(l))},yF=function(l){const u=sm(l),g=Pc(oo(l).declarations).reduce((v,C)=>{const T=ns(C);return T&&v.push(new xR(T)),v},[]);return new rO(u,g)},Tp=yF,lf=function(l){return Promise.resolve(yF(l))};let uf=(()=>{class l{constructor(){this.compileModuleSync=xp,this.compileModuleAsync=jT,this.compileModuleAndAllComponentsSync=Tp,this.compileModuleAndAllComponentsAsync=lf}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275prov=cn({token:l,factory:l.\u0275fac}),l})();const _F=(()=>Promise.resolve(0))();function UT(l){"undefined"==typeof Zone?_F.then(()=>{l&&l.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",l)}class ec{constructor({enableLongStackTrace:u=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:g=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new of(!1),this.onMicrotaskEmpty=new of(!1),this.onStable=new of(!1),this.onError=new of(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const v=this;v._nesting=0,v._outer=v._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(v._inner=v._inner.fork(new Zone.TaskTrackingZoneSpec)),u&&Zone.longStackTraceZoneSpec&&(v._inner=v._inner.fork(Zone.longStackTraceZoneSpec)),v.shouldCoalesceEventChangeDetection=!g&&d,v.shouldCoalesceRunChangeDetection=g,v.lastRequestAnimationFrameId=-1,v.nativeRequestAnimationFrame=function(){let l=kr.requestAnimationFrame,u=kr.cancelAnimationFrame;if("undefined"!=typeof Zone&&l&&u){const d=l[Zone.__symbol__("OriginalDelegate")];d&&(l=d);const g=u[Zone.__symbol__("OriginalDelegate")];g&&(u=g)}return{nativeRequestAnimationFrame:l,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function(l){const u=()=>{!function(l){l.isCheckStableRunning||-1!==l.lastRequestAnimationFrameId||(l.lastRequestAnimationFrameId=l.nativeRequestAnimationFrame.call(kr,()=>{l.fakeTopEventTask||(l.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{l.lastRequestAnimationFrameId=-1,HT(l),l.isCheckStableRunning=!0,zT(l),l.isCheckStableRunning=!1},void 0,()=>{},()=>{})),l.fakeTopEventTask.invoke()}),HT(l))}(l)};l._inner=l._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,g,v,C,T,I)=>{try{return Eu(l),d.invokeTask(v,C,T,I)}finally{(l.shouldCoalesceEventChangeDetection&&"eventTask"===C.type||l.shouldCoalesceRunChangeDetection)&&u(),Bn(l)}},onInvoke:(d,g,v,C,T,I,N)=>{try{return Eu(l),d.invoke(v,C,T,I,N)}finally{l.shouldCoalesceRunChangeDetection&&u(),Bn(l)}},onHasTask:(d,g,v,C)=>{d.hasTask(v,C),g===v&&("microTask"==C.change?(l._hasPendingMicrotasks=C.microTask,HT(l),zT(l)):"macroTask"==C.change&&(l.hasPendingMacrotasks=C.macroTask))},onHandleError:(d,g,v,C)=>(d.handleError(v,C),l.runOutsideAngular(()=>l.onError.emit(C)),!1)})}(v)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ec.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ec.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(u,d,g){return this._inner.run(u,d,g)}runTask(u,d,g,v){const C=this._inner,T=C.scheduleEventTask("NgZoneEvent: "+v,u,VT,ev,ev);try{return C.runTask(T,d,g)}finally{C.cancelTask(T)}}runGuarded(u,d,g){return this._inner.runGuarded(u,d,g)}runOutsideAngular(u){return this._outer.run(u)}}const VT={};function zT(l){if(0==l._nesting&&!l.hasPendingMicrotasks&&!l.isStable)try{l._nesting++,l.onMicrotaskEmpty.emit(null)}finally{if(l._nesting--,!l.hasPendingMicrotasks)try{l.runOutsideAngular(()=>l.onStable.emit(null))}finally{l.isStable=!0}}}function HT(l){l.hasPendingMicrotasks=!!(l._hasPendingMicrotasks||(l.shouldCoalesceEventChangeDetection||l.shouldCoalesceRunChangeDetection)&&-1!==l.lastRequestAnimationFrameId)}function Eu(l){l._nesting++,l.isStable&&(l.isStable=!1,l.onUnstable.emit(null))}function Bn(l){l._nesting--,zT(l)}class iO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new of,this.onMicrotaskEmpty=new of,this.onStable=new of,this.onError=new of}run(u,d,g){return u.apply(d,g)}runGuarded(u,d,g){return u.apply(d,g)}runOutsideAngular(u){return u()}runTask(u,d,g,v){return u.apply(d,g)}}let bF=(()=>{class l{constructor(d){this._ngZone=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ec.assertNotInAngularZone(),UT(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())UT(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(g=>!g.updateCb||!g.updateCb(d)||(clearTimeout(g.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,g,v){let C=-1;g&&g>0&&(C=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==C),d(this._didWork,this.getPendingTasks())},g)),this._callbacks.push({doneCb:d,timeoutId:C,updateCb:v})}whenStable(d,g,v){if(v&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,g,v),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(d,g,v){return[]}}return l.\u0275fac=function(d){return new(d||l)(As(ec))},l.\u0275prov=cn({token:l,factory:l.\u0275fac}),l})(),WT=(()=>{class l{constructor(){this._applications=new Map,YT.addToWindow(this)}registerApplication(d,g){this._applications.set(d,g)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,g=!0){return YT.findTestabilityInTree(this,d,g)}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275prov=cn({token:l,factory:l.\u0275fac}),l})();class R4{addToWindow(u){}findTestabilityInTree(u,d,g){return null}}function O4(l){YT=l}let YT=new R4,oO=!0,pE=!1;function qT(){return pE=!0,oO}function sO(){if(pE)throw new Error("Cannot enable prod mode after platform setup.");oO=!1}let Dd;const uO=new fo("AllowMultipleToken");class SF{constructor(u,d){this.name=u,this.token=d}}function cO(l,u,d=[]){const g=`Platform: ${u}`,v=new fo(g);return(C=[])=>{let T=lm();if(!T||T.injector.get(uO,!1))if(l)l(d.concat(C).concat({provide:v,useValue:!0}));else{const I=d.concat(C).concat({provide:v,useValue:!0},{provide:Dg,useValue:"platform"});!function(l){if(Dd&&!Dd.destroyed&&!Dd.injector.get(uO,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Dd=l.get(um);const u=l.get(om,null);u&&u.forEach(d=>d())}(po.create({providers:I,name:g}))}return function(l){const u=lm();if(!u)throw new Error("No platform exists!");if(!u.injector.get(l,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return u}(v)}}function lm(){return Dd&&!Dd.destroyed?Dd:null}let um=(()=>{class l{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,g){const I=function(l,u){let d;return d="noop"===l?new iO:("zone.js"===l?void 0:l)||new ec({enableLongStackTrace:qT(),shouldCoalesceEventChangeDetection:!!(null==u?void 0:u.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==u?void 0:u.ngZoneRunCoalescing)}),d}(g?g.ngZone:void 0,{ngZoneEventCoalescing:g&&g.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:g&&g.ngZoneRunCoalescing||!1}),N=[{provide:ec,useValue:I}];return I.run(()=>{const V=po.create({providers:N,parent:this.injector,name:d.moduleType.name}),Z=d.create(V),de=Z.injector.get(qf,null);if(!de)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return I.runOutsideAngular(()=>{const be=I.onError.subscribe({next:He=>{de.handleError(He)}});Z.onDestroy(()=>{PC(this._modules,Z),be.unsubscribe()})}),function(l,u,d){try{const g=d();return S1(g)?g.catch(v=>{throw u.runOutsideAngular(()=>l.handleError(v)),v}):g}catch(g){throw u.runOutsideAngular(()=>l.handleError(g)),g}}(de,I,()=>{const be=Z.injector.get(eu);return be.runInitializers(),be.donePromise.then(()=>(X0(Z.injector.get(Sp,di)||di),this._moduleDoBootstrap(Z),Z))})})}bootstrapModule(d,g=[]){const v=XT({},g);return function(l,u,d){const g=new mC(d);return Promise.resolve(g)}(0,0,d).then(C=>this.bootstrapModuleFactory(C,v))}_moduleDoBootstrap(d){const g=d.injector.get(fv);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(v=>g.bootstrap(v));else{if(!d.instance.ngDoBootstrap)throw new Error(`The module ${xe(d.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);d.instance.ngDoBootstrap(g)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d()),this._destroyed=!0}get destroyed(){return this._destroyed}}return l.\u0275fac=function(d){return new(d||l)(As(po))},l.\u0275prov=cn({token:l,factory:l.\u0275fac}),l})();function XT(l,u){return Array.isArray(u)?u.reduce(XT,l):Object.assign(Object.assign({},l),u)}let fv=(()=>{class l{constructor(d,g,v,C,T){this._zone=d,this._injector=g,this._exceptionHandler=v,this._componentFactoryResolver=C,this._initStatus=T,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const I=new Pe.y(V=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{V.next(this._stable),V.complete()})}),N=new Pe.y(V=>{let Z;this._zone.runOutsideAngular(()=>{Z=this._zone.onStable.subscribe(()=>{ec.assertNotInAngularZone(),UT(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,V.next(!0))})})});const de=this._zone.onUnstable.subscribe(()=>{ec.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{V.next(!1)}))});return()=>{Z.unsubscribe(),de.unsubscribe()}});this.isStable=(0,we.T)(I,N.pipe((0,Ke.B)()))}bootstrap(d,g){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let v;v=d instanceof rT?d:this._componentFactoryResolver.resolveComponentFactory(d),this.componentTypes.push(v.componentType);const C=function(l){return l.isBoundToModule}(v)?void 0:this._injector.get(Zg),I=v.create(po.NULL,[],g||v.selector,C),N=I.location.nativeElement,V=I.injector.get(bF,null),Z=V&&I.injector.get(WT);return V&&Z&&Z.registerApplication(N,V),I.onDestroy(()=>{this.detachView(I.hostView),PC(this.components,I),Z&&Z.unregisterApplication(N)}),this._loadComponent(I),I}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(d))}finally{this._runningTick=!1}}attachView(d){const g=d;this._views.push(g),g.attachToAppRef(this)}detachView(d){const g=d;PC(this._views,g),g.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d),this._injector.get(pF,[]).concat(this._bootstrapListeners).forEach(v=>v(d))}ngOnDestroy(){this._views.slice().forEach(d=>d.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return l.\u0275fac=function(d){return new(d||l)(As(ec),As(po),As(qf),As(Qh),As(eu))},l.\u0275prov=cn({token:l,factory:l.\u0275fac}),l})();function PC(l,u){const d=l.indexOf(u);d>-1&&l.splice(d,1)}class fO{}class AF{}const KT={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let yt=(()=>{class l{constructor(d,g){this._compiler=d,this._config=g||KT}load(d){return this.loadAndCompile(d)}loadAndCompile(d){let[g,v]=d.split("#");return void 0===v&&(v="default"),ee(8255)(g).then(C=>C[v]).then(C=>mE(C,g,v)).then(C=>this._compiler.compileModuleAsync(C))}loadFactory(d){let[g,v]=d.split("#"),C="NgFactory";return void 0===v&&(v="default",C=""),ee(8255)(this._config.factoryPathPrefix+g+this._config.factoryPathSuffix).then(T=>T[v+C]).then(T=>mE(T,g,v))}}return l.\u0275fac=function(d){return new(d||l)(As(uf),As(AF,8))},l.\u0275prov=cn({token:l,factory:l.\u0275fac}),l})();function mE(l,u,d){if(!l)throw new Error(`Cannot find '${d}' in '${u}'`);return l}const bO=function(l){return null},G4=cO(null,"core",[{provide:dv,useValue:"unknown"},{provide:um,deps:[po]},{provide:WT,deps:[]},{provide:gF,deps:[]}]),FF=[{provide:fv,useClass:fv,deps:[ec,po,qf,Qh,eu]},{provide:NN,deps:[ec],useFactory:function(l){let u=[];return l.onStable.subscribe(()=>{for(;u.length;)u.pop()()}),function(d){u.push(d)}}},{provide:eu,useClass:eu,deps:[[new Ha,hE]]},{provide:uf,useClass:uf,deps:[]},tu,{provide:tv,useFactory:function(){return ZM},deps:[]},{provide:J_,useFactory:function(){return eE},deps:[]},{provide:Sp,useFactory:function(l){return X0(l=l||"undefined"!=typeof $localize&&$localize.locale||di),l},deps:[[new Lh(Sp),new Ha,new Jl]]},{provide:mF,useValue:"USD"}];let SO=(()=>{class l{constructor(d){}}return l.\u0275fac=function(d){return new(d||l)(As(fv))},l.\u0275mod=To({type:l}),l.\u0275inj=qn({providers:FF}),l})()},6237:(Tt,St,ee)=>{"use strict";ee.d(St,{Qb:()=>ui,PW:()=>Kl});var Q=ee(7716),_=ee(9075),Pe=ee(7238);function we(){return"undefined"!=typeof window&&void 0!==window.document}function Ke(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function _e(re){switch(re.length){case 0:return new Pe.ZN;case 1:return re[0];default:return new Pe.ZE(re)}}function nt(re,A,M,U,ne={},ye={}){const De=[],je=[];let wt=-1,Ut=null;if(U.forEach(gn=>{const sn=gn.offset,Er=sn==wt,yi=Er&&Ut||{};Object.keys(gn).forEach(gr=>{let Or=gr,ci=gn[gr];if("offset"!==gr)switch(Or=A.normalizePropertyName(Or,De),ci){case Pe.k1:ci=ne[gr];break;case Pe.l3:ci=ye[gr];break;default:ci=A.normalizeStyleValue(gr,Or,ci,De)}yi[Or]=ci}),Er||je.push(yi),Ut=yi,wt=sn}),De.length){const gn="\n - ";throw new Error(`Unable to animate due to the following errors:${gn}${De.join(gn)}`)}return je}function xe(re,A,M,U){switch(A){case"start":re.onStart(()=>U(M&&We(M,"start",re)));break;case"done":re.onDone(()=>U(M&&We(M,"done",re)));break;case"destroy":re.onDestroy(()=>U(M&&We(M,"destroy",re)))}}function We(re,A,M){const U=M.totalTime,ye=ve(re.element,re.triggerName,re.fromState,re.toState,A||re.phaseName,null==U?re.totalTime:U,!!M.disabled),De=re._data;return null!=De&&(ye._data=De),ye}function ve(re,A,M,U,ne="",ye=0,De){return{element:re,triggerName:A,fromState:M,toState:U,phaseName:ne,totalTime:ye,disabled:!!De}}function Ge(re,A,M){let U;return re instanceof Map?(U=re.get(A),U||re.set(A,U=M)):(U=re[A],U||(U=re[A]=M)),U}function Ie(re){const A=re.indexOf(":");return[re.substring(1,A),re.substr(A+1)]}let at=(re,A)=>!1,Se=(re,A)=>!1,Be=(re,A,M)=>[];const ue=Ke();(ue||"undefined"!=typeof Element)&&(at=we()?(re,A)=>{for(;A&&A!==document.documentElement;){if(A===re)return!0;A=A.parentNode||A.host}return!1}:(re,A)=>re.contains(A),Se=(()=>{if(ue||Element.prototype.matches)return(re,A)=>re.matches(A);{const re=Element.prototype,A=re.matchesSelector||re.mozMatchesSelector||re.msMatchesSelector||re.oMatchesSelector||re.webkitMatchesSelector;return A?(M,U)=>A.apply(M,[U]):Se}})(),Be=(re,A,M)=>{let U=[];if(M){const ne=re.querySelectorAll(A);for(let ye=0;ye<ne.length;ye++)U.push(ne[ye])}else{const ne=re.querySelector(A);ne&&U.push(ne)}return U});let qe=null,Ye=!1;function _t(re){qe||(qe=("undefined"!=typeof document?document.body:null)||{},Ye=!!qe.style&&"WebkitAppearance"in qe.style);let A=!0;return qe.style&&!function(re){return"ebkit"==re.substring(1,6)}(re)&&(A=re in qe.style,!A&&Ye&&(A="Webkit"+re.charAt(0).toUpperCase()+re.substr(1)in qe.style)),A}const ht=Se,it=at,It=Be;function xt(re){const A={};return Object.keys(re).forEach(M=>{const U=M.replace(/([a-z])([A-Z])/g,"$1-$2");A[U]=re[M]}),A}let te=(()=>{class re{validateStyleProperty(M){return _t(M)}matchesElement(M,U){return ht(M,U)}containsElement(M,U){return it(M,U)}query(M,U,ne){return It(M,U,ne)}computeStyle(M,U,ne){return ne||""}animate(M,U,ne,ye,De,je=[],wt){return new Pe.ZN(ne,ye)}}return re.\u0275fac=function(M){return new(M||re)},re.\u0275prov=Q.Yz7({token:re,factory:re.\u0275fac}),re})();class Ee{}Ee.NOOP=new te;const tn="ng-enter",Ot="ng-leave",un="ng-trigger",Rr=".ng-trigger",hr="ng-animating",pi=".ng-animating";function cn(re){if("number"==typeof re)return re;const A=re.match(/^(-?[\.\d]+)(m?s)/);return!A||A.length<2?0:Ht(parseFloat(A[1]),A[2])}function Ht(re,A){switch(A){case"s":return 1e3*re;default:return re}}function qn(re,A,M){return re.hasOwnProperty("duration")?re:function(re,A,M){let ne,ye=0,De="";if("string"==typeof re){const je=re.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===je)return A.push(`The provided timing value "${re}" is invalid.`),{duration:0,delay:0,easing:""};ne=Ht(parseFloat(je[1]),je[2]);const wt=je[3];null!=wt&&(ye=Ht(parseFloat(wt),je[4]));const Ut=je[5];Ut&&(De=Ut)}else ne=re;if(!M){let je=!1,wt=A.length;ne<0&&(A.push("Duration values below 0 are not allowed for this animation step."),je=!0),ye<0&&(A.push("Delay values below 0 are not allowed for this animation step."),je=!0),je&&A.splice(wt,0,`The provided timing value "${re}" is invalid.`)}return{duration:ne,delay:ye,easing:De}}(re,A,M)}function Gr(re,A={}){return Object.keys(re).forEach(M=>{A[M]=re[M]}),A}function Br(re,A,M={}){if(A)for(let U in re)M[U]=re[U];else Gr(re,M);return M}function Vi(re,A,M){return M?A+":"+M+";":""}function Wn(re){let A="";for(let M=0;M<re.style.length;M++){const U=re.style.item(M);A+=Vi(0,U,re.style.getPropertyValue(U))}for(const M in re.style)re.style.hasOwnProperty(M)&&!M.startsWith("_")&&(A+=Vi(0,mt(M),re.style[M]));re.setAttribute("style",A)}function Wt(re,A,M){re.style&&(Object.keys(A).forEach(U=>{const ne=ke(U);M&&!M.hasOwnProperty(U)&&(M[U]=re.style[ne]),re.style[ne]=A[U]}),Ke()&&Wn(re))}function io(re,A){re.style&&(Object.keys(A).forEach(M=>{const U=ke(M);re.style[U]=""}),Ke()&&Wn(re))}function wr(re){return Array.isArray(re)?1==re.length?re[0]:(0,Pe.vP)(re):re}const Ln=new RegExp("{{\\s*(.+?)\\s*}}","g");function Et(re){let A=[];if("string"==typeof re){let M;for(;M=Ln.exec(re);)A.push(M[1]);Ln.lastIndex=0}return A}function zt(re,A,M){const U=re.toString(),ne=U.replace(Ln,(ye,De)=>{let je=A[De];return A.hasOwnProperty(De)||(M.push(`Please provide a value for the animation param ${De}`),je=""),je.toString()});return ne==U?re:ne}function rt(re){const A=[];let M=re.next();for(;!M.done;)A.push(M.value),M=re.next();return A}const Ae=/-+([a-z0-9])/g;function ke(re){return re.replace(Ae,(...A)=>A[1].toUpperCase())}function mt(re){return re.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Bt(re,A){return 0===re||0===A}function vn(re,A,M){const U=Object.keys(M);if(U.length&&A.length){let ye=A[0],De=[];if(U.forEach(je=>{ye.hasOwnProperty(je)||De.push(je),ye[je]=M[je]}),De.length)for(var ne=1;ne<A.length;ne++){let je=A[ne];De.forEach(function(wt){je[wt]=Sn(re,wt)})}}return A}function Yt(re,A,M){switch(A.type){case 7:return re.visitTrigger(A,M);case 0:return re.visitState(A,M);case 1:return re.visitTransition(A,M);case 2:return re.visitSequence(A,M);case 3:return re.visitGroup(A,M);case 4:return re.visitAnimate(A,M);case 5:return re.visitKeyframes(A,M);case 6:return re.visitStyle(A,M);case 8:return re.visitReference(A,M);case 9:return re.visitAnimateChild(A,M);case 10:return re.visitAnimateRef(A,M);case 11:return re.visitQuery(A,M);case 12:return re.visitStagger(A,M);default:throw new Error(`Unable to resolve animation metadata node #${A.type}`)}}function Sn(re,A){return window.getComputedStyle(re)[A]}function Mi(re,A){const M=[];return"string"==typeof re?re.split(/\s*,\s*/).forEach(U=>function(re,A,M){if(":"==re[0]){const wt=function(re,A){switch(re){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(M,U)=>parseFloat(U)>parseFloat(M);case":decrement":return(M,U)=>parseFloat(U)<parseFloat(M);default:return A.push(`The transition alias value "${re}" is not supported`),"* => *"}}(re,M);if("function"==typeof wt)return void A.push(wt);re=wt}const U=re.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==U||U.length<4)return M.push(`The provided transition expression "${re}" is not supported`),A;const ne=U[1],ye=U[2],De=U[3];A.push(rn(ne,De));"<"==ye[0]&&!("*"==ne&&"*"==De)&&A.push(rn(De,ne))}(U,M,A)):M.push(re),M}const Kr=new Set(["true","1"]),Cr=new Set(["false","0"]);function rn(re,A){const M=Kr.has(re)||Cr.has(re),U=Kr.has(A)||Cr.has(A);return(ne,ye)=>{let De="*"==re||re==ne,je="*"==A||A==ye;return!De&&M&&"boolean"==typeof ne&&(De=ne?Kr.has(re):Cr.has(re)),!je&&U&&"boolean"==typeof ye&&(je=ye?Kr.has(A):Cr.has(A)),De&&je}}const pe=new RegExp("s*:selfs*,?","g");function Ze(re,A,M){return new _n(re).build(A,M)}class _n{constructor(A){this._driver=A}build(A,M){const U=new Zr(M);return this._resetContextStyleTimingState(U),Yt(this,wr(A),U)}_resetContextStyleTimingState(A){A.currentQuerySelector="",A.collectedStyles={},A.collectedStyles[""]={},A.currentTime=0}visitTrigger(A,M){let U=M.queryCount=0,ne=M.depCount=0;const ye=[],De=[];return"@"==A.name.charAt(0)&&M.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),A.definitions.forEach(je=>{if(this._resetContextStyleTimingState(M),0==je.type){const wt=je,Ut=wt.name;Ut.toString().split(/\s*,\s*/).forEach(gn=>{wt.name=gn,ye.push(this.visitState(wt,M))}),wt.name=Ut}else if(1==je.type){const wt=this.visitTransition(je,M);U+=wt.queryCount,ne+=wt.depCount,De.push(wt)}else M.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:A.name,states:ye,transitions:De,queryCount:U,depCount:ne,options:null}}visitState(A,M){const U=this.visitStyle(A.styles,M),ne=A.options&&A.options.params||null;if(U.containsDynamicStyles){const ye=new Set,De=ne||{};if(U.styles.forEach(je=>{if(xo(je)){const wt=je;Object.keys(wt).forEach(Ut=>{Et(wt[Ut]).forEach(gn=>{De.hasOwnProperty(gn)||ye.add(gn)})})}}),ye.size){const je=rt(ye.values());M.errors.push(`state("${A.name}", ...) must define default values for all the following style substitutions: ${je.join(", ")}`)}}return{type:0,name:A.name,style:U,options:ne?{params:ne}:null}}visitTransition(A,M){M.queryCount=0,M.depCount=0;const U=Yt(this,wr(A.animation),M);return{type:1,matchers:Mi(A.expr,M.errors),animation:U,queryCount:M.queryCount,depCount:M.depCount,options:cr(A.options)}}visitSequence(A,M){return{type:2,steps:A.steps.map(U=>Yt(this,U,M)),options:cr(A.options)}}visitGroup(A,M){const U=M.currentTime;let ne=0;const ye=A.steps.map(De=>{M.currentTime=U;const je=Yt(this,De,M);return ne=Math.max(ne,M.currentTime),je});return M.currentTime=ne,{type:3,steps:ye,options:cr(A.options)}}visitAnimate(A,M){const U=function(re,A){let M=null;if(re.hasOwnProperty("duration"))M=re;else if("number"==typeof re)return fr(qn(re,A).duration,0,"");const U=re;if(U.split(/\s+/).some(ye=>"{"==ye.charAt(0)&&"{"==ye.charAt(1))){const ye=fr(0,0,"");return ye.dynamic=!0,ye.strValue=U,ye}return M=M||qn(U,A),fr(M.duration,M.delay,M.easing)}(A.timings,M.errors);M.currentAnimateTimings=U;let ne,ye=A.styles?A.styles:(0,Pe.oB)({});if(5==ye.type)ne=this.visitKeyframes(ye,M);else{let De=A.styles,je=!1;if(!De){je=!0;const Ut={};U.easing&&(Ut.easing=U.easing),De=(0,Pe.oB)(Ut)}M.currentTime+=U.duration+U.delay;const wt=this.visitStyle(De,M);wt.isEmptyStep=je,ne=wt}return M.currentAnimateTimings=null,{type:4,timings:U,style:ne,options:null}}visitStyle(A,M){const U=this._makeStyleAst(A,M);return this._validateStyleAst(U,M),U}_makeStyleAst(A,M){const U=[];Array.isArray(A.styles)?A.styles.forEach(De=>{"string"==typeof De?De==Pe.l3?U.push(De):M.errors.push(`The provided style string value ${De} is not allowed.`):U.push(De)}):U.push(A.styles);let ne=!1,ye=null;return U.forEach(De=>{if(xo(De)){const je=De,wt=je.easing;if(wt&&(ye=wt,delete je.easing),!ne)for(let Ut in je)if(je[Ut].toString().indexOf("{{")>=0){ne=!0;break}}}),{type:6,styles:U,easing:ye,offset:A.offset,containsDynamicStyles:ne,options:null}}_validateStyleAst(A,M){const U=M.currentAnimateTimings;let ne=M.currentTime,ye=M.currentTime;U&&ye>0&&(ye-=U.duration+U.delay),A.styles.forEach(De=>{"string"!=typeof De&&Object.keys(De).forEach(je=>{if(!this._driver.validateStyleProperty(je))return void M.errors.push(`The provided animation property "${je}" is not a supported CSS property for animations`);const wt=M.collectedStyles[M.currentQuerySelector],Ut=wt[je];let gn=!0;Ut&&(ye!=ne&&ye>=Ut.startTime&&ne<=Ut.endTime&&(M.errors.push(`The CSS property "${je}" that exists between the times of "${Ut.startTime}ms" and "${Ut.endTime}ms" is also being animated in a parallel animation between the times of "${ye}ms" and "${ne}ms"`),gn=!1),ye=Ut.startTime),gn&&(wt[je]={startTime:ye,endTime:ne}),M.options&&function(re,A,M){const U=A.params||{},ne=Et(re);ne.length&&ne.forEach(ye=>{U.hasOwnProperty(ye)||M.push(`Unable to resolve the local animation param ${ye} in the given list of values`)})}(De[je],M.options,M.errors)})})}visitKeyframes(A,M){const U={type:5,styles:[],options:null};if(!M.currentAnimateTimings)return M.errors.push("keyframes() must be placed inside of a call to animate()"),U;let ye=0;const De=[];let je=!1,wt=!1,Ut=0;const gn=A.steps.map(Po=>{const lo=this._makeStyleAst(Po,M);let pa=null!=lo.offset?lo.offset:function(re){if("string"==typeof re)return null;let A=null;if(Array.isArray(re))re.forEach(M=>{if(xo(M)&&M.hasOwnProperty("offset")){const U=M;A=parseFloat(U.offset),delete U.offset}});else if(xo(re)&&re.hasOwnProperty("offset")){const M=re;A=parseFloat(M.offset),delete M.offset}return A}(lo.styles),Ps=0;return null!=pa&&(ye++,Ps=lo.offset=pa),wt=wt||Ps<0||Ps>1,je=je||Ps<Ut,Ut=Ps,De.push(Ps),lo});wt&&M.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),je&&M.errors.push("Please ensure that all keyframe offsets are in order");const sn=A.steps.length;let Er=0;ye>0&&ye<sn?M.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==ye&&(Er=1/(sn-1));const yi=sn-1,gr=M.currentTime,Or=M.currentAnimateTimings,ci=Or.duration;return gn.forEach((Po,lo)=>{const pa=Er>0?lo==yi?1:Er*lo:De[lo],Ps=pa*ci;M.currentTime=gr+Or.delay+Ps,Or.duration=Ps,this._validateStyleAst(Po,M),Po.offset=pa,U.styles.push(Po)}),U}visitReference(A,M){return{type:8,animation:Yt(this,wr(A.animation),M),options:cr(A.options)}}visitAnimateChild(A,M){return M.depCount++,{type:9,options:cr(A.options)}}visitAnimateRef(A,M){return{type:10,animation:this.visitReference(A.animation,M),options:cr(A.options)}}visitQuery(A,M){const U=M.currentQuerySelector,ne=A.options||{};M.queryCount++,M.currentQuery=A;const[ye,De]=function(re){const A=!!re.split(/\s*,\s*/).find(M=>":self"==M);return A&&(re=re.replace(pe,"")),[re=re.replace(/@\*/g,Rr).replace(/@\w+/g,M=>Rr+"-"+M.substr(1)).replace(/:animating/g,pi),A]}(A.selector);M.currentQuerySelector=U.length?U+" "+ye:ye,Ge(M.collectedStyles,M.currentQuerySelector,{});const je=Yt(this,wr(A.animation),M);return M.currentQuery=null,M.currentQuerySelector=U,{type:11,selector:ye,limit:ne.limit||0,optional:!!ne.optional,includeSelf:De,animation:je,originalSelector:A.selector,options:cr(A.options)}}visitStagger(A,M){M.currentQuery||M.errors.push("stagger() can only be used inside of query()");const U="full"===A.timings?{duration:0,delay:0,easing:"full"}:qn(A.timings,M.errors,!0);return{type:12,animation:Yt(this,wr(A.animation),M),timings:U,options:null}}}class Zr{constructor(A){this.errors=A,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function xo(re){return!Array.isArray(re)&&"object"==typeof re}function cr(re){return re?(re=Gr(re)).params&&(re.params=function(re){return re?Gr(re):null}(re.params)):re={},re}function fr(re,A,M){return{duration:re,delay:A,easing:M}}function Vn(re,A,M,U,ne,ye,De=null,je=!1){return{type:1,element:re,keyframes:A,preStyleProps:M,postStyleProps:U,duration:ne,delay:ye,totalTime:ne+ye,easing:De,subTimeline:je}}class To{constructor(){this._map=new Map}consume(A){let M=this._map.get(A);return M?this._map.delete(A):M=[],M}append(A,M){let U=this._map.get(A);U||this._map.set(A,U=[]),U.push(...M)}has(A){return this._map.has(A)}clear(){this._map.clear()}}const $s=new RegExp(":enter","g"),ns=new RegExp(":leave","g");function gi(re,A,M,U,ne,ye={},De={},je,wt,Ut=[]){return(new Wo).buildKeyframes(re,A,M,U,ne,ye,De,je,wt,Ut)}class Wo{buildKeyframes(A,M,U,ne,ye,De,je,wt,Ut,gn=[]){Ut=Ut||new To;const sn=new Yo(A,M,Ut,ne,ye,gn,[]);sn.options=wt,sn.currentTimeline.setStyles([De],null,sn.errors,wt),Yt(this,U,sn);const Er=sn.timelines.filter(yi=>yi.containsAnimation());if(Er.length&&Object.keys(je).length){const yi=Er[Er.length-1];yi.allowOnlyTimelineStyles()||yi.setStyles([je],null,sn.errors,wt)}return Er.length?Er.map(yi=>yi.buildKeyframes()):[Vn(M,[],[],[],0,0,"",!1)]}visitTrigger(A,M){}visitState(A,M){}visitTransition(A,M){}visitAnimateChild(A,M){const U=M.subInstructions.consume(M.element);if(U){const ne=M.createSubContext(A.options),ye=M.currentTimeline.currentTime,De=this._visitSubInstructions(U,ne,ne.options);ye!=De&&M.transformIntoNewTimeline(De)}M.previousNode=A}visitAnimateRef(A,M){const U=M.createSubContext(A.options);U.transformIntoNewTimeline(),this.visitReference(A.animation,U),M.transformIntoNewTimeline(U.currentTimeline.currentTime),M.previousNode=A}_visitSubInstructions(A,M,U){let ye=M.currentTimeline.currentTime;const De=null!=U.duration?cn(U.duration):null,je=null!=U.delay?cn(U.delay):null;return 0!==De&&A.forEach(wt=>{const Ut=M.appendInstructionToTimeline(wt,De,je);ye=Math.max(ye,Ut.duration+Ut.delay)}),ye}visitReference(A,M){M.updateOptions(A.options,!0),Yt(this,A.animation,M),M.previousNode=A}visitSequence(A,M){const U=M.subContextCount;let ne=M;const ye=A.options;if(ye&&(ye.params||ye.delay)&&(ne=M.createSubContext(ye),ne.transformIntoNewTimeline(),null!=ye.delay)){6==ne.previousNode.type&&(ne.currentTimeline.snapshotCurrentStyles(),ne.previousNode=oo);const De=cn(ye.delay);ne.delayNextStep(De)}A.steps.length&&(A.steps.forEach(De=>Yt(this,De,ne)),ne.currentTimeline.applyStylesToKeyframe(),ne.subContextCount>U&&ne.transformIntoNewTimeline()),M.previousNode=A}visitGroup(A,M){const U=[];let ne=M.currentTimeline.currentTime;const ye=A.options&&A.options.delay?cn(A.options.delay):0;A.steps.forEach(De=>{const je=M.createSubContext(A.options);ye&&je.delayNextStep(ye),Yt(this,De,je),ne=Math.max(ne,je.currentTimeline.currentTime),U.push(je.currentTimeline)}),U.forEach(De=>M.currentTimeline.mergeTimelineCollectedStyles(De)),M.transformIntoNewTimeline(ne),M.previousNode=A}_visitTiming(A,M){if(A.dynamic){const U=A.strValue;return qn(M.params?zt(U,M.params,M.errors):U,M.errors)}return{duration:A.duration,delay:A.delay,easing:A.easing}}visitAnimate(A,M){const U=M.currentAnimateTimings=this._visitTiming(A.timings,M),ne=M.currentTimeline;U.delay&&(M.incrementTime(U.delay),ne.snapshotCurrentStyles());const ye=A.style;5==ye.type?this.visitKeyframes(ye,M):(M.incrementTime(U.duration),this.visitStyle(ye,M),ne.applyStylesToKeyframe()),M.currentAnimateTimings=null,M.previousNode=A}visitStyle(A,M){const U=M.currentTimeline,ne=M.currentAnimateTimings;!ne&&U.getCurrentStyleProperties().length&&U.forwardFrame();const ye=ne&&ne.easing||A.easing;A.isEmptyStep?U.applyEmptyStep(ye):U.setStyles(A.styles,ye,M.errors,M.options),M.previousNode=A}visitKeyframes(A,M){const U=M.currentAnimateTimings,ne=M.currentTimeline.duration,ye=U.duration,je=M.createSubContext().currentTimeline;je.easing=U.easing,A.styles.forEach(wt=>{je.forwardTime((wt.offset||0)*ye),je.setStyles(wt.styles,wt.easing,M.errors,M.options),je.applyStylesToKeyframe()}),M.currentTimeline.mergeTimelineCollectedStyles(je),M.transformIntoNewTimeline(ne+ye),M.previousNode=A}visitQuery(A,M){const U=M.currentTimeline.currentTime,ne=A.options||{},ye=ne.delay?cn(ne.delay):0;ye&&(6===M.previousNode.type||0==U&&M.currentTimeline.getCurrentStyleProperties().length)&&(M.currentTimeline.snapshotCurrentStyles(),M.previousNode=oo);let De=U;const je=M.invokeQuery(A.selector,A.originalSelector,A.limit,A.includeSelf,!!ne.optional,M.errors);M.currentQueryTotal=je.length;let wt=null;je.forEach((Ut,gn)=>{M.currentQueryIndex=gn;const sn=M.createSubContext(A.options,Ut);ye&&sn.delayNextStep(ye),Ut===M.element&&(wt=sn.currentTimeline),Yt(this,A.animation,sn),sn.currentTimeline.applyStylesToKeyframe(),De=Math.max(De,sn.currentTimeline.currentTime)}),M.currentQueryIndex=0,M.currentQueryTotal=0,M.transformIntoNewTimeline(De),wt&&(M.currentTimeline.mergeTimelineCollectedStyles(wt),M.currentTimeline.snapshotCurrentStyles()),M.previousNode=A}visitStagger(A,M){const U=M.parentContext,ne=M.currentTimeline,ye=A.timings,De=Math.abs(ye.duration),je=De*(M.currentQueryTotal-1);let wt=De*M.currentQueryIndex;switch(ye.duration<0?"reverse":ye.easing){case"reverse":wt=je-wt;break;case"full":wt=U.currentStaggerTime}const gn=M.currentTimeline;wt&&gn.delayNextStep(wt);const sn=gn.currentTime;Yt(this,A.animation,M),M.previousNode=A,U.currentStaggerTime=ne.currentTime-sn+(ne.startTime-U.currentTimeline.startTime)}}const oo={};class Yo{constructor(A,M,U,ne,ye,De,je,wt){this._driver=A,this.element=M,this.subInstructions=U,this._enterClassName=ne,this._leaveClassName=ye,this.errors=De,this.timelines=je,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=oo,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=wt||new xr(this._driver,M,0),je.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(A,M){if(!A)return;const U=A;let ne=this.options;null!=U.duration&&(ne.duration=cn(U.duration)),null!=U.delay&&(ne.delay=cn(U.delay));const ye=U.params;if(ye){let De=ne.params;De||(De=this.options.params={}),Object.keys(ye).forEach(je=>{(!M||!De.hasOwnProperty(je))&&(De[je]=zt(ye[je],De,this.errors))})}}_copyOptions(){const A={};if(this.options){const M=this.options.params;if(M){const U=A.params={};Object.keys(M).forEach(ne=>{U[ne]=M[ne]})}}return A}createSubContext(A=null,M,U){const ne=M||this.element,ye=new Yo(this._driver,ne,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(ne,U||0));return ye.previousNode=this.previousNode,ye.currentAnimateTimings=this.currentAnimateTimings,ye.options=this._copyOptions(),ye.updateOptions(A),ye.currentQueryIndex=this.currentQueryIndex,ye.currentQueryTotal=this.currentQueryTotal,ye.parentContext=this,this.subContextCount++,ye}transformIntoNewTimeline(A){return this.previousNode=oo,this.currentTimeline=this.currentTimeline.fork(this.element,A),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(A,M,U){const ne={duration:null!=M?M:A.duration,delay:this.currentTimeline.currentTime+(null!=U?U:0)+A.delay,easing:""},ye=new Xt(this._driver,A.element,A.keyframes,A.preStyleProps,A.postStyleProps,ne,A.stretchStartingKeyframe);return this.timelines.push(ye),ne}incrementTime(A){this.currentTimeline.forwardTime(this.currentTimeline.duration+A)}delayNextStep(A){A>0&&this.currentTimeline.delayNextStep(A)}invokeQuery(A,M,U,ne,ye,De){let je=[];if(ne&&je.push(this.element),A.length>0){A=(A=A.replace($s,"."+this._enterClassName)).replace(ns,"."+this._leaveClassName);let Ut=this._driver.query(this.element,A,1!=U);0!==U&&(Ut=U<0?Ut.slice(Ut.length+U,Ut.length):Ut.slice(0,U)),je.push(...Ut)}return!ye&&0==je.length&&De.push(`\`query("${M}")\` returned zero elements. (Use \`query("${M}", { optional: true })\` if you wish to allow this.)`),je}}class xr{constructor(A,M,U,ne){this._driver=A,this.element=M,this.startTime=U,this._elementTimelineStylesLookup=ne,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(M),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(M,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(A){const M=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||M?(this.forwardTime(this.currentTime+A),M&&this.snapshotCurrentStyles()):this.startTime+=A}fork(A,M){return this.applyStylesToKeyframe(),new xr(this._driver,A,M||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(A){this.applyStylesToKeyframe(),this.duration=A,this._loadKeyframe()}_updateStyle(A,M){this._localTimelineStyles[A]=M,this._globalTimelineStyles[A]=M,this._styleSummary[A]={time:this.currentTime,value:M}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(A){A&&(this._previousKeyframe.easing=A),Object.keys(this._globalTimelineStyles).forEach(M=>{this._backFill[M]=this._globalTimelineStyles[M]||Pe.l3,this._currentKeyframe[M]=Pe.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(A,M,U,ne){M&&(this._previousKeyframe.easing=M);const ye=ne&&ne.params||{},De=function(re,A){const M={};let U;return re.forEach(ne=>{"*"===ne?(U=U||Object.keys(A),U.forEach(ye=>{M[ye]=Pe.l3})):Br(ne,!1,M)}),M}(A,this._globalTimelineStyles);Object.keys(De).forEach(je=>{const wt=zt(De[je],ye,U);this._pendingStyles[je]=wt,this._localTimelineStyles.hasOwnProperty(je)||(this._backFill[je]=this._globalTimelineStyles.hasOwnProperty(je)?this._globalTimelineStyles[je]:Pe.l3),this._updateStyle(je,wt)})}applyStylesToKeyframe(){const A=this._pendingStyles,M=Object.keys(A);0!=M.length&&(this._pendingStyles={},M.forEach(U=>{this._currentKeyframe[U]=A[U]}),Object.keys(this._localTimelineStyles).forEach(U=>{this._currentKeyframe.hasOwnProperty(U)||(this._currentKeyframe[U]=this._localTimelineStyles[U])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(A=>{const M=this._localTimelineStyles[A];this._pendingStyles[A]=M,this._updateStyle(A,M)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const A=[];for(let M in this._currentKeyframe)A.push(M);return A}mergeTimelineCollectedStyles(A){Object.keys(A._styleSummary).forEach(M=>{const U=this._styleSummary[M],ne=A._styleSummary[M];(!U||ne.time>U.time)&&this._updateStyle(M,ne.value)})}buildKeyframes(){this.applyStylesToKeyframe();const A=new Set,M=new Set,U=1===this._keyframes.size&&0===this.duration;let ne=[];this._keyframes.forEach((je,wt)=>{const Ut=Br(je,!0);Object.keys(Ut).forEach(gn=>{const sn=Ut[gn];sn==Pe.k1?A.add(gn):sn==Pe.l3&&M.add(gn)}),U||(Ut.offset=wt/this.duration),ne.push(Ut)});const ye=A.size?rt(A.values()):[],De=M.size?rt(M.values()):[];if(U){const je=ne[0],wt=Gr(je);je.offset=0,wt.offset=1,ne=[je,wt]}return Vn(this.element,ne,ye,De,this.duration,this.startTime,this.easing,!1)}}class Xt extends xr{constructor(A,M,U,ne,ye,De,je=!1){super(A,M,De.delay),this.keyframes=U,this.preStyleProps=ne,this.postStyleProps=ye,this._stretchStartingKeyframe=je,this.timings={duration:De.duration,delay:De.delay,easing:De.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let A=this.keyframes,{delay:M,duration:U,easing:ne}=this.timings;if(this._stretchStartingKeyframe&&M){const ye=[],De=U+M,je=M/De,wt=Br(A[0],!1);wt.offset=0,ye.push(wt);const Ut=Br(A[0],!1);Ut.offset=er(je),ye.push(Ut);const gn=A.length-1;for(let sn=1;sn<=gn;sn++){let Er=Br(A[sn],!1);Er.offset=er((M+Er.offset*U)/De),ye.push(Er)}U=De,M=0,ne="",A=ye}return Vn(this.element,A,this.preStyleProps,this.postStyleProps,U,M,ne,!0)}}function er(re,A=3){const M=Math.pow(10,A-1);return Math.round(re*M)/M}class vs{}class vi extends vs{normalizePropertyName(A,M){return ke(A)}normalizeStyleValue(A,M,U,ne){let ye="";const De=U.toString().trim();if(ys[M]&&0!==U&&"0"!==U)if("number"==typeof U)ye="px";else{const je=U.match(/^[+-]?[\d\.]+([a-z]*)$/);je&&0==je[1].length&&ne.push(`Please provide a CSS unit value for ${A}:${U}`)}return De+ye}}const ys=(()=>function(re){const A={};return re.forEach(M=>A[M]=!0),A}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Zn(re,A,M,U,ne,ye,De,je,wt,Ut,gn,sn,Er){return{type:0,element:re,triggerName:A,isRemovalTransition:ne,fromState:M,fromStyles:ye,toState:U,toStyles:De,timelines:je,queriedElements:wt,preStyleProps:Ut,postStyleProps:gn,totalTime:sn,errors:Er}}const tt={};class Je{constructor(A,M,U){this._triggerName=A,this.ast=M,this._stateStyles=U}match(A,M,U,ne){return function(re,A,M,U,ne){return re.some(ye=>ye(A,M,U,ne))}(this.ast.matchers,A,M,U,ne)}buildStyles(A,M,U){const ne=this._stateStyles["*"],ye=this._stateStyles[A],De=ne?ne.buildStyles(M,U):{};return ye?ye.buildStyles(M,U):De}build(A,M,U,ne,ye,De,je,wt,Ut,gn){const sn=[],Er=this.ast.options&&this.ast.options.params||tt,gr=this.buildStyles(U,je&&je.params||tt,sn),Or=wt&&wt.params||tt,ci=this.buildStyles(ne,Or,sn),Po=new Set,lo=new Map,pa=new Map,Ps="void"===ne,El={params:Object.assign(Object.assign({},Er),Or)},to=gn?[]:gi(A,M,this.ast.animation,ye,De,gr,ci,El,Ut,sn);let cs=0;if(to.forEach(ga=>{cs=Math.max(ga.duration+ga.delay,cs)}),sn.length)return Zn(M,this._triggerName,U,ne,Ps,gr,ci,[],[],lo,pa,cs,sn);to.forEach(ga=>{const ja=ga.element,Lo=Ge(lo,ja,{});ga.preStyleProps.forEach(ko=>Lo[ko]=!0);const id=Ge(pa,ja,{});ga.postStyleProps.forEach(ko=>id[ko]=!0),ja!==M&&Po.add(ja)});const Ba=rt(Po.values());return Zn(M,this._triggerName,U,ne,Ps,gr,ci,to,Ba,lo,pa,cs)}}class W{constructor(A,M,U){this.styles=A,this.defaultParams=M,this.normalizer=U}buildStyles(A,M){const U={},ne=Gr(this.defaultParams);return Object.keys(A).forEach(ye=>{const De=A[ye];null!=De&&(ne[ye]=De)}),this.styles.styles.forEach(ye=>{if("string"!=typeof ye){const De=ye;Object.keys(De).forEach(je=>{let wt=De[je];wt.length>1&&(wt=zt(wt,ne,M));const Ut=this.normalizer.normalizePropertyName(je,M);wt=this.normalizer.normalizeStyleValue(je,Ut,wt,M),U[Ut]=wt})}}),U}}class fe{constructor(A,M,U){this.name=A,this.ast=M,this._normalizer=U,this.transitionFactories=[],this.states={},M.states.forEach(ne=>{this.states[ne.name]=new W(ne.style,ne.options&&ne.options.params||{},U)}),vt(this.states,"true","1"),vt(this.states,"false","0"),M.transitions.forEach(ne=>{this.transitionFactories.push(new Je(A,ne,this.states))}),this.fallbackTransition=function(re,A,M){return new Je(re,{type:1,animation:{type:2,steps:[],options:null},matchers:[(De,je)=>!0],options:null,queryCount:0,depCount:0},A)}(A,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(A,M,U,ne){return this.transitionFactories.find(De=>De.match(A,M,U,ne))||null}matchStyles(A,M,U){return this.fallbackTransition.buildStyles(A,M,U)}}function vt(re,A,M){re.hasOwnProperty(A)?re.hasOwnProperty(M)||(re[M]=re[A]):re.hasOwnProperty(M)&&(re[A]=re[M])}const Lt=new To;class nn{constructor(A,M,U){this.bodyNode=A,this._driver=M,this._normalizer=U,this._animations={},this._playersById={},this.players=[]}register(A,M){const U=[],ne=Ze(this._driver,M,U);if(U.length)throw new Error(`Unable to build the animation due to the following errors: ${U.join("\n")}`);this._animations[A]=ne}_buildPlayer(A,M,U){const ne=A.element,ye=nt(0,this._normalizer,0,A.keyframes,M,U);return this._driver.animate(ne,ye,A.duration,A.delay,A.easing,[],!0)}create(A,M,U={}){const ne=[],ye=this._animations[A];let De;const je=new Map;if(ye?(De=gi(this._driver,M,ye,tn,Ot,{},{},U,Lt,ne),De.forEach(gn=>{const sn=Ge(je,gn.element,{});gn.postStyleProps.forEach(Er=>sn[Er]=null)})):(ne.push("The requested animation doesn't exist or has already been destroyed"),De=[]),ne.length)throw new Error(`Unable to create the animation due to the following errors: ${ne.join("\n")}`);je.forEach((gn,sn)=>{Object.keys(gn).forEach(Er=>{gn[Er]=this._driver.computeStyle(sn,Er,Pe.l3)})});const Ut=_e(De.map(gn=>{const sn=je.get(gn.element);return this._buildPlayer(gn,{},sn)}));return this._playersById[A]=Ut,Ut.onDestroy(()=>this.destroy(A)),this.players.push(Ut),Ut}destroy(A){const M=this._getPlayer(A);M.destroy(),delete this._playersById[A];const U=this.players.indexOf(M);U>=0&&this.players.splice(U,1)}_getPlayer(A){const M=this._playersById[A];if(!M)throw new Error(`Unable to find the timeline player referenced by ${A}`);return M}listen(A,M,U,ne){const ye=ve(M,"","","");return xe(this._getPlayer(A),U,ye,ne),()=>{}}command(A,M,U,ne){if("register"==U)return void this.register(A,ne[0]);if("create"==U)return void this.create(A,M,ne[0]||{});const ye=this._getPlayer(A);switch(U){case"play":ye.play();break;case"pause":ye.pause();break;case"reset":ye.reset();break;case"restart":ye.restart();break;case"finish":ye.finish();break;case"init":ye.init();break;case"setPosition":ye.setPosition(parseFloat(ne[0]));break;case"destroy":this.destroy(A)}}}const Rn="ng-animate-queued",Tn="ng-animate-disabled",Tr=".ng-animate-disabled",Fr=[],Oo={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Fi={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},qr="__ng_removed";class Ts{constructor(A,M=""){this.namespaceId=M;const U=A&&A.hasOwnProperty("value");if(this.value=null!=(re=U?A.value:A)?re:null,U){const ye=Gr(A);delete ye.value,this.options=ye}else this.options={};var re;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(A){const M=A.params;if(M){const U=this.options.params;Object.keys(M).forEach(ne=>{null==U[ne]&&(U[ne]=M[ne])})}}}const Xo="void",Hs=new Ts(Xo);class ho{constructor(A,M,U){this.id=A,this.hostElement=M,this._engine=U,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+A,qs(M,this._hostClassName)}listen(A,M,U,ne){if(!this._triggers.hasOwnProperty(M))throw new Error(`Unable to listen on the animation trigger event "${U}" because the animation trigger "${M}" doesn't exist!`);if(null==U||0==U.length)throw new Error(`Unable to listen on the animation trigger "${M}" because the provided event is undefined!`);if("start"!=(re=U)&&"done"!=re)throw new Error(`The provided animation trigger event "${U}" for the animation trigger "${M}" is not supported!`);var re;const ye=Ge(this._elementListeners,A,[]),De={name:M,phase:U,callback:ne};ye.push(De);const je=Ge(this._engine.statesByElement,A,{});return je.hasOwnProperty(M)||(qs(A,un),qs(A,un+"-"+M),je[M]=Hs),()=>{this._engine.afterFlush(()=>{const wt=ye.indexOf(De);wt>=0&&ye.splice(wt,1),this._triggers[M]||delete je[M]})}}register(A,M){return!this._triggers[A]&&(this._triggers[A]=M,!0)}_getTrigger(A){const M=this._triggers[A];if(!M)throw new Error(`The provided animation trigger "${A}" has not been registered!`);return M}trigger(A,M,U,ne=!0){const ye=this._getTrigger(M),De=new yo(this.id,M,A);let je=this._engine.statesByElement.get(A);je||(qs(A,un),qs(A,un+"-"+M),this._engine.statesByElement.set(A,je={}));let wt=je[M];const Ut=new Ts(U,this.id);if(!(U&&U.hasOwnProperty("value"))&&wt&&Ut.absorbOptions(wt.options),je[M]=Ut,wt||(wt=Hs),Ut.value!==Xo&&wt.value===Ut.value){if(!function(re,A){const M=Object.keys(re),U=Object.keys(A);if(M.length!=U.length)return!1;for(let ne=0;ne<M.length;ne++){const ye=M[ne];if(!A.hasOwnProperty(ye)||re[ye]!==A[ye])return!1}return!0}(wt.params,Ut.params)){const Or=[],ci=ye.matchStyles(wt.value,wt.params,Or),Po=ye.matchStyles(Ut.value,Ut.params,Or);Or.length?this._engine.reportError(Or):this._engine.afterFlush(()=>{io(A,ci),Wt(A,Po)})}return}const Er=Ge(this._engine.playersByElement,A,[]);Er.forEach(Or=>{Or.namespaceId==this.id&&Or.triggerName==M&&Or.queued&&Or.destroy()});let yi=ye.matchTransition(wt.value,Ut.value,A,Ut.params),gr=!1;if(!yi){if(!ne)return;yi=ye.fallbackTransition,gr=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:A,triggerName:M,transition:yi,fromState:wt,toState:Ut,player:De,isFallbackTransition:gr}),gr||(qs(A,Rn),De.onStart(()=>{Mu(A,Rn)})),De.onDone(()=>{let Or=this.players.indexOf(De);Or>=0&&this.players.splice(Or,1);const ci=this._engine.playersByElement.get(A);if(ci){let Po=ci.indexOf(De);Po>=0&&ci.splice(Po,1)}}),this.players.push(De),Er.push(De),De}deregister(A){delete this._triggers[A],this._engine.statesByElement.forEach((M,U)=>{delete M[A]}),this._elementListeners.forEach((M,U)=>{this._elementListeners.set(U,M.filter(ne=>ne.name!=A))})}clearElementCache(A){this._engine.statesByElement.delete(A),this._elementListeners.delete(A);const M=this._engine.playersByElement.get(A);M&&(M.forEach(U=>U.destroy()),this._engine.playersByElement.delete(A))}_signalRemovalForInnerTriggers(A,M){const U=this._engine.driver.query(A,Rr,!0);U.forEach(ne=>{if(ne[qr])return;const ye=this._engine.fetchNamespacesByElement(ne);ye.size?ye.forEach(De=>De.triggerLeaveAnimation(ne,M,!1,!0)):this.clearElementCache(ne)}),this._engine.afterFlushAnimationsDone(()=>U.forEach(ne=>this.clearElementCache(ne)))}triggerLeaveAnimation(A,M,U,ne){const ye=this._engine.statesByElement.get(A);if(ye){const De=[];if(Object.keys(ye).forEach(je=>{if(this._triggers[je]){const wt=this.trigger(A,je,Xo,ne);wt&&De.push(wt)}}),De.length)return this._engine.markElementAsRemoved(this.id,A,!0,M),U&&_e(De).onDone(()=>this._engine.processLeaveNode(A)),!0}return!1}prepareLeaveAnimationListeners(A){const M=this._elementListeners.get(A),U=this._engine.statesByElement.get(A);if(M&&U){const ne=new Set;M.forEach(ye=>{const De=ye.name;if(ne.has(De))return;ne.add(De);const wt=this._triggers[De].fallbackTransition,Ut=U[De]||Hs,gn=new Ts(Xo),sn=new yo(this.id,De,A);this._engine.totalQueuedPlayers++,this._queue.push({element:A,triggerName:De,transition:wt,fromState:Ut,toState:gn,player:sn,isFallbackTransition:!0})})}}removeNode(A,M){const U=this._engine;if(A.childElementCount&&this._signalRemovalForInnerTriggers(A,M),this.triggerLeaveAnimation(A,M,!0))return;let ne=!1;if(U.totalAnimations){const ye=U.players.length?U.playersByQueriedElement.get(A):[];if(ye&&ye.length)ne=!0;else{let De=A;for(;De=De.parentNode;)if(U.statesByElement.get(De)){ne=!0;break}}}if(this.prepareLeaveAnimationListeners(A),ne)U.markElementAsRemoved(this.id,A,!1,M);else{const ye=A[qr];(!ye||ye===Oo)&&(U.afterFlush(()=>this.clearElementCache(A)),U.destroyInnerAnimations(A),U._onRemovalComplete(A,M))}}insertNode(A,M){qs(A,this._hostClassName)}drainQueuedTransitions(A){const M=[];return this._queue.forEach(U=>{const ne=U.player;if(ne.destroyed)return;const ye=U.element,De=this._elementListeners.get(ye);De&&De.forEach(je=>{if(je.name==U.triggerName){const wt=ve(ye,U.triggerName,U.fromState.value,U.toState.value);wt._data=A,xe(U.player,je.phase,wt,je.callback)}}),ne.markedForDestroy?this._engine.afterFlush(()=>{ne.destroy()}):M.push(U)}),this._queue=[],M.sort((U,ne)=>{const ye=U.transition.ast.depCount,De=ne.transition.ast.depCount;return 0==ye||0==De?ye-De:this._engine.driver.containsElement(U.element,ne.element)?1:-1})}destroy(A){this.players.forEach(M=>M.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,A)}elementContainsData(A){let M=!1;return this._elementListeners.has(A)&&(M=!0),M=!!this._queue.find(U=>U.element===A)||M,M}}class ao{constructor(A,M,U){this.bodyNode=A,this.driver=M,this._normalizer=U,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(ne,ye)=>{}}_onRemovalComplete(A,M){this.onRemovalComplete(A,M)}get queuedPlayers(){const A=[];return this._namespaceList.forEach(M=>{M.players.forEach(U=>{U.queued&&A.push(U)})}),A}createNamespace(A,M){const U=new ho(A,M,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,M)?this._balanceNamespaceList(U,M):(this.newHostElements.set(M,U),this.collectEnterElement(M)),this._namespaceLookup[A]=U}_balanceNamespaceList(A,M){const U=this._namespaceList.length-1;if(U>=0){let ne=!1;for(let ye=U;ye>=0;ye--)if(this.driver.containsElement(this._namespaceList[ye].hostElement,M)){this._namespaceList.splice(ye+1,0,A),ne=!0;break}ne||this._namespaceList.splice(0,0,A)}else this._namespaceList.push(A);return this.namespacesByHostElement.set(M,A),A}register(A,M){let U=this._namespaceLookup[A];return U||(U=this.createNamespace(A,M)),U}registerTrigger(A,M,U){let ne=this._namespaceLookup[A];ne&&ne.register(M,U)&&this.totalAnimations++}destroy(A,M){if(!A)return;const U=this._fetchNamespace(A);this.afterFlush(()=>{this.namespacesByHostElement.delete(U.hostElement),delete this._namespaceLookup[A];const ne=this._namespaceList.indexOf(U);ne>=0&&this._namespaceList.splice(ne,1)}),this.afterFlushAnimationsDone(()=>U.destroy(M))}_fetchNamespace(A){return this._namespaceLookup[A]}fetchNamespacesByElement(A){const M=new Set,U=this.statesByElement.get(A);if(U){const ne=Object.keys(U);for(let ye=0;ye<ne.length;ye++){const De=U[ne[ye]].namespaceId;if(De){const je=this._fetchNamespace(De);je&&M.add(je)}}}return M}trigger(A,M,U,ne){if(Ws(M)){const ye=this._fetchNamespace(A);if(ye)return ye.trigger(M,U,ne),!0}return!1}insertNode(A,M,U,ne){if(!Ws(M))return;const ye=M[qr];if(ye&&ye.setForRemoval){ye.setForRemoval=!1,ye.setForMove=!0;const De=this.collectedLeaveElements.indexOf(M);De>=0&&this.collectedLeaveElements.splice(De,1)}if(A){const De=this._fetchNamespace(A);De&&De.insertNode(M,U)}ne&&this.collectEnterElement(M)}collectEnterElement(A){this.collectedEnterElements.push(A)}markElementAsDisabled(A,M){M?this.disabledNodes.has(A)||(this.disabledNodes.add(A),qs(A,Tn)):this.disabledNodes.has(A)&&(this.disabledNodes.delete(A),Mu(A,Tn))}removeNode(A,M,U,ne){if(Ws(M)){const ye=A?this._fetchNamespace(A):null;if(ye?ye.removeNode(M,ne):this.markElementAsRemoved(A,M,!1,ne),U){const De=this.namespacesByHostElement.get(M);De&&De.id!==A&&De.removeNode(M,ne)}}else this._onRemovalComplete(M,ne)}markElementAsRemoved(A,M,U,ne){this.collectedLeaveElements.push(M),M[qr]={namespaceId:A,setForRemoval:ne,hasAnimation:U,removedBeforeQueried:!1}}listen(A,M,U,ne,ye){return Ws(M)?this._fetchNamespace(A).listen(M,U,ne,ye):()=>{}}_buildInstruction(A,M,U,ne,ye){return A.transition.build(this.driver,A.element,A.fromState.value,A.toState.value,U,ne,A.fromState.options,A.toState.options,M,ye)}destroyInnerAnimations(A){let M=this.driver.query(A,Rr,!0);M.forEach(U=>this.destroyActiveAnimationsForElement(U)),0!=this.playersByQueriedElement.size&&(M=this.driver.query(A,pi,!0),M.forEach(U=>this.finishActiveQueriedAnimationOnElement(U)))}destroyActiveAnimationsForElement(A){const M=this.playersByElement.get(A);M&&M.forEach(U=>{U.queued?U.markedForDestroy=!0:U.destroy()})}finishActiveQueriedAnimationOnElement(A){const M=this.playersByQueriedElement.get(A);M&&M.forEach(U=>U.finish())}whenRenderingDone(){return new Promise(A=>{if(this.players.length)return _e(this.players).onDone(()=>A());A()})}processLeaveNode(A){const M=A[qr];if(M&&M.setForRemoval){if(A[qr]=Oo,M.namespaceId){this.destroyInnerAnimations(A);const U=this._fetchNamespace(M.namespaceId);U&&U.clearElementCache(A)}this._onRemovalComplete(A,M.setForRemoval)}this.driver.matchesElement(A,Tr)&&this.markElementAsDisabled(A,!1),this.driver.query(A,Tr,!0).forEach(U=>{this.markElementAsDisabled(U,!1)})}flush(A=-1){let M=[];if(this.newHostElements.size&&(this.newHostElements.forEach((U,ne)=>this._balanceNamespaceList(U,ne)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let U=0;U<this.collectedEnterElements.length;U++)qs(this.collectedEnterElements[U],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const U=[];try{M=this._flushAnimations(U,A)}finally{for(let ne=0;ne<U.length;ne++)U[ne]()}}else for(let U=0;U<this.collectedLeaveElements.length;U++)this.processLeaveNode(this.collectedLeaveElements[U]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(U=>U()),this._flushFns=[],this._whenQuietFns.length){const U=this._whenQuietFns;this._whenQuietFns=[],M.length?_e(M).onDone(()=>{U.forEach(ne=>ne())}):U.forEach(ne=>ne())}}reportError(A){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${A.join("\n")}`)}_flushAnimations(A,M){const U=new To,ne=[],ye=new Map,De=[],je=new Map,wt=new Map,Ut=new Map,gn=new Set;this.disabledNodes.forEach(In=>{gn.add(In);const dr=this.driver.query(In,".ng-animate-queued",!0);for(let Dr=0;Dr<dr.length;Dr++)gn.add(dr[Dr])});const sn=this.bodyNode,Er=Array.from(this.statesByElement.keys()),yi=Yi(Er,this.collectedEnterElements),gr=new Map;let Or=0;yi.forEach((In,dr)=>{const Dr=tn+Or++;gr.set(dr,Dr),In.forEach(ii=>qs(ii,Dr))});const ci=[],Po=new Set,lo=new Set;for(let In=0;In<this.collectedLeaveElements.length;In++){const dr=this.collectedLeaveElements[In],Dr=dr[qr];Dr&&Dr.setForRemoval&&(ci.push(dr),Po.add(dr),Dr.hasAnimation?this.driver.query(dr,".ng-star-inserted",!0).forEach(ii=>Po.add(ii)):lo.add(dr))}const pa=new Map,Ps=Yi(Er,Array.from(Po));Ps.forEach((In,dr)=>{const Dr=Ot+Or++;pa.set(dr,Dr),In.forEach(ii=>qs(ii,Dr))}),A.push(()=>{yi.forEach((In,dr)=>{const Dr=gr.get(dr);In.forEach(ii=>Mu(ii,Dr))}),Ps.forEach((In,dr)=>{const Dr=pa.get(dr);In.forEach(ii=>Mu(ii,Dr))}),ci.forEach(In=>{this.processLeaveNode(In)})});const El=[],to=[];for(let In=this._namespaceList.length-1;In>=0;In--)this._namespaceList[In].drainQueuedTransitions(M).forEach(Dr=>{const ii=Dr.player,js=Dr.element;if(El.push(ii),this.collectedEnterElements.length){const wl=js[qr];if(wl&&wl.setForMove)return void ii.destroy()}const bl=!sn||!this.driver.containsElement(sn,js),ds=pa.get(js),Is=gr.get(js),_o=this._buildInstruction(Dr,U,Is,ds,bl);if(_o.errors&&_o.errors.length)to.push(_o);else{if(bl)return ii.onStart(()=>io(js,_o.fromStyles)),ii.onDestroy(()=>Wt(js,_o.toStyles)),void ne.push(ii);if(Dr.isFallbackTransition)return ii.onStart(()=>io(js,_o.fromStyles)),ii.onDestroy(()=>Wt(js,_o.toStyles)),void ne.push(ii);_o.timelines.forEach(wl=>wl.stretchStartingKeyframe=!0),U.append(js,_o.timelines),De.push({instruction:_o,player:ii,element:js}),_o.queriedElements.forEach(wl=>Ge(je,wl,[]).push(ii)),_o.preStyleProps.forEach((wl,od)=>{const Ua=Object.keys(wl);if(Ua.length){let Cl=wt.get(od);Cl||wt.set(od,Cl=new Set),Ua.forEach(Xd=>Cl.add(Xd))}}),_o.postStyleProps.forEach((wl,od)=>{const Ua=Object.keys(wl);let Cl=Ut.get(od);Cl||Ut.set(od,Cl=new Set),Ua.forEach(Xd=>Cl.add(Xd))})}});if(to.length){const In=[];to.forEach(dr=>{In.push(`@${dr.triggerName} has failed due to:\n`),dr.errors.forEach(Dr=>In.push(`- ${Dr}\n`))}),El.forEach(dr=>dr.destroy()),this.reportError(In)}const cs=new Map,Ba=new Map;De.forEach(In=>{const dr=In.element;U.has(dr)&&(Ba.set(dr,dr),this._beforeAnimationBuild(In.player.namespaceId,In.instruction,cs))}),ne.forEach(In=>{const dr=In.element;this._getPreviousPlayers(dr,!1,In.namespaceId,In.triggerName,null).forEach(ii=>{Ge(cs,dr,[]).push(ii),ii.destroy()})});const ga=ci.filter(In=>uu(In,wt,Ut)),ja=new Map;da(ja,this.driver,lo,Ut,Pe.l3).forEach(In=>{uu(In,wt,Ut)&&ga.push(In)});const id=new Map;yi.forEach((In,dr)=>{da(id,this.driver,new Set(In),wt,Pe.k1)}),ga.forEach(In=>{const dr=ja.get(In),Dr=id.get(In);ja.set(In,Object.assign(Object.assign({},dr),Dr))});const ko=[],gu=[],Ko={};De.forEach(In=>{const{element:dr,player:Dr,instruction:ii}=In;if(U.has(dr)){if(gn.has(dr))return Dr.onDestroy(()=>Wt(dr,ii.toStyles)),Dr.disabled=!0,Dr.overrideTotalTime(ii.totalTime),void ne.push(Dr);let js=Ko;if(Ba.size>1){let ds=dr;const Is=[];for(;ds=ds.parentNode;){const _o=Ba.get(ds);if(_o){js=_o;break}Is.push(ds)}Is.forEach(_o=>Ba.set(_o,js))}const bl=this._buildAnimation(Dr.namespaceId,ii,cs,ye,id,ja);if(Dr.setRealPlayer(bl),js===Ko)ko.push(Dr);else{const ds=this.playersByElement.get(js);ds&&ds.length&&(Dr.parentPlayer=_e(ds)),ne.push(Dr)}}else io(dr,ii.fromStyles),Dr.onDestroy(()=>Wt(dr,ii.toStyles)),gu.push(Dr),gn.has(dr)&&ne.push(Dr)}),gu.forEach(In=>{const dr=ye.get(In.element);if(dr&&dr.length){const Dr=_e(dr);In.setRealPlayer(Dr)}}),ne.forEach(In=>{In.parentPlayer?In.syncPlayerEvents(In.parentPlayer):In.destroy()});for(let In=0;In<ci.length;In++){const dr=ci[In],Dr=dr[qr];if(Mu(dr,Ot),Dr&&Dr.hasAnimation)continue;let ii=[];if(je.size){let bl=je.get(dr);bl&&bl.length&&ii.push(...bl);let ds=this.driver.query(dr,pi,!0);for(let Is=0;Is<ds.length;Is++){let _o=je.get(ds[Is]);_o&&_o.length&&ii.push(..._o)}}const js=ii.filter(bl=>!bl.destroyed);js.length?If(this,dr,js):this.processLeaveNode(dr)}return ci.length=0,ko.forEach(In=>{this.players.push(In),In.onDone(()=>{In.destroy();const dr=this.players.indexOf(In);this.players.splice(dr,1)}),In.play()}),ko}elementContainsData(A,M){let U=!1;const ne=M[qr];return ne&&ne.setForRemoval&&(U=!0),this.playersByElement.has(M)&&(U=!0),this.playersByQueriedElement.has(M)&&(U=!0),this.statesByElement.has(M)&&(U=!0),this._fetchNamespace(A).elementContainsData(M)||U}afterFlush(A){this._flushFns.push(A)}afterFlushAnimationsDone(A){this._whenQuietFns.push(A)}_getPreviousPlayers(A,M,U,ne,ye){let De=[];if(M){const je=this.playersByQueriedElement.get(A);je&&(De=je)}else{const je=this.playersByElement.get(A);if(je){const wt=!ye||ye==Xo;je.forEach(Ut=>{Ut.queued||!wt&&Ut.triggerName!=ne||De.push(Ut)})}}return(U||ne)&&(De=De.filter(je=>!(U&&U!=je.namespaceId||ne&&ne!=je.triggerName))),De}_beforeAnimationBuild(A,M,U){const ye=M.element,De=M.isRemovalTransition?void 0:A,je=M.isRemovalTransition?void 0:M.triggerName;for(const wt of M.timelines){const Ut=wt.element,gn=Ut!==ye,sn=Ge(U,Ut,[]);this._getPreviousPlayers(Ut,gn,De,je,M.toState).forEach(yi=>{const gr=yi.getRealPlayer();gr.beforeDestroy&&gr.beforeDestroy(),yi.destroy(),sn.push(yi)})}io(ye,M.fromStyles)}_buildAnimation(A,M,U,ne,ye,De){const je=M.triggerName,wt=M.element,Ut=[],gn=new Set,sn=new Set,Er=M.timelines.map(gr=>{const Or=gr.element;gn.add(Or);const ci=Or[qr];if(ci&&ci.removedBeforeQueried)return new Pe.ZN(gr.duration,gr.delay);const Po=Or!==wt,lo=function(re){const A=[];return Ou(re,A),A}((U.get(Or)||Fr).map(cs=>cs.getRealPlayer())).filter(cs=>!!cs.element&&cs.element===Or),pa=ye.get(Or),Ps=De.get(Or),El=nt(0,this._normalizer,0,gr.keyframes,pa,Ps),to=this._buildPlayer(gr,El,lo);if(gr.subTimeline&&ne&&sn.add(Or),Po){const cs=new yo(A,je,Or);cs.setRealPlayer(to),Ut.push(cs)}return to});Ut.forEach(gr=>{Ge(this.playersByQueriedElement,gr.element,[]).push(gr),gr.onDone(()=>function(re,A,M){let U;if(re instanceof Map){if(U=re.get(A),U){if(U.length){const ne=U.indexOf(M);U.splice(ne,1)}0==U.length&&re.delete(A)}}else if(U=re[A],U){if(U.length){const ne=U.indexOf(M);U.splice(ne,1)}0==U.length&&delete re[A]}return U}(this.playersByQueriedElement,gr.element,gr))}),gn.forEach(gr=>qs(gr,hr));const yi=_e(Er);return yi.onDestroy(()=>{gn.forEach(gr=>Mu(gr,hr)),Wt(wt,M.toStyles)}),sn.forEach(gr=>{Ge(ne,gr,[]).push(yi)}),yi}_buildPlayer(A,M,U){return M.length>0?this.driver.animate(A.element,M,A.duration,A.delay,A.easing,U):new Pe.ZN(A.duration,A.delay)}}class yo{constructor(A,M,U){this.namespaceId=A,this.triggerName=M,this.element=U,this._player=new Pe.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(A){this._containsRealPlayer||(this._player=A,Object.keys(this._queuedCallbacks).forEach(M=>{this._queuedCallbacks[M].forEach(U=>xe(A,M,void 0,U))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(A.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(A){this.totalTime=A}syncPlayerEvents(A){const M=this._player;M.triggerCallback&&A.onStart(()=>M.triggerCallback("start")),A.onDone(()=>this.finish()),A.onDestroy(()=>this.destroy())}_queueEvent(A,M){Ge(this._queuedCallbacks,A,[]).push(M)}onDone(A){this.queued&&this._queueEvent("done",A),this._player.onDone(A)}onStart(A){this.queued&&this._queueEvent("start",A),this._player.onStart(A)}onDestroy(A){this.queued&&this._queueEvent("destroy",A),this._player.onDestroy(A)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(A){this.queued||this._player.setPosition(A)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(A){const M=this._player;M.triggerCallback&&M.triggerCallback(A)}}function Ws(re){return re&&1===re.nodeType}function Ys(re,A){const M=re.style.display;return re.style.display=null!=A?A:"none",M}function da(re,A,M,U,ne){const ye=[];M.forEach(wt=>ye.push(Ys(wt)));const De=[];U.forEach((wt,Ut)=>{const gn={};wt.forEach(sn=>{const Er=gn[sn]=A.computeStyle(Ut,sn,ne);(!Er||0==Er.length)&&(Ut[qr]=Fi,De.push(Ut))}),re.set(Ut,gn)});let je=0;return M.forEach(wt=>Ys(wt,ye[je++])),De}function Yi(re,A){const M=new Map;if(re.forEach(je=>M.set(je,[])),0==A.length)return M;const ne=new Set(A),ye=new Map;function De(je){if(!je)return 1;let wt=ye.get(je);if(wt)return wt;const Ut=je.parentNode;return wt=M.has(Ut)?Ut:ne.has(Ut)?1:De(Ut),ye.set(je,wt),wt}return A.forEach(je=>{const wt=De(je);1!==wt&&M.get(wt).push(je)}),M}const Oi="$$classes";function qs(re,A){if(re.classList)re.classList.add(A);else{let M=re[Oi];M||(M=re[Oi]={}),M[A]=!0}}function Mu(re,A){if(re.classList)re.classList.remove(A);else{let M=re[Oi];M&&delete M[A]}}function If(re,A,M){_e(M).onDone(()=>re.processLeaveNode(A))}function Ou(re,A){for(let M=0;M<re.length;M++){const U=re[M];U instanceof Pe.ZE?Ou(U.players,A):A.push(U)}}function uu(re,A,M){const U=M.get(re);if(!U)return!1;let ne=A.get(re);return ne?U.forEach(ye=>ne.add(ye)):A.set(re,U),M.delete(re),!0}class gl{constructor(A,M,U){this.bodyNode=A,this._driver=M,this._normalizer=U,this._triggerCache={},this.onRemovalComplete=(ne,ye)=>{},this._transitionEngine=new ao(A,M,U),this._timelineEngine=new nn(A,M,U),this._transitionEngine.onRemovalComplete=(ne,ye)=>this.onRemovalComplete(ne,ye)}registerTrigger(A,M,U,ne,ye){const De=A+"-"+ne;let je=this._triggerCache[De];if(!je){const wt=[],Ut=Ze(this._driver,ye,wt);if(wt.length)throw new Error(`The animation trigger "${ne}" has failed to build due to the following errors:\n - ${wt.join("\n - ")}`);je=function(re,A,M){return new fe(re,A,M)}(ne,Ut,this._normalizer),this._triggerCache[De]=je}this._transitionEngine.registerTrigger(M,ne,je)}register(A,M){this._transitionEngine.register(A,M)}destroy(A,M){this._transitionEngine.destroy(A,M)}onInsert(A,M,U,ne){this._transitionEngine.insertNode(A,M,U,ne)}onRemove(A,M,U,ne){this._transitionEngine.removeNode(A,M,ne||!1,U)}disableAnimations(A,M){this._transitionEngine.markElementAsDisabled(A,M)}process(A,M,U,ne){if("@"==U.charAt(0)){const[ye,De]=Ie(U);this._timelineEngine.command(ye,M,De,ne)}else this._transitionEngine.trigger(A,M,U,ne)}listen(A,M,U,ne,ye){if("@"==U.charAt(0)){const[De,je]=Ie(U);return this._timelineEngine.listen(De,M,je,ye)}return this._transitionEngine.listen(A,M,U,ne,ye)}flush(A=-1){this._transitionEngine.flush(A)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function ed(re,A){let M=null,U=null;return Array.isArray(A)&&A.length?(M=pc(A[0]),A.length>1&&(U=pc(A[A.length-1]))):A&&(M=pc(A)),M||U?new ha(re,M,U):null}class ha{constructor(A,M,U){this._element=A,this._startStyles=M,this._endStyles=U,this._state=0;let ne=ha.initialStylesByElement.get(A);ne||ha.initialStylesByElement.set(A,ne={}),this._initialStyles=ne}start(){this._state<1&&(this._startStyles&&Wt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Wt(this._element,this._initialStyles),this._endStyles&&(Wt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(ha.initialStylesByElement.delete(this._element),this._startStyles&&(io(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(io(this._element,this._endStyles),this._endStyles=null),Wt(this._element,this._initialStyles),this._state=3)}}function pc(re){let A=null;const M=Object.keys(re);for(let U=0;U<M.length;U++){const ne=M[U];Yd(ne)&&(A=A||{},A[ne]=re[ne])}return A}function Yd(re){return"display"===re||"position"===re}ha.initialStylesByElement=new WeakMap;const gc="animation",ml="animationend";class Zi{constructor(A,M,U,ne,ye,De,je){this._element=A,this._name=M,this._duration=U,this._delay=ne,this._easing=ye,this._fillMode=De,this._onDoneFn=je,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=wt=>this._handleCallback(wt)}apply(){(function(re,A){const M=hu(re,"").trim();let U=0;M.length&&(function(re,A){let M=0;for(let U=0;U<re.length;U++)","===re.charAt(U)&&M++;return M}(M)+1,A=`${M}, ${A}`),ea(re,"",A)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),vc(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){nd(this._element,this._name,"paused")}resume(){nd(this._element,this._name,"running")}setPosition(A){const M=Ah(this._element,this._name);this._position=A*this._duration,ea(this._element,"Delay",`-${this._position}ms`,M)}getPosition(){return this._position}_handleCallback(A){const M=A._ngTestManualTimestamp||Date.now(),U=1e3*parseFloat(A.elapsedTime.toFixed(3));A.animationName==this._name&&Math.max(M-this._startTime,0)>=this._delay&&U>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),vc(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(re,A){const U=hu(re,"").split(","),ne=du(U,A);ne>=0&&(U.splice(ne,1),ea(re,"",U.join(",")))}(this._element,this._name))}}function nd(re,A,M){ea(re,"PlayState",M,Ah(re,A))}function Ah(re,A){const M=hu(re,"");return M.indexOf(",")>0?du(M.split(","),A):du([M],A)}function du(re,A){for(let M=0;M<re.length;M++)if(re[M].indexOf(A)>=0)return M;return-1}function vc(re,A,M){M?re.removeEventListener(ml,A):re.addEventListener(ml,A)}function ea(re,A,M,U){const ne=gc+A;if(null!=U){const ye=re.style[ne];if(ye.length){const De=ye.split(",");De[U]=M,M=De.join(",")}}re.style[ne]=M}function hu(re,A){return re.style[gc+A]||""}class yl{constructor(A,M,U,ne,ye,De,je,wt){this.element=A,this.keyframes=M,this.animationName=U,this._duration=ne,this._delay=ye,this._finalStyles=je,this._specialStyles=wt,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=De||"linear",this.totalTime=ne+ye,this._buildStyler()}onStart(A){this._onStartFns.push(A)}onDone(A){this._onDoneFns.push(A)}onDestroy(A){this._onDestroyFns.push(A)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(A=>A()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(A=>A()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(A=>A()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(A){this._styler.setPosition(A)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Zi(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(A){const M="start"==A?this._onStartFns:this._onDoneFns;M.forEach(U=>U()),M.length=0}beforeDestroy(){this.init();const A={};if(this.hasStarted()){const M=this._state>=3;Object.keys(this._finalStyles).forEach(U=>{"offset"!=U&&(A[U]=M?this._finalStyles[U]:Sn(this.element,U))})}this.currentSnapshot=A}}class rd extends Pe.ZN{constructor(A,M){super(),this.element=A,this._startingStyles={},this.__initialized=!1,this._styles=xt(M)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(A=>{this._startingStyles[A]=this.element.style[A]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(A=>this.element.style.setProperty(A,this._styles[A])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(A=>{const M=this._startingStyles[A];M?this.element.style.setProperty(A,M):this.element.style.removeProperty(A)}),this._startingStyles=null,super.destroy())}}class q{constructor(){this._count=0}validateStyleProperty(A){return _t(A)}matchesElement(A,M){return ht(A,M)}containsElement(A,M){return it(A,M)}query(A,M,U){return It(A,M,U)}computeStyle(A,M,U){return window.getComputedStyle(A)[M]}buildKeyframeElement(A,M,U){U=U.map(je=>xt(je));let ne=`@keyframes ${M} {\n`,ye="";U.forEach(je=>{ye=" ";const wt=parseFloat(je.offset);ne+=`${ye}${100*wt}% {\n`,ye+=" ",Object.keys(je).forEach(Ut=>{const gn=je[Ut];switch(Ut){case"offset":return;case"easing":return void(gn&&(ne+=`${ye}animation-timing-function: ${gn};\n`));default:return void(ne+=`${ye}${Ut}: ${gn};\n`)}}),ne+=`${ye}}\n`}),ne+="}\n";const De=document.createElement("style");return De.textContent=ne,De}animate(A,M,U,ne,ye,De=[],je){const wt=De.filter(ci=>ci instanceof yl),Ut={};Bt(U,ne)&&wt.forEach(ci=>{let Po=ci.currentSnapshot;Object.keys(Po).forEach(lo=>Ut[lo]=Po[lo])});const gn=function(re){let A={};return re&&(Array.isArray(re)?re:[re]).forEach(U=>{Object.keys(U).forEach(ne=>{"offset"==ne||"easing"==ne||(A[ne]=U[ne])})}),A}(M=vn(A,M,Ut));if(0==U)return new rd(A,gn);const sn="gen_css_kf_"+this._count++,Er=this.buildKeyframeElement(A,sn,M);(function(re){var A;const M=null===(A=re.getRootNode)||void 0===A?void 0:A.call(re);return"undefined"!=typeof ShadowRoot&&M instanceof ShadowRoot?M:document.head})(A).appendChild(Er);const gr=ed(A,M),Or=new yl(A,M,sn,U,ne,ye,gn,gr);return Or.onDestroy(()=>{var re;(re=Er).parentNode.removeChild(re)}),Or}}class tr{constructor(A,M,U,ne){this.element=A,this.keyframes=M,this.options=U,this._specialStyles=ne,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=U.duration,this._delay=U.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(A=>A()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const A=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,A,this.options),this._finalKeyframe=A.length?A[A.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(A,M,U){return A.animate(M,U)}onStart(A){this._onStartFns.push(A)}onDone(A){this._onDoneFns.push(A)}onDestroy(A){this._onDestroyFns.push(A)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(A=>A()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(A=>A()),this._onDestroyFns=[])}setPosition(A){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=A*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const A={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(M=>{"offset"!=M&&(A[M]=this._finished?this._finalKeyframe[M]:Sn(this.element,M))}),this.currentSnapshot=A}triggerCallback(A){const M="start"==A?this._onStartFns:this._onDoneFns;M.forEach(U=>U()),M.length=0}}class Jr{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(pr().toString()),this._cssKeyframesDriver=new q}validateStyleProperty(A){return _t(A)}matchesElement(A,M){return ht(A,M)}containsElement(A,M){return it(A,M)}query(A,M,U){return It(A,M,U)}computeStyle(A,M,U){return window.getComputedStyle(A)[M]}overrideWebAnimationsSupport(A){this._isNativeImpl=A}animate(A,M,U,ne,ye,De=[],je){if(!je&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(A,M,U,ne,ye,De);const gn={duration:U,delay:ne,fill:0==ne?"both":"forwards"};ye&&(gn.easing=ye);const sn={},Er=De.filter(gr=>gr instanceof tr);Bt(U,ne)&&Er.forEach(gr=>{let Or=gr.currentSnapshot;Object.keys(Or).forEach(ci=>sn[ci]=Or[ci])});const yi=ed(A,M=vn(A,M=M.map(gr=>Br(gr,!1)),sn));return new tr(A,M,gn,yi)}}function pr(){return we()&&Element.prototype.animate||{}}var xi=ee(8583);let ei=(()=>{class re extends Pe._j{constructor(M,U){super(),this._nextAnimationId=0,this._renderer=M.createRenderer(U.body,{id:"0",encapsulation:Q.ifc.None,styles:[],data:{animation:[]}})}build(M){const U=this._nextAnimationId.toString();this._nextAnimationId++;const ne=Array.isArray(M)?(0,Pe.vP)(M):M;return Xs(this._renderer,null,U,"register",[ne]),new Bs(U,this._renderer)}}return re.\u0275fac=function(M){return new(M||re)(Q.LFG(Q.FYo),Q.LFG(xi.K0))},re.\u0275prov=Q.Yz7({token:re,factory:re.\u0275fac}),re})();class Bs extends Pe.LC{constructor(A,M){super(),this._id=A,this._renderer=M}create(A,M){return new yc(this._id,A,M||{},this._renderer)}}class yc{constructor(A,M,U,ne){this.id=A,this.element=M,this._renderer=ne,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",U)}_listen(A,M){return this._renderer.listen(this.element,`@@${this.id}:${A}`,M)}_command(A,...M){return Xs(this._renderer,this.element,this.id,A,M)}onDone(A){this._listen("done",A)}onStart(A){this._listen("start",A)}onDestroy(A){this._listen("destroy",A)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(A){this._command("setPosition",A)}getPosition(){var A,M;return null!==(M=null===(A=this._renderer.engine.players[+this.id])||void 0===A?void 0:A.getPosition())&&void 0!==M?M:0}}function Xs(re,A,M,U,ne){return re.setProperty(A,`@@${M}:${U}`,ne)}const Ks="@.disabled";let sr=(()=>{class re{constructor(M,U,ne){this.delegate=M,this.engine=U,this._zone=ne,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),U.onRemovalComplete=(ye,De)=>{De&&De.parentNode(ye)&&De.removeChild(ye.parentNode,ye)}}createRenderer(M,U){const ye=this.delegate.createRenderer(M,U);if(!(M&&U&&U.data&&U.data.animation)){let gn=this._rendererCache.get(ye);return gn||(gn=new fu("",ye,this.engine),this._rendererCache.set(ye,gn)),gn}const De=U.id,je=U.id+"-"+this._currentId;this._currentId++,this.engine.register(je,M);const wt=gn=>{Array.isArray(gn)?gn.forEach(wt):this.engine.registerTrigger(De,je,M,gn.name,gn)};return U.data.animation.forEach(wt),new pu(this,je,ye,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(M,U,ne){M>=0&&M<this._microtaskId?this._zone.run(()=>U(ne)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(ye=>{const[De,je]=ye;De(je)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([U,ne]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return re.\u0275fac=function(M){return new(M||re)(Q.LFG(Q.FYo),Q.LFG(gl),Q.LFG(Q.R0b))},re.\u0275prov=Q.Yz7({token:re,factory:re.\u0275fac}),re})();class fu{constructor(A,M,U){this.namespaceId=A,this.delegate=M,this.engine=U,this.destroyNode=this.delegate.destroyNode?ne=>M.destroyNode(ne):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(A,M){return this.delegate.createElement(A,M)}createComment(A){return this.delegate.createComment(A)}createText(A){return this.delegate.createText(A)}appendChild(A,M){this.delegate.appendChild(A,M),this.engine.onInsert(this.namespaceId,M,A,!1)}insertBefore(A,M,U,ne=!0){this.delegate.insertBefore(A,M,U),this.engine.onInsert(this.namespaceId,M,A,ne)}removeChild(A,M,U){this.engine.onRemove(this.namespaceId,M,this.delegate,U)}selectRootElement(A,M){return this.delegate.selectRootElement(A,M)}parentNode(A){return this.delegate.parentNode(A)}nextSibling(A){return this.delegate.nextSibling(A)}setAttribute(A,M,U,ne){this.delegate.setAttribute(A,M,U,ne)}removeAttribute(A,M,U){this.delegate.removeAttribute(A,M,U)}addClass(A,M){this.delegate.addClass(A,M)}removeClass(A,M){this.delegate.removeClass(A,M)}setStyle(A,M,U,ne){this.delegate.setStyle(A,M,U,ne)}removeStyle(A,M,U){this.delegate.removeStyle(A,M,U)}setProperty(A,M,U){"@"==M.charAt(0)&&M==Ks?this.disableAnimations(A,!!U):this.delegate.setProperty(A,M,U)}setValue(A,M){this.delegate.setValue(A,M)}listen(A,M,U){return this.delegate.listen(A,M,U)}disableAnimations(A,M){this.engine.disableAnimations(A,M)}}class pu extends fu{constructor(A,M,U,ne){super(M,U,ne),this.factory=A,this.namespaceId=M}setProperty(A,M,U){"@"==M.charAt(0)?"."==M.charAt(1)&&M==Ks?this.disableAnimations(A,U=void 0===U||!!U):this.engine.process(this.namespaceId,A,M.substr(1),U):this.delegate.setProperty(A,M,U)}listen(A,M,U){if("@"==M.charAt(0)){const ne=function(re){switch(re){case"body":return document.body;case"document":return document;case"window":return window;default:return re}}(A);let ye=M.substr(1),De="";return"@"!=ye.charAt(0)&&([ye,De]=function(re){const A=re.indexOf(".");return[re.substring(0,A),re.substr(A+1)]}(ye)),this.engine.listen(this.namespaceId,ne,ye,De,je=>{this.factory.scheduleListenerCallback(je._data||-1,U,je)})}return this.delegate.listen(A,M,U)}}let Rf=(()=>{class re extends gl{constructor(M,U,ne){super(M.body,U,ne)}ngOnDestroy(){this.flush()}}return re.\u0275fac=function(M){return new(M||re)(Q.LFG(xi.K0),Q.LFG(Ee),Q.LFG(vs))},re.\u0275prov=Q.Yz7({token:re,factory:re.\u0275fac}),re})();const ui=new Q.OlP("AnimationModuleType"),qd=[{provide:Pe._j,useClass:ei},{provide:vs,useFactory:function(){return new vi}},{provide:gl,useClass:Rf},{provide:Q.FYo,useFactory:function(re,A,M){return new sr(re,A,M)},deps:[_.se,gl,Q.R0b]}],Do=[{provide:Ee,useFactory:function(){return"function"==typeof pr()?new Jr:new q}},{provide:ui,useValue:"BrowserAnimations"},...qd],Lu=[{provide:Ee,useClass:te},{provide:ui,useValue:"NoopAnimations"},...qd];let Kl=(()=>{class re{static withConfig(M){return{ngModule:re,providers:M.disableAnimations?Lu:Do}}}return re.\u0275fac=function(M){return new(M||re)},re.\u0275mod=Q.oAB({type:re}),re.\u0275inj=Q.cJS({providers:Do,imports:[_.b2]}),re})()},9075:(Tt,St,ee)=>{"use strict";ee.d(St,{b2:()=>To,H7:()=>pe,q6:()=>fr,se:()=>Gr});var Q=ee(8583),_=ee(7716);class Pe extends Q.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class we extends Pe{static makeCurrent(){(0,Q.HT)(new we)}onAndCancel(Je,Te,W){return Je.addEventListener(Te,W,!1),()=>{Je.removeEventListener(Te,W,!1)}}dispatchEvent(Je,Te){Je.dispatchEvent(Te)}remove(Je){Je.parentNode&&Je.parentNode.removeChild(Je)}createElement(Je,Te){return(Te=Te||this.getDefaultDocument()).createElement(Je)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Je){return Je.nodeType===Node.ELEMENT_NODE}isShadowRoot(Je){return Je instanceof DocumentFragment}getGlobalEventTarget(Je,Te){return"window"===Te?window:"document"===Te?Je:"body"===Te?Je.body:null}getBaseHref(Je){const Te=(Ke=Ke||document.querySelector("base"),Ke?Ke.getAttribute("href"):null);return null==Te?null:function(tt){nt=nt||document.createElement("a"),nt.setAttribute("href",tt);const Je=nt.pathname;return"/"===Je.charAt(0)?Je:`/${Je}`}(Te)}resetBaseElement(){Ke=null}getUserAgent(){return window.navigator.userAgent}getCookie(Je){return(0,Q.Mx)(document.cookie,Je)}}let nt,Ke=null;const We=new _.OlP("TRANSITION_ID"),Ge=[{provide:_.ip1,useFactory:function(tt,Je,Te){return()=>{Te.get(_.CZH).donePromise.then(()=>{const W=(0,Q.q)(),oe=Je.querySelectorAll(`style[ng-transition="${tt}"]`);for(let fe=0;fe<oe.length;fe++)W.remove(oe[fe])})}},deps:[We,Q.K0,_.zs3],multi:!0}];class Ie{static init(){(0,_.VLi)(new Ie)}addToWindow(Je){_.dqk.getAngularTestability=(W,oe=!0)=>{const fe=Je.findTestabilityInTree(W,oe);if(null==fe)throw new Error("Could not find testability for element.");return fe},_.dqk.getAllAngularTestabilities=()=>Je.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>Je.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(W=>{const oe=_.dqk.getAllAngularTestabilities();let fe=oe.length,ct=!1;const vt=function(Lt){ct=ct||Lt,fe--,0==fe&&W(ct)};oe.forEach(function(Lt){Lt.whenStable(vt)})})}findTestabilityInTree(Je,Te,W){if(null==Te)return null;const oe=Je.getTestability(Te);return null!=oe?oe:W?(0,Q.q)().isShadowRoot(Te)?this.findTestabilityInTree(Je,Te.host,!0):this.findTestabilityInTree(Je,Te.parentElement,!0):null}}let at=(()=>{class tt{build(){return new XMLHttpRequest}}return tt.\u0275fac=function(Te){return new(Te||tt)},tt.\u0275prov=_.Yz7({token:tt,factory:tt.\u0275fac}),tt})();const te=new _.OlP("EventManagerPlugins");let Ee=(()=>{class tt{constructor(Te,W){this._zone=W,this._eventNameToPlugin=new Map,Te.forEach(oe=>oe.manager=this),this._plugins=Te.slice().reverse()}addEventListener(Te,W,oe){return this._findPluginFor(W).addEventListener(Te,W,oe)}addGlobalEventListener(Te,W,oe){return this._findPluginFor(W).addGlobalEventListener(Te,W,oe)}getZone(){return this._zone}_findPluginFor(Te){const W=this._eventNameToPlugin.get(Te);if(W)return W;const oe=this._plugins;for(let fe=0;fe<oe.length;fe++){const ct=oe[fe];if(ct.supports(Te))return this._eventNameToPlugin.set(Te,ct),ct}throw new Error(`No event manager plugin found for event ${Te}`)}}return tt.\u0275fac=function(Te){return new(Te||tt)(_.LFG(te),_.LFG(_.R0b))},tt.\u0275prov=_.Yz7({token:tt,factory:tt.\u0275fac}),tt})();class Ve{constructor(Je){this._doc=Je}addGlobalEventListener(Je,Te,W){const oe=(0,Q.q)().getGlobalEventTarget(this._doc,Je);if(!oe)throw new Error(`Unsupported event target ${oe} for event ${Te}`);return this.addEventListener(oe,Te,W)}}let bt=(()=>{class tt{constructor(){this._stylesSet=new Set}addStyles(Te){const W=new Set;Te.forEach(oe=>{this._stylesSet.has(oe)||(this._stylesSet.add(oe),W.add(oe))}),this.onStylesAdded(W)}onStylesAdded(Te){}getAllStyles(){return Array.from(this._stylesSet)}}return tt.\u0275fac=function(Te){return new(Te||tt)},tt.\u0275prov=_.Yz7({token:tt,factory:tt.\u0275fac}),tt})(),Vt=(()=>{class tt extends bt{constructor(Te){super(),this._doc=Te,this._hostNodes=new Map,this._hostNodes.set(Te.head,[])}_addStylesToHost(Te,W,oe){Te.forEach(fe=>{const ct=this._doc.createElement("style");ct.textContent=fe,oe.push(W.appendChild(ct))})}addHost(Te){const W=[];this._addStylesToHost(this._stylesSet,Te,W),this._hostNodes.set(Te,W)}removeHost(Te){const W=this._hostNodes.get(Te);W&&W.forEach(tn),this._hostNodes.delete(Te)}onStylesAdded(Te){this._hostNodes.forEach((W,oe)=>{this._addStylesToHost(Te,oe,W)})}ngOnDestroy(){this._hostNodes.forEach(Te=>Te.forEach(tn))}}return tt.\u0275fac=function(Te){return new(Te||tt)(_.LFG(Q.K0))},tt.\u0275prov=_.Yz7({token:tt,factory:tt.\u0275fac}),tt})();function tn(tt){(0,Q.q)().remove(tt)}const Ot={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},mn=/%COMP%/g;function Ht(tt,Je,Te){for(let W=0;W<Je.length;W++){let oe=Je[W];Array.isArray(oe)?Ht(tt,oe,Te):(oe=oe.replace(mn,tt),Te.push(oe))}return Te}function qn(tt){return Je=>{if("__ngUnwrap__"===Je)return tt;!1===tt(Je)&&(Je.preventDefault(),Je.returnValue=!1)}}let Gr=(()=>{class tt{constructor(Te,W,oe){this.eventManager=Te,this.sharedStylesHost=W,this.appId=oe,this.rendererByCompId=new Map,this.defaultRenderer=new Ro(Te)}createRenderer(Te,W){if(!Te||!W)return this.defaultRenderer;switch(W.encapsulation){case _.ifc.Emulated:{let oe=this.rendererByCompId.get(W.id);return oe||(oe=new Wt(this.eventManager,this.sharedStylesHost,W,this.appId),this.rendererByCompId.set(W.id,oe)),oe.applyToHost(Te),oe}case 1:case _.ifc.ShadowDom:return new io(this.eventManager,this.sharedStylesHost,Te,W);default:if(!this.rendererByCompId.has(W.id)){const oe=Ht(W.id,W.styles,[]);this.sharedStylesHost.addStyles(oe),this.rendererByCompId.set(W.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return tt.\u0275fac=function(Te){return new(Te||tt)(_.LFG(Ee),_.LFG(Vt),_.LFG(_.AFp))},tt.\u0275prov=_.Yz7({token:tt,factory:tt.\u0275fac}),tt})();class Ro{constructor(Je){this.eventManager=Je,this.data=Object.create(null)}destroy(){}createElement(Je,Te){return Te?document.createElementNS(Ot[Te]||Te,Je):document.createElement(Je)}createComment(Je){return document.createComment(Je)}createText(Je){return document.createTextNode(Je)}appendChild(Je,Te){Je.appendChild(Te)}insertBefore(Je,Te,W){Je&&Je.insertBefore(Te,W)}removeChild(Je,Te){Je&&Je.removeChild(Te)}selectRootElement(Je,Te){let W="string"==typeof Je?document.querySelector(Je):Je;if(!W)throw new Error(`The selector "${Je}" did not match any elements`);return Te||(W.textContent=""),W}parentNode(Je){return Je.parentNode}nextSibling(Je){return Je.nextSibling}setAttribute(Je,Te,W,oe){if(oe){Te=oe+":"+Te;const fe=Ot[oe];fe?Je.setAttributeNS(fe,Te,W):Je.setAttribute(Te,W)}else Je.setAttribute(Te,W)}removeAttribute(Je,Te,W){if(W){const oe=Ot[W];oe?Je.removeAttributeNS(oe,Te):Je.removeAttribute(`${W}:${Te}`)}else Je.removeAttribute(Te)}addClass(Je,Te){Je.classList.add(Te)}removeClass(Je,Te){Je.classList.remove(Te)}setStyle(Je,Te,W,oe){oe&(_.JOm.DashCase|_.JOm.Important)?Je.style.setProperty(Te,W,oe&_.JOm.Important?"important":""):Je.style[Te]=W}removeStyle(Je,Te,W){W&_.JOm.DashCase?Je.style.removeProperty(Te):Je.style[Te]=""}setProperty(Je,Te,W){Je[Te]=W}setValue(Je,Te){Je.nodeValue=Te}listen(Je,Te,W){return"string"==typeof Je?this.eventManager.addGlobalEventListener(Je,Te,qn(W)):this.eventManager.addEventListener(Je,Te,qn(W))}}class Wt extends Ro{constructor(Je,Te,W,oe){super(Je),this.component=W;const fe=Ht(oe+"-"+W.id,W.styles,[]);Te.addStyles(fe),this.contentAttr="_ngcontent-%COMP%".replace(mn,oe+"-"+W.id),this.hostAttr="_nghost-%COMP%".replace(mn,oe+"-"+W.id)}applyToHost(Je){super.setAttribute(Je,this.hostAttr,"")}createElement(Je,Te){const W=super.createElement(Je,Te);return super.setAttribute(W,this.contentAttr,""),W}}class io extends Ro{constructor(Je,Te,W,oe){super(Je),this.sharedStylesHost=Te,this.hostEl=W,this.shadowRoot=W.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const fe=Ht(oe.id,oe.styles,[]);for(let ct=0;ct<fe.length;ct++){const vt=document.createElement("style");vt.textContent=fe[ct],this.shadowRoot.appendChild(vt)}}nodeOrShadowRoot(Je){return Je===this.hostEl?this.shadowRoot:Je}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Je,Te){return super.appendChild(this.nodeOrShadowRoot(Je),Te)}insertBefore(Je,Te,W){return super.insertBefore(this.nodeOrShadowRoot(Je),Te,W)}removeChild(Je,Te){return super.removeChild(this.nodeOrShadowRoot(Je),Te)}parentNode(Je){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Je)))}}let wr=(()=>{class tt extends Ve{constructor(Te){super(Te)}supports(Te){return!0}addEventListener(Te,W,oe){return Te.addEventListener(W,oe,!1),()=>this.removeEventListener(Te,W,oe)}removeEventListener(Te,W,oe){return Te.removeEventListener(W,oe)}}return tt.\u0275fac=function(Te){return new(Te||tt)(_.LFG(Q.K0))},tt.\u0275prov=_.Yz7({token:tt,factory:tt.\u0275fac}),tt})();const vn=["alt","control","meta","shift"],Sn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ur={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Cr={alt:tt=>tt.altKey,control:tt=>tt.ctrlKey,meta:tt=>tt.metaKey,shift:tt=>tt.shiftKey};let rn=(()=>{class tt extends Ve{constructor(Te){super(Te)}supports(Te){return null!=tt.parseEventName(Te)}addEventListener(Te,W,oe){const fe=tt.parseEventName(W),ct=tt.eventCallback(fe.fullKey,oe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,Q.q)().onAndCancel(Te,fe.domEventName,ct))}static parseEventName(Te){const W=Te.toLowerCase().split("."),oe=W.shift();if(0===W.length||"keydown"!==oe&&"keyup"!==oe)return null;const fe=tt._normalizeKey(W.pop());let ct="";if(vn.forEach(Lt=>{const nn=W.indexOf(Lt);nn>-1&&(W.splice(nn,1),ct+=Lt+".")}),ct+=fe,0!=W.length||0===fe.length)return null;const vt={};return vt.domEventName=oe,vt.fullKey=ct,vt}static getEventFullKey(Te){let W="",oe=function(tt){let Je=tt.key;if(null==Je){if(Je=tt.keyIdentifier,null==Je)return"Unidentified";Je.startsWith("U+")&&(Je=String.fromCharCode(parseInt(Je.substring(2),16)),3===tt.location&&ur.hasOwnProperty(Je)&&(Je=ur[Je]))}return Sn[Je]||Je}(Te);return oe=oe.toLowerCase()," "===oe?oe="space":"."===oe&&(oe="dot"),vn.forEach(fe=>{fe!=oe&&Cr[fe](Te)&&(W+=fe+".")}),W+=oe,W}static eventCallback(Te,W,oe){return fe=>{tt.getEventFullKey(fe)===Te&&oe.runGuarded(()=>W(fe))}}static _normalizeKey(Te){switch(Te){case"esc":return"escape";default:return Te}}}return tt.\u0275fac=function(Te){return new(Te||tt)(_.LFG(Q.K0))},tt.\u0275prov=_.Yz7({token:tt,factory:tt.\u0275fac}),tt})(),pe=(()=>{class tt{}return tt.\u0275fac=function(Te){return new(Te||tt)},tt.\u0275prov=(0,_.Yz7)({factory:function(){return(0,_.LFG)(At)},token:tt,providedIn:"root"}),tt})(),At=(()=>{class tt extends pe{constructor(Te){super(),this._doc=Te}sanitize(Te,W){if(null==W)return null;switch(Te){case _.q3G.NONE:return W;case _.q3G.HTML:return(0,_.qzn)(W,"HTML")?(0,_.z3N)(W):(0,_.EiD)(this._doc,String(W)).toString();case _.q3G.STYLE:return(0,_.qzn)(W,"Style")?(0,_.z3N)(W):W;case _.q3G.SCRIPT:if((0,_.qzn)(W,"Script"))return(0,_.z3N)(W);throw new Error("unsafe value used in a script context");case _.q3G.URL:return(0,_.yhl)(W),(0,_.qzn)(W,"URL")?(0,_.z3N)(W):(0,_.mCW)(String(W));case _.q3G.RESOURCE_URL:if((0,_.qzn)(W,"ResourceURL"))return(0,_.z3N)(W);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Te} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Te){return(0,_.JVY)(Te)}bypassSecurityTrustStyle(Te){return(0,_.L6k)(Te)}bypassSecurityTrustScript(Te){return(0,_.eBb)(Te)}bypassSecurityTrustUrl(Te){return(0,_.LAX)(Te)}bypassSecurityTrustResourceUrl(Te){return(0,_.pB0)(Te)}}return tt.\u0275fac=function(Te){return new(Te||tt)(_.LFG(Q.K0))},tt.\u0275prov=(0,_.Yz7)({factory:function(){return function(tt){return new At(tt.get(Q.K0))}((0,_.LFG)(_.gxx))},token:tt,providedIn:"root"}),tt})();const fr=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:Q.bD},{provide:_.g9A,useValue:function(){we.makeCurrent(),Ie.init()},multi:!0},{provide:Q.K0,useFactory:function(){return(0,_.RDi)(document),document},deps:[]}]),Vn=[[],{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function(){return new _.qLn},deps:[]},{provide:te,useClass:wr,multi:!0,deps:[Q.K0,_.R0b,_.Lbi]},{provide:te,useClass:rn,multi:!0,deps:[Q.K0]},[],{provide:Gr,useClass:Gr,deps:[Ee,Vt,_.AFp]},{provide:_.FYo,useExisting:Gr},{provide:bt,useExisting:Vt},{provide:Vt,useClass:Vt,deps:[Q.K0]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:Ee,useClass:Ee,deps:[te,_.R0b]},{provide:Q.JF,useClass:at,deps:[]},[]];let To=(()=>{class tt{constructor(Te){if(Te)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Te){return{ngModule:tt,providers:[{provide:_.AFp,useValue:Te.appId},{provide:We,useExisting:_.AFp},Ge]}}}return tt.\u0275fac=function(Te){return new(Te||tt)(_.LFG(tt,12))},tt.\u0275mod=_.oAB({type:tt}),tt.\u0275inj=_.cJS({providers:Vn,imports:[Q.ez,_.hGG]}),tt})();"undefined"!=typeof window&&window},2305:(Tt,St,ee)=>{"use strict";ee.d(St,{gz:()=>ho,F0:()=>ma,Bz:()=>Nf,lC:()=>ad});var Q=ee(8583),_=ee(7716),Pe=ee(4869),we=ee(9796),Ke=ee(7393);class _e extends Ke.L{notifyNext(k,O,z,K,ae){this.destination.next(O)}notifyError(k,O){this.destination.error(k)}notifyComplete(k){this.destination.complete()}}class nt extends Ke.L{constructor(k,O,z){super(),this.parent=k,this.outerValue=O,this.outerIndex=z,this.index=0}_next(k){this.parent.notifyNext(this.outerValue,k,this.outerIndex,this.index++,this)}_error(k){this.parent.notifyError(k,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var xe=ee(7444),We=ee(7574);function ve(B,k,O,z,K=new nt(B,O,z)){if(!K.closed)return k instanceof We.y?k.subscribe(K):(0,xe.s)(k)(K)}var Ge=ee(6693);const Ie={};class Ft{constructor(k){this.resultSelector=k}call(k,O){return O.subscribe(new Se(k,this.resultSelector))}}class Se extends _e{constructor(k,O){super(k),this.resultSelector=O,this.active=0,this.values=[],this.observables=[]}_next(k){this.values.push(Ie),this.observables.push(k)}_complete(){const k=this.observables,O=k.length;if(0===O)this.destination.complete();else{this.active=O,this.toRespond=O;for(let z=0;z<O;z++)this.add(ve(this,k[z],void 0,z))}}notifyComplete(k){0==(this.active-=1)&&this.destination.complete()}notifyNext(k,O,z){const K=this.values,Ne=this.toRespond?K[z]===Ie?--this.toRespond:this.toRespond:0;K[z]=O,0===Ne&&(this.resultSelector?this._tryResultSelector(K):this.destination.next(K.slice()))}_tryResultSelector(k){let O;try{O=this.resultSelector.apply(this,k)}catch(z){return void this.destination.error(z)}this.destination.next(O)}}const Be=(()=>{function B(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return B.prototype=Object.create(Error.prototype),B})();var ge=ee(4402),ue=ee(5917),Me=ee(6215),qe=ee(8071),Ye=ee(1439),_t=ee(9193),Ue=ee(2441),ht=ee(9765);function it(B,k){let O=!1;return arguments.length>=2&&(O=!0),function(K){return K.lift(new It(B,k,O))}}class It{constructor(k,O,z=!1){this.accumulator=k,this.seed=O,this.hasSeed=z}call(k,O){return O.subscribe(new xt(k,this.accumulator,this.seed,this.hasSeed))}}class xt extends Ke.L{constructor(k,O,z,K){super(k),this.accumulator=O,this._seed=z,this.hasSeed=K,this.index=0}get seed(){return this._seed}set seed(k){this.hasSeed=!0,this._seed=k}_next(k){if(this.hasSeed)return this._tryNext(k);this.seed=k,this.destination.next(k)}_tryNext(k){const O=this.index++;let z;try{z=this.accumulator(this.seed,k,O)}catch(K){this.destination.error(K)}this.seed=z,this.destination.next(z)}}var te=ee(5435),Ee=ee(7108);function Ve(B){return function(O){return 0===B?(0,_t.c)():O.lift(new bt(B))}}class bt{constructor(k){if(this.total=k,this.total<0)throw new Ee.W}call(k,O){return O.subscribe(new Vt(k,this.total))}}class Vt extends Ke.L{constructor(k,O){super(k),this.total=O,this.ring=new Array,this.count=0}_next(k){const O=this.ring,z=this.total,K=this.count++;O.length<z?O.push(k):O[K%z]=k}_complete(){const k=this.destination;let O=this.count;if(O>0){const z=this.count>=this.total?this.total:this.count,K=this.ring;for(let ae=0;ae<z;ae++){const Ne=O++%z;k.next(K[Ne])}}k.complete()}}function tn(B=lr){return k=>k.lift(new Ot(B))}class Ot{constructor(k){this.errorFactory=k}call(k,O){return O.subscribe(new mn(k,this.errorFactory))}}class mn extends Ke.L{constructor(k,O){super(k),this.errorFactory=O,this.hasValue=!1}_next(k){this.hasValue=!0,this.destination.next(k)}_complete(){if(this.hasValue)return this.destination.complete();{let k;try{k=this.errorFactory()}catch(O){k=O}this.destination.error(k)}}}function lr(){return new Be}function un(B=null){return k=>k.lift(new Rr(B))}class Rr{constructor(k){this.defaultValue=k}call(k,O){return O.subscribe(new hr(k,this.defaultValue))}}class hr extends Ke.L{constructor(k,O){super(k),this.defaultValue=O,this.isEmpty=!0}_next(k){this.isEmpty=!1,this.destination.next(k)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var pi=ee(4487),Ht=ee(5257);function qn(B,k){const O=arguments.length>=2;return z=>z.pipe(B?(0,te.h)((K,ae)=>B(K,ae,z)):pi.y,(0,Ht.q)(1),O?un(k):tn(()=>new Be))}var Jt=ee(8002),Gr=ee(3190),Ro=ee(9761),Br=ee(5304),Vi=ee(4612),Wn=ee(9773),Wt=ee(3342),io=ee(1307),wr=ee(8939),en=ee(3282);class Ln{constructor(k,O){this.id=k,this.url=O}}class Et extends Ln{constructor(k,O,z="imperative",K=null){super(k,O),this.navigationTrigger=z,this.restoredState=K}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zt extends Ln{constructor(k,O,z){super(k,O),this.urlAfterRedirects=z}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rt extends Ln{constructor(k,O,z){super(k,O),this.reason=z}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ae extends Ln{constructor(k,O,z){super(k,O),this.error=z}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ke extends Ln{constructor(k,O,z,K){super(k,O),this.urlAfterRedirects=z,this.state=K}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mt extends Ln{constructor(k,O,z,K){super(k,O),this.urlAfterRedirects=z,this.state=K}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bt extends Ln{constructor(k,O,z,K,ae){super(k,O),this.urlAfterRedirects=z,this.state=K,this.shouldActivate=ae}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vn extends Ln{constructor(k,O,z,K){super(k,O),this.urlAfterRedirects=z,this.state=K}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yt extends Ln{constructor(k,O,z,K){super(k,O),this.urlAfterRedirects=z,this.state=K}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sn{constructor(k){this.route=k}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ur{constructor(k){this.route=k}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Mi{constructor(k){this.snapshot=k}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yr{constructor(k){this.snapshot=k}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kr{constructor(k){this.snapshot=k}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kr{constructor(k){this.snapshot=k}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cr{constructor(k,O,z){this.routerEvent=k,this.position=O,this.anchor=z}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const rn="primary";class ce{constructor(k){this.params=k||{}}has(k){return Object.prototype.hasOwnProperty.call(this.params,k)}get(k){if(this.has(k)){const O=this.params[k];return Array.isArray(O)?O[0]:O}return null}getAll(k){if(this.has(k)){const O=this.params[k];return Array.isArray(O)?O:[O]}return[]}get keys(){return Object.keys(this.params)}}function pe(B){return new ce(B)}const Ze="ngNavigationCancelingError";function At(B){const k=Error("NavigationCancelingError: "+B);return k[Ze]=!0,k}function _r(B,k,O){const z=O.path.split("/");if(z.length>B.length||"full"===O.pathMatch&&(k.hasChildren()||z.length<B.length))return null;const K={};for(let ae=0;ae<z.length;ae++){const Ne=z[ae],et=B[ae];if(Ne.startsWith(":"))K[Ne.substring(1)]=et;else if(Ne!==et.path)return null}return{consumed:B.slice(0,z.length),posParams:K}}function Zr(B,k){const O=B?Object.keys(B):void 0,z=k?Object.keys(k):void 0;if(!O||!z||O.length!=z.length)return!1;let K;for(let ae=0;ae<O.length;ae++)if(K=O[ae],!zi(B[K],k[K]))return!1;return!0}function zi(B,k){if(Array.isArray(B)&&Array.isArray(k)){if(B.length!==k.length)return!1;const O=[...B].sort(),z=[...k].sort();return O.every((K,ae)=>z[ae]===K)}return B===k}function xo(B){return Array.prototype.concat.apply([],B)}function or(B){return B.length>0?B[B.length-1]:null}function fr(B,k){for(const O in B)B.hasOwnProperty(O)&&k(B[O],O)}function Vn(B){return(0,_.CqO)(B)?B:(0,_.QGY)(B)?(0,ge.D)(Promise.resolve(B)):(0,ue.of)(B)}const hl={exact:function ns(B,k,O){if(!Nn(B.segments,k.segments)||!Yo(B.segments,k.segments,O)||B.numberOfChildren!==k.numberOfChildren)return!1;for(const z in k.children)if(!B.children[z]||!ns(B.children[z],k.children[z],O))return!1;return!0},subset:Wo},Hi={exact:function(B,k){return Zr(B,k)},subset:function(B,k){return Object.keys(k).length<=Object.keys(B).length&&Object.keys(k).every(O=>zi(B[O],k[O]))},ignored:()=>!0};function $s(B,k,O){return hl[O.paths](B.root,k.root,O.matrixParams)&&Hi[O.queryParams](B.queryParams,k.queryParams)&&!("exact"===O.fragment&&B.fragment!==k.fragment)}function Wo(B,k,O){return oo(B,k,k.segments,O)}function oo(B,k,O,z){if(B.segments.length>O.length){const K=B.segments.slice(0,O.length);return!(!Nn(K,O)||k.hasChildren()||!Yo(K,O,z))}if(B.segments.length===O.length){if(!Nn(B.segments,O)||!Yo(B.segments,O,z))return!1;for(const K in k.children)if(!B.children[K]||!Wo(B.children[K],k.children[K],z))return!1;return!0}{const K=O.slice(0,B.segments.length),ae=O.slice(B.segments.length);return!!(Nn(B.segments,K)&&Yo(B.segments,K,z)&&B.children[rn])&&oo(B.children[rn],k,ae,z)}}function Yo(B,k,O){return k.every((z,K)=>Hi[O](B[K].parameters,z.parameters))}class xr{constructor(k,O,z){this.root=k,this.queryParams=O,this.fragment=z}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pe(this.queryParams)),this._queryParamMap}toString(){return Wi.serialize(this)}}class Xt{constructor(k,O){this.segments=k,this.children=O,this.parent=null,fr(O,(z,K)=>z.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ys(this)}}class er{constructor(k,O){this.path=k,this.parameters=O}get parameterMap(){return this._parameterMap||(this._parameterMap=pe(this.parameters)),this._parameterMap}toString(){return fe(this)}}function Nn(B,k){return B.length===k.length&&B.every((O,z)=>O.path===k[z].path)}class so{}class vi{parse(k){const O=new Jn(k);return new xr(O.parseRootSegment(),O.parseQueryParams(),O.parseFragment())}serialize(k){var B;return`${`/${qo(k.root,!0)}`}${function(B){const k=Object.keys(B).map(O=>{const z=B[O];return Array.isArray(z)?z.map(K=>`${tt(O)}=${tt(K)}`).join("&"):`${tt(O)}=${tt(z)}`}).filter(O=>!!O);return k.length?`?${k.join("&")}`:""}(k.queryParams)}${"string"==typeof k.fragment?`#${B=k.fragment,encodeURI(B)}`:""}`}}const Wi=new vi;function ys(B){return B.segments.map(k=>fe(k)).join("/")}function qo(B,k){if(!B.hasChildren())return ys(B);if(k){const O=B.children[rn]?qo(B.children[rn],!1):"",z=[];return fr(B.children,(K,ae)=>{ae!==rn&&z.push(`${ae}:${qo(K,!1)}`)}),z.length>0?`${O}(${z.join("//")})`:O}{const O=function(B,k){let O=[];return fr(B.children,(z,K)=>{K===rn&&(O=O.concat(k(z,K)))}),fr(B.children,(z,K)=>{K!==rn&&(O=O.concat(k(z,K)))}),O}(B,(z,K)=>K===rn?[qo(B.children[rn],!1)]:[`${K}:${qo(z,!1)}`]);return 1===Object.keys(B.children).length&&null!=B.children[rn]?`${ys(B)}/${O[0]}`:`${ys(B)}/(${O.join("//")})`}}function Zn(B){return encodeURIComponent(B).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tt(B){return Zn(B).replace(/%3B/gi,";")}function Te(B){return Zn(B).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function W(B){return decodeURIComponent(B)}function oe(B){return W(B.replace(/\+/g,"%20"))}function fe(B){return`${Te(B.path)}${function(B){return Object.keys(B).map(k=>`;${Te(k)}=${Te(B[k])}`).join("")}(B.parameters)}`}const Lt=/^[^\/()?;=#]+/;function nn(B){const k=B.match(Lt);return k?k[0]:""}const Rn=/^[^=?&#]+/,Tn=/^[^?&#]+/;class Jn{constructor(k){this.url=k,this.remaining=k}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const k={};if(this.consumeOptional("?"))do{this.parseQueryParam(k)}while(this.consumeOptional("&"));return k}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const k=[];for(this.peekStartsWith("(")||k.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),k.push(this.parseSegment());let O={};this.peekStartsWith("/(")&&(this.capture("/"),O=this.parseParens(!0));let z={};return this.peekStartsWith("(")&&(z=this.parseParens(!1)),(k.length>0||Object.keys(O).length>0)&&(z[rn]=new Xt(k,O)),z}parseSegment(){const k=nn(this.remaining);if(""===k&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(k),new er(W(k),this.parseMatrixParams())}parseMatrixParams(){const k={};for(;this.consumeOptional(";");)this.parseParam(k);return k}parseParam(k){const O=nn(this.remaining);if(!O)return;this.capture(O);let z="";if(this.consumeOptional("=")){const K=nn(this.remaining);K&&(z=K,this.capture(z))}k[W(O)]=W(z)}parseQueryParam(k){const O=function(B){const k=B.match(Rn);return k?k[0]:""}(this.remaining);if(!O)return;this.capture(O);let z="";if(this.consumeOptional("=")){const Ne=function(B){const k=B.match(Tn);return k?k[0]:""}(this.remaining);Ne&&(z=Ne,this.capture(z))}const K=oe(O),ae=oe(z);if(k.hasOwnProperty(K)){let Ne=k[K];Array.isArray(Ne)||(Ne=[Ne],k[K]=Ne),Ne.push(ae)}else k[K]=ae}parseParens(k){const O={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const z=nn(this.remaining),K=this.remaining[z.length];if("/"!==K&&")"!==K&&";"!==K)throw new Error(`Cannot parse url '${this.url}'`);let ae;z.indexOf(":")>-1?(ae=z.substr(0,z.indexOf(":")),this.capture(ae),this.capture(":")):k&&(ae=rn);const Ne=this.parseChildren();O[ae]=1===Object.keys(Ne).length?Ne[rn]:new Xt([],Ne),this.consumeOptional("//")}return O}peekStartsWith(k){return this.remaining.startsWith(k)}consumeOptional(k){return!!this.peekStartsWith(k)&&(this.remaining=this.remaining.substring(k.length),!0)}capture(k){if(!this.consumeOptional(k))throw new Error(`Expected "${k}".`)}}class Nr{constructor(k){this._root=k}get root(){return this._root.value}parent(k){const O=this.pathFromRoot(k);return O.length>1?O[O.length-2]:null}children(k){const O=Fr(k,this._root);return O?O.children.map(z=>z.value):[]}firstChild(k){const O=Fr(k,this._root);return O&&O.children.length>0?O.children[0].value:null}siblings(k){const O=Oo(k,this._root);return O.length<2?[]:O[O.length-2].children.map(K=>K.value).filter(K=>K!==k)}pathFromRoot(k){return Oo(k,this._root).map(O=>O.value)}}function Fr(B,k){if(B===k.value)return k;for(const O of k.children){const z=Fr(B,O);if(z)return z}return null}function Oo(B,k){if(B===k.value)return[k];for(const O of k.children){const z=Oo(B,O);if(z.length)return z.unshift(k),z}return[]}class Fi{constructor(k,O){this.value=k,this.children=O}toString(){return`TreeNode(${this.value})`}}function qr(B){const k={};return B&&B.children.forEach(O=>k[O.value.outlet]=O),k}class Ts extends Nr{constructor(k,O){super(k),this.snapshot=O,Ws(this,k)}toString(){return this.snapshot.toString()}}function Xo(B,k){const O=function(B,k){const Ne=new us([],{},{},"",{},rn,k,null,B.root,-1,{});return new eo("",new Fi(Ne,[]))}(B,k),z=new Me.X([new er("",{})]),K=new Me.X({}),ae=new Me.X({}),Ne=new Me.X({}),et=new Me.X(""),jt=new ho(z,K,Ne,et,ae,rn,k,O.root);return jt.snapshot=O.root,new Ts(new Fi(jt,[]),O)}class ho{constructor(k,O,z,K,ae,Ne,et,jt){this.url=k,this.params=O,this.queryParams=z,this.fragment=K,this.data=ae,this.outlet=Ne,this.component=et,this._futureSnapshot=jt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Jt.U)(k=>pe(k)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Jt.U)(k=>pe(k)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ao(B,k="emptyOnly"){const O=B.pathFromRoot;let z=0;if("always"!==k)for(z=O.length-1;z>=1;){const K=O[z],ae=O[z-1];if(K.routeConfig&&""===K.routeConfig.path)z--;else{if(ae.component)break;z--}}return function(B){return B.reduce((k,O)=>({params:Object.assign(Object.assign({},k.params),O.params),data:Object.assign(Object.assign({},k.data),O.data),resolve:Object.assign(Object.assign({},k.resolve),O._resolvedData)}),{params:{},data:{},resolve:{}})}(O.slice(z))}class us{constructor(k,O,z,K,ae,Ne,et,jt,Fn,rr,oi){this.url=k,this.params=O,this.queryParams=z,this.fragment=K,this.data=ae,this.outlet=Ne,this.component=et,this.routeConfig=jt,this._urlSegment=Fn,this._lastPathIndex=rr,this._resolve=oi}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=pe(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pe(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(z=>z.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class eo extends Nr{constructor(k,O){super(O),this.url=k,Ws(this,O)}toString(){return fl(this._root)}}function Ws(B,k){k.value._routerState=B,k.children.forEach(O=>Ws(B,O))}function fl(B){const k=B.children.length>0?` { ${B.children.map(fl).join(", ")} } `:"";return`${B.value}${k}`}function Ys(B){if(B.snapshot){const k=B.snapshot,O=B._futureSnapshot;B.snapshot=O,Zr(k.queryParams,O.queryParams)||B.queryParams.next(O.queryParams),k.fragment!==O.fragment&&B.fragment.next(O.fragment),Zr(k.params,O.params)||B.params.next(O.params),function(B,k){if(B.length!==k.length)return!1;for(let O=0;O<B.length;++O)if(!Zr(B[O],k[O]))return!1;return!0}(k.url,O.url)||B.url.next(O.url),Zr(k.data,O.data)||B.data.next(O.data)}else B.snapshot=B._futureSnapshot,B.data.next(B._futureSnapshot.data)}function da(B,k){return Zr(B.params,k.params)&&function(B,k){return Nn(B,k)&&B.every((O,z)=>Zr(O.parameters,k[z].parameters))}(B.url,k.url)&&!(!B.parent!=!k.parent)&&(!B.parent||da(B.parent,k.parent))}function Oi(B,k,O){if(O&&B.shouldReuseRoute(k.value,O.value.snapshot)){const z=O.value;z._futureSnapshot=k.value;const K=function(B,k,O){return k.children.map(z=>{for(const K of O.children)if(B.shouldReuseRoute(z.value,K.value.snapshot))return Oi(B,z,K);return Oi(B,z)})}(B,k,O);return new Fi(z,K)}{if(B.shouldAttach(k.value)){const ae=B.retrieve(k.value);if(null!==ae){const Ne=ae.route;return pl(k,Ne),Ne}}const z=function(B){return new ho(new Me.X(B.url),new Me.X(B.params),new Me.X(B.queryParams),new Me.X(B.fragment),new Me.X(B.data),B.outlet,B.component,B)}(k.value),K=k.children.map(ae=>Oi(B,ae));return new Fi(z,K)}}function pl(B,k){if(B.value.routeConfig!==k.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(B.children.length!==k.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");k.value._futureSnapshot=B.value;for(let O=0;O<B.children.length;++O)pl(B.children[O],k.children[O])}function Ru(B){return"object"==typeof B&&null!=B&&!B.outlets&&!B.segmentPath}function Ou(B){return"object"==typeof B&&null!=B&&B.outlets}function Du(B,k,O,z,K){let ae={};return z&&fr(z,(Ne,et)=>{ae[et]=Array.isArray(Ne)?Ne.map(jt=>`${jt}`):`${Ne}`}),new xr(O.root===B?k:uu(O.root,B,k),ae,K)}function uu(B,k,O){const z={};return fr(B.children,(K,ae)=>{z[ae]=K===k?O:uu(K,k,O)}),new Xt(B.segments,z)}class gl{constructor(k,O,z){if(this.isAbsolute=k,this.numberOfDoubleDots=O,this.commands=z,k&&z.length>0&&Ru(z[0]))throw new Error("Root segment cannot have matrix parameters");const K=z.find(Ou);if(K&&K!==or(z))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ha{constructor(k,O,z){this.segmentGroup=k,this.processChildren=O,this.index=z}}function gc(B,k,O){if(B||(B=new Xt([],{})),0===B.segments.length&&B.hasChildren())return ml(B,k,O);const z=function(B,k,O){let z=0,K=k;const ae={match:!1,pathIndex:0,commandIndex:0};for(;K<B.segments.length;){if(z>=O.length)return ae;const Ne=B.segments[K],et=O[z];if(Ou(et))break;const jt=`${et}`,Fn=z<O.length-1?O[z+1]:null;if(K>0&&void 0===jt)break;if(jt&&Fn&&"object"==typeof Fn&&void 0===Fn.outlets){if(!cu(jt,Fn,Ne))return ae;z+=2}else{if(!cu(jt,{},Ne))return ae;z++}K++}return{match:!0,pathIndex:K,commandIndex:z}}(B,k,O),K=O.slice(z.commandIndex);if(z.match&&z.pathIndex<B.segments.length){const ae=new Xt(B.segments.slice(0,z.pathIndex),{});return ae.children[rn]=new Xt(B.segments.slice(z.pathIndex),B.children),ml(ae,0,K)}return z.match&&0===K.length?new Xt(B.segments,{}):z.match&&!B.hasChildren()?Zi(B,k,O):z.match?ml(B,0,K):Zi(B,k,O)}function ml(B,k,O){if(0===O.length)return new Xt(B.segments,{});{const z=function(B){return Ou(B[0])?B[0].outlets:{[rn]:B}}(O),K={};return fr(z,(ae,Ne)=>{"string"==typeof ae&&(ae=[ae]),null!==ae&&(K[Ne]=gc(B.children[Ne],k,ae))}),fr(B.children,(ae,Ne)=>{void 0===z[Ne]&&(K[Ne]=ae)}),new Xt(B.segments,K)}}function Zi(B,k,O){const z=B.segments.slice(0,k);let K=0;for(;K<O.length;){const ae=O[K];if(Ou(ae)){const jt=nd(ae.outlets);return new Xt(z,jt)}if(0===K&&Ru(O[0])){z.push(new er(B.segments[k].path,mc(O[0]))),K++;continue}const Ne=Ou(ae)?ae.outlets[rn]:`${ae}`,et=K<O.length-1?O[K+1]:null;Ne&&et&&Ru(et)?(z.push(new er(Ne,mc(et))),K+=2):(z.push(new er(Ne,{})),K++)}return new Xt(z,{})}function nd(B){const k={};return fr(B,(O,z)=>{"string"==typeof O&&(O=[O]),null!==O&&(k[z]=Zi(new Xt([],{}),0,O))}),k}function mc(B){const k={};return fr(B,(O,z)=>k[z]=`${O}`),k}function cu(B,k,O){return B==O.path&&Zr(k,O.parameters)}class du{constructor(k,O,z,K){this.routeReuseStrategy=k,this.futureState=O,this.currState=z,this.forwardEvent=K}activate(k){const O=this.futureState._root,z=this.currState?this.currState._root:null;this.deactivateChildRoutes(O,z,k),Ys(this.futureState.root),this.activateChildRoutes(O,z,k)}deactivateChildRoutes(k,O,z){const K=qr(O);k.children.forEach(ae=>{const Ne=ae.value.outlet;this.deactivateRoutes(ae,K[Ne],z),delete K[Ne]}),fr(K,(ae,Ne)=>{this.deactivateRouteAndItsChildren(ae,z)})}deactivateRoutes(k,O,z){const K=k.value,ae=O?O.value:null;if(K===ae)if(K.component){const Ne=z.getContext(K.outlet);Ne&&this.deactivateChildRoutes(k,O,Ne.children)}else this.deactivateChildRoutes(k,O,z);else ae&&this.deactivateRouteAndItsChildren(O,z)}deactivateRouteAndItsChildren(k,O){this.routeReuseStrategy.shouldDetach(k.value.snapshot)?this.detachAndStoreRouteSubtree(k,O):this.deactivateRouteAndOutlet(k,O)}detachAndStoreRouteSubtree(k,O){const z=O.getContext(k.value.outlet);if(z&&z.outlet){const K=z.outlet.detach(),ae=z.children.onOutletDeactivated();this.routeReuseStrategy.store(k.value.snapshot,{componentRef:K,route:k,contexts:ae})}}deactivateRouteAndOutlet(k,O){const z=O.getContext(k.value.outlet),K=z&&k.value.component?z.children:O,ae=qr(k);for(const Ne of Object.keys(ae))this.deactivateRouteAndItsChildren(ae[Ne],K);z&&z.outlet&&(z.outlet.deactivate(),z.children.onOutletDeactivated(),z.attachRef=null,z.resolver=null,z.route=null)}activateChildRoutes(k,O,z){const K=qr(O);k.children.forEach(ae=>{this.activateRoutes(ae,K[ae.value.outlet],z),this.forwardEvent(new Kr(ae.value.snapshot))}),k.children.length&&this.forwardEvent(new Yr(k.value.snapshot))}activateRoutes(k,O,z){const K=k.value,ae=O?O.value:null;if(Ys(K),K===ae)if(K.component){const Ne=z.getOrCreateContext(K.outlet);this.activateChildRoutes(k,O,Ne.children)}else this.activateChildRoutes(k,O,z);else if(K.component){const Ne=z.getOrCreateContext(K.outlet);if(this.routeReuseStrategy.shouldAttach(K.snapshot)){const et=this.routeReuseStrategy.retrieve(K.snapshot);this.routeReuseStrategy.store(K.snapshot,null),Ne.children.onOutletReAttached(et.contexts),Ne.attachRef=et.componentRef,Ne.route=et.route.value,Ne.outlet&&Ne.outlet.attach(et.componentRef,et.route.value),vc(et.route)}else{const et=function(B){for(let k=B.parent;k;k=k.parent){const O=k.routeConfig;if(O&&O._loadedConfig)return O._loadedConfig;if(O&&O.component)return null}return null}(K.snapshot),jt=et?et.module.componentFactoryResolver:null;Ne.attachRef=null,Ne.route=K,Ne.resolver=jt,Ne.outlet&&Ne.outlet.activateWith(K,jt),this.activateChildRoutes(k,null,Ne.children)}}else this.activateChildRoutes(k,null,z)}}function vc(B){Ys(B.value),B.children.forEach(vc)}class hu{constructor(k,O){this.routes=k,this.module=O}}function vl(B){return"function"==typeof B}function wa(B){return B instanceof xr}const q=Symbol("INITIAL_VALUE");function he(){return(0,Gr.w)(B=>function(...B){let k,O;return(0,Pe.K)(B[B.length-1])&&(O=B.pop()),"function"==typeof B[B.length-1]&&(k=B.pop()),1===B.length&&(0,we.k)(B[0])&&(B=B[0]),(0,Ge.n)(B,O).lift(new Ft(k))}(B.map(k=>k.pipe((0,Ht.q)(1),(0,Ro.O)(q)))).pipe(it((k,O)=>{let z=!1;return O.reduce((K,ae,Ne)=>K!==q?K:(ae===q&&(z=!0),z||!1!==ae&&Ne!==O.length-1&&!wa(ae)?K:ae),k)},q),(0,te.h)(k=>k!==q),(0,Jt.U)(k=>wa(k)?k:!0===k),(0,Ht.q)(1)))}let ze=(()=>{class B{}return B.\u0275fac=function(O){return new(O||B)},B.\u0275cmp=_.Xpm({type:B,selectors:[["ng-component"]],decls:1,vars:0,template:function(O,z){1&O&&_._UZ(0,"router-outlet")},directives:function(){return[ad]},encapsulation:2}),B})();function Gt(B,k=""){for(let O=0;O<B.length;O++){const z=B[O];on(z,Yn(k,z))}}function on(B,k){B.children&&Gt(B.children,k)}function Yn(B,k){return k?B||k.path?B&&!k.path?`${B}/`:!B&&k.path?k.path:`${B}/${k.path}`:"":B}function tr(B){const k=B.children&&B.children.map(tr),O=k?Object.assign(Object.assign({},B),{children:k}):Object.assign({},B);return!O.component&&(k||O.loadChildren)&&O.outlet&&O.outlet!==rn&&(O.component=ze),O}function Jr(B){return B.outlet||rn}function Gn(B,k){const O=B.filter(z=>Jr(z)===k);return O.push(...B.filter(z=>Jr(z)!==k)),O}const pr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function xi(B,k,O){var z;if(""===k.path)return"full"===k.pathMatch&&(B.hasChildren()||O.length>0)?Object.assign({},pr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const ae=(k.matcher||_r)(O,B,k);if(!ae)return Object.assign({},pr);const Ne={};fr(ae.posParams,(jt,Fn)=>{Ne[Fn]=jt.path});const et=ae.consumed.length>0?Object.assign(Object.assign({},Ne),ae.consumed[ae.consumed.length-1].parameters):Ne;return{matched:!0,consumedSegments:ae.consumed,lastChild:ae.consumed.length,parameters:et,positionalParamSegments:null!==(z=ae.posParams)&&void 0!==z?z:{}}}function ei(B,k,O,z,K="corrected"){if(O.length>0&&function(B,k,O){return O.some(z=>Ks(B,k,z)&&Jr(z)!==rn)}(B,O,z)){const Ne=new Xt(k,function(B,k,O,z){const K={};K[rn]=z,z._sourceSegment=B,z._segmentIndexShift=k.length;for(const ae of O)if(""===ae.path&&Jr(ae)!==rn){const Ne=new Xt([],{});Ne._sourceSegment=B,Ne._segmentIndexShift=k.length,K[Jr(ae)]=Ne}return K}(B,k,z,new Xt(O,B.children)));return Ne._sourceSegment=B,Ne._segmentIndexShift=k.length,{segmentGroup:Ne,slicedSegments:[]}}if(0===O.length&&function(B,k,O){return O.some(z=>Ks(B,k,z))}(B,O,z)){const Ne=new Xt(B.segments,function(B,k,O,z,K,ae){const Ne={};for(const et of z)if(Ks(B,O,et)&&!K[Jr(et)]){const jt=new Xt([],{});jt._sourceSegment=B,jt._segmentIndexShift="legacy"===ae?B.segments.length:k.length,Ne[Jr(et)]=jt}return Object.assign(Object.assign({},K),Ne)}(B,k,O,z,B.children,K));return Ne._sourceSegment=B,Ne._segmentIndexShift=k.length,{segmentGroup:Ne,slicedSegments:O}}const ae=new Xt(B.segments,B.children);return ae._sourceSegment=B,ae._segmentIndexShift=k.length,{segmentGroup:ae,slicedSegments:O}}function Ks(B,k,O){return(!(B.hasChildren()||k.length>0)||"full"!==O.pathMatch)&&""===O.path}function sr(B,k,O,z){return!!(Jr(B)===z||z!==rn&&Ks(k,O,B))&&("**"===B.path||xi(k,B,O).matched)}function fu(B,k,O){return 0===k.length&&!B.children[O]}class pu{constructor(k){this.segmentGroup=k||null}}class Af{constructor(k){this.urlTree=k}}function Mf(B){return new We.y(k=>k.error(new pu(B)))}function Rf(B){return new We.y(k=>k.error(new Af(B)))}function Of(B){return new We.y(k=>k.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${B}'`)))}class ui{constructor(k,O,z,K,ae){this.configLoader=O,this.urlSerializer=z,this.urlTree=K,this.config=ae,this.allowRedirects=!0,this.ngModule=k.get(_.h0i)}apply(){const k=ei(this.urlTree.root,[],[],this.config).segmentGroup,O=new Xt(k.segments,k.children);return this.expandSegmentGroup(this.ngModule,this.config,O,rn).pipe((0,Jt.U)(ae=>this.createUrlTree(Do(ae),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Br.K)(ae=>{if(ae instanceof Af)return this.allowRedirects=!1,this.match(ae.urlTree);throw ae instanceof pu?this.noMatchError(ae):ae}))}match(k){return this.expandSegmentGroup(this.ngModule,this.config,k.root,rn).pipe((0,Jt.U)(K=>this.createUrlTree(Do(K),k.queryParams,k.fragment))).pipe((0,Br.K)(K=>{throw K instanceof pu?this.noMatchError(K):K}))}noMatchError(k){return new Error(`Cannot match any routes. URL Segment: '${k.segmentGroup}'`)}createUrlTree(k,O,z){const K=k.segments.length>0?new Xt([],{[rn]:k}):k;return new xr(K,O,z)}expandSegmentGroup(k,O,z,K){return 0===z.segments.length&&z.hasChildren()?this.expandChildren(k,O,z).pipe((0,Jt.U)(ae=>new Xt([],ae))):this.expandSegment(k,z,O,z.segments,K,!0)}expandChildren(k,O,z){const K=[];for(const ae of Object.keys(z.children))"primary"===ae?K.unshift(ae):K.push(ae);return(0,ge.D)(K).pipe((0,Vi.b)(ae=>{const Ne=z.children[ae],et=Gn(O,ae);return this.expandSegmentGroup(k,et,Ne,ae).pipe((0,Jt.U)(jt=>({segment:jt,outlet:ae})))}),it((ae,Ne)=>(ae[Ne.outlet]=Ne.segment,ae),{}),function(B,k){const O=arguments.length>=2;return z=>z.pipe(B?(0,te.h)((K,ae)=>B(K,ae,z)):pi.y,Ve(1),O?un(k):tn(()=>new Be))}())}expandSegment(k,O,z,K,ae,Ne){return(0,ge.D)(z).pipe((0,Vi.b)(et=>this.expandSegmentAgainstRoute(k,O,z,et,K,ae,Ne).pipe((0,Br.K)(Fn=>{if(Fn instanceof pu)return(0,ue.of)(null);throw Fn}))),qn(et=>!!et),(0,Br.K)((et,jt)=>{if(et instanceof Be||"EmptyError"===et.name){if(fu(O,K,ae))return(0,ue.of)(new Xt([],{}));throw new pu(O)}throw et}))}expandSegmentAgainstRoute(k,O,z,K,ae,Ne,et){return sr(K,O,ae,Ne)?void 0===K.redirectTo?this.matchSegmentAgainstRoute(k,O,K,ae,Ne):et&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(k,O,z,K,ae,Ne):Mf(O):Mf(O)}expandSegmentAgainstRouteUsingRedirect(k,O,z,K,ae,Ne){return"**"===K.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(k,z,K,Ne):this.expandRegularSegmentAgainstRouteUsingRedirect(k,O,z,K,ae,Ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(k,O,z,K){const ae=this.applyRedirectCommands([],z.redirectTo,{});return z.redirectTo.startsWith("/")?Rf(ae):this.lineralizeSegments(z,ae).pipe((0,Wn.zg)(Ne=>{const et=new Xt(Ne,{});return this.expandSegment(k,et,O,Ne,K,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(k,O,z,K,ae,Ne){const{matched:et,consumedSegments:jt,lastChild:Fn,positionalParamSegments:rr}=xi(O,K,ae);if(!et)return Mf(O);const oi=this.applyRedirectCommands(jt,K.redirectTo,rr);return K.redirectTo.startsWith("/")?Rf(oi):this.lineralizeSegments(K,oi).pipe((0,Wn.zg)(uo=>this.expandSegment(k,O,z,uo.concat(ae.slice(Fn)),Ne,!1)))}matchSegmentAgainstRoute(k,O,z,K,ae){if("**"===z.path)return z.loadChildren?(z._loadedConfig?(0,ue.of)(z._loadedConfig):this.configLoader.load(k.injector,z)).pipe((0,Jt.U)(uo=>(z._loadedConfig=uo,new Xt(K,{})))):(0,ue.of)(new Xt(K,{}));const{matched:Ne,consumedSegments:et,lastChild:jt}=xi(O,z,K);if(!Ne)return Mf(O);const Fn=K.slice(jt);return this.getChildConfig(k,z,K).pipe((0,Wn.zg)(oi=>{const uo=oi.module,no=oi.routes,{segmentGroup:Nu,slicedSegments:Va}=ei(O,et,Fn,no),Sl=new Xt(Nu.segments,Nu.children);if(0===Va.length&&Sl.hasChildren())return this.expandChildren(uo,no,Sl).pipe((0,Jt.U)(wc=>new Xt(et,wc)));if(0===no.length&&0===Va.length)return(0,ue.of)(new Xt(et,{}));const xl=Jr(z)===ae;return this.expandSegment(uo,Sl,no,Va,xl?rn:ae,!0).pipe((0,Jt.U)(Zl=>new Xt(et.concat(Zl.segments),Zl.children)))}))}getChildConfig(k,O,z){return O.children?(0,ue.of)(new hu(O.children,k)):O.loadChildren?void 0!==O._loadedConfig?(0,ue.of)(O._loadedConfig):this.runCanLoadGuards(k.injector,O,z).pipe((0,Wn.zg)(K=>{return K?this.configLoader.load(k.injector,O).pipe((0,Jt.U)(ae=>(O._loadedConfig=ae,ae))):(B=O,new We.y(k=>k.error(At(`Cannot load children because the guard of the route "path: '${B.path}'" returned false`))));var B})):(0,ue.of)(new hu([],k))}runCanLoadGuards(k,O,z){const K=O.canLoad;if(!K||0===K.length)return(0,ue.of)(!0);const ae=K.map(Ne=>{const et=k.get(Ne);let jt;if((B=et)&&vl(B.canLoad))jt=et.canLoad(O,z);else{if(!vl(et))throw new Error("Invalid CanLoad guard");jt=et(O,z)}var B;return Vn(jt)});return(0,ue.of)(ae).pipe(he(),(0,Wt.b)(Ne=>{if(!wa(Ne))return;const et=At(`Redirecting to "${this.urlSerializer.serialize(Ne)}"`);throw et.url=Ne,et}),(0,Jt.U)(Ne=>!0===Ne))}lineralizeSegments(k,O){let z=[],K=O.root;for(;;){if(z=z.concat(K.segments),0===K.numberOfChildren)return(0,ue.of)(z);if(K.numberOfChildren>1||!K.children[rn])return Of(k.redirectTo);K=K.children[rn]}}applyRedirectCommands(k,O,z){return this.applyRedirectCreatreUrlTree(O,this.urlSerializer.parse(O),k,z)}applyRedirectCreatreUrlTree(k,O,z,K){const ae=this.createSegmentGroup(k,O.root,z,K);return new xr(ae,this.createQueryParams(O.queryParams,this.urlTree.queryParams),O.fragment)}createQueryParams(k,O){const z={};return fr(k,(K,ae)=>{if("string"==typeof K&&K.startsWith(":")){const et=K.substring(1);z[ae]=O[et]}else z[ae]=K}),z}createSegmentGroup(k,O,z,K){const ae=this.createSegments(k,O.segments,z,K);let Ne={};return fr(O.children,(et,jt)=>{Ne[jt]=this.createSegmentGroup(k,et,z,K)}),new Xt(ae,Ne)}createSegments(k,O,z,K){return O.map(ae=>ae.path.startsWith(":")?this.findPosParam(k,ae,K):this.findOrReturn(ae,z))}findPosParam(k,O,z){const K=z[O.path.substring(1)];if(!K)throw new Error(`Cannot redirect to '${k}'. Cannot find '${O.path}'.`);return K}findOrReturn(k,O){let z=0;for(const K of O){if(K.path===k.path)return O.splice(z),K;z++}return k}}function Do(B){const k={};for(const z of Object.keys(B.children)){const ae=Do(B.children[z]);(ae.segments.length>0||ae.hasChildren())&&(k[z]=ae)}return function(B){if(1===B.numberOfChildren&&B.children[rn]){const k=B.children[rn];return new Xt(B.segments.concat(k.segments),k.children)}return B}(new Xt(B.segments,k))}class Kl{constructor(k){this.path=k,this.route=this.path[this.path.length-1]}}class fa{constructor(k,O){this.component=k,this.route=O}}function re(B,k,O){const z=B._root;return ne(z,k?k._root:null,O,[z.value])}function M(B,k,O){const z=function(B){if(!B)return null;for(let k=B.parent;k;k=k.parent){const O=k.routeConfig;if(O&&O._loadedConfig)return O._loadedConfig}return null}(k);return(z?z.module.injector:O).get(B)}function ne(B,k,O,z,K={canDeactivateChecks:[],canActivateChecks:[]}){const ae=qr(k);return B.children.forEach(Ne=>{(function(B,k,O,z,K={canDeactivateChecks:[],canActivateChecks:[]}){const ae=B.value,Ne=k?k.value:null,et=O?O.getContext(B.value.outlet):null;if(Ne&&ae.routeConfig===Ne.routeConfig){const jt=function(B,k,O){if("function"==typeof O)return O(B,k);switch(O){case"pathParamsChange":return!Nn(B.url,k.url);case"pathParamsOrQueryParamsChange":return!Nn(B.url,k.url)||!Zr(B.queryParams,k.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!da(B,k)||!Zr(B.queryParams,k.queryParams);case"paramsChange":default:return!da(B,k)}}(Ne,ae,ae.routeConfig.runGuardsAndResolvers);jt?K.canActivateChecks.push(new Kl(z)):(ae.data=Ne.data,ae._resolvedData=Ne._resolvedData),ne(B,k,ae.component?et?et.children:null:O,z,K),jt&&et&&et.outlet&&et.outlet.isActivated&&K.canDeactivateChecks.push(new fa(et.outlet.component,Ne))}else Ne&&je(k,et,K),K.canActivateChecks.push(new Kl(z)),ne(B,null,ae.component?et?et.children:null:O,z,K)})(Ne,ae[Ne.value.outlet],O,z.concat([Ne.value]),K),delete ae[Ne.value.outlet]}),fr(ae,(Ne,et)=>je(Ne,O.getContext(et),K)),K}function je(B,k,O){const z=qr(B),K=B.value;fr(z,(ae,Ne)=>{je(ae,K.component?k?k.children.getContext(Ne):null:k,O)}),O.canDeactivateChecks.push(new fa(K.component&&k&&k.outlet&&k.outlet.isActivated?k.outlet.component:null,K))}class ci{}function Po(B){return new We.y(k=>k.error(B))}class pa{constructor(k,O,z,K,ae,Ne){this.rootComponentType=k,this.config=O,this.urlTree=z,this.url=K,this.paramsInheritanceStrategy=ae,this.relativeLinkResolution=Ne}recognize(){const k=ei(this.urlTree.root,[],[],this.config.filter(Ne=>void 0===Ne.redirectTo),this.relativeLinkResolution).segmentGroup,O=this.processSegmentGroup(this.config,k,rn);if(null===O)return null;const z=new us([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},rn,this.rootComponentType,null,this.urlTree.root,-1,{}),K=new Fi(z,O),ae=new eo(this.url,K);return this.inheritParamsAndData(ae._root),ae}inheritParamsAndData(k){const O=k.value,z=ao(O,this.paramsInheritanceStrategy);O.params=Object.freeze(z.params),O.data=Object.freeze(z.data),k.children.forEach(K=>this.inheritParamsAndData(K))}processSegmentGroup(k,O,z){return 0===O.segments.length&&O.hasChildren()?this.processChildren(k,O):this.processSegment(k,O,O.segments,z)}processChildren(k,O){const z=[];for(const ae of Object.keys(O.children)){const Ne=O.children[ae],et=Gn(k,ae),jt=this.processSegmentGroup(et,Ne,ae);if(null===jt)return null;z.push(...jt)}const K=cs(z);return K.sort((k,O)=>k.value.outlet===rn?-1:O.value.outlet===rn?1:k.value.outlet.localeCompare(O.value.outlet)),K}processSegment(k,O,z,K){for(const ae of k){const Ne=this.processSegmentAgainstRoute(ae,O,z,K);if(null!==Ne)return Ne}return fu(O,z,K)?[]:null}processSegmentAgainstRoute(k,O,z,K){if(k.redirectTo||!sr(k,O,z,K))return null;let ae,Ne=[],et=[];if("**"===k.path){const no=z.length>0?or(z).parameters:{};ae=new us(z,no,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Lo(k),Jr(k),k.component,k,ga(O),ja(O)+z.length,id(k))}else{const no=xi(O,k,z);if(!no.matched)return null;Ne=no.consumedSegments,et=z.slice(no.lastChild),ae=new us(Ne,no.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Lo(k),Jr(k),k.component,k,ga(O),ja(O)+Ne.length,id(k))}const jt=(B=k).children?B.children:B.loadChildren?B._loadedConfig.routes:[],{segmentGroup:Fn,slicedSegments:rr}=ei(O,Ne,et,jt.filter(no=>void 0===no.redirectTo),this.relativeLinkResolution);var B;if(0===rr.length&&Fn.hasChildren()){const no=this.processChildren(jt,Fn);return null===no?null:[new Fi(ae,no)]}if(0===jt.length&&0===rr.length)return[new Fi(ae,[])];const oi=Jr(k)===K,uo=this.processSegment(jt,Fn,rr,oi?rn:K);return null===uo?null:[new Fi(ae,uo)]}}function to(B){const k=B.value.routeConfig;return k&&""===k.path&&void 0===k.redirectTo}function cs(B){const k=[],O=new Set;for(const z of B){if(!to(z)){k.push(z);continue}const K=k.find(ae=>z.value.routeConfig===ae.value.routeConfig);void 0!==K?(K.children.push(...z.children),O.add(K)):k.push(z)}for(const z of O){const K=cs(z.children);k.push(new Fi(z.value,K))}return k.filter(z=>!O.has(z))}function ga(B){let k=B;for(;k._sourceSegment;)k=k._sourceSegment;return k}function ja(B){let k=B,O=k._segmentIndexShift?k._segmentIndexShift:0;for(;k._sourceSegment;)k=k._sourceSegment,O+=k._segmentIndexShift?k._segmentIndexShift:0;return O-1}function Lo(B){return B.data||{}}function id(B){return B.resolve||{}}function Dr(B){return(0,Gr.w)(k=>{const O=B(k);return O?(0,ge.D)(O).pipe((0,Jt.U)(()=>k)):(0,ue.of)(k)})}class bl extends class{shouldDetach(k){return!1}store(k,O){}shouldAttach(k){return!1}retrieve(k){return null}shouldReuseRoute(k,O){return k.routeConfig===O.routeConfig}}{}const ds=new _.OlP("ROUTES");class Is{constructor(k,O,z,K){this.loader=k,this.compiler=O,this.onLoadStartListener=z,this.onLoadEndListener=K}load(k,O){if(O._loader$)return O._loader$;this.onLoadStartListener&&this.onLoadStartListener(O);const K=this.loadModuleFactory(O.loadChildren).pipe((0,Jt.U)(ae=>{this.onLoadEndListener&&this.onLoadEndListener(O);const Ne=ae.create(k);return new hu(xo(Ne.injector.get(ds,void 0,_.XFs.Self|_.XFs.Optional)).map(tr),Ne)}),(0,Br.K)(ae=>{throw O._loader$=void 0,ae}));return O._loader$=new Ue.c(K,()=>new ht.xQ).pipe((0,io.x)()),O._loader$}loadModuleFactory(k){return"string"==typeof k?(0,ge.D)(this.loader.load(k)):Vn(k()).pipe((0,Wn.zg)(O=>O instanceof _.YKP?(0,ue.of)(O):(0,ge.D)(this.compiler.compileModuleAsync(O))))}}class _o{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ku,this.attachRef=null}}class ku{constructor(){this.contexts=new Map}onChildOutletCreated(k,O){const z=this.getOrCreateContext(k);z.outlet=O,this.contexts.set(k,z)}onChildOutletDestroyed(k){const O=this.getContext(k);O&&(O.outlet=null)}onOutletDeactivated(){const k=this.contexts;return this.contexts=new Map,k}onOutletReAttached(k){this.contexts=k}getOrCreateContext(k){let O=this.getContext(k);return O||(O=new _o,this.contexts.set(k,O)),O}getContext(k){return this.contexts.get(k)||null}}class od{shouldProcessUrl(k){return!0}extract(k){return k}merge(k,O){return k}}function Ua(B){throw B}function Cl(B,k,O){return k.parse("/")}function Xd(B,k){return(0,ue.of)(null)}const hb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Df={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ma=(()=>{class B{constructor(O,z,K,ae,Ne,et,jt,Fn){this.rootComponentType=O,this.urlSerializer=z,this.rootContexts=K,this.location=ae,this.config=Fn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ht.xQ,this.errorHandler=Ua,this.malformedUriErrorHandler=Cl,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Xd,afterPreactivation:Xd},this.urlHandlingStrategy=new od,this.routeReuseStrategy=new bl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ne.get(_.h0i),this.console=Ne.get(_.c2e);const uo=Ne.get(_.R0b);this.isNgZoneEnabled=uo instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(Fn),this.currentUrlTree=new xr(new Xt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Is(et,jt,no=>this.triggerEvent(new Sn(no)),no=>this.triggerEvent(new ur(no))),this.routerState=Xo(this.currentUrlTree,this.rootComponentType),this.transitions=new Me.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var O;return null===(O=this.location.getState())||void 0===O?void 0:O.\u0275routerPageId}setupNavigations(O){const z=this.events;return O.pipe((0,te.h)(K=>0!==K.id),(0,Jt.U)(K=>Object.assign(Object.assign({},K),{extractedUrl:this.urlHandlingStrategy.extract(K.rawUrl)})),(0,Gr.w)(K=>{let ae=!1,Ne=!1;return(0,ue.of)(K).pipe((0,Wt.b)(et=>{this.currentNavigation={id:et.id,initialUrl:et.currentRawUrl,extractedUrl:et.extractedUrl,trigger:et.source,extras:et.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Gr.w)(et=>{const jt=!this.navigated||et.extractedUrl.toString()!==this.browserUrlTree.toString(),Fn=("reload"===this.onSameUrlNavigation||jt)&&this.urlHandlingStrategy.shouldProcessUrl(et.rawUrl);if(tg(et.source)&&(this.browserUrlTree=et.rawUrl),Fn)return(0,ue.of)(et).pipe((0,Gr.w)(rr=>{const oi=this.transitions.getValue();return z.next(new Et(rr.id,this.serializeUrl(rr.extractedUrl),rr.source,rr.restoredState)),oi!==this.transitions.getValue()?_t.E:Promise.resolve(rr)}),function(B,k,O,z){return(0,Gr.w)(K=>function(B,k,O,z,K){return new ui(B,k,O,z,K).apply()}(B,k,O,K.extractedUrl,z).pipe((0,Jt.U)(ae=>Object.assign(Object.assign({},K),{urlAfterRedirects:ae}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Wt.b)(rr=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:rr.urlAfterRedirects})}),function(B,k,O,z,K){return(0,Wn.zg)(ae=>function(B,k,O,z,K="emptyOnly",ae="legacy"){try{const Ne=new pa(B,k,O,z,K,ae).recognize();return null===Ne?Po(new ci):(0,ue.of)(Ne)}catch(Ne){return Po(Ne)}}(B,k,ae.urlAfterRedirects,O(ae.urlAfterRedirects),z,K).pipe((0,Jt.U)(Ne=>Object.assign(Object.assign({},ae),{targetSnapshot:Ne}))))}(this.rootComponentType,this.config,rr=>this.serializeUrl(rr),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Wt.b)(rr=>{"eager"===this.urlUpdateStrategy&&(rr.extras.skipLocationChange||this.setBrowserUrl(rr.urlAfterRedirects,rr),this.browserUrlTree=rr.urlAfterRedirects);const oi=new ke(rr.id,this.serializeUrl(rr.extractedUrl),this.serializeUrl(rr.urlAfterRedirects),rr.targetSnapshot);z.next(oi)}));if(jt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:oi,extractedUrl:uo,source:no,restoredState:Nu,extras:Va}=et,Sl=new Et(oi,this.serializeUrl(uo),no,Nu);z.next(Sl);const xl=Xo(uo,this.rootComponentType).snapshot;return(0,ue.of)(Object.assign(Object.assign({},et),{targetSnapshot:xl,urlAfterRedirects:uo,extras:Object.assign(Object.assign({},Va),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=et.rawUrl,this.browserUrlTree=et.urlAfterRedirects,et.resolve(null),_t.E}),Dr(et=>{const{targetSnapshot:jt,id:Fn,extractedUrl:rr,rawUrl:oi,extras:{skipLocationChange:uo,replaceUrl:no}}=et;return this.hooks.beforePreactivation(jt,{navigationId:Fn,appliedUrlTree:rr,rawUrlTree:oi,skipLocationChange:!!uo,replaceUrl:!!no})}),(0,Wt.b)(et=>{const jt=new mt(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(et.urlAfterRedirects),et.targetSnapshot);this.triggerEvent(jt)}),(0,Jt.U)(et=>Object.assign(Object.assign({},et),{guards:re(et.targetSnapshot,et.currentSnapshot,this.rootContexts)})),function(B,k){return(0,Wn.zg)(O=>{const{targetSnapshot:z,currentSnapshot:K,guards:{canActivateChecks:ae,canDeactivateChecks:Ne}}=O;return 0===Ne.length&&0===ae.length?(0,ue.of)(Object.assign(Object.assign({},O),{guardsResult:!0})):function(B,k,O,z){return(0,ge.D)(B).pipe((0,Wn.zg)(K=>function(B,k,O,z,K){const ae=k&&k.routeConfig?k.routeConfig.canDeactivate:null;if(!ae||0===ae.length)return(0,ue.of)(!0);const Ne=ae.map(et=>{const jt=M(et,k,K);let Fn;if(function(B){return B&&vl(B.canDeactivate)}(jt))Fn=Vn(jt.canDeactivate(B,k,O,z));else{if(!vl(jt))throw new Error("Invalid CanDeactivate guard");Fn=Vn(jt(B,k,O,z))}return Fn.pipe(qn())});return(0,ue.of)(Ne).pipe(he())}(K.component,K.route,O,k,z)),qn(K=>!0!==K,!0))}(Ne,z,K,B).pipe((0,Wn.zg)(et=>et&&function(B){return"boolean"==typeof B}(et)?function(B,k,O,z){return(0,ge.D)(k).pipe((0,Vi.b)(K=>(0,qe.z)(function(B,k){return null!==B&&k&&k(new Mi(B)),(0,ue.of)(!0)}(K.route.parent,z),function(B,k){return null!==B&&k&&k(new kr(B)),(0,ue.of)(!0)}(K.route,z),function(B,k,O){const z=k[k.length-1],ae=k.slice(0,k.length-1).reverse().map(Ne=>function(B){const k=B.routeConfig?B.routeConfig.canActivateChild:null;return k&&0!==k.length?{node:B,guards:k}:null}(Ne)).filter(Ne=>null!==Ne).map(Ne=>(0,Ye.P)(()=>{const et=Ne.guards.map(jt=>{const Fn=M(jt,Ne.node,O);let rr;if(function(B){return B&&vl(B.canActivateChild)}(Fn))rr=Vn(Fn.canActivateChild(z,B));else{if(!vl(Fn))throw new Error("Invalid CanActivateChild guard");rr=Vn(Fn(z,B))}return rr.pipe(qn())});return(0,ue.of)(et).pipe(he())}));return(0,ue.of)(ae).pipe(he())}(B,K.path,O),function(B,k,O){const z=k.routeConfig?k.routeConfig.canActivate:null;if(!z||0===z.length)return(0,ue.of)(!0);const K=z.map(ae=>(0,Ye.P)(()=>{const Ne=M(ae,k,O);let et;if(function(B){return B&&vl(B.canActivate)}(Ne))et=Vn(Ne.canActivate(k,B));else{if(!vl(Ne))throw new Error("Invalid CanActivate guard");et=Vn(Ne(k,B))}return et.pipe(qn())}));return(0,ue.of)(K).pipe(he())}(B,K.route,O))),qn(K=>!0!==K,!0))}(z,ae,B,k):(0,ue.of)(et)),(0,Jt.U)(et=>Object.assign(Object.assign({},O),{guardsResult:et})))})}(this.ngModule.injector,et=>this.triggerEvent(et)),(0,Wt.b)(et=>{if(wa(et.guardsResult)){const Fn=At(`Redirecting to "${this.serializeUrl(et.guardsResult)}"`);throw Fn.url=et.guardsResult,Fn}const jt=new Bt(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(et.urlAfterRedirects),et.targetSnapshot,!!et.guardsResult);this.triggerEvent(jt)}),(0,te.h)(et=>!!et.guardsResult||(this.restoreHistory(et),this.cancelNavigationTransition(et,""),!1)),Dr(et=>{if(et.guards.canActivateChecks.length)return(0,ue.of)(et).pipe((0,Wt.b)(jt=>{const Fn=new vn(jt.id,this.serializeUrl(jt.extractedUrl),this.serializeUrl(jt.urlAfterRedirects),jt.targetSnapshot);this.triggerEvent(Fn)}),(0,Gr.w)(jt=>{let Fn=!1;return(0,ue.of)(jt).pipe(function(B,k){return(0,Wn.zg)(O=>{const{targetSnapshot:z,guards:{canActivateChecks:K}}=O;if(!K.length)return(0,ue.of)(O);let ae=0;return(0,ge.D)(K).pipe((0,Vi.b)(Ne=>function(B,k,O,z){return function(B,k,O,z){const K=Object.keys(B);if(0===K.length)return(0,ue.of)({});const ae={};return(0,ge.D)(K).pipe((0,Wn.zg)(Ne=>function(B,k,O,z){const K=M(B,k,z);return Vn(K.resolve?K.resolve(k,O):K(k,O))}(B[Ne],k,O,z).pipe((0,Wt.b)(et=>{ae[Ne]=et}))),Ve(1),(0,Wn.zg)(()=>Object.keys(ae).length===K.length?(0,ue.of)(ae):_t.E))}(B._resolve,B,k,z).pipe((0,Jt.U)(ae=>(B._resolvedData=ae,B.data=Object.assign(Object.assign({},B.data),ao(B,O).resolve),null)))}(Ne.route,z,B,k)),(0,Wt.b)(()=>ae++),Ve(1),(0,Wn.zg)(Ne=>ae===K.length?(0,ue.of)(O):_t.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Wt.b)({next:()=>Fn=!0,complete:()=>{Fn||(this.restoreHistory(jt),this.cancelNavigationTransition(jt,"At least one route resolver didn't emit any value."))}}))}),(0,Wt.b)(jt=>{const Fn=new Yt(jt.id,this.serializeUrl(jt.extractedUrl),this.serializeUrl(jt.urlAfterRedirects),jt.targetSnapshot);this.triggerEvent(Fn)}))}),Dr(et=>{const{targetSnapshot:jt,id:Fn,extractedUrl:rr,rawUrl:oi,extras:{skipLocationChange:uo,replaceUrl:no}}=et;return this.hooks.afterPreactivation(jt,{navigationId:Fn,appliedUrlTree:rr,rawUrlTree:oi,skipLocationChange:!!uo,replaceUrl:!!no})}),(0,Jt.U)(et=>{const jt=function(B,k,O){const z=Oi(B,k._root,O?O._root:void 0);return new Ts(z,k)}(this.routeReuseStrategy,et.targetSnapshot,et.currentRouterState);return Object.assign(Object.assign({},et),{targetRouterState:jt})}),(0,Wt.b)(et=>{this.currentUrlTree=et.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,et.rawUrl),this.routerState=et.targetRouterState,"deferred"===this.urlUpdateStrategy&&(et.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,et),this.browserUrlTree=et.urlAfterRedirects)}),((B,k,O)=>(0,Jt.U)(z=>(new du(k,z.targetRouterState,z.currentRouterState,O).activate(B),z)))(this.rootContexts,this.routeReuseStrategy,et=>this.triggerEvent(et)),(0,Wt.b)({next(){ae=!0},complete(){ae=!0}}),(0,wr.x)(()=>{if(!ae&&!Ne){const et=`Navigation ID ${K.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(K),this.cancelNavigationTransition(K,et)):this.cancelNavigationTransition(K,et)}this.currentNavigation=null}),(0,Br.K)(et=>{if(Ne=!0,function(B){return B&&B[Ze]}(et)){const jt=wa(et.url);jt||(this.navigated=!0,this.restoreHistory(K,!0));const Fn=new rt(K.id,this.serializeUrl(K.extractedUrl),et.message);z.next(Fn),jt?setTimeout(()=>{const rr=this.urlHandlingStrategy.merge(et.url,this.rawUrlTree),oi={skipLocationChange:K.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||tg(K.source)};this.scheduleNavigation(rr,"imperative",null,oi,{resolve:K.resolve,reject:K.reject,promise:K.promise})},0):K.resolve(!1)}else{this.restoreHistory(K,!0);const jt=new Ae(K.id,this.serializeUrl(K.extractedUrl),et);z.next(jt);try{K.resolve(this.errorHandler(et))}catch(Fn){K.reject(Fn)}}return _t.E}))}))}resetRootComponentType(O){this.rootComponentType=O,this.routerState.root.component=this.rootComponentType}getTransition(){const O=this.transitions.value;return O.urlAfterRedirects=this.browserUrlTree,O}setTransition(O){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),O))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(O=>{const z=this.extractLocationChangeInfoFromEvent(O);this.shouldScheduleNavigation(this.lastLocationChangeInfo,z)&&setTimeout(()=>{const{source:K,state:ae,urlTree:Ne}=z,et={replaceUrl:!0};if(ae){const jt=Object.assign({},ae);delete jt.navigationId,delete jt.\u0275routerPageId,0!==Object.keys(jt).length&&(et.state=jt)}this.scheduleNavigation(Ne,K,ae,et)},0),this.lastLocationChangeInfo=z}))}extractLocationChangeInfoFromEvent(O){var z;return{source:"popstate"===O.type?"popstate":"hashchange",urlTree:this.parseUrl(O.url),state:(null===(z=O.state)||void 0===z?void 0:z.navigationId)?O.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(O,z){if(!O)return!0;const K=z.urlTree.toString()===O.urlTree.toString();return z.transitionId!==O.transitionId||!K||!("hashchange"===z.source&&"popstate"===O.source||"popstate"===z.source&&"hashchange"===O.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(O){this.events.next(O)}resetConfig(O){Gt(O),this.config=O.map(tr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(O,z={}){const{relativeTo:K,queryParams:ae,fragment:Ne,queryParamsHandling:et,preserveFragment:jt}=z,Fn=K||this.routerState.root,rr=jt?this.currentUrlTree.fragment:Ne;let oi=null;switch(et){case"merge":oi=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ae);break;case"preserve":oi=this.currentUrlTree.queryParams;break;default:oi=ae||null}return null!==oi&&(oi=this.removeEmptyProps(oi)),function(B,k,O,z,K){if(0===O.length)return Du(k.root,k.root,k,z,K);const ae=function(B){if("string"==typeof B[0]&&1===B.length&&"/"===B[0])return new gl(!0,0,B);let k=0,O=!1;const z=B.reduce((K,ae,Ne)=>{if("object"==typeof ae&&null!=ae){if(ae.outlets){const et={};return fr(ae.outlets,(jt,Fn)=>{et[Fn]="string"==typeof jt?jt.split("/"):jt}),[...K,{outlets:et}]}if(ae.segmentPath)return[...K,ae.segmentPath]}return"string"!=typeof ae?[...K,ae]:0===Ne?(ae.split("/").forEach((et,jt)=>{0==jt&&"."===et||(0==jt&&""===et?O=!0:".."===et?k++:""!=et&&K.push(et))}),K):[...K,ae]},[]);return new gl(O,k,z)}(O);if(ae.toRoot())return Du(k.root,new Xt([],{}),k,z,K);const Ne=function(B,k,O){if(B.isAbsolute)return new ha(k.root,!0,0);if(-1===O.snapshot._lastPathIndex){const ae=O.snapshot._urlSegment;return new ha(ae,ae===k.root,0)}const z=Ru(B.commands[0])?0:1;return function(B,k,O){let z=B,K=k,ae=O;for(;ae>K;){if(ae-=K,z=z.parent,!z)throw new Error("Invalid number of '../'");K=z.segments.length}return new ha(z,!1,K-ae)}(O.snapshot._urlSegment,O.snapshot._lastPathIndex+z,B.numberOfDoubleDots)}(ae,k,B),et=Ne.processChildren?ml(Ne.segmentGroup,Ne.index,ae.commands):gc(Ne.segmentGroup,Ne.index,ae.commands);return Du(Ne.segmentGroup,et,k,z,K)}(Fn,this.currentUrlTree,O,oi,null!=rr?rr:null)}navigateByUrl(O,z={skipLocationChange:!1}){const K=wa(O)?O:this.parseUrl(O),ae=this.urlHandlingStrategy.merge(K,this.rawUrlTree);return this.scheduleNavigation(ae,"imperative",null,z)}navigate(O,z={skipLocationChange:!1}){return function(B){for(let k=0;k<B.length;k++){const O=B[k];if(null==O)throw new Error(`The requested path contains ${O} segment at index ${k}`)}}(O),this.navigateByUrl(this.createUrlTree(O,z),z)}serializeUrl(O){return this.urlSerializer.serialize(O)}parseUrl(O){let z;try{z=this.urlSerializer.parse(O)}catch(K){z=this.malformedUriErrorHandler(K,this.urlSerializer,O)}return z}isActive(O,z){let K;if(K=!0===z?Object.assign({},hb):!1===z?Object.assign({},Df):z,wa(O))return $s(this.currentUrlTree,O,K);const ae=this.parseUrl(O);return $s(this.currentUrlTree,ae,K)}removeEmptyProps(O){return Object.keys(O).reduce((z,K)=>{const ae=O[K];return null!=ae&&(z[K]=ae),z},{})}processNavigations(){this.navigations.subscribe(O=>{this.navigated=!0,this.lastSuccessfulId=O.id,this.currentPageId=O.targetPageId,this.events.next(new zt(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,O.resolve(!0)},O=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(O,z,K,ae,Ne){var et,jt;if(this.disposed)return Promise.resolve(!1);const Fn=this.getTransition(),rr=tg(z)&&Fn&&!tg(Fn.source),no=(this.lastSuccessfulId===Fn.id||this.currentNavigation?Fn.rawUrl:Fn.urlAfterRedirects).toString()===O.toString();if(rr&&no)return Promise.resolve(!0);let Nu,Va,Sl;Ne?(Nu=Ne.resolve,Va=Ne.reject,Sl=Ne.promise):Sl=new Promise((Zl,wc)=>{Nu=Zl,Va=wc});const xl=++this.navigationId;let fo;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(K=this.location.getState()),fo=K&&K.\u0275routerPageId?K.\u0275routerPageId:ae.replaceUrl||ae.skipLocationChange?null!==(et=this.browserPageId)&&void 0!==et?et:0:(null!==(jt=this.browserPageId)&&void 0!==jt?jt:0)+1):fo=0,this.setTransition({id:xl,targetPageId:fo,source:z,restoredState:K,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:O,extras:ae,resolve:Nu,reject:Va,promise:Sl,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Sl.catch(Zl=>Promise.reject(Zl))}setBrowserUrl(O,z){const K=this.urlSerializer.serialize(O),ae=Object.assign(Object.assign({},z.extras.state),this.generateNgRouterState(z.id,z.targetPageId));this.location.isCurrentPathEqualTo(K)||z.extras.replaceUrl?this.location.replaceState(K,"",ae):this.location.go(K,"",ae)}restoreHistory(O,z=!1){var K,ae;if("computed"===this.canceledNavigationResolution){const Ne=this.currentPageId-O.targetPageId;"popstate"!==O.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(K=this.currentNavigation)||void 0===K?void 0:K.finalUrl)||0===Ne?this.currentUrlTree===(null===(ae=this.currentNavigation)||void 0===ae?void 0:ae.finalUrl)&&0===Ne&&(this.resetState(O),this.browserUrlTree=O.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ne)}else"replace"===this.canceledNavigationResolution&&(z&&this.resetState(O),this.resetUrlToCurrentUrlTree())}resetState(O){this.routerState=O.currentRouterState,this.currentUrlTree=O.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,O.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(O,z){const K=new rt(O.id,this.serializeUrl(O.extractedUrl),z);this.triggerEvent(K),O.resolve(!1)}generateNgRouterState(O,z){return"computed"===this.canceledNavigationResolution?{navigationId:O,\u0275routerPageId:z}:{navigationId:O}}}return B.\u0275fac=function(O){return new(O||B)(_.LFG(_.DyG),_.LFG(so),_.LFG(ku),_.LFG(Q.Ye),_.LFG(_.zs3),_.LFG(_.v3s),_.LFG(_.Sil),_.LFG(void 0))},B.\u0275prov=_.Yz7({token:B,factory:B.\u0275fac}),B})();function tg(B){return"imperative"!==B}let ad=(()=>{class B{constructor(O,z,K,ae,Ne){this.parentContexts=O,this.location=z,this.resolver=K,this.changeDetector=Ne,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.name=ae||rn,O.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const O=this.parentContexts.getContext(this.name);O&&O.route&&(O.attachRef?this.attach(O.attachRef,O.route):this.activateWith(O.route,O.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const O=this.activated;return this.activated=null,this._activatedRoute=null,O}attach(O,z){this.activated=O,this._activatedRoute=z,this.location.insert(O.hostView)}deactivate(){if(this.activated){const O=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(O)}}activateWith(O,z){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=O;const Ne=(z=z||this.resolver).resolveComponentFactory(O._futureSnapshot.routeConfig.component),et=this.parentContexts.getOrCreateContext(this.name).children,jt=new rg(O,et,this.location.injector);this.activated=this.location.createComponent(Ne,this.location.length,jt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return B.\u0275fac=function(O){return new(O||B)(_.Y36(ku),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},B.\u0275dir=_.lG2({type:B,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),B})();class rg{constructor(k,O,z){this.route=k,this.childContexts=O,this.parent=z}get(k,O){return k===ho?this.route:k===ku?this.childContexts:this.parent.get(k,O)}}class Gm{}class Lf{preload(k,O){return(0,ue.of)(null)}}let _c=(()=>{class B{constructor(O,z,K,ae,Ne){this.router=O,this.injector=ae,this.preloadingStrategy=Ne,this.loader=new Is(z,K,Fn=>O.triggerEvent(new Sn(Fn)),Fn=>O.triggerEvent(new ur(Fn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,te.h)(O=>O instanceof zt),(0,Vi.b)(()=>this.preload())).subscribe(()=>{})}preload(){const O=this.injector.get(_.h0i);return this.processRoutes(O,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(O,z){const K=[];for(const ae of z)if(ae.loadChildren&&!ae.canLoad&&ae._loadedConfig){const Ne=ae._loadedConfig;K.push(this.processRoutes(Ne.module,Ne.routes))}else ae.loadChildren&&!ae.canLoad?K.push(this.preloadConfig(O,ae)):ae.children&&K.push(this.processRoutes(O,ae.children));return(0,ge.D)(K).pipe((0,en.J)(),(0,Jt.U)(ae=>{}))}preloadConfig(O,z){return this.preloadingStrategy.preload(z,()=>(z._loadedConfig?(0,ue.of)(z._loadedConfig):this.loader.load(O.injector,z)).pipe((0,Wn.zg)(ae=>(z._loadedConfig=ae,this.processRoutes(ae.module,ae.routes)))))}}return B.\u0275fac=function(O){return new(O||B)(_.LFG(ma),_.LFG(_.v3s),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(Gm))},B.\u0275prov=_.Yz7({token:B,factory:B.\u0275fac}),B})(),kf=(()=>{class B{constructor(O,z,K={}){this.router=O,this.viewportScroller=z,this.options=K,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},K.scrollPositionRestoration=K.scrollPositionRestoration||"disabled",K.anchorScrolling=K.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(O=>{O instanceof Et?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=O.navigationTrigger,this.restoredId=O.restoredState?O.restoredState.navigationId:0):O instanceof zt&&(this.lastId=O.id,this.scheduleScrollEvent(O,this.router.parseUrl(O.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(O=>{O instanceof Cr&&(O.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(O.position):O.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(O.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(O,z){this.router.triggerEvent(new Cr(O,"popstate"===this.lastSource?this.store[this.restoredId]:null,z))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return B.\u0275fac=function(O){return new(O||B)(_.LFG(ma),_.LFG(Q.EM),_.LFG(void 0))},B.\u0275prov=_.Yz7({token:B,factory:B.\u0275fac}),B})();const Ec=new _.OlP("ROUTER_CONFIGURATION"),ig=new _.OlP("ROUTER_FORROOT_GUARD"),pb=[Q.Ye,{provide:so,useClass:vi},{provide:ma,useFactory:function(B,k,O,z,K,ae,Ne,et={},jt,Fn){const rr=new ma(null,B,k,O,z,K,ae,xo(Ne));return jt&&(rr.urlHandlingStrategy=jt),Fn&&(rr.routeReuseStrategy=Fn),function(B,k){B.errorHandler&&(k.errorHandler=B.errorHandler),B.malformedUriErrorHandler&&(k.malformedUriErrorHandler=B.malformedUriErrorHandler),B.onSameUrlNavigation&&(k.onSameUrlNavigation=B.onSameUrlNavigation),B.paramsInheritanceStrategy&&(k.paramsInheritanceStrategy=B.paramsInheritanceStrategy),B.relativeLinkResolution&&(k.relativeLinkResolution=B.relativeLinkResolution),B.urlUpdateStrategy&&(k.urlUpdateStrategy=B.urlUpdateStrategy)}(et,rr),et.enableTracing&&rr.events.subscribe(oi=>{var uo,no;null===(uo=console.group)||void 0===uo||uo.call(console,`Router Event: ${oi.constructor.name}`),console.log(oi.toString()),console.log(oi),null===(no=console.groupEnd)||void 0===no||no.call(console)}),rr},deps:[so,ku,Q.Ye,_.zs3,_.v3s,_.Sil,ds,Ec,[class{},new _.FiY],[class{},new _.FiY]]},ku,{provide:ho,useFactory:function(B){return B.routerState.root},deps:[ma]},{provide:_.v3s,useClass:_.EAV},_c,Lf,class{preload(k,O){return O().pipe((0,Br.K)(()=>(0,ue.of)(null)))}},{provide:Ec,useValue:{enableTracing:!1}}];function Kd(){return new _.PXZ("Router",ma)}let Nf=(()=>{class B{constructor(O,z){}static forRoot(O,z){return{ngModule:B,providers:[pb,ld(O),{provide:ig,useFactory:bc,deps:[[ma,new _.FiY,new _.tp0]]},{provide:Ec,useValue:z||{}},{provide:Q.S$,useFactory:Bm,deps:[Q.lw,[new _.tBr(Q.mr),new _.FiY],Ec]},{provide:kf,useFactory:og,deps:[ma,Q.EM,Ec]},{provide:Gm,useExisting:z&&z.preloadingStrategy?z.preloadingStrategy:Lf},{provide:_.PXZ,multi:!0,useFactory:Kd},[sg,{provide:_.ip1,multi:!0,useFactory:cy,deps:[sg]},{provide:Vm,useFactory:gb,deps:[sg]},{provide:_.tb,multi:!0,useExisting:Vm}]]}}static forChild(O){return{ngModule:B,providers:[ld(O)]}}}return B.\u0275fac=function(O){return new(O||B)(_.LFG(ig,8),_.LFG(ma,8))},B.\u0275mod=_.oAB({type:B}),B.\u0275inj=_.cJS({}),B})();function og(B,k,O){return O.scrollOffset&&k.setOffset(O.scrollOffset),new kf(B,k,O)}function Bm(B,k,O={}){return O.useHash?new Q.Do(B,k):new Q.b0(B,k)}function bc(B){return"guarded"}function ld(B){return[{provide:_.deG,multi:!0,useValue:B},{provide:ds,multi:!0,useValue:B}]}let sg=(()=>{class B{constructor(O){this.injector=O,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ht.xQ}appInitializer(){return this.injector.get(Q.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let z=null;const K=new Promise(et=>z=et),ae=this.injector.get(ma),Ne=this.injector.get(Ec);return"disabled"===Ne.initialNavigation?(ae.setUpLocationChangeListener(),z(!0)):"enabled"===Ne.initialNavigation||"enabledBlocking"===Ne.initialNavigation?(ae.hooks.afterPreactivation=()=>this.initNavigation?(0,ue.of)(null):(this.initNavigation=!0,z(!0),this.resultOfPreactivationDone),ae.initialNavigation()):z(!0),K})}bootstrapListener(O){const z=this.injector.get(Ec),K=this.injector.get(_c),ae=this.injector.get(kf),Ne=this.injector.get(ma),et=this.injector.get(_.z2F);O===et.components[0]&&(("enabledNonBlocking"===z.initialNavigation||void 0===z.initialNavigation)&&Ne.initialNavigation(),K.setUpPreloading(),ae.init(),Ne.resetRootComponentType(et.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return B.\u0275fac=function(O){return new(O||B)(_.LFG(_.zs3))},B.\u0275prov=_.Yz7({token:B,factory:B.\u0275fac}),B})();function cy(B){return B.appInitializer.bind(B)}function gb(B){return B.bootstrapListener.bind(B)}const Vm=new _.OlP("Router Initializer")},3021:function(Tt){Tt.exports=function(){"use strict";function ee(Et){return"function"==typeof Et}var _=Array.isArray?Array.isArray:function(Et){return"[object Array]"===Object.prototype.toString.call(Et)},Pe=0,we=void 0,Ke=void 0,_e=function(zt,rt){ue[Pe]=zt,ue[Pe+1]=rt,2===(Pe+=2)&&(Ke?Ke(Me):Ye())};var We="undefined"!=typeof window?window:void 0,ve=We||{},Ge=ve.MutationObserver||ve.WebKitMutationObserver,Ie="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),at="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function ge(){var Et=setTimeout;return function(){return Et(Me,1)}}var ue=new Array(1e3);function Me(){for(var Et=0;Et<Pe;Et+=2)(0,ue[Et])(ue[Et+1]),ue[Et]=void 0,ue[Et+1]=void 0;Pe=0}var Et,zt,rt,Ye=void 0;function _t(Et,zt){var rt=this,Ae=new this.constructor(it);void 0===Ae[ht]&&Gr(Ae);var ke=rt._state;if(ke){var mt=arguments[ke-1];_e(function(){return cn(ke,Ae,mt,rt._result)})}else hr(rt,Ae,Et,zt);return Ae}function Ue(Et){if(Et&&"object"==typeof Et&&Et.constructor===this)return Et;var rt=new this(it);return mn(rt,Et),rt}Ye=Ie?function(){return process.nextTick(Me)}:Ge?(Et=0,zt=new Ge(Me),rt=document.createTextNode(""),zt.observe(rt,{characterData:!0}),function(){rt.data=Et=++Et%2}):at?function(){var Et=new MessageChannel;return Et.port1.onmessage=Me,function(){return Et.port2.postMessage(0)}}():void 0===We?function(){try{var Et=Function("return this")().require("vertx");return void 0!==(we=Et.runOnLoop||Et.runOnContext)?function(){we(Me)}:ge()}catch(zt){return ge()}}():ge();var ht=Math.random().toString(36).substring(2);function it(){}var It=void 0;function Ot(Et,zt,rt){zt.constructor===Et.constructor&&rt===_t&&zt.constructor.resolve===Ue?function(Et,zt){1===zt._state?un(Et,zt._result):2===zt._state?Rr(Et,zt._result):hr(zt,void 0,function(rt){return mn(Et,rt)},function(rt){return Rr(Et,rt)})}(Et,zt):void 0===rt?un(Et,zt):ee(rt)?function(Et,zt,rt){_e(function(Ae){var ke=!1,mt=function(Et,zt,rt,Ae){try{Et.call(zt,rt,Ae)}catch(ke){return ke}}(rt,zt,function(Bt){ke||(ke=!0,zt!==Bt?mn(Ae,Bt):un(Ae,Bt))},function(Bt){ke||(ke=!0,Rr(Ae,Bt))});!ke&&mt&&(ke=!0,Rr(Ae,mt))},Et)}(Et,zt,rt):un(Et,zt)}function mn(Et,zt){if(Et===zt)Rr(Et,new TypeError("You cannot resolve a promise with itself"));else if(function(Et){var zt=typeof Et;return null!==Et&&("object"===zt||"function"===zt)}(zt)){var rt=void 0;try{rt=zt.then}catch(Ae){return void Rr(Et,Ae)}Ot(Et,zt,rt)}else un(Et,zt)}function lr(Et){Et._onerror&&Et._onerror(Et._result),pi(Et)}function un(Et,zt){Et._state===It&&(Et._result=zt,Et._state=1,0!==Et._subscribers.length&&_e(pi,Et))}function Rr(Et,zt){Et._state===It&&(Et._state=2,Et._result=zt,_e(lr,Et))}function hr(Et,zt,rt,Ae){var ke=Et._subscribers,mt=ke.length;Et._onerror=null,ke[mt]=zt,ke[mt+1]=rt,ke[mt+2]=Ae,0===mt&&Et._state&&_e(pi,Et)}function pi(Et){var zt=Et._subscribers,rt=Et._state;if(0!==zt.length){for(var Ae=void 0,ke=void 0,mt=Et._result,Bt=0;Bt<zt.length;Bt+=3)ke=zt[Bt+rt],(Ae=zt[Bt])?cn(rt,Ae,ke,mt):ke(mt);Et._subscribers.length=0}}function cn(Et,zt,rt,Ae){var ke=ee(rt),mt=void 0,Bt=void 0,vn=!0;if(ke){try{mt=rt(Ae)}catch(Yt){vn=!1,Bt=Yt}if(zt===mt)return void Rr(zt,new TypeError("A promises callback cannot return that same promise."))}else mt=Ae;zt._state!==It||(ke&&vn?mn(zt,mt):!1===vn?Rr(zt,Bt):1===Et?un(zt,mt):2===Et&&Rr(zt,mt))}var qn=0;function Gr(Et){Et[ht]=qn++,Et._state=void 0,Et._result=void 0,Et._subscribers=[]}var Br=function(){function Et(zt,rt){this._instanceConstructor=zt,this.promise=new zt(it),this.promise[ht]||Gr(this.promise),_(rt)?(this.length=rt.length,this._remaining=rt.length,this._result=new Array(this.length),0===this.length?un(this.promise,this._result):(this.length=this.length||0,this._enumerate(rt),0===this._remaining&&un(this.promise,this._result))):Rr(this.promise,new Error("Array Methods must be provided an Array"))}return Et.prototype._enumerate=function(rt){for(var Ae=0;this._state===It&&Ae<rt.length;Ae++)this._eachEntry(rt[Ae],Ae)},Et.prototype._eachEntry=function(rt,Ae){var ke=this._instanceConstructor,mt=ke.resolve;if(mt===Ue){var Bt=void 0,vn=void 0,Yt=!1;try{Bt=rt.then}catch(ur){Yt=!0,vn=ur}if(Bt===_t&&rt._state!==It)this._settledAt(rt._state,Ae,rt._result);else if("function"!=typeof Bt)this._remaining--,this._result[Ae]=rt;else if(ke===en){var Sn=new ke(it);Yt?Rr(Sn,vn):Ot(Sn,rt,Bt),this._willSettleAt(Sn,Ae)}else this._willSettleAt(new ke(function(ur){return ur(rt)}),Ae)}else this._willSettleAt(mt(rt),Ae)},Et.prototype._settledAt=function(rt,Ae,ke){var mt=this.promise;mt._state===It&&(this._remaining--,2===rt?Rr(mt,ke):this._result[Ae]=ke),0===this._remaining&&un(mt,this._result)},Et.prototype._willSettleAt=function(rt,Ae){var ke=this;hr(rt,void 0,function(mt){return ke._settledAt(1,Ae,mt)},function(mt){return ke._settledAt(2,Ae,mt)})},Et}();var en=function(){function Et(zt){this[ht]=qn++,this._result=this._state=void 0,this._subscribers=[],it!==zt&&("function"!=typeof zt&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Et?function(Et,zt){try{zt(function(Ae){mn(Et,Ae)},function(Ae){Rr(Et,Ae)})}catch(rt){Rr(Et,rt)}}(this,zt):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Et.prototype.catch=function(rt){return this.then(null,rt)},Et.prototype.finally=function(rt){var ke=this.constructor;return ee(rt)?this.then(function(mt){return ke.resolve(rt()).then(function(){return mt})},function(mt){return ke.resolve(rt()).then(function(){throw mt})}):this.then(rt,rt)},Et}();return en.prototype.then=_t,en.all=function(Et){return new Br(this,Et).promise},en.race=function(Et){var zt=this;return _(Et)?new zt(function(rt,Ae){for(var ke=Et.length,mt=0;mt<ke;mt++)zt.resolve(Et[mt]).then(rt,Ae)}):new zt(function(rt,Ae){return Ae(new TypeError("You must pass an array to race."))})},en.resolve=Ue,en.reject=function(Et){var rt=new this(it);return Rr(rt,Et),rt},en._setScheduler=function(Et){Ke=Et},en._setAsap=function(Et){_e=Et},en._asap=_e,en.polyfill=function(){var Et=void 0;if("undefined"!=typeof global)Et=global;else if("undefined"!=typeof self)Et=self;else try{Et=Function("return this")()}catch(Ae){throw new Error("polyfill failed because global object is unavailable in this environment")}var zt=Et.Promise;if(zt){var rt=null;try{rt=Object.prototype.toString.call(zt.resolve())}catch(Ae){}if("[object Promise]"===rt&&!zt.cast)return}Et.Promise=en},en.Promise=en,en}()},113:function(Tt){var St;Tt.exports=(St={},(St=function(){this.listeners={}}).prototype={addEventListener:function(Q,_,Pe){for(var we=[],Ke=arguments.length,_e=0;_e<Ke;_e++)we.push(arguments[_e]);we=we.length>3?we.splice(3,we.length-1):[],void 0!==this.listeners[Q]?this.listeners[Q].push({scope:Pe,callback:_,args:we}):this.listeners[Q]=[{scope:Pe,callback:_,args:we}]},removeEventListener:function(Q,_,Pe){if(void 0!==this.listeners[Q]){for(var we=this.listeners[Q].length,Ke=[],_e=0;_e<we;_e++){var nt=this.listeners[Q][_e];nt.scope==Pe&&nt.callback==_||Ke.push(nt)}this.listeners[Q]=Ke}},hasEventListener:function(Q,_,Pe){if(void 0!==this.listeners[Q]){var we=this.listeners[Q].length;if(void 0===_&&void 0===Pe)return we>0;for(var Ke=0;Ke<we;Ke++){var _e=this.listeners[Q][Ke];if((!Pe||_e.scope==Pe)&&_e.callback==_)return!0}}return!1},dispatch:function(Q,_){for(var Pe={type:Q,target:_},we=[],Ke=arguments.length,_e=0;_e<Ke;_e++)we.push(arguments[_e]);if(we=we.length>2?we.splice(2,we.length-1):[],we=[Pe].concat(we),void 0!==this.listeners[Q]){var nt=this.listeners[Q].slice(),xe=nt.length;for(_e=0;_e<xe;_e++){var We=nt[_e];if(We&&We.callback){var ve=we.concat(We.args);We.callback.apply(We.scope,ve)}}}},getEvents:function(){var Q="";for(var _ in this.listeners)for(var Pe=this.listeners[_].length,we=0;we<Pe;we++){var Ke=this.listeners[_][we];Q+=Ke.scope&&Ke.scope.className?Ke.scope.className:"anonymous",Q+=" listen for '"+_+"'\n"}return Q}},new St)},3758:()=>{},2658:(Tt,St)=>{St.read=function(ee,Q,_,Pe,we){var Ke,_e,nt=8*we-Pe-1,xe=(1<<nt)-1,We=xe>>1,ve=-7,Ge=_?we-1:0,Ie=_?-1:1,at=ee[Q+Ge];for(Ge+=Ie,Ke=at&(1<<-ve)-1,at>>=-ve,ve+=nt;ve>0;Ke=256*Ke+ee[Q+Ge],Ge+=Ie,ve-=8);for(_e=Ke&(1<<-ve)-1,Ke>>=-ve,ve+=Pe;ve>0;_e=256*_e+ee[Q+Ge],Ge+=Ie,ve-=8);if(0===Ke)Ke=1-We;else{if(Ke===xe)return _e?NaN:1/0*(at?-1:1);_e+=Math.pow(2,Pe),Ke-=We}return(at?-1:1)*_e*Math.pow(2,Ke-Pe)},St.write=function(ee,Q,_,Pe,we,Ke){var _e,nt,xe,We=8*Ke-we-1,ve=(1<<We)-1,Ge=ve>>1,Ie=23===we?Math.pow(2,-24)-Math.pow(2,-77):0,at=Pe?0:Ke-1,Ft=Pe?1:-1,Se=Q<0||0===Q&&1/Q<0?1:0;for(Q=Math.abs(Q),isNaN(Q)||Q===1/0?(nt=isNaN(Q)?1:0,_e=ve):(_e=Math.floor(Math.log(Q)/Math.LN2),Q*(xe=Math.pow(2,-_e))<1&&(_e--,xe*=2),(Q+=_e+Ge>=1?Ie/xe:Ie*Math.pow(2,1-Ge))*xe>=2&&(_e++,xe/=2),_e+Ge>=ve?(nt=0,_e=ve):_e+Ge>=1?(nt=(Q*xe-1)*Math.pow(2,we),_e+=Ge):(nt=Q*Math.pow(2,Ge-1)*Math.pow(2,we),_e=0));we>=8;ee[_+at]=255&nt,at+=Ft,nt/=256,we-=8);for(_e=_e<<we|nt,We+=we;We>0;ee[_+at]=255&_e,at+=Ft,_e/=256,We-=8);ee[_+at-Ft]|=128*Se}},8330:function(Tt,St,ee){var Q,_;!function(Pe,we){"use strict";void 0!==(_="function"==typeof(Q=function(){var Pe=function(){},we="undefined",Ke=typeof window!==we&&/Trident\/|MSIE /.test(window.navigator.userAgent),_e=["trace","debug","info","warn","error"];function nt(Be,ge){var ue=Be[ge];if("function"==typeof ue.bind)return ue.bind(Be);try{return Function.prototype.bind.call(ue,Be)}catch(Me){return function(){return Function.prototype.apply.apply(ue,[Be,arguments])}}}function xe(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function We(Be){return"debug"===Be&&(Be="log"),typeof console!==we&&("trace"===Be&&Ke?xe:void 0!==console[Be]?nt(console,Be):void 0!==console.log?nt(console,"log"):Pe)}function ve(Be,ge){for(var ue=0;ue<_e.length;ue++){var Me=_e[ue];this[Me]=ue<Be?Pe:this.methodFactory(Me,Be,ge)}this.log=this.debug}function Ge(Be,ge,ue){return function(){typeof console!==we&&(ve.call(this,ge,ue),this[Be].apply(this,arguments))}}function Ie(Be,ge,ue){return We(Be)||Ge.apply(this,arguments)}function at(Be,ge,ue){var qe,Me=this,Ye="loglevel";function Ue(){var it;if(typeof window!==we){try{it=window.localStorage[Ye]}catch(te){}if(typeof it===we)try{var It=window.document.cookie,xt=It.indexOf(encodeURIComponent(Ye)+"=");-1!==xt&&(it=/^([^;]+)/.exec(It.slice(xt))[1])}catch(te){}return void 0===Me.levels[it]&&(it=void 0),it}}Be&&(Ye+=":"+Be),Me.name=Be,Me.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Me.methodFactory=ue||Ie,Me.getLevel=function(){return qe},Me.setLevel=function(it,It){if("string"==typeof it&&void 0!==Me.levels[it.toUpperCase()]&&(it=Me.levels[it.toUpperCase()]),!("number"==typeof it&&it>=0&&it<=Me.levels.SILENT))throw"log.setLevel() called with invalid level: "+it;if(qe=it,!1!==It&&function(it){var It=(_e[it]||"silent").toUpperCase();if(typeof window!==we){try{return void(window.localStorage[Ye]=It)}catch(xt){}try{window.document.cookie=encodeURIComponent(Ye)+"="+It+";"}catch(xt){}}}(it),ve.call(Me,it,Be),typeof console===we&&it<Me.levels.SILENT)return"No console available for logging"},Me.setDefaultLevel=function(it){Ue()||Me.setLevel(it,!1)},Me.enableAll=function(it){Me.setLevel(Me.levels.TRACE,it)},Me.disableAll=function(it){Me.setLevel(Me.levels.SILENT,it)};var ht=Ue();null==ht&&(ht=null==ge?"WARN":ge),Me.setLevel(ht,!1)}var Ft=new at,Se={};Ft.getLogger=function(ge){if("string"!=typeof ge||""===ge)throw new TypeError("You must supply a name when creating a logger.");var ue=Se[ge];return ue||(ue=Se[ge]=new at(ge,Ft.getLevel(),Ft.methodFactory)),ue};var Le=typeof window!==we?window.log:void 0;return Ft.noConflict=function(){return typeof window!==we&&window.log===Ft&&(window.log=Le),Ft},Ft.getLoggers=function(){return Se},Ft})?Q.call(St,ee,St,Tt):Q)&&(Tt.exports=_)}()},728:Tt=>{var St={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},Q=/(italic|oblique)$/i,_={};Tt.exports=function(Pe,we,Ke){var _e=_[Pe];if(!_e){Array.isArray(Pe)||(Pe=[Pe]);for(var nt=400,xe="normal",We=[],Ie=0,at=Pe.length;Ie<at;++Ie){var Se=Pe[Ie].split(" "),Le=Se[Se.length-1].toLowerCase();for(var Be in"normal"==Le||"italic"==Le||"oblique"==Le?(xe=Le,Se.pop(),Le=Se[Se.length-1].toLowerCase()):Q.test(Le)&&(Le=Le.replace(Q,""),xe=Se[Se.length-1].replace(Le,"")),St)if(Le==Be||Le==Be.replace("-","")||Le==Be.replace("-"," ")){nt=St[Be],Se.pop();break}"number"==typeof Le&&(nt=Le);var ge=Se.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==ge.indexOf(" ")&&(ge='"'+ge+'"'),We.push(ge)}_e=_[Pe]=[xe,nt,We]}return _e[0]+" "+_e[1]+" "+we+"px"+(Ke?"/"+Ke:"")+" "+_e[2]}},640:(Tt,St)=>{"use strict";var Q=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==Q)return Q;throw new Error("unable to locate global object")}();Tt.exports=St=Q.fetch,Q.fetch&&(St.default=Q.fetch.bind(Q)),St.Headers=Q.Headers,St.Request=Q.Request,St.Response=Q.Response},6697:(Tt,St,ee)=>{"use strict";Tt.exports=_;var Q=ee(2658);function _(te){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(te)?te:new Uint8Array(te||0),this.pos=0,this.type=0,this.length=this.buf.length}_.Varint=0,_.Fixed64=1,_.Bytes=2,_.Fixed32=5;var Pe=4294967296,we=1/Pe,_e="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function xe(te){return te.type===_.Bytes?te.readVarint()+te.pos:te.pos+1}function at(te,Ee,Ve){var bt=Ee<=16383?1:Ee<=2097151?2:Ee<=268435455?3:Math.floor(Math.log(Ee)/(7*Math.LN2));Ve.realloc(bt);for(var Vt=Ve.pos-1;Vt>=te;Vt--)Ve.buf[Vt+bt]=Ve.buf[Vt]}function Ft(te,Ee){for(var Ve=0;Ve<te.length;Ve++)Ee.writeVarint(te[Ve])}function Se(te,Ee){for(var Ve=0;Ve<te.length;Ve++)Ee.writeSVarint(te[Ve])}function Le(te,Ee){for(var Ve=0;Ve<te.length;Ve++)Ee.writeFloat(te[Ve])}function Be(te,Ee){for(var Ve=0;Ve<te.length;Ve++)Ee.writeDouble(te[Ve])}function ge(te,Ee){for(var Ve=0;Ve<te.length;Ve++)Ee.writeBoolean(te[Ve])}function ue(te,Ee){for(var Ve=0;Ve<te.length;Ve++)Ee.writeFixed32(te[Ve])}function Me(te,Ee){for(var Ve=0;Ve<te.length;Ve++)Ee.writeSFixed32(te[Ve])}function qe(te,Ee){for(var Ve=0;Ve<te.length;Ve++)Ee.writeFixed64(te[Ve])}function Ye(te,Ee){for(var Ve=0;Ve<te.length;Ve++)Ee.writeSFixed64(te[Ve])}function _t(te,Ee){return(te[Ee]|te[Ee+1]<<8|te[Ee+2]<<16)+16777216*te[Ee+3]}function Ue(te,Ee,Ve){te[Ve]=Ee,te[Ve+1]=Ee>>>8,te[Ve+2]=Ee>>>16,te[Ve+3]=Ee>>>24}function ht(te,Ee){return(te[Ee]|te[Ee+1]<<8|te[Ee+2]<<16)+(te[Ee+3]<<24)}_.prototype={destroy:function(){this.buf=null},readFields:function(te,Ee,Ve){for(Ve=Ve||this.length;this.pos<Ve;){var bt=this.readVarint(),Vt=bt>>3,tn=this.pos;this.type=7&bt,te(Vt,Ee,this),this.pos===tn&&this.skip(bt)}return Ee},readMessage:function(te,Ee){return this.readFields(te,Ee,this.readVarint()+this.pos)},readFixed32:function(){var te=_t(this.buf,this.pos);return this.pos+=4,te},readSFixed32:function(){var te=ht(this.buf,this.pos);return this.pos+=4,te},readFixed64:function(){var te=_t(this.buf,this.pos)+_t(this.buf,this.pos+4)*Pe;return this.pos+=8,te},readSFixed64:function(){var te=_t(this.buf,this.pos)+ht(this.buf,this.pos+4)*Pe;return this.pos+=8,te},readFloat:function(){var te=Q.read(this.buf,this.pos,!0,23,4);return this.pos+=4,te},readDouble:function(){var te=Q.read(this.buf,this.pos,!0,52,8);return this.pos+=8,te},readVarint:function(te){var Ve,bt,Ee=this.buf;return Ve=127&(bt=Ee[this.pos++]),bt<128||(Ve|=(127&(bt=Ee[this.pos++]))<<7,bt<128)||(Ve|=(127&(bt=Ee[this.pos++]))<<14,bt<128)||(Ve|=(127&(bt=Ee[this.pos++]))<<21,bt<128)?Ve:function(te,Ee,Ve){var Vt,tn,bt=Ve.buf;if(Vt=(112&(tn=bt[Ve.pos++]))>>4,tn<128||(Vt|=(127&(tn=bt[Ve.pos++]))<<3,tn<128)||(Vt|=(127&(tn=bt[Ve.pos++]))<<10,tn<128)||(Vt|=(127&(tn=bt[Ve.pos++]))<<17,tn<128)||(Vt|=(127&(tn=bt[Ve.pos++]))<<24,tn<128)||(Vt|=(1&(tn=bt[Ve.pos++]))<<31,tn<128))return function(te,Ee,Ve){return Ve?4294967296*Ee+(te>>>0):4294967296*(Ee>>>0)+(te>>>0)}(te,Vt,Ee);throw new Error("Expected varint not more than 10 bytes")}(Ve|=(15&(bt=Ee[this.pos]))<<28,te,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var te=this.readVarint();return te%2==1?(te+1)/-2:te/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var te=this.readVarint()+this.pos,Ee=this.pos;return this.pos=te,te-Ee>=12&&_e?function(te,Ee,Ve){return _e.decode(te.subarray(Ee,Ve))}(this.buf,Ee,te):function(te,Ee,Ve){for(var bt="",Vt=Ee;Vt<Ve;){var lr,un,Rr,tn=te[Vt],Ot=null,mn=tn>239?4:tn>223?3:tn>191?2:1;if(Vt+mn>Ve)break;1===mn?tn<128&&(Ot=tn):2===mn?128==(192&(lr=te[Vt+1]))&&(Ot=(31&tn)<<6|63&lr)<=127&&(Ot=null):3===mn?(un=te[Vt+2],128==(192&(lr=te[Vt+1]))&&128==(192&un)&&((Ot=(15&tn)<<12|(63&lr)<<6|63&un)<=2047||Ot>=55296&&Ot<=57343)&&(Ot=null)):4===mn&&(un=te[Vt+2],Rr=te[Vt+3],128==(192&(lr=te[Vt+1]))&&128==(192&un)&&128==(192&Rr)&&((Ot=(15&tn)<<18|(63&lr)<<12|(63&un)<<6|63&Rr)<=65535||Ot>=1114112)&&(Ot=null)),null===Ot?(Ot=65533,mn=1):Ot>65535&&(Ot-=65536,bt+=String.fromCharCode(Ot>>>10&1023|55296),Ot=56320|1023&Ot),bt+=String.fromCharCode(Ot),Vt+=mn}return bt}(this.buf,Ee,te)},readBytes:function(){var te=this.readVarint()+this.pos,Ee=this.buf.subarray(this.pos,te);return this.pos=te,Ee},readPackedVarint:function(te,Ee){if(this.type!==_.Bytes)return te.push(this.readVarint(Ee));var Ve=xe(this);for(te=te||[];this.pos<Ve;)te.push(this.readVarint(Ee));return te},readPackedSVarint:function(te){if(this.type!==_.Bytes)return te.push(this.readSVarint());var Ee=xe(this);for(te=te||[];this.pos<Ee;)te.push(this.readSVarint());return te},readPackedBoolean:function(te){if(this.type!==_.Bytes)return te.push(this.readBoolean());var Ee=xe(this);for(te=te||[];this.pos<Ee;)te.push(this.readBoolean());return te},readPackedFloat:function(te){if(this.type!==_.Bytes)return te.push(this.readFloat());var Ee=xe(this);for(te=te||[];this.pos<Ee;)te.push(this.readFloat());return te},readPackedDouble:function(te){if(this.type!==_.Bytes)return te.push(this.readDouble());var Ee=xe(this);for(te=te||[];this.pos<Ee;)te.push(this.readDouble());return te},readPackedFixed32:function(te){if(this.type!==_.Bytes)return te.push(this.readFixed32());var Ee=xe(this);for(te=te||[];this.pos<Ee;)te.push(this.readFixed32());return te},readPackedSFixed32:function(te){if(this.type!==_.Bytes)return te.push(this.readSFixed32());var Ee=xe(this);for(te=te||[];this.pos<Ee;)te.push(this.readSFixed32());return te},readPackedFixed64:function(te){if(this.type!==_.Bytes)return te.push(this.readFixed64());var Ee=xe(this);for(te=te||[];this.pos<Ee;)te.push(this.readFixed64());return te},readPackedSFixed64:function(te){if(this.type!==_.Bytes)return te.push(this.readSFixed64());var Ee=xe(this);for(te=te||[];this.pos<Ee;)te.push(this.readSFixed64());return te},skip:function(te){var Ee=7&te;if(Ee===_.Varint)for(;this.buf[this.pos++]>127;);else if(Ee===_.Bytes)this.pos=this.readVarint()+this.pos;else if(Ee===_.Fixed32)this.pos+=4;else{if(Ee!==_.Fixed64)throw new Error("Unimplemented type: "+Ee);this.pos+=8}},writeTag:function(te,Ee){this.writeVarint(te<<3|Ee)},realloc:function(te){for(var Ee=this.length||16;Ee<this.pos+te;)Ee*=2;if(Ee!==this.length){var Ve=new Uint8Array(Ee);Ve.set(this.buf),this.buf=Ve,this.length=Ee}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(te){this.realloc(4),Ue(this.buf,te,this.pos),this.pos+=4},writeSFixed32:function(te){this.realloc(4),Ue(this.buf,te,this.pos),this.pos+=4},writeFixed64:function(te){this.realloc(8),Ue(this.buf,-1&te,this.pos),Ue(this.buf,Math.floor(te*we),this.pos+4),this.pos+=8},writeSFixed64:function(te){this.realloc(8),Ue(this.buf,-1&te,this.pos),Ue(this.buf,Math.floor(te*we),this.pos+4),this.pos+=8},writeVarint:function(te){(te=+te||0)>268435455||te<0?function(te,Ee){var Ve,bt;if(te>=0?(Ve=te%4294967296|0,bt=te/4294967296|0):(bt=~(-te/4294967296),4294967295^(Ve=~(-te%4294967296))?Ve=Ve+1|0:(Ve=0,bt=bt+1|0)),te>=0x10000000000000000||te<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");Ee.realloc(10),function(te,Ee,Ve){Ve.buf[Ve.pos++]=127&te|128,te>>>=7,Ve.buf[Ve.pos++]=127&te|128,te>>>=7,Ve.buf[Ve.pos++]=127&te|128,te>>>=7,Ve.buf[Ve.pos++]=127&te|128,Ve.buf[Ve.pos]=127&(te>>>=7)}(Ve,0,Ee),function(te,Ee){var Ve=(7&te)<<4;Ee.buf[Ee.pos++]|=Ve|((te>>>=3)?128:0),te&&(Ee.buf[Ee.pos++]=127&te|((te>>>=7)?128:0),te&&(Ee.buf[Ee.pos++]=127&te|((te>>>=7)?128:0),te&&(Ee.buf[Ee.pos++]=127&te|((te>>>=7)?128:0),te&&(Ee.buf[Ee.pos++]=127&te|((te>>>=7)?128:0),te&&(Ee.buf[Ee.pos++]=127&te)))))}(bt,Ee)}(te,this):(this.realloc(4),this.buf[this.pos++]=127&te|(te>127?128:0),!(te<=127)&&(this.buf[this.pos++]=127&(te>>>=7)|(te>127?128:0),!(te<=127)&&(this.buf[this.pos++]=127&(te>>>=7)|(te>127?128:0),!(te<=127)&&(this.buf[this.pos++]=te>>>7&127))))},writeSVarint:function(te){this.writeVarint(te<0?2*-te-1:2*te)},writeBoolean:function(te){this.writeVarint(Boolean(te))},writeString:function(te){te=String(te),this.realloc(4*te.length),this.pos++;var Ee=this.pos;this.pos=function(te,Ee,Ve){for(var Vt,tn,bt=0;bt<Ee.length;bt++){if((Vt=Ee.charCodeAt(bt))>55295&&Vt<57344){if(!tn){Vt>56319||bt+1===Ee.length?(te[Ve++]=239,te[Ve++]=191,te[Ve++]=189):tn=Vt;continue}if(Vt<56320){te[Ve++]=239,te[Ve++]=191,te[Ve++]=189,tn=Vt;continue}Vt=tn-55296<<10|Vt-56320|65536,tn=null}else tn&&(te[Ve++]=239,te[Ve++]=191,te[Ve++]=189,tn=null);Vt<128?te[Ve++]=Vt:(Vt<2048?te[Ve++]=Vt>>6|192:(Vt<65536?te[Ve++]=Vt>>12|224:(te[Ve++]=Vt>>18|240,te[Ve++]=Vt>>12&63|128),te[Ve++]=Vt>>6&63|128),te[Ve++]=63&Vt|128)}return Ve}(this.buf,te,this.pos);var Ve=this.pos-Ee;Ve>=128&&at(Ee,Ve,this),this.pos=Ee-1,this.writeVarint(Ve),this.pos+=Ve},writeFloat:function(te){this.realloc(4),Q.write(this.buf,te,this.pos,!0,23,4),this.pos+=4},writeDouble:function(te){this.realloc(8),Q.write(this.buf,te,this.pos,!0,52,8),this.pos+=8},writeBytes:function(te){var Ee=te.length;this.writeVarint(Ee),this.realloc(Ee);for(var Ve=0;Ve<Ee;Ve++)this.buf[this.pos++]=te[Ve]},writeRawMessage:function(te,Ee){this.pos++;var Ve=this.pos;te(Ee,this);var bt=this.pos-Ve;bt>=128&&at(Ve,bt,this),this.pos=Ve-1,this.writeVarint(bt),this.pos+=bt},writeMessage:function(te,Ee,Ve){this.writeTag(te,_.Bytes),this.writeRawMessage(Ee,Ve)},writePackedVarint:function(te,Ee){Ee.length&&this.writeMessage(te,Ft,Ee)},writePackedSVarint:function(te,Ee){Ee.length&&this.writeMessage(te,Se,Ee)},writePackedBoolean:function(te,Ee){Ee.length&&this.writeMessage(te,ge,Ee)},writePackedFloat:function(te,Ee){Ee.length&&this.writeMessage(te,Le,Ee)},writePackedDouble:function(te,Ee){Ee.length&&this.writeMessage(te,Be,Ee)},writePackedFixed32:function(te,Ee){Ee.length&&this.writeMessage(te,ue,Ee)},writePackedSFixed32:function(te,Ee){Ee.length&&this.writeMessage(te,Me,Ee)},writePackedFixed64:function(te,Ee){Ee.length&&this.writeMessage(te,qe,Ee)},writePackedSFixed64:function(te,Ee){Ee.length&&this.writeMessage(te,Ye,Ee)},writeBytesField:function(te,Ee){this.writeTag(te,_.Bytes),this.writeBytes(Ee)},writeFixed32Field:function(te,Ee){this.writeTag(te,_.Fixed32),this.writeFixed32(Ee)},writeSFixed32Field:function(te,Ee){this.writeTag(te,_.Fixed32),this.writeSFixed32(Ee)},writeFixed64Field:function(te,Ee){this.writeTag(te,_.Fixed64),this.writeFixed64(Ee)},writeSFixed64Field:function(te,Ee){this.writeTag(te,_.Fixed64),this.writeSFixed64(Ee)},writeVarintField:function(te,Ee){this.writeTag(te,_.Varint),this.writeVarint(Ee)},writeSVarintField:function(te,Ee){this.writeTag(te,_.Varint),this.writeSVarint(Ee)},writeStringField:function(te,Ee){this.writeTag(te,_.Bytes),this.writeString(Ee)},writeFloatField:function(te,Ee){this.writeTag(te,_.Fixed32),this.writeFloat(Ee)},writeDoubleField:function(te,Ee){this.writeTag(te,_.Fixed64),this.writeDouble(Ee)},writeBooleanField:function(te,Ee){this.writeVarintField(te,Boolean(Ee))}}},7346:function(Tt){Tt.exports=function(){"use strict";function St(ge,ue,Me,qe,Ye){ee(ge,ue,Me||0,qe||ge.length-1,Ye||_)}function ee(ge,ue,Me,qe,Ye){for(;qe>Me;){if(qe-Me>600){var _t=qe-Me+1,Ue=ue-Me+1,ht=Math.log(_t),it=.5*Math.exp(2*ht/3),It=.5*Math.sqrt(ht*it*(_t-it)/_t)*(Ue-_t/2<0?-1:1);ee(ge,ue,Math.max(Me,Math.floor(ue-Ue*it/_t+It)),Math.min(qe,Math.floor(ue+(_t-Ue)*it/_t+It)),Ye)}var Ee=ge[ue],Ve=Me,bt=qe;for(Q(ge,Me,ue),Ye(ge[qe],Ee)>0&&Q(ge,Me,qe);Ve<bt;){for(Q(ge,Ve,bt),Ve++,bt--;Ye(ge[Ve],Ee)<0;)Ve++;for(;Ye(ge[bt],Ee)>0;)bt--}0===Ye(ge[Me],Ee)?Q(ge,Me,bt):Q(ge,++bt,qe),bt<=ue&&(Me=bt+1),ue<=bt&&(qe=bt-1)}}function Q(ge,ue,Me){var qe=ge[ue];ge[ue]=ge[Me],ge[Me]=qe}function _(ge,ue){return ge<ue?-1:ge>ue?1:0}var Pe=function(ue){void 0===ue&&(ue=9),this._maxEntries=Math.max(4,ue),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function we(ge,ue,Me){if(!Me)return ue.indexOf(ge);for(var qe=0;qe<ue.length;qe++)if(Me(ge,ue[qe]))return qe;return-1}function Ke(ge,ue){_e(ge,0,ge.children.length,ue,ge)}function _e(ge,ue,Me,qe,Ye){Ye||(Ye=Le(null)),Ye.minX=1/0,Ye.minY=1/0,Ye.maxX=-1/0,Ye.maxY=-1/0;for(var _t=ue;_t<Me;_t++){var Ue=ge.children[_t];nt(Ye,ge.leaf?qe(Ue):Ue)}return Ye}function nt(ge,ue){return ge.minX=Math.min(ge.minX,ue.minX),ge.minY=Math.min(ge.minY,ue.minY),ge.maxX=Math.max(ge.maxX,ue.maxX),ge.maxY=Math.max(ge.maxY,ue.maxY),ge}function xe(ge,ue){return ge.minX-ue.minX}function We(ge,ue){return ge.minY-ue.minY}function ve(ge){return(ge.maxX-ge.minX)*(ge.maxY-ge.minY)}function Ge(ge){return ge.maxX-ge.minX+(ge.maxY-ge.minY)}function Ie(ge,ue){return(Math.max(ue.maxX,ge.maxX)-Math.min(ue.minX,ge.minX))*(Math.max(ue.maxY,ge.maxY)-Math.min(ue.minY,ge.minY))}function at(ge,ue){var Me=Math.max(ge.minX,ue.minX),qe=Math.max(ge.minY,ue.minY),Ye=Math.min(ge.maxX,ue.maxX),_t=Math.min(ge.maxY,ue.maxY);return Math.max(0,Ye-Me)*Math.max(0,_t-qe)}function Ft(ge,ue){return ge.minX<=ue.minX&&ge.minY<=ue.minY&&ue.maxX<=ge.maxX&&ue.maxY<=ge.maxY}function Se(ge,ue){return ue.minX<=ge.maxX&&ue.minY<=ge.maxY&&ue.maxX>=ge.minX&&ue.maxY>=ge.minY}function Le(ge){return{children:ge,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Be(ge,ue,Me,qe,Ye){for(var _t=[ue,Me];_t.length;)if(!((Me=_t.pop())-(ue=_t.pop())<=qe)){var Ue=ue+Math.ceil((Me-ue)/qe/2)*qe;St(ge,Ue,ue,Me,Ye),_t.push(ue,Ue,Ue,Me)}}return Pe.prototype.all=function(){return this._all(this.data,[])},Pe.prototype.search=function(ue){var Me=this.data,qe=[];if(!Se(ue,Me))return qe;for(var Ye=this.toBBox,_t=[];Me;){for(var Ue=0;Ue<Me.children.length;Ue++){var ht=Me.children[Ue],it=Me.leaf?Ye(ht):ht;Se(ue,it)&&(Me.leaf?qe.push(ht):Ft(ue,it)?this._all(ht,qe):_t.push(ht))}Me=_t.pop()}return qe},Pe.prototype.collides=function(ue){var Me=this.data;if(!Se(ue,Me))return!1;for(var qe=[];Me;){for(var Ye=0;Ye<Me.children.length;Ye++){var _t=Me.children[Ye],Ue=Me.leaf?this.toBBox(_t):_t;if(Se(ue,Ue)){if(Me.leaf||Ft(ue,Ue))return!0;qe.push(_t)}}Me=qe.pop()}return!1},Pe.prototype.load=function(ue){if(!ue||!ue.length)return this;if(ue.length<this._minEntries){for(var Me=0;Me<ue.length;Me++)this.insert(ue[Me]);return this}var qe=this._build(ue.slice(),0,ue.length-1,0);if(this.data.children.length)if(this.data.height===qe.height)this._splitRoot(this.data,qe);else{if(this.data.height<qe.height){var Ye=this.data;this.data=qe,qe=Ye}this._insert(qe,this.data.height-qe.height-1,!0)}else this.data=qe;return this},Pe.prototype.insert=function(ue){return ue&&this._insert(ue,this.data.height-1),this},Pe.prototype.clear=function(){return this.data=Le([]),this},Pe.prototype.remove=function(ue,Me){if(!ue)return this;for(var ht,it,It,qe=this.data,Ye=this.toBBox(ue),_t=[],Ue=[];qe||_t.length;){if(qe||(qe=_t.pop(),it=_t[_t.length-1],ht=Ue.pop(),It=!0),qe.leaf){var xt=we(ue,qe.children,Me);if(-1!==xt)return qe.children.splice(xt,1),_t.push(qe),this._condense(_t),this}It||qe.leaf||!Ft(qe,Ye)?it?(ht++,qe=it.children[ht],It=!1):qe=null:(_t.push(qe),Ue.push(ht),ht=0,it=qe,qe=qe.children[0])}return this},Pe.prototype.toBBox=function(ue){return ue},Pe.prototype.compareMinX=function(ue,Me){return ue.minX-Me.minX},Pe.prototype.compareMinY=function(ue,Me){return ue.minY-Me.minY},Pe.prototype.toJSON=function(){return this.data},Pe.prototype.fromJSON=function(ue){return this.data=ue,this},Pe.prototype._all=function(ue,Me){for(var qe=[];ue;)ue.leaf?Me.push.apply(Me,ue.children):qe.push.apply(qe,ue.children),ue=qe.pop();return Me},Pe.prototype._build=function(ue,Me,qe,Ye){var ht,_t=qe-Me+1,Ue=this._maxEntries;if(_t<=Ue)return Ke(ht=Le(ue.slice(Me,qe+1)),this.toBBox),ht;Ye||(Ye=Math.ceil(Math.log(_t)/Math.log(Ue)),Ue=Math.ceil(_t/Math.pow(Ue,Ye-1))),(ht=Le([])).leaf=!1,ht.height=Ye;var it=Math.ceil(_t/Ue),It=it*Math.ceil(Math.sqrt(Ue));Be(ue,Me,qe,It,this.compareMinX);for(var xt=Me;xt<=qe;xt+=It){var te=Math.min(xt+It-1,qe);Be(ue,xt,te,it,this.compareMinY);for(var Ee=xt;Ee<=te;Ee+=it){var Ve=Math.min(Ee+it-1,te);ht.children.push(this._build(ue,Ee,Ve,Ye-1))}}return Ke(ht,this.toBBox),ht},Pe.prototype._chooseSubtree=function(ue,Me,qe,Ye){for(;Ye.push(Me),!Me.leaf&&Ye.length-1!==qe;){for(var _t=1/0,Ue=1/0,ht=void 0,it=0;it<Me.children.length;it++){var It=Me.children[it],xt=ve(It),te=Ie(ue,It)-xt;te<Ue?(Ue=te,_t=xt<_t?xt:_t,ht=It):te===Ue&&xt<_t&&(_t=xt,ht=It)}Me=ht||Me.children[0]}return Me},Pe.prototype._insert=function(ue,Me,qe){var Ye=qe?ue:this.toBBox(ue),_t=[],Ue=this._chooseSubtree(Ye,this.data,Me,_t);for(Ue.children.push(ue),nt(Ue,Ye);Me>=0&&_t[Me].children.length>this._maxEntries;)this._split(_t,Me),Me--;this._adjustParentBBoxes(Ye,_t,Me)},Pe.prototype._split=function(ue,Me){var qe=ue[Me],Ye=qe.children.length,_t=this._minEntries;this._chooseSplitAxis(qe,_t,Ye);var Ue=this._chooseSplitIndex(qe,_t,Ye),ht=Le(qe.children.splice(Ue,qe.children.length-Ue));ht.height=qe.height,ht.leaf=qe.leaf,Ke(qe,this.toBBox),Ke(ht,this.toBBox),Me?ue[Me-1].children.push(ht):this._splitRoot(qe,ht)},Pe.prototype._splitRoot=function(ue,Me){this.data=Le([ue,Me]),this.data.height=ue.height+1,this.data.leaf=!1,Ke(this.data,this.toBBox)},Pe.prototype._chooseSplitIndex=function(ue,Me,qe){for(var Ye,_t=1/0,Ue=1/0,ht=Me;ht<=qe-Me;ht++){var it=_e(ue,0,ht,this.toBBox),It=_e(ue,ht,qe,this.toBBox),xt=at(it,It),te=ve(it)+ve(It);xt<_t?(_t=xt,Ye=ht,Ue=te<Ue?te:Ue):xt===_t&&te<Ue&&(Ue=te,Ye=ht)}return Ye||qe-Me},Pe.prototype._chooseSplitAxis=function(ue,Me,qe){var Ye=ue.leaf?this.compareMinX:xe,_t=ue.leaf?this.compareMinY:We;this._allDistMargin(ue,Me,qe,Ye)<this._allDistMargin(ue,Me,qe,_t)&&ue.children.sort(Ye)},Pe.prototype._allDistMargin=function(ue,Me,qe,Ye){ue.children.sort(Ye);for(var _t=this.toBBox,Ue=_e(ue,0,Me,_t),ht=_e(ue,qe-Me,qe,_t),it=Ge(Ue)+Ge(ht),It=Me;It<qe-Me;It++){var xt=ue.children[It];nt(Ue,ue.leaf?_t(xt):xt),it+=Ge(Ue)}for(var te=qe-Me-1;te>=Me;te--){var Ee=ue.children[te];nt(ht,ue.leaf?_t(Ee):Ee),it+=Ge(ht)}return it},Pe.prototype._adjustParentBBoxes=function(ue,Me,qe){for(var Ye=qe;Ye>=0;Ye--)nt(Me[Ye],ue)},Pe.prototype._condense=function(ue){for(var Me=ue.length-1,qe=void 0;Me>=0;Me--)0===ue[Me].children.length?Me>0?(qe=ue[Me-1].children).splice(qe.indexOf(ue[Me]),1):this.clear():Ke(ue[Me],this.toBBox)},Pe}()},3036:function(Tt){Tt.exports=function(){"use strict";function St(Se,Le,Be,ge,ue){!function Me(qe,Ye,_t,Ue,ht){for(;Ue>_t;){if(Ue-_t>600){var it=Ue-_t+1,It=Ye-_t+1,xt=Math.log(it),te=.5*Math.exp(2*xt/3),Ee=.5*Math.sqrt(xt*te*(it-te)/it)*(It-it/2<0?-1:1);Me(qe,Ye,Math.max(_t,Math.floor(Ye-It*te/it+Ee)),Math.min(Ue,Math.floor(Ye+(it-It)*te/it+Ee)),ht)}var Vt=qe[Ye],tn=_t,Ot=Ue;for(ee(qe,_t,Ye),ht(qe[Ue],Vt)>0&&ee(qe,_t,Ue);tn<Ot;){for(ee(qe,tn,Ot),tn++,Ot--;ht(qe[tn],Vt)<0;)tn++;for(;ht(qe[Ot],Vt)>0;)Ot--}0===ht(qe[_t],Vt)?ee(qe,_t,Ot):ee(qe,++Ot,Ue),Ot<=Ye&&(_t=Ot+1),Ye<=Ot&&(Ue=Ot-1)}}(Se,Le,Be||0,ge||Se.length-1,ue||Q)}function ee(Se,Le,Be){var ge=Se[Le];Se[Le]=Se[Be],Se[Be]=ge}function Q(Se,Le){return Se<Le?-1:Se>Le?1:0}var _=function(Se){void 0===Se&&(Se=9),this._maxEntries=Math.max(4,Se),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Pe(Se,Le,Be){if(!Be)return Le.indexOf(Se);for(var ge=0;ge<Le.length;ge++)if(Be(Se,Le[ge]))return ge;return-1}function we(Se,Le){Ke(Se,0,Se.children.length,Le,Se)}function Ke(Se,Le,Be,ge,ue){ue||(ue=at(null)),ue.minX=1/0,ue.minY=1/0,ue.maxX=-1/0,ue.maxY=-1/0;for(var Me=Le;Me<Be;Me++){var qe=Se.children[Me];_e(ue,Se.leaf?ge(qe):qe)}return ue}function _e(Se,Le){return Se.minX=Math.min(Se.minX,Le.minX),Se.minY=Math.min(Se.minY,Le.minY),Se.maxX=Math.max(Se.maxX,Le.maxX),Se.maxY=Math.max(Se.maxY,Le.maxY),Se}function nt(Se,Le){return Se.minX-Le.minX}function xe(Se,Le){return Se.minY-Le.minY}function We(Se){return(Se.maxX-Se.minX)*(Se.maxY-Se.minY)}function ve(Se){return Se.maxX-Se.minX+(Se.maxY-Se.minY)}function Ge(Se,Le){return Se.minX<=Le.minX&&Se.minY<=Le.minY&&Le.maxX<=Se.maxX&&Le.maxY<=Se.maxY}function Ie(Se,Le){return Le.minX<=Se.maxX&&Le.minY<=Se.maxY&&Le.maxX>=Se.minX&&Le.maxY>=Se.minY}function at(Se){return{children:Se,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ft(Se,Le,Be,ge,ue){for(var Me=[Le,Be];Me.length;)if(!((Be=Me.pop())-(Le=Me.pop())<=ge)){var qe=Le+Math.ceil((Be-Le)/ge/2)*ge;St(Se,qe,Le,Be,ue),Me.push(Le,qe,qe,Be)}}return _.prototype.all=function(){return this._all(this.data,[])},_.prototype.search=function(Se){var Le=this.data,Be=[];if(!Ie(Se,Le))return Be;for(var ge=this.toBBox,ue=[];Le;){for(var Me=0;Me<Le.children.length;Me++){var qe=Le.children[Me],Ye=Le.leaf?ge(qe):qe;Ie(Se,Ye)&&(Le.leaf?Be.push(qe):Ge(Se,Ye)?this._all(qe,Be):ue.push(qe))}Le=ue.pop()}return Be},_.prototype.collides=function(Se){var Le=this.data;if(!Ie(Se,Le))return!1;for(var Be=[];Le;){for(var ge=0;ge<Le.children.length;ge++){var ue=Le.children[ge],Me=Le.leaf?this.toBBox(ue):ue;if(Ie(Se,Me)){if(Le.leaf||Ge(Se,Me))return!0;Be.push(ue)}}Le=Be.pop()}return!1},_.prototype.load=function(Se){if(!Se||!Se.length)return this;if(Se.length<this._minEntries){for(var Le=0;Le<Se.length;Le++)this.insert(Se[Le]);return this}var Be=this._build(Se.slice(),0,Se.length-1,0);if(this.data.children.length)if(this.data.height===Be.height)this._splitRoot(this.data,Be);else{if(this.data.height<Be.height){var ge=this.data;this.data=Be,Be=ge}this._insert(Be,this.data.height-Be.height-1,!0)}else this.data=Be;return this},_.prototype.insert=function(Se){return Se&&this._insert(Se,this.data.height-1),this},_.prototype.clear=function(){return this.data=at([]),this},_.prototype.remove=function(Se,Le){if(!Se)return this;for(var Be,ge,ue,Me=this.data,qe=this.toBBox(Se),Ye=[],_t=[];Me||Ye.length;){if(Me||(Me=Ye.pop(),ge=Ye[Ye.length-1],Be=_t.pop(),ue=!0),Me.leaf){var Ue=Pe(Se,Me.children,Le);if(-1!==Ue)return Me.children.splice(Ue,1),Ye.push(Me),this._condense(Ye),this}ue||Me.leaf||!Ge(Me,qe)?ge?(Be++,Me=ge.children[Be],ue=!1):Me=null:(Ye.push(Me),_t.push(Be),Be=0,ge=Me,Me=Me.children[0])}return this},_.prototype.toBBox=function(Se){return Se},_.prototype.compareMinX=function(Se,Le){return Se.minX-Le.minX},_.prototype.compareMinY=function(Se,Le){return Se.minY-Le.minY},_.prototype.toJSON=function(){return this.data},_.prototype.fromJSON=function(Se){return this.data=Se,this},_.prototype._all=function(Se,Le){for(var Be=[];Se;)Se.leaf?Le.push.apply(Le,Se.children):Be.push.apply(Be,Se.children),Se=Be.pop();return Le},_.prototype._build=function(Se,Le,Be,ge){var ue,Me=Be-Le+1,qe=this._maxEntries;if(Me<=qe)return we(ue=at(Se.slice(Le,Be+1)),this.toBBox),ue;ge||(ge=Math.ceil(Math.log(Me)/Math.log(qe)),qe=Math.ceil(Me/Math.pow(qe,ge-1))),(ue=at([])).leaf=!1,ue.height=ge;var Ye=Math.ceil(Me/qe),_t=Ye*Math.ceil(Math.sqrt(qe));Ft(Se,Le,Be,_t,this.compareMinX);for(var Ue=Le;Ue<=Be;Ue+=_t){var ht=Math.min(Ue+_t-1,Be);Ft(Se,Ue,ht,Ye,this.compareMinY);for(var it=Ue;it<=ht;it+=Ye){var It=Math.min(it+Ye-1,ht);ue.children.push(this._build(Se,it,It,ge-1))}}return we(ue,this.toBBox),ue},_.prototype._chooseSubtree=function(Se,Le,Be,ge){for(;ge.push(Le),!Le.leaf&&ge.length-1!==Be;){for(var ue=1/0,Me=1/0,qe=void 0,Ye=0;Ye<Le.children.length;Ye++){var _t=Le.children[Ye],Ue=We(_t),ht=(it=Se,It=_t,(Math.max(It.maxX,it.maxX)-Math.min(It.minX,it.minX))*(Math.max(It.maxY,it.maxY)-Math.min(It.minY,it.minY))-Ue);ht<Me?(Me=ht,ue=Ue<ue?Ue:ue,qe=_t):ht===Me&&Ue<ue&&(ue=Ue,qe=_t)}Le=qe||Le.children[0]}var it,It;return Le},_.prototype._insert=function(Se,Le,Be){var ge=Be?Se:this.toBBox(Se),ue=[],Me=this._chooseSubtree(ge,this.data,Le,ue);for(Me.children.push(Se),_e(Me,ge);Le>=0&&ue[Le].children.length>this._maxEntries;)this._split(ue,Le),Le--;this._adjustParentBBoxes(ge,ue,Le)},_.prototype._split=function(Se,Le){var Be=Se[Le],ge=Be.children.length,ue=this._minEntries;this._chooseSplitAxis(Be,ue,ge);var Me=this._chooseSplitIndex(Be,ue,ge),qe=at(Be.children.splice(Me,Be.children.length-Me));qe.height=Be.height,qe.leaf=Be.leaf,we(Be,this.toBBox),we(qe,this.toBBox),Le?Se[Le-1].children.push(qe):this._splitRoot(Be,qe)},_.prototype._splitRoot=function(Se,Le){this.data=at([Se,Le]),this.data.height=Se.height+1,this.data.leaf=!1,we(this.data,this.toBBox)},_.prototype._chooseSplitIndex=function(Se,Le,Be){for(var ge,ue,Me,qe,Ye,_t,Ue,ht=1/0,it=1/0,It=Le;It<=Be-Le;It++){var xt=Ke(Se,0,It,this.toBBox),te=Ke(Se,It,Be,this.toBBox),Ee=(ue=xt,Me=te,void 0,void 0,void 0,void 0,qe=Math.max(ue.minX,Me.minX),Ye=Math.max(ue.minY,Me.minY),_t=Math.min(ue.maxX,Me.maxX),Ue=Math.min(ue.maxY,Me.maxY),Math.max(0,_t-qe)*Math.max(0,Ue-Ye)),Ve=We(xt)+We(te);Ee<ht?(ht=Ee,ge=It,it=Ve<it?Ve:it):Ee===ht&&Ve<it&&(it=Ve,ge=It)}return ge||Be-Le},_.prototype._chooseSplitAxis=function(Se,Le,Be){var ge=Se.leaf?this.compareMinX:nt,ue=Se.leaf?this.compareMinY:xe;this._allDistMargin(Se,Le,Be,ge)<this._allDistMargin(Se,Le,Be,ue)&&Se.children.sort(ge)},_.prototype._allDistMargin=function(Se,Le,Be,ge){Se.children.sort(ge);for(var ue=this.toBBox,Me=Ke(Se,0,Le,ue),qe=Ke(Se,Be-Le,Be,ue),Ye=ve(Me)+ve(qe),_t=Le;_t<Be-Le;_t++){var Ue=Se.children[_t];_e(Me,Se.leaf?ue(Ue):Ue),Ye+=ve(Me)}for(var ht=Be-Le-1;ht>=Le;ht--){var it=Se.children[ht];_e(qe,Se.leaf?ue(it):it),Ye+=ve(qe)}return Ye},_.prototype._adjustParentBBoxes=function(Se,Le,Be){for(var ge=Be;ge>=0;ge--)_e(Le[ge],Se)},_.prototype._condense=function(Se){for(var Le=Se.length-1,Be=void 0;Le>=0;Le--)0===Se[Le].children.length?Le>0?(Be=Se[Le-1].children).splice(Be.indexOf(Se[Le]),1):this.clear():we(Se[Le],this.toBBox)},_}()},6215:(Tt,St,ee)=>{"use strict";ee.d(St,{X:()=>Pe});var Q=ee(9765),_=ee(7971);class Pe extends Q.xQ{constructor(Ke){super(),this._value=Ke}get value(){return this.getValue()}_subscribe(Ke){const _e=super._subscribe(Ke);return _e&&!_e.closed&&Ke.next(this._value),_e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _.N;return this._value}next(Ke){super.next(this._value=Ke)}}},7574:(Tt,St,ee)=>{"use strict";ee.d(St,{y:()=>Ge});var Q=ee(7393),Pe=ee(9181),we=ee(6490),_e=ee(6554),nt=ee(4487);var ve=ee(2494);let Ge=(()=>{class at{constructor(Se){this._isScalar=!1,Se&&(this._subscribe=Se)}lift(Se){const Le=new at;return Le.source=this,Le.operator=Se,Le}subscribe(Se,Le,Be){const{operator:ge}=this,ue=function(at,Ft,Se){if(at){if(at instanceof Q.L)return at;if(at[Pe.b])return at[Pe.b]()}return at||Ft||Se?new Q.L(at,Ft,Se):new Q.L(we.c)}(Se,Le,Be);if(ue.add(ge?ge.call(ue,this.source):this.source||ve.v.useDeprecatedSynchronousErrorHandling&&!ue.syncErrorThrowable?this._subscribe(ue):this._trySubscribe(ue)),ve.v.useDeprecatedSynchronousErrorHandling&&ue.syncErrorThrowable&&(ue.syncErrorThrowable=!1,ue.syncErrorThrown))throw ue.syncErrorValue;return ue}_trySubscribe(Se){try{return this._subscribe(Se)}catch(Le){ve.v.useDeprecatedSynchronousErrorHandling&&(Se.syncErrorThrown=!0,Se.syncErrorValue=Le),function(at){for(;at;){const{closed:Ft,destination:Se,isStopped:Le}=at;if(Ft||Le)return!1;at=Se&&Se instanceof Q.L?Se:null}return!0}(Se)?Se.error(Le):console.warn(Le)}}forEach(Se,Le){return new(Le=Ie(Le))((Be,ge)=>{let ue;ue=this.subscribe(Me=>{try{Se(Me)}catch(qe){ge(qe),ue&&ue.unsubscribe()}},ge,Be)})}_subscribe(Se){const{source:Le}=this;return Le&&Le.subscribe(Se)}[_e.L](){return this}pipe(...Se){return 0===Se.length?this:function(at){return 0===at.length?nt.y:1===at.length?at[0]:function(Se){return at.reduce((Le,Be)=>Be(Le),Se)}}(Se)(this)}toPromise(Se){return new(Se=Ie(Se))((Le,Be)=>{let ge;this.subscribe(ue=>ge=ue,ue=>Be(ue),()=>Le(ge))})}}return at.create=Ft=>new at(Ft),at})();function Ie(at){if(at||(at=ve.v.Promise||Promise),!at)throw new Error("no Promise impl found");return at}},6490:(Tt,St,ee)=>{"use strict";ee.d(St,{c:()=>Pe});var Q=ee(2494),_=ee(4449);const Pe={closed:!0,next(we){},error(we){if(Q.v.useDeprecatedSynchronousErrorHandling)throw we;(0,_.z)(we)},complete(){}}},9765:(Tt,St,ee)=>{"use strict";ee.d(St,{Yc:()=>nt,xQ:()=>xe});var Q=ee(7574),_=ee(7393),Pe=ee(5319),we=ee(7971),Ke=ee(8858),_e=ee(9181);class nt extends _.L{constructor(Ge){super(Ge),this.destination=Ge}}let xe=(()=>{class ve extends Q.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[_e.b](){return new nt(this)}lift(Ie){const at=new We(this,this);return at.operator=Ie,at}next(Ie){if(this.closed)throw new we.N;if(!this.isStopped){const{observers:at}=this,Ft=at.length,Se=at.slice();for(let Le=0;Le<Ft;Le++)Se[Le].next(Ie)}}error(Ie){if(this.closed)throw new we.N;this.hasError=!0,this.thrownError=Ie,this.isStopped=!0;const{observers:at}=this,Ft=at.length,Se=at.slice();for(let Le=0;Le<Ft;Le++)Se[Le].error(Ie);this.observers.length=0}complete(){if(this.closed)throw new we.N;this.isStopped=!0;const{observers:Ie}=this,at=Ie.length,Ft=Ie.slice();for(let Se=0;Se<at;Se++)Ft[Se].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Ie){if(this.closed)throw new we.N;return super._trySubscribe(Ie)}_subscribe(Ie){if(this.closed)throw new we.N;return this.hasError?(Ie.error(this.thrownError),Pe.w.EMPTY):this.isStopped?(Ie.complete(),Pe.w.EMPTY):(this.observers.push(Ie),new Ke.W(this,Ie))}asObservable(){const Ie=new Q.y;return Ie.source=this,Ie}}return ve.create=(Ge,Ie)=>new We(Ge,Ie),ve})();class We extends xe{constructor(Ge,Ie){super(),this.destination=Ge,this.source=Ie}next(Ge){const{destination:Ie}=this;Ie&&Ie.next&&Ie.next(Ge)}error(Ge){const{destination:Ie}=this;Ie&&Ie.error&&this.destination.error(Ge)}complete(){const{destination:Ge}=this;Ge&&Ge.complete&&this.destination.complete()}_subscribe(Ge){const{source:Ie}=this;return Ie?this.source.subscribe(Ge):Pe.w.EMPTY}}},8858:(Tt,St,ee)=>{"use strict";ee.d(St,{W:()=>_});var Q=ee(5319);class _ extends Q.w{constructor(we,Ke){super(),this.subject=we,this.subscriber=Ke,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const we=this.subject,Ke=we.observers;if(this.subject=null,!Ke||0===Ke.length||we.isStopped||we.closed)return;const _e=Ke.indexOf(this.subscriber);-1!==_e&&Ke.splice(_e,1)}}},7393:(Tt,St,ee)=>{"use strict";ee.d(St,{L:()=>nt});var Q=ee(9105),_=ee(6490),Pe=ee(5319),we=ee(9181),Ke=ee(2494),_e=ee(4449);class nt extends Pe.w{constructor(ve,Ge,Ie){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=_.c;break;case 1:if(!ve){this.destination=_.c;break}if("object"==typeof ve){ve instanceof nt?(this.syncErrorThrowable=ve.syncErrorThrowable,this.destination=ve,ve.add(this)):(this.syncErrorThrowable=!0,this.destination=new xe(this,ve));break}default:this.syncErrorThrowable=!0,this.destination=new xe(this,ve,Ge,Ie)}}[we.b](){return this}static create(ve,Ge,Ie){const at=new nt(ve,Ge,Ie);return at.syncErrorThrowable=!1,at}next(ve){this.isStopped||this._next(ve)}error(ve){this.isStopped||(this.isStopped=!0,this._error(ve))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(ve){this.destination.next(ve)}_error(ve){this.destination.error(ve),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:ve}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=ve,this}}class xe extends nt{constructor(ve,Ge,Ie,at){super(),this._parentSubscriber=ve;let Ft,Se=this;(0,Q.m)(Ge)?Ft=Ge:Ge&&(Ft=Ge.next,Ie=Ge.error,at=Ge.complete,Ge!==_.c&&(Se=Object.create(Ge),(0,Q.m)(Se.unsubscribe)&&this.add(Se.unsubscribe.bind(Se)),Se.unsubscribe=this.unsubscribe.bind(this))),this._context=Se,this._next=Ft,this._error=Ie,this._complete=at}next(ve){if(!this.isStopped&&this._next){const{_parentSubscriber:Ge}=this;Ke.v.useDeprecatedSynchronousErrorHandling&&Ge.syncErrorThrowable?this.__tryOrSetError(Ge,this._next,ve)&&this.unsubscribe():this.__tryOrUnsub(this._next,ve)}}error(ve){if(!this.isStopped){const{_parentSubscriber:Ge}=this,{useDeprecatedSynchronousErrorHandling:Ie}=Ke.v;if(this._error)Ie&&Ge.syncErrorThrowable?(this.__tryOrSetError(Ge,this._error,ve),this.unsubscribe()):(this.__tryOrUnsub(this._error,ve),this.unsubscribe());else if(Ge.syncErrorThrowable)Ie?(Ge.syncErrorValue=ve,Ge.syncErrorThrown=!0):(0,_e.z)(ve),this.unsubscribe();else{if(this.unsubscribe(),Ie)throw ve;(0,_e.z)(ve)}}}complete(){if(!this.isStopped){const{_parentSubscriber:ve}=this;if(this._complete){const Ge=()=>this._complete.call(this._context);Ke.v.useDeprecatedSynchronousErrorHandling&&ve.syncErrorThrowable?(this.__tryOrSetError(ve,Ge),this.unsubscribe()):(this.__tryOrUnsub(Ge),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(ve,Ge){try{ve.call(this._context,Ge)}catch(Ie){if(this.unsubscribe(),Ke.v.useDeprecatedSynchronousErrorHandling)throw Ie;(0,_e.z)(Ie)}}__tryOrSetError(ve,Ge,Ie){if(!Ke.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Ge.call(this._context,Ie)}catch(at){return Ke.v.useDeprecatedSynchronousErrorHandling?(ve.syncErrorValue=at,ve.syncErrorThrown=!0,!0):((0,_e.z)(at),!0)}return!1}_unsubscribe(){const{_parentSubscriber:ve}=this;this._context=null,this._parentSubscriber=null,ve.unsubscribe()}}},5319:(Tt,St,ee)=>{"use strict";ee.d(St,{w:()=>_e});var Q=ee(9796),_=ee(1555),Pe=ee(9105);const Ke=(()=>{function xe(We){return Error.call(this),this.message=We?`${We.length} errors occurred during unsubscription:\n${We.map((ve,Ge)=>`${Ge+1}) ${ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=We,this}return xe.prototype=Object.create(Error.prototype),xe})();class _e{constructor(We){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,We&&(this._ctorUnsubscribe=!0,this._unsubscribe=We)}unsubscribe(){let We;if(this.closed)return;let{_parentOrParents:ve,_ctorUnsubscribe:Ge,_unsubscribe:Ie,_subscriptions:at}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,ve instanceof _e)ve.remove(this);else if(null!==ve)for(let Ft=0;Ft<ve.length;++Ft)ve[Ft].remove(this);if((0,Pe.m)(Ie)){Ge&&(this._unsubscribe=void 0);try{Ie.call(this)}catch(Ft){We=Ft instanceof Ke?nt(Ft.errors):[Ft]}}if((0,Q.k)(at)){let Ft=-1,Se=at.length;for(;++Ft<Se;){const Le=at[Ft];if((0,_.K)(Le))try{Le.unsubscribe()}catch(Be){We=We||[],Be instanceof Ke?We=We.concat(nt(Be.errors)):We.push(Be)}}}if(We)throw new Ke(We)}add(We){let ve=We;if(!We)return _e.EMPTY;switch(typeof We){case"function":ve=new _e(We);case"object":if(ve===this||ve.closed||"function"!=typeof ve.unsubscribe)return ve;if(this.closed)return ve.unsubscribe(),ve;if(!(ve instanceof _e)){const at=ve;ve=new _e,ve._subscriptions=[at]}break;default:throw new Error("unrecognized teardown "+We+" added to Subscription.")}let{_parentOrParents:Ge}=ve;if(null===Ge)ve._parentOrParents=this;else if(Ge instanceof _e){if(Ge===this)return ve;ve._parentOrParents=[Ge,this]}else{if(-1!==Ge.indexOf(this))return ve;Ge.push(this)}const Ie=this._subscriptions;return null===Ie?this._subscriptions=[ve]:Ie.push(ve),ve}remove(We){const ve=this._subscriptions;if(ve){const Ge=ve.indexOf(We);-1!==Ge&&ve.splice(Ge,1)}}}var xe;function nt(xe){return xe.reduce((We,ve)=>We.concat(ve instanceof Ke?ve.errors:ve),[])}_e.EMPTY=((xe=new _e).closed=!0,xe)},2494:(Tt,St,ee)=>{"use strict";ee.d(St,{v:()=>_});let Q=!1;const _={Promise:void 0,set useDeprecatedSynchronousErrorHandling(Pe){if(Pe){const we=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+we.stack)}else Q&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Q=Pe},get useDeprecatedSynchronousErrorHandling(){return Q}}},5345:(Tt,St,ee)=>{"use strict";ee.d(St,{IY:()=>we,Ds:()=>_e,ft:()=>xe});var Q=ee(7393),_=ee(7574),Pe=ee(7444);class we extends Q.L{constructor(ve){super(),this.parent=ve}_next(ve){this.parent.notifyNext(ve)}_error(ve){this.parent.notifyError(ve),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class _e extends Q.L{notifyNext(ve){this.destination.next(ve)}notifyError(ve){this.destination.error(ve)}notifyComplete(){this.destination.complete()}}function xe(We,ve){if(ve.closed)return;if(We instanceof _.y)return We.subscribe(ve);let Ge;try{Ge=(0,Pe.s)(We)(ve)}catch(Ie){ve.error(Ie)}return Ge}},2441:(Tt,St,ee)=>{"use strict";ee.d(St,{c:()=>Ke,N:()=>_e});var Q=ee(9765),_=ee(7574),Pe=ee(5319),we=ee(1307);class Ke extends _.y{constructor(Ge,Ie){super(),this.source=Ge,this.subjectFactory=Ie,this._refCount=0,this._isComplete=!1}_subscribe(Ge){return this.getSubject().subscribe(Ge)}getSubject(){const Ge=this._subject;return(!Ge||Ge.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Ge=this._connection;return Ge||(this._isComplete=!1,Ge=this._connection=new Pe.w,Ge.add(this.source.subscribe(new nt(this.getSubject(),this))),Ge.closed&&(this._connection=null,Ge=Pe.w.EMPTY)),Ge}refCount(){return(0,we.x)()(this)}}const _e=(()=>{const ve=Ke.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ve._subscribe},_isComplete:{value:ve._isComplete,writable:!0},getSubject:{value:ve.getSubject},connect:{value:ve.connect},refCount:{value:ve.refCount}}})();class nt extends Q.Yc{constructor(Ge,Ie){super(Ge),this.connectable=Ie}_error(Ge){this._unsubscribe(),super._error(Ge)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Ge=this.connectable;if(Ge){this.connectable=null;const Ie=Ge._connection;Ge._refCount=0,Ge._subject=null,Ge._connection=null,Ie&&Ie.unsubscribe()}}}},8071:(Tt,St,ee)=>{"use strict";ee.d(St,{z:()=>we});var Q=ee(5917),_=ee(3282);function we(...Ke){return(0,_.J)(1)((0,Q.of)(...Ke))}},1439:(Tt,St,ee)=>{"use strict";ee.d(St,{P:()=>we});var Q=ee(7574),_=ee(4402),Pe=ee(9193);function we(Ke){return new Q.y(_e=>{let nt;try{nt=Ke()}catch(We){return void _e.error(We)}return(nt?(0,_.D)(nt):(0,Pe.c)()).subscribe(_e)})}},9193:(Tt,St,ee)=>{"use strict";ee.d(St,{E:()=>_,c:()=>Pe});var Q=ee(7574);const _=new Q.y(Ke=>Ke.complete());function Pe(Ke){return Ke?function(Ke){return new Q.y(_e=>Ke.schedule(()=>_e.complete()))}(Ke):_}},4402:(Tt,St,ee)=>{"use strict";ee.d(St,{D:()=>Se});var Q=ee(7574),_=ee(7444),Pe=ee(5319),we=ee(6554),nt=ee(4087),xe=ee(377),Ge=ee(4072),Ie=ee(9489);function Se(Le,Be){return Be?function(Le,Be){if(null!=Le){if(function(Le){return Le&&"function"==typeof Le[we.L]}(Le))return function(Le,Be){return new Q.y(ge=>{const ue=new Pe.w;return ue.add(Be.schedule(()=>{const Me=Le[we.L]();ue.add(Me.subscribe({next(qe){ue.add(Be.schedule(()=>ge.next(qe)))},error(qe){ue.add(Be.schedule(()=>ge.error(qe)))},complete(){ue.add(Be.schedule(()=>ge.complete()))}}))})),ue})}(Le,Be);if((0,Ge.t)(Le))return function(Le,Be){return new Q.y(ge=>{const ue=new Pe.w;return ue.add(Be.schedule(()=>Le.then(Me=>{ue.add(Be.schedule(()=>{ge.next(Me),ue.add(Be.schedule(()=>ge.complete()))}))},Me=>{ue.add(Be.schedule(()=>ge.error(Me)))}))),ue})}(Le,Be);if((0,Ie.z)(Le))return(0,nt.r)(Le,Be);if(function(Le){return Le&&"function"==typeof Le[xe.hZ]}(Le)||"string"==typeof Le)return function(Le,Be){if(!Le)throw new Error("Iterable cannot be null");return new Q.y(ge=>{const ue=new Pe.w;let Me;return ue.add(()=>{Me&&"function"==typeof Me.return&&Me.return()}),ue.add(Be.schedule(()=>{Me=Le[xe.hZ](),ue.add(Be.schedule(function(){if(ge.closed)return;let qe,Ye;try{const _t=Me.next();qe=_t.value,Ye=_t.done}catch(_t){return void ge.error(_t)}Ye?ge.complete():(ge.next(qe),this.schedule())}))})),ue})}(Le,Be)}throw new TypeError((null!==Le&&typeof Le||Le)+" is not observable")}(Le,Be):Le instanceof Q.y?Le:new Q.y((0,_.s)(Le))}},6693:(Tt,St,ee)=>{"use strict";ee.d(St,{n:()=>we});var Q=ee(7574),_=ee(5015),Pe=ee(4087);function we(Ke,_e){return _e?(0,Pe.r)(Ke,_e):new Q.y((0,_.V)(Ke))}},6682:(Tt,St,ee)=>{"use strict";ee.d(St,{T:()=>Ke});var Q=ee(7574),_=ee(4869),Pe=ee(3282),we=ee(6693);function Ke(..._e){let nt=Number.POSITIVE_INFINITY,xe=null,We=_e[_e.length-1];return(0,_.K)(We)?(xe=_e.pop(),_e.length>1&&"number"==typeof _e[_e.length-1]&&(nt=_e.pop())):"number"==typeof We&&(nt=_e.pop()),null===xe&&1===_e.length&&_e[0]instanceof Q.y?_e[0]:(0,Pe.J)(nt)((0,we.n)(_e,xe))}},5917:(Tt,St,ee)=>{"use strict";ee.d(St,{of:()=>we});var Q=ee(4869),_=ee(6693),Pe=ee(4087);function we(...Ke){let _e=Ke[Ke.length-1];return(0,Q.K)(_e)?(Ke.pop(),(0,Pe.r)(Ke,_e)):(0,_.n)(Ke)}},5304:(Tt,St,ee)=>{"use strict";ee.d(St,{K:()=>_});var Q=ee(5345);function _(Ke){return function(nt){const xe=new Pe(Ke),We=nt.lift(xe);return xe.caught=We}}class Pe{constructor(_e){this.selector=_e}call(_e,nt){return nt.subscribe(new we(_e,this.selector,this.caught))}}class we extends Q.Ds{constructor(_e,nt,xe){super(_e),this.selector=nt,this.caught=xe}error(_e){if(!this.isStopped){let nt;try{nt=this.selector(_e,this.caught)}catch(ve){return void super.error(ve)}this._unsubscribeAndRecycle();const xe=new Q.IY(this);this.add(xe);const We=(0,Q.ft)(nt,xe);We!==xe&&this.add(We)}}}},4612:(Tt,St,ee)=>{"use strict";ee.d(St,{b:()=>_});var Q=ee(9773);function _(Pe,we){return(0,Q.zg)(Pe,we,1)}},5435:(Tt,St,ee)=>{"use strict";ee.d(St,{h:()=>_});var Q=ee(7393);function _(Ke,_e){return function(xe){return xe.lift(new Pe(Ke,_e))}}class Pe{constructor(_e,nt){this.predicate=_e,this.thisArg=nt}call(_e,nt){return nt.subscribe(new we(_e,this.predicate,this.thisArg))}}class we extends Q.L{constructor(_e,nt,xe){super(_e),this.predicate=nt,this.thisArg=xe,this.count=0}_next(_e){let nt;try{nt=this.predicate.call(this.thisArg,_e,this.count++)}catch(xe){return void this.destination.error(xe)}nt&&this.destination.next(_e)}}},8939:(Tt,St,ee)=>{"use strict";ee.d(St,{x:()=>Pe});var Q=ee(7393),_=ee(5319);function Pe(_e){return nt=>nt.lift(new we(_e))}class we{constructor(nt){this.callback=nt}call(nt,xe){return xe.subscribe(new Ke(nt,this.callback))}}class Ke extends Q.L{constructor(nt,xe){super(nt),this.add(new _.w(xe))}}},8002:(Tt,St,ee)=>{"use strict";ee.d(St,{U:()=>_});var Q=ee(7393);function _(Ke,_e){return function(xe){if("function"!=typeof Ke)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return xe.lift(new Pe(Ke,_e))}}class Pe{constructor(_e,nt){this.project=_e,this.thisArg=nt}call(_e,nt){return nt.subscribe(new we(_e,this.project,this.thisArg))}}class we extends Q.L{constructor(_e,nt,xe){super(_e),this.project=nt,this.count=0,this.thisArg=xe||this}_next(_e){let nt;try{nt=this.project.call(this.thisArg,_e,this.count++)}catch(xe){return void this.destination.error(xe)}this.destination.next(nt)}}},3282:(Tt,St,ee)=>{"use strict";ee.d(St,{J:()=>Pe});var Q=ee(9773),_=ee(4487);function Pe(we=Number.POSITIVE_INFINITY){return(0,Q.zg)(_.y,we)}},9773:(Tt,St,ee)=>{"use strict";ee.d(St,{zg:()=>we});var Q=ee(8002),_=ee(4402),Pe=ee(5345);function we(xe,We,ve=Number.POSITIVE_INFINITY){return"function"==typeof We?Ge=>Ge.pipe(we((Ie,at)=>(0,_.D)(xe(Ie,at)).pipe((0,Q.U)((Ft,Se)=>We(Ie,Ft,at,Se))),ve)):("number"==typeof We&&(ve=We),Ge=>Ge.lift(new Ke(xe,ve)))}class Ke{constructor(We,ve=Number.POSITIVE_INFINITY){this.project=We,this.concurrent=ve}call(We,ve){return ve.subscribe(new _e(We,this.project,this.concurrent))}}class _e extends Pe.Ds{constructor(We,ve,Ge=Number.POSITIVE_INFINITY){super(We),this.project=ve,this.concurrent=Ge,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(We){this.active<this.concurrent?this._tryNext(We):this.buffer.push(We)}_tryNext(We){let ve;const Ge=this.index++;try{ve=this.project(We,Ge)}catch(Ie){return void this.destination.error(Ie)}this.active++,this._innerSub(ve)}_innerSub(We){const ve=new Pe.IY(this),Ge=this.destination;Ge.add(ve);const Ie=(0,Pe.ft)(We,ve);Ie!==ve&&Ge.add(Ie)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(We){this.destination.next(We)}notifyComplete(){const We=this.buffer;this.active--,We.length>0?this._next(We.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},1307:(Tt,St,ee)=>{"use strict";ee.d(St,{x:()=>_});var Q=ee(7393);function _(){return function(_e){return _e.lift(new Pe(_e))}}class Pe{constructor(_e){this.connectable=_e}call(_e,nt){const{connectable:xe}=this;xe._refCount++;const We=new we(_e,xe),ve=nt.subscribe(We);return We.closed||(We.connection=xe.connect()),ve}}class we extends Q.L{constructor(_e,nt){super(_e),this.connectable=nt}_unsubscribe(){const{connectable:_e}=this;if(!_e)return void(this.connection=null);this.connectable=null;const nt=_e._refCount;if(nt<=0)return void(this.connection=null);if(_e._refCount=nt-1,nt>1)return void(this.connection=null);const{connection:xe}=this,We=_e._connection;this.connection=null,We&&(!xe||We===xe)&&We.unsubscribe()}}},8819:(Tt,St,ee)=>{"use strict";ee.d(St,{B:()=>nt});var Q=ee(2441);var we=ee(1307),Ke=ee(9765);function _e(){return new Ke.xQ}function nt(){return xe=>(0,we.x)()(function(xe,We){return function(Ge){let Ie;Ie="function"==typeof xe?xe:function(){return xe};const at=Object.create(Ge,Q.N);return at.source=Ge,at.subjectFactory=Ie,at}}(_e)(xe))}},9761:(Tt,St,ee)=>{"use strict";ee.d(St,{O:()=>Pe});var Q=ee(8071),_=ee(4869);function Pe(...we){const Ke=we[we.length-1];return(0,_.K)(Ke)?(we.pop(),_e=>(0,Q.z)(we,_e,Ke)):_e=>(0,Q.z)(we,_e)}},3190:(Tt,St,ee)=>{"use strict";ee.d(St,{w:()=>we});var Q=ee(8002),_=ee(4402),Pe=ee(5345);function we(nt,xe){return"function"==typeof xe?We=>We.pipe(we((ve,Ge)=>(0,_.D)(nt(ve,Ge)).pipe((0,Q.U)((Ie,at)=>xe(ve,Ie,Ge,at))))):We=>We.lift(new Ke(nt))}class Ke{constructor(xe){this.project=xe}call(xe,We){return We.subscribe(new _e(xe,this.project))}}class _e extends Pe.Ds{constructor(xe,We){super(xe),this.project=We,this.index=0}_next(xe){let We;const ve=this.index++;try{We=this.project(xe,ve)}catch(Ge){return void this.destination.error(Ge)}this._innerSub(We)}_innerSub(xe){const We=this.innerSubscription;We&&We.unsubscribe();const ve=new Pe.IY(this),Ge=this.destination;Ge.add(ve),this.innerSubscription=(0,Pe.ft)(xe,ve),this.innerSubscription!==ve&&Ge.add(this.innerSubscription)}_complete(){const{innerSubscription:xe}=this;(!xe||xe.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(xe){this.destination.next(xe)}}},5257:(Tt,St,ee)=>{"use strict";ee.d(St,{q:()=>we});var Q=ee(7393),_=ee(7108),Pe=ee(9193);function we(nt){return xe=>0===nt?(0,Pe.c)():xe.lift(new Ke(nt))}class Ke{constructor(xe){if(this.total=xe,this.total<0)throw new _.W}call(xe,We){return We.subscribe(new _e(xe,this.total))}}class _e extends Q.L{constructor(xe,We){super(xe),this.total=We,this.count=0}_next(xe){const We=this.total,ve=++this.count;ve<=We&&(this.destination.next(xe),ve===We&&(this.destination.complete(),this.unsubscribe()))}}},3342:(Tt,St,ee)=>{"use strict";ee.d(St,{b:()=>we});var Q=ee(7393);function _(){}var Pe=ee(9105);function we(nt,xe,We){return function(Ge){return Ge.lift(new Ke(nt,xe,We))}}class Ke{constructor(xe,We,ve){this.nextOrObserver=xe,this.error=We,this.complete=ve}call(xe,We){return We.subscribe(new _e(xe,this.nextOrObserver,this.error,this.complete))}}class _e extends Q.L{constructor(xe,We,ve,Ge){super(xe),this._tapNext=_,this._tapError=_,this._tapComplete=_,this._tapError=ve||_,this._tapComplete=Ge||_,(0,Pe.m)(We)?(this._context=this,this._tapNext=We):We&&(this._context=We,this._tapNext=We.next||_,this._tapError=We.error||_,this._tapComplete=We.complete||_)}_next(xe){try{this._tapNext.call(this._context,xe)}catch(We){return void this.destination.error(We)}this.destination.next(xe)}_error(xe){try{this._tapError.call(this._context,xe)}catch(We){return void this.destination.error(We)}this.destination.error(xe)}_complete(){try{this._tapComplete.call(this._context)}catch(xe){return void this.destination.error(xe)}return this.destination.complete()}}},4087:(Tt,St,ee)=>{"use strict";ee.d(St,{r:()=>Pe});var Q=ee(7574),_=ee(5319);function Pe(we,Ke){return new Q.y(_e=>{const nt=new _.w;let xe=0;return nt.add(Ke.schedule(function(){xe!==we.length?(_e.next(we[xe++]),_e.closed||nt.add(this.schedule())):_e.complete()})),nt})}},377:(Tt,St,ee)=>{"use strict";ee.d(St,{hZ:()=>_});const _="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Tt,St,ee)=>{"use strict";ee.d(St,{L:()=>Q});const Q="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Tt,St,ee)=>{"use strict";ee.d(St,{b:()=>Q});const Q="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(Tt,St,ee)=>{"use strict";ee.d(St,{W:()=>_});const _=(()=>{function Pe(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return Pe.prototype=Object.create(Error.prototype),Pe})()},7971:(Tt,St,ee)=>{"use strict";ee.d(St,{N:()=>_});const _=(()=>{function Pe(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return Pe.prototype=Object.create(Error.prototype),Pe})()},4449:(Tt,St,ee)=>{"use strict";function Q(_){setTimeout(()=>{throw _},0)}ee.d(St,{z:()=>Q})},4487:(Tt,St,ee)=>{"use strict";function Q(_){return _}ee.d(St,{y:()=>Q})},9796:(Tt,St,ee)=>{"use strict";ee.d(St,{k:()=>Q});const Q=Array.isArray||(_=>_&&"number"==typeof _.length)},9489:(Tt,St,ee)=>{"use strict";ee.d(St,{z:()=>Q});const Q=_=>_&&"number"==typeof _.length&&"function"!=typeof _},9105:(Tt,St,ee)=>{"use strict";function Q(_){return"function"==typeof _}ee.d(St,{m:()=>Q})},1555:(Tt,St,ee)=>{"use strict";function Q(_){return null!==_&&"object"==typeof _}ee.d(St,{K:()=>Q})},4072:(Tt,St,ee)=>{"use strict";function Q(_){return!!_&&"function"!=typeof _.subscribe&&"function"==typeof _.then}ee.d(St,{t:()=>Q})},4869:(Tt,St,ee)=>{"use strict";function Q(_){return _&&"function"==typeof _.schedule}ee.d(St,{K:()=>Q})},7444:(Tt,St,ee)=>{"use strict";ee.d(St,{s:()=>Ge});var Q=ee(5015),_=ee(4449),we=ee(377),_e=ee(6554),xe=ee(9489),We=ee(4072),ve=ee(1555);const Ge=Ie=>{if(Ie&&"function"==typeof Ie[_e.L])return(Ie=>at=>{const Ft=Ie[_e.L]();if("function"!=typeof Ft.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ft.subscribe(at)})(Ie);if((0,xe.z)(Ie))return(0,Q.V)(Ie);if((0,We.t)(Ie))return(Ie=>at=>(Ie.then(Ft=>{at.closed||(at.next(Ft),at.complete())},Ft=>at.error(Ft)).then(null,_.z),at))(Ie);if(Ie&&"function"==typeof Ie[we.hZ])return(Ie=>at=>{const Ft=Ie[we.hZ]();for(;;){let Se;try{Se=Ft.next()}catch(Le){return at.error(Le),at}if(Se.done){at.complete();break}if(at.next(Se.value),at.closed)break}return"function"==typeof Ft.return&&at.add(()=>{Ft.return&&Ft.return()}),at})(Ie);{const Ft=`You provided ${(0,ve.K)(Ie)?"an invalid object":`'${Ie}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ft)}}},5015:(Tt,St,ee)=>{"use strict";ee.d(St,{V:()=>Q});const Q=_=>Pe=>{for(let we=0,Ke=_.length;we<Ke&&!Pe.closed;we++)Pe.next(_[we]);Pe.complete()}},8459:(Tt,St,ee)=>{var Q,_;!function(we){"use strict";void 0!==(_="function"==typeof(Q=function(){if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var we,Ke,_e,nt,xe,We,ve,Ge,Ie,at,Ft,Se,Le,Be,_t,Ue,ht,it,It,xt,te,Ee,Vt,tn,Ot,un,ge=[],ue=!1,Me=!1,qe=!1,Ye=[],Ve=!1,bt=!1,mn=[],Rr=/\s+/g,hr="Sortable"+(new Date).getTime(),pi=window,cn=pi.document,Ht=pi.parseInt,qn=pi.setTimeout,Jt=pi.jQuery||pi.Zepto,Gr=pi.Polymer,Ro={capture:!1,passive:!1},Br=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),Vi=!!navigator.userAgent.match(/Edge/i),Wn=!!navigator.userAgent.match(/firefox/i),Wt=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/android/i)),wr=!!navigator.userAgent.match(/iP(ad|od|hone)/i),en=Vi||Br?"cssFloat":"float",Ln="draggable"in cn.createElement("div"),Et=function(){if(Br)return!1;var W=cn.createElement("x");return W.style.cssText="pointer-events:auto","auto"===W.style.pointerEvents}(),zt=!1,rt=!1,Ae=Math.abs,ke=Math.min,mt=Math.max,Bt=[],vn=function(W,oe){var fe=Vn(W),ct=Ht(fe.width)-Ht(fe.paddingLeft)-Ht(fe.paddingRight)-Ht(fe.borderLeftWidth)-Ht(fe.borderRightWidth),vt=gi(W,0,oe),Lt=gi(W,1,oe),nn=vt&&Vn(vt),Rn=Lt&&Vn(Lt),bn=nn&&Ht(nn.marginLeft)+Ht(nn.marginRight)+tt(vt).width,Tn=Rn&&Ht(Rn.marginLeft)+Ht(Rn.marginRight)+tt(Lt).width;return"flex"===fe.display?"column"===fe.flexDirection||"column-reverse"===fe.flexDirection?"vertical":"horizontal":"grid"===fe.display?fe.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":vt&&"none"!==nn.float?!Lt||"both"!==Rn.clear&&Rn.clear!==("left"===nn.float?"left":"right")?"horizontal":"vertical":vt&&("block"===nn.display||"flex"===nn.display||"table"===nn.display||"grid"===nn.display||bn>=ct&&"none"===fe[en]||Lt&&"none"===fe[en]&&bn+Tn>ct)?"vertical":"horizontal"},Sn=function(W,oe,fe,ct,vt){var Lt=tt(fe),bn="vertical"===ct?W:oe;return("vertical"===ct?Lt.left:Lt.top)<bn&&bn<("vertical"===ct?Lt.right:Lt.bottom)},Mi=function(W,oe){if(!W||!W.getBoundingClientRect)return Yr();var fe=W,ct=!1;do{if(fe.clientWidth<fe.scrollWidth||fe.clientHeight<fe.scrollHeight){var vt=Vn(fe);if(fe.clientWidth<fe.scrollWidth&&("auto"==vt.overflowX||"scroll"==vt.overflowX)||fe.clientHeight<fe.scrollHeight&&("auto"==vt.overflowY||"scroll"==vt.overflowY)){if(!fe||!fe.getBoundingClientRect||fe===cn.body)return Yr();if(ct||oe)return fe;ct=!0}}}while(fe=fe.parentNode);return Yr()},Yr=function(){return Br?cn.documentElement:cn.scrollingElement},kr=function(W,oe,fe){W.scrollLeft+=oe,W.scrollTop+=fe},Kr=vs(function(W,oe,fe,ct){if(oe.scroll){var vt=fe?fe[hr]:window,Lt=oe.scrollSensitivity,nn=oe.scrollSpeed,Rn=W.clientX,bn=W.clientY,Tn=Yr(),Tr=!1;Ie!==fe&&(Cr(),at=oe.scrollFn,!0===(Ge=oe.scroll)&&(Ge=Mi(fe,!0),Ie=Ge));var Jn=0,Nr=Ge;do{var ao,yo,us,eo,Ws,fl,Ys,da,Yi,Fr=Nr,Oo=tt(Fr),Fi=Oo.top,qr=Oo.bottom,Ts=Oo.left,Xo=Oo.right,Hs=Oo.width,ho=Oo.height;if(ao=Fr.scrollWidth,yo=Fr.scrollHeight,us=Vn(Fr),da=Fr.scrollLeft,Yi=Fr.scrollTop,Fr===Tn?(fl=Hs<ao&&("auto"===us.overflowX||"scroll"===us.overflowX||"visible"===us.overflowX),Ys=ho<yo&&("auto"===us.overflowY||"scroll"===us.overflowY||"visible"===us.overflowY)):(fl=Hs<ao&&("auto"===us.overflowX||"scroll"===us.overflowX),Ys=ho<yo&&("auto"===us.overflowY||"scroll"===us.overflowY)),eo=fl&&(Ae(Xo-Rn)<=Lt&&da+Hs<ao)-(Ae(Ts-Rn)<=Lt&&!!da),Ws=Ys&&(Ae(qr-bn)<=Lt&&Yi+ho<yo)-(Ae(Fi-bn)<=Lt&&!!Yi),!ge[Jn])for(var Oi=0;Oi<=Jn;Oi++)ge[Oi]||(ge[Oi]={});(ge[Jn].vx!=eo||ge[Jn].vy!=Ws||ge[Jn].el!==Fr)&&(ge[Jn].el=Fr,ge[Jn].vx=eo,ge[Jn].vy=Ws,clearInterval(ge[Jn].pid),Fr&&(0!=eo||0!=Ws)&&(Tr=!0,ge[Jn].pid=setInterval(function(){ct&&0===this.layer&&(Sr.active._emulateDragOver(!0),Sr.active._onTouchMove(It,!0));var pl=ge[this.layer].vy?ge[this.layer].vy*nn:0,qs=ge[this.layer].vx?ge[this.layer].vx*nn:0;"function"==typeof at&&"continue"!==at.call(vt,qs,pl,W,It,ge[this.layer].el)||kr(ge[this.layer].el,qs,pl)}.bind({layer:Jn}),24))),Jn++}while(oe.bubbleScroll&&Nr!==Tn&&(Nr=Mi(Nr,!1)));ue=Tr}},30),Cr=function(){ge.forEach(function(W){clearInterval(W.pid)}),ge=[]},rn=function(W){function oe(vt,Lt){return function(nn,Rn,bn,Tn){if(null==vt&&(Lt||nn.options.group.name&&Rn.options.group.name&&nn.options.group.name===Rn.options.group.name))return!0;if(null==vt||!1===vt)return!1;if(Lt&&"clone"===vt)return vt;if("function"==typeof vt)return oe(vt(nn,Rn,bn,Tn),Lt)(nn,Rn,bn,Tn);var Jn=(Lt?nn:Rn).options.group.name;return!0===vt||"string"==typeof vt&&vt===Jn||vt.join&&vt.indexOf(Jn)>-1}}var fe={},ct=W.group;(!ct||"object"!=typeof ct)&&(ct={name:ct}),fe.name=ct.name,fe.checkPull=oe(ct.pull,!0),fe.checkPut=oe(ct.put),fe.revertClone=ct.revertClone,W.group=fe},ce=function(W){!we||!we.parentNode||we.parentNode[hr]&&we.parentNode[hr]._computeIsAligned(W)},pe=function(W,oe){for(var fe=oe;!fe[hr];)fe=fe.parentNode;return W===fe},Ze=function(W,oe,fe){for(var ct=W.parentNode;ct&&!ct[hr];)ct=ct.parentNode;ct&&ct[hr][fe](vi(oe,{artificialBubble:!0}))},At=function(){!Et&&_e&&Vn(_e,"display","none")},_n=function(){!Et&&_e&&Vn(_e,"display","")};cn.addEventListener("click",function(W){if(qe)return W.preventDefault(),W.stopPropagation&&W.stopPropagation(),W.stopImmediatePropagation&&W.stopImmediatePropagation(),qe=!1,!1},!0);var Nn,_r=function(W){if(W=W.touches?W.touches[0]:W,we){var oe=function(W,oe){for(var fe=0;fe<Ye.length;fe++)if(!Wo(Ye[fe])){var ct=tt(Ye[fe]),vt=Ye[fe][hr].options.emptyInsertThreshold;if(W>=ct.left-vt&&W<=ct.right+vt&&oe>=ct.top-vt&&oe<=ct.bottom+vt)return Ye[fe]}}(W.clientX,W.clientY);oe&&oe[hr]._onDragOver({clientX:W.clientX,clientY:W.clientY,target:oe,rootEl:oe})}};function Sr(W,oe){if(!W||!W.nodeType||1!==W.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(W);this.el=W,this.options=oe=vi({},oe),W[hr]=this;var fe={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(W.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return vn(W,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(Lt,nn){Lt.setData("Text",nn.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:Ht(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Sr.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var ct in fe)!(ct in oe)&&(oe[ct]=fe[ct]);for(var vt in rn(oe),this)"_"===vt.charAt(0)&&"function"==typeof this[vt]&&(this[vt]=this[vt].bind(this));this.nativeDraggable=!oe.forceFallback&&Ln,this.nativeDraggable&&(this.options.touchStartThreshold=1),oe.supportPointer?or(W,"pointerdown",this._onTapStart):(or(W,"mousedown",this._onTapStart),or(W,"touchstart",this._onTapStart)),this.nativeDraggable&&(or(W,"dragover",this),or(W,"dragenter",this)),Ye.push(this.el),oe.store&&oe.store.get&&this.sort(oe.store.get(this)||[])}function Zr(W,oe,fe,ct){if(W){fe=fe||cn;do{if(null!=oe&&(">"===oe[0]&&W.parentNode===fe&&mi(W,oe.substring(1))||mi(W,oe))||ct&&W===fe)return W;if(W===fe)break}while(W=zi(W))}return null}function zi(W){return W.host&&W!==cn&&W.host.nodeType?W.host:W.parentNode}function or(W,oe,fe){W.addEventListener(oe,fe,Ro)}function cr(W,oe,fe){W.removeEventListener(oe,fe,Ro)}function fr(W,oe,fe){if(W&&oe)if(W.classList)W.classList[fe?"add":"remove"](oe);else{var ct=(" "+W.className+" ").replace(Rr," ").replace(" "+oe+" "," ");W.className=(ct+(fe?" "+oe:"")).replace(Rr," ")}}function Vn(W,oe,fe){var ct=W&&W.style;if(ct){if(void 0===fe)return cn.defaultView&&cn.defaultView.getComputedStyle?fe=cn.defaultView.getComputedStyle(W,""):W.currentStyle&&(fe=W.currentStyle),void 0===oe?fe:fe[oe];!(oe in ct)&&-1===oe.indexOf("webkit")&&(oe="-webkit-"+oe),ct[oe]=fe+("string"==typeof fe?"":"px")}}function To(W){var oe="";do{var fe=Vn(W,"transform");fe&&"none"!==fe&&(oe=fe+" "+oe)}while(W=W.parentNode);return window.DOMMatrix?new DOMMatrix(oe):window.WebKitCSSMatrix?new WebKitCSSMatrix(oe):window.CSSMatrix?new CSSMatrix(oe):void 0}function hl(W,oe,fe){if(W){var ct=W.getElementsByTagName(oe),vt=0,Lt=ct.length;if(fe)for(;vt<Lt;vt++)fe(ct[vt],vt);return ct}return[]}function Hi(W,oe,fe,ct,vt,Lt,nn,Rn,bn){var Tn,Tr=(W=W||oe[hr]).options,Jn="on"+fe.charAt(0).toUpperCase()+fe.substr(1);!window.CustomEvent||Br||Vi?(Tn=cn.createEvent("Event")).initEvent(fe,!0,!0):Tn=new CustomEvent(fe,{bubbles:!0,cancelable:!0}),Tn.to=vt||oe,Tn.from=Lt||oe,Tn.item=ct||oe,Tn.clone=nt,Tn.oldIndex=nn,Tn.newIndex=Rn,Tn.originalEvent=bn,Tn.pullMode=Be?Be.lastPutMode:void 0,oe&&oe.dispatchEvent(Tn),Tr[Jn]&&Tr[Jn].call(W,Tn)}function $s(W,oe,fe,ct,vt,Lt,nn,Rn){var bn,Jn,Tn=W[hr],Tr=Tn.options.onMove;return!window.CustomEvent||Br||Vi?(bn=cn.createEvent("Event")).initEvent("move",!0,!0):bn=new CustomEvent("move",{bubbles:!0,cancelable:!0}),bn.to=oe,bn.from=W,bn.dragged=fe,bn.draggedRect=ct,bn.related=vt||oe,bn.relatedRect=Lt||tt(oe),bn.willInsertAfter=Rn,bn.originalEvent=nn,W.dispatchEvent(bn),Tr&&(Jn=Tr.call(Tn,bn,nn)),Jn}function Ho(W){W.draggable=!1}function ns(){zt=!1}function gi(W,oe,fe){for(var ct=0,vt=0,Lt=W.children;vt<Lt.length;){if("none"!==Lt[vt].style.display&&Lt[vt]!==_e&&Lt[vt]!==we&&Zr(Lt[vt],fe.draggable,W,!1)){if(ct===oe)return Lt[vt];ct++}vt++}return null}function Wo(W){for(var oe=W.lastElementChild;oe&&(oe===_e||"none"===oe.style.display);)oe=oe.previousElementSibling;return oe||null}function xr(W){return er(we)<er(W)?1:-1}function Xt(W){for(var oe=W.tagName+W.className+W.src+W.href+W.textContent,fe=oe.length,ct=0;fe--;)ct+=oe.charCodeAt(fe);return ct.toString(36)}function er(W,oe){var fe=0;if(!W||!W.parentNode)return-1;for(;W&&(W=W.previousElementSibling);)"TEMPLATE"!==W.nodeName.toUpperCase()&&W!==nt&&fe++;return fe}function mi(W,oe){if(W)try{if(W.matches)return W.matches(oe);if(W.msMatchesSelector)return W.msMatchesSelector(oe);if(W.webkitMatchesSelector)return W.webkitMatchesSelector(oe)}catch(fe){return!1}return!1}function vs(W,oe){return function(){if(!Nn){var fe=arguments,ct=this;Nn=qn(function(){1===fe.length?W.call(ct,fe[0]):W.apply(ct,fe),Nn=void 0},oe)}}}function vi(W,oe){if(W&&oe)for(var fe in oe)oe.hasOwnProperty(fe)&&(W[fe]=oe[fe]);return W}function Wi(W){return Gr&&Gr.dom?Gr.dom(W).cloneNode(!0):Jt?Jt(W).clone(!0)[0]:W.cloneNode(!0)}function qo(W){return qn(W,0)}function Zn(W){return clearTimeout(W)}function tt(W,oe,fe,ct){if(W.getBoundingClientRect||W===pi){var vt,Lt,nn,Rn,bn,Tn,Tr;if(W!==pi&&W!==Yr()?(Lt=(vt=W.getBoundingClientRect()).top,nn=vt.left,Rn=vt.bottom,bn=vt.right,Tn=vt.height,Tr=vt.width):(Lt=0,nn=0,Rn=window.innerHeight,bn=window.innerWidth,Tn=window.innerHeight,Tr=window.innerWidth),ct&&W!==pi&&(fe=fe||W.parentNode,!Br))do{if(fe&&fe.getBoundingClientRect&&"none"!==Vn(fe,"transform")){var Jn=fe.getBoundingClientRect();Lt-=Jn.top+Ht(Vn(fe,"border-top-width")),nn-=Jn.left+Ht(Vn(fe,"border-left-width")),Rn=Lt+vt.height,bn=nn+vt.width;break}}while(fe=fe.parentNode);if(oe&&W!==pi){var Nr=To(fe||W),Fr=Nr&&Nr.a,Oo=Nr&&Nr.d;Nr&&(Rn=(Lt/=Oo)+(Tn/=Oo),bn=(nn/=Fr)+(Tr/=Fr))}return{top:Lt,left:nn,bottom:Rn,right:bn,width:Tr,height:Tn}}}function Je(W,oe){for(var fe=Mi(W,!0),ct=tt(W)[oe];fe;){var vt=tt(fe)[oe];if(!("top"===oe||"left"===oe?ct>=vt:ct<=vt))return fe;if(fe===Yr())break;fe=Mi(fe,!1)}return!1}function Te(W){var oe=0,fe=0,ct=Yr();if(W)do{var vt=To(W);oe+=W.scrollLeft*vt.a,fe+=W.scrollTop*vt.d}while(W!==ct&&(W=W.parentNode));return[oe,fe]}return or(cn,"dragover",_r),or(cn,"mousemove",_r),or(cn,"touchmove",_r),Sr.prototype={constructor:Sr,_computeIsAligned:function(W){var oe;if(_e&&!Et?(At(),oe=cn.elementFromPoint(W.clientX,W.clientY),_n()):oe=W.target,oe=Zr(oe,this.options.draggable,this.el,!1),!rt&&we&&we.parentNode===this.el){for(var fe=this.el.children,ct=0;ct<fe.length;ct++)Zr(fe[ct],this.options.draggable,this.el,!1)&&fe[ct]!==oe&&(fe[ct].sortableMouseAligned=Sn(W.clientX,W.clientY,fe[ct],this._getDirection(W,null)));Zr(oe,this.options.draggable,this.el,!0)||(te=null),rt=!0,qn(function(){rt=!1},30)}},_getDirection:function(W,oe){return"function"==typeof this.options.direction?this.options.direction.call(this,W,oe,we):this.options.direction},_onTapStart:function(W){if(W.cancelable){var Tr,oe=this,fe=this.el,ct=this.options,vt=ct.preventOnFilter,Lt=W.type,nn=W.touches&&W.touches[0],Rn=(nn||W).target,bn=W.target.shadowRoot&&(W.path&&W.path[0]||W.composedPath&&W.composedPath()[0])||Rn,Tn=ct.filter;if(function(W){Bt.length=0;for(var oe=W.getElementsByTagName("input"),fe=oe.length;fe--;){var ct=oe[fe];ct.checked&&Bt.push(ct)}}(fe),(!Br||W.artificialBubble||pe(fe,Rn))&&!we&&!(/mousedown|pointerdown/.test(Lt)&&0!==W.button||ct.disabled)&&!bn.isContentEditable){if(!(Rn=Zr(Rn,ct.draggable,fe,!1)))return void(Br&&Ze(fe,W,"_onTapStart"));if(ve!==Rn){if(Tr=er(Rn),"function"==typeof Tn){if(Tn.call(this,W,Rn,this))return Hi(oe,bn,"filter",Rn,fe,fe,Tr),void(vt&&W.cancelable&&W.preventDefault())}else if(Tn&&(Tn=Tn.split(",").some(function(Jn){if(Jn=Zr(bn,Jn.trim(),fe,!1))return Hi(oe,Jn,"filter",Rn,fe,fe,Tr),!0})))return void(vt&&W.cancelable&&W.preventDefault());ct.handle&&!Zr(bn,ct.handle,fe,!1)||this._prepareDragStart(W,nn,Rn,Tr)}}}},_handleAutoScroll:function(W,oe){if(we&&this.options.scroll){var fe=W.clientX,ct=W.clientY,vt=cn.elementFromPoint(fe,ct),Lt=this;if(oe||Vi||Br||Wt){Kr(W,Lt.options,vt,oe);var nn=Mi(vt,!0);ue&&(!_t||fe!==Ue||ct!==ht)&&(_t&&clearInterval(_t),_t=setInterval(function(){if(we){var Rn=Mi(cn.elementFromPoint(fe,ct),!0);Rn!==nn&&(nn=Rn,Cr(),Kr(W,Lt.options,nn,oe))}},10),Ue=fe,ht=ct)}else{if(!Lt.options.bubbleScroll||Mi(vt,!0)===Yr())return void Cr();Kr(W,Lt.options,Mi(vt,!1),!1)}}},_prepareDragStart:function(W,oe,fe,ct){var bn,vt=this,Lt=vt.el,nn=vt.options,Rn=Lt.ownerDocument;fe&&!we&&fe.parentNode===Lt&&(xe=Lt,Ke=(we=fe).parentNode,We=we.nextSibling,ve=fe,Le=nn.group,Ft=ct,it={target:we,clientX:(oe||W).clientX,clientY:(oe||W).clientY},this._lastX=(oe||W).clientX,this._lastY=(oe||W).clientY,we.style["will-change"]="all",we.style.transition="",we.style.transform="",bn=function(){vt._disableDelayedDragEvents(),!Wn&&vt.nativeDraggable&&(we.draggable=!0),vt._triggerDragStart(W,oe),Hi(vt,xe,"choose",we,xe,xe,Ft),fr(we,nn.chosenClass,!0)},nn.ignore.split(",").forEach(function(Tn){hl(we,Tn.trim(),Ho)}),nn.supportPointer?or(Rn,"pointerup",vt._onDrop):(or(Rn,"mouseup",vt._onDrop),or(Rn,"touchend",vt._onDrop),or(Rn,"touchcancel",vt._onDrop)),Wn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,we.draggable=!0),!nn.delay||this.nativeDraggable&&(Vi||Br)?bn():(or(Rn,"mouseup",vt._disableDelayedDrag),or(Rn,"touchend",vt._disableDelayedDrag),or(Rn,"touchcancel",vt._disableDelayedDrag),or(Rn,"mousemove",vt._delayedDragTouchMoveHandler),or(Rn,"touchmove",vt._delayedDragTouchMoveHandler),nn.supportPointer&&or(Rn,"pointermove",vt._delayedDragTouchMoveHandler),vt._dragStartTimer=qn(bn,nn.delay)))},_delayedDragTouchMoveHandler:function(W){var oe=W.touches?W.touches[0]:W;mt(Ae(oe.clientX-this._lastX),Ae(oe.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){we&&Ho(we),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var W=this.el.ownerDocument;cr(W,"mouseup",this._disableDelayedDrag),cr(W,"touchend",this._disableDelayedDrag),cr(W,"touchcancel",this._disableDelayedDrag),cr(W,"mousemove",this._delayedDragTouchMoveHandler),cr(W,"touchmove",this._delayedDragTouchMoveHandler),cr(W,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(W,oe){oe=oe||("touch"==W.pointerType?W:null),!this.nativeDraggable||oe?or(cn,this.options.supportPointer?"pointermove":oe?"touchmove":"mousemove",this._onTouchMove):(or(we,"dragend",this),or(xe,"dragstart",this._onDragStart));try{cn.selection?qo(function(){cn.selection.empty()}):window.getSelection().removeAllRanges()}catch(fe){}},_dragStarted:function(W,oe){if(Me=!1,xe&&we){this.nativeDraggable&&(or(cn,"dragover",this._handleAutoScroll),or(cn,"dragover",ce));var fe=this.options;!W&&fr(we,fe.dragClass,!1),fr(we,fe.ghostClass,!0),Vn(we,"transform",""),Sr.active=this,W&&this._appendGhost(),Hi(this,xe,"start",we,xe,xe,Ft,void 0,oe)}else this._nulling()},_emulateDragOver:function(W){if(It){if(this._lastX===It.clientX&&this._lastY===It.clientY&&!W)return;this._lastX=It.clientX,this._lastY=It.clientY,At();for(var oe=cn.elementFromPoint(It.clientX,It.clientY),fe=oe;oe&&oe.shadowRoot;)fe=oe=oe.shadowRoot.elementFromPoint(It.clientX,It.clientY);if(fe)do{if(fe[hr]&&fe[hr]._onDragOver({clientX:It.clientX,clientY:It.clientY,target:oe,rootEl:fe})&&!this.options.dragoverBubble)break;oe=fe}while(fe=fe.parentNode);we.parentNode[hr]._computeIsAligned(It),_n()}},_onTouchMove:function(W,oe){if(it){var fe=this.options,ct=fe.fallbackTolerance,vt=fe.fallbackOffset,Lt=W.touches?W.touches[0]:W,nn=_e&&To(_e),Rn=_e&&nn&&nn.a,bn=_e&&nn&&nn.d,Tn=wr&&Ot&&Te(Ot),Tr=(Lt.clientX-it.clientX+vt.x)/(Rn||1)+(Tn?Tn[0]-mn[0]:0)/(Rn||1),Jn=(Lt.clientY-it.clientY+vt.y)/(bn||1)+(Tn?Tn[1]-mn[1]:0)/(bn||1),Nr=W.touches?"translate3d("+Tr+"px,"+Jn+"px,0)":"translate("+Tr+"px,"+Jn+"px)";if(!Sr.active&&!Me){if(ct&&ke(Ae(Lt.clientX-this._lastX),Ae(Lt.clientY-this._lastY))<ct)return;this._onDragStart(W,!0)}!oe&&this._handleAutoScroll(Lt,!0),xt=!0,It=Lt,Vn(_e,"webkitTransform",Nr),Vn(_e,"mozTransform",Nr),Vn(_e,"msTransform",Nr),Vn(_e,"transform",Nr),W.cancelable&&W.preventDefault()}},_appendGhost:function(){if(!_e){var W=this.options.fallbackOnBody?cn.body:xe,oe=tt(we,!0,W,!wr),ct=(Vn(we),this.options);if(wr){for(Ot=W;"static"===Vn(Ot,"position")&&"none"===Vn(Ot,"transform")&&Ot!==cn;)Ot=Ot.parentNode;if(Ot!==cn){var vt=tt(Ot,!0);oe.top-=vt.top,oe.left-=vt.left}Ot!==cn.body&&Ot!==cn.documentElement?(Ot===cn&&(Ot=Yr()),oe.top+=Ot.scrollTop,oe.left+=Ot.scrollLeft):Ot=Yr(),mn=Te(Ot)}fr(_e=we.cloneNode(!0),ct.ghostClass,!1),fr(_e,ct.fallbackClass,!0),fr(_e,ct.dragClass,!0),Vn(_e,"box-sizing","border-box"),Vn(_e,"margin",0),Vn(_e,"top",oe.top),Vn(_e,"left",oe.left),Vn(_e,"width",oe.width),Vn(_e,"height",oe.height),Vn(_e,"opacity","0.8"),Vn(_e,"position",wr?"absolute":"fixed"),Vn(_e,"zIndex","100000"),Vn(_e,"pointerEvents","none"),W.appendChild(_e)}},_onDragStart:function(W,oe){var fe=this,ct=W.dataTransfer,vt=fe.options;(nt=Wi(we)).draggable=!1,nt.style["will-change"]="",this._hideClone(),fr(nt,fe.options.chosenClass,!1),fe._cloneId=qo(function(){fe.options.removeCloneOnHide||xe.insertBefore(nt,we),Hi(fe,xe,"clone",we)}),!oe&&fr(we,vt.dragClass,!0),oe?(qe=!0,fe._loopId=setInterval(fe._emulateDragOver,50)):(cr(cn,"mouseup",fe._onDrop),cr(cn,"touchend",fe._onDrop),cr(cn,"touchcancel",fe._onDrop),ct&&(ct.effectAllowed="move",vt.setData&&vt.setData.call(fe,ct,we)),or(cn,"drop",fe),Vn(we,"transform","translateZ(0)")),Me=!0,fe._dragStartId=qo(fe._dragStarted.bind(fe,oe,W)),or(cn,"selectstart",fe),Wt&&Vn(cn.body,"user-select","none")},_onDragOver:function(W){var ct,vt,Lt,oe=this.el,fe=W.target,nn=this.options,Rn=nn.group,bn=Sr.active,Tn=Le===Rn,Tr=nn.sort,Jn=this;if(!zt&&(!Br||W.rootEl||W.artificialBubble||pe(oe,fe))){if(void 0!==W.preventDefault&&W.cancelable&&W.preventDefault(),xt=!0,fe=Zr(fe,nn.draggable,oe,!0),Zr(W.target,null,we,!0)||fe.animated)return Nr(!1);if(fe!==we&&(qe=!1),bn&&!nn.disabled&&(Tn?Tr||(Lt=!xe.contains(we)):Be===this||(this.lastPutMode=Le.checkPull(this,bn,we,W))&&Rn.checkPut(this,bn,we,W))){var Oo=this._getDirection(W,fe);if(ct=tt(we),Lt)return this._hideClone(),Ke=xe,We?xe.insertBefore(we,We):xe.appendChild(we),Nr(!0);var Fi=Wo(oe);if(!Fi||function(W,oe,fe){var ct=tt(Wo(fe)),vt="vertical"===oe?W.clientY:W.clientX,Lt="vertical"===oe?W.clientX:W.clientY,nn="vertical"===oe?ct.bottom:ct.right,Rn="vertical"===oe?ct.left:ct.top,bn="vertical"===oe?ct.right:ct.bottom;return"vertical"===oe?Lt>bn+10||Lt<=bn&&vt>nn&&Lt>=Rn:vt>nn&&Lt>Rn||vt<=nn&&Lt>bn+10}(W,Oo,oe)&&!Fi.animated){if(Fi&&oe===W.target&&(fe=Fi),fe&&(vt=tt(fe)),Tn?bn._hideClone():bn._showClone(this),!1!==$s(xe,oe,we,ct,fe,vt,W,!!fe))return oe.appendChild(we),Ke=oe,un=null,Fr(),Nr(!0)}else if(fe&&fe!==we&&fe.parentNode===oe){var Ts,qr=0,Xo=fe.sortableMouseAligned,Hs=we.parentNode!==oe,ho="vertical"===Oo?"top":"left",ao=Je(fe,"top")||Je(we,"top"),yo=ao?ao.scrollTop:void 0;if(te!==fe&&(Vt=null,Ts=tt(fe)[ho],Ve=!1),function(W,oe,fe){var ct=W===we&&un||tt(W),vt=oe===we&&un||tt(oe),Lt="vertical"===fe?ct.left:ct.top,bn="vertical"===fe?vt.left:vt.top;return Lt===bn||("vertical"===fe?ct.right:ct.bottom)===("vertical"===fe?vt.right:vt.bottom)||Lt+("vertical"===fe?ct.width:ct.height)/2===bn+("vertical"===fe?vt.width:vt.height)/2}(we,fe,Oo)&&Xo||Hs||ao||nn.invertSwap||"insert"===Vt||"swap"===Vt?("swap"!==Vt&&(bt=nn.invertSwap||Hs),qr=function(W,oe,fe,ct,vt,Lt,nn){var Rn=tt(oe),bn="vertical"===fe?W.clientY:W.clientX,Tn="vertical"===fe?Rn.height:Rn.width,Tr="vertical"===fe?Rn.top:Rn.left,Jn="vertical"===fe?Rn.bottom:Rn.right,Fr=(tt(we),!1);if(!Lt)if(nn&&tn<Tn*ct){if(!Ve&&(1===Ee?bn>Tr+Tn*vt/2:bn<Jn-Tn*vt/2)&&(Ve=!0),Ve)Fr=!0;else if(1===Ee?bn<Tr+tn:bn>Jn-tn)return-1*Ee}else if(bn>Tr+Tn*(1-ct)/2&&bn<Jn-Tn*(1-ct)/2)return xr(oe);return(Fr=Fr||Lt)&&(bn<Tr+Tn*vt/2||bn>Jn-Tn*vt/2)?bn>Tr+Tn/2?1:-1:0}(W,fe,Oo,nn.swapThreshold,null==nn.invertedSwapThreshold?nn.swapThreshold:nn.invertedSwapThreshold,bt,te===fe),Vt="swap"):(qr=xr(fe),Vt="insert"),0===qr)return Nr(!1);un=null,te=fe,Ee=qr,vt=tt(fe);var us=fe.nextElementSibling,eo=!1,Ws=$s(xe,oe,we,ct,fe,vt,W,eo=1===qr);if(!1!==Ws)return(1===Ws||-1===Ws)&&(eo=1===Ws),zt=!0,qn(ns,30),Tn?bn._hideClone():bn._showClone(this),eo&&!us?oe.appendChild(we):fe.parentNode.insertBefore(we,eo?us:fe),ao&&kr(ao,0,yo-ao.scrollTop),Ke=we.parentNode,void 0!==Ts&&!bt&&(tn=Ae(Ts-tt(fe)[ho])),Fr(),Nr(!0)}if(oe.contains(we))return Nr(!1)}return Br&&!W.rootEl&&Ze(oe,W,"_onDragOver"),!1}function Nr(fl){return fl&&(Tn?bn._hideClone():bn._showClone(Jn),bn&&(fr(we,Be?Be.options.ghostClass:bn.options.ghostClass,!1),fr(we,nn.ghostClass,!0)),Be!==Jn&&Jn!==Sr.active?Be=Jn:Jn===Sr.active&&(Be=null),ct&&Jn._animate(ct,we),fe&&vt&&Jn._animate(vt,fe)),(fe===we&&!we.animated||fe===oe&&!fe.animated)&&(te=null),!nn.dragoverBubble&&!W.rootEl&&fe!==cn&&(Jn._handleAutoScroll(W),we.parentNode[hr]._computeIsAligned(W)),!nn.dragoverBubble&&W.stopPropagation&&W.stopPropagation(),!0}function Fr(){Hi(Jn,xe,"change",fe,oe,xe,Ft,er(we),W)}},_animate:function(W,oe){var fe=this.options.animation;if(fe){var ct=tt(oe);if(oe===we&&(un=ct),1===W.nodeType&&(W=tt(W)),W.left+W.width/2!==ct.left+ct.width/2||W.top+W.height/2!==ct.top+ct.height/2){var vt=To(this.el),Lt=vt&&vt.a,nn=vt&&vt.d;Vn(oe,"transition","none"),Vn(oe,"transform","translate3d("+(W.left-ct.left)/(Lt||1)+"px,"+(W.top-ct.top)/(nn||1)+"px,0)"),Vn(oe,"transition","transform "+fe+"ms"+(this.options.easing?" "+this.options.easing:"")),Vn(oe,"transform","translate3d(0,0,0)")}"number"==typeof oe.animated&&clearTimeout(oe.animated),oe.animated=qn(function(){Vn(oe,"transition",""),Vn(oe,"transform",""),oe.animated=!1},fe)}},_offUpEvents:function(){var W=this.el.ownerDocument;cr(cn,"touchmove",this._onTouchMove),cr(cn,"pointermove",this._onTouchMove),cr(W,"mouseup",this._onDrop),cr(W,"touchend",this._onDrop),cr(W,"pointerup",this._onDrop),cr(W,"touchcancel",this._onDrop),cr(cn,"selectstart",this)},_onDrop:function(W){var oe=this.el,fe=this.options;Me=!1,ue=!1,bt=!1,Ve=!1,clearInterval(this._loopId),clearInterval(_t),Cr(),clearTimeout(Nn),Nn=void 0,clearTimeout(this._dragStartTimer),Zn(this._cloneId),Zn(this._dragStartId),cr(cn,"mousemove",this._onTouchMove),this.nativeDraggable&&(cr(cn,"drop",this),cr(oe,"dragstart",this._onDragStart),cr(cn,"dragover",this._handleAutoScroll),cr(cn,"dragover",ce)),Wt&&Vn(cn.body,"user-select",""),this._offUpEvents(),W&&(xt&&(W.cancelable&&W.preventDefault(),!fe.dropBubble&&W.stopPropagation()),_e&&_e.parentNode&&_e.parentNode.removeChild(_e),(xe===Ke||Be&&"clone"!==Be.lastPutMode)&&nt&&nt.parentNode&&nt.parentNode.removeChild(nt),we&&(this.nativeDraggable&&cr(we,"dragend",this),Ho(we),we.style["will-change"]="",fr(we,Be?Be.options.ghostClass:this.options.ghostClass,!1),fr(we,this.options.chosenClass,!1),Hi(this,xe,"unchoose",we,Ke,xe,Ft,null,W),xe!==Ke?((Se=er(we))>=0&&(Hi(null,Ke,"add",we,Ke,xe,Ft,Se,W),Hi(this,xe,"remove",we,Ke,xe,Ft,Se,W),Hi(null,Ke,"sort",we,Ke,xe,Ft,Se,W),Hi(this,xe,"sort",we,Ke,xe,Ft,Se,W)),Be&&Be.save()):we.nextSibling!==We&&(Se=er(we))>=0&&(Hi(this,xe,"update",we,Ke,xe,Ft,Se,W),Hi(this,xe,"sort",we,Ke,xe,Ft,Se,W)),Sr.active&&((null==Se||-1===Se)&&(Se=Ft),Hi(this,xe,"end",we,Ke,xe,Ft,Se,W),this.save()))),this._nulling()},_nulling:function(){xe=we=Ke=_e=We=nt=ve=Ge=Ie=ge.length=_t=Ue=ht=it=It=xt=Se=Ft=te=Ee=un=Be=Le=Sr.active=null,Bt.forEach(function(W){W.checked=!0}),Bt.length=0},handleEvent:function(W){switch(W.type){case"drop":case"dragend":this._onDrop(W);break;case"dragenter":case"dragover":we&&(this._onDragOver(W),function(W){W.dataTransfer&&(W.dataTransfer.dropEffect="move"),W.cancelable&&W.preventDefault()}(W));break;case"selectstart":W.preventDefault()}},toArray:function(){for(var oe,W=[],fe=this.el.children,ct=0,vt=fe.length,Lt=this.options;ct<vt;ct++)Zr(oe=fe[ct],Lt.draggable,this.el,!1)&&W.push(oe.getAttribute(Lt.dataIdAttr)||Xt(oe));return W},sort:function(W){var oe={},fe=this.el;this.toArray().forEach(function(ct,vt){var Lt=fe.children[vt];Zr(Lt,this.options.draggable,fe,!1)&&(oe[ct]=Lt)},this),W.forEach(function(ct){oe[ct]&&(fe.removeChild(oe[ct]),fe.appendChild(oe[ct]))})},save:function(){var W=this.options.store;W&&W.set&&W.set(this)},closest:function(W,oe){return Zr(W,oe||this.options.draggable,this.el,!1)},option:function(W,oe){var fe=this.options;if(void 0===oe)return fe[W];fe[W]=oe,"group"===W&&rn(fe)},destroy:function(){var W=this.el;W[hr]=null,cr(W,"mousedown",this._onTapStart),cr(W,"touchstart",this._onTapStart),cr(W,"pointerdown",this._onTapStart),this.nativeDraggable&&(cr(W,"dragover",this),cr(W,"dragenter",this)),Array.prototype.forEach.call(W.querySelectorAll("[draggable]"),function(oe){oe.removeAttribute("draggable")}),this._onDrop(),Ye.splice(Ye.indexOf(this.el),1),this.el=W=null},_hideClone:function(){nt.cloneHidden||(Vn(nt,"display","none"),nt.cloneHidden=!0,nt.parentNode&&this.options.removeCloneOnHide&&nt.parentNode.removeChild(nt))},_showClone:function(W){"clone"===W.lastPutMode?nt.cloneHidden&&(xe.contains(we)&&!this.options.group.revertClone?xe.insertBefore(nt,we):We?xe.insertBefore(nt,We):xe.appendChild(nt),this.options.group.revertClone&&this._animate(we,nt),Vn(nt,"display",""),nt.cloneHidden=!1):this._hideClone()}},or(cn,"touchmove",function(W){(Sr.active||Me)&&W.cancelable&&W.preventDefault()}),Sr.utils={on:or,off:cr,css:Vn,find:hl,is:function(W,oe){return!!Zr(W,oe,W,!1)},extend:vi,throttle:vs,closest:Zr,toggleClass:fr,clone:Wi,index:er,nextTick:qo,cancelNextTick:Zn,detectDirection:vn,getChild:gi},Sr.create=function(W,oe){return new Sr(W,oe)},Sr.version="1.8.4",Sr})?Q.call(St,ee,St,Tt):Q)&&(Tt.exports=_)}()},1249:function(Tt){(function(){var St;Tt.exports={icon:"icons/google.svg",name:"google",title:"Google Fonts",link:"google.com/fonts",getNames:function(){return St},getLink:function(ee){return"https://fonts.google.com/specimen/"+ee.replace(/( )/g,"+")},normalizeName:function(ee){return ee}},St=["ABeeZee","Abel","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiri","Amita","Anaheim","Andada","Andika","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo Black","Archivo Narrow","Arimo","Arizonia","Armata","Artifika","Arvo","Arya","Asap","Asar","Asset","Astloch","Asul","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","Bad Script","Balthazar","Bangers","Basic","Battambang","Baumans","Bayon","Belgrano","Belleza","BenchNine","Bentham","Berkshire Swash","Bevan","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","Biryani","Bitter","Black Ops One","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Bubblegum Sans","Bubbler One","Buda","Buenard","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Changa One","Chango","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Combo","Comfortaa","Coming Soon","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Courgette","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Text","Croissant One","Crushed","Cuprum","Cutive","Cutive Mono","Damion","Dancing Script","Dangrek","Dawning of a New Day","Days One","Dekko","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Domine","Donegal One","Doppio One","Dorsa","Dosis","Dr Sugiyama","Droid Sans","Droid Sans Mono","Droid Serif","Duru Sans","Dynalight","EB Garamond","Eagle Lake","Eater","Economica","Eczar","Ek Mukta","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fanwood Text","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Mono","Fira Sans","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gafata","Galdeano","Galindo","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Gorditas","Goudy Bookletter 1911","Graduate","Grand Hotel","Gravitas One","Great Vibes","Griffy","Gruppo","Gudea","Gurajada","Habibi","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Headland One","Henny Penny","Herr Von Muellerhoff","Hind","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Iceberg","Iceland","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","Jim Nightshade","Jockey One","Jolly Lodger","Josefin Sans","Josefin Slab","Joti One","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","Kadwa","Kalam","Kameron","Kantumruy","Karla","Karma","Kaushan Script","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kite One","Knewave","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Kurale","La Belle Aurore","Laila","Lakki Reddy","Lancelot","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Libre Baskerville","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","Macondo","Macondo Swash Caps","Magra","Maiden Orange","Mako","Mallanna","Mandali","Marcellus","Marcellus SC","Marck Script","Margarine","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Miniver","Miss Fajardose","Modak","Modern Antiqua","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Muli","Mystery Quest","NTR","Neucha","Neuton","New Rocker","News Cycle","Niconne","Nixie One","Nobile","Nokora","Norican","Nosifer","Nothing You Could Do","Noticia Text","Noto Sans","Noto Serif","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Odor Mean Chey","Offside","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Ovo","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Palanquin","Palanquin Dark","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Patua One","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Princess Sofia","Prociono","Prosto One","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rationale","Ravi Prakash","Redressed","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rozha One","Rubik","Rubik Mono One","Rubik One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Salsa","Sanchez","Sancreek","Sansita One","Sarala","Sarina","Sarpanch","Satisfy","Scada","Scheherazade","Schoolbell","Seaweed Script","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shojumaru","Short Stack","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Sonsie One","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Special Elite","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Stalemate","Stalinist One","Stardos Stencil","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Sue Ellen Francisco","Sumana","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Tangerine","Taprom","Tauri","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Trade Winds","Trocchi","Trochut","Trykker","Tulpen One","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Vast Shadow","Vesper Libre","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Yanone Kaffeesatz","Yantramanav","Yellowtail","Yeseva One","Yesteryear","Zeyada"]}).call(this)},284:(Tt,St,ee)=>{function Q(ve){this.options=ve||{locator:{}}}function Pe(){this.cdata=!1}function we(ve,Ge){Ge.lineNumber=ve.lineNumber,Ge.columnNumber=ve.columnNumber}function Ke(ve){if(ve)return"\n@"+(ve.systemId||"")+"#[line:"+ve.lineNumber+",col:"+ve.columnNumber+"]"}function _e(ve,Ge,Ie){return"string"==typeof ve?ve.substr(Ge,Ie):ve.length>=Ge+Ie||Ge?new java.lang.String(ve,Ge,Ie)+"":ve}function nt(ve,Ge){ve.currentElement?ve.currentElement.appendChild(Ge):ve.doc.appendChild(Ge)}Q.prototype.parseFromString=function(ve,Ge){var Ie=this.options,at=new xe,Ft=Ie.domBuilder||new Pe,Se=Ie.errorHandler,Le=Ie.locator,Be=Ie.xmlns||{},ge={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return Le&&Ft.setDocumentLocator(Le),at.errorHandler=function(ve,Ge,Ie){if(!ve){if(Ge instanceof Pe)return Ge;ve=Ge}var at={},Ft=ve instanceof Function;function Se(Le){var Be=ve[Le];!Be&&Ft&&(Be=2==ve.length?function(ge){ve(Le,ge)}:ve),at[Le]=Be&&function(ge){Be("[xmldom "+Le+"]\t"+ge+Ke(Ie))}||function(){}}return Ie=Ie||{},Se("warning"),Se("error"),Se("fatalError"),at}(Se,Ft,Le),at.domBuilder=Ie.domBuilder||Ft,/\/x?html?$/.test(Ge)&&(ge.nbsp="\xa0",ge.copy="\xa9",Be[""]="http://www.w3.org/1999/xhtml"),Be.xml=Be.xml||"http://www.w3.org/XML/1998/namespace",ve?at.parse(ve,Be,ge):at.errorHandler.error("invalid doc source"),Ft.doc},Pe.prototype={startDocument:function(){this.doc=(new We).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(ve,Ge,Ie,at){var Ft=this.doc,Se=Ft.createElementNS(ve,Ie||Ge),Le=at.length;nt(this,Se),this.currentElement=Se,this.locator&&we(this.locator,Se);for(var Be=0;Be<Le;Be++){ve=at.getURI(Be);var ge=at.getValue(Be),ue=(Ie=at.getQName(Be),Ft.createAttributeNS(ve,Ie));this.locator&&we(at.getLocator(Be),ue),ue.value=ue.nodeValue=ge,Se.setAttributeNode(ue)}},endElement:function(ve,Ge,Ie){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(ve,Ge){},endPrefixMapping:function(ve){},processingInstruction:function(ve,Ge){var Ie=this.doc.createProcessingInstruction(ve,Ge);this.locator&&we(this.locator,Ie),nt(this,Ie)},ignorableWhitespace:function(ve,Ge,Ie){},characters:function(ve,Ge,Ie){if(ve=_e.apply(this,arguments)){if(this.cdata)var at=this.doc.createCDATASection(ve);else at=this.doc.createTextNode(ve);this.currentElement?this.currentElement.appendChild(at):/^\s*$/.test(ve)&&this.doc.appendChild(at),this.locator&&we(this.locator,at)}},skippedEntity:function(ve){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(ve){(this.locator=ve)&&(ve.lineNumber=0)},comment:function(ve,Ge,Ie){ve=_e.apply(this,arguments);var at=this.doc.createComment(ve);this.locator&&we(this.locator,at),nt(this,at)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(ve,Ge,Ie){var at=this.doc.implementation;if(at&&at.createDocumentType){var Ft=at.createDocumentType(ve,Ge,Ie);this.locator&&we(this.locator,Ft),nt(this,Ft)}},warning:function(ve){console.warn("[xmldom warning]\t"+ve,Ke(this.locator))},error:function(ve){console.error("[xmldom error]\t"+ve,Ke(this.locator))},fatalError:function(ve){throw console.error("[xmldom fatalError]\t"+ve,Ke(this.locator)),ve}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(ve){Pe.prototype[ve]=function(){return null}});var xe=ee(8530).G,We=ee(2414).DOMImplementation;ee(2414),St.a=Q},2414:(Tt,St)=>{function Q(ce,pe){for(var Ze in ce)pe[Ze]=ce[Ze]}function _(ce,pe){var Ze=ce.prototype;if(Object.create){var At=Object.create(pe.prototype);Ze.__proto__=At}if(!(Ze instanceof pe)){let _r=function(){};_r.prototype=pe.prototype,_r=new _r,Q(Ze,_r),ce.prototype=Ze=_r}Ze.constructor!=ce&&("function"!=typeof ce&&console.error("unknow Class:"+ce),Ze.constructor=ce)}var we={},Ke=we.ELEMENT_NODE=1,_e=we.ATTRIBUTE_NODE=2,nt=we.TEXT_NODE=3,xe=we.CDATA_SECTION_NODE=4,We=we.ENTITY_REFERENCE_NODE=5,ve=we.ENTITY_NODE=6,Ge=we.PROCESSING_INSTRUCTION_NODE=7,Ie=we.COMMENT_NODE=8,at=we.DOCUMENT_NODE=9,Ft=we.DOCUMENT_TYPE_NODE=10,Se=we.DOCUMENT_FRAGMENT_NODE=11,Le=we.NOTATION_NODE=12,Be={},ge={},qe=(Be.INDEX_SIZE_ERR=(ge[1]="Index size error",1),Be.DOMSTRING_SIZE_ERR=(ge[2]="DOMString size error",2),Be.HIERARCHY_REQUEST_ERR=(ge[3]="Hierarchy request error",3)),it=(Be.WRONG_DOCUMENT_ERR=(ge[4]="Wrong document",4),Be.INVALID_CHARACTER_ERR=(ge[5]="Invalid character",5),Be.NO_DATA_ALLOWED_ERR=(ge[6]="No data allowed",6),Be.NO_MODIFICATION_ALLOWED_ERR=(ge[7]="No modification allowed",7),Be.NOT_FOUND_ERR=(ge[8]="Not found",8)),xt=(Be.NOT_SUPPORTED_ERR=(ge[9]="Not supported",9),Be.INUSE_ATTRIBUTE_ERR=(ge[10]="Attribute in use",10));function tn(ce,pe){if(pe instanceof Error)var Ze=pe;else Ze=this,Error.call(this,ge[ce]),this.message=ge[ce],Error.captureStackTrace&&Error.captureStackTrace(this,tn);return Ze.code=ce,pe&&(this.message=this.message+": "+pe),Ze}function Ot(){}function mn(ce,pe){this._node=ce,this._refresh=pe,lr(this)}function lr(ce){var pe=ce._node._inc||ce._node.ownerDocument._inc;if(ce._inc!=pe){var Ze=ce._refresh(ce._node);Cr(ce,"length",Ze.length),Q(Ze,ce),ce._inc=pe}}function un(){}function Rr(ce,pe){for(var Ze=ce.length;Ze--;)if(ce[Ze]===pe)return Ze}function hr(ce,pe,Ze,At){if(At?pe[Rr(pe,At)]=Ze:pe[pe.length++]=Ze,ce){Ze.ownerElement=ce;var _n=ce.ownerDocument;_n&&(At&&Br(_n,ce,At),function(ce,pe,Ze){ce&&ce._inc++,"http://www.w3.org/2000/xmlns/"==Ze.namespaceURI&&(pe._nsMap[Ze.prefix?Ze.localName:""]=Ze.value)}(_n,ce,Ze))}}function pi(ce,pe,Ze){var At=Rr(pe,Ze);if(!(At>=0))throw tn(it,new Error(ce.tagName+"@"+Ze));for(var _n=pe.length-1;At<_n;)pe[At]=pe[++At];if(pe.length=_n,ce){var _r=ce.ownerDocument;_r&&(Br(_r,ce,Ze),Ze.ownerElement=null)}}function cn(ce){if(this._features={},ce)for(var pe in ce)this._features=ce[pe]}function Ht(){}function qn(ce){return("<"==ce?"&lt;":">"==ce&&"&gt;")||"&"==ce&&"&amp;"||'"'==ce&&"&quot;"||"&#"+ce.charCodeAt()+";"}function Jt(ce,pe){if(pe(ce))return!0;if(ce=ce.firstChild)do{if(Jt(ce,pe))return!0}while(ce=ce.nextSibling)}function Gr(){}function Br(ce,pe,Ze,At){ce&&ce._inc++,"http://www.w3.org/2000/xmlns/"==Ze.namespaceURI&&delete pe._nsMap[Ze.prefix?Ze.localName:""]}function Vi(ce,pe,Ze){if(ce&&ce._inc){ce._inc++;var At=pe.childNodes;if(Ze)At[At.length++]=Ze;else{for(var _n=pe.firstChild,_r=0;_n;)At[_r++]=_n,_n=_n.nextSibling;At.length=_r}}}function Wn(ce,pe){var Ze=pe.previousSibling,At=pe.nextSibling;return Ze?Ze.nextSibling=At:ce.firstChild=At,At?At.previousSibling=Ze:ce.lastChild=Ze,Vi(ce.ownerDocument,ce),pe}function Wt(ce,pe,Ze){var At=pe.parentNode;if(At&&At.removeChild(pe),pe.nodeType===Se){var _n=pe.firstChild;if(null==_n)return pe;var _r=pe.lastChild}else _n=_r=pe;var Sr=Ze?Ze.previousSibling:ce.lastChild;_n.previousSibling=Sr,_r.nextSibling=Ze,Sr?Sr.nextSibling=_n:ce.firstChild=_n,null==Ze?ce.lastChild=_r:Ze.previousSibling=_r;do{_n.parentNode=ce}while(_n!==_r&&(_n=_n.nextSibling));return Vi(ce.ownerDocument||ce,ce),pe.nodeType==Se&&(pe.firstChild=pe.lastChild=null),pe}function wr(){this._nsMap={}}function en(){}function Ln(){}function Et(){}function zt(){}function rt(){}function Ae(){}function ke(){}function mt(){}function Bt(){}function vn(){}function Yt(){}function ur(ce,pe){var Ze=[],At=9==this.nodeType?this.documentElement:this,_n=At.prefix,_r=At.namespaceURI;if(_r&&null==_n&&null==(_n=At.lookupPrefix(_r)))var Sr=[{namespace:_r,prefix:null}];return Yr(this,Ze,ce,pe,Sr),Ze.join("")}function Mi(ce,pe,Ze){var At=ce.prefix||"",_n=ce.namespaceURI;if(!At&&!_n||"xml"===At&&"http://www.w3.org/XML/1998/namespace"===_n||"http://www.w3.org/2000/xmlns/"==_n)return!1;for(var _r=Ze.length;_r--;){var Sr=Ze[_r];if(Sr.prefix==At)return Sr.namespace!=_n}return!0}function Yr(ce,pe,Ze,At,_n){if(At){if(!(ce=At(ce)))return;if("string"==typeof ce)return void pe.push(ce)}switch(ce.nodeType){case Ke:_n||(_n=[]);var Sr=ce.attributes,Zr=Sr.length,zi=ce.firstChild,xo=ce.tagName;Ze="http://www.w3.org/1999/xhtml"===ce.namespaceURI||Ze,pe.push("<",xo);for(var or=0;or<Zr;or++)"xmlns"==(cr=Sr.item(or)).prefix?_n.push({prefix:cr.localName,namespace:cr.value}):"xmlns"==cr.nodeName&&_n.push({prefix:"",namespace:cr.value});for(or=0;or<Zr;or++){var cr,fr,Vn;Mi(cr=Sr.item(or),0,_n)&&(pe.push((fr=cr.prefix||"")?" xmlns:"+fr:" xmlns",'="',Vn=cr.namespaceURI,'"'),_n.push({prefix:fr,namespace:Vn})),Yr(cr,pe,Ze,At,_n)}if(Mi(ce,0,_n)&&(pe.push((fr=ce.prefix||"")?" xmlns:"+fr:" xmlns",'="',Vn=ce.namespaceURI,'"'),_n.push({prefix:fr,namespace:Vn})),zi||Ze&&!/^(?:meta|link|img|br|hr|input)$/i.test(xo)){if(pe.push(">"),Ze&&/^script$/i.test(xo))for(;zi;)zi.data?pe.push(zi.data):Yr(zi,pe,Ze,At,_n),zi=zi.nextSibling;else for(;zi;)Yr(zi,pe,Ze,At,_n),zi=zi.nextSibling;pe.push("</",xo,">")}else pe.push("/>");return;case at:case Se:for(zi=ce.firstChild;zi;)Yr(zi,pe,Ze,At,_n),zi=zi.nextSibling;return;case _e:return pe.push(" ",ce.name,'="',ce.value.replace(/[<&"]/g,qn),'"');case nt:return pe.push(ce.data.replace(/[<&]/g,qn));case xe:return pe.push("<![CDATA[",ce.data,"]]>");case Ie:return pe.push("\x3c!--",ce.data,"--\x3e");case Ft:var hl=ce.publicId,Hi=ce.systemId;if(pe.push("<!DOCTYPE ",ce.name),hl)pe.push(' PUBLIC "',hl),Hi&&"."!=Hi&&pe.push('" "',Hi),pe.push('">');else if(Hi&&"."!=Hi)pe.push(' SYSTEM "',Hi,'">');else{var $s=ce.internalSubset;$s&&pe.push(" [",$s,"]"),pe.push(">")}return;case Ge:return pe.push("<?",ce.target," ",ce.data,"?>");case We:return pe.push("&",ce.nodeName,";");default:pe.push("??",ce.nodeName)}}function kr(ce,pe,Ze){var At;switch(pe.nodeType){case Ke:(At=pe.cloneNode(!1)).ownerDocument=ce;case Se:break;case _e:Ze=!0}if(At||(At=pe.cloneNode(!1)),At.ownerDocument=ce,At.parentNode=null,Ze)for(var _n=pe.firstChild;_n;)At.appendChild(kr(ce,_n,Ze)),_n=_n.nextSibling;return At}function Kr(ce,pe,Ze){var At=new pe.constructor;for(var _n in pe){var _r=pe[_n];"object"!=typeof _r&&_r!=At[_n]&&(At[_n]=_r)}switch(pe.childNodes&&(At.childNodes=new Ot),At.ownerDocument=ce,At.nodeType){case Ke:var Sr=pe.attributes,Zr=At.attributes=new un,zi=Sr.length;Zr._ownerElement=At;for(var xo=0;xo<zi;xo++)At.setAttributeNode(Kr(ce,Sr.item(xo),!0));break;case _e:Ze=!0}if(Ze)for(var or=pe.firstChild;or;)At.appendChild(Kr(ce,or,Ze)),or=or.nextSibling;return At}function Cr(ce,pe,Ze){ce[pe]=Ze}Be.INVALID_STATE_ERR=(ge[11]="Invalid state",11),Be.SYNTAX_ERR=(ge[12]="Syntax error",12),Be.INVALID_MODIFICATION_ERR=(ge[13]="Invalid modification",13),Be.NAMESPACE_ERR=(ge[14]="Invalid namespace",14),Be.INVALID_ACCESS_ERR=(ge[15]="Invalid access",15),tn.prototype=Error.prototype,Q(Be,tn),Ot.prototype={length:0,item:function(ce){return this[ce]||null},toString:function(ce,pe){for(var Ze=[],At=0;At<this.length;At++)Yr(this[At],Ze,ce,pe);return Ze.join("")}},mn.prototype.item=function(ce){return lr(this),this[ce]},_(mn,Ot),un.prototype={length:0,item:Ot.prototype.item,getNamedItem:function(ce){for(var pe=this.length;pe--;){var Ze=this[pe];if(Ze.nodeName==ce)return Ze}},setNamedItem:function(ce){var pe=ce.ownerElement;if(pe&&pe!=this._ownerElement)throw new tn(xt);var Ze=this.getNamedItem(ce.nodeName);return hr(this._ownerElement,this,ce,Ze),Ze},setNamedItemNS:function(ce){var Ze,pe=ce.ownerElement;if(pe&&pe!=this._ownerElement)throw new tn(xt);return Ze=this.getNamedItemNS(ce.namespaceURI,ce.localName),hr(this._ownerElement,this,ce,Ze),Ze},removeNamedItem:function(ce){var pe=this.getNamedItem(ce);return pi(this._ownerElement,this,pe),pe},removeNamedItemNS:function(ce,pe){var Ze=this.getNamedItemNS(ce,pe);return pi(this._ownerElement,this,Ze),Ze},getNamedItemNS:function(ce,pe){for(var Ze=this.length;Ze--;){var At=this[Ze];if(At.localName==pe&&At.namespaceURI==ce)return At}return null}},cn.prototype={hasFeature:function(ce,pe){var Ze=this._features[ce.toLowerCase()];return!(!Ze||pe&&!(pe in Ze))},createDocument:function(ce,pe,Ze){var At=new Gr;if(At.implementation=this,At.childNodes=new Ot,At.doctype=Ze,Ze&&At.appendChild(Ze),pe){var _n=At.createElementNS(ce,pe);At.appendChild(_n)}return At},createDocumentType:function(ce,pe,Ze){var At=new Ae;return At.name=ce,At.nodeName=ce,At.publicId=pe,At.systemId=Ze,At}},Ht.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(ce,pe){return Wt(this,ce,pe)},replaceChild:function(ce,pe){this.insertBefore(ce,pe),pe&&this.removeChild(pe)},removeChild:function(ce){return Wn(this,ce)},appendChild:function(ce){return this.insertBefore(ce,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(ce){return Kr(this.ownerDocument||this,this,ce)},normalize:function(){for(var ce=this.firstChild;ce;){var pe=ce.nextSibling;pe&&pe.nodeType==nt&&ce.nodeType==nt?(this.removeChild(pe),ce.appendData(pe.data)):(ce.normalize(),ce=pe)}},isSupported:function(ce,pe){return this.ownerDocument.implementation.hasFeature(ce,pe)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(ce){for(var pe=this;pe;){var Ze=pe._nsMap;if(Ze)for(var At in Ze)if(Ze[At]==ce)return At;pe=pe.nodeType==_e?pe.ownerDocument:pe.parentNode}return null},lookupNamespaceURI:function(ce){for(var pe=this;pe;){var Ze=pe._nsMap;if(Ze&&ce in Ze)return Ze[ce];pe=pe.nodeType==_e?pe.ownerDocument:pe.parentNode}return null},isDefaultNamespace:function(ce){return null==this.lookupPrefix(ce)}},Q(we,Ht),Q(we,Ht.prototype),Gr.prototype={nodeName:"#document",nodeType:at,doctype:null,documentElement:null,_inc:1,insertBefore:function(ce,pe){if(ce.nodeType==Se){for(var Ze=ce.firstChild;Ze;){var At=Ze.nextSibling;this.insertBefore(Ze,pe),Ze=At}return ce}return null==this.documentElement&&ce.nodeType==Ke&&(this.documentElement=ce),Wt(this,ce,pe),ce.ownerDocument=this,ce},removeChild:function(ce){return this.documentElement==ce&&(this.documentElement=null),Wn(this,ce)},importNode:function(ce,pe){return kr(this,ce,pe)},getElementById:function(ce){var pe=null;return Jt(this.documentElement,function(Ze){if(Ze.nodeType==Ke&&Ze.getAttribute("id")==ce)return pe=Ze,!0}),pe},createElement:function(ce){var pe=new wr;return pe.ownerDocument=this,pe.nodeName=ce,pe.tagName=ce,pe.childNodes=new Ot,(pe.attributes=new un)._ownerElement=pe,pe},createDocumentFragment:function(){var ce=new vn;return ce.ownerDocument=this,ce.childNodes=new Ot,ce},createTextNode:function(ce){var pe=new Et;return pe.ownerDocument=this,pe.appendData(ce),pe},createComment:function(ce){var pe=new zt;return pe.ownerDocument=this,pe.appendData(ce),pe},createCDATASection:function(ce){var pe=new rt;return pe.ownerDocument=this,pe.appendData(ce),pe},createProcessingInstruction:function(ce,pe){var Ze=new Yt;return Ze.ownerDocument=this,Ze.tagName=Ze.target=ce,Ze.nodeValue=Ze.data=pe,Ze},createAttribute:function(ce){var pe=new en;return pe.ownerDocument=this,pe.name=ce,pe.nodeName=ce,pe.localName=ce,pe.specified=!0,pe},createEntityReference:function(ce){var pe=new Bt;return pe.ownerDocument=this,pe.nodeName=ce,pe},createElementNS:function(ce,pe){var Ze=new wr,At=pe.split(":"),_n=Ze.attributes=new un;return Ze.childNodes=new Ot,Ze.ownerDocument=this,Ze.nodeName=pe,Ze.tagName=pe,Ze.namespaceURI=ce,2==At.length?(Ze.prefix=At[0],Ze.localName=At[1]):Ze.localName=pe,_n._ownerElement=Ze,Ze},createAttributeNS:function(ce,pe){var Ze=new en,At=pe.split(":");return Ze.ownerDocument=this,Ze.nodeName=pe,Ze.name=pe,Ze.namespaceURI=ce,Ze.specified=!0,2==At.length?(Ze.prefix=At[0],Ze.localName=At[1]):Ze.localName=pe,Ze}},_(Gr,Ht),Gr.prototype.getElementsByTagName=(wr.prototype={nodeType:Ke,hasAttribute:function(ce){return null!=this.getAttributeNode(ce)},getAttribute:function(ce){var pe=this.getAttributeNode(ce);return pe&&pe.value||""},getAttributeNode:function(ce){return this.attributes.getNamedItem(ce)},setAttribute:function(ce,pe){var Ze=this.ownerDocument.createAttribute(ce);Ze.value=Ze.nodeValue=""+pe,this.setAttributeNode(Ze)},removeAttribute:function(ce){var pe=this.getAttributeNode(ce);pe&&this.removeAttributeNode(pe)},appendChild:function(ce){return ce.nodeType===Se?this.insertBefore(ce,null):function(ce,pe){var Ze=pe.parentNode;if(Ze){var At=ce.lastChild;Ze.removeChild(pe),At=ce.lastChild}return At=ce.lastChild,pe.parentNode=ce,pe.previousSibling=At,pe.nextSibling=null,At?At.nextSibling=pe:ce.firstChild=pe,ce.lastChild=pe,Vi(ce.ownerDocument,ce,pe),pe}(this,ce)},setAttributeNode:function(ce){return this.attributes.setNamedItem(ce)},setAttributeNodeNS:function(ce){return this.attributes.setNamedItemNS(ce)},removeAttributeNode:function(ce){return this.attributes.removeNamedItem(ce.nodeName)},removeAttributeNS:function(ce,pe){var Ze=this.getAttributeNodeNS(ce,pe);Ze&&this.removeAttributeNode(Ze)},hasAttributeNS:function(ce,pe){return null!=this.getAttributeNodeNS(ce,pe)},getAttributeNS:function(ce,pe){var Ze=this.getAttributeNodeNS(ce,pe);return Ze&&Ze.value||""},setAttributeNS:function(ce,pe,Ze){var At=this.ownerDocument.createAttributeNS(ce,pe);At.value=At.nodeValue=""+Ze,this.setAttributeNode(At)},getAttributeNodeNS:function(ce,pe){return this.attributes.getNamedItemNS(ce,pe)},getElementsByTagName:function(ce){return new mn(this,function(pe){var Ze=[];return Jt(pe,function(At){At!==pe&&At.nodeType==Ke&&("*"===ce||At.tagName==ce)&&Ze.push(At)}),Ze})},getElementsByTagNameNS:function(ce,pe){return new mn(this,function(Ze){var At=[];return Jt(Ze,function(_n){_n!==Ze&&_n.nodeType===Ke&&("*"===ce||_n.namespaceURI===ce)&&("*"===pe||_n.localName==pe)&&At.push(_n)}),At})}}).getElementsByTagName,Gr.prototype.getElementsByTagNameNS=wr.prototype.getElementsByTagNameNS,_(wr,Ht),en.prototype.nodeType=_e,_(en,Ht),Ln.prototype={data:"",substringData:function(ce,pe){return this.data.substring(ce,ce+pe)},appendData:function(ce){this.nodeValue=this.data=ce=this.data+ce,this.length=ce.length},insertData:function(ce,pe){this.replaceData(ce,0,pe)},appendChild:function(ce){throw new Error(ge[qe])},deleteData:function(ce,pe){this.replaceData(ce,pe,"")},replaceData:function(ce,pe,Ze){var At=this.data.substring(0,ce),_n=this.data.substring(ce+pe);this.nodeValue=this.data=Ze=At+Ze+_n,this.length=Ze.length}},_(Ln,Ht),Et.prototype={nodeName:"#text",nodeType:nt,splitText:function(ce){var pe=this.data,Ze=pe.substring(ce);pe=pe.substring(0,ce),this.data=this.nodeValue=pe,this.length=pe.length;var At=this.ownerDocument.createTextNode(Ze);return this.parentNode&&this.parentNode.insertBefore(At,this.nextSibling),At}},_(Et,Ln),zt.prototype={nodeName:"#comment",nodeType:Ie},_(zt,Ln),rt.prototype={nodeName:"#cdata-section",nodeType:xe},_(rt,Ln),Ae.prototype.nodeType=Ft,_(Ae,Ht),ke.prototype.nodeType=Le,_(ke,Ht),mt.prototype.nodeType=ve,_(mt,Ht),Bt.prototype.nodeType=We,_(Bt,Ht),vn.prototype.nodeName="#document-fragment",vn.prototype.nodeType=Se,_(vn,Ht),Yt.prototype.nodeType=Ge,_(Yt,Ht),Ht.prototype.toString=ur;try{if(Object.defineProperty){let ce=function(pe){switch(pe.nodeType){case Ke:case Se:var Ze=[];for(pe=pe.firstChild;pe;)7!==pe.nodeType&&8!==pe.nodeType&&Ze.push(ce(pe)),pe=pe.nextSibling;return Ze.join("");default:return pe.nodeValue}};Object.defineProperty(mn.prototype,"length",{get:function(){return lr(this),this.$$length}}),Object.defineProperty(Ht.prototype,"textContent",{get:function(){return ce(this)},set:function(pe){switch(this.nodeType){case Ke:case Se:for(;this.firstChild;)this.removeChild(this.firstChild);(pe||String(pe))&&this.appendChild(this.ownerDocument.createTextNode(pe));break;default:this.data=pe,this.value=pe,this.nodeValue=pe}}}),Cr=function(pe,Ze,At){pe["$$"+Ze]=At}}}catch(ce){}St.DOMImplementation=cn},8530:(Tt,St)=>{var ee=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Q=new RegExp("[\\-\\.0-9"+ee.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),_=new RegExp("^"+ee.source+Q.source+"*(?::"+ee.source+Q.source+"*)?$");function Ge(){}function at(Ue,ht){return ht.lineNumber=Ue.lineNumber,ht.columnNumber=Ue.columnNumber,ht}function Ft(Ue,ht,it,It,xt,te){for(var Ee,bt=++ht,Vt=0;;){var tn=Ue.charAt(bt);switch(tn){case"=":if(1===Vt)Ee=Ue.slice(ht,bt),Vt=3;else{if(2!==Vt)throw new Error("attribute equal must after attrName");Vt=3}break;case"'":case'"':if(3===Vt||1===Vt){if(1===Vt&&(te.warning('attribute value must after "="'),Ee=Ue.slice(ht,bt)),!((bt=Ue.indexOf(tn,ht=bt+1))>0))throw new Error("attribute value no end '"+tn+"' match");Ve=Ue.slice(ht,bt).replace(/&#?\w+;/g,xt),it.add(Ee,Ve,ht-1),Vt=5}else{if(4!=Vt)throw new Error('attribute value must after "="');Ve=Ue.slice(ht,bt).replace(/&#?\w+;/g,xt),it.add(Ee,Ve,ht),te.warning('attribute "'+Ee+'" missed start quot('+tn+")!!"),ht=bt+1,Vt=5}break;case"/":switch(Vt){case 0:it.setTagName(Ue.slice(ht,bt));case 5:case 6:case 7:Vt=7,it.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return te.error("unexpected end of input"),0==Vt&&it.setTagName(Ue.slice(ht,bt)),bt;case">":switch(Vt){case 0:it.setTagName(Ue.slice(ht,bt));case 5:case 6:case 7:break;case 4:case 1:"/"===(Ve=Ue.slice(ht,bt)).slice(-1)&&(it.closed=!0,Ve=Ve.slice(0,-1));case 2:2===Vt&&(Ve=Ee),4==Vt?(te.warning('attribute "'+Ve+'" missed quot(")!!'),it.add(Ee,Ve.replace(/&#?\w+;/g,xt),ht)):(("http://www.w3.org/1999/xhtml"!==It[""]||!Ve.match(/^(?:disabled|checked|selected)$/i))&&te.warning('attribute "'+Ve+'" missed value!! "'+Ve+'" instead!!'),it.add(Ve,Ve,ht));break;case 3:throw new Error("attribute value missed!!")}return bt;case"\x80":tn=" ";default:if(tn<=" ")switch(Vt){case 0:it.setTagName(Ue.slice(ht,bt)),Vt=6;break;case 1:Ee=Ue.slice(ht,bt),Vt=2;break;case 4:var Ve=Ue.slice(ht,bt).replace(/&#?\w+;/g,xt);te.warning('attribute "'+Ve+'" missed quot(")!!'),it.add(Ee,Ve,ht);case 5:Vt=6}else switch(Vt){case 2:("http://www.w3.org/1999/xhtml"!==It[""]||!Ee.match(/^(?:disabled|checked|selected)$/i))&&te.warning('attribute "'+Ee+'" missed value!! "'+Ee+'" instead2!!'),it.add(Ee,Ee,ht),ht=bt,Vt=1;break;case 5:te.warning('attribute space is required"'+Ee+'"!!');case 6:Vt=1,ht=bt;break;case 3:Vt=4,ht=bt;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}bt++}}function Se(Ue,ht,it){for(var It=Ue.tagName,xt=null,te=Ue.length;te--;){var Ee=Ue[te],Ve=Ee.qName,bt=Ee.value;if((mn=Ve.indexOf(":"))>0)var Vt=Ee.prefix=Ve.slice(0,mn),tn=Ve.slice(mn+1),Ot="xmlns"===Vt&&tn;else tn=Ve,Vt=null,Ot="xmlns"===Ve&&"";Ee.localName=tn,!1!==Ot&&(null==xt&&(xt={},ge(it,it={})),it[Ot]=xt[Ot]=bt,Ee.uri="http://www.w3.org/2000/xmlns/",ht.startPrefixMapping(Ot,bt))}for(te=Ue.length;te--;)(Vt=(Ee=Ue[te]).prefix)&&("xml"===Vt&&(Ee.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==Vt&&(Ee.uri=it[Vt||""]));var mn;(mn=It.indexOf(":"))>0?(Vt=Ue.prefix=It.slice(0,mn),tn=Ue.localName=It.slice(mn+1)):(Vt=null,tn=Ue.localName=It);var lr=Ue.uri=it[Vt||""];if(ht.startElement(lr,tn,It,Ue),!Ue.closed)return Ue.currentNSMap=it,Ue.localNSMap=xt,!0;if(ht.endElement(lr,tn,It),xt)for(Vt in xt)ht.endPrefixMapping(Vt)}function Le(Ue,ht,it,It,xt){if(/^(?:script|textarea)$/i.test(it)){var te=Ue.indexOf("</"+it+">",ht),Ee=Ue.substring(ht+1,te);if(/[&<]/.test(Ee))return/^script$/i.test(it)?(xt.characters(Ee,0,Ee.length),te):(Ee=Ee.replace(/&#?\w+;/g,It),xt.characters(Ee,0,Ee.length),te)}return ht+1}function Be(Ue,ht,it,It){var xt=It[it];return null==xt&&((xt=Ue.lastIndexOf("</"+it+">"))<ht&&(xt=Ue.lastIndexOf("</"+it)),It[it]=xt),xt<ht}function ge(Ue,ht){for(var it in Ue)ht[it]=Ue[it]}function ue(Ue,ht,it,It){switch(Ue.charAt(ht+2)){case"-":return"-"===Ue.charAt(ht+3)?(te=Ue.indexOf("--\x3e",ht+4))>ht?(it.comment(Ue,ht+4,te-ht-4),te+3):(It.error("Unclosed comment"),-1):-1;default:if("CDATA["==Ue.substr(ht+3,6)){var te=Ue.indexOf("]]>",ht+9);return it.startCDATA(),it.characters(Ue,ht+9,te-ht-9),it.endCDATA(),te+3}var Ee=function(Ue,ht){var it,It=[],xt=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(xt.lastIndex=ht,xt.exec(Ue);it=xt.exec(Ue);)if(It.push(it),it[1])return It}(Ue,ht),Ve=Ee.length;if(Ve>1&&/!doctype/i.test(Ee[0][0])){var bt=Ee[1][0],Vt=Ve>3&&/^public$/i.test(Ee[2][0])&&Ee[3][0],tn=Ve>4&&Ee[4][0],Ot=Ee[Ve-1];return it.startDTD(bt,Vt&&Vt.replace(/^(['"])(.*?)\1$/,"$2"),tn&&tn.replace(/^(['"])(.*?)\1$/,"$2")),it.endDTD(),Ot.index+Ot[0].length}}return-1}function Me(Ue,ht,it){var It=Ue.indexOf("?>",ht);if(It){var xt=Ue.substring(ht,It).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return xt?(it.processingInstruction(xt[1],xt[2]),It+2):-1}return-1}function qe(Ue){}function Ye(Ue,ht){return Ue.__proto__=ht,Ue}Ge.prototype={parse:function(Ue,ht,it){var It=this.domBuilder;It.startDocument(),ge(ht,ht={}),function(Ue,ht,it,It,xt){function Ee(Et){var zt=Et.slice(1,-1);return zt in it?it[zt]:"#"===zt.charAt(0)?function(Et){return Et>65535?(Et-=65536,String.fromCharCode(55296+(Et>>10),56320+(1023&Et))):String.fromCharCode(Et)}(parseInt(zt.substr(1).replace("x","0x"))):(xt.error("entity not found:"+Et),Et)}function Ve(Et){if(Et>Rr){var zt=Ue.substring(Rr,Et).replace(/&#?\w+;/g,Ee);mn&&bt(Rr),It.characters(zt,0,Et-Rr),Rr=Et}}function bt(Et,zt){for(;Et>=tn&&(zt=Ot.exec(Ue));)tn=(Vt=zt.index)+zt[0].length,mn.lineNumber++;mn.columnNumber=Et-Vt+1}for(var Vt=0,tn=0,Ot=/.*(?:\r\n?|\n)|.*$/g,mn=It.locator,lr=[{currentNSMap:ht}],un={},Rr=0;;){try{var hr=Ue.indexOf("<",Rr);if(hr<0){if(!Ue.substr(Rr).match(/^\s*$/)){var pi=It.doc,cn=pi.createTextNode(Ue.substr(Rr));pi.appendChild(cn),It.currentElement=cn}return}switch(hr>Rr&&Ve(hr),Ue.charAt(hr+1)){case"/":var Ht=Ue.indexOf(">",hr+3),qn=Ue.substring(hr+2,Ht),Jt=lr.pop();Ht<0?(qn=Ue.substring(hr+2).replace(/[\s<].*/,""),xt.error("end tag name: "+qn+" is not complete:"+Jt.tagName),Ht=hr+1+qn.length):qn.match(/\s</)&&(qn=qn.replace(/[\s<].*/,""),xt.error("end tag name: "+qn+" maybe not complete"),Ht=hr+1+qn.length);var Gr=Jt.localNSMap,Ro=Jt.tagName==qn;if(Ro||Jt.tagName&&Jt.tagName.toLowerCase()==qn.toLowerCase()){if(It.endElement(Jt.uri,Jt.localName,qn),Gr)for(var Vi in Gr)It.endPrefixMapping(Vi);Ro||xt.fatalError("end tag name: "+qn+" is not match the current start tagName:"+Jt.tagName)}else lr.push(Jt);Ht++;break;case"?":mn&&bt(hr),Ht=Me(Ue,hr,It);break;case"!":mn&&bt(hr),Ht=ue(Ue,hr,It,xt);break;default:mn&&bt(hr);var Wn=new qe,Wt=lr[lr.length-1].currentNSMap,io=(Ht=Ft(Ue,hr,Wn,Wt,Ee,xt),Wn.length);if(!Wn.closed&&Be(Ue,Ht,Wn.tagName,un)&&(Wn.closed=!0,it.nbsp||xt.warning("unclosed xml attribute")),mn&&io){for(var wr=at(mn,{}),en=0;en<io;en++){var Ln=Wn[en];bt(Ln.offset),Ln.locator=at(mn,{})}It.locator=wr,Se(Wn,It,Wt)&&lr.push(Wn),It.locator=mn}else Se(Wn,It,Wt)&&lr.push(Wn);"http://www.w3.org/1999/xhtml"!==Wn.uri||Wn.closed?Ht++:Ht=Le(Ue,Ht,Wn.tagName,Ee,It)}}catch(Et){xt.error("element parse error: "+Et),Ht=-1}Ht>Rr?Rr=Ht:Ve(Math.max(hr,Rr)+1)}}(Ue,ht,it,It,this.errorHandler),It.endDocument()}},qe.prototype={setTagName:function(Ue){if(!_.test(Ue))throw new Error("invalid tagName:"+Ue);this.tagName=Ue},add:function(Ue,ht,it){if(!_.test(Ue))throw new Error("invalid attribute:"+Ue);this[this.length++]={qName:Ue,value:ht,offset:it}},length:0,getLocalName:function(Ue){return this[Ue].localName},getLocator:function(Ue){return this[Ue].locator},getQName:function(Ue){return this[Ue].qName},getURI:function(Ue){return this[Ue].uri},getValue:function(Ue){return this[Ue].value}},Ye({},Ye.prototype)instanceof Ye||(Ye=function(Ue,ht){function it(){}for(ht in it.prototype=ht,it=new it,Ue)it[ht]=Ue[ht];return it}),St.G=Ge},7478:(Tt,St,ee)=>{"use strict";ee.r(St),ee.d(St,{BodyModule:()=>bA});var Q=ee(2305),_=ee(7716),Pe=ee(8583),we=ee(4402),Ke=ee(7574),_e=ee(9796),nt=ee(8002),xe=ee(1555);function We(...w){if(1===w.length){const y=w[0];if((0,_e.k)(y))return ve(y,null);if((0,xe.K)(y)&&Object.getPrototypeOf(y)===Object.prototype){const f=Object.keys(y);return ve(f.map(b=>y[b]),f)}}if("function"==typeof w[w.length-1]){const y=w.pop();return ve(w=1===w.length&&(0,_e.k)(w[0])?w[0]:w,null).pipe((0,nt.U)(f=>y(...f)))}return ve(w,null)}function ve(w,y){return new Ke.y(f=>{const b=w.length;if(0===b)return void f.complete();const L=new Array(b);let Y=0,me=0;for(let pt=0;pt<b;pt++){const Mt=(0,we.D)(w[pt]);let an=!1;f.add(Mt.subscribe({next:On=>{an||(an=!0,me++),L[pt]=On},error:On=>f.error(On),complete:()=>{Y++,(Y===b||!an)&&(me===b&&f.next(y?y.reduce((On,jr,bo)=>(On[jr]=L[bo],On),{}):L),f.complete())}}))}})}let Ge=(()=>{class w{constructor(f,b){this._renderer=f,this._elementRef=b,this.onChange=L=>{},this.onTouched=()=>{}}setProperty(f,b){this._renderer.setProperty(this._elementRef.nativeElement,f,b)}registerOnTouched(f){this.onTouched=f}registerOnChange(f){this.onChange=f}setDisabledState(f){this.setProperty("disabled",f)}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(_.Qsj),_.Y36(_.SBq))},w.\u0275dir=_.lG2({type:w}),w})(),Ie=(()=>{class w extends Ge{}return w.\u0275fac=function(){let y;return function(b){return(y||(y=_.n5z(w)))(b||w)}}(),w.\u0275dir=_.lG2({type:w,features:[_.qOj]}),w})();const at=new _.OlP("NgValueAccessor"),Le={provide:at,useExisting:(0,_.Gpc)(()=>ue),multi:!0},ge=new _.OlP("CompositionEventMode");let ue=(()=>{class w extends Ge{constructor(f,b,L){super(f,b),this._compositionMode=L,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const w=(0,Pe.q)()?(0,Pe.q)().getUserAgent():"";return/android (\d+)/.test(w.toLowerCase())}())}writeValue(f){this.setProperty("value",null==f?"":f)}_handleInput(f){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(f)}_compositionStart(){this._composing=!0}_compositionEnd(f){this._composing=!1,this._compositionMode&&this.onChange(f)}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(ge,8))},w.\u0275dir=_.lG2({type:w,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(f,b){1&f&&_.NdJ("input",function(Y){return b._handleInput(Y.target.value)})("blur",function(){return b.onTouched()})("compositionstart",function(){return b._compositionStart()})("compositionend",function(Y){return b._compositionEnd(Y.target.value)})},features:[_._Bn([Le]),_.qOj]}),w})();const Ye=new _.OlP("NgValidators"),_t=new _.OlP("NgAsyncValidators");function Ot(w){return null!=w}function mn(w){const y=(0,_.QGY)(w)?(0,we.D)(w):w;return(0,_.CqO)(y),y}function lr(w){let y={};return w.forEach(f=>{y=null!=f?Object.assign(Object.assign({},y),f):y}),0===Object.keys(y).length?null:y}function un(w,y){return y.map(f=>f(w))}function hr(w){return w.map(y=>function(w){return!w.validate}(y)?y:f=>y.validate(f))}function cn(w){return null!=w?function(w){if(!w)return null;const y=w.filter(Ot);return 0==y.length?null:function(f){return lr(un(f,y))}}(hr(w)):null}function qn(w){return null!=w?function(w){if(!w)return null;const y=w.filter(Ot);return 0==y.length?null:function(f){return We(un(f,y).map(mn)).pipe((0,nt.U)(lr))}}(hr(w)):null}function Jt(w,y){return null===w?[y]:Array.isArray(w)?[...w,y]:[w,y]}function Gr(w){return w._rawValidators}function Ro(w){return w._rawAsyncValidators}function Br(w){return w?Array.isArray(w)?w:[w]:[]}function Vi(w,y){return Array.isArray(w)?w.includes(y):w===y}function Wn(w,y){const f=Br(y);return Br(w).forEach(L=>{Vi(f,L)||f.push(L)}),f}function Wt(w,y){return Br(y).filter(f=>!Vi(w,f))}let io=(()=>{class w{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(f){this._rawValidators=f||[],this._composedValidatorFn=cn(this._rawValidators)}_setAsyncValidators(f){this._rawAsyncValidators=f||[],this._composedAsyncValidatorFn=qn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(f){this._onDestroyCallbacks.push(f)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(f=>f()),this._onDestroyCallbacks=[]}reset(f){this.control&&this.control.reset(f)}hasError(f,b){return!!this.control&&this.control.hasError(f,b)}getError(f,b){return this.control?this.control.getError(f,b):null}}return w.\u0275fac=function(f){return new(f||w)},w.\u0275dir=_.lG2({type:w}),w})(),wr=(()=>{class w extends io{get formDirective(){return null}get path(){return null}}return w.\u0275fac=function(){let y;return function(b){return(y||(y=_.n5z(w)))(b||w)}}(),w.\u0275dir=_.lG2({type:w,features:[_.qOj]}),w})();class en extends io{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ln{constructor(y){this._cd=y}is(y){var f,b,L;return"submitted"===y?!!(null===(f=this._cd)||void 0===f?void 0:f.submitted):!!(null===(L=null===(b=this._cd)||void 0===b?void 0:b.control)||void 0===L?void 0:L[y])}}let rt=(()=>{class w extends Ln{constructor(f){super(f)}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(en,2))},w.\u0275dir=_.lG2({type:w,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(f,b){2&f&&_.ekj("ng-untouched",b.is("untouched"))("ng-touched",b.is("touched"))("ng-pristine",b.is("pristine"))("ng-dirty",b.is("dirty"))("ng-valid",b.is("valid"))("ng-invalid",b.is("invalid"))("ng-pending",b.is("pending"))},features:[_.qOj]}),w})(),Ae=(()=>{class w extends Ln{constructor(f){super(f)}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(wr,10))},w.\u0275dir=_.lG2({type:w,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(f,b){2&f&&_.ekj("ng-untouched",b.is("untouched"))("ng-touched",b.is("touched"))("ng-pristine",b.is("pristine"))("ng-dirty",b.is("dirty"))("ng-valid",b.is("valid"))("ng-invalid",b.is("invalid"))("ng-pending",b.is("pending"))("ng-submitted",b.is("submitted"))},features:[_.qOj]}),w})();function ce(w,y){_n(w,y),y.valueAccessor.writeValue(w.value),function(w,y){y.valueAccessor.registerOnChange(f=>{w._pendingValue=f,w._pendingChange=!0,w._pendingDirty=!0,"change"===w.updateOn&&zi(w,y)})}(w,y),function(w,y){const f=(b,L)=>{y.valueAccessor.writeValue(b),L&&y.viewToModelUpdate(b)};w.registerOnChange(f),y._registerOnDestroy(()=>{w._unregisterOnChange(f)})}(w,y),function(w,y){y.valueAccessor.registerOnTouched(()=>{w._pendingTouched=!0,"blur"===w.updateOn&&w._pendingChange&&zi(w,y),"submit"!==w.updateOn&&w.markAsTouched()})}(w,y),function(w,y){if(y.valueAccessor.setDisabledState){const f=b=>{y.valueAccessor.setDisabledState(b)};w.registerOnDisabledChange(f),y._registerOnDestroy(()=>{w._unregisterOnDisabledChange(f)})}}(w,y)}function pe(w,y,f=!0){const b=()=>{};y.valueAccessor&&(y.valueAccessor.registerOnChange(b),y.valueAccessor.registerOnTouched(b)),_r(w,y),w&&(y._invokeOnDestroyCallbacks(),w._registerOnCollectionChange(()=>{}))}function Ze(w,y){w.forEach(f=>{f.registerOnValidatorChange&&f.registerOnValidatorChange(y)})}function _n(w,y){const f=Gr(w);null!==y.validator?w.setValidators(Jt(f,y.validator)):"function"==typeof f&&w.setValidators([f]);const b=Ro(w);null!==y.asyncValidator?w.setAsyncValidators(Jt(b,y.asyncValidator)):"function"==typeof b&&w.setAsyncValidators([b]);const L=()=>w.updateValueAndValidity();Ze(y._rawValidators,L),Ze(y._rawAsyncValidators,L)}function _r(w,y){let f=!1;if(null!==w){if(null!==y.validator){const L=Gr(w);if(Array.isArray(L)&&L.length>0){const Y=L.filter(me=>me!==y.validator);Y.length!==L.length&&(f=!0,w.setValidators(Y))}}if(null!==y.asyncValidator){const L=Ro(w);if(Array.isArray(L)&&L.length>0){const Y=L.filter(me=>me!==y.asyncValidator);Y.length!==L.length&&(f=!0,w.setAsyncValidators(Y))}}}const b=()=>{};return Ze(y._rawValidators,b),Ze(y._rawAsyncValidators,b),f}function zi(w,y){w._pendingDirty&&w.markAsDirty(),w.setValue(w._pendingValue,{emitModelToViewChange:!1}),y.viewToModelUpdate(w._pendingValue),w._pendingChange=!1}function or(w,y){_n(w,y)}function Hi(w,y){w._syncPendingControls(),y.forEach(f=>{const b=f.control;"submit"===b.updateOn&&b._pendingChange&&(f.viewToModelUpdate(b._pendingValue),b._pendingChange=!1)})}function Ho(w,y){const f=w.indexOf(y);f>-1&&w.splice(f,1)}const gi="VALID",Wo="INVALID",oo="PENDING",Yo="DISABLED";function Xt(w){return(vs(w)?w.validators:w)||null}function er(w){return Array.isArray(w)?cn(w):w||null}function mi(w,y){return(vs(y)?y.asyncValidators:w)||null}function Nn(w){return Array.isArray(w)?qn(w):w||null}function vs(w){return null!=w&&!Array.isArray(w)&&"object"==typeof w}class so{constructor(y,f){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=y,this._rawAsyncValidators=f,this._composedValidatorFn=er(this._rawValidators),this._composedAsyncValidatorFn=Nn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(y){this._rawValidators=this._composedValidatorFn=y}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(y){this._rawAsyncValidators=this._composedAsyncValidatorFn=y}get parent(){return this._parent}get valid(){return this.status===gi}get invalid(){return this.status===Wo}get pending(){return this.status==oo}get disabled(){return this.status===Yo}get enabled(){return this.status!==Yo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(y){this._rawValidators=y,this._composedValidatorFn=er(y)}setAsyncValidators(y){this._rawAsyncValidators=y,this._composedAsyncValidatorFn=Nn(y)}addValidators(y){this.setValidators(Wn(y,this._rawValidators))}addAsyncValidators(y){this.setAsyncValidators(Wn(y,this._rawAsyncValidators))}removeValidators(y){this.setValidators(Wt(y,this._rawValidators))}removeAsyncValidators(y){this.setAsyncValidators(Wt(y,this._rawAsyncValidators))}hasValidator(y){return Vi(this._rawValidators,y)}hasAsyncValidator(y){return Vi(this._rawAsyncValidators,y)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(y={}){this.touched=!0,this._parent&&!y.onlySelf&&this._parent.markAsTouched(y)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(y=>y.markAllAsTouched())}markAsUntouched(y={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(f=>{f.markAsUntouched({onlySelf:!0})}),this._parent&&!y.onlySelf&&this._parent._updateTouched(y)}markAsDirty(y={}){this.pristine=!1,this._parent&&!y.onlySelf&&this._parent.markAsDirty(y)}markAsPristine(y={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(f=>{f.markAsPristine({onlySelf:!0})}),this._parent&&!y.onlySelf&&this._parent._updatePristine(y)}markAsPending(y={}){this.status=oo,!1!==y.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!y.onlySelf&&this._parent.markAsPending(y)}disable(y={}){const f=this._parentMarkedDirty(y.onlySelf);this.status=Yo,this.errors=null,this._forEachChild(b=>{b.disable(Object.assign(Object.assign({},y),{onlySelf:!0}))}),this._updateValue(),!1!==y.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},y),{skipPristineCheck:f})),this._onDisabledChange.forEach(b=>b(!0))}enable(y={}){const f=this._parentMarkedDirty(y.onlySelf);this.status=gi,this._forEachChild(b=>{b.enable(Object.assign(Object.assign({},y),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:y.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},y),{skipPristineCheck:f})),this._onDisabledChange.forEach(b=>b(!1))}_updateAncestors(y){this._parent&&!y.onlySelf&&(this._parent.updateValueAndValidity(y),y.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(y){this._parent=y}updateValueAndValidity(y={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gi||this.status===oo)&&this._runAsyncValidator(y.emitEvent)),!1!==y.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!y.onlySelf&&this._parent.updateValueAndValidity(y)}_updateTreeValidity(y={emitEvent:!0}){this._forEachChild(f=>f._updateTreeValidity(y)),this.updateValueAndValidity({onlySelf:!0,emitEvent:y.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yo:gi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(y){if(this.asyncValidator){this.status=oo,this._hasOwnPendingAsyncValidator=!0;const f=mn(this.asyncValidator(this));this._asyncValidationSubscription=f.subscribe(b=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(b,{emitEvent:y})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(y,f={}){this.errors=y,this._updateControlsErrors(!1!==f.emitEvent)}get(y){return function(w,y,f){if(null==y||(Array.isArray(y)||(y=y.split(".")),Array.isArray(y)&&0===y.length))return null;let b=w;return y.forEach(L=>{b=b instanceof Wi?b.controls.hasOwnProperty(L)?b.controls[L]:null:b instanceof ys&&b.at(L)||null}),b}(this,y)}getError(y,f){const b=f?this.get(f):this;return b&&b.errors?b.errors[y]:null}hasError(y,f){return!!this.getError(y,f)}get root(){let y=this;for(;y._parent;)y=y._parent;return y}_updateControlsErrors(y){this.status=this._calculateStatus(),y&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(y)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?Yo:this.errors?Wo:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oo)?oo:this._anyControlsHaveStatus(Wo)?Wo:gi}_anyControlsHaveStatus(y){return this._anyControls(f=>f.status===y)}_anyControlsDirty(){return this._anyControls(y=>y.dirty)}_anyControlsTouched(){return this._anyControls(y=>y.touched)}_updatePristine(y={}){this.pristine=!this._anyControlsDirty(),this._parent&&!y.onlySelf&&this._parent._updatePristine(y)}_updateTouched(y={}){this.touched=this._anyControlsTouched(),this._parent&&!y.onlySelf&&this._parent._updateTouched(y)}_isBoxedValue(y){return"object"==typeof y&&null!==y&&2===Object.keys(y).length&&"value"in y&&"disabled"in y}_registerOnCollectionChange(y){this._onCollectionChange=y}_setUpdateStrategy(y){vs(y)&&null!=y.updateOn&&(this._updateOn=y.updateOn)}_parentMarkedDirty(y){return!y&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class vi extends so{constructor(y=null,f,b){super(Xt(f),mi(b,f)),this._onChange=[],this._applyFormState(y),this._setUpdateStrategy(f),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(y,f={}){this.value=this._pendingValue=y,this._onChange.length&&!1!==f.emitModelToViewChange&&this._onChange.forEach(b=>b(this.value,!1!==f.emitViewToModelChange)),this.updateValueAndValidity(f)}patchValue(y,f={}){this.setValue(y,f)}reset(y=null,f={}){this._applyFormState(y),this.markAsPristine(f),this.markAsUntouched(f),this.setValue(this.value,f),this._pendingChange=!1}_updateValue(){}_anyControls(y){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(y){this._onChange.push(y)}_unregisterOnChange(y){Ho(this._onChange,y)}registerOnDisabledChange(y){this._onDisabledChange.push(y)}_unregisterOnDisabledChange(y){Ho(this._onDisabledChange,y)}_forEachChild(y){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(y){this._isBoxedValue(y)?(this.value=this._pendingValue=y.value,y.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=y}}class Wi extends so{constructor(y,f,b){super(Xt(f),mi(b,f)),this.controls=y,this._initObservables(),this._setUpdateStrategy(f),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(y,f){return this.controls[y]?this.controls[y]:(this.controls[y]=f,f.setParent(this),f._registerOnCollectionChange(this._onCollectionChange),f)}addControl(y,f,b={}){this.registerControl(y,f),this.updateValueAndValidity({emitEvent:b.emitEvent}),this._onCollectionChange()}removeControl(y,f={}){this.controls[y]&&this.controls[y]._registerOnCollectionChange(()=>{}),delete this.controls[y],this.updateValueAndValidity({emitEvent:f.emitEvent}),this._onCollectionChange()}setControl(y,f,b={}){this.controls[y]&&this.controls[y]._registerOnCollectionChange(()=>{}),delete this.controls[y],f&&this.registerControl(y,f),this.updateValueAndValidity({emitEvent:b.emitEvent}),this._onCollectionChange()}contains(y){return this.controls.hasOwnProperty(y)&&this.controls[y].enabled}setValue(y,f={}){this._checkAllValuesPresent(y),Object.keys(y).forEach(b=>{this._throwIfControlMissing(b),this.controls[b].setValue(y[b],{onlySelf:!0,emitEvent:f.emitEvent})}),this.updateValueAndValidity(f)}patchValue(y,f={}){null!=y&&(Object.keys(y).forEach(b=>{this.controls[b]&&this.controls[b].patchValue(y[b],{onlySelf:!0,emitEvent:f.emitEvent})}),this.updateValueAndValidity(f))}reset(y={},f={}){this._forEachChild((b,L)=>{b.reset(y[L],{onlySelf:!0,emitEvent:f.emitEvent})}),this._updatePristine(f),this._updateTouched(f),this.updateValueAndValidity(f)}getRawValue(){return this._reduceChildren({},(y,f,b)=>(y[b]=f instanceof vi?f.value:f.getRawValue(),y))}_syncPendingControls(){let y=this._reduceChildren(!1,(f,b)=>!!b._syncPendingControls()||f);return y&&this.updateValueAndValidity({onlySelf:!0}),y}_throwIfControlMissing(y){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[y])throw new Error(`Cannot find form control with name: ${y}.`)}_forEachChild(y){Object.keys(this.controls).forEach(f=>{const b=this.controls[f];b&&y(b,f)})}_setUpControls(){this._forEachChild(y=>{y.setParent(this),y._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(y){for(const f of Object.keys(this.controls)){const b=this.controls[f];if(this.contains(f)&&y(b))return!0}return!1}_reduceValue(){return this._reduceChildren({},(y,f,b)=>((f.enabled||this.disabled)&&(y[b]=f.value),y))}_reduceChildren(y,f){let b=y;return this._forEachChild((L,Y)=>{b=f(b,L,Y)}),b}_allControlsDisabled(){for(const y of Object.keys(this.controls))if(this.controls[y].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(y){this._forEachChild((f,b)=>{if(void 0===y[b])throw new Error(`Must supply a value for form control with name: '${b}'.`)})}}class ys extends so{constructor(y,f,b){super(Xt(f),mi(b,f)),this.controls=y,this._initObservables(),this._setUpdateStrategy(f),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(y){return this.controls[y]}push(y,f={}){this.controls.push(y),this._registerControl(y),this.updateValueAndValidity({emitEvent:f.emitEvent}),this._onCollectionChange()}insert(y,f,b={}){this.controls.splice(y,0,f),this._registerControl(f),this.updateValueAndValidity({emitEvent:b.emitEvent})}removeAt(y,f={}){this.controls[y]&&this.controls[y]._registerOnCollectionChange(()=>{}),this.controls.splice(y,1),this.updateValueAndValidity({emitEvent:f.emitEvent})}setControl(y,f,b={}){this.controls[y]&&this.controls[y]._registerOnCollectionChange(()=>{}),this.controls.splice(y,1),f&&(this.controls.splice(y,0,f),this._registerControl(f)),this.updateValueAndValidity({emitEvent:b.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(y,f={}){this._checkAllValuesPresent(y),y.forEach((b,L)=>{this._throwIfControlMissing(L),this.at(L).setValue(b,{onlySelf:!0,emitEvent:f.emitEvent})}),this.updateValueAndValidity(f)}patchValue(y,f={}){null!=y&&(y.forEach((b,L)=>{this.at(L)&&this.at(L).patchValue(b,{onlySelf:!0,emitEvent:f.emitEvent})}),this.updateValueAndValidity(f))}reset(y=[],f={}){this._forEachChild((b,L)=>{b.reset(y[L],{onlySelf:!0,emitEvent:f.emitEvent})}),this._updatePristine(f),this._updateTouched(f),this.updateValueAndValidity(f)}getRawValue(){return this.controls.map(y=>y instanceof vi?y.value:y.getRawValue())}clear(y={}){this.controls.length<1||(this._forEachChild(f=>f._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:y.emitEvent}))}_syncPendingControls(){let y=this.controls.reduce((f,b)=>!!b._syncPendingControls()||f,!1);return y&&this.updateValueAndValidity({onlySelf:!0}),y}_throwIfControlMissing(y){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(y))throw new Error(`Cannot find form control at index ${y}`)}_forEachChild(y){this.controls.forEach((f,b)=>{y(f,b)})}_updateValue(){this.value=this.controls.filter(y=>y.enabled||this.disabled).map(y=>y.value)}_anyControls(y){return this.controls.some(f=>f.enabled&&y(f))}_setUpControls(){this._forEachChild(y=>this._registerControl(y))}_checkAllValuesPresent(y){this._forEachChild((f,b)=>{if(void 0===y[b])throw new Error(`Must supply a value for form control at index: ${b}.`)})}_allControlsDisabled(){for(const y of this.controls)if(y.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(y){y.setParent(this),y._registerOnCollectionChange(this._onCollectionChange)}}const qo={provide:wr,useExisting:(0,_.Gpc)(()=>Je)},tt=(()=>Promise.resolve(null))();let Je=(()=>{class w extends wr{constructor(f,b){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new _.vpe,this.form=new Wi({},cn(f),qn(b))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(f){tt.then(()=>{const b=this._findContainer(f.path);f.control=b.registerControl(f.name,f.control),ce(f.control,f),f.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(f)})}getControl(f){return this.form.get(f.path)}removeControl(f){tt.then(()=>{const b=this._findContainer(f.path);b&&b.removeControl(f.name),Ho(this._directives,f)})}addFormGroup(f){tt.then(()=>{const b=this._findContainer(f.path),L=new Wi({});or(L,f),b.registerControl(f.name,L),L.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(f){tt.then(()=>{const b=this._findContainer(f.path);b&&b.removeControl(f.name)})}getFormGroup(f){return this.form.get(f.path)}updateModel(f,b){tt.then(()=>{this.form.get(f.path).setValue(b)})}setValue(f){this.control.setValue(f)}onSubmit(f){return this.submitted=!0,Hi(this.form,this._directives),this.ngSubmit.emit(f),!1}onReset(){this.resetForm()}resetForm(f){this.form.reset(f),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(f){return f.pop(),f.length?this.form.get(f):this.form}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(Ye,10),_.Y36(_t,10))},w.\u0275dir=_.lG2({type:w,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(f,b){1&f&&_.NdJ("submit",function(Y){return b.onSubmit(Y)})("reset",function(){return b.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([qo]),_.qOj]}),w})(),Tr=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275dir=_.lG2({type:w,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),w})();const Jn={provide:at,useExisting:(0,_.Gpc)(()=>Nr),multi:!0};let Nr=(()=>{class w extends Ie{writeValue(f){this.setProperty("value",null==f?"":f)}registerOnChange(f){this.onChange=b=>{f(""==b?null:parseFloat(b))}}}return w.\u0275fac=function(){let y;return function(b){return(y||(y=_.n5z(w)))(b||w)}}(),w.\u0275dir=_.lG2({type:w,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(f,b){1&f&&_.NdJ("input",function(Y){return b.onChange(Y.target.value)})("blur",function(){return b.onTouched()})},features:[_._Bn([Jn]),_.qOj]}),w})(),Fi=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({}),w})();const ho=new _.OlP("NgModelWithFormControlWarning"),us={provide:wr,useExisting:(0,_.Gpc)(()=>eo)};let eo=(()=>{class w extends wr{constructor(f,b){super(),this.validators=f,this.asyncValidators=b,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(f),this._setAsyncValidators(b)}ngOnChanges(f){this._checkFormPresent(),f.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(_r(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(f){const b=this.form.get(f.path);return ce(b,f),b.updateValueAndValidity({emitEvent:!1}),this.directives.push(f),b}getControl(f){return this.form.get(f.path)}removeControl(f){pe(f.control||null,f,!1),Ho(this.directives,f)}addFormGroup(f){this._setUpFormContainer(f)}removeFormGroup(f){this._cleanUpFormContainer(f)}getFormGroup(f){return this.form.get(f.path)}addFormArray(f){this._setUpFormContainer(f)}removeFormArray(f){this._cleanUpFormContainer(f)}getFormArray(f){return this.form.get(f.path)}updateModel(f,b){this.form.get(f.path).setValue(b)}onSubmit(f){return this.submitted=!0,Hi(this.form,this.directives),this.ngSubmit.emit(f),!1}onReset(){this.resetForm()}resetForm(f){this.form.reset(f),this.submitted=!1}_updateDomValue(){this.directives.forEach(f=>{const b=f.control,L=this.form.get(f.path);b!==L&&(pe(b||null,f),L instanceof vi&&(ce(L,f),f.control=L))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(f){const b=this.form.get(f.path);or(b,f),b.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(f){if(this.form){const b=this.form.get(f.path);b&&function(w,y){return _r(w,y)}(b,f)&&b.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_n(this.form,this),this._oldForm&&_r(this._oldForm,this)}_checkFormPresent(){}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(Ye,10),_.Y36(_t,10))},w.\u0275dir=_.lG2({type:w,selectors:[["","formGroup",""]],hostBindings:function(f,b){1&f&&_.NdJ("submit",function(Y){return b.onSubmit(Y)})("reset",function(){return b.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([us]),_.qOj,_.TTD]}),w})();const Oi={provide:en,useExisting:(0,_.Gpc)(()=>pl)};let pl=(()=>{class w extends en{constructor(f,b,L,Y,me){super(),this._ngModelWarningConfig=me,this._added=!1,this.update=new _.vpe,this._ngModelWarningSent=!1,this._parent=f,this._setValidators(b),this._setAsyncValidators(L),this.valueAccessor=function(w,y){if(!y)return null;let f,b,L;return Array.isArray(y),y.forEach(Y=>{Y.constructor===ue?f=Y:function(w){return Object.getPrototypeOf(w.constructor)===Ie}(Y)?b=Y:L=Y}),L||b||f||null}(0,Y)}set isDisabled(f){}ngOnChanges(f){this._added||this._setUpControl(),function(w,y){if(!w.hasOwnProperty("model"))return!1;const f=w.model;return!!f.isFirstChange()||!Object.is(y,f.currentValue)}(f,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(f){this.viewModel=f,this.update.emit(f)}get path(){return function(w,y){return[...y.path,w]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(wr,13),_.Y36(Ye,10),_.Y36(_t,10),_.Y36(at,10),_.Y36(ho,8))},w.\u0275dir=_.lG2({type:w,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_._Bn([Oi]),_.qOj,_.TTD]}),w._ngModelWarningSentOnce=!1,w})();const nd={provide:Ye,useExisting:(0,_.Gpc)(()=>cu),multi:!0};let cu=(()=>{class w{constructor(){this._required=!1}get required(){return this._required}set required(f){this._required=null!=f&&!1!==f&&"false"!=`${f}`,this._onChange&&this._onChange()}validate(f){return this.required?function(w){return function(w){return null==w||0===w.length}(w.value)?{required:!0}:null}(f):null}registerOnValidatorChange(f){this._onChange=f}}return w.\u0275fac=function(f){return new(f||w)},w.\u0275dir=_.lG2({type:w,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(f,b){2&f&&_.uIk("required",b.required?"":null)},inputs:{required:"required"},features:[_._Bn([nd])]}),w})(),q=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({imports:[[Fi]]}),w})(),he=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({imports:[q]}),w})(),ze=(()=>{class w{static withConfig(f){return{ngModule:w,providers:[{provide:ho,useValue:f.warnOnNgModelWithFormControl}]}}}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({imports:[q]}),w})();var tr=(()=>{return(w=tr||(tr={}))[w.geolocation=0]="geolocation",w[w.reverseGeolocation=1]="reverseGeolocation",w[w.itinerary=2]="itinerary",tr;var w})(),Jr=ee(4375),Gn=ee(9765),pr=ee(5319),xi=ee(6215),ei=ee(5917);function Va(w,...y){return y.length?y.some(f=>w[f]):w.altKey||w.shiftKey||w.ctrlKey||w.metaKey}var Sl=ee(3342),xl=ee(7393);class fo extends pr.w{constructor(y,f){super()}schedule(y,f=0){return this}}class Zl extends fo{constructor(y,f){super(y,f),this.scheduler=y,this.work=f,this.pending=!1}schedule(y,f=0){if(this.closed)return this;this.state=y;const b=this.id,L=this.scheduler;return null!=b&&(this.id=this.recycleAsyncId(L,b,f)),this.pending=!0,this.delay=f,this.id=this.id||this.requestAsyncId(L,this.id,f),this}requestAsyncId(y,f,b=0){return setInterval(y.flush.bind(y,this),b)}recycleAsyncId(y,f,b=0){if(null!==b&&this.delay===b&&!1===this.pending)return f;clearInterval(f)}execute(y,f){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const b=this._execute(y,f);if(b)return b;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(y,f){let L,b=!1;try{this.work(y)}catch(Y){b=!0,L=!!Y&&Y||new Error(Y)}if(b)return this.unsubscribe(),L}_unsubscribe(){const y=this.id,f=this.scheduler,b=f.actions,L=b.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==L&&b.splice(L,1),null!=y&&(this.id=this.recycleAsyncId(f,y,null)),this.delay=null}}let wc=(()=>{class w{constructor(f,b=w.now){this.SchedulerAction=f,this.now=b}schedule(f,b=0,L){return new this.SchedulerAction(this,f).schedule(L,b)}}return w.now=()=>Date.now(),w})();class za extends wc{constructor(y,f=wc.now){super(y,()=>za.delegate&&za.delegate!==this?za.delegate.now():f()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(y,f=0,b){return za.delegate&&za.delegate!==this?za.delegate.schedule(y,f,b):super.schedule(y,f,b)}flush(y){const{actions:f}=this;if(this.active)return void f.push(y);let b;this.active=!0;do{if(b=y.execute(y.state,y.delay))break}while(y=f.shift());if(this.active=!1,b){for(;y=f.shift();)y.unsubscribe();throw b}}}const dy=new za(Zl);function RI(w,y=dy){return f=>f.lift(new OI(w,y))}class OI{constructor(y,f){this.dueTime=y,this.scheduler=f}call(y,f){return f.subscribe(new DI(y,this.dueTime,this.scheduler))}}class DI extends xl.L{constructor(y,f,b){super(y),this.dueTime=f,this.scheduler=b,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(y){this.clearDebounce(),this.lastValue=y,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(mb,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:y}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(y)}}clearDebounce(){const y=this.debouncedSubscription;null!==y&&(this.remove(y),y.unsubscribe(),this.debouncedSubscription=null)}}function mb(w){w.debouncedNext()}var hy=ee(5435),ud=ee(5257);class LI{constructor(y){this.total=y}call(y,f){return f.subscribe(new ta(y,this.total))}}class ta extends xl.L{constructor(y,f){super(y),this.total=f,this.count=0}_next(y){++this.count>this.total&&this.destination.next(y)}}function Ff(w,y){return f=>f.lift(new Gf(w,y))}class Gf{constructor(y,f){this.compare=y,this.keySelector=f}call(y,f){return f.subscribe(new US(y,this.compare,this.keySelector))}}class US extends xl.L{constructor(y,f,b){super(y),this.keySelector=b,this.hasKey=!1,"function"==typeof f&&(this.compare=f)}compare(y,f){return y===f}_next(y){let f;try{const{keySelector:L}=this;f=L?L(y):y}catch(L){return this.destination.error(L)}let b=!1;if(this.hasKey)try{const{compare:L}=this;b=L(this.key,f)}catch(L){return this.destination.error(L)}else this.hasKey=!0;b||(this.key=f,this.destination.next(y))}}var Rh=ee(5345);function Eo(w){return y=>y.lift(new Fu(w))}class Fu{constructor(y){this.notifier=y}call(y,f){const b=new cg(y),L=(0,Rh.ft)(this.notifier,new Rh.IY(b));return L&&!b.seenValue?(b.add(L),f.subscribe(b)):b}}class cg extends Rh.Ds{constructor(y){super(y),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function No(w){return null!=w&&"false"!=`${w}`}function Ca(w,y=0){return function(w){return!isNaN(parseFloat(w))&&!isNaN(Number(w))}(w)?Number(w):y}function fy(w){return Array.isArray(w)?w:[w]}function Us(w){return null==w?"":"string"==typeof w?w:`${w}px`}function Oh(w){return w instanceof _.SBq?w.nativeElement:w}let dg;try{dg="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(w){dg=!1}let Ri,Di=(()=>{class w{constructor(f){this._platformId=f,this.isBrowser=this._platformId?(0,Pe.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!dg)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(_.Lbi))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(_.Lbi))},token:w,providedIn:"root"}),w})(),Cc=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({}),w})();const VS=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function py(){if(Ri)return Ri;if("object"!=typeof document||!document)return Ri=new Set(VS),Ri;let w=document.createElement("input");return Ri=new Set(VS.filter(y=>(w.setAttribute("type",y),w.type===y))),Ri}let Bf,Dh,jf;function Sc(w){return function(){if(null==Bf&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Bf=!0}))}finally{Bf=Bf||!1}return Bf}()?w:!!w.capture}function dd(){if(null==Dh){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Dh=!1,Dh;if("scrollBehavior"in document.documentElement.style)Dh=!0;else{const w=Element.prototype.scrollTo;Dh=!!w&&!/\{\s*\[native code\]\s*\}/.test(w.toString())}}return Dh}function Gu(w){return w.composedPath?w.composedPath()[0]:w.target}let my=(()=>{class w{create(f){return"undefined"==typeof MutationObserver?null:new MutationObserver(f)}}return w.\u0275fac=function(f){return new(f||w)},w.\u0275prov=_.Yz7({factory:function(){return new w},token:w,providedIn:"root"}),w})(),Hm=(()=>{class w{constructor(f){this._mutationObserverFactory=f,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((f,b)=>this._cleanupObserver(b))}observe(f){const b=Oh(f);return new Ke.y(L=>{const me=this._observeElement(b).subscribe(L);return()=>{me.unsubscribe(),this._unobserveElement(b)}})}_observeElement(f){if(this._observedElements.has(f))this._observedElements.get(f).count++;else{const b=new Gn.xQ,L=this._mutationObserverFactory.create(Y=>b.next(Y));L&&L.observe(f,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(f,{observer:L,stream:b,count:1})}return this._observedElements.get(f).stream}_unobserveElement(f){this._observedElements.has(f)&&(this._observedElements.get(f).count--,this._observedElements.get(f).count||this._cleanupObserver(f))}_cleanupObserver(f){if(this._observedElements.has(f)){const{observer:b,stream:L}=this._observedElements.get(f);b&&b.disconnect(),L.complete(),this._observedElements.delete(f)}}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(my))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(my))},token:w,providedIn:"root"}),w})(),Wm=(()=>{class w{constructor(f,b,L){this._contentObserver=f,this._elementRef=b,this._ngZone=L,this.event=new _.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(f){this._disabled=No(f),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(f){this._debounce=Ca(f),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const f=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?f.pipe(RI(this.debounce)):f).subscribe(this.event)})}_unsubscribe(){var f;null===(f=this._currentSubscription)||void 0===f||f.unsubscribe()}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(Hm),_.Y36(_.SBq),_.Y36(_.R0b))},w.\u0275dir=_.lG2({type:w,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),w})(),vy=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({providers:[my]}),w})();class Lh extends class{constructor(y){this._items=y,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Gn.xQ,this._typeaheadSubscription=pr.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=f=>f.disabled,this._pressedLetters=[],this.tabOut=new Gn.xQ,this.change=new Gn.xQ,y instanceof _.n_E&&y.changes.subscribe(f=>{if(this._activeItem){const L=f.toArray().indexOf(this._activeItem);L>-1&&L!==this._activeItemIndex&&(this._activeItemIndex=L)}})}skipPredicate(y){return this._skipPredicateFn=y,this}withWrap(y=!0){return this._wrap=y,this}withVerticalOrientation(y=!0){return this._vertical=y,this}withHorizontalOrientation(y){return this._horizontal=y,this}withAllowedModifierKeys(y){return this._allowedModifierKeys=y,this}withTypeAhead(y=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Sl.b)(f=>this._pressedLetters.push(f)),RI(y),(0,hy.h)(()=>this._pressedLetters.length>0),(0,nt.U)(()=>this._pressedLetters.join(""))).subscribe(f=>{const b=this._getItemsArray();for(let L=1;L<b.length+1;L++){const Y=(this._activeItemIndex+L)%b.length,me=b[Y];if(!this._skipPredicateFn(me)&&0===me.getLabel().toUpperCase().trim().indexOf(f)){this.setActiveItem(Y);break}}this._pressedLetters=[]}),this}withHomeAndEnd(y=!0){return this._homeAndEnd=y,this}setActiveItem(y){const f=this._activeItem;this.updateActiveItem(y),this._activeItem!==f&&this.change.next(this._activeItemIndex)}onKeydown(y){const f=y.keyCode,L=["altKey","ctrlKey","metaKey","shiftKey"].every(Y=>!y[Y]||this._allowedModifierKeys.indexOf(Y)>-1);switch(f){case 9:return void this.tabOut.next();case 40:if(this._vertical&&L){this.setNextItemActive();break}return;case 38:if(this._vertical&&L){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&L){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&L){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&L){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&L){this.setLastItemActive();break}return;default:return void((L||Va(y,"shiftKey"))&&(y.key&&1===y.key.length?this._letterKeyStream.next(y.key.toLocaleUpperCase()):(f>=65&&f<=90||f>=48&&f<=57)&&this._letterKeyStream.next(String.fromCharCode(f))))}this._pressedLetters=[],y.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(y){const f=this._getItemsArray(),b="number"==typeof y?y:f.indexOf(y),L=f[b];this._activeItem=null==L?null:L,this._activeItemIndex=b}_setActiveItemByDelta(y){this._wrap?this._setActiveInWrapMode(y):this._setActiveInDefaultMode(y)}_setActiveInWrapMode(y){const f=this._getItemsArray();for(let b=1;b<=f.length;b++){const L=(this._activeItemIndex+y*b+f.length)%f.length;if(!this._skipPredicateFn(f[L]))return void this.setActiveItem(L)}}_setActiveInDefaultMode(y){this._setActiveItemByIndex(this._activeItemIndex+y,y)}_setActiveItemByIndex(y,f){const b=this._getItemsArray();if(b[y]){for(;this._skipPredicateFn(b[y]);)if(!b[y+=f])return;this.setActiveItem(y)}}_getItemsArray(){return this._items instanceof _.n_E?this._items.toArray():this._items}}{setActiveItem(y){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(y),this.activeItem&&this.activeItem.setActiveStyles()}}function Km(w){return 0===w.offsetX&&0===w.offsetY}function Wa(w){const y=w.touches&&w.touches[0]||w.changedTouches&&w.changedTouches[0];return!(!y||-1!==y.identifier||null!=y.radiusX&&1!==y.radiusX||null!=y.radiusY&&1!==y.radiusY)}"undefined"!=typeof Element&&Element;const Zm=new _.OlP("cdk-input-modality-detector-options"),xy={ignoreKeys:[18,17,224,91,16]},Hf=Sc({passive:!0,capture:!0});let vu=(()=>{class w{constructor(f,b,L,Y){this._platform=f,this._mostRecentTarget=null,this._modality=new xi.X(null),this._lastTouchMs=0,this._onKeydown=me=>{var pt,Mt;(null===(Mt=null===(pt=this._options)||void 0===pt?void 0:pt.ignoreKeys)||void 0===Mt?void 0:Mt.some(an=>an===me.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Gu(me))},this._onMousedown=me=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Km(me)?"keyboard":"mouse"),this._mostRecentTarget=Gu(me))},this._onTouchstart=me=>{Wa(me)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Gu(me))},this._options=Object.assign(Object.assign({},xy),Y),this.modalityDetected=this._modality.pipe(y=>y.lift(new LI(1))),this.modalityChanged=this.modalityDetected.pipe(Ff()),f.isBrowser&&b.runOutsideAngular(()=>{L.addEventListener("keydown",this._onKeydown,Hf),L.addEventListener("mousedown",this._onMousedown,Hf),L.addEventListener("touchstart",this._onTouchstart,Hf)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){!this._platform.isBrowser||(document.removeEventListener("keydown",this._onKeydown,Hf),document.removeEventListener("mousedown",this._onMousedown,Hf),document.removeEventListener("touchstart",this._onTouchstart,Hf))}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(Di),_.LFG(_.R0b),_.LFG(Pe.K0),_.LFG(Zm,8))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(Di),_.LFG(_.R0b),_.LFG(Pe.K0),_.LFG(Zm,8))},token:w,providedIn:"root"}),w})();const _b=new _.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),Eb=new _.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let xc=(()=>{class w{constructor(f,b,L,Y){this._ngZone=b,this._defaultOptions=Y,this._document=L,this._liveElement=f||this._createLiveElement()}announce(f,...b){const L=this._defaultOptions;let Y,me;return 1===b.length&&"number"==typeof b[0]?me=b[0]:[Y,me]=b,this.clear(),clearTimeout(this._previousTimeout),Y||(Y=L&&L.politeness?L.politeness:"polite"),null==me&&L&&(me=L.duration),this._liveElement.setAttribute("aria-live",Y),this._ngZone.runOutsideAngular(()=>new Promise(pt=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=f,pt(),"number"==typeof me&&(this._previousTimeout=setTimeout(()=>this.clear(),me))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const f="cdk-live-announcer-element",b=this._document.getElementsByClassName(f),L=this._document.createElement("div");for(let Y=0;Y<b.length;Y++)b[Y].parentNode.removeChild(b[Y]);return L.classList.add(f),L.classList.add("cdk-visually-hidden"),L.setAttribute("aria-atomic","true"),L.setAttribute("aria-live","polite"),this._document.body.appendChild(L),L}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(_b,8),_.LFG(_.R0b),_.LFG(Pe.K0),_.LFG(Eb,8))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(_b,8),_.LFG(_.R0b),_.LFG(Pe.K0),_.LFG(Eb,8))},token:w,providedIn:"root"}),w})();const Py=new _.OlP("cdk-focus-monitor-default-options"),Gh=Sc({passive:!0,capture:!0});let Iy=(()=>{class w{constructor(f,b,L,Y,me){this._ngZone=f,this._platform=b,this._inputModalityDetector=L,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Gn.xQ,this._rootNodeFocusAndBlurListener=pt=>{const Mt=Gu(pt),an="focus"===pt.type?this._onFocus:this._onBlur;for(let On=Mt;On;On=On.parentElement)an.call(this,pt,On)},this._document=Y,this._detectionMode=(null==me?void 0:me.detectionMode)||0}monitor(f,b=!1){const L=Oh(f);if(!this._platform.isBrowser||1!==L.nodeType)return(0,ei.of)(null);const Y=function(w){if(function(){if(null==jf){const w="undefined"!=typeof document?document.head:null;jf=!(!w||!w.createShadowRoot&&!w.attachShadow)}return jf}()){const y=w.getRootNode?w.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&y instanceof ShadowRoot)return y}return null}(L)||this._getDocument(),me=this._elementInfo.get(L);if(me)return b&&(me.checkChildren=!0),me.subject;const pt={checkChildren:b,subject:new Gn.xQ,rootNode:Y};return this._elementInfo.set(L,pt),this._registerGlobalListeners(pt),pt.subject}stopMonitoring(f){const b=Oh(f),L=this._elementInfo.get(b);L&&(L.subject.complete(),this._setClasses(b),this._elementInfo.delete(b),this._removeGlobalListeners(L))}focusVia(f,b,L){const Y=Oh(f);Y===this._getDocument().activeElement?this._getClosestElementsInfo(Y).forEach(([pt,Mt])=>this._originChanged(pt,b,Mt)):(this._setOrigin(b),"function"==typeof Y.focus&&Y.focus(L))}ngOnDestroy(){this._elementInfo.forEach((f,b)=>this.stopMonitoring(b))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(f,b,L){L?f.classList.add(b):f.classList.remove(b)}_getFocusOrigin(f){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(f)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(f){return 1===this._detectionMode||!!(null==f?void 0:f.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(f,b){this._toggleClass(f,"cdk-focused",!!b),this._toggleClass(f,"cdk-touch-focused","touch"===b),this._toggleClass(f,"cdk-keyboard-focused","keyboard"===b),this._toggleClass(f,"cdk-mouse-focused","mouse"===b),this._toggleClass(f,"cdk-program-focused","program"===b)}_setOrigin(f,b=!1){this._ngZone.runOutsideAngular(()=>{this._origin=f,this._originFromTouchInteraction="touch"===f&&b,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(f,b){const L=this._elementInfo.get(b),Y=Gu(f);!L||!L.checkChildren&&b!==Y||this._originChanged(b,this._getFocusOrigin(Y),L)}_onBlur(f,b){const L=this._elementInfo.get(b);!L||L.checkChildren&&f.relatedTarget instanceof Node&&b.contains(f.relatedTarget)||(this._setClasses(b),this._emitOrigin(L.subject,null))}_emitOrigin(f,b){this._ngZone.run(()=>f.next(b))}_registerGlobalListeners(f){if(!this._platform.isBrowser)return;const b=f.rootNode,L=this._rootNodeFocusListenerCount.get(b)||0;L||this._ngZone.runOutsideAngular(()=>{b.addEventListener("focus",this._rootNodeFocusAndBlurListener,Gh),b.addEventListener("blur",this._rootNodeFocusAndBlurListener,Gh)}),this._rootNodeFocusListenerCount.set(b,L+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Eo(this._stopInputModalityDetector)).subscribe(Y=>{this._setOrigin(Y,!0)}))}_removeGlobalListeners(f){const b=f.rootNode;if(this._rootNodeFocusListenerCount.has(b)){const L=this._rootNodeFocusListenerCount.get(b);L>1?this._rootNodeFocusListenerCount.set(b,L-1):(b.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Gh),b.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Gh),this._rootNodeFocusListenerCount.delete(b))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(f,b,L){this._setClasses(f,b),this._emitOrigin(L.subject,b),this._lastFocusOrigin=b}_getClosestElementsInfo(f){const b=[];return this._elementInfo.forEach((L,Y)=>{(Y===f||L.checkChildren&&Y.contains(f))&&b.push([Y,L])}),b}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(_.R0b),_.LFG(Di),_.LFG(vu),_.LFG(Pe.K0,8),_.LFG(Py,8))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(_.R0b),_.LFG(Di),_.LFG(vu),_.LFG(Pe.K0,8),_.LFG(Py,8))},token:w,providedIn:"root"}),w})();const fd="cdk-high-contrast-black-on-white",Zo="cdk-high-contrast-white-on-black",Wf="cdk-high-contrast-active";let bb=(()=>{class w{constructor(f,b){this._platform=f,this._document=b}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const f=this._document.createElement("div");f.style.backgroundColor="rgb(1,2,3)",f.style.position="absolute",this._document.body.appendChild(f);const b=this._document.defaultView||window,L=b&&b.getComputedStyle?b.getComputedStyle(f):null,Y=(L&&L.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(f),Y){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const f=this._document.body.classList;f.remove(Wf),f.remove(fd),f.remove(Zo),this._hasCheckedHighContrastMode=!0;const b=this.getHighContrastMode();1===b?(f.add(Wf),f.add(fd)):2===b&&(f.add(Wf),f.add(Zo))}}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(Di),_.LFG(Pe.K0))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(Di),_.LFG(Pe.K0))},token:w,providedIn:"root"}),w})();const wb=new _.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,_.f3M)(Pe.K0)}});let Zs=(()=>{class w{constructor(f){if(this.value="ltr",this.change=new _.vpe,f){const L=f.documentElement?f.documentElement.dir:null,Y=(f.body?f.body.dir:null)||L;this.value="ltr"===Y||"rtl"===Y?Y:"ltr"}}ngOnDestroy(){this.change.complete()}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(wb,8))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(wb,8))},token:w,providedIn:"root"}),w})(),pd=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({}),w})();const My=new _.GfV("12.2.4");var yn=ee(6237);function Sb(w,y){if(1&w&&_._UZ(0,"mat-pseudo-checkbox",4),2&w){const f=_.oxw();_.Q6J("state",f.selected?"checked":"unchecked")("disabled",f.disabled)}}function xb(w,y){if(1&w&&(_.TgZ(0,"span",5),_._uU(1),_.qZA()),2&w){const f=_.oxw();_.xp6(1),_.hij("(",f.group.label,")")}}const C2=["*"],Qm=new _.GfV("12.2.4"),HI=new _.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Io,Il=(()=>{class w{constructor(f,b,L){this._hasDoneGlobalChecks=!1,this._document=L,f._applyBodyHighContrastModeCssClasses(),this._sanityChecks=b,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const f=this._document.defaultView||window;return"object"==typeof f&&f?f:null}_checkIsEnabled(f){return!(!(0,_.X6Q)()||this._isTestEnv())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[f])}_isTestEnv(){const f=this._getWindow();return f&&(f.__karma__||f.jasmine)}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const f=this._document.createElement("div");f.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(f);const b=getComputedStyle(f);b&&"none"!==b.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(f)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&Qm.full!==My.full&&console.warn("The Angular Material version ("+Qm.full+") does not match the Angular CDK version ("+My.full+").\nPlease ensure the versions of these two packages exactly match.")}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(bb),_.LFG(HI,8),_.LFG(Pe.K0))},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({imports:[[pd],pd]}),w})();function $m(w){return class extends w{constructor(...y){super(...y),this._disabled=!1}get disabled(){return this._disabled}set disabled(y){this._disabled=No(y)}}}function Oy(w,y){return class extends w{constructor(...f){super(...f),this.defaultColor=y,this.color=y}get color(){return this._color}set color(f){const b=f||this.defaultColor;b!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),b&&this._elementRef.nativeElement.classList.add(`mat-${b}`),this._color=b)}}}function Bh(w){return class extends w{constructor(...y){super(...y),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(y){this._disableRipple=No(y)}}}function XS(w,y=0){return class extends w{constructor(...f){super(...f),this._tabIndex=y,this.defaultTabIndex=y}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(f){this._tabIndex=null!=f?Ca(f):this.defaultTabIndex}}}function Tb(w){return class extends w{constructor(...y){super(...y),this.stateChanges=new Gn.xQ,this.errorState=!1}updateErrorState(){const y=this.errorState,Y=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);Y!==y&&(this.errorState=Y,this.stateChanges.next())}}}try{Io="undefined"!=typeof Intl}catch(w){Io=!1}let Sa=(()=>{class w{isErrorState(f,b){return!!(f&&f.invalid&&(f.touched||b&&b.submitted))}}return w.\u0275fac=function(f){return new(f||w)},w.\u0275prov=_.Yz7({factory:function(){return new w},token:w,providedIn:"root"}),w})();class a0{constructor(y,f,b){this._renderer=y,this.element=f,this.config=b,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const l0={enterDuration:225,exitDuration:150},u0=Sc({passive:!0}),Ly=["mousedown","touchstart"],nx=["mouseup","mouseleave","touchend","touchcancel"];class ky{constructor(y,f,b,L){this._target=y,this._ngZone=f,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,L.isBrowser&&(this._containerElement=Oh(b))}fadeInRipple(y,f,b={}){const L=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),Y=Object.assign(Object.assign({},l0),b.animation);b.centered&&(y=L.left+L.width/2,f=L.top+L.height/2);const me=b.radius||function(w,y,f){const b=Math.max(Math.abs(w-f.left),Math.abs(w-f.right)),L=Math.max(Math.abs(y-f.top),Math.abs(y-f.bottom));return Math.sqrt(b*b+L*L)}(y,f,L),pt=y-L.left,Mt=f-L.top,an=Y.enterDuration,On=document.createElement("div");On.classList.add("mat-ripple-element"),On.style.left=pt-me+"px",On.style.top=Mt-me+"px",On.style.height=2*me+"px",On.style.width=2*me+"px",null!=b.color&&(On.style.backgroundColor=b.color),On.style.transitionDuration=`${an}ms`,this._containerElement.appendChild(On),window.getComputedStyle(On).getPropertyValue("opacity"),On.style.transform="scale(1)";const jr=new a0(this,On,b);return jr.state=0,this._activeRipples.add(jr),b.persistent||(this._mostRecentTransientRipple=jr),this._runTimeoutOutsideZone(()=>{const bo=jr===this._mostRecentTransientRipple;jr.state=1,!b.persistent&&(!bo||!this._isPointerDown)&&jr.fadeOut()},an),jr}fadeOutRipple(y){const f=this._activeRipples.delete(y);if(y===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!f)return;const b=y.element,L=Object.assign(Object.assign({},l0),y.config.animation);b.style.transitionDuration=`${L.exitDuration}ms`,b.style.opacity="0",y.state=2,this._runTimeoutOutsideZone(()=>{y.state=3,b.parentNode.removeChild(b)},L.exitDuration)}fadeOutAll(){this._activeRipples.forEach(y=>y.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(y=>{y.config.persistent||y.fadeOut()})}setupTriggerEvents(y){const f=Oh(y);!f||f===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=f,this._registerEvents(Ly))}handleEvent(y){"mousedown"===y.type?this._onMousedown(y):"touchstart"===y.type?this._onTouchStart(y):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(nx),this._pointerUpEventsRegistered=!0)}_onMousedown(y){const f=Km(y),b=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!f&&!b&&(this._isPointerDown=!0,this.fadeInRipple(y.clientX,y.clientY,this._target.rippleConfig))}_onTouchStart(y){if(!this._target.rippleDisabled&&!Wa(y)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const f=y.changedTouches;for(let b=0;b<f.length;b++)this.fadeInRipple(f[b].clientX,f[b].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(y=>{!y.config.persistent&&(1===y.state||y.config.terminateOnPointerUp&&0===y.state)&&y.fadeOut()}))}_runTimeoutOutsideZone(y,f=0){this._ngZone.runOutsideAngular(()=>setTimeout(y,f))}_registerEvents(y){this._ngZone.runOutsideAngular(()=>{y.forEach(f=>{this._triggerElement.addEventListener(f,this,u0)})})}_removeTriggerEvents(){this._triggerElement&&(Ly.forEach(y=>{this._triggerElement.removeEventListener(y,this,u0)}),this._pointerUpEventsRegistered&&nx.forEach(y=>{this._triggerElement.removeEventListener(y,this,u0)}))}}const XI=new _.OlP("mat-ripple-global-options");let Ny=(()=>{class w{constructor(f,b,L,Y,me){this._elementRef=f,this._animationMode=me,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=Y||{},this._rippleRenderer=new ky(this,b,f,L)}get disabled(){return this._disabled}set disabled(f){f&&this.fadeOutAllNonPersistent(),this._disabled=f,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(f){this._trigger=f,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(f,b=0,L){return"number"==typeof f?this._rippleRenderer.fadeInRipple(f,b,Object.assign(Object.assign({},this.rippleConfig),L)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),f))}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(_.SBq),_.Y36(_.R0b),_.Y36(Di),_.Y36(XI,8),_.Y36(yn.Qb,8))},w.\u0275dir=_.lG2({type:w,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(f,b){2&f&&_.ekj("mat-ripple-unbounded",b.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),w})(),Fy=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({imports:[[Il,Cc],Il]}),w})(),ix=(()=>{class w{constructor(f){this._animationMode=f,this.state="unchecked",this.disabled=!1}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(yn.Qb,8))},w.\u0275cmp=_.Xpm({type:w,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(f,b){2&f&&_.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===b.state)("mat-pseudo-checkbox-checked","checked"===b.state)("mat-pseudo-checkbox-disabled",b.disabled)("_mat-animation-noopable","NoopAnimations"===b._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(f,b){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),w})(),Gy=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({imports:[[Il]]}),w})();const bg=new _.OlP("MAT_OPTION_PARENT_COMPONENT"),By=$m(class{});let T2=0,Ab=(()=>{class w extends By{constructor(f){var b;super(),this._labelId="mat-optgroup-label-"+T2++,this._inert=null!==(b=null==f?void 0:f.inertGroups)&&void 0!==b&&b}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(bg,8))},w.\u0275dir=_.lG2({type:w,inputs:{label:"label"},features:[_.qOj]}),w})();const Yf=new _.OlP("MatOptgroup");let ox=0;class qf{constructor(y,f=!1){this.source=y,this.isUserInput=f}}let sx=(()=>{class w{constructor(f,b,L,Y){this._element=f,this._changeDetectorRef=b,this._parent=L,this.group=Y,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+ox++,this.onSelectionChange=new _.vpe,this._stateChanges=new Gn.xQ}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(f){this._disabled=No(f)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(f,b){const L=this._getHostElement();"function"==typeof L.focus&&L.focus(b)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(f){(13===f.keyCode||32===f.keyCode)&&!Va(f)&&(this._selectViaInteraction(),f.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const f=this.viewValue;f!==this._mostRecentViewValue&&(this._mostRecentViewValue=f,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(f=!1){this.onSelectionChange.emit(new qf(this,f))}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(_.SBq),_.Y36(_.sBO),_.Y36(void 0),_.Y36(Ab))},w.\u0275dir=_.lG2({type:w,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),w})(),Mb=(()=>{class w extends sx{constructor(f,b,L,Y){super(f,b,L,Y)}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(_.SBq),_.Y36(_.sBO),_.Y36(bg,8),_.Y36(Yf,8))},w.\u0275cmp=_.Xpm({type:w,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(f,b){1&f&&_.NdJ("click",function(){return b._selectViaInteraction()})("keydown",function(Y){return b._handleKeydown(Y)}),2&f&&(_.Ikx("id",b.id),_.uIk("tabindex",b._getTabIndex())("aria-selected",b._getAriaSelected())("aria-disabled",b.disabled.toString()),_.ekj("mat-selected",b.selected)("mat-option-multiple",b.multiple)("mat-active",b.active)("mat-option-disabled",b.disabled))},exportAs:["matOption"],features:[_.qOj],ngContentSelectors:C2,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(f,b){1&f&&(_.F$t(),_.YNc(0,Sb,1,2,"mat-pseudo-checkbox",0),_.TgZ(1,"span",1),_.Hsn(2),_.qZA(),_.YNc(3,xb,2,1,"span",2),_._UZ(4,"div",3)),2&f&&(_.Q6J("ngIf",b.multiple),_.xp6(3),_.Q6J("ngIf",b.group&&b.group._inert),_.xp6(1),_.Q6J("matRippleTrigger",b._getHostElement())("matRippleDisabled",b.disabled||b.disableRipple))},directives:[Pe.O5,Ny,ix],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),w})();function Rb(w,y,f){if(f.length){let b=y.toArray(),L=f.toArray(),Y=0;for(let me=0;me<w+1;me++)b[me].group&&b[me].group===L[Y]&&Y++;return Y}return 0}let Ob=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({imports:[[Fy,Pe.ez,Il,Gy]]}),w})();const wg=["mat-button",""],Al=["*"],lx=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Db=Oy($m(Bh(class{constructor(w){this._elementRef=w}})));let Lb=(()=>{class w extends Db{constructor(f,b,L){super(f),this._focusMonitor=b,this._animationMode=L,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Y of lx)this._hasHostAttributes(Y)&&this._getHostElement().classList.add(Y);f.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(f,b){f?this._focusMonitor.focusVia(this._getHostElement(),f,b):this._getHostElement().focus(b)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...f){return f.some(b=>this._getHostElement().hasAttribute(b))}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(_.SBq),_.Y36(Iy),_.Y36(yn.Qb,8))},w.\u0275cmp=_.Xpm({type:w,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(f,b){if(1&f&&_.Gf(Ny,5),2&f){let L;_.iGM(L=_.CRH())&&(b.ripple=L.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(f,b){2&f&&(_.uIk("disabled",b.disabled||null),_.ekj("_mat-animation-noopable","NoopAnimations"===b._animationMode)("mat-button-disabled",b.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[_.qOj],attrs:wg,ngContentSelectors:Al,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(f,b){1&f&&(_.F$t(),_.TgZ(0,"span",0),_.Hsn(1),_.qZA(),_._UZ(2,"span",1),_._UZ(3,"span",2)),2&f&&(_.xp6(2),_.ekj("mat-button-ripple-round",b.isRoundButton||b.isIconButton),_.Q6J("matRippleDisabled",b._isRippleDisabled())("matRippleCentered",b.isIconButton)("matRippleTrigger",b._getHostElement()))},directives:[Ny],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),w})(),cx=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({imports:[[Fy,Il],Il]}),w})();function Qd(w,y){return new Ke.y(y?f=>y.schedule(dx,0,{error:w,subscriber:f}):f=>f.error(w))}function dx({error:w,subscriber:y}){y.error(w)}var Kf=ee(5304),Pc=ee(8939),ZI=ee(8819),kb=ee(1841),c0=ee(9075);const JI=["*"];function Uu(w){return Error(`Unable to find icon with the name "${w}"`)}function Zf(w){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${w}".`)}function Nb(w){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${w}".`)}class $d{constructor(y,f,b){this.url=y,this.svgText=f,this.options=b}}let eh=(()=>{class w{constructor(f,b,L,Y){this._httpClient=f,this._sanitizer=b,this._errorHandler=Y,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=L}addSvgIcon(f,b,L){return this.addSvgIconInNamespace("",f,b,L)}addSvgIconLiteral(f,b,L){return this.addSvgIconLiteralInNamespace("",f,b,L)}addSvgIconInNamespace(f,b,L,Y){return this._addSvgIconConfig(f,b,new $d(L,null,Y))}addSvgIconResolver(f){return this._resolvers.push(f),this}addSvgIconLiteralInNamespace(f,b,L,Y){const me=this._sanitizer.sanitize(_.q3G.HTML,L);if(!me)throw Nb(L);return this._addSvgIconConfig(f,b,new $d("",me,Y))}addSvgIconSet(f,b){return this.addSvgIconSetInNamespace("",f,b)}addSvgIconSetLiteral(f,b){return this.addSvgIconSetLiteralInNamespace("",f,b)}addSvgIconSetInNamespace(f,b,L){return this._addSvgIconSetConfig(f,new $d(b,null,L))}addSvgIconSetLiteralInNamespace(f,b,L){const Y=this._sanitizer.sanitize(_.q3G.HTML,b);if(!Y)throw Nb(b);return this._addSvgIconSetConfig(f,new $d("",Y,L))}registerFontClassAlias(f,b=f){return this._fontCssClassesByAlias.set(f,b),this}classNameForFontAlias(f){return this._fontCssClassesByAlias.get(f)||f}setDefaultFontSetClass(f){return this._defaultFontSetClass=f,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(f){const b=this._sanitizer.sanitize(_.q3G.RESOURCE_URL,f);if(!b)throw Zf(f);const L=this._cachedIconsByUrl.get(b);return L?(0,ei.of)(Jf(L)):this._loadSvgIconFromConfig(new $d(f,null)).pipe((0,Sl.b)(Y=>this._cachedIconsByUrl.set(b,Y)),(0,nt.U)(Y=>Jf(Y)))}getNamedSvgIcon(f,b=""){const L=d0(b,f);let Y=this._svgIconConfigs.get(L);if(Y)return this._getSvgFromConfig(Y);if(Y=this._getIconConfigFromResolvers(b,f),Y)return this._svgIconConfigs.set(L,Y),this._getSvgFromConfig(Y);const me=this._iconSetConfigs.get(b);return me?this._getSvgFromIconSetConfigs(f,me):Qd(Uu(L))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(f){return f.svgText?(0,ei.of)(Jf(this._svgElementFromConfig(f))):this._loadSvgIconFromConfig(f).pipe((0,nt.U)(b=>Jf(b)))}_getSvgFromIconSetConfigs(f,b){const L=this._extractIconWithNameFromAnySet(f,b);return L?(0,ei.of)(L):We(b.filter(me=>!me.svgText).map(me=>this._loadSvgIconSetFromConfig(me).pipe((0,Kf.K)(pt=>{const an=`Loading icon set URL: ${this._sanitizer.sanitize(_.q3G.RESOURCE_URL,me.url)} failed: ${pt.message}`;return this._errorHandler.handleError(new Error(an)),(0,ei.of)(null)})))).pipe((0,nt.U)(()=>{const me=this._extractIconWithNameFromAnySet(f,b);if(!me)throw Uu(f);return me}))}_extractIconWithNameFromAnySet(f,b){for(let L=b.length-1;L>=0;L--){const Y=b[L];if(Y.svgText&&Y.svgText.indexOf(f)>-1){const me=this._svgElementFromConfig(Y),pt=this._extractSvgIconFromSet(me,f,Y.options);if(pt)return pt}}return null}_loadSvgIconFromConfig(f){return this._fetchIcon(f).pipe((0,Sl.b)(b=>f.svgText=b),(0,nt.U)(()=>this._svgElementFromConfig(f)))}_loadSvgIconSetFromConfig(f){return f.svgText?(0,ei.of)(null):this._fetchIcon(f).pipe((0,Sl.b)(b=>f.svgText=b))}_extractSvgIconFromSet(f,b,L){const Y=f.querySelector(`[id="${b}"]`);if(!Y)return null;const me=Y.cloneNode(!0);if(me.removeAttribute("id"),"svg"===me.nodeName.toLowerCase())return this._setSvgAttributes(me,L);if("symbol"===me.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(me),L);const pt=this._svgElementFromString("<svg></svg>");return pt.appendChild(me),this._setSvgAttributes(pt,L)}_svgElementFromString(f){const b=this._document.createElement("DIV");b.innerHTML=f;const L=b.querySelector("svg");if(!L)throw Error("<svg> tag not found");return L}_toSvgElement(f){const b=this._svgElementFromString("<svg></svg>"),L=f.attributes;for(let Y=0;Y<L.length;Y++){const{name:me,value:pt}=L[Y];"id"!==me&&b.setAttribute(me,pt)}for(let Y=0;Y<f.childNodes.length;Y++)f.childNodes[Y].nodeType===this._document.ELEMENT_NODE&&b.appendChild(f.childNodes[Y].cloneNode(!0));return b}_setSvgAttributes(f,b){return f.setAttribute("fit",""),f.setAttribute("height","100%"),f.setAttribute("width","100%"),f.setAttribute("preserveAspectRatio","xMidYMid meet"),f.setAttribute("focusable","false"),b&&b.viewBox&&f.setAttribute("viewBox",b.viewBox),f}_fetchIcon(f){var b;const{url:L,options:Y}=f,me=null!==(b=null==Y?void 0:Y.withCredentials)&&void 0!==b&&b;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==L)throw Error(`Cannot fetch icon from URL "${L}".`);const pt=this._sanitizer.sanitize(_.q3G.RESOURCE_URL,L);if(!pt)throw Zf(L);const Mt=this._inProgressUrlFetches.get(pt);if(Mt)return Mt;const an=this._httpClient.get(pt,{responseType:"text",withCredentials:me}).pipe((0,Pc.x)(()=>this._inProgressUrlFetches.delete(pt)),(0,ZI.B)());return this._inProgressUrlFetches.set(pt,an),an}_addSvgIconConfig(f,b,L){return this._svgIconConfigs.set(d0(f,b),L),this}_addSvgIconSetConfig(f,b){const L=this._iconSetConfigs.get(f);return L?L.push(b):this._iconSetConfigs.set(f,[b]),this}_svgElementFromConfig(f){if(!f.svgElement){const b=this._svgElementFromString(f.svgText);this._setSvgAttributes(b,f.options),f.svgElement=b}return f.svgElement}_getIconConfigFromResolvers(f,b){for(let L=0;L<this._resolvers.length;L++){const Y=this._resolvers[L](b,f);if(Y)return Gb(Y)?new $d(Y.url,null,Y.options):new $d(Y,null)}}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(kb.eN,8),_.LFG(c0.H7),_.LFG(Pe.K0,8),_.LFG(_.qLn))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(kb.eN,8),_.LFG(c0.H7),_.LFG(Pe.K0,8),_.LFG(_.qLn))},token:w,providedIn:"root"}),w})();function Jf(w){return w.cloneNode(!0)}function d0(w,y){return w+":"+y}function Gb(w){return!(!w.url||!w.options)}const QI=Oy(class{constructor(w){this._elementRef=w}}),Qf=new _.OlP("mat-icon-location",{providedIn:"root",factory:function(){const w=(0,_.f3M)(Pe.K0),y=w?w.location:null;return{getPathname:()=>y?y.pathname+y.search:""}}}),zy=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],th=zy.map(w=>`[${w}]`).join(", "),jb=/^url\(['"]?#(.*?)['"]?\)$/;let Ub=(()=>{class w extends QI{constructor(f,b,L,Y,me){super(f),this._iconRegistry=b,this._location=Y,this._errorHandler=me,this._inline=!1,this._currentIconFetch=pr.w.EMPTY,L||f.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(f){this._inline=No(f)}get svgIcon(){return this._svgIcon}set svgIcon(f){f!==this._svgIcon&&(f?this._updateSvgIcon(f):this._svgIcon&&this._clearSvgElement(),this._svgIcon=f)}get fontSet(){return this._fontSet}set fontSet(f){const b=this._cleanupFontValue(f);b!==this._fontSet&&(this._fontSet=b,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(f){const b=this._cleanupFontValue(f);b!==this._fontIcon&&(this._fontIcon=b,this._updateFontIconClasses())}_splitIconName(f){if(!f)return["",""];const b=f.split(":");switch(b.length){case 1:return["",b[0]];case 2:return b;default:throw Error(`Invalid icon name: "${f}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const f=this._elementsWithExternalReferences;if(f&&f.size){const b=this._location.getPathname();b!==this._previousPath&&(this._previousPath=b,this._prependPathToReferences(b))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(f){this._clearSvgElement();const b=f.querySelectorAll("style");for(let Y=0;Y<b.length;Y++)b[Y].textContent+=" ";const L=this._location.getPathname();this._previousPath=L,this._cacheChildrenWithExternalReferences(f),this._prependPathToReferences(L),this._elementRef.nativeElement.appendChild(f)}_clearSvgElement(){const f=this._elementRef.nativeElement;let b=f.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();b--;){const L=f.childNodes[b];(1!==L.nodeType||"svg"===L.nodeName.toLowerCase())&&f.removeChild(L)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const f=this._elementRef.nativeElement,b=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();b!=this._previousFontSetClass&&(this._previousFontSetClass&&f.classList.remove(this._previousFontSetClass),b&&f.classList.add(b),this._previousFontSetClass=b),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&f.classList.remove(this._previousFontIconClass),this.fontIcon&&f.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(f){return"string"==typeof f?f.trim().split(" ")[0]:f}_prependPathToReferences(f){const b=this._elementsWithExternalReferences;b&&b.forEach((L,Y)=>{L.forEach(me=>{Y.setAttribute(me.name,`url('${f}#${me.value}')`)})})}_cacheChildrenWithExternalReferences(f){const b=f.querySelectorAll(th),L=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let Y=0;Y<b.length;Y++)zy.forEach(me=>{const pt=b[Y],Mt=pt.getAttribute(me),an=Mt?Mt.match(jb):null;if(an){let On=L.get(pt);On||(On=[],L.set(pt,On)),On.push({name:me,value:an[1]})}})}_updateSvgIcon(f){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),f){const[b,L]=this._splitIconName(f);b&&(this._svgNamespace=b),L&&(this._svgName=L),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(L,b).pipe((0,ud.q)(1)).subscribe(Y=>this._setSvgElement(Y),Y=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${b}:${L}! ${Y.message}`))})}}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(_.SBq),_.Y36(eh),_.$8M("aria-hidden"),_.Y36(Qf),_.Y36(_.qLn))},w.\u0275cmp=_.Xpm({type:w,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(f,b){2&f&&(_.uIk("data-mat-icon-type",b._usingFontIcon()?"font":"svg")("data-mat-icon-name",b._svgName||b.fontIcon)("data-mat-icon-namespace",b._svgNamespace||b.fontSet),_.ekj("mat-icon-inline",b.inline)("mat-icon-no-color","primary"!==b.color&&"accent"!==b.color&&"warn"!==b.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[_.qOj],ngContentSelectors:JI,decls:1,vars:0,template:function(f,b){1&f&&(_.F$t(),_.Hsn(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),w})(),$f=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({imports:[[Il],Il]}),w})();const Vb=["fileUpload"];function fx(w,y){if(1&w&&(_.TgZ(0,"span",5),_._uU(1),_.qZA()),2&w){const f=_.oxw();_.xp6(1),_.hij(" ",f.file.name," ")}}let zb=(()=>{class w{constructor(){this.label="",this.fileUploaded=new _.vpe,this.emitFile=()=>{!this.fileUpload||(this.fileUpload.nativeElement.value="",this.fileUploaded.emit(this.file))}}onClick(){var f;const b=null===(f=this.fileUpload)||void 0===f?void 0:f.nativeElement;b.onchange=()=>{null!==b.files&&(this.file=b.files[0])},this.emitFile(),b.click()}}return w.\u0275fac=function(f){return new(f||w)},w.\u0275cmp=_.Xpm({type:w,selectors:[["app-file-uploader"]],viewQuery:function(f,b){if(1&f&&_.Gf(Vb,5),2&f){let L;_.iGM(L=_.CRH())&&(b.fileUpload=L.first)}},inputs:{label:"label"},outputs:{fileUploaded:"fileUploaded"},decls:8,vars:3,consts:[[1,"uploader"],["class","uploader__file-name",4,"ngIf"],["color","primary","mat-button","","type","button",1,"uploader__button",3,"click"],["accept","application/json","id","fileUpload","name","fileUpload","type","file",2,"display","none",3,"multiple"],["fileUpload",""],[1,"uploader__file-name"]],template:function(f,b){1&f&&(_.TgZ(0,"div",0),_.YNc(1,fx,2,1,"span",1),_.TgZ(2,"button",2),_.NdJ("click",function(){return b.onClick()}),_.TgZ(3,"mat-icon"),_._uU(4,"add"),_.qZA(),_._uU(5),_.qZA(),_._UZ(6,"input",3,4),_.qZA()),2&f&&(_.xp6(1),_.Q6J("ngIf",b.file),_.xp6(4),_.hij(" ",b.label," "),_.xp6(1),_.Q6J("multiple",!1))},directives:[Pe.O5,Lb,Ub],styles:[".uploader[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.uploader__button[_ngcontent-%COMP%]{display:inline-flex}"]}),w})();var ep=ee(6682),Hy=ee(9105);function jh(w,y,f,b){return(0,Hy.m)(f)&&(b=f,f=void 0),b?jh(w,y,f).pipe((0,nt.U)(L=>(0,_e.k)(L)?b(...L):b(L))):new Ke.y(L=>{Wy(w,y,function(me){L.next(arguments.length>1?Array.prototype.slice.call(arguments):me)},L,f)})}function Wy(w,y,f,b,L){let Y;if(function(w){return w&&"function"==typeof w.addEventListener&&"function"==typeof w.removeEventListener}(w)){const me=w;w.addEventListener(y,f,L),Y=()=>me.removeEventListener(y,f,L)}else if(function(w){return w&&"function"==typeof w.on&&"function"==typeof w.off}(w)){const me=w;w.on(y,f),Y=()=>me.off(y,f)}else if(function(w){return w&&"function"==typeof w.addListener&&"function"==typeof w.removeListener}(w)){const me=w;w.addListener(y,f),Y=()=>me.removeListener(y,f)}else{if(!w||!w.length)throw new TypeError("Invalid event target");for(let me=0,pt=w.length;me<pt;me++)Wy(w[me],y,f,b,L)}b.add(Y)}var el=ee(9761),hs=ee(7238);const Yy=["underline"],h0=["connectionContainer"],f0=["inputContainer"],qy=["label"];function tp(w,y){1&w&&(_.ynx(0),_.TgZ(1,"div",14),_._UZ(2,"div",15),_._UZ(3,"div",16),_._UZ(4,"div",17),_.qZA(),_.TgZ(5,"div",18),_._UZ(6,"div",15),_._UZ(7,"div",16),_._UZ(8,"div",17),_.qZA(),_.BQk())}function gx(w,y){1&w&&(_.TgZ(0,"div",19),_.Hsn(1,1),_.qZA())}function gd(w,y){if(1&w&&(_.ynx(0),_.Hsn(1,2),_.TgZ(2,"span"),_._uU(3),_.qZA(),_.BQk()),2&w){const f=_.oxw(2);_.xp6(3),_.Oqu(f._control.placeholder)}}function np(w,y){1&w&&_.Hsn(0,3,["*ngSwitchCase","true"])}function p0(w,y){1&w&&(_.TgZ(0,"span",23),_._uU(1," *"),_.qZA())}function g0(w,y){if(1&w){const f=_.EpF();_.TgZ(0,"label",20,21),_.NdJ("cdkObserveContent",function(){return _.CHM(f),_.oxw().updateOutlineGap()}),_.YNc(2,gd,4,1,"ng-container",12),_.YNc(3,np,1,0,"ng-content",12),_.YNc(4,p0,2,0,"span",22),_.qZA()}if(2&w){const f=_.oxw();_.ekj("mat-empty",f._control.empty&&!f._shouldAlwaysFloat())("mat-form-field-empty",f._control.empty&&!f._shouldAlwaysFloat())("mat-accent","accent"==f.color)("mat-warn","warn"==f.color),_.Q6J("cdkObserveContentDisabled","outline"!=f.appearance)("id",f._labelId)("ngSwitch",f._hasLabel()),_.uIk("for",f._control.id)("aria-owns",f._control.id),_.xp6(2),_.Q6J("ngSwitchCase",!1),_.xp6(1),_.Q6J("ngSwitchCase",!0),_.xp6(1),_.Q6J("ngIf",!f.hideRequiredMarker&&f._control.required&&!f._control.disabled)}}function rp(w,y){1&w&&(_.TgZ(0,"div",24),_.Hsn(1,4),_.qZA())}function mx(w,y){if(1&w&&(_.TgZ(0,"div",25,26),_._UZ(2,"span",27),_.qZA()),2&w){const f=_.oxw();_.xp6(2),_.ekj("mat-accent","accent"==f.color)("mat-warn","warn"==f.color)}}function Xy(w,y){if(1&w&&(_.TgZ(0,"div"),_.Hsn(1,5),_.qZA()),2&w){const f=_.oxw();_.Q6J("@transitionMessages",f._subscriptAnimationState)}}function qb(w,y){if(1&w&&(_.TgZ(0,"div",31),_._uU(1),_.qZA()),2&w){const f=_.oxw(2);_.Q6J("id",f._hintLabelId),_.xp6(1),_.Oqu(f.hintLabel)}}function Uh(w,y){if(1&w&&(_.TgZ(0,"div",28),_.YNc(1,qb,2,2,"div",29),_.Hsn(2,6),_._UZ(3,"div",30),_.Hsn(4,7),_.qZA()),2&w){const f=_.oxw();_.Q6J("@transitionMessages",f._subscriptAnimationState),_.xp6(1),_.Q6J("ngIf",f.hintLabel)}}const Cg=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],vx=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Xb=new _.OlP("MatError"),Sg={transitionMessages:(0,hs.X$)("transitionMessages",[(0,hs.SB)("enter",(0,hs.oB)({opacity:1,transform:"translateY(0%)"})),(0,hs.eR)("void => enter",[(0,hs.oB)({opacity:0,transform:"translateY(-5px)"}),(0,hs.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Vh=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275dir=_.lG2({type:w}),w})();const Zy=new _.OlP("MatHint");let zh=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275dir=_.lG2({type:w,selectors:[["mat-label"]]}),w})(),Ql=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275dir=_.lG2({type:w,selectors:[["mat-placeholder"]]}),w})();const Zb=new _.OlP("MatPrefix"),Jb=new _.OlP("MatSuffix");let Qb=0;const wx=Oy(class{constructor(w){this._elementRef=w}},"primary"),$b=new _.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Fo=new _.OlP("MatFormField");let zr=(()=>{class w extends wx{constructor(f,b,L,Y,me,pt,Mt,an){super(f),this._changeDetectorRef=b,this._dir=Y,this._defaults=me,this._platform=pt,this._ngZone=Mt,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Gn.xQ,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Qb++,this._labelId="mat-form-field-label-"+Qb++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==an,this.appearance=me&&me.appearance?me.appearance:"legacy",this._hideRequiredMarker=!(!me||null==me.hideRequiredMarker)&&me.hideRequiredMarker}get appearance(){return this._appearance}set appearance(f){const b=this._appearance;this._appearance=f||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&b!==f&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(f){this._hideRequiredMarker=No(f)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(f){this._hintLabel=f,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(f){f!==this._floatLabel&&(this._floatLabel=f||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(f){this._explicitFormFieldControl=f}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const f=this._control;f.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${f.controlType}`),f.stateChanges.pipe((0,el.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),f.ngControl&&f.ngControl.valueChanges&&f.ngControl.valueChanges.pipe(Eo(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Eo(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,ep.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,el.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,el.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Eo(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(f){const b=this._control?this._control.ngControl:null;return b&&b[f]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,jh(this._label.nativeElement,"transitionend").pipe((0,ud.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let f=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&f.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const b=this._hintChildren?this._hintChildren.find(Y=>"start"===Y.align):null,L=this._hintChildren?this._hintChildren.find(Y=>"end"===Y.align):null;b?f.push(b.id):this._hintLabel&&f.push(this._hintLabelId),L&&f.push(L.id)}else this._errorChildren&&f.push(...this._errorChildren.map(b=>b.id));this._control.setDescribedByIds(f)}}_validateControlChild(){}updateOutlineGap(){const f=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&f&&f.children.length&&f.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let b=0,L=0;const Y=this._connectionContainerRef.nativeElement,me=Y.querySelectorAll(".mat-form-field-outline-start"),pt=Y.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const Mt=Y.getBoundingClientRect();if(0===Mt.width&&0===Mt.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const an=this._getStartEnd(Mt),On=f.children,jr=this._getStartEnd(On[0].getBoundingClientRect());let bo=0;for(let na=0;na<On.length;na++)bo+=On[na].offsetWidth;b=Math.abs(jr-an)-5,L=bo>0?.75*bo+10:0}for(let Mt=0;Mt<me.length;Mt++)me[Mt].style.width=`${b}px`;for(let Mt=0;Mt<pt.length;Mt++)pt[Mt].style.width=`${L}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(f){return this._dir&&"rtl"===this._dir.value?f.right:f.left}_isAttachedToDOM(){const f=this._elementRef.nativeElement;if(f.getRootNode){const b=f.getRootNode();return b&&b!==f}return document.documentElement.contains(f)}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(_.SBq),_.Y36(_.sBO),_.Y36(_.SBq),_.Y36(Zs,8),_.Y36($b,8),_.Y36(Di),_.Y36(_.R0b),_.Y36(yn.Qb,8))},w.\u0275cmp=_.Xpm({type:w,selectors:[["mat-form-field"]],contentQueries:function(f,b,L){if(1&f&&(_.Suo(L,Vh,5),_.Suo(L,Vh,7),_.Suo(L,zh,5),_.Suo(L,zh,7),_.Suo(L,Ql,5),_.Suo(L,Xb,5),_.Suo(L,Zy,5),_.Suo(L,Zb,5),_.Suo(L,Jb,5)),2&f){let Y;_.iGM(Y=_.CRH())&&(b._controlNonStatic=Y.first),_.iGM(Y=_.CRH())&&(b._controlStatic=Y.first),_.iGM(Y=_.CRH())&&(b._labelChildNonStatic=Y.first),_.iGM(Y=_.CRH())&&(b._labelChildStatic=Y.first),_.iGM(Y=_.CRH())&&(b._placeholderChild=Y.first),_.iGM(Y=_.CRH())&&(b._errorChildren=Y),_.iGM(Y=_.CRH())&&(b._hintChildren=Y),_.iGM(Y=_.CRH())&&(b._prefixChildren=Y),_.iGM(Y=_.CRH())&&(b._suffixChildren=Y)}},viewQuery:function(f,b){if(1&f&&(_.Gf(Yy,5),_.Gf(h0,7),_.Gf(f0,5),_.Gf(qy,5)),2&f){let L;_.iGM(L=_.CRH())&&(b.underlineRef=L.first),_.iGM(L=_.CRH())&&(b._connectionContainerRef=L.first),_.iGM(L=_.CRH())&&(b._inputContainerRef=L.first),_.iGM(L=_.CRH())&&(b._label=L.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(f,b){2&f&&_.ekj("mat-form-field-appearance-standard","standard"==b.appearance)("mat-form-field-appearance-fill","fill"==b.appearance)("mat-form-field-appearance-outline","outline"==b.appearance)("mat-form-field-appearance-legacy","legacy"==b.appearance)("mat-form-field-invalid",b._control.errorState)("mat-form-field-can-float",b._canLabelFloat())("mat-form-field-should-float",b._shouldLabelFloat())("mat-form-field-has-label",b._hasFloatingLabel())("mat-form-field-hide-placeholder",b._hideControlPlaceholder())("mat-form-field-disabled",b._control.disabled)("mat-form-field-autofilled",b._control.autofilled)("mat-focused",b._control.focused)("ng-untouched",b._shouldForward("untouched"))("ng-touched",b._shouldForward("touched"))("ng-pristine",b._shouldForward("pristine"))("ng-dirty",b._shouldForward("dirty"))("ng-valid",b._shouldForward("valid"))("ng-invalid",b._shouldForward("invalid"))("ng-pending",b._shouldForward("pending"))("_mat-animation-noopable",!b._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[_._Bn([{provide:Fo,useExisting:w}]),_.qOj],ngContentSelectors:vx,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(f,b){1&f&&(_.F$t(Cg),_.TgZ(0,"div",0),_.TgZ(1,"div",1,2),_.NdJ("click",function(Y){return b._control.onContainerClick&&b._control.onContainerClick(Y)}),_.YNc(3,tp,9,0,"ng-container",3),_.YNc(4,gx,2,0,"div",4),_.TgZ(5,"div",5,6),_.Hsn(7),_.TgZ(8,"span",7),_.YNc(9,g0,5,16,"label",8),_.qZA(),_.qZA(),_.YNc(10,rp,2,0,"div",9),_.qZA(),_.YNc(11,mx,3,4,"div",10),_.TgZ(12,"div",11),_.YNc(13,Xy,2,1,"div",12),_.YNc(14,Uh,5,2,"div",13),_.qZA(),_.qZA()),2&f&&(_.xp6(3),_.Q6J("ngIf","outline"==b.appearance),_.xp6(1),_.Q6J("ngIf",b._prefixChildren.length),_.xp6(5),_.Q6J("ngIf",b._hasFloatingLabel()),_.xp6(1),_.Q6J("ngIf",b._suffixChildren.length),_.xp6(1),_.Q6J("ngIf","outline"!=b.appearance),_.xp6(1),_.Q6J("ngSwitch",b._getDisplayedMessages()),_.xp6(1),_.Q6J("ngSwitchCase","error"),_.xp6(1),_.Q6J("ngSwitchCase","hint"))},directives:[Pe.O5,Pe.RF,Pe.n9,Wm],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Sg.transitionMessages]},changeDetection:0}),w})(),ip=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({imports:[[Pe.ez,Il,vy],Il]}),w})();new class extends za{flush(y){this.active=!0,this.scheduled=void 0;const{actions:f}=this;let b,L=-1,Y=f.length;y=y||f.shift();do{if(b=y.execute(y.state,y.delay))break}while(++L<Y&&(y=f.shift()));if(this.active=!1,b){for(;++L<Y&&(y=f.shift());)y.unsubscribe();throw b}}}(class extends Zl{constructor(y,f){super(y,f),this.scheduler=y,this.work=f}requestAsyncId(y,f,b=0){return null!==b&&b>0?super.requestAsyncId(y,f,b):(y.actions.push(this),y.scheduled||(y.scheduled=requestAnimationFrame(()=>y.flush(null))))}recycleAsyncId(y,f,b=0){if(null!==b&&b>0||null===b&&this.delay>0)return super.recycleAsyncId(y,f,b);0===y.actions.length&&(cancelAnimationFrame(f),y.scheduled=void 0)}});let Sx=1;const Qy=Promise.resolve(),Ml={};function y0(w){return w in Ml&&(delete Ml[w],!0)}const md={setImmediate(w){const y=Sx++;return Ml[y]=!0,Qy.then(()=>y0(y)&&w()),y},clearImmediate(w){y0(w)}};new class extends za{flush(y){this.active=!0,this.scheduled=void 0;const{actions:f}=this;let b,L=-1,Y=f.length;y=y||f.shift();do{if(b=y.execute(y.state,y.delay))break}while(++L<Y&&(y=f.shift()));if(this.active=!1,b){for(;++L<Y&&(y=f.shift());)y.unsubscribe();throw b}}}(class extends Zl{constructor(y,f){super(y,f),this.scheduler=y,this.work=f}requestAsyncId(y,f,b=0){return null!==b&&b>0?super.requestAsyncId(y,f,b):(y.actions.push(this),y.scheduled||(y.scheduled=md.setImmediate(y.flush.bind(y,null))))}recycleAsyncId(y,f,b=0){if(null!==b&&b>0||null===b&&this.delay>0)return super.recycleAsyncId(y,f,b);0===y.actions.length&&(md.clearImmediate(f),y.scheduled=void 0)}});class _0{constructor(y){this.durationSelector=y}call(y,f){return f.subscribe(new Wh(y,this.durationSelector))}}class Wh extends Rh.Ds{constructor(y,f){super(y),this.durationSelector=f,this.hasValue=!1}_next(y){if(this.value=y,this.hasValue=!0,!this.throttled){let f;try{const{durationSelector:L}=this;f=L(y)}catch(L){return this.destination.error(L)}const b=(0,Rh.ft)(f,new Rh.IY(this));!b||b.closed?this.clearThrottle():this.add(this.throttled=b)}}clearThrottle(){const{value:y,hasValue:f,throttled:b}=this;b&&(this.remove(b),this.throttled=void 0,b.unsubscribe()),f&&(this.value=void 0,this.hasValue=!1,this.destination.next(y))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function tw(w){return!(0,_e.k)(w)&&w-parseFloat(w)+1>=0}var E0=ee(4869);function e_(w){const{index:y,period:f,subscriber:b}=w;if(b.next(y),!b.closed){if(-1===f)return b.complete();w.index=y+1,this.schedule(w,f)}}function Yh(w,y=dy){return function(w){return function(f){return f.lift(new _0(w))}}(()=>function(w=0,y,f){let b=-1;return tw(y)?b=Number(y)<1?1:Number(y):(0,E0.K)(y)&&(f=y),(0,E0.K)(f)||(f=dy),new Ke.y(L=>{const Y=tw(w)?w:+w-f.now();return f.schedule(e_,Y,{index:0,period:b,subscriber:L})})}(w,y))}var sp=ee(3190);new class extends za{}(class extends Zl{constructor(y,f){super(y,f),this.scheduler=y,this.work=f}schedule(y,f=0){return f>0?super.schedule(y,f):(this.delay=f,this.state=y,this.scheduler.flush(this),this)}execute(y,f){return f>0||this.closed?super.execute(y,f):this._execute(y,f)}requestAsyncId(y,f,b=0){return null!==b&&b>0||null===b&&this.delay>0?super.requestAsyncId(y,f,b):y.flush(this)}});var xx=ee(9193);class Hu{constructor(y,f,b){this.kind=y,this.value=f,this.error=b,this.hasValue="N"===y}observe(y){switch(this.kind){case"N":return y.next&&y.next(this.value);case"E":return y.error&&y.error(this.error);case"C":return y.complete&&y.complete()}}do(y,f,b){switch(this.kind){case"N":return y&&y(this.value);case"E":return f&&f(this.error);case"C":return b&&b()}}accept(y,f,b){return y&&"function"==typeof y.next?this.observe(y):this.do(y,f,b)}toObservable(){switch(this.kind){case"N":return(0,ei.of)(this.value);case"E":return Qd(this.error);case"C":return(0,xx.c)()}throw new Error("unexpected notification kind value")}static createNext(y){return void 0!==y?new Hu("N",y):Hu.undefinedValueNotification}static createError(y){return new Hu("E",void 0,y)}static createComplete(){return Hu.completeNotification}}Hu.completeNotification=new Hu("C"),Hu.undefinedValueNotification=new Hu("N",void 0),ee(7971),ee(8858);class uA{constructor(y=!1,f,b=!0){this._multiple=y,this._emitChanges=b,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Gn.xQ,f&&f.length&&(y?f.forEach(L=>this._markSelected(L)):this._markSelected(f[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...y){this._verifyValueAssignment(y),y.forEach(f=>this._markSelected(f)),this._emitChangeEvent()}deselect(...y){this._verifyValueAssignment(y),y.forEach(f=>this._unmarkSelected(f)),this._emitChangeEvent()}toggle(y){this.isSelected(y)?this.deselect(y):this.select(y)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(y){return this._selection.has(y)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(y){this._multiple&&this.selected&&this._selected.sort(y)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(y){this.isSelected(y)||(this._multiple||this._unmarkAll(),this._selection.add(y),this._emitChanges&&this._selectedToEmit.push(y))}_unmarkSelected(y){this.isSelected(y)&&(this._selection.delete(y),this._emitChanges&&this._deselectedToEmit.push(y))}_unmarkAll(){this.isEmpty()||this._selection.forEach(y=>this._unmarkSelected(y))}_verifyValueAssignment(y){}}let Mc=(()=>{class w{constructor(f,b,L){this._ngZone=f,this._platform=b,this._scrolled=new Gn.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=L}register(f){this.scrollContainers.has(f)||this.scrollContainers.set(f,f.elementScrolled().subscribe(()=>this._scrolled.next(f)))}deregister(f){const b=this.scrollContainers.get(f);b&&(b.unsubscribe(),this.scrollContainers.delete(f))}scrolled(f=20){return this._platform.isBrowser?new Ke.y(b=>{this._globalSubscription||this._addGlobalListener();const L=f>0?this._scrolled.pipe(Yh(f)).subscribe(b):this._scrolled.subscribe(b);return this._scrolledCount++,()=>{L.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,ei.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((f,b)=>this.deregister(b)),this._scrolled.complete()}ancestorScrolled(f,b){const L=this.getAncestorScrollContainers(f);return this.scrolled(b).pipe((0,hy.h)(Y=>!Y||L.indexOf(Y)>-1))}getAncestorScrollContainers(f){const b=[];return this.scrollContainers.forEach((L,Y)=>{this._scrollableContainsElement(Y,f)&&b.push(Y)}),b}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(f,b){let L=Oh(b),Y=f.getElementRef().nativeElement;do{if(L==Y)return!0}while(L=L.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>jh(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(_.R0b),_.LFG(Di),_.LFG(Pe.K0,8))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(_.R0b),_.LFG(Di),_.LFG(Pe.K0,8))},token:w,providedIn:"root"}),w})(),yd=(()=>{class w{constructor(f,b,L){this._platform=f,this._change=new Gn.xQ,this._changeListener=Y=>{this._change.next(Y)},this._document=L,b.runOutsideAngular(()=>{if(f.isBrowser){const Y=this._getWindow();Y.addEventListener("resize",this._changeListener),Y.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const f=this._getWindow();f.removeEventListener("resize",this._changeListener),f.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const f={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),f}getViewportRect(){const f=this.getViewportScrollPosition(),{width:b,height:L}=this.getViewportSize();return{top:f.top,left:f.left,bottom:f.top+L,right:f.left+b,height:L,width:b}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const f=this._document,b=this._getWindow(),L=f.documentElement,Y=L.getBoundingClientRect();return{top:-Y.top||f.body.scrollTop||b.scrollY||L.scrollTop||0,left:-Y.left||f.body.scrollLeft||b.scrollX||L.scrollLeft||0}}change(f=20){return f>0?this._change.pipe(Yh(f)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const f=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:f.innerWidth,height:f.innerHeight}:{width:0,height:0}}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(Di),_.LFG(_.R0b),_.LFG(Pe.K0,8))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(Di),_.LFG(_.R0b),_.LFG(Pe.K0,8))},token:w,providedIn:"root"}),w})(),C0=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({}),w})(),sw=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({imports:[[pd,Cc,C0],pd,C0]}),w})();class Ms{attach(y){return this._attachedHost=y,y.attach(this)}detach(){let y=this._attachedHost;null!=y&&(this._attachedHost=null,y.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(y){this._attachedHost=y}}class Dx extends Ms{constructor(y,f,b,L){super(),this.component=y,this.viewContainerRef=f,this.injector=b,this.componentFactoryResolver=L}}class l_ extends Ms{constructor(y,f,b){super(),this.templateRef=y,this.viewContainerRef=f,this.context=b}get origin(){return this.templateRef.elementRef}attach(y,f=this.context){return this.context=f,super.attach(y)}detach(){return this.context=void 0,super.detach()}}class dA extends Ms{constructor(y){super(),this.element=y instanceof _.SBq?y.nativeElement:y}}class hA extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(y){return y instanceof Dx?(this._attachedPortal=y,this.attachComponentPortal(y)):y instanceof l_?(this._attachedPortal=y,this.attachTemplatePortal(y)):this.attachDomPortal&&y instanceof dA?(this._attachedPortal=y,this.attachDomPortal(y)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(y){this._disposeFn=y}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(y,f,b,L,Y){super(),this.outletElement=y,this._componentFactoryResolver=f,this._appRef=b,this._defaultInjector=L,this.attachDomPortal=me=>{const pt=me.element,Mt=this._document.createComment("dom-portal");pt.parentNode.insertBefore(Mt,pt),this.outletElement.appendChild(pt),this._attachedPortal=me,super.setDisposeFn(()=>{Mt.parentNode&&Mt.parentNode.replaceChild(pt,Mt)})},this._document=Y}attachComponentPortal(y){const b=(y.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(y.component);let L;return y.viewContainerRef?(L=y.viewContainerRef.createComponent(b,y.viewContainerRef.length,y.injector||y.viewContainerRef.injector),this.setDisposeFn(()=>L.destroy())):(L=b.create(y.injector||this._defaultInjector),this._appRef.attachView(L.hostView),this.setDisposeFn(()=>{this._appRef.detachView(L.hostView),L.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(L)),this._attachedPortal=y,L}attachTemplatePortal(y){let f=y.viewContainerRef,b=f.createEmbeddedView(y.templateRef,y.context);return b.rootNodes.forEach(L=>this.outletElement.appendChild(L)),b.detectChanges(),this.setDisposeFn(()=>{let L=f.indexOf(b);-1!==L&&f.remove(L)}),this._attachedPortal=y,b}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(y){return y.hostView.rootNodes[0]}}let pA=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({}),w})();class uw{constructor(y,f){this.predicate=y,this.inclusive=f}call(y,f){return f.subscribe(new Fx(y,this.predicate,this.inclusive))}}class Fx extends xl.L{constructor(y,f,b){super(y),this.predicate=f,this.inclusive=b,this.index=0}_next(y){const f=this.destination;let b;try{b=this.predicate(y,this.index++)}catch(L){return void f.error(L)}this.nextOrComplete(y,b)}nextOrComplete(y,f){const b=this.destination;Boolean(f)?b.next(y):(this.inclusive&&b.next(y),b.complete())}}const Gx=dd();class cw{constructor(y,f){this._viewportRuler=y,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=f}attach(){}enable(){if(this._canBeEnabled()){const y=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=y.style.left||"",this._previousHTMLStyles.top=y.style.top||"",y.style.left=Us(-this._previousScrollPosition.left),y.style.top=Us(-this._previousScrollPosition.top),y.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const y=this._document.documentElement,b=y.style,L=this._document.body.style,Y=b.scrollBehavior||"",me=L.scrollBehavior||"";this._isEnabled=!1,b.left=this._previousHTMLStyles.left,b.top=this._previousHTMLStyles.top,y.classList.remove("cdk-global-scrollblock"),Gx&&(b.scrollBehavior=L.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Gx&&(b.scrollBehavior=Y,L.scrollBehavior=me)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const f=this._document.body,b=this._viewportRuler.getViewportSize();return f.scrollHeight>b.height||f.scrollWidth>b.width}}class u_{constructor(y,f,b,L){this._scrollDispatcher=y,this._ngZone=f,this._viewportRuler=b,this._config=L,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(y){this._overlayRef=y}enable(){if(this._scrollSubscription)return;const y=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=y.subscribe(()=>{const f=this._viewportRuler.getViewportScrollPosition().top;Math.abs(f-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=y.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class _s{enable(){}disable(){}attach(){}}function up(w,y){return y.some(f=>w.bottom<f.top||w.top>f.bottom||w.right<f.left||w.left>f.right)}function c_(w,y){return y.some(f=>w.top<f.top||w.bottom>f.bottom||w.left<f.left||w.right>f.right)}class jx{constructor(y,f,b,L){this._scrollDispatcher=y,this._viewportRuler=f,this._ngZone=b,this._config=L,this._scrollSubscription=null}attach(y){this._overlayRef=y}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const f=this._overlayRef.overlayElement.getBoundingClientRect(),{width:b,height:L}=this._viewportRuler.getViewportSize();up(f,[{width:b,height:L,bottom:L,right:b,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Ux=(()=>{class w{constructor(f,b,L,Y){this._scrollDispatcher=f,this._viewportRuler=b,this._ngZone=L,this.noop=()=>new _s,this.close=me=>new u_(this._scrollDispatcher,this._ngZone,this._viewportRuler,me),this.block=()=>new cw(this._viewportRuler,this._document),this.reposition=me=>new jx(this._scrollDispatcher,this._viewportRuler,this._ngZone,me),this._document=Y}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(Mc),_.LFG(yd),_.LFG(_.R0b),_.LFG(Pe.K0))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(Mc),_.LFG(yd),_.LFG(_.R0b),_.LFG(Pe.K0))},token:w,providedIn:"root"}),w})();class d_{constructor(y){if(this.scrollStrategy=new _s,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,y){const f=Object.keys(y);for(const b of f)void 0!==y[b]&&(this[b]=y[b])}}}class dw{constructor(y,f,b,L,Y){this.offsetX=b,this.offsetY=L,this.panelClass=Y,this.originX=y.originX,this.originY=y.originY,this.overlayX=f.overlayX,this.overlayY=f.overlayY}}class Vx{constructor(y,f){this.connectionPair=y,this.scrollableViewProperties=f}}let h_=(()=>{class w{constructor(f){this._attachedOverlays=[],this._document=f}ngOnDestroy(){this.detach()}add(f){this.remove(f),this._attachedOverlays.push(f)}remove(f){const b=this._attachedOverlays.indexOf(f);b>-1&&this._attachedOverlays.splice(b,1),0===this._attachedOverlays.length&&this.detach()}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(Pe.K0))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(Pe.K0))},token:w,providedIn:"root"}),w})(),x0=(()=>{class w extends h_{constructor(f){super(f),this._keydownListener=b=>{const L=this._attachedOverlays;for(let Y=L.length-1;Y>-1;Y--)if(L[Y]._keydownEvents.observers.length>0){L[Y]._keydownEvents.next(b);break}}}add(f){super.add(f),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(Pe.K0))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(Pe.K0))},token:w,providedIn:"root"}),w})(),f_=(()=>{class w extends h_{constructor(f,b){super(f),this._platform=b,this._cursorStyleIsSet=!1,this._clickListener=L=>{const Y=Gu(L),me=this._attachedOverlays.slice();for(let pt=me.length-1;pt>-1;pt--){const Mt=me[pt];if(!(Mt._outsidePointerEvents.observers.length<1)&&Mt.hasAttached()){if(Mt.overlayElement.contains(Y))break;Mt._outsidePointerEvents.next(L)}}}}add(f){if(super.add(f),!this._isAttached){const b=this._document.body;b.addEventListener("click",this._clickListener,!0),b.addEventListener("auxclick",this._clickListener,!0),b.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=b.style.cursor,b.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const f=this._document.body;f.removeEventListener("click",this._clickListener,!0),f.removeEventListener("auxclick",this._clickListener,!0),f.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(f.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(Pe.K0),_.LFG(Di))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(Pe.K0),_.LFG(Di))},token:w,providedIn:"root"}),w})();const ah="undefined"!=typeof window?window:{},T0=void 0!==ah.__karma__&&!!ah.__karma__||void 0!==ah.jasmine&&!!ah.jasmine||void 0!==ah.jest&&!!ah.jest||void 0!==ah.Mocha&&!!ah.Mocha;let Og=(()=>{class w{constructor(f,b){this._platform=b,this._document=f}ngOnDestroy(){const f=this._containerElement;f&&f.parentNode&&f.parentNode.removeChild(f)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const f="cdk-overlay-container";if(this._platform.isBrowser||T0){const L=this._document.querySelectorAll(`.${f}[platform="server"], .${f}[platform="test"]`);for(let Y=0;Y<L.length;Y++)L[Y].parentNode.removeChild(L[Y])}const b=this._document.createElement("div");b.classList.add(f),T0?b.setAttribute("platform","test"):this._platform.isBrowser||b.setAttribute("platform","server"),this._document.body.appendChild(b),this._containerElement=b}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(Pe.K0),_.LFG(Di))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(Pe.K0),_.LFG(Di))},token:w,providedIn:"root"}),w})();class fw{constructor(y,f,b,L,Y,me,pt,Mt,an){this._portalOutlet=y,this._host=f,this._pane=b,this._config=L,this._ngZone=Y,this._keyboardDispatcher=me,this._document=pt,this._location=Mt,this._outsideClickDispatcher=an,this._backdropElement=null,this._backdropClick=new Gn.xQ,this._attachments=new Gn.xQ,this._detachments=new Gn.xQ,this._locationChanges=pr.w.EMPTY,this._backdropClickHandler=On=>this._backdropClick.next(On),this._keydownEvents=new Gn.xQ,this._outsidePointerEvents=new Gn.xQ,L.scrollStrategy&&(this._scrollStrategy=L.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=L.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(y){let f=this._portalOutlet.attach(y);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,ud.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),f}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const y=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),y}dispose(){const y=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,y&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(y){y!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=y,this.hasAttached()&&(y.attach(this),this.updatePosition()))}updateSize(y){this._config=Object.assign(Object.assign({},this._config),y),this._updateElementSize()}setDirection(y){this._config=Object.assign(Object.assign({},this._config),{direction:y}),this._updateElementDirection()}addPanelClass(y){this._pane&&this._toggleClasses(this._pane,y,!0)}removePanelClass(y){this._pane&&this._toggleClasses(this._pane,y,!1)}getDirection(){const y=this._config.direction;return y?"string"==typeof y?y:y.value:"ltr"}updateScrollStrategy(y){y!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=y,this.hasAttached()&&(y.attach(this),y.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const y=this._pane.style;y.width=Us(this._config.width),y.height=Us(this._config.height),y.minWidth=Us(this._config.minWidth),y.minHeight=Us(this._config.minHeight),y.maxWidth=Us(this._config.maxWidth),y.maxHeight=Us(this._config.maxHeight)}_togglePointerEvents(y){this._pane.style.pointerEvents=y?"":"none"}_attachBackdrop(){const y="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(y)})}):this._backdropElement.classList.add(y)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let y=this._backdropElement;if(!y)return;let f,b=()=>{y&&(y.removeEventListener("click",this._backdropClickHandler),y.removeEventListener("transitionend",b),y.parentNode&&y.parentNode.removeChild(y)),this._backdropElement==y&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(y,this._config.backdropClass,!1),clearTimeout(f)};y.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{y.addEventListener("transitionend",b)}),y.style.pointerEvents="none",f=this._ngZone.runOutsideAngular(()=>setTimeout(b,500))}_toggleClasses(y,f,b){const L=y.classList;fy(f).forEach(Y=>{Y&&(b?L.add(Y):L.remove(Y))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const y=this._ngZone.onStable.pipe(Eo((0,ep.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),y.unsubscribe())})})}_disposeScrollStrategy(){const y=this._scrollStrategy;y&&(y.disable(),y.detach&&y.detach())}}const pw="cdk-overlay-connected-position-bounding-box",zx=/([A-Za-z%]+)$/;class P0{constructor(y,f,b,L,Y){this._viewportRuler=f,this._document=b,this._platform=L,this._overlayContainer=Y,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Gn.xQ,this._resizeSubscription=pr.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(y)}get positions(){return this._preferredPositions}attach(y){this._validatePositions(),y.hostElement.classList.add(pw),this._overlayRef=y,this._boundingBox=y.hostElement,this._pane=y.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const y=this._originRect,f=this._overlayRect,b=this._viewportRect,L=[];let Y;for(let me of this._preferredPositions){let pt=this._getOriginPoint(y,me),Mt=this._getOverlayPoint(pt,f,me),an=this._getOverlayFit(Mt,f,b,me);if(an.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(me,pt);this._canFitWithFlexibleDimensions(an,Mt,b)?L.push({position:me,origin:pt,overlayRect:f,boundingBoxRect:this._calculateBoundingBoxRect(pt,me)}):(!Y||Y.overlayFit.visibleArea<an.visibleArea)&&(Y={overlayFit:an,overlayPoint:Mt,originPoint:pt,position:me,overlayRect:f})}if(L.length){let me=null,pt=-1;for(const Mt of L){const an=Mt.boundingBoxRect.width*Mt.boundingBoxRect.height*(Mt.position.weight||1);an>pt&&(pt=an,me=Mt)}return this._isPushed=!1,void this._applyPosition(me.position,me.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Y.position,Y.originPoint);this._applyPosition(Y.position,Y.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&cp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(pw),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const y=this._lastPosition||this._preferredPositions[0],f=this._getOriginPoint(this._originRect,y);this._applyPosition(y,f)}}withScrollableContainers(y){return this._scrollables=y,this}withPositions(y){return this._preferredPositions=y,-1===y.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(y){return this._viewportMargin=y,this}withFlexibleDimensions(y=!0){return this._hasFlexibleDimensions=y,this}withGrowAfterOpen(y=!0){return this._growAfterOpen=y,this}withPush(y=!0){return this._canPush=y,this}withLockedPosition(y=!0){return this._positionLocked=y,this}setOrigin(y){return this._origin=y,this}withDefaultOffsetX(y){return this._offsetX=y,this}withDefaultOffsetY(y){return this._offsetY=y,this}withTransformOriginOn(y){return this._transformOriginSelector=y,this}_getOriginPoint(y,f){let b,L;if("center"==f.originX)b=y.left+y.width/2;else{const Y=this._isRtl()?y.right:y.left,me=this._isRtl()?y.left:y.right;b="start"==f.originX?Y:me}return L="center"==f.originY?y.top+y.height/2:"top"==f.originY?y.top:y.bottom,{x:b,y:L}}_getOverlayPoint(y,f,b){let L,Y;return L="center"==b.overlayX?-f.width/2:"start"===b.overlayX?this._isRtl()?-f.width:0:this._isRtl()?0:-f.width,Y="center"==b.overlayY?-f.height/2:"top"==b.overlayY?0:-f.height,{x:y.x+L,y:y.y+Y}}_getOverlayFit(y,f,b,L){const Y=p_(f);let{x:me,y:pt}=y,Mt=this._getOffset(L,"x"),an=this._getOffset(L,"y");Mt&&(me+=Mt),an&&(pt+=an);let bo=0-pt,na=pt+Y.height-b.height,Jo=this._subtractOverflows(Y.width,0-me,me+Y.width-b.width),Ta=this._subtractOverflows(Y.height,bo,na),Rc=Jo*Ta;return{visibleArea:Rc,isCompletelyWithinViewport:Y.width*Y.height===Rc,fitsInViewportVertically:Ta===Y.height,fitsInViewportHorizontally:Jo==Y.width}}_canFitWithFlexibleDimensions(y,f,b){if(this._hasFlexibleDimensions){const L=b.bottom-f.y,Y=b.right-f.x,me=gw(this._overlayRef.getConfig().minHeight),pt=gw(this._overlayRef.getConfig().minWidth),an=y.fitsInViewportHorizontally||null!=pt&&pt<=Y;return(y.fitsInViewportVertically||null!=me&&me<=L)&&an}return!1}_pushOverlayOnScreen(y,f,b){if(this._previousPushAmount&&this._positionLocked)return{x:y.x+this._previousPushAmount.x,y:y.y+this._previousPushAmount.y};const L=p_(f),Y=this._viewportRect,me=Math.max(y.x+L.width-Y.width,0),pt=Math.max(y.y+L.height-Y.height,0),Mt=Math.max(Y.top-b.top-y.y,0),an=Math.max(Y.left-b.left-y.x,0);let On=0,jr=0;return On=L.width<=Y.width?an||-me:y.x<this._viewportMargin?Y.left-b.left-y.x:0,jr=L.height<=Y.height?Mt||-pt:y.y<this._viewportMargin?Y.top-b.top-y.y:0,this._previousPushAmount={x:On,y:jr},{x:y.x+On,y:y.y+jr}}_applyPosition(y,f){if(this._setTransformOrigin(y),this._setOverlayElementStyles(f,y),this._setBoundingBoxStyles(f,y),y.panelClass&&this._addPanelClasses(y.panelClass),this._lastPosition=y,this._positionChanges.observers.length){const b=this._getScrollVisibility(),L=new Vx(y,b);this._positionChanges.next(L)}this._isInitialRender=!1}_setTransformOrigin(y){if(!this._transformOriginSelector)return;const f=this._boundingBox.querySelectorAll(this._transformOriginSelector);let b,L=y.overlayY;b="center"===y.overlayX?"center":this._isRtl()?"start"===y.overlayX?"right":"left":"start"===y.overlayX?"left":"right";for(let Y=0;Y<f.length;Y++)f[Y].style.transformOrigin=`${b} ${L}`}_calculateBoundingBoxRect(y,f){const b=this._viewportRect,L=this._isRtl();let Y,me,pt,On,jr,bo;if("top"===f.overlayY)me=y.y,Y=b.height-me+this._viewportMargin;else if("bottom"===f.overlayY)pt=b.height-y.y+2*this._viewportMargin,Y=b.height-pt+this._viewportMargin;else{const na=Math.min(b.bottom-y.y+b.top,y.y),Jo=this._lastBoundingBoxSize.height;Y=2*na,me=y.y-na,Y>Jo&&!this._isInitialRender&&!this._growAfterOpen&&(me=y.y-Jo/2)}if("end"===f.overlayX&&!L||"start"===f.overlayX&&L)bo=b.width-y.x+this._viewportMargin,On=y.x-this._viewportMargin;else if("start"===f.overlayX&&!L||"end"===f.overlayX&&L)jr=y.x,On=b.right-y.x;else{const na=Math.min(b.right-y.x+b.left,y.x),Jo=this._lastBoundingBoxSize.width;On=2*na,jr=y.x-na,On>Jo&&!this._isInitialRender&&!this._growAfterOpen&&(jr=y.x-Jo/2)}return{top:me,left:jr,bottom:pt,right:bo,width:On,height:Y}}_setBoundingBoxStyles(y,f){const b=this._calculateBoundingBoxRect(y,f);!this._isInitialRender&&!this._growAfterOpen&&(b.height=Math.min(b.height,this._lastBoundingBoxSize.height),b.width=Math.min(b.width,this._lastBoundingBoxSize.width));const L={};if(this._hasExactPosition())L.top=L.left="0",L.bottom=L.right=L.maxHeight=L.maxWidth="",L.width=L.height="100%";else{const Y=this._overlayRef.getConfig().maxHeight,me=this._overlayRef.getConfig().maxWidth;L.height=Us(b.height),L.top=Us(b.top),L.bottom=Us(b.bottom),L.width=Us(b.width),L.left=Us(b.left),L.right=Us(b.right),L.alignItems="center"===f.overlayX?"center":"end"===f.overlayX?"flex-end":"flex-start",L.justifyContent="center"===f.overlayY?"center":"bottom"===f.overlayY?"flex-end":"flex-start",Y&&(L.maxHeight=Us(Y)),me&&(L.maxWidth=Us(me))}this._lastBoundingBoxSize=b,cp(this._boundingBox.style,L)}_resetBoundingBoxStyles(){cp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){cp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(y,f){const b={},L=this._hasExactPosition(),Y=this._hasFlexibleDimensions,me=this._overlayRef.getConfig();if(L){const On=this._viewportRuler.getViewportScrollPosition();cp(b,this._getExactOverlayY(f,y,On)),cp(b,this._getExactOverlayX(f,y,On))}else b.position="static";let pt="",Mt=this._getOffset(f,"x"),an=this._getOffset(f,"y");Mt&&(pt+=`translateX(${Mt}px) `),an&&(pt+=`translateY(${an}px)`),b.transform=pt.trim(),me.maxHeight&&(L?b.maxHeight=Us(me.maxHeight):Y&&(b.maxHeight="")),me.maxWidth&&(L?b.maxWidth=Us(me.maxWidth):Y&&(b.maxWidth="")),cp(this._pane.style,b)}_getExactOverlayY(y,f,b){let L={top:"",bottom:""},Y=this._getOverlayPoint(f,this._overlayRect,y);this._isPushed&&(Y=this._pushOverlayOnScreen(Y,this._overlayRect,b));let me=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return Y.y-=me,"bottom"===y.overlayY?L.bottom=this._document.documentElement.clientHeight-(Y.y+this._overlayRect.height)+"px":L.top=Us(Y.y),L}_getExactOverlayX(y,f,b){let me,L={left:"",right:""},Y=this._getOverlayPoint(f,this._overlayRect,y);return this._isPushed&&(Y=this._pushOverlayOnScreen(Y,this._overlayRect,b)),me=this._isRtl()?"end"===y.overlayX?"left":"right":"end"===y.overlayX?"right":"left","right"===me?L.right=this._document.documentElement.clientWidth-(Y.x+this._overlayRect.width)+"px":L.left=Us(Y.x),L}_getScrollVisibility(){const y=this._getOriginRect(),f=this._pane.getBoundingClientRect(),b=this._scrollables.map(L=>L.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:c_(y,b),isOriginOutsideView:up(y,b),isOverlayClipped:c_(f,b),isOverlayOutsideView:up(f,b)}}_subtractOverflows(y,...f){return f.reduce((b,L)=>b-Math.max(L,0),y)}_getNarrowedViewportRect(){const y=this._document.documentElement.clientWidth,f=this._document.documentElement.clientHeight,b=this._viewportRuler.getViewportScrollPosition();return{top:b.top+this._viewportMargin,left:b.left+this._viewportMargin,right:b.left+y-this._viewportMargin,bottom:b.top+f-this._viewportMargin,width:y-2*this._viewportMargin,height:f-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(y,f){return"x"===f?null==y.offsetX?this._offsetX:y.offsetX:null==y.offsetY?this._offsetY:y.offsetY}_validatePositions(){}_addPanelClasses(y){this._pane&&fy(y).forEach(f=>{""!==f&&-1===this._appliedPanelClasses.indexOf(f)&&(this._appliedPanelClasses.push(f),this._pane.classList.add(f))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(y=>{this._pane.classList.remove(y)}),this._appliedPanelClasses=[])}_getOriginRect(){const y=this._origin;if(y instanceof _.SBq)return y.nativeElement.getBoundingClientRect();if(y instanceof Element)return y.getBoundingClientRect();const f=y.width||0,b=y.height||0;return{top:y.y,bottom:y.y+b,left:y.x,right:y.x+f,height:b,width:f}}}function cp(w,y){for(let f in y)y.hasOwnProperty(f)&&(w[f]=y[f]);return w}function gw(w){if("number"!=typeof w&&null!=w){const[y,f]=w.split(zx);return f&&"px"!==f?null:parseFloat(y)}return w||null}function p_(w){return{top:Math.floor(w.top),right:Math.floor(w.right),bottom:Math.floor(w.bottom),left:Math.floor(w.left),width:Math.floor(w.width),height:Math.floor(w.height)}}class _d{constructor(y,f,b,L,Y,me,pt){this._preferredPositions=[],this._positionStrategy=new P0(b,L,Y,me,pt).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(y,f),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(y){this._overlayRef=y,this._positionStrategy.attach(y),this._direction&&(y.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(y){this._positionStrategy.withScrollableContainers(y)}withFallbackPosition(y,f,b,L){const Y=new dw(y,f,b,L);return this._preferredPositions.push(Y),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(y){return this._overlayRef?this._overlayRef.setDirection(y):this._direction=y,this}withOffsetX(y){return this._positionStrategy.withDefaultOffsetX(y),this}withOffsetY(y){return this._positionStrategy.withDefaultOffsetY(y),this}withLockedPosition(y){return this._positionStrategy.withLockedPosition(y),this}withPositions(y){return this._preferredPositions=y.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(y){return this._positionStrategy.setOrigin(y),this}}const g_="cdk-global-overlay-wrapper";class mw{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(y){const f=y.getConfig();this._overlayRef=y,this._width&&!f.width&&y.updateSize({width:this._width}),this._height&&!f.height&&y.updateSize({height:this._height}),y.hostElement.classList.add(g_),this._isDisposed=!1}top(y=""){return this._bottomOffset="",this._topOffset=y,this._alignItems="flex-start",this}left(y=""){return this._rightOffset="",this._leftOffset=y,this._justifyContent="flex-start",this}bottom(y=""){return this._topOffset="",this._bottomOffset=y,this._alignItems="flex-end",this}right(y=""){return this._leftOffset="",this._rightOffset=y,this._justifyContent="flex-end",this}width(y=""){return this._overlayRef?this._overlayRef.updateSize({width:y}):this._width=y,this}height(y=""){return this._overlayRef?this._overlayRef.updateSize({height:y}):this._height=y,this}centerHorizontally(y=""){return this.left(y),this._justifyContent="center",this}centerVertically(y=""){return this.top(y),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const y=this._overlayRef.overlayElement.style,f=this._overlayRef.hostElement.style,b=this._overlayRef.getConfig(),{width:L,height:Y,maxWidth:me,maxHeight:pt}=b,Mt=!("100%"!==L&&"100vw"!==L||me&&"100%"!==me&&"100vw"!==me),an=!("100%"!==Y&&"100vh"!==Y||pt&&"100%"!==pt&&"100vh"!==pt);y.position=this._cssPosition,y.marginLeft=Mt?"0":this._leftOffset,y.marginTop=an?"0":this._topOffset,y.marginBottom=this._bottomOffset,y.marginRight=this._rightOffset,Mt?f.justifyContent="flex-start":"center"===this._justifyContent?f.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?f.justifyContent="flex-end":"flex-end"===this._justifyContent&&(f.justifyContent="flex-start"):f.justifyContent=this._justifyContent,f.alignItems=an?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const y=this._overlayRef.overlayElement.style,f=this._overlayRef.hostElement,b=f.style;f.classList.remove(g_),b.justifyContent=b.alignItems=y.marginTop=y.marginBottom=y.marginLeft=y.marginRight=y.position="",this._overlayRef=null,this._isDisposed=!0}}let I0=(()=>{class w{constructor(f,b,L,Y){this._viewportRuler=f,this._document=b,this._platform=L,this._overlayContainer=Y}global(){return new mw}connectedTo(f,b,L){return new _d(b,L,f,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(f){return new P0(f,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(yd),_.LFG(Pe.K0),_.LFG(Di),_.LFG(Og))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(yd),_.LFG(Pe.K0),_.LFG(Di),_.LFG(Og))},token:w,providedIn:"root"}),w})(),Ed=0,Xh=(()=>{class w{constructor(f,b,L,Y,me,pt,Mt,an,On,jr,bo){this.scrollStrategies=f,this._overlayContainer=b,this._componentFactoryResolver=L,this._positionBuilder=Y,this._keyboardDispatcher=me,this._injector=pt,this._ngZone=Mt,this._document=an,this._directionality=On,this._location=jr,this._outsideClickDispatcher=bo}create(f){const b=this._createHostElement(),L=this._createPaneElement(b),Y=this._createPortalOutlet(L),me=new d_(f);return me.direction=me.direction||this._directionality.value,new fw(Y,b,L,me,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(f){const b=this._document.createElement("div");return b.id="cdk-overlay-"+Ed++,b.classList.add("cdk-overlay-pane"),f.appendChild(b),b}_createHostElement(){const f=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(f),f}_createPortalOutlet(f){return this._appRef||(this._appRef=this._injector.get(_.z2F)),new hA(f,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(Ux),_.LFG(Og),_.LFG(_._Vd),_.LFG(I0),_.LFG(x0),_.LFG(_.zs3),_.LFG(_.R0b),_.LFG(Pe.K0),_.LFG(Zs),_.LFG(Pe.Ye),_.LFG(f_))},w.\u0275prov=_.Yz7({token:w,factory:w.\u0275fac}),w})();const Hx=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],vw=new _.OlP("cdk-connected-overlay-scroll-strategy");let mA=(()=>{class w{constructor(f){this.elementRef=f}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(_.SBq))},w.\u0275dir=_.lG2({type:w,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),w})(),bd=(()=>{class w{constructor(f,b,L,Y,me){this._overlay=f,this._dir=me,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=pr.w.EMPTY,this._attachSubscription=pr.w.EMPTY,this._detachSubscription=pr.w.EMPTY,this._positionSubscription=pr.w.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new _.vpe,this.positionChange=new _.vpe,this.attach=new _.vpe,this.detach=new _.vpe,this.overlayKeydown=new _.vpe,this.overlayOutsideClick=new _.vpe,this._templatePortal=new l_(b,L),this._scrollStrategyFactory=Y,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(f){this._offsetX=f,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(f){this._offsetY=f,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(f){this._hasBackdrop=No(f)}get lockPosition(){return this._lockPosition}set lockPosition(f){this._lockPosition=No(f)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(f){this._flexibleDimensions=No(f)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(f){this._growAfterOpen=No(f)}get push(){return this._push}set push(f){this._push=No(f)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(f){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),f.origin&&this.open&&this._position.apply()),f.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Hx);const f=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=f.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=f.detachments().subscribe(()=>this.detach.emit()),f.keydownEvents().subscribe(b=>{this.overlayKeydown.next(b),27===b.keyCode&&!this.disableClose&&!Va(b)&&(b.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(b=>{this.overlayOutsideClick.next(b)})}_buildConfig(){const f=this._position=this.positionStrategy||this._createPositionStrategy(),b=new d_({direction:this._dir,positionStrategy:f,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(b.width=this.width),(this.height||0===this.height)&&(b.height=this.height),(this.minWidth||0===this.minWidth)&&(b.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(b.minHeight=this.minHeight),this.backdropClass&&(b.backdropClass=this.backdropClass),this.panelClass&&(b.panelClass=this.panelClass),b}_updatePositionStrategy(f){const b=this.positions.map(L=>({originX:L.originX,originY:L.originY,overlayX:L.overlayX,overlayY:L.overlayY,offsetX:L.offsetX||this.offsetX,offsetY:L.offsetY||this.offsetY,panelClass:L.panelClass||void 0}));return f.setOrigin(this.origin.elementRef).withPositions(b).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const f=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(f),f}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(f=>{this.backdropClick.emit(f)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(w,y=!1){return f=>f.lift(new uw(w,y))}(()=>this.positionChange.observers.length>0)).subscribe(f=>{this.positionChange.emit(f),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(Xh),_.Y36(_.Rgc),_.Y36(_.s_b),_.Y36(vw),_.Y36(Zs,8))},w.\u0275dir=_.lG2({type:w,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[_.TTD]}),w})();const Dg={provide:vw,deps:[Xh],useFactory:function(w){return()=>w.scrollStrategies.reposition()}};let lh=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({providers:[Xh,Dg],imports:[[pd,pA,sw],sw]}),w})();var m_=ee(1439);const _w=["trigger"],Wx=["panel"];function Ew(w,y){if(1&w&&(_.TgZ(0,"span",8),_._uU(1),_.qZA()),2&w){const f=_.oxw();_.xp6(1),_.Oqu(f.placeholder)}}function Yx(w,y){if(1&w&&(_.TgZ(0,"span",12),_._uU(1),_.qZA()),2&w){const f=_.oxw(2);_.xp6(1),_.Oqu(f.triggerValue)}}function v_(w,y){1&w&&_.Hsn(0,0,["*ngSwitchCase","true"])}function y_(w,y){if(1&w&&(_.TgZ(0,"span",9),_.YNc(1,Yx,2,1,"span",10),_.YNc(2,v_,1,0,"ng-content",11),_.qZA()),2&w){const f=_.oxw();_.Q6J("ngSwitch",!!f.customTrigger),_.xp6(2),_.Q6J("ngSwitchCase",!0)}}function __(w,y){if(1&w){const f=_.EpF();_.TgZ(0,"div",13),_.TgZ(1,"div",14,15),_.NdJ("@transformPanel.done",function(L){return _.CHM(f),_.oxw()._panelDoneAnimatingStream.next(L.toState)})("keydown",function(L){return _.CHM(f),_.oxw()._handleKeydown(L)}),_.Hsn(3,1),_.qZA(),_.qZA()}if(2&w){const f=_.oxw();_.Q6J("@transformPanelWrap",void 0),_.xp6(1),_.Gre("mat-select-panel ",f._getPanelTheme(),""),_.Udp("transform-origin",f._transformOrigin)("font-size",f._triggerFontSize,"px"),_.Q6J("ngClass",f.panelClass)("@transformPanel",f.multiple?"showing-multiple":"showing"),_.uIk("id",f.id+"-panel")("aria-multiselectable",f.multiple)("aria-label",f.ariaLabel||null)("aria-labelledby",f._getPanelAriaLabelledby())}}const bw=[[["mat-select-trigger"]],"*"],dp=["mat-select-trigger","*"],A0={transformPanelWrap:(0,hs.X$)("transformPanelWrap",[(0,hs.eR)("* => void",(0,hs.IO)("@transformPanel",[(0,hs.pV)()],{optional:!0}))]),transformPanel:(0,hs.X$)("transformPanel",[(0,hs.SB)("void",(0,hs.oB)({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),(0,hs.SB)("showing",(0,hs.oB)({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),(0,hs.SB)("showing-multiple",(0,hs.oB)({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),(0,hs.eR)("void => *",(0,hs.jt)("120ms cubic-bezier(0, 0, 0.2, 1)")),(0,hs.eR)("* => void",(0,hs.jt)("100ms 25ms linear",(0,hs.oB)({opacity:0})))])};let ww=0;const po=new _.OlP("mat-select-scroll-strategy"),Jx=new _.OlP("MAT_SELECT_CONFIG"),wd={provide:po,deps:[Xh],useFactory:function(w){return()=>w.scrollStrategies.reposition()}};class M0{constructor(y,f){this.source=y,this.value=f}}const b_=Bh(XS($m(Tb(class{constructor(w,y,f,b,L){this._elementRef=w,this._defaultErrorStateMatcher=y,this._parentForm=f,this._parentFormGroup=b,this.ngControl=L}})))),Qx=new _.OlP("MatSelectTrigger");let Cw=(()=>{class w extends b_{constructor(f,b,L,Y,me,pt,Mt,an,On,jr,bo,na,Jo,Ta){var Rc,ra,P_;super(me,Y,Mt,an,jr),this._viewportRuler=f,this._changeDetectorRef=b,this._ngZone=L,this._dir=pt,this._parentFormField=On,this._liveAnnouncer=Jo,this._defaultOptions=Ta,this._panelOpen=!1,this._compareWith=(_u,Cd)=>_u===Cd,this._uid="mat-select-"+ww++,this._triggerAriaLabelledBy=null,this._destroy=new Gn.xQ,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+ww++,this._panelDoneAnimatingStream=new Gn.xQ,this._overlayPanelClass=(null===(Rc=this._defaultOptions)||void 0===Rc?void 0:Rc.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(P_=null===(ra=this._defaultOptions)||void 0===ra?void 0:ra.disableOptionCentering)&&void 0!==P_&&P_,this.ariaLabel="",this.optionSelectionChanges=(0,m_.P)(()=>{const _u=this.options;return _u?_u.changes.pipe((0,el.O)(_u),(0,sp.w)(()=>(0,ep.T)(..._u.map(Cd=>Cd.onSelectionChange)))):this._ngZone.onStable.pipe((0,ud.q)(1),(0,sp.w)(()=>this.optionSelectionChanges))}),this.openedChange=new _.vpe,this._openedStream=this.openedChange.pipe((0,hy.h)(_u=>_u),(0,nt.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,hy.h)(_u=>!_u),(0,nt.U)(()=>{})),this.selectionChange=new _.vpe,this.valueChange=new _.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==Ta?void 0:Ta.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=Ta.typeaheadDebounceInterval),this._scrollStrategyFactory=na,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(bo)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(f){this._placeholder=f,this.stateChanges.next()}get required(){return this._required}set required(f){this._required=No(f),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(f){this._multiple=No(f)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(f){this._disableOptionCentering=No(f)}get compareWith(){return this._compareWith}set compareWith(f){this._compareWith=f,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(f){(f!==this._value||this._multiple&&Array.isArray(f))&&(this.options&&this._setSelectionByValue(f),this._value=f)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(f){this._typeaheadDebounceInterval=Ca(f)}get id(){return this._id}set id(f){this._id=f||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new uA(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Ff(),Eo(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Eo(this._destroy)).subscribe(f=>{f.added.forEach(b=>b.select()),f.removed.forEach(b=>b.deselect())}),this.options.changes.pipe((0,el.O)(null),Eo(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const f=this._getTriggerAriaLabelledby();if(f!==this._triggerAriaLabelledBy){const b=this._elementRef.nativeElement;this._triggerAriaLabelledBy=f,f?b.setAttribute("aria-labelledby",f):b.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(f){f.disabled&&this.stateChanges.next(),f.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(f){this.value=f}registerOnChange(f){this._onChange=f}registerOnTouched(f){this._onTouched=f}setDisabledState(f){this.disabled=f,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const f=this._selectionModel.selected.map(b=>b.viewValue);return this._isRtl()&&f.reverse(),f.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(f){this.disabled||(this.panelOpen?this._handleOpenKeydown(f):this._handleClosedKeydown(f))}_handleClosedKeydown(f){const b=f.keyCode,L=40===b||38===b||37===b||39===b,Y=13===b||32===b,me=this._keyManager;if(!me.isTyping()&&Y&&!Va(f)||(this.multiple||f.altKey)&&L)f.preventDefault(),this.open();else if(!this.multiple){const pt=this.selected;me.onKeydown(f);const Mt=this.selected;Mt&&pt!==Mt&&this._liveAnnouncer.announce(Mt.viewValue,1e4)}}_handleOpenKeydown(f){const b=this._keyManager,L=f.keyCode,Y=40===L||38===L,me=b.isTyping();if(Y&&f.altKey)f.preventDefault(),this.close();else if(me||13!==L&&32!==L||!b.activeItem||Va(f))if(!me&&this._multiple&&65===L&&f.ctrlKey){f.preventDefault();const pt=this.options.some(Mt=>!Mt.disabled&&!Mt.selected);this.options.forEach(Mt=>{Mt.disabled||(pt?Mt.select():Mt.deselect())})}else{const pt=b.activeItemIndex;b.onKeydown(f),this._multiple&&Y&&f.shiftKey&&b.activeItem&&b.activeItemIndex!==pt&&b.activeItem._selectViaInteraction()}else f.preventDefault(),b.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,ud.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(f){if(this._selectionModel.selected.forEach(b=>b.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&f)Array.isArray(f),f.forEach(b=>this._selectValue(b)),this._sortValues();else{const b=this._selectValue(f);b?this._keyManager.updateActiveItem(b):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(f){const b=this.options.find(L=>{if(this._selectionModel.isSelected(L))return!1;try{return null!=L.value&&this._compareWith(L.value,f)}catch(Y){return!1}});return b&&this._selectionModel.select(b),b}_initKeyManager(){this._keyManager=new Lh(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Eo(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Eo(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const f=(0,ep.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Eo(f)).subscribe(b=>{this._onSelect(b.source,b.isUserInput),b.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,ep.T)(...this.options.map(b=>b._stateChanges)).pipe(Eo(f)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(f,b){const L=this._selectionModel.isSelected(f);null!=f.value||this._multiple?(L!==f.selected&&(f.selected?this._selectionModel.select(f):this._selectionModel.deselect(f)),b&&this._keyManager.setActiveItem(f),this.multiple&&(this._sortValues(),b&&this.focus())):(f.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(f.value)),L!==this._selectionModel.isSelected(f)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const f=this.options.toArray();this._selectionModel.sort((b,L)=>this.sortComparator?this.sortComparator(b,L,f):f.indexOf(b)-f.indexOf(L)),this.stateChanges.next()}}_propagateChanges(f){let b=null;b=this.multiple?this.selected.map(L=>L.value):this.selected?this.selected.value:f,this._value=b,this.valueChange.emit(b),this._onChange(b),this.selectionChange.emit(this._getChangeEvent(b)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var f;return!this._panelOpen&&!this.disabled&&(null===(f=this.options)||void 0===f?void 0:f.length)>0}focus(f){this._elementRef.nativeElement.focus(f)}_getPanelAriaLabelledby(){var f;if(this.ariaLabel)return null;const b=null===(f=this._parentFormField)||void 0===f?void 0:f.getLabelId();return this.ariaLabelledby?(b?b+" ":"")+this.ariaLabelledby:b}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var f;if(this.ariaLabel)return null;const b=null===(f=this._parentFormField)||void 0===f?void 0:f.getLabelId();let L=(b?b+" ":"")+this._valueId;return this.ariaLabelledby&&(L+=" "+this.ariaLabelledby),L}_panelDoneAnimating(f){this.openedChange.emit(f)}setDescribedByIds(f){this._ariaDescribedby=f.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(yd),_.Y36(_.sBO),_.Y36(_.R0b),_.Y36(Sa),_.Y36(_.SBq),_.Y36(Zs,8),_.Y36(Je,8),_.Y36(eo,8),_.Y36(Fo,8),_.Y36(en,10),_.$8M("tabindex"),_.Y36(po),_.Y36(xc),_.Y36(Jx,8))},w.\u0275dir=_.lG2({type:w,viewQuery:function(f,b){if(1&f&&(_.Gf(_w,5),_.Gf(Wx,5),_.Gf(bd,5)),2&f){let L;_.iGM(L=_.CRH())&&(b.trigger=L.first),_.iGM(L=_.CRH())&&(b.panel=L.first),_.iGM(L=_.CRH())&&(b._overlayDir=L.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[_.qOj,_.TTD]}),w})(),w_=(()=>{class w extends Cw{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(f,b,L){const Y=this._getItemHeight();return Math.min(Math.max(0,Y*f-b+Y/2),L)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Eo(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe((0,ud.q)(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(f){const b=Rb(f,this.options,this.optionGroups),L=this._getItemHeight();this.panel.nativeElement.scrollTop=0===f&&1===b?0:function(w,y,f,b){return w<f?w:w+y>f+256?Math.max(0,w-256+y):f}((f+b)*L,L,this.panel.nativeElement.scrollTop)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(f){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(f)}_getChangeEvent(f){return new M0(this,f)}_calculateOverlayOffsetX(){const f=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),b=this._viewportRuler.getViewportSize(),L=this._isRtl(),Y=this.multiple?56:32;let me;if(this.multiple)me=40;else if(this.disableOptionCentering)me=16;else{let an=this._selectionModel.selected[0]||this.options.first;me=an&&an.group?32:16}L||(me*=-1);const pt=0-(f.left+me-(L?Y:0)),Mt=f.right+me-b.width+(L?0:Y);pt>0?me+=pt+8:Mt>0&&(me-=Mt+8),this._overlayDir.offsetX=Math.round(me),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(f,b,L){const Y=this._getItemHeight(),me=(Y-this._triggerRect.height)/2,pt=Math.floor(256/Y);let Mt;return this.disableOptionCentering?0:(Mt=0===this._scrollTop?f*Y:this._scrollTop===L?(f-(this._getItemCount()-pt))*Y+(Y-(this._getItemCount()*Y-256)%Y):b-Y/2,Math.round(-1*Mt-me))}_checkOverlayWithinViewport(f){const b=this._getItemHeight(),L=this._viewportRuler.getViewportSize(),Y=this._triggerRect.top-8,me=L.height-this._triggerRect.bottom-8,pt=Math.abs(this._offsetY),an=Math.min(this._getItemCount()*b,256)-pt-this._triggerRect.height;an>me?this._adjustPanelUp(an,me):pt>Y?this._adjustPanelDown(pt,Y,f):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(f,b){const L=Math.round(f-b);this._scrollTop-=L,this._offsetY-=L,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(f,b,L){const Y=Math.round(f-b);if(this._scrollTop+=Y,this._offsetY+=Y,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=L)return this._scrollTop=L,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const f=this._getItemHeight(),b=this._getItemCount(),L=Math.min(b*f,256),me=b*f-L;let pt;pt=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),pt+=Rb(pt,this.options,this.optionGroups);const Mt=L/2;this._scrollTop=this._calculateOverlayScroll(pt,Mt,me),this._offsetY=this._calculateOverlayOffsetY(pt,Mt,me),this._checkOverlayWithinViewport(me)}_getOriginBasedOnOption(){const f=this._getItemHeight(),b=(f-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-b+f/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return w.\u0275fac=function(){let y;return function(b){return(y||(y=_.n5z(w)))(b||w)}}(),w.\u0275cmp=_.Xpm({type:w,selectors:[["mat-select"]],contentQueries:function(f,b,L){if(1&f&&(_.Suo(L,Qx,5),_.Suo(L,Mb,5),_.Suo(L,Yf,5)),2&f){let Y;_.iGM(Y=_.CRH())&&(b.customTrigger=Y.first),_.iGM(Y=_.CRH())&&(b.options=Y),_.iGM(Y=_.CRH())&&(b.optionGroups=Y)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(f,b){1&f&&_.NdJ("keydown",function(Y){return b._handleKeydown(Y)})("focus",function(){return b._onFocus()})("blur",function(){return b._onBlur()}),2&f&&(_.uIk("id",b.id)("tabindex",b.tabIndex)("aria-controls",b.panelOpen?b.id+"-panel":null)("aria-expanded",b.panelOpen)("aria-label",b.ariaLabel||null)("aria-required",b.required.toString())("aria-disabled",b.disabled.toString())("aria-invalid",b.errorState)("aria-describedby",b._ariaDescribedby||null)("aria-activedescendant",b._getAriaActiveDescendant()),_.ekj("mat-select-disabled",b.disabled)("mat-select-invalid",b.errorState)("mat-select-required",b.required)("mat-select-empty",b.empty)("mat-select-multiple",b.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[_._Bn([{provide:Vh,useExisting:w},{provide:bg,useExisting:w}]),_.qOj],ngContentSelectors:dp,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(f,b){if(1&f&&(_.F$t(bw),_.TgZ(0,"div",0,1),_.NdJ("click",function(){return b.toggle()}),_.TgZ(3,"div",2),_.YNc(4,Ew,2,1,"span",3),_.YNc(5,y_,3,2,"span",4),_.qZA(),_.TgZ(6,"div",5),_._UZ(7,"div",6),_.qZA(),_.qZA(),_.YNc(8,__,4,14,"ng-template",7),_.NdJ("backdropClick",function(){return b.close()})("attach",function(){return b._onAttached()})("detach",function(){return b.close()})),2&f){const L=_.MAs(1);_.uIk("aria-owns",b.panelOpen?b.id+"-panel":null),_.xp6(3),_.Q6J("ngSwitch",b.empty),_.uIk("id",b._valueId),_.xp6(1),_.Q6J("ngSwitchCase",!0),_.xp6(1),_.Q6J("ngSwitchCase",!1),_.xp6(3),_.Q6J("cdkConnectedOverlayPanelClass",b._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",b._scrollStrategy)("cdkConnectedOverlayOrigin",L)("cdkConnectedOverlayOpen",b.panelOpen)("cdkConnectedOverlayPositions",b._positions)("cdkConnectedOverlayMinWidth",null==b._triggerRect?null:b._triggerRect.width)("cdkConnectedOverlayOffsetY",b._offsetY)}},directives:[mA,Pe.RF,Pe.n9,bd,Pe.ED,Pe.mk],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[A0.transformPanelWrap,A0.transformPanel]},changeDetection:0}),w})(),e1=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({providers:[wd],imports:[[Pe.ez,lh,Ob,Il],C0,ip,Ob,Il]}),w})();const C_=Sc({passive:!0});let S_=(()=>{class w{constructor(f,b){this._platform=f,this._ngZone=b,this._monitoredElements=new Map}monitor(f){if(!this._platform.isBrowser)return xx.E;const b=Oh(f),L=this._monitoredElements.get(b);if(L)return L.subject;const Y=new Gn.xQ,me="cdk-text-field-autofilled",pt=Mt=>{"cdk-text-field-autofill-start"!==Mt.animationName||b.classList.contains(me)?"cdk-text-field-autofill-end"===Mt.animationName&&b.classList.contains(me)&&(b.classList.remove(me),this._ngZone.run(()=>Y.next({target:Mt.target,isAutofilled:!1}))):(b.classList.add(me),this._ngZone.run(()=>Y.next({target:Mt.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{b.addEventListener("animationstart",pt,C_),b.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(b,{subject:Y,unlisten:()=>{b.removeEventListener("animationstart",pt,C_)}}),Y}stopMonitoring(f){const b=Oh(f),L=this._monitoredElements.get(b);L&&(L.unlisten(),L.subject.complete(),b.classList.remove("cdk-text-field-autofill-monitored"),b.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(b))}ngOnDestroy(){this._monitoredElements.forEach((f,b)=>this.stopMonitoring(b))}}return w.\u0275fac=function(f){return new(f||w)(_.LFG(Di),_.LFG(_.R0b))},w.\u0275prov=_.Yz7({factory:function(){return new w(_.LFG(Di),_.LFG(_.R0b))},token:w,providedIn:"root"}),w})(),fp=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({imports:[[Cc]]}),w})();const R0=new _.OlP("MAT_INPUT_VALUE_ACCESSOR"),xw=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Tw=0;const Pw=Tb(class{constructor(w,y,f,b){this._defaultErrorStateMatcher=w,this._parentForm=y,this._parentFormGroup=f,this.ngControl=b}});let O0=(()=>{class w extends Pw{constructor(f,b,L,Y,me,pt,Mt,an,On,jr){super(pt,Y,me,L),this._elementRef=f,this._platform=b,this._autofillMonitor=an,this._formField=jr,this._uid="mat-input-"+Tw++,this.focused=!1,this.stateChanges=new Gn.xQ,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(Jo=>py().has(Jo));const bo=this._elementRef.nativeElement,na=bo.nodeName.toLowerCase();this._inputValueAccessor=Mt||bo,this._previousNativeValue=this.value,this.id=this.id,b.IOS&&On.runOutsideAngular(()=>{f.nativeElement.addEventListener("keyup",Jo=>{const Ta=Jo.target;!Ta.value&&0===Ta.selectionStart&&0===Ta.selectionEnd&&(Ta.setSelectionRange(1,1),Ta.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===na,this._isTextarea="textarea"===na,this._isInFormField=!!jr,this._isNativeSelect&&(this.controlType=bo.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(f){this._disabled=No(f),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(f){this._id=f||this._uid}get required(){return this._required}set required(f){this._required=No(f)}get type(){return this._type}set type(f){this._type=f||"text",this._validateType(),!this._isTextarea&&py().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(f){f!==this.value&&(this._inputValueAccessor.value=f,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(f){this._readonly=No(f)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(f=>{this.autofilled=f.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(f){this._elementRef.nativeElement.focus(f)}_focusChanged(f){f!==this.focused&&(this.focused=f,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var f,b;const L=(null===(b=null===(f=this._formField)||void 0===f?void 0:f._hideControlPlaceholder)||void 0===b?void 0:b.call(f))?null:this.placeholder;if(L!==this._previousPlaceholder){const Y=this._elementRef.nativeElement;this._previousPlaceholder=L,L?Y.setAttribute("placeholder",L):Y.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const f=this._elementRef.nativeElement.value;this._previousNativeValue!==f&&(this._previousNativeValue=f,this.stateChanges.next())}_validateType(){xw.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let f=this._elementRef.nativeElement.validity;return f&&f.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const f=this._elementRef.nativeElement,b=f.options[0];return this.focused||f.multiple||!this.empty||!!(f.selectedIndex>-1&&b&&b.label)}return this.focused||!this.empty}setDescribedByIds(f){f.length?this._elementRef.nativeElement.setAttribute("aria-describedby",f.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(_.SBq),_.Y36(Di),_.Y36(en,10),_.Y36(Je,8),_.Y36(eo,8),_.Y36(Sa),_.Y36(R0,10),_.Y36(S_),_.Y36(_.R0b),_.Y36(Fo,8))},w.\u0275dir=_.lG2({type:w,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(f,b){1&f&&_.NdJ("focus",function(){return b._focusChanged(!0)})("blur",function(){return b._focusChanged(!1)})("input",function(){return b._onInput()}),2&f&&(_.Ikx("disabled",b.disabled)("required",b.required),_.uIk("id",b.id)("data-placeholder",b.placeholder)("readonly",b.readonly&&!b._isNativeSelect||null)("aria-invalid",b.empty&&b.required?null:b.errorState)("aria-required",b.required),_.ekj("mat-input-server",b._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[_._Bn([{provide:Vh,useExisting:w}]),_.qOj,_.TTD]}),w})(),r1=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({providers:[Sa],imports:[[fp,ip,Il],fp,ip]}),w})();function i1(w,y){if(1&w&&(_.TgZ(0,"mat-option",15),_._uU(1),_.qZA()),2&w){const f=y.$implicit;_.Q6J("value",f),_.xp6(1),_.hij(" ",f," ")}}function Fg(w,y){if(1&w&&(_.TgZ(0,"div"),_.TgZ(1,"mat-form-field"),_.TgZ(2,"mat-label"),_.SDv(3,16),_.qZA(),_._UZ(4,"input",17),_.qZA(),_.TgZ(5,"mat-form-field"),_.TgZ(6,"mat-label"),_.SDv(7,18),_.qZA(),_._UZ(8,"input",19),_.qZA(),_.TgZ(9,"mat-form-field"),_.TgZ(10,"mat-label"),_.SDv(11,20),_.qZA(),_._UZ(12,"input",19),_.qZA(),_.qZA()),2&w){const f=_.oxw(2);_.xp6(8),_.Q6J("value",f.geoLongitude),_.xp6(4),_.Q6J("value",f.geoLatitude)}}function EA(w,y){if(1&w&&(_.TgZ(0,"div"),_.TgZ(1,"mat-form-field"),_.TgZ(2,"mat-label"),_.SDv(3,21),_.qZA(),_._UZ(4,"input",22),_.qZA(),_.TgZ(5,"mat-form-field"),_.TgZ(6,"mat-label"),_.SDv(7,23),_.qZA(),_._UZ(8,"input",24),_.qZA(),_.TgZ(9,"mat-form-field"),_.TgZ(10,"mat-label"),_.SDv(11,25),_.qZA(),_._UZ(12,"input",19),_.qZA(),_.qZA()),2&w){const f=_.oxw(2);_.xp6(12),_.Q6J("value",f.reverseAddress)}}function Iw(w,y){if(1&w&&(_.TgZ(0,"div"),_.TgZ(1,"mat-form-field"),_.TgZ(2,"mat-label"),_.SDv(3,26),_.qZA(),_._UZ(4,"input",27),_.qZA(),_.TgZ(5,"mat-form-field"),_.TgZ(6,"mat-label"),_.SDv(7,28),_.qZA(),_._UZ(8,"input",29),_.qZA(),_.TgZ(9,"mat-form-field"),_.TgZ(10,"mat-label"),_.SDv(11,30),_.qZA(),_.TgZ(12,"mat-select",31),_.TgZ(13,"mat-option",32),_._uU(14,"pieton"),_.qZA(),_.TgZ(15,"mat-option",33),_._uU(16,"voiture"),_.qZA(),_.qZA(),_.qZA(),_.TgZ(17,"mat-form-field"),_.TgZ(18,"mat-label"),_.SDv(19,34),_.qZA(),_._UZ(20,"input",19),_.qZA(),_.TgZ(21,"mat-form-field"),_.TgZ(22,"mat-label"),_.SDv(23,35),_.qZA(),_._UZ(24,"input",19),_.qZA(),_.qZA()),2&w){const f=_.oxw(2);_.xp6(20),_.Q6J("value",f.duration),_.xp6(4),_.Q6J("value",f.distance)}}function o1(w,y){if(1&w&&(_.TgZ(0,"div"),_.TgZ(1,"mat-form-field"),_.TgZ(2,"mat-label"),_.SDv(3,10),_.qZA(),_.TgZ(4,"mat-select",11),_.YNc(5,i1,2,2,"mat-option",12),_.qZA(),_.qZA(),_.TgZ(6,"div",13),_.YNc(7,Fg,13,2,"div",14),_.YNc(8,EA,13,1,"div",14),_.YNc(9,Iw,25,2,"div",14),_.qZA(),_.qZA()),2&w){const f=_.oxw();_.xp6(5),_.Q6J("ngForOf",f.getFeatures()),_.xp6(1),_.Q6J("ngSwitch",f.getFeatureType()),_.xp6(1),_.Q6J("ngSwitchCase","geolocation"),_.xp6(1),_.Q6J("ngSwitchCase","reverseGeolocation"),_.xp6(1),_.Q6J("ngSwitchCase","itinerary")}}let x_=(()=>{class w{constructor(f,b,L){this.route=f,this.router=b,this.geoService=L,this.settingsForm=new Wi({featureType:new vi(""),geoAddress:new vi(""),reverseLongitude:new vi(""),reverseLatitude:new vi(""),origin:new vi("-0.67561,45.87869"),destination:new vi("-0.24465,46.01524"),transportType:new vi("voiture")}),this.geoLongitude=" ",this.geoLatitude=" ",this.reverseAddress=" ",this.distance=" ",this.duration=" ",this.home=!0,this.getFeatures=()=>Object.keys(tr).filter(Y=>isNaN(Number(Y))),this.onSubmit=()=>{switch(this.home=!1,this.router.navigate(["ol"]),this.getFeatureType()){case"geolocation":this.geolocalize();break;case"reverseGeolocation":this.reverse();break;case"itinerary":this.calculateIt()}},this.getFeatureType=()=>this.settingsForm.value.featureType,this.getGeoAddress=()=>this.settingsForm.value.geoAddress,this.getReverseLon=()=>this.settingsForm.value.reverseLongitude,this.getReverseLat=()=>this.settingsForm.value.reverseLatitude,this.getOrigin=()=>this.settingsForm.value.origin,this.getDestination=()=>this.settingsForm.value.destination,this.getTransport=()=>this.settingsForm.value.transportType,this.geolocalize=()=>{this.geoService.getCoordinatesFromAddress(`https://api-adresse.data.gouv.fr/search?q=${this.getGeoAddress()}&limit=1`).subscribe(Y=>{this.geoLongitude=Y.longitude,this.geoLatitude=Y.latitude,this.geoService.setPoint(Y.features)})},this.reverse=()=>{const Y=this.getReverseLon().trim()?this.getReverseLon():2.347,me=this.getReverseLat().trim()?this.getReverseLat():48.859;this.geoService.getAddressFromCoordinates(`https://api-adresse.data.gouv.fr/reverse?lon=${Y}&lat=${me}`).subscribe(pt=>{this.reverseAddress=pt.address,this.geoService.setPoint(pt.features)})},this.calculateIt=()=>{this.geoService.getIti(`http://wxs.ign.fr/choisirgeoportail/itineraire/rest/route.json?origin=${this.getOrigin()}&destination=${this.getDestination()}&method=DISTANCE&graphName=${this.getTransport()}`).subscribe(Y=>{this.distance=Y.distance,this.duration=Y.duration,this.geoService.setIti(Y.wkt)})}}ngOnInit(){this.home="/"===this.router.url}}return w.\u0275fac=function(f){return new(f||w)(_.Y36(Q.gz),_.Y36(Q.F0),_.Y36(Jr._))},w.\u0275cmp=_.Xpm({type:w,selectors:[["app-map-settings"]],decls:12,vars:3,consts:function(){let y,f,b,L,Y,me,pt,Mt,an,On,jr,bo,na,Jo,Ta,Rc;return y="Settings",f="Set Config File",b="OpenLayers Map",L="Leaflet Map",Y="Feature",me="Address",pt="Longitude",Mt="Latitude",an="Longitude",On="Latitude",jr="Address",bo="Origin",na="Destination",Jo="Transport",Ta="Duration",Rc="Distance",[[1,"settings"],[1,"settings__title"],y,[1,"settings__form",3,"formGroup","ngSubmit"],["label",f],[4,"ngIf"],["type","submit","color","primary","mat-flat-button","",1,"settings__form__ol-link",3,"disabled"],b,["type","button","color","primary","disabled","","mat-flat-button","",1,"settings__form__ol-link"],L,Y,["formControlName","featureType","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"value"],me,["type","text","placeholder","280 rue saint honore","formControlName","geoAddress","matInput","","required",""],pt,["type","text","disabled","","matInput","",3,"value"],Mt,an,["type","number","placeholder","2.347","formControlName","reverseLongitude","matInput",""],On,["type","number","placeholder","48.859","formControlName","reverseLatitude","matInput",""],jr,bo,["type","text","formControlName","origin","matInput","","required",""],na,["type","text","formControlName","destination","matInput","","required",""],Jo,["formControlName","transportType","required",""],["value","pieton"],["value","voiture"],Ta,Rc]},template:function(f,b){1&f&&(_.TgZ(0,"main",0),_.TgZ(1,"h1",1),_.SDv(2,2),_.qZA(),_.TgZ(3,"form",3),_.NdJ("ngSubmit",function(){return b.onSubmit()}),_._UZ(4,"app-file-uploader",4),_.YNc(5,o1,10,5,"div",5),_.TgZ(6,"button",6),_.TgZ(7,"span"),_.SDv(8,7),_.qZA(),_.qZA(),_.TgZ(9,"button",8),_.TgZ(10,"span"),_.SDv(11,9),_.qZA(),_.qZA(),_.qZA(),_.qZA()),2&f&&(_.xp6(3),_.Q6J("formGroup",b.settingsForm),_.xp6(2),_.Q6J("ngIf",!b.home),_.xp6(1),_.Q6J("disabled",!1===b.home&&!b.settingsForm.valid))},directives:[Tr,Ae,eo,zb,Pe.O5,Lb,zr,zh,w_,rt,pl,cu,Pe.sg,Pe.RF,Pe.n9,Mb,ue,O0,Nr],styles:[".settings[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;box-shadow:1px 0 3px #64646473}.settings__title[_ngcontent-%COMP%]{display:inline-flex;font-size:1.25em;margin:.3em auto}.settings__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:.5em}.settings__form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:.5em}.settings__form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:inline}.settings__form__ol-link[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center}"]}),w})();const T_=[{path:"",component:(()=>{class w{constructor(){}ngOnInit(){}}return w.\u0275fac=function(f){return new(f||w)},w.\u0275cmp=_.Xpm({type:w,selectors:[["app-body"]],decls:3,vars:0,consts:[[1,"body"]],template:function(f,b){1&f&&(_.TgZ(0,"div",0),_._UZ(1,"app-map-settings"),_._UZ(2,"router-outlet"),_.qZA())},directives:[x_,Q.lC],styles:['body[_ngcontent-%COMP%]{margin:0;width:100vw;height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,"Helvetica Neue",sans-serif}.body[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex-direction:row;position:relative}.body[_ngcontent-%COMP%]   app-map-settings[_ngcontent-%COMP%]{display:flex;width:15em}']}),w})(),children:[{path:"",component:(()=>{class w{constructor(){}ngOnInit(){}}return w.\u0275fac=function(f){return new(f||w)},w.\u0275cmp=_.Xpm({type:w,selectors:[["app-map-landing"]],decls:2,vars:0,consts:[[1,"container"],["src","assets/landing-map.svg","alt","landing map"]],template:function(f,b){1&f&&(_.TgZ(0,"div",0),_._UZ(1,"img",1),_.qZA())},styles:['body[_ngcontent-%COMP%]{margin:0;width:100vw;height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,"Helvetica Neue",sans-serif}.container[_ngcontent-%COMP%]{display:flex;flex:1;position:absolute;height:100%;width:calc(100% - 15em);align-items:center;justify-content:center}img[_ngcontent-%COMP%]{width:calc(100% - 6em);height:calc(100% - 3em)}']}),w})()},{path:"ol",loadChildren:()=>Promise.resolve().then(ee.bind(ee,2369)).then(w=>w.MapOlContainerModule)}]}];let s1=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({imports:[[Q.Bz.forChild(T_)],Q.Bz]}),w})();var Aw=ee(2369);let Mw=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({imports:[ip,r1,cx,$f,e1]}),w})(),bA=(()=>{class w{}return w.\u0275fac=function(f){return new(f||w)},w.\u0275mod=_.oAB({type:w}),w.\u0275inj=_.cJS({providers:[],imports:[[Pe.ez,Mw,s1,Aw.MapOlContainerModule,he,ze]]}),w})()},2369:(Tt,St,ee)=>{"use strict";ee.r(St),ee.d(St,{MapOlContainerModule:()=>Doe});var Q=ee(8583),_=ee(2305);function Pe(n,t,e,r,i,o,s){try{var a=n[o](s),c=a.value}catch(h){return void e(h)}a.done?t(c):Promise.resolve(c).then(r,i)}function we(n){return function(){var t=this,e=arguments;return new Promise(function(r,i){var o=n.apply(t,e);function s(c){Pe(o,r,i,s,a,"next",c)}function a(c){Pe(o,r,i,s,a,"throw",c)}s(void 0)})}}const xe=function(){function n(t){this.type=t,this.target=null}return n.prototype.preventDefault=function(){this.defaultPrevented=!0},n.prototype.stopPropagation=function(){this.propagationStopped=!0},n}(),Ge=function(){function n(){this.disposed=!1}return n.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},n.prototype.disposeInternal=function(){},n}();function at(n,t){return n>t?1:n<t?-1:0}function Se(n,t,e){var r=n.length;if(n[0]<=t)return 0;if(t<=n[r-1])return r-1;var i=void 0;if(e>0){for(i=1;i<r;++i)if(n[i]<t)return i-1}else if(e<0){for(i=1;i<r;++i)if(n[i]<=t)return i}else for(i=1;i<r;++i){if(n[i]==t)return i;if(n[i]<t)return"function"==typeof e?e(t,n[i-1],n[i])>0?i-1:i:n[i-1]-t<t-n[i]?i-1:i}return r-1}function Le(n,t,e){for(;t<e;){var r=n[t];n[t]=n[e],n[e]=r,++t,--e}}function Be(n,t){for(var e=Array.isArray(t)?t:[t],r=e.length,i=0;i<r;i++)n[n.length]=e[i]}function Me(n,t){var e=n.length;if(e!==t.length)return!1;for(var r=0;r<e;r++)if(n[r]!==t[r])return!1;return!0}function Ue(){return!0}function ht(){return!1}function it(){}var xt="function"==typeof Object.assign?Object.assign:function(n,t){if(null==n)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(n),r=1,i=arguments.length;r<i;++r){var o=arguments[r];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(e[s]=o[s])}return e};function te(n){for(var t in n)delete n[t]}var Ee="function"==typeof Object.values?Object.values:function(n){var t=[];for(var e in n)t.push(n[e]);return t};function Ve(n){var t;for(t in n)return!1;return!t}var n,bt=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});const tn=function(n){function t(e){var r=n.call(this)||this;return r.eventTarget_=e,r.pendingRemovals_=null,r.dispatching_=null,r.listeners_=null,r}return bt(t,n),t.prototype.addEventListener=function(e,r){if(e&&r){var i=this.listeners_||(this.listeners_={}),o=i[e]||(i[e]=[]);-1===o.indexOf(r)&&o.push(r)}},t.prototype.dispatchEvent=function(e){var r="string"==typeof e?new xe(e):e,i=r.type;r.target||(r.target=this.eventTarget_||this);var s,o=this.listeners_&&this.listeners_[i];if(o){var a=this.dispatching_||(this.dispatching_={}),c=this.pendingRemovals_||(this.pendingRemovals_={});i in a||(a[i]=0,c[i]=0),++a[i];for(var h=0,p=o.length;h<p;++h)if(!1===(s="handleEvent"in o[h]?o[h].handleEvent(r):o[h].call(this,r))||r.propagationStopped){s=!1;break}if(--a[i],0===a[i]){var m=c[i];for(delete c[i];m--;)this.removeEventListener(i,it);delete a[i]}return s}},t.prototype.disposeInternal=function(){this.listeners_&&te(this.listeners_)},t.prototype.getListeners=function(e){return this.listeners_&&this.listeners_[e]||void 0},t.prototype.hasListener=function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)},t.prototype.removeEventListener=function(e,r){var i=this.listeners_&&this.listeners_[e];if(i){var o=i.indexOf(r);-1!==o&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[o]=it,++this.pendingRemovals_[e]):(i.splice(o,1),0===i.length&&delete this.listeners_[e]))}},t}(Ge);function mn(n,t,e,r,i){if(r&&r!==n&&(e=e.bind(r)),i){var o=e;e=function(){n.removeEventListener(t,e),o.apply(this,arguments)}}var s={target:n,type:t,listener:e};return n.addEventListener(t,e),s}function lr(n,t,e,r){return mn(n,t,e,r,!0)}function un(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),te(n))}var Rr=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function pi(n){if(Array.isArray(n))for(var t=0,e=n.length;t<e;++t)un(n[t]);else un(n)}const cn=function(n){function t(){var e=n.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return Rr(t,n),t.prototype.changed=function(){++this.revision_,this.dispatchEvent("change")},t.prototype.getRevision=function(){return this.revision_},t.prototype.onInternal=function(e,r){if(Array.isArray(e)){for(var i=e.length,o=new Array(i),s=0;s<i;++s)o[s]=mn(this,e[s],r);return o}return mn(this,e,r)},t.prototype.onceInternal=function(e,r){var i;if(Array.isArray(e)){var o=e.length;i=new Array(o);for(var s=0;s<o;++s)i[s]=lr(this,e[s],r)}else i=lr(this,e,r);return r.ol_key=i,i},t.prototype.unInternal=function(e,r){var i=r.ol_key;if(i)pi(i);else if(Array.isArray(e))for(var o=0,s=e.length;o<s;++o)this.removeEventListener(e[o],r);else this.removeEventListener(e,r)},t}(tn);function Ht(){return function(){throw new Error("Unimplemented abstract method.")}()}var qn=0;function Jt(n){return n.ol_uid||(n.ol_uid=String(++qn))}var Ro=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Br=function(n){function t(e,r,i){var o=n.call(this,e)||this;return o.key=r,o.oldValue=i,o}return Ro(t,n),t}(xe);const Wn=function(n){function t(e){var r=n.call(this)||this;return Jt(r),r.values_=null,void 0!==e&&r.setProperties(e),r}return Ro(t,n),t.prototype.get=function(e){var r;return this.values_&&this.values_.hasOwnProperty(e)&&(r=this.values_[e]),r},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&xt({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(e,r){this.dispatchEvent(new Br("change:"+e,e,r)),this.dispatchEvent(new Br("propertychange",e,r))},t.prototype.addChangeListener=function(e,r){this.addEventListener("change:"+e,r)},t.prototype.removeChangeListener=function(e,r){this.removeEventListener("change:"+e,r)},t.prototype.set=function(e,r,i){var o=this.values_||(this.values_={});if(i)o[e]=r;else{var s=o[e];o[e]=r,s!==r&&this.notify(e,s)}},t.prototype.setProperties=function(e,r){for(var i in e)this.set(i,e[i],r)},t.prototype.applyProperties=function(e){!e.values_||xt(this.values_||(this.values_={}),e.values_)},t.prototype.unset=function(e,r){if(this.values_&&e in this.values_){var i=this.values_[e];delete this.values_[e],Ve(this.values_)&&(this.values_=null),r||this.notify(e,i)}},t}(cn),Wt={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};var io={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},wr={};wr[io.DEGREES]=2*Math.PI*6370997/360,wr[io.FEET]=.3048,wr[io.METERS]=1,wr[io.USFEET]=1200/3937;const en=io,ke=function(){function n(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return n.prototype.canWrapX=function(){return this.canWrapX_},n.prototype.getCode=function(){return this.code_},n.prototype.getExtent=function(){return this.extent_},n.prototype.getUnits=function(){return this.units_},n.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||wr[this.units_]},n.prototype.getWorldExtent=function(){return this.worldExtent_},n.prototype.getAxisOrientation=function(){return this.axisOrientation_},n.prototype.isGlobal=function(){return this.global_},n.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},n.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},n.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},n.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},n.prototype.setWorldExtent=function(t){this.worldExtent_=t},n.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},n.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},n}();function mt(n,t,e){return Math.min(Math.max(n,t),e)}var Bt="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},vn="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function Yt(n,t,e,r,i,o){var s=i-e,a=o-r;if(0!==s||0!==a){var c=((n-e)*s+(t-r)*a)/(s*s+a*a);c>1?(e=i,r=o):c>0&&(e+=s*c,r+=a*c)}return Sn(n,t,e,r)}function Sn(n,t,e,r){var i=e-n,o=r-t;return i*i+o*o}function Yr(n){return n*Math.PI/180}function kr(n,t){var e=n%t;return e*t<0?e+t:e}function Kr(n,t,e){return n+e*(t-n)}var Cr=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),rn=6378137,ce=Math.PI*rn,pe=[-ce,-ce,ce,ce],Ze=[-180,-85,180,85],At=rn*Math.log(Math.tan(Math.PI/2)),_n=function(n){function t(e){return n.call(this,{code:e,units:en.METERS,extent:pe,global:!0,worldExtent:Ze,getPointResolution:function(r,i){return r/Bt(i[1]/rn)}})||this}return Cr(t,n),t}(ke),_r=[new _n("EPSG:3857"),new _n("EPSG:102100"),new _n("EPSG:102113"),new _n("EPSG:900913"),new _n("http://www.opengis.net/gml/srs/epsg.xml#3857")];var zi=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),or=[-180,-90,180,90],cr=6378137*Math.PI/180,fr=function(n){function t(e,r){return n.call(this,{code:e,units:en.DEGREES,extent:or,axisOrientation:r,global:!0,metersPerUnit:cr,worldExtent:or})||this}return zi(t,n),t}(ke),Vn=[new fr("CRS:84"),new fr("EPSG:4326","neu"),new fr("urn:ogc:def:crs:OGC:1.3:CRS84"),new fr("urn:ogc:def:crs:OGC:2:84"),new fr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu")],To={},Ho={};function gi(n,t,e){var r=n.getCode(),i=t.getCode();r in Ho||(Ho[r]={}),Ho[r][i]=e}var Xt=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const mi=function(n){function t(e){var r=this,o="Assertion failed. See https://openlayers.org/en/v"+"6.6.1".split("-")[0]+"/doc/errors/#"+e+" for details.";return(r=n.call(this,o)||this).code=e,r.name="AssertionError",r.message=o,r}return Xt(t,n),t}(Error);function Nn(n,t){if(!n)throw new mi(t)}function vs(n){for(var t=[1/0,1/0,-1/0,-1/0],e=0,r=n.length;e<r;++e)Tn(t,n[e]);return t}function vi(n,t,e){return e?(e[0]=n[0]-t,e[1]=n[1]-t,e[2]=n[2]+t,e[3]=n[3]+t,e):[n[0]-t,n[1]-t,n[2]+t,n[3]+t]}function Wi(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n.slice()}function ys(n,t,e){var r,i;return(r=t<n[0]?n[0]-t:n[2]<t?t-n[2]:0)*r+(i=e<n[1]?n[1]-e:n[3]<e?e-n[3]:0)*i}function qo(n,t){return tt(n,t[0],t[1])}function Zn(n,t){return n[0]<=t[0]&&t[2]<=n[2]&&n[1]<=t[1]&&t[3]<=n[3]}function tt(n,t,e){return n[0]<=t&&t<=n[2]&&n[1]<=e&&e<=n[3]}function Je(n,t){var s=t[0],a=t[1],c=0;return s<n[0]?c|=16:s>n[2]&&(c|=4),a<n[1]?c|=8:a>n[3]&&(c|=2),0===c&&(c=1),c}function W(n,t,e,r,i){return i?(i[0]=n,i[1]=t,i[2]=e,i[3]=r,i):[n,t,e,r]}function oe(n){return W(1/0,1/0,-1/0,-1/0,n)}function fe(n,t){var e=n[0],r=n[1];return W(e,r,e,r,t)}function vt(n,t,e,r,i){return Jn(oe(i),n,t,e,r)}function nn(n,t){return n[0]==t[0]&&n[2]==t[2]&&n[1]==t[1]&&n[3]==t[3]}function bn(n,t){return t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3]),n}function Tn(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1])}function Jn(n,t,e,r,i){for(;e<r;e+=i)Fr(n,t[e],t[e+1]);return n}function Fr(n,t,e){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}function Oo(n,t){var e;return!!((e=t(qr(n)))||(e=t(Ts(n)),e)||(e=t(da(n)),e)||(e=t(Ys(n)),e))&&e}function Fi(n){var t=0;return pl(n)||(t=Yi(n)*yo(n)),t}function qr(n){return[n[0],n[1]]}function Ts(n){return[n[2],n[1]]}function Xo(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function Hs(n,t){var e;return"bottom-left"===t?e=qr(n):"bottom-right"===t?e=Ts(n):"top-left"===t?e=Ys(n):"top-right"===t?e=da(n):Nn(!1,13),e}function ao(n,t,e,r,i){var o=t*r[0]/2,s=t*r[1]/2,a=Math.cos(e),c=Math.sin(e),h=o*a,p=o*c,m=s*a,E=s*c,S=n[0],x=n[1],P=S-h+E,R=S-h-E,F=S+h-E,D=S+h+E,j=x-p-m,G=x-p+m,X=x+p+m,J=x+p-m;return W(Math.min(P,R,F,D),Math.min(j,G,X,J),Math.max(P,R,F,D),Math.max(j,G,X,J),i)}function yo(n){return n[3]-n[1]}function eo(n,t,e){var r=e||[1/0,1/0,-1/0,-1/0];return Oi(n,t)?(r[0]=n[0]>t[0]?n[0]:t[0],r[1]=n[1]>t[1]?n[1]:t[1],r[2]=n[2]<t[2]?n[2]:t[2],r[3]=n[3]<t[3]?n[3]:t[3]):oe(r),r}function Ys(n){return[n[0],n[3]]}function da(n){return[n[2],n[3]]}function Yi(n){return n[2]-n[0]}function Oi(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function pl(n){return n[2]<n[0]||n[3]<n[1]}function uu(n,t,e){var r=e||6371008.8,i=Yr(n[1]),o=Yr(t[1]),s=(o-i)/2,a=Yr(t[0]-n[0])/2,c=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function Ga(n,t,e){var r;if(void 0!==t){for(var i=0,o=n.length;i<o;++i)t[i]=n[i];r=t}else r=n.slice();return r}function gc(n,t,e){if(void 0!==t&&n!==t){for(var r=0,i=n.length;r<i;++r)t[r]=n[r];n=t}return n}function ml(n){(function(n,t){To[n]=t})(n.getCode(),n),gi(n,n,Ga)}function Zi(n){return"string"==typeof n?function(n){return To[n]||To[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(n):n||null}function nd(n,t,e,r){var i,o=(n=Zi(n)).getPointResolutionFunc();if(o)i=o(t,e),r&&r!==n.getUnits()&&(s=n.getMetersPerUnit())&&(i=i*s/wr[r]);else{var a=n.getUnits();if(a==en.DEGREES&&!r||r==en.DEGREES)i=t;else{var s,c=wa(n,Zi("EPSG:4326"));if(c===gc&&a!==en.DEGREES)i=t*n.getMetersPerUnit();else{var h=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];i=(uu((h=c(h,h,2)).slice(0,2),h.slice(2,4))+uu(h.slice(4,6),h.slice(6,8)))/2}void 0!==(s=r?wr[r]:n.getMetersPerUnit())&&(i/=s)}}return i}function mc(n){(function(n){n.forEach(ml)})(n),n.forEach(function(t){n.forEach(function(e){t!==e&&gi(t,e,Ga)})})}function du(n,t){return n?"string"==typeof n?Zi(n):n:Zi(t)}function ba(n,t){if(n===t)return!0;var e=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||wa(n,t)===Ga)&&e}function wa(n,t){var i=function(n,t){var e;return n in Ho&&t in Ho[n]&&(e=Ho[n][t]),e}(n.getCode(),t.getCode());return i||(i=gc),i}function yl(n,t){return wa(Zi(n),Zi(t))}function rd(n,t,e){return yl(t,e)(n,void 0,n.length)}var q=null;function Gt(){return q}function Yn(n,t){return n}function tr(n,t){return n}function Jr(n,t){return n}function Gn(n,t){return n}function sr(n,t){for(var e=!0,r=n.length-1;r>=0;--r)if(n[r]!=t[r]){e=!1;break}return e}function fu(n,t){var e=Math.cos(t),r=Math.sin(t),o=n[1]*e+n[0]*r;return n[0]=n[0]*e-n[1]*r,n[1]=o,n}function Qt(n,t){if(t.canWrapX()){var e=Yi(t.getExtent()),r=function(n,t,e){var r=t.getExtent(),i=0;if(t.canWrapX()&&(n[0]<r[0]||n[0]>r[2])){var o=e||Yi(r);i=Math.floor((n[0]-r[0])/o)}return i}(n,t,e);r&&(n[0]-=r*e)}return n}function qd(n,t,e){return function(r,i,o,s,a){if(r){var c=t?0:o[0]*i,h=t?0:o[1]*i,p=a?a[0]:0,m=a?a[1]:0,E=n[0]+c/2+p,S=n[2]-c/2+p,x=n[1]+h/2+m,P=n[3]-h/2+m;E>S&&(S=E=(S+E)/2),x>P&&(P=x=(P+x)/2);var R=mt(r[0],E,S),F=mt(r[1],x,P),D=30*i;return s&&e&&(R+=-D*Math.log(1+Math.max(0,E-r[0])/D)+D*Math.log(1+Math.max(0,r[0]-S)/D),F+=-D*Math.log(1+Math.max(0,x-r[1])/D)+D*Math.log(1+Math.max(0,r[1]-P)/D)),[R,F]}}}function Do(n){return n}function Lu(n,t,e,r){var i=Yi(t)/e[0],o=yo(t)/e[1];return r?Math.min(n,Math.max(i,o)):Math.min(n,Math.min(i,o))}function Kl(n,t,e){var r=Math.min(n,t);return r*=Math.log(1+50*Math.max(0,n/t-1))/50+1,e&&(r=Math.max(r,e),r/=Math.log(1+50*Math.max(0,e/n-1))/50+1),mt(r,e/2,2*t)}function A(n,t,e,r,i){return function(o,s,a,c){if(void 0!==o){var h=r?Lu(n,r,a,i):n;return(void 0===e||e)&&c?Kl(o,h,t):mt(o,t,h)}}}function M(n){if(void 0!==n)return 0}function U(n){if(void 0!==n)return n}function De(n){return Math.pow(n,3)}function je(n){return 1-De(1-n)}function wt(n){return 3*n*n-2*n*n*n}function Ut(n){return n}mc(_r),mc(Vn),function(n,t,e,r){n.forEach(function(i){t.forEach(function(o){gi(i,o,e),gi(o,i,r)})})}(Vn,_r,function(n,t,e){var r=n.length,i=e>1?e:2,o=t;void 0===o&&(o=i>2?n.slice():new Array(r));for(var s=0;s<r;s+=i){o[s]=ce*n[s]/180;var a=rn*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>At?a=At:a<-At&&(a=-At),o[s+1]=a}return o},function(n,t,e){var r=n.length,i=e>1?e:2,o=t;void 0===o&&(o=i>2?n.slice():new Array(r));for(var s=0;s<r;s+=i)o[s]=180*n[s]/ce,o[s+1]=360*Math.atan(Math.exp(n[s+1]/rn))/Math.PI-90;return o});var bl,Er="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",yi=-1!==Er.indexOf("firefox"),Or=(-1!==Er.indexOf("safari")&&Er.indexOf("chrom"),-1!==Er.indexOf("webkit")&&-1==Er.indexOf("edge")),ci=-1!==Er.indexOf("macintosh"),Po="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,lo="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,pa="undefined"!=typeof Image&&Image.prototype.decode,Ps=function(){var n=!1;try{var t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(e){}return n}(),El=new Array(6);function cs(n){return ga(n,1,0,0,1,0,0)}function Ba(n,t){var e=n[0],r=n[1],i=n[2],o=n[3],s=n[4],a=n[5],c=t[0],h=t[1],p=t[2],m=t[3],E=t[4],S=t[5];return n[0]=e*c+i*h,n[1]=r*c+o*h,n[2]=e*p+i*m,n[3]=r*p+o*m,n[4]=e*E+i*S+s,n[5]=r*E+o*S+a,n}function ga(n,t,e,r,i,o,s){return n[0]=t,n[1]=e,n[2]=r,n[3]=i,n[4]=o,n[5]=s,n}function Lo(n,t){var e=t[0],r=t[1];return t[0]=n[0]*e+n[2]*r+n[4],t[1]=n[1]*e+n[3]*r+n[5],t}function ko(n,t,e){return Ba(n,ga(El,t,0,0,e,0,0))}function In(n,t,e,r,i,o,s,a){var c=Math.sin(o),h=Math.cos(o);return n[0]=r*h,n[1]=i*c,n[2]=-r*c,n[3]=i*h,n[4]=s*r*h-a*r*c+t,n[5]=s*i*c+a*i*h+e,n}function ii(n,t){var e=function(n){return n[0]*n[3]-n[1]*n[2]}(t);Nn(0!==e,32);var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],c=t[5];return n[0]=s/e,n[1]=-i/e,n[2]=-o/e,n[3]=r/e,n[4]=(o*c-s*a)/e,n[5]=-(r*c-i*a)/e,n}function ds(n){var t="matrix("+n.join(", ")+")";if(lo)return t;var e=bl||(bl=document.createElement("div"));return e.style.transform=t,e.style.transform}function Is(n,t,e,r,i,o){for(var s=o||[],a=0,c=t;c<e;c+=r){var h=n[c],p=n[c+1];s[a++]=i[0]*h+i[2]*p+i[4],s[a++]=i[1]*h+i[3]*p+i[5]}return o&&s.length!=a&&(s.length=a),s}function _o(n,t,e,r,i,o,s){for(var a=s||[],c=Math.cos(i),h=Math.sin(i),p=o[0],m=o[1],E=0,S=t;S<e;S+=r){var x=n[S]-p,P=n[S+1]-m;a[E++]=p+x*c-P*h,a[E++]=m+x*h+P*c;for(var R=S+2;R<S+r;++R)a[E++]=n[R]}return s&&a.length!=E&&(a.length=E),a}var od=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ua=[1,0,0,1,0,0];const Xd=function(n){function t(){var e=n.call(this)||this;return e.extent_=[1/0,1/0,-1/0,-1/0],e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=function(n){var e,r,i,t=!1;return function(){var o=Array.prototype.slice.call(arguments);return(!t||this!==i||!Me(o,r))&&(t=!0,i=this,r=o,e=n.apply(this,arguments)),e}}(function(r,i,o){if(!o)return this.getSimplifiedGeometry(i);var s=this.clone();return s.applyTransform(o),s.getSimplifiedGeometry(i)}),e}return od(t,n),t.prototype.simplifyTransformed=function(e,r){return this.simplifyTransformedInternal(this.getRevision(),e,r)},t.prototype.clone=function(){return Ht()},t.prototype.closestPointXY=function(e,r,i,o){return Ht()},t.prototype.containsXY=function(e,r){var i=this.getClosestPoint([e,r]);return i[0]===e&&i[1]===r},t.prototype.getClosestPoint=function(e,r){var i=r||[NaN,NaN];return this.closestPointXY(e[0],e[1],i,1/0),i},t.prototype.intersectsCoordinate=function(e){return this.containsXY(e[0],e[1])},t.prototype.computeExtent=function(e){return Ht()},t.prototype.getExtent=function(e){if(this.extentRevision_!=this.getRevision()){var r=this.computeExtent(this.extent_);(isNaN(r[0])||isNaN(r[1]))&&oe(r),this.extentRevision_=this.getRevision()}return function(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n}(this.extent_,e)},t.prototype.rotate=function(e,r){Ht()},t.prototype.scale=function(e,r,i){Ht()},t.prototype.simplify=function(e){return this.getSimplifiedGeometry(e*e)},t.prototype.getSimplifiedGeometry=function(e){return Ht()},t.prototype.getType=function(){return Ht()},t.prototype.applyTransform=function(e){Ht()},t.prototype.intersectsExtent=function(e){return Ht()},t.prototype.translate=function(e,r){Ht()},t.prototype.transform=function(e,r){var i=Zi(e),o=i.getUnits()==en.TILE_PIXELS?function(s,a,c){var h=i.getExtent(),p=i.getWorldExtent(),m=yo(p)/yo(h);return In(Ua,p[0],p[3],m,-m,0,0,0),Is(s,0,s.length,c,Ua,a),yl(i,r)(s,a,c)}:yl(i,r);return this.applyTransform(o),this},t}(Wn);var hb=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function ay(n){var t;return"XY"==n?t=2:"XYZ"==n||"XYM"==n?t=3:"XYZM"==n&&(t=4),t}const sd=function(n){function t(){var e=n.call(this)||this;return e.layout="XY",e.stride=2,e.flatCoordinates=null,e}return hb(t,n),t.prototype.computeExtent=function(e){return vt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},t.prototype.getCoordinates=function(){return Ht()},t.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.getFlatCoordinates=function(){return this.flatCoordinates},t.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},t.prototype.getLayout=function(){return this.layout},t.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var r=this.getSimplifiedGeometryInternal(e);return r.getFlatCoordinates().length<this.flatCoordinates.length?r:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)},t.prototype.getSimplifiedGeometryInternal=function(e){return this},t.prototype.getStride=function(){return this.stride},t.prototype.setFlatCoordinates=function(e,r){this.stride=ay(e),this.layout=e,this.flatCoordinates=r},t.prototype.setCoordinates=function(e,r){Ht()},t.prototype.setLayout=function(e,r,i){var o;if(e)o=ay(e);else{for(var s=0;s<i;++s){if(0===r.length)return this.layout="XY",void(this.stride=2);r=r[0]}e=function(n){var t;return 2==n?t="XY":3==n?t="XYZ":4==n&&(t="XYZM"),t}(o=r.length)}this.layout=e,this.stride=o},t.prototype.applyTransform=function(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},t.prototype.rotate=function(e,r){var i=this.getFlatCoordinates();if(i){var o=this.getStride();_o(i,0,i.length,o,e,r,i),this.changed()}},t.prototype.scale=function(e,r,i){var o=r;void 0===o&&(o=e);var s=i;s||(s=Xo(this.getExtent()));var a=this.getFlatCoordinates();if(a){var c=this.getStride();(function(n,t,e,r,i,o,s,a){for(var c=a||[],h=s[0],p=s[1],m=0,E=0;E<e;E+=r){var x=n[E+1]-p;c[m++]=h+i*(n[E]-h),c[m++]=p+o*x;for(var P=E+2;P<E+r;++P)c[m++]=n[P]}a&&c.length!=m&&(c.length=m)})(a,0,a.length,c,e,o,s,a),this.changed()}},t.prototype.translate=function(e,r){var i=this.getFlatCoordinates();if(i){var o=this.getStride();(function(n,t,e,r,i,o,s){for(var a=s||[],c=0,h=0;h<e;h+=r){a[c++]=n[h]+i,a[c++]=n[h+1]+o;for(var p=h+2;p<h+r;++p)a[c++]=n[p]}s&&a.length!=c&&(a.length=c)})(i,0,i.length,o,e,r,i),this.changed()}},t}(Xd);function Nm(n,t,e,r,i,o,s){var m,a=n[t],c=n[t+1],h=n[e]-a,p=n[e+1]-c;if(0===h&&0===p)m=t;else{var E=((i-a)*h+(o-c)*p)/(h*h+p*p);if(E>1)m=e;else{if(E>0){for(var S=0;S<r;++S)s[S]=Kr(n[t+S],n[e+S],E);return void(s.length=r)}m=t}}for(S=0;S<r;++S)s[S]=n[m+S];s.length=r}function mu(n,t,e,r,i){var o=n[t],s=n[t+1];for(t+=r;t<e;t+=r){var a=n[t],c=n[t+1],h=Sn(o,s,a,c);h>i&&(i=h),o=a,s=c}return i}function ng(n,t,e,r,i){for(var o=0,s=e.length;o<s;++o){var a=e[o];i=mu(n,t,a,r,i),t=a}return i}function ad(n,t,e,r,i,o,s,a,c,h,p){if(t==e)return h;var m,E;if(0===i){if((E=Sn(s,a,n[t],n[t+1]))<h){for(m=0;m<r;++m)c[m]=n[t+m];return c.length=r,E}return h}for(var S=p||[NaN,NaN],x=t+r;x<e;)if(Nm(n,x-r,x,r,s,a,S),(E=Sn(s,a,S[0],S[1]))<h){for(h=E,m=0;m<r;++m)c[m]=S[m];c.length=r,x+=r}else x+=r*Math.max((Math.sqrt(E)-Math.sqrt(h))/i|0,1);if(o&&(Nm(n,e-r,t,r,s,a,S),(E=Sn(s,a,S[0],S[1]))<h)){for(h=E,m=0;m<r;++m)c[m]=S[m];c.length=r}return h}function rg(n,t,e,r,i,o,s,a,c,h,p){for(var m=p||[NaN,NaN],E=0,S=e.length;E<S;++E){var x=e[E];h=ad(n,t,x,r,i,o,s,a,c,h,m),t=x}return h}function Lf(n,t,e,r){for(var i=0,o=e.length;i<o;++i)for(var s=e[i],a=0;a<r;++a)n[t++]=s[a];return t}function _c(n,t,e,r,i){for(var o=i||[],s=0,a=0,c=e.length;a<c;++a){var h=Lf(n,t,e[a],r);o[s++]=h,t=h}return o.length=s,o}function Ec(n,t,e,r,i,o,s){var a=(e-t)/r;if(a<3){for(;t<e;t+=r)o[s++]=n[t],o[s++]=n[t+1];return s}var c=new Array(a);c[0]=1,c[a-1]=1;for(var h=[t,e-r],p=0;h.length>0;){for(var m=h.pop(),E=h.pop(),S=0,x=n[E],P=n[E+1],R=n[m],F=n[m+1],D=E+r;D<m;D+=r){var X=Yt(n[D],n[D+1],x,P,R,F);X>S&&(p=D,S=X)}S>i&&(c[(p-t)/r]=1,E+r<p&&h.push(E,p),p+r<m&&h.push(p,m))}for(D=0;D<a;++D)c[D]&&(o[s++]=n[t+D*r],o[s++]=n[t+D*r+1]);return s}function Kd(n,t){return t*Math.round(n/t)}function Nf(n,t,e,r,i,o,s){if(t==e)return s;var h,p,a=Kd(n[t],i),c=Kd(n[t+1],i);t+=r,o[s++]=a,o[s++]=c;do{if(h=Kd(n[t],i),p=Kd(n[t+1],i),(t+=r)==e)return o[s++]=h,o[s++]=p,s}while(h==a&&p==c);for(;t<e;){var m=Kd(n[t],i),E=Kd(n[t+1],i);if(t+=r,m!=h||E!=p){var S=h-a,x=p-c,P=m-a,R=E-c;if(S*R==x*P&&(S<0&&P<S||S==P||S>0&&P>S)&&(x<0&&R<x||x==R||x>0&&R>x)){h=m,p=E;continue}o[s++]=h,o[s++]=p,a=h,c=p,h=m,p=E}}return o[s++]=h,o[s++]=p,s}function og(n,t,e,r,i,o,s,a){for(var c=0,h=e.length;c<h;++c){var p=e[c];s=Nf(n,t,p,r,i,o,s),a.push(s),t=p}return s}function bc(n,t,e,r,i){for(var o=void 0!==i?i:[],s=0,a=t;a<e;a+=r)o[s++]=n.slice(a,a+r);return o.length=s,o}function ld(n,t,e,r,i){for(var o=void 0!==i?i:[],s=0,a=0,c=e.length;a<c;++a){var h=e[a];o[s++]=bc(n,t,h,r,o[s]),t=h}return o.length=s,o}function uy(n,t,e,r,i){for(var o=void 0!==i?i:[],s=0,a=0,c=e.length;a<c;++a){var h=e[a];o[s++]=ld(n,t,h,r,o[s]),t=h[h.length-1]}return o.length=s,o}function jm(n,t,e,r){for(var i=0,o=n[e-r],s=n[e-r+1];t<e;t+=r){var a=n[t],c=n[t+1];i+=s*a-o*c,o=a,s=c}return i/2}function Um(n,t,e,r){for(var i=0,o=0,s=e.length;o<s;++o){var a=e[o];i+=jm(n,t,a,r),t=a}return i}var cy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Vm=function(n){function t(e,r){var i=n.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?i.setCoordinates(e,r):i.setFlatCoordinates(r,e),i}return cy(t,n),t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(e,r,i,o){return o<ys(this.getExtent(),e,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ad(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,r,i,o))},t.prototype.getArea=function(){return jm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinates=function(){return bc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getSimplifiedGeometryInternal=function(e){var r=[];return r.length=Ec(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r,0),new t(r,"XY")},t.prototype.getType=function(){return Wt.LINEAR_RING},t.prototype.intersectsExtent=function(e){return!1},t.prototype.setCoordinates=function(e,r){this.setLayout(r,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Lf(this.flatCoordinates,0,e,this.stride),this.changed()},t}(sd);var ag=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const B=function(n){function t(e,r){var i=n.call(this)||this;return i.setCoordinates(e,r),i}return ag(t,n),t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,r,i,o){var s=this.flatCoordinates,a=Sn(e,r,s[0],s[1]);if(a<o){for(var c=this.stride,h=0;h<c;++h)i[h]=s[h];return i.length=c,a}return o},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(e){return fe(this.flatCoordinates,e)},t.prototype.getType=function(){return Wt.POINT},t.prototype.intersectsExtent=function(e){return tt(e,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(e,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(n,t,e,r){for(var i=0,o=e.length;i<o;++i)n[t++]=e[i];return t}(this.flatCoordinates,0,e),this.changed()},t}(sd);function k(n,t,e,r,i){return!Oo(i,function(s){return!O(n,t,e,r,s[0],s[1])})}function O(n,t,e,r,i,o){for(var s=0,a=n[e-r],c=n[e-r+1];t<e;t+=r){var h=n[t],p=n[t+1];c<=o?p>o&&(h-a)*(o-c)-(i-a)*(p-c)>0&&s++:p<=o&&(h-a)*(o-c)-(i-a)*(p-c)<0&&s--,a=h,c=p}return 0!==s}function z(n,t,e,r,i,o){if(0===e.length||!O(n,t,e[0],r,i,o))return!1;for(var s=1,a=e.length;s<a;++s)if(O(n,e[s-1],e[s],r,i,o))return!1;return!0}function ae(n,t,e,r,i,o,s){for(var a,c,h,p,m,E,S,x=i[o+1],P=[],R=0,F=e.length;R<F;++R){var D=e[R];for(p=n[D-r],E=n[D-r+1],a=t;a<D;a+=r)m=n[a],S=n[a+1],(x<=E&&S<=x||E<=x&&x<=S)&&P.push(h=(x-E)/(S-E)*(m-p)+p),p=m,E=S}var j=NaN,G=-1/0;for(P.sort(at),p=P[0],a=1,c=P.length;a<c;++a){m=P[a];var X=Math.abs(m-p);X>G&&z(n,t,e,r,h=(p+m)/2,x)&&(j=h,G=X),p=m}return isNaN(j)&&(j=i[o]),s?(s.push(j,x,G),s):[j,x,G]}function Ne(n,t,e,r,i){for(var o=[],s=0,a=e.length;s<a;++s){var c=e[s];o=ae(n,t,c,r,i,2*s,o),t=c[c.length-1]}return o}function et(n,t,e,r,i){for(var a,o=[n[t],n[t+1]],s=[];t+r<e;t+=r){if(s[0]=n[t+r],s[1]=n[t+r+1],a=i(o,s))return a;o[0]=s[0],o[1]=s[1]}return!1}function jt(n,t,e,r,i){var o=Jn([1/0,1/0,-1/0,-1/0],n,t,e,r);return!!Oi(i,o)&&(!!(Zn(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3])||et(n,t,e,r,function(s,a){return function(n,t,e){var r=!1,i=Je(n,t),o=Je(n,e);if(1===i||1===o)r=!0;else{var s=n[0],a=n[1],c=n[2],h=n[3],E=e[0],S=e[1],x=(S-t[1])/(E-t[0]),P=void 0,R=void 0;!!(2&o)&&!(2&i)&&(r=(P=E-(S-h)/x)>=s&&P<=c),r||!(4&o)||4&i||(r=(R=S-(E-c)*x)>=a&&R<=h),r||!(8&o)||8&i||(r=(P=E-(S-a)/x)>=s&&P<=c),!r&&16&o&&!(16&i)&&(r=(R=S-(E-s)*x)>=a&&R<=h)}return r}(i,s,a)}))}function oi(n,t,e,r,i){if(!function(n,t,e,r,i){return!!(jt(n,t,e,r,i)||O(n,t,e,r,i[0],i[1])||O(n,t,e,r,i[0],i[3])||O(n,t,e,r,i[2],i[1])||O(n,t,e,r,i[2],i[3]))}(n,t,e[0],r,i))return!1;if(1===e.length)return!0;for(var o=1,s=e.length;o<s;++o)if(k(n,e[o-1],e[o],r,i)&&!jt(n,e[o-1],e[o],r,i))return!1;return!0}function no(n,t,e,r){for(;t<e-r;){for(var i=0;i<r;++i){var o=n[t+i];n[t+i]=n[e-r+i],n[e-r+i]=o}t+=r,e-=r}}function Nu(n,t,e,r){for(var i=0,o=n[e-r],s=n[e-r+1];t<e;t+=r){var a=n[t],c=n[t+1];i+=(a-o)*(c+s),o=a,s=c}return 0===i?void 0:i>0}function Va(n,t,e,r,i){for(var o=void 0!==i&&i,s=0,a=e.length;s<a;++s){var c=e[s],h=Nu(n,t,c,r);if(0===s){if(o&&h||!o&&!h)return!1}else if(o&&!h||!o&&h)return!1;t=c}return!0}function xl(n,t,e,r,i){for(var o=void 0!==i&&i,s=0,a=e.length;s<a;++s){var c=e[s],h=Nu(n,t,c,r);(0===s?o&&h||!o&&!h:o&&!h||!o&&h)&&no(n,t,c,r),t=c}return t}function fo(n,t,e,r,i){for(var o=0,s=e.length;o<s;++o)t=xl(n,t,e[o],r,i);return t}var Zl=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),wc=function(n){function t(e,r,i){var o=n.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==r&&i?(o.setFlatCoordinates(r,e),o.ends_=i):o.setCoordinates(e,r),o}return Zl(t,n),t.prototype.appendLinearRing=function(e){this.flatCoordinates?Be(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,r,i,o){return o<ys(this.getExtent(),e,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ng(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rg(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,r,i,o))},t.prototype.containsXY=function(e,r){return z(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,r)},t.prototype.getArea=function(){return Um(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},t.prototype.getCoordinates=function(e){var r;return void 0!==e?xl(r=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,e):r=this.flatCoordinates,ld(r,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var e=Xo(this.getExtent());this.flatInteriorPoint_=ae(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},t.prototype.getInteriorPoint=function(){return new B(this.getFlatInteriorPoint(),"XYM")},t.prototype.getLinearRingCount=function(){return this.ends_.length},t.prototype.getLinearRing=function(e){return e<0||this.ends_.length<=e?null:new Vm(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)},t.prototype.getLinearRings=function(){for(var e=this.layout,r=this.flatCoordinates,i=this.ends_,o=[],s=0,a=0,c=i.length;a<c;++a){var h=i[a],p=new Vm(r.slice(s,h),e);o.push(p),s=h}return o},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;Va(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=xl(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(e){var r=[],i=[];return r.length=og(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),r,0,i),new t(r,"XY",i)},t.prototype.getType=function(){return Wt.POLYGON},t.prototype.intersectsExtent=function(e){return oi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)},t.prototype.setCoordinates=function(e,r){this.setLayout(r,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=_c(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},t}(sd);const za=wc;function dy(n){var t=n[0],e=n[1],r=n[2],i=n[3],o=[t,e,t,i,r,i,r,e,t,e];return new wc(o,"XY",[o.length])}var DI=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function ud(n,t){setTimeout(function(){n(t)},0)}function Ff(n){return!(n.sourceCenter&&n.targetCenter&&!sr(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Gf(n,t,e,r,i){var o=Math.cos(-i),s=Math.sin(-i),a=n[0]*o-n[1]*s,c=n[1]*o+n[0]*s;return[(a+=(t[0]/2-e[0])*r)*o-(c+=(e[1]-t[1]/2)*r)*(s=-s),c*o+a*s]}const US=function(n){function t(e){var r=n.call(this)||this,i=xt({},e);return r.hints_=[0,0],r.animations_=[],r.projection_=du(i.projection,"EPSG:3857"),r.viewportSize_=[100,100],r.targetCenter_=null,r.cancelAnchor_=void 0,i.center&&(i.center=tr(i.center)),i.extent&&(i.extent=Gn(i.extent)),r.applyOptions_(i),r}return DI(t,n),t.prototype.applyOptions_=function(e){var i=function(n){var t,e,r,s=void 0!==n.minZoom?n.minZoom:0,a=void 0!==n.maxZoom?n.maxZoom:28,c=void 0!==n.zoomFactor?n.zoomFactor:2,h=void 0!==n.multiWorld&&n.multiWorld,p=void 0===n.smoothResolutionConstraint||n.smoothResolutionConstraint,m=void 0!==n.showFullExtent&&n.showFullExtent,E=du(n.projection,"EPSG:3857"),S=E.getExtent(),x=n.constrainOnlyCenter,P=n.extent;if(!h&&!P&&E.isGlobal()&&(x=!1,P=S),void 0!==n.resolutions){var R=n.resolutions;e=R[s],r=void 0!==R[a]?R[a]:R[R.length-1],t=n.constrainResolution?function(n,t,e,r){return function(i,o,s,a){if(void 0!==i){var c=n[0],h=n[n.length-1],p=e?Lu(c,e,s,r):c;if(a)return void 0===t||t?Kl(i,p,h):mt(i,h,p);var E=Math.min(p,i),S=Math.floor(Se(n,E,o));return n[S]>p&&S<n.length-1?n[S+1]:n[S]}}}(R,p,!x&&P,m):A(e,r,p,!x&&P,m)}else{var D=(S?Math.max(Yi(S),yo(S)):360*wr[en.DEGREES]/E.getMetersPerUnit())/256/Math.pow(2,0),j=D/Math.pow(2,28);void 0!==(e=n.maxResolution)?s=0:e=D/Math.pow(c,s),void 0===(r=n.minResolution)&&(r=void 0!==n.maxZoom?void 0!==n.maxResolution?e/Math.pow(c,a):D/Math.pow(c,a):j),a=s+Math.floor(Math.log(e/r)/Math.log(c)),r=e/Math.pow(c,a-s),t=n.constrainResolution?function(n,t,e,r,i,o){return function(s,a,c,h){if(void 0!==s){var p=i?Lu(t,i,c,o):t,m=void 0!==e?e:0;if(h)return void 0===r||r?Kl(s,p,m):mt(s,m,p);var x=Math.ceil(Math.log(t/p)/Math.log(n)-1e-9),P=-a*(.5-1e-9)+.5,R=Math.min(p,s),F=Math.floor(Math.log(t/R)/Math.log(n)+P),D=Math.max(x,F);return mt(t/Math.pow(n,D),m,p)}}}(c,e,r,p,!x&&P,m):A(e,r,p,!x&&P,m)}return{constraint:t,maxResolution:e,minResolution:r,minZoom:s,zoomFactor:c}}(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;var o=function(n){if(void 0!==n.extent)return qd(n.extent,n.constrainOnlyCenter,void 0===n.smoothExtentConstraint||n.smoothExtentConstraint);var e=du(n.projection,"EPSG:3857");if(!0!==n.multiWorld&&e.isGlobal()){var r=e.getExtent().slice();return r[0]=-1/0,r[2]=1/0,qd(r,!1,!1)}return Do}(e),s=i.constraint,a=function(n){if(void 0===n.enableRotation||n.enableRotation){var e=n.constrainRotation;return void 0===e||!0===e?function(n){var t=Yr(5);return function(e,r){return r?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}():!1===e?U:"number"==typeof e?function(n){var t=2*Math.PI/n;return function(e,r){return r?e:void 0!==e?e=Math.floor(e/t+.5)*t:void 0}}(e):U}return M}(e);this.constraints_={center:o,resolution:s,rotation:a},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom),this.setProperties({}),this.options_=e},Object.defineProperty(t.prototype,"padding",{get:function(){return this.padding_},set:function(e){var r=this.padding_;this.padding_=e;var i=this.getCenter();if(i){var o=e||[0,0,0,0];r=r||[0,0,0,0];var s=this.getResolution();this.setCenterInternal([i[0]+s/2*(o[3]-r[3]+r[1]-o[1]),i[1]-s/2*(o[0]-r[0]+r[2]-o[2])])}},enumerable:!1,configurable:!0}),t.prototype.getUpdatedOptions_=function(e){var r=xt({},this.options_);return void 0!==r.resolution?r.resolution=this.getResolution():r.zoom=this.getZoom(),r.center=this.getCenterInternal(),r.rotation=this.getRotation(),xt({},r,e)},t.prototype.animate=function(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var r=new Array(arguments.length),i=0;i<r.length;++i){var o=arguments[i];o.center&&((o=xt({},o)).center=tr(o.center,this.getProjection())),o.anchor&&((o=xt({},o)).anchor=tr(o.anchor,this.getProjection())),r[i]=o}this.animateInternal.apply(this,r)},t.prototype.animateInternal=function(e){var i,r=arguments.length;if(r>1&&"function"==typeof arguments[r-1]&&(i=arguments[r-1],--r),!this.isDef()){var o=arguments[r-1];return o.center&&this.setCenterInternal(o.center),void 0!==o.zoom&&this.setZoom(o.zoom),void 0!==o.rotation&&this.setRotation(o.rotation),void(i&&ud(i,!0))}for(var s=Date.now(),a=this.targetCenter_.slice(),c=this.targetResolution_,h=this.targetRotation_,p=[],m=0;m<r;++m){var E=arguments[m],S={start:s,complete:!1,anchor:E.anchor,duration:void 0!==E.duration?E.duration:1e3,easing:E.easing||wt,callback:i};if(E.center&&(S.sourceCenter=a,S.targetCenter=E.center.slice(),a=S.targetCenter),void 0!==E.zoom?(S.sourceResolution=c,S.targetResolution=this.getResolutionForZoom(E.zoom),c=S.targetResolution):E.resolution&&(S.sourceResolution=c,S.targetResolution=E.resolution,c=S.targetResolution),void 0!==E.rotation){S.sourceRotation=h;var x=kr(E.rotation-h+Math.PI,2*Math.PI)-Math.PI;S.targetRotation=h+x,h=S.targetRotation}Ff(S)?S.complete=!0:s+=S.duration,p.push(S)}this.animations_.push(p),this.setHint(0,1),this.updateAnimations_()},t.prototype.getAnimating=function(){return this.hints_[0]>0},t.prototype.getInteracting=function(){return this.hints_[1]>0},t.prototype.cancelAnimations=function(){this.setHint(0,-this.hints_[0]);for(var e,r=0,i=this.animations_.length;r<i;++r){var o=this.animations_[r];if(o[0].callback&&ud(o[0].callback,!1),!e)for(var s=0,a=o.length;s<a;++s){var c=o[s];if(!c.complete){e=c.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e},t.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var e=Date.now(),r=!1,i=this.animations_.length-1;i>=0;--i){for(var o=this.animations_[i],s=!0,a=0,c=o.length;a<c;++a){var h=o[a];if(!h.complete){var m=h.duration>0?(e-h.start)/h.duration:1;m>=1?(h.complete=!0,m=1):s=!1;var E=h.easing(m);if(h.sourceCenter){var S=h.sourceCenter[0],x=h.sourceCenter[1];this.targetCenter_=[S+E*(h.targetCenter[0]-S),x+E*(h.targetCenter[1]-x)]}if(h.sourceResolution&&h.targetResolution){var j=1===E?h.targetResolution:h.sourceResolution+E*(h.targetResolution-h.sourceResolution);if(h.anchor){var G=this.getViewportSize_(this.getRotation()),X=this.constraints_.resolution(j,0,G,!0);this.targetCenter_=this.calculateCenterZoom(X,h.anchor)}this.targetResolution_=j,this.applyTargetState_(!0)}if(void 0!==h.sourceRotation&&void 0!==h.targetRotation){var J=1===E?kr(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+E*(h.targetRotation-h.sourceRotation);if(h.anchor){var $=this.constraints_.rotation(J,!0);this.targetCenter_=this.calculateCenterRotate($,h.anchor)}this.targetRotation_=J}if(this.applyTargetState_(!0),r=!0,!h.complete)break}}if(s){this.animations_[i]=null,this.setHint(0,-1);var le=o[0].callback;le&&ud(le,!0)}}this.animations_=this.animations_.filter(Boolean),r&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},t.prototype.calculateCenterRotate=function(e,r){var i,o=this.getCenterInternal();return void 0!==o&&(fu(i=[o[0]-r[0],o[1]-r[1]],e-this.getRotation()),function(n,t){n[0]+=+t[0],n[1]+=+t[1]}(i,r)),i},t.prototype.calculateCenterZoom=function(e,r){var i,o=this.getCenterInternal(),s=this.getResolution();return void 0!==o&&void 0!==s&&(i=[r[0]-e*(r[0]-o[0])/s,r[1]-e*(r[1]-o[1])/s]),i},t.prototype.getViewportSize_=function(e){var r=this.viewportSize_;if(e){var i=r[0],o=r[1];return[Math.abs(i*Math.cos(e))+Math.abs(o*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(o*Math.cos(e))]}return r},t.prototype.setViewportSize=function(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},t.prototype.getCenter=function(){var e=this.getCenterInternal();return e&&Yn(e,this.getProjection())},t.prototype.getCenterInternal=function(){return this.get("center")},t.prototype.getConstraints=function(){return this.constraints_},t.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},t.prototype.getHints=function(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()},t.prototype.calculateExtent=function(e){return Jr(this.calculateExtentInternal(e),this.getProjection())},t.prototype.calculateExtentInternal=function(e){var r=e||this.getViewportSizeMinusPadding_(),i=this.getCenterInternal();Nn(i,1);var o=this.getResolution();Nn(void 0!==o,2);var s=this.getRotation();return Nn(void 0!==s,3),ao(i,o,s,r)},t.prototype.getMaxResolution=function(){return this.maxResolution_},t.prototype.getMinResolution=function(){return this.minResolution_},t.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},t.prototype.setMaxZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))},t.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},t.prototype.setMinZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))},t.prototype.setConstrainResolution=function(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolution=function(){return this.get("resolution")},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getResolutionForExtent=function(e,r){return this.getResolutionForExtentInternal(Gn(e,this.getProjection()),r)},t.prototype.getResolutionForExtentInternal=function(e,r){var i=r||this.getViewportSizeMinusPadding_(),o=Yi(e)/i[0],s=yo(e)/i[1];return Math.max(o,s)},t.prototype.getResolutionForValueFunction=function(e){var r=e||2,i=this.getConstrainedResolution(this.maxResolution_),s=Math.log(i/this.minResolution_)/Math.log(r);return function(a){return i/Math.pow(r,a*s)}},t.prototype.getRotation=function(){return this.get("rotation")},t.prototype.getValueForResolutionFunction=function(e){var r=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),s=Math.log(i/this.minResolution_)/r;return function(a){return Math.log(i/a)/r/s}},t.prototype.getViewportSizeMinusPadding_=function(e){var r=this.getViewportSize_(e),i=this.padding_;return i&&(r=[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]),r},t.prototype.getState=function(){var e=this.getProjection(),r=this.getResolution(),i=this.getRotation(),o=this.getCenterInternal(),s=this.padding_;if(s){var a=this.getViewportSizeMinusPadding_();o=Gf(o,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],r,i)}return{center:o.slice(0),projection:void 0!==e?e:null,resolution:r,rotation:i,zoom:this.getZoom()}},t.prototype.getZoom=function(){var e,r=this.getResolution();return void 0!==r&&(e=this.getZoomForResolution(r)),e},t.prototype.getZoomForResolution=function(e){var i,o,r=this.minZoom_||0;if(this.resolutions_){var s=Se(this.resolutions_,e,1);r=s,i=this.resolutions_[s],o=s==this.resolutions_.length-1?2:i/this.resolutions_[s+1]}else i=this.maxResolution_,o=this.zoomFactor_;return r+Math.log(i/e)/Math.log(o)},t.prototype.getResolutionForZoom=function(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var r=mt(Math.floor(e),0,this.resolutions_.length-2);return this.resolutions_[r]/Math.pow(this.resolutions_[r]/this.resolutions_[r+1],mt(e-r,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)},t.prototype.fit=function(e,r){var i;if(Nn(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,24),Array.isArray(e))Nn(!pl(e),25),i=dy(o=Gn(e,this.getProjection()));else if(e.getType()===Wt.CIRCLE){var o;(i=dy(o=Gn(e.getExtent(),this.getProjection()))).rotate(this.getRotation(),Xo(o))}else{var s=Gt();i=s?e.clone().transform(s,this.getProjection()):e}this.fitInternal(i,r)},t.prototype.rotatedExtentForGeometry=function(e){for(var r=this.getRotation(),i=Math.cos(r),o=Math.sin(-r),s=e.getFlatCoordinates(),a=e.getStride(),c=1/0,h=1/0,p=-1/0,m=-1/0,E=0,S=s.length;E<S;E+=a){var x=s[E]*i-s[E+1]*o,P=s[E]*o+s[E+1]*i;c=Math.min(c,x),h=Math.min(h,P),p=Math.max(p,x),m=Math.max(m,P)}return[c,h,p,m]},t.prototype.fitInternal=function(e,r){var i=r||{},o=i.size;o||(o=this.getViewportSizeMinusPadding_());var c,s=void 0!==i.padding?i.padding:[0,0,0,0],a=void 0!==i.nearest&&i.nearest;c=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;var h=this.rotatedExtentForGeometry(e),p=this.getResolutionForExtentInternal(h,[o[0]-s[1]-s[3],o[1]-s[0]-s[2]]);p=isNaN(p)?c:Math.max(p,c),p=this.getConstrainedResolution(p,a?0:1);var m=this.getRotation(),E=Math.sin(m),S=Math.cos(m),x=Xo(h);x[0]+=(s[1]-s[3])/2*p,x[1]+=(s[0]-s[2])/2*p;var F=this.getConstrainedCenter([x[0]*S-x[1]*E,x[1]*S+x[0]*E],p),D=i.callback?i.callback:it;void 0!==i.duration?this.animateInternal({resolution:p,center:F,duration:i.duration,easing:i.easing},D):(this.targetResolution_=p,this.targetCenter_=F,this.applyTargetState_(!1,!0),ud(D,!0))},t.prototype.centerOn=function(e,r,i){this.centerOnInternal(tr(e,this.getProjection()),r,i)},t.prototype.centerOnInternal=function(e,r,i){this.setCenterInternal(Gf(e,r,i,this.getResolution(),this.getRotation()))},t.prototype.calculateCenterShift=function(e,r,i,o){var s,a=this.padding_;if(a&&e){var c=this.getViewportSizeMinusPadding_(-i),h=Gf(e,o,[c[0]/2+a[3],c[1]/2+a[0]],r,i);s=[e[0]-h[0],e[1]-h[1]]}return s},t.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},t.prototype.adjustCenter=function(e){var r=Yn(this.targetCenter_,this.getProjection());this.setCenter([r[0]+e[0],r[1]+e[1]])},t.prototype.adjustCenterInternal=function(e){var r=this.targetCenter_;this.setCenterInternal([r[0]+e[0],r[1]+e[1]])},t.prototype.adjustResolution=function(e,r){var i=r&&tr(r,this.getProjection());this.adjustResolutionInternal(e,i)},t.prototype.adjustResolutionInternal=function(e,r){var i=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,o,i);r&&(this.targetCenter_=this.calculateCenterZoom(s,r)),this.targetResolution_*=e,this.applyTargetState_()},t.prototype.adjustZoom=function(e,r){this.adjustResolution(Math.pow(this.zoomFactor_,-e),r)},t.prototype.adjustRotation=function(e,r){r&&(r=tr(r,this.getProjection())),this.adjustRotationInternal(e,r)},t.prototype.adjustRotationInternal=function(e,r){var i=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+e,i);r&&(this.targetCenter_=this.calculateCenterRotate(o,r)),this.targetRotation_+=e,this.applyTargetState_()},t.prototype.setCenter=function(e){this.setCenterInternal(tr(e,this.getProjection()))},t.prototype.setCenterInternal=function(e){this.targetCenter_=e,this.applyTargetState_()},t.prototype.setHint=function(e,r){return this.hints_[e]+=r,this.changed(),this.hints_[e]},t.prototype.setResolution=function(e){this.targetResolution_=e,this.applyTargetState_()},t.prototype.setRotation=function(e){this.targetRotation_=e,this.applyTargetState_()},t.prototype.setZoom=function(e){this.setResolution(this.getResolutionForZoom(e))},t.prototype.applyTargetState_=function(e,r){var i=this.getAnimating()||this.getInteracting()||r,o=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,0,s,i),c=this.constraints_.center(this.targetCenter_,a,s,i,this.calculateCenterShift(this.targetCenter_,a,o,s));this.get("rotation")!==o&&this.set("rotation",o),this.get("resolution")!==a&&this.set("resolution",a),(!this.get("center")||!sr(this.get("center"),c))&&this.set("center",c),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0},t.prototype.resolveConstraints=function(e,r,i){var o=void 0!==e?e:200,s=r||0,a=this.constraints_.rotation(this.targetRotation_),c=this.getViewportSize_(a),h=this.constraints_.resolution(this.targetResolution_,s,c),p=this.constraints_.center(this.targetCenter_,h,c,!1,this.calculateCenterShift(this.targetCenter_,h,a,c));if(0===o&&!this.cancelAnchor_)return this.targetResolution_=h,this.targetRotation_=a,this.targetCenter_=p,void this.applyTargetState_();var m=i||(0===o?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==h||this.getRotation()!==a||!this.getCenterInternal()||!sr(this.getCenterInternal(),p))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:a,center:p,resolution:h,duration:o,easing:je,anchor:m}))},t.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},t.prototype.endInteraction=function(e,r,i){var o=i&&tr(i,this.getProjection());this.endInteractionInternal(e,r,o)},t.prototype.endInteractionInternal=function(e,r,i){this.setHint(1,-1),this.resolveConstraints(e,r,i)},t.prototype.getConstrainedCenter=function(e,r){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,r||this.getResolution(),i)},t.prototype.getConstrainedZoom=function(e,r){var i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,r))},t.prototype.getConstrainedResolution=function(e,r){var i=r||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,i,o)},t}(Wn);var Rh=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Eo=/^([a-z]*)$|^hsla?\(.*\)$/i;function Fu(n){return"string"==typeof n?n:Us(n)}var t,e,No=(t={},e=0,function(r){var i;if(t.hasOwnProperty(r))i=t[r];else{if(e>=1024){var o=0;for(var s in t)0==(3&o++)&&(delete t[s],--e)}i=function(n){var t,e,r,i,o;if(Eo.exec(n)&&(n=function(n){var t=document.createElement("div");if(t.style.color=n,""!==t.style.color){document.body.appendChild(t);var e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}(n)),Rh.exec(n)){var a,s=n.length-1;a=s<=4?1:2;var c=4===s||8===s;t=parseInt(n.substr(1+0*a,a),16),e=parseInt(n.substr(1+1*a,a),16),r=parseInt(n.substr(1+2*a,a),16),i=c?parseInt(n.substr(1+3*a,a),16):255,1==a&&(t=(t<<4)+t,e=(e<<4)+e,r=(r<<4)+r,c&&(i=(i<<4)+i)),o=[t,e,r,i/255]}else 0==n.indexOf("rgba(")?fy(o=n.slice(5,-1).split(",").map(Number)):0==n.indexOf("rgb(")?((o=n.slice(4,-1).split(",").map(Number)).push(1),fy(o)):Nn(!1,14);return o}(r),t[r]=i,++e}return i});function Ca(n){return Array.isArray(n)?n:No(n)}function fy(n){return n[0]=mt(n[0]+.5|0,0,255),n[1]=mt(n[1]+.5|0,0,255),n[2]=mt(n[2]+.5|0,0,255),n[3]=mt(n[3],0,1),n}function Us(n){var t=n[0];t!=(0|t)&&(t=t+.5|0);var e=n[1];e!=(0|e)&&(e=e+.5|0);var r=n[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+t+","+e+","+r+","+(void 0===n[3]?1:n[3])+")"}function dg(n,t,e){return t+":"+n+":"+(e?Fu(e):"null")}var Cc=new(function(){function n(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return n.prototype.clear=function(){this.cache_={},this.cacheSize_=0},n.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},n.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_)0==(3&t++)&&!this.cache_[e].hasListener()&&(delete this.cache_[e],--this.cacheSize_)}},n.prototype.get=function(t,e,r){var i=dg(t,e,r);return i in this.cache_?this.cache_[i]:null},n.prototype.set=function(t,e,r,i){var o=dg(t,e,r);this.cache_[o]=i,++this.cacheSize_},n.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},n}());var VS=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Bf=function(n){function t(e){var r=n.call(this)||this,i=xt({},e);return"object"==typeof e.properties&&(delete i.properties,xt(i,e.properties)),i.opacity=void 0!==e.opacity?e.opacity:1,Nn("number"==typeof i.opacity,64),i.visible=void 0===e.visible||e.visible,i.zIndex=e.zIndex,i.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,i.minResolution=void 0!==e.minResolution?e.minResolution:0,i.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,i.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,r.className_=void 0!==i.className?e.className:"ol-layer",delete i.className,r.setProperties(i),r.state_=null,r}return VS(t,n),t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(e){var r=this.state_||{layer:this,managed:void 0===e||e},i=this.getZIndex();return r.opacity=mt(Math.round(100*this.getOpacity())/100,0,1),r.sourceState=this.getSourceState(),r.visible=this.getVisible(),r.extent=this.getExtent(),r.zIndex=void 0!==i||r.managed?i:1/0,r.maxResolution=this.getMaxResolution(),r.minResolution=Math.max(this.getMinResolution(),0),r.minZoom=this.getMinZoom(),r.maxZoom=this.getMaxZoom(),this.state_=r,r},t.prototype.getLayersArray=function(e){return Ht()},t.prototype.getLayerStatesArray=function(e){return Ht()},t.prototype.getExtent=function(){return this.get("extent")},t.prototype.getMaxResolution=function(){return this.get("maxResolution")},t.prototype.getMinResolution=function(){return this.get("minResolution")},t.prototype.getMinZoom=function(){return this.get("minZoom")},t.prototype.getMaxZoom=function(){return this.get("maxZoom")},t.prototype.getOpacity=function(){return this.get("opacity")},t.prototype.getSourceState=function(){return Ht()},t.prototype.getVisible=function(){return this.get("visible")},t.prototype.getZIndex=function(){return this.get("zIndex")},t.prototype.setExtent=function(e){this.set("extent",e)},t.prototype.setMaxResolution=function(e){this.set("maxResolution",e)},t.prototype.setMinResolution=function(e){this.set("minResolution",e)},t.prototype.setMaxZoom=function(e){this.set("maxZoom",e)},t.prototype.setMinZoom=function(e){this.set("minZoom",e)},t.prototype.setOpacity=function(e){Nn("number"==typeof e,64),this.set("opacity",e)},t.prototype.setVisible=function(e){this.set("visible",e)},t.prototype.setZIndex=function(e){this.set("zIndex",e)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),n.prototype.disposeInternal.call(this)},t}(Wn);var zm=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function dd(n,t){if(!n.visible)return!1;var e=t.resolution;if(e<n.minResolution||e>=n.maxResolution)return!1;var r=t.zoom;return r>n.minZoom&&r<=n.maxZoom}const hd=function(n){function t(e){var r=this,i=xt({},e);return delete i.source,(r=n.call(this,i)||this).mapPrecomposeKey_=null,r.mapRenderKey_=null,r.sourceChangeKey_=null,r.renderer_=null,e.render&&(r.render=e.render),e.map&&r.setMap(e.map),r.addChangeListener("source",r.handleSourcePropertyChange_),r.setSource(e.source?e.source:null),r}return zm(t,n),t.prototype.getLayersArray=function(e){var r=e||[];return r.push(this),r},t.prototype.getLayerStatesArray=function(e){var r=e||[];return r.push(this.getLayerState()),r},t.prototype.getSource=function(){return this.get("source")||null},t.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():"undefined"},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(un(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=mn(e,"change",this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(function(r){return r([])})},t.prototype.render=function(e,r){var i=this.getRenderer();if(i.prepareFrame(e))return i.renderFrame(e,r)},t.prototype.setMap=function(e){this.mapPrecomposeKey_&&(un(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(un(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=mn(e,"precompose",function(r){var o=r.frameState.layerStatesArray,s=this.getLayerState(!1);Nn(!o.some(function(a){return a.layer===s.layer}),67),o.push(s)},this),this.mapRenderKey_=mn(this,"change",e.render,e),this.changed())},t.prototype.setSource=function(e){this.set("source",e)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.setSource(null),n.prototype.disposeInternal.call(this)},t}(Bf);var jf=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function hg(n,t){Cc.expire()}const gy=function(n){function t(e){var r=n.call(this)||this;return r.map_=e,r}return jf(t,n),t.prototype.dispatchRenderEvent=function(e,r){Ht()},t.prototype.calculateMatrices2D=function(e){var r=e.viewState,i=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;In(i,e.size[0]/2,e.size[1]/2,1/r.resolution,-1/r.resolution,-r.rotation,-r.center[0],-r.center[1]),ii(o,i)},t.prototype.forEachFeatureAtCoordinate=function(e,r,i,o,s,a,c,h){var p,m=r.viewState;function E(dt,kt,Qe,Zt){return s.call(a,kt,dt?Qe:null,Zt)}var S=m.projection,x=Qt(e.slice(),S),P=[[0,0]];if(S.canWrapX()&&o){var F=Yi(S.getExtent());P.push([-F,0],[F,0])}for(var D=r.layerStatesArray,j=D.length,G=[],X=[],J=0;J<P.length;J++)for(var $=j-1;$>=0;--$){var le=D[$],ie=le.layer;if(ie.hasRenderer()&&dd(le,m)&&c.call(h,ie)){var Fe=ie.getRenderer(),Ce=ie.getSource();if(Fe&&Ce){var $e=Ce.getWrapX()?x:e,ot=E.bind(null,le.managed);X[0]=$e[0]+P[J][0],X[1]=$e[1]+P[J][1],p=Fe.forEachFeatureAtCoordinate(X,r,i,ot,G)}if(p)return p}}if(0!==G.length){var st=1/G.length;return G.forEach(function(dt,kt){return dt.distanceSq+=kt*st}),G.sort(function(dt,kt){return dt.distanceSq-kt.distanceSq}),G.some(function(dt){return p=dt.callback(dt.feature,dt.layer,dt.geometry)}),p}},t.prototype.forEachLayerAtPixel=function(e,r,i,o,s){return Ht()},t.prototype.hasFeatureAtCoordinate=function(e,r,i,o,s,a){return void 0!==this.forEachFeatureAtCoordinate(e,r,i,o,Ue,this,s,a)},t.prototype.getMap=function(){return this.map_},t.prototype.renderFrame=function(e){Ht()},t.prototype.scheduleExpireIconCache=function(e){Cc.canExpireCache()&&e.postRenderFunctions.push(hg)},t}(Ge);var Gu=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Hm=function(n){function t(e,r,i,o){var s=n.call(this,e)||this;return s.inversePixelTransform=r,s.frameState=i,s.context=o,s}return Gu(t,n),t}(xe);var Wm="ol-hidden",Ym="ol-unselectable",Uf="ol-control",Zd="ol-collapsed",NI=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),As=["style","variant","weight","size","lineHeight","family"],yb=function(n){var t=n.match(NI);if(!t)return null;for(var e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,i=As.length;r<i;++r){var o=t[r+1];void 0!==o&&(e[As[r]]=o)}return e.families=e.family.split(/,\s?/),e};function Tl(n,t,e,r){var i=e&&e.length?e.shift():lo?new OffscreenCanvas(n||300,t||300):document.createElement("canvas");return n&&(i.width=n),t&&(i.height=t),i.getContext("2d",r)}function HS(n,t){var e=t.parentNode;e&&e.replaceChild(n,t)}function _y(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}var Lh="10px sans-serif",Ha="#000",Vf="round",Jl=[],kh="round",Jd="#000",zf="center",qm="middle",Fh=[0,0,0,0],Pl=new Wn,Ey=new tn;Ey.setSize=function(){console.warn("labelCache is deprecated.")};var Xm,gg=null,by={},GI=function(){var o,s,t="32px ",e=["monospace","serif"],r=e.length,i="wmytzilWMYTZIL@#/&?$%10\uf013";function a(h,p,m){for(var E=!0,S=0;S<r;++S){var x=e[S];if(s=wy(h+" "+p+" "+t+x,i),m!=x){var P=wy(h+" "+p+" "+t+m+","+x,i);E=E&&P!=s}}return!!E}function c(){for(var h=!0,p=Pl.getKeys(),m=0,E=p.length;m<E;++m){var S=p[m];Pl.get(S)<100&&(a.apply(this,S.split("\n"))?(te(by),gg=null,Xm=void 0,Pl.set(S,100)):(Pl.set(S,Pl.get(S)+1,!0),h=!1))}h&&(clearInterval(o),o=void 0)}return function(h){var p=yb(h);if(p)for(var m=p.families,E=0,S=m.length;E<S;++E){var x=m[E],P=p.style+"\n"+p.weight+"\n"+x;void 0===Pl.get(P)&&(Pl.set(P,100,!0),a(p.style,p.weight,x)||(Pl.set(P,0,!0),void 0===o&&(o=setInterval(c,32))))}}}(),BI=function(){var n;return function(t){var e=by[t];if(null==e){if(lo){var r=yb(t),i=YS(t,"\u017dg");e=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||((n=document.createElement("div")).innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=t,document.body.appendChild(n),e=n.offsetHeight,document.body.removeChild(n);by[t]=e}return e}}();function YS(n,t){return gg||(gg=Tl(1,1)),n!=Xm&&(gg.font=n,Xm=gg.font),gg.measureText(t)}function wy(n,t){return YS(n,t).width}function mg(n,t,e){if(t in e)return e[t];var r=wy(n,t);return e[t]=r,r}var w2=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Km=function(n){function t(e){var r=n.call(this,e)||this;r.fontChangeListenerKey_=mn(Pl,"propertychange",e.redrawText.bind(e)),r.element_=document.createElement("div");var i=r.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",r.element_.className=Ym+" ol-layers";var o=e.getViewport();return o.insertBefore(r.element_,o.firstChild||null),r.children_=[],r.renderedVisible_=!0,r}return w2(t,n),t.prototype.dispatchRenderEvent=function(e,r){var i=this.getMap();if(i.hasListener(e)){var o=new Hm(e,void 0,r);i.dispatchEvent(o)}},t.prototype.disposeInternal=function(){un(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),n.prototype.disposeInternal.call(this)},t.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent("precompose",e);var r=e.layerStatesArray.sort(function(E,S){return E.zIndex-S.zIndex}),i=e.viewState;this.children_.length=0;for(var o=[],s=null,a=0,c=r.length;a<c;++a){var h=r[a];if(e.layerIndex=a,dd(h,i)&&("ready"==h.sourceState||"undefined"==h.sourceState)){var p=h.layer,m=p.render(e,s);!m||(m!==s&&(this.children_.push(m),s=m),"getDeclutter"in p&&o.push(p))}}for(a=o.length-1;a>=0;--a)o[a].renderDeclutter(e);(function(n,t){for(var e=n.childNodes,r=0;;++r){var i=e[r],o=t[r];if(!i&&!o)break;if(i!==o){if(!i){n.appendChild(o);continue}if(!o){n.removeChild(i),--r;continue}n.insertBefore(o,i)}}})(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},t.prototype.forEachLayerAtPixel=function(e,r,i,o,s){for(var a=r.viewState,c=r.layerStatesArray,p=c.length-1;p>=0;--p){var m=c[p],E=m.layer;if(E.hasRenderer()&&dd(m,a)&&s(E)){var x=E.getRenderer().getDataAtPixel(e,r,i);if(x){var P=o(E,x);if(P)return P}}}},t}(gy);var Zm=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ju=function(n){function t(e,r,i){var o=n.call(this,e)||this;return o.element=r,o.index=i,o}return Zm(t,n),t}(xe);const vu=function(n){function t(e,r){var i=n.call(this)||this;if(i.unique_=!!(r||{}).unique,i.array_=e||[],i.unique_)for(var s=0,a=i.array_.length;s<a;++s)i.assertUnique_(i.array_[s],s);return i.updateLength_(),i}return Zm(t,n),t.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},t.prototype.extend=function(e){for(var r=0,i=e.length;r<i;++r)this.push(e[r]);return this},t.prototype.forEach=function(e){for(var r=this.array_,i=0,o=r.length;i<o;++i)e(r[i],i,r)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(e){return this.array_[e]},t.prototype.getLength=function(){return this.get("length")},t.prototype.insertAt=function(e,r){this.unique_&&this.assertUnique_(r),this.array_.splice(e,0,r),this.updateLength_(),this.dispatchEvent(new ju("add",r,e))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(e){this.unique_&&this.assertUnique_(e);var r=this.getLength();return this.insertAt(r,e),this.getLength()},t.prototype.remove=function(e){for(var r=this.array_,i=0,o=r.length;i<o;++i)if(r[i]===e)return this.removeAt(i)},t.prototype.removeAt=function(e){var r=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new ju("remove",r,e)),r},t.prototype.setAt=function(e,r){var i=this.getLength();if(e<i){this.unique_&&this.assertUnique_(r,e);var o=this.array_[e];this.array_[e]=r,this.dispatchEvent(new ju("remove",o,e)),this.dispatchEvent(new ju("add",r,e))}else{for(var s=i;s<e;++s)this.insertAt(s,void 0);this.insertAt(e,r)}},t.prototype.updateLength_=function(){this.set("length",this.array_.length)},t.prototype.assertUnique_=function(e,r){for(var i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===e&&i!==r)throw new mi(58)},t}(Wn);var _b=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const xc=function(n){function t(e){var r=this,i=e||{},o=xt({},i);delete o.layers;var s=i.layers;return(r=n.call(this,o)||this).layersListenerKeys_=[],r.listenerKeys_={},r.addChangeListener("layers",r.handleLayersChanged_),s?Array.isArray(s)?s=new vu(s.slice(),{unique:!0}):Nn("function"==typeof s.getArray,43):s=new vu(void 0,{unique:!0}),r.setLayers(s),r}return _b(t,n),t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(un),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var r in this.layersListenerKeys_.push(mn(e,"add",this.handleLayersAdd_,this),mn(e,"remove",this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[r].forEach(un);te(this.listenerKeys_);for(var i=e.getArray(),o=0,s=i.length;o<s;o++){var a=i[o];this.listenerKeys_[Jt(a)]=[mn(a,"propertychange",this.handleLayerChange_,this),mn(a,"change",this.handleLayerChange_,this)]}this.changed()},t.prototype.handleLayersAdd_=function(e){var r=e.element;this.listenerKeys_[Jt(r)]=[mn(r,"propertychange",this.handleLayerChange_,this),mn(r,"change",this.handleLayerChange_,this)],this.changed()},t.prototype.handleLayersRemove_=function(e){var i=Jt(e.element);this.listenerKeys_[i].forEach(un),delete this.listenerKeys_[i],this.changed()},t.prototype.getLayers=function(){return this.get("layers")},t.prototype.setLayers=function(e){this.set("layers",e)},t.prototype.getLayersArray=function(e){var r=void 0!==e?e:[];return this.getLayers().forEach(function(i){i.getLayersArray(r)}),r},t.prototype.getLayerStatesArray=function(e){var r=void 0!==e?e:[],i=r.length;this.getLayers().forEach(function(p){p.getLayerStatesArray(r)});var o=this.getLayerState(),s=o.zIndex;!e&&void 0===o.zIndex&&(s=0);for(var a=i,c=r.length;a<c;a++){var h=r[a];h.opacity*=o.opacity,h.visible=h.visible&&o.visible,h.maxResolution=Math.min(h.maxResolution,o.maxResolution),h.minResolution=Math.max(h.minResolution,o.minResolution),h.minZoom=Math.max(h.minZoom,o.minZoom),h.maxZoom=Math.min(h.maxZoom,o.maxZoom),void 0!==o.extent&&(h.extent=void 0!==h.extent?eo(h.extent,o.extent):o.extent),void 0===h.zIndex&&(h.zIndex=s)}return r},t.prototype.getSourceState=function(){return"ready"},t}(Bf);var yg=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Gh=function(n){function t(e,r,i){var o=n.call(this,e)||this;return o.map=r,o.frameState=void 0!==i?i:null,o}return yg(t,n),t}(xe);var Iy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const fd=function(n){function t(e,r,i,o,s){var a=n.call(this,e,r,s)||this;return a.originalEvent=i,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==o&&o,a}return Iy(t,n),Object.defineProperty(t.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(e){this.pixel_=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(e){this.coordinate_=e},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){n.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){n.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},t}(Gh),Zo={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var bb=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const wb=function(n){function t(e,r){var i=n.call(this,e)||this;i.map_=e,i.emulateClicks_=!1,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=void 0===r?1:r,i.down_=null;var o=i.map_.getViewport();return i.activePointers_=0,i.trackedTouches_={},i.element_=o,i.pointerdownListenerKey_=mn(o,"pointerdown",i.handlePointerDown_,i),i.relayedListenerKey_=mn(o,"pointermove",i.relayEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener("touchmove",i.boundHandleTouchMove_,!!Ps&&{passive:!1}),i}return bb(t,n),t.prototype.emulateClick_=function(e){var r=new fd(Zo.CLICK,this.map_,e);this.dispatchEvent(r),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,r=new fd(Zo.DBLCLICK,this.map_,e),this.dispatchEvent(r)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var i=new fd(Zo.SINGLECLICK,this.map_,e);this.dispatchEvent(i)}.bind(this),250)},t.prototype.updateActivePointers_=function(e){var r=e;r.type==Zo.POINTERUP||r.type==Zo.POINTERCANCEL?delete this.trackedTouches_[r.pointerId]:r.type==Zo.POINTERDOWN&&(this.trackedTouches_[r.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},t.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var r=new fd(Zo.POINTERUP,this.map_,e);this.dispatchEvent(r),this.emulateClicks_&&!r.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(un),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(e){return 0===e.button},t.prototype.handlePointerDown_=function(e){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(e);var r=new fd(Zo.POINTERDOWN,this.map_,e);for(var i in this.dispatchEvent(r),this.down_={},e){var o=e[i];this.down_[i]="function"==typeof o?it:o}if(0===this.dragListenerKeys_.length){var s=this.map_.getOwnerDocument();this.dragListenerKeys_.push(mn(s,Zo.POINTERMOVE,this.handlePointerMove_,this),mn(s,Zo.POINTERUP,this.handlePointerUp_,this),mn(this.element_,Zo.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==s&&this.dragListenerKeys_.push(mn(this.element_.getRootNode(),Zo.POINTERUP,this.handlePointerUp_,this))}},t.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.dragging_=!0;var r=new fd(Zo.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(r)}},t.prototype.relayEvent_=function(e){this.originalPointerMoveEvent_=e;var r=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new fd(e.type,this.map_,e,r))},t.prototype.handleTouchMove_=function(e){var r=this.originalPointerMoveEvent_;(!r||r.defaultPrevented)&&("boolean"!=typeof e.cancelable||!0===e.cancelable)&&e.preventDefault()},t.prototype.isMoving_=function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(un(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(un(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(un),this.dragListenerKeys_.length=0,this.element_=null,n.prototype.disposeInternal.call(this)},t}(tn);var Ay=1/0;const My=function(){function n(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return n.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,te(this.queuedElements_)},n.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,r=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var i=this.keyFunction_(r);return delete this.queuedElements_[i],r},n.prototype.enqueue=function(t){Nn(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=Ay&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},n.prototype.getCount=function(){return this.elements_.length},n.prototype.getLeftChildIndex_=function(t){return 2*t+1},n.prototype.getRightChildIndex_=function(t){return 2*t+2},n.prototype.getParentIndex_=function(t){return t-1>>1},n.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},n.prototype.isEmpty=function(){return 0===this.elements_.length},n.prototype.isKeyQueued=function(t){return t in this.queuedElements_},n.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},n.prototype.siftUp_=function(t){for(var e=this.elements_,r=this.priorities_,i=e.length,o=e[t],s=r[t],a=t;t<i>>1;){var c=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),p=h<i&&r[h]<r[c]?h:c;e[t]=e[p],r[t]=r[p],t=p}e[t]=o,r[t]=s,this.siftDown_(a,t)},n.prototype.siftDown_=function(t,e){for(var r=this.elements_,i=this.priorities_,o=r[e],s=i[e];e>t;){var a=this.getParentIndex_(e);if(!(i[a]>s))break;r[e]=r[a],i[e]=i[a],e=a}r[e]=o,i[e]=s},n.prototype.reprioritize=function(){var s,a,c,t=this.priorityFunction_,e=this.elements_,r=this.priorities_,i=0,o=e.length;for(a=0;a<o;++a)(c=t(s=e[a]))==Ay?delete this.queuedElements_[this.keyFunction_(s)]:(r[i]=c,e[i++]=s);e.length=i,r.length=i,this.heapify_()},n}();var _g=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Sb=function(n){function t(e,r){var i=n.call(this,function(o){return e.apply(null,o)},function(o){return o[0].getKey()})||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=r,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return _g(t,n),t.prototype.enqueue=function(e){var r=n.prototype.enqueue.call(this,e);return r&&e[0].addEventListener("change",this.boundHandleTileChange_),r},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(e){var r=e.target,i=r.getState();if(2===i||3===i||4===i){r.removeEventListener("change",this.boundHandleTileChange_);var o=r.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(e,r){for(var s,a,i=0;this.tilesLoading_<e&&i<r&&this.getCount()>0;)a=(s=this.dequeue()[0]).getKey(),0===s.getState()&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++i,s.load())},t}(My);function zI(n){return n[0]>0&&n[1]>0}function $a(n,t){return Array.isArray(n)?n:(void 0===t?t=[n,n]:(t[0]=n,t[1]=n),t)}var Qm=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Il=function(n){function t(e){var r=n.call(this)||this,i=function(n){var t=null;void 0!==n.keyboardEventTarget&&(t="string"==typeof n.keyboardEventTarget?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);var i,o,s,e={},r=n.layers&&"function"==typeof n.layers.getLayers?n.layers:new xc({layers:n.layers});return e.layergroup=r,e.target=n.target,e.view=void 0!==n.view?n.view:new US,void 0!==n.controls&&(Array.isArray(n.controls)?i=new vu(n.controls.slice()):(Nn("function"==typeof n.controls.getArray,47),i=n.controls)),void 0!==n.interactions&&(Array.isArray(n.interactions)?o=new vu(n.interactions.slice()):(Nn("function"==typeof n.interactions.getArray,48),o=n.interactions)),void 0!==n.overlays?Array.isArray(n.overlays)?s=new vu(n.overlays.slice()):(Nn("function"==typeof n.overlays.getArray,49),s=n.overlays):s=new vu,{controls:i,interactions:o,keyboardEventTarget:t,overlays:s,values:e}}(e);return r.boundHandleBrowserEvent_=r.handleBrowserEvent.bind(r),r.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,r.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:Po,r.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(r),r.coordinateToPixelTransform_=[1,0,0,1,0,0],r.pixelToCoordinateTransform_=[1,0,0,1,0,0],r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.style.pointerEvents="none",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.style.pointerEvents="none",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=null,r.moveTolerance_=e.moveTolerance,r.keyboardEventTarget_=i.keyboardEventTarget,r.keyHandlerKeys_=null,r.controls=i.controls||new vu,r.interactions=i.interactions||new vu,r.overlays_=i.overlays,r.overlayIdIndex_={},r.renderer_=null,r.postRenderFunctions_=[],r.tileQueue_=new Sb(r.getTilePriority.bind(r),r.handleTileChange_.bind(r)),r.addChangeListener("layergroup",r.handleLayerGroupChanged_),r.addChangeListener("view",r.handleViewChanged_),r.addChangeListener("size",r.handleSizeChanged_),r.addChangeListener("target",r.handleTargetChanged_),r.setProperties(i.values),r.controls.forEach(function(o){o.setMap(this)}.bind(r)),r.controls.addEventListener("add",function(o){o.element.setMap(this)}.bind(r)),r.controls.addEventListener("remove",function(o){o.element.setMap(null)}.bind(r)),r.interactions.forEach(function(o){o.setMap(this)}.bind(r)),r.interactions.addEventListener("add",function(o){o.element.setMap(this)}.bind(r)),r.interactions.addEventListener("remove",function(o){o.element.setMap(null)}.bind(r)),r.overlays_.forEach(r.addOverlayInternal_.bind(r)),r.overlays_.addEventListener("add",function(o){this.addOverlayInternal_(o.element)}.bind(r)),r.overlays_.addEventListener("remove",function(o){var a=o.element.getId();void 0!==a&&delete this.overlayIdIndex_[a.toString()],o.element.setMap(null)}.bind(r)),r}return Qm(t,n),t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(e){this.getControls().push(e)},t.prototype.addInteraction=function(e){this.getInteractions().push(e)},t.prototype.addLayer=function(e){this.getLayerGroup().getLayers().push(e)},t.prototype.addOverlay=function(e){this.getOverlays().push(e)},t.prototype.addOverlayInternal_=function(e){var r=e.getId();void 0!==r&&(this.overlayIdIndex_[r.toString()]=e),e.setMap(this)},t.prototype.disposeInternal=function(){this.setTarget(null),n.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(e,r,i){if(this.frameState_){var o=this.getCoordinateFromPixelInternal(e);return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,!1!==i.checkWrapped,r,null,void 0!==i.layerFilter?i.layerFilter:Ue,null)}},t.prototype.getFeaturesAtPixel=function(e,r){var i=[];return this.forEachFeatureAtPixel(e,function(o){i.push(o)},r),i},t.prototype.forEachLayerAtPixel=function(e,r,i){if(this.frameState_){var o=i||{};return this.renderer_.forEachLayerAtPixel(e,this.frameState_,void 0!==o.hitTolerance?o.hitTolerance:0,r,o.layerFilter||Ue)}},t.prototype.hasFeatureAtPixel=function(e,r){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixelInternal(e);return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,!1!==r.checkWrapped,void 0!==r.layerFilter?r.layerFilter:Ue,null)},t.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},t.prototype.getEventCoordinateInternal=function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))},t.prototype.getEventPixel=function(e){var r=this.viewport_.getBoundingClientRect(),i="changedTouches"in e?e.changedTouches[0]:e;return[i.clientX-r.left,i.clientY-r.top]},t.prototype.getTarget=function(){return this.get("target")},t.prototype.getTargetElement=function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null},t.prototype.getCoordinateFromPixel=function(e){return Yn(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(e){var r=this.frameState_;return r?Lo(r.pixelToCoordinateTransform,e.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(e){var r=this.overlayIdIndex_[e.toString()];return void 0!==r?r:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get("layergroup")},t.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},t.prototype.getLoading=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),r=0,i=e.length;r<i;++r){var s=e[r].layer.getSource();if(s&&s.loading)return!0}return!1},t.prototype.getPixelFromCoordinate=function(e){var r=tr(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(r)},t.prototype.getPixelFromCoordinateInternal=function(e){var r=this.frameState_;return r?Lo(r.coordinateToPixelTransform,e.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get("size")},t.prototype.getView=function(){return this.get("view")},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getOwnerDocument=function(){var e=this.getTargetElement();return e?e.ownerDocument:document},t.prototype.getTilePriority=function(e,r,i,o){return function(n,t,e,r,i){if(!n||!(e in n.wantedTiles)||!n.wantedTiles[e][t.getKey()])return Ay;var o=n.viewState.center,s=r[0]-o[0],a=r[1]-o[1];return 65536*Math.log(i)+Math.sqrt(s*s+a*a)/i}(this.frameState_,e,r,i,o)},t.prototype.handleBrowserEvent=function(e,r){var o=new fd(r||e.type,this,e);this.handleMapBrowserEvent(o)},t.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){var r=e.originalEvent,i=r.type;if("pointerdown"===i||"wheel"===i||"keydown"===i){var o=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():o,a=r.target;if(this.overlayContainerStopEvent_.contains(a)||!(s===o?o.documentElement:s).contains(a))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e))for(var c=this.getInteractions().getArray().slice(),h=c.length-1;h>=0;h--){var p=c[h];if(p.getMap()===this&&p.getActive()&&this.getTargetElement()&&(!p.handleEvent(e)||e.propagationStopped))break}}},t.prototype.handlePostRender=function(){var e=this.frameState_,r=this.tileQueue_;if(!r.isEmpty()){var i=this.maxTilesLoading_,o=i;if(e){var s=e.viewHints;if(s[0]||s[1]){var a=Date.now()-e.time>8;i=a?0:8,o=a?0:2}}r.getTilesLoading()<i&&(r.reprioritize(),r.loadMoreTiles(i,o))}e&&this.hasListener("rendercomplete")&&!e.animate&&!this.tileQueue_.getTilesLoading()&&!this.getLoading()&&this.renderer_.dispatchRenderEvent("rendercomplete",e);for(var c=this.postRenderFunctions_,h=0,p=c.length;h<p;++h)c[h](this,e);c.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){var e;if(this.getTarget()&&(e=this.getTargetElement()),this.mapBrowserEventHandler_){for(var r=0,i=this.keyHandlerKeys_.length;r<i;++r)un(this.keyHandlerKeys_[r]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener("resize",this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,_y(this.viewport_)}if(e){for(var o in e.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new wb(this,this.moveTolerance_),Zo)this.mapBrowserEventHandler_.addEventListener(Zo[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!Ps&&{passive:!1});var s=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[mn(s,"keydown",this.handleBrowserEvent,this),mn(s,"keypress",this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener("resize",this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(un(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(un(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=mn(e,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=mn(e,"change",this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(un),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[mn(e,"propertychange",this.render,this),mn(e,"change",this.render,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),r=0,i=e.length;r<i;++r){var o=e[r].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(e){return this.getControls().remove(e)},t.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},t.prototype.removeLayer=function(e){return this.getLayerGroup().getLayers().remove(e)},t.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},t.prototype.renderFrame_=function(e){var r=this,i=this.getSize(),o=this.getView(),s=this.frameState_,a=null;if(void 0!==i&&zI(i)&&o&&o.isDef()){var c=o.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=o.getState();a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:ao(h.center,h.resolution,h.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:h,viewHints:c,wantedTiles:{}}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s&&(!this.previousExtent_||!pl(this.previousExtent_)&&!nn(a.extent,this.previousExtent_))&&(this.dispatchEvent(new Gh("movestart",this,s)),this.previousExtent_=oe(this.previousExtent_)),this.previousExtent_&&!a.viewHints[0]&&!a.viewHints[1]&&!nn(a.extent,this.previousExtent_)&&(this.dispatchEvent(new Gh("moveend",this,a)),Wi(a.extent,this.previousExtent_))),this.dispatchEvent(new Gh("postrender",this,a)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){r.postRenderTimeoutHandle_=void 0,r.handlePostRender()},0))},t.prototype.setLayerGroup=function(e){this.set("layergroup",e)},t.prototype.setSize=function(e){this.set("size",e)},t.prototype.setTarget=function(e){this.set("target",e)},t.prototype.setView=function(e){this.set("view",e)},t.prototype.updateSize=function(){var e=this.getTargetElement(),r=void 0;if(e){var i=getComputedStyle(e),o=e.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=e.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(o)&&!isNaN(s)&&(zI(r=[o,s])||console.warn("No map visible because the map container's width or height are 0."))}this.setSize(r),this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var e=this.getView();if(e){var r=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(r=[parseInt(i.width,10),parseInt(i.height,10)]),e.setViewportSize(r)}},t}(Wn);var $m=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Bh=function(n){function t(e){var r=n.call(this)||this,i=e.element;return i&&!e.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),r.element=i||null,r.target_=null,r.map_=null,r.listenerKeys=[],e.render&&(r.render=e.render),e.target&&r.setTarget(e.target),r}return $m(t,n),t.prototype.disposeInternal=function(){_y(this.element),n.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(e){this.map_&&_y(this.element);for(var r=0,i=this.listenerKeys.length;r<i;++r)un(this.listenerKeys[r]);this.listenerKeys.length=0,this.map_=e,this.map_&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==it&&this.listenerKeys.push(mn(e,"postrender",this.render,this)),e.render())},t.prototype.render=function(e){},t.prototype.setTarget=function(e){this.target_="string"==typeof e?document.getElementById(e):e},t}(Wn);var XS=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const KS=function(n){function t(e){var r=this,i=e||{};(r=n.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this).ulElement_=document.createElement("ul"),r.collapsed_=void 0===i.collapsed||i.collapsed,r.userCollapsed_=r.collapsed_,r.overrideCollapsible_=void 0!==i.collapsible,r.collapsible_=void 0===i.collapsible||i.collapsible,r.collapsible_||(r.collapsed_=!1);var o=void 0!==i.className?i.className:"ol-attribution",s=void 0!==i.tipLabel?i.tipLabel:"Attributions",a=void 0!==i.expandClassName?i.expandClassName:o+"-expand",c=void 0!==i.collapseLabel?i.collapseLabel:"\xbb",h=void 0!==i.collapseClassName?i.collapseClassName:o+"-collpase";"string"==typeof c?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=c,r.collapseLabel_.className=h):r.collapseLabel_=c;var p=void 0!==i.label?i.label:"i";"string"==typeof p?(r.label_=document.createElement("span"),r.label_.textContent=p,r.label_.className=a):r.label_=p;var m=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_;r.toggleButton_=document.createElement("button"),r.toggleButton_.setAttribute("type","button"),r.toggleButton_.setAttribute("aria-expanded",String(!r.collapsed_)),r.toggleButton_.title=s,r.toggleButton_.appendChild(m),r.toggleButton_.addEventListener("click",r.handleClick_.bind(r),!1);var S=r.element;return S.className=o+" "+Ym+" "+Uf+(r.collapsed_&&r.collapsible_?" "+Zd:"")+(r.collapsible_?"":" ol-uncollapsible"),S.appendChild(r.toggleButton_),S.appendChild(r.ulElement_),r.renderedAttributions_=[],r.renderedVisible_=!0,r}return XS(t,n),t.prototype.collectSourceAttributions_=function(e){for(var r={},i=[],o=!0,s=e.layerStatesArray,a=0,c=s.length;a<c;++a){var h=s[a];if(dd(h,e.viewState)){var p=h.layer.getSource();if(p){var m=p.getAttributions();if(m){var E=m(e);if(E)if(o=o&&!1!==p.getAttributionsCollapsible(),Array.isArray(E))for(var S=0,x=E.length;S<x;++S)E[S]in r||(i.push(E[S]),r[E[S]]=!0);else E in r||(i.push(E),r[E]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),i},t.prototype.updateElement_=function(e){if(e){var r=this.collectSourceAttributions_(e),i=r.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Me(r,this.renderedAttributions_)){!function(n){for(;n.lastChild;)n.removeChild(n.lastChild)}(this.ulElement_);for(var o=0,s=r.length;o<s;++o){var a=document.createElement("li");a.innerHTML=r[o],this.ulElement_.appendChild(a)}this.renderedAttributions_=r}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},t.prototype.handleToggle_=function(){this.element.classList.toggle(Zd),this.collapsed_?HS(this.collapseLabel_,this.label_):HS(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(e){this.updateElement_(e.frameState)},t}(Bh);var e0=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const t0=function(n){function t(e){var r=this,i=e||{};r=n.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var o=void 0!==i.className?i.className:"ol-rotate",s=void 0!==i.label?i.label:"\u21e7",a=void 0!==i.compassClassName?i.compassClassName:"ol-compass";r.label_=null,"string"==typeof s?(r.label_=document.createElement("span"),r.label_.className=a,r.label_.textContent=s):(r.label_=s,r.label_.classList.add(a));var c=i.tipLabel?i.tipLabel:"Reset rotation",h=document.createElement("button");h.className=o+"-reset",h.setAttribute("type","button"),h.title=c,h.appendChild(r.label_),h.addEventListener("click",r.handleClick_.bind(r),!1);var m=r.element;return m.className=o+" "+Ym+" "+Uf,m.appendChild(h),r.callResetNorth_=i.resetNorth?i.resetNorth:void 0,r.duration_=void 0!==i.duration?i.duration:250,r.autoHide_=void 0===i.autoHide||i.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add(Wm),r}return e0(t,n),t.prototype.handleClick_=function(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},t.prototype.resetNorth_=function(){var r=this.getMap().getView();if(r){var i=r.getRotation();void 0!==i&&(this.duration_>0&&i%(2*Math.PI)!=0?r.animate({rotation:0,duration:this.duration_,easing:je}):r.setRotation(0))}},t.prototype.render=function(e){var r=e.frameState;if(r){var i=r.viewState.rotation;if(i!=this.rotation_){var o="rotate("+i+"rad)";if(this.autoHide_){var s=this.element.classList.contains(Wm);s||0!==i?s&&0!==i&&this.element.classList.remove(Wm):this.element.classList.add(Wm)}this.label_.style.transform=o}this.rotation_=i}},t}(Bh);var ZS=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const JS=function(n){function t(e){var r=this,i=e||{};r=n.call(this,{element:document.createElement("div"),target:i.target})||this;var o=void 0!==i.className?i.className:"ol-zoom",s=void 0!==i.delta?i.delta:1,a=void 0!==i.zoomInClassName?i.zoomInClassName:o+"-in",c=void 0!==i.zoomOutClassName?i.zoomOutClassName:o+"-out",h=void 0!==i.zoomInLabel?i.zoomInLabel:"+",p=void 0!==i.zoomOutLabel?i.zoomOutLabel:"\u2212",m=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",E=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",S=document.createElement("button");S.className=a,S.setAttribute("type","button"),S.title=m,S.appendChild("string"==typeof h?document.createTextNode(h):h),S.addEventListener("click",r.handleClick_.bind(r,s),!1);var x=document.createElement("button");x.className=c,x.setAttribute("type","button"),x.title=E,x.appendChild("string"==typeof p?document.createTextNode(p):p),x.addEventListener("click",r.handleClick_.bind(r,-s),!1);var R=r.element;return R.className=o+" "+Ym+" "+Uf,R.appendChild(S),R.appendChild(x),r.duration_=void 0!==i.duration?i.duration:250,r}return ZS(t,n),t.prototype.handleClick_=function(e,r){r.preventDefault(),this.zoomByDelta_(e)},t.prototype.zoomByDelta_=function(e){var i=this.getMap().getView();if(i){var o=i.getZoom();if(void 0!==o){var s=i.getConstrainedZoom(o+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:je})):i.setZoom(s)}}},t}(Bh);var Ib=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function Dy(n,t,e,r){var i=n.getZoom();if(void 0!==i){var o=n.getConstrainedZoom(i+t),s=n.getResolutionForZoom(o);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:s,anchor:e,duration:void 0!==r?r:250,easing:je})}}const Eg=function(n){function t(e){var r=n.call(this)||this;return e&&e.handleEvent&&(r.handleEvent=e.handleEvent),r.map_=null,r.setActive(!0),r}return Ib(t,n),t.prototype.getActive=function(){return this.get("active")},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(e){return!0},t.prototype.setActive=function(e){this.set("active",e)},t.prototype.setMap=function(e){this.map_=e},t}(Wn);var $S=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const x2=function(n){function t(e){var r=n.call(this)||this,i=e||{};return r.delta_=i.delta?i.delta:1,r.duration_=void 0!==i.duration?i.duration:250,r}return $S(t,n),t.prototype.handleEvent=function(e){var r=!1;if(e.type==Zo.DBLCLICK){var i=e.originalEvent,s=e.coordinate,a=i.shiftKey?-this.delta_:this.delta_;Dy(e.map.getView(),a,s,this.duration_),i.preventDefault(),r=!0}return!r},t}(Eg);var o0=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function s0(n){for(var t=n.length,e=0,r=0,i=0;i<t;i++)e+=n[i].clientX,r+=n[i].clientY;return[e/t,r/t]}const Tc=function(n){function t(e){var r=this,i=e||{};return r=n.call(this,i)||this,i.handleDownEvent&&(r.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(r.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(r.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(r.handleUpEvent=i.handleUpEvent),i.stopDown&&(r.stopDown=i.stopDown),r.handlingDownUpSequence=!1,r.trackedPointers_={},r.targetPointers=[],r}return o0(t,n),t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(e){return!1},t.prototype.handleDragEvent=function(e){},t.prototype.handleEvent=function(e){if(!e.originalEvent)return!0;var r=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Zo.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Zo.POINTERUP){var i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Zo.POINTERDOWN){var o=this.handleDownEvent(e);this.handlingDownUpSequence=o,r=this.stopDown(o)}else e.type==Zo.POINTERMOVE&&this.handleMoveEvent(e);return!r},t.prototype.handleMoveEvent=function(e){},t.prototype.handleUpEvent=function(e){return!1},t.prototype.stopDown=function(e){return e},t.prototype.updateTrackedPointers_=function(e){if(function(n){var t=n.type;return t===Zo.POINTERDOWN||t===Zo.POINTERDRAG||t===Zo.POINTERUP}(e)){var r=e.originalEvent,i=r.pointerId.toString();e.type==Zo.POINTERUP?delete this.trackedPointers_[i]:(e.type==Zo.POINTERDOWN||i in this.trackedPointers_)&&(this.trackedPointers_[i]=r),this.targetPointers=Ee(this.trackedPointers_)}},t}(Eg);function xa(n){var t=arguments;return function(e){for(var r=!0,i=0,o=t.length;i<o&&(r=r&&t[i](e));++i);return r}}var l0=function(n){var t=n.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},u0=function(n){return!n.map.getTargetElement().hasAttribute("tabindex")||function(n){return n.target.getTargetElement().contains(document.activeElement)}(n)},Ly=Ue,ky=function(n){var t=n.originalEvent;return 0==t.button&&!(Or&&ci&&t.ctrlKey)},Fy=function(n){var t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Gy=function(n){var t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},bg=function(n){var e=n.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},By=function(n){var t=n.originalEvent;return Nn(void 0!==t,56),"mouse"==t.pointerType},Yf=function(n){var t=n.originalEvent;return Nn(void 0!==t,56),t.isPrimary&&0===t.button},KI=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const qf=function(n){function t(e){var r=n.call(this,{stopDown:ht})||this,i=e||{};r.kinetic_=i.kinetic,r.lastCentroid=null,r.panning_=!1;var o=i.condition?i.condition:xa(Fy,Yf);return r.condition_=i.onFocusOnly?xa(u0,o):o,r.noKinetic_=!1,r}return KI(t,n),t.prototype.handleDragEvent=function(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var r=this.targetPointers,i=s0(r);if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();(function(n,t){n[0]*=t,n[1]*=t})(o,a.getResolution()),fu(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()},t.prototype.handleUpEvent=function(e){var r=e.map,i=r.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=i.getCenterInternal(),c=r.getPixelFromCoordinateInternal(a),h=r.getCoordinateFromPixelInternal([c[0]-o*Math.cos(s),c[1]-o*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(h),duration:500,easing:je})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>0&&this.condition_(e)){var i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},t}(Tc);var sx=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Rb=function(n){function t(e){var r=this,i=e||{};return(r=n.call(this,{stopDown:ht})||this).condition_=i.condition?i.condition:l0,r.lastAngle_=void 0,r.duration_=void 0!==i.duration?i.duration:250,r}return sx(t,n),t.prototype.handleDragEvent=function(e){if(By(e)){var r=e.map,i=r.getView();if(i.getConstraints().rotation!==M){var o=r.getSize(),s=e.pixel,a=Math.atan2(o[1]/2-s[1],s[0]-o[0]/2);void 0!==this.lastAngle_&&i.adjustRotationInternal(-(a-this.lastAngle_)),this.lastAngle_=a}}},t.prototype.handleUpEvent=function(e){return!By(e)||(e.map.getView().endInteraction(this.duration_),!1)},t.prototype.handleDownEvent=function(e){return!(!By(e)||!ky(e)||!this.condition_(e)||(e.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},t}(Tc);var ax=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const wg=function(n){function t(e){var r=n.call(this)||this;return r.geometry_=null,r.element_=document.createElement("div"),r.element_.style.position="absolute",r.element_.style.pointerEvents="auto",r.element_.className="ol-box "+e,r.map_=null,r.startPixel_=null,r.endPixel_=null,r}return ax(t,n),t.prototype.disposeInternal=function(){this.setMap(null)},t.prototype.render_=function(){var e=this.startPixel_,r=this.endPixel_,i="px",o=this.element_.style;o.left=Math.min(e[0],r[0])+i,o.top=Math.min(e[1],r[1])+i,o.width=Math.abs(r[0]-e[0])+i,o.height=Math.abs(r[1]-e[1])+i},t.prototype.setMap=function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var r=this.element_.style;r.left="inherit",r.top="inherit",r.width="inherit",r.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},t.prototype.setPixels=function(e,r){this.startPixel_=e,this.endPixel_=r,this.createOrUpdateGeometry(),this.render_()},t.prototype.createOrUpdateGeometry=function(){var e=this.startPixel_,r=this.endPixel_,o=[e,[e[0],r[1]],r,[r[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new za([o])},t.prototype.getGeometry=function(){return this.geometry_},t}(Ge);var Al=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),jy=function(n){function t(e,r,i){var o=n.call(this,e)||this;return o.coordinate=r,o.mapBrowserEvent=i,o}return Al(t,n),t}(xe);const Db=function(n){function t(e){var r=n.call(this)||this,i=e||{};return r.box_=new wg(i.className||"ol-dragbox"),r.minArea_=void 0!==i.minArea?i.minArea:64,i.onBoxEnd&&(r.onBoxEnd=i.onBoxEnd),r.startPixel_=null,r.condition_=i.condition?i.condition:ky,r.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:r.defaultBoxEndCondition,r}return Al(t,n),t.prototype.defaultBoxEndCondition=function(e,r,i){var o=i[0]-r[0],s=i[1]-r[1];return o*o+s*s>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new jy("boxdrag",e.coordinate,e))},t.prototype.handleUpEvent=function(e){this.box_.setMap(null);var r=this.boxEndCondition_(e,this.startPixel_,e.pixel);return r&&this.onBoxEnd(e),this.dispatchEvent(new jy(r?"boxend":"boxcancel",e.coordinate,e)),!1},t.prototype.handleDownEvent=function(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new jy("boxstart",e.coordinate,e)),!0)},t.prototype.onBoxEnd=function(e){},t}(Tc);var Lb=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const cx=function(n){function t(e){var r=this,i=e||{};return(r=n.call(this,{condition:i.condition?i.condition:Gy,className:i.className||"ol-dragzoom",minArea:i.minArea})||this).duration_=void 0!==i.duration?i.duration:200,r.out_=void 0!==i.out&&i.out,r}return Lb(t,n),t.prototype.onBoxEnd=function(e){var i=this.getMap().getView(),o=this.getGeometry();if(this.out_){var s=i.rotatedExtentForGeometry(o),a=i.getResolutionForExtentInternal(s),c=i.getResolution()/a;(o=o.clone()).scale(c*c)}i.fitInternal(o,{duration:this.duration_,easing:je})},t}(Db);var dx=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Pc=function(n){function t(e){var r=n.call(this)||this,i=e||{};return r.defaultCondition_=function(o){return Fy(o)&&bg(o)},r.condition_=void 0!==i.condition?i.condition:r.defaultCondition_,r.duration_=void 0!==i.duration?i.duration:100,r.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128,r}return dx(t,n),t.prototype.handleEvent=function(e){var r=!1;if("keydown"==e.type){var i=e.originalEvent,o=i.keyCode;if(this.condition_(e)&&(40==o||37==o||39==o||38==o)){var a=e.map.getView(),c=a.getResolution()*this.pixelDelta_,h=0,p=0;40==o?p=-c:37==o?h=-c:39==o?h=c:p=c;var m=[h,p];fu(m,a.getRotation()),function(n,t,e){var r=n.getCenterInternal();r&&n.animateInternal({duration:void 0!==e?e:250,easing:Ut,center:n.getConstrainedCenter([r[0]+t[0],r[1]+t[1]])})}(a,m,this.duration_),i.preventDefault(),r=!0}}return!r},t}(Eg);var ZI=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const c0=function(n){function t(e){var r=n.call(this)||this,i=e||{};return r.condition_=i.condition?i.condition:bg,r.delta_=i.delta?i.delta:1,r.duration_=void 0!==i.duration?i.duration:100,r}return ZI(t,n),t.prototype.handleEvent=function(e){var r=!1;if("keydown"==e.type||"keypress"==e.type){var i=e.originalEvent,o=i.charCode;if(this.condition_(e)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var s=e.map,a=o=="+".charCodeAt(0)?this.delta_:-this.delta_;Dy(s.getView(),a,void 0,this.duration_),i.preventDefault(),r=!0}}return!r},t}(Eg),Uu=function(){function n(t,e,r){this.decay_=t,this.minVelocity_=e,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}return n.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},n.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},n.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var r=e-3;r>0&&this.points_[r+2]>t;)r-=3;var i=this.points_[e+2]-this.points_[r+2];if(i<1e3/60)return!1;var o=this.points_[e]-this.points_[r],s=this.points_[e+1]-this.points_[r+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/i,this.initialVelocity_>this.minVelocity_},n.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},n.prototype.getAngle=function(){return this.angle_},n}();var Uy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const $d=function(n){function t(e){var r=this,i=e||{};(r=n.call(this,i)||this).totalDelta_=0,r.lastDelta_=0,r.maxDelta_=void 0!==i.maxDelta?i.maxDelta:1,r.duration_=void 0!==i.duration?i.duration:250,r.timeout_=void 0!==i.timeout?i.timeout:80,r.useAnchor_=void 0===i.useAnchor||i.useAnchor,r.constrainResolution_=void 0!==i.constrainResolution&&i.constrainResolution;var o=i.condition?i.condition:Ly;return r.condition_=i.onFocusOnly?xa(u0,o):o,r.lastAnchor_=null,r.startTime_=void 0,r.mode_=void 0,r.trackpadEventGap_=400,r.deltaPerZoom_=300,r}return Uy(t,n),t.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},t.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;if("wheel"!==e.type)return!0;var s,i=e.map,o=e.originalEvent;if(o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),"wheel"==e.type&&(s=o.deltaY,yi&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=Po),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),0===s)return!1;this.lastDelta_=s;var a=Date.now();void 0===this.startTime_&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");var c=i.getView();if("trackpad"===this.mode_&&!c.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(c.getAnimating()&&c.cancelAnimations(),c.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),c.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=s;var h=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),h),!1},t.prototype.handleWheelZoom_=function(e){var r=e.getView();r.getAnimating()&&r.cancelAnimations();var i=-mt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(r.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Dy(r,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(e){this.useAnchor_=e,e||(this.lastAnchor_=null)},t}(Eg);var eh=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const hx=function(n){function t(e){var r=this,i=e||{},o=i;return o.stopDown||(o.stopDown=ht),(r=n.call(this,o)||this).anchor_=null,r.lastAngle_=void 0,r.rotating_=!1,r.rotationDelta_=0,r.threshold_=void 0!==i.threshold?i.threshold:.3,r.duration_=void 0!==i.duration?i.duration:250,r}return eh(t,n),t.prototype.handleDragEvent=function(e){var r=0,i=this.targetPointers[0],o=this.targetPointers[1],s=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(void 0!==this.lastAngle_){var a=s-this.lastAngle_;this.rotationDelta_+=a,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),r=a}this.lastAngle_=s;var c=e.map,h=c.getView();if(h.getConstraints().rotation!==M){var p=c.getViewport().getBoundingClientRect(),m=s0(this.targetPointers);m[0]-=p.left,m[1]-=p.top,this.anchor_=c.getCoordinateFromPixelInternal(m),this.rotating_&&(c.render(),h.adjustRotationInternal(r,this.anchor_))}},t.prototype.handleUpEvent=function(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var r=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||r.getView().beginInteraction(),!0}return!1},t}(Tc);var Jf=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Gb=function(n){function t(e){var r=this,i=e||{},o=i;return o.stopDown||(o.stopDown=ht),(r=n.call(this,o)||this).anchor_=null,r.duration_=void 0!==i.duration?i.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return Jf(t,n),t.prototype.handleDragEvent=function(e){var r=1,i=this.targetPointers[0],o=this.targetPointers[1],s=i.clientX-o.clientX,a=i.clientY-o.clientY,c=Math.sqrt(s*s+a*a);void 0!==this.lastDistance_&&(r=this.lastDistance_/c),this.lastDistance_=c;var h=e.map,p=h.getView();1!=r&&(this.lastScaleDelta_=r);var m=h.getViewport().getBoundingClientRect(),E=s0(this.targetPointers);E[0]-=m.left,E[1]-=m.top,this.anchor_=h.getCoordinateFromPixelInternal(E),h.render(),p.adjustResolutionInternal(r,this.anchor_)},t.prototype.handleUpEvent=function(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),1))},t.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var r=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||r.getView().beginInteraction(),!0}return!1},t}(Tc);var Qf=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const zy=function(n){function t(e){return(e=xt({},e)).controls||(e.controls=function(n){var t={},e=new vu;return(void 0===t.zoom||t.zoom)&&e.push(new JS(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new t0(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new KS(t.attributionOptions)),e}()),e.interactions||(e.interactions=function(n){var t={onFocusOnly:!0}||{},e=new vu,r=new Uu(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new Rb),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new x2({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new qf({onFocusOnly:t.onFocusOnly,kinetic:r})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new hx),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new Gb({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new Pc),e.push(new c0({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new $d({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new cx({duration:t.zoomDuration})),e}()),n.call(this,e)||this}return Qf(t,n),t.prototype.createRenderer=function(){return new Km(this)},t}(Il);var Bb=function(){function n(t,e,r,i){this.minX=t,this.maxX=e,this.minY=r,this.maxY=i}return n.prototype.contains=function(t){return this.containsXY(t[1],t[2])},n.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},n.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},n.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},n.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},n.prototype.getHeight=function(){return this.maxY-this.minY+1},n.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},n.prototype.getWidth=function(){return this.maxX-this.minX+1},n.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},n}();function th(n,t,e,r,i){return void 0!==i?(i.minX=n,i.maxX=t,i.minY=e,i.maxY=r,i):new Bb(n,t,e,r)}const jb=Bb;function Ub(n,t,e,r){return void 0!==r?(r[0]=n,r[1]=t,r[2]=e,r):[n,t,e]}function $f(n,t,e){return n+"/"+t+"/"+e}function Vb(n){return $f(n[0],n[1],n[2])}function zb(n){return n.split("/").map(Number)}var px=[0,0,0];const Wy=function(){function n(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Nn(function(n,t,e){var r=function(s,a){return a-s}||at;return n.every(function(i,o){if(0===o)return!0;var s=r(n[o-1],i);return!(s>0||0===s)})}(this.resolutions_),17),!t.origins)for(var r=0,i=this.resolutions_.length-1;r<i;++r)if(e){if(this.resolutions_[r]/this.resolutions_[r+1]!==e){e=void 0;break}}else e=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Nn(this.origins_.length==this.resolutions_.length,20));var o=t.extent;void 0!==o&&!this.origin_&&!this.origins_&&(this.origin_=Ys(o)),Nn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Nn(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,Nn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==o?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(s,a){var c=new jb(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(o){var h=this.getTileRangeForExtentAndZ(o,a);c.minX=Math.max(h.minX,c.minX),c.maxX=Math.min(h.maxX,c.maxX),c.minY=Math.max(h.minY,c.minY),c.maxY=Math.min(h.maxY,c.maxY)}return c},this):o&&this.calculateTileRanges_(o)}return n.prototype.forEachTileCoord=function(t,e,r){for(var i=this.getTileRangeForExtentAndZ(t,e),o=i.minX,s=i.maxX;o<=s;++o)for(var a=i.minY,c=i.maxY;a<=c;++a)r([e,o,a])},n.prototype.forEachTileCoordParentTileRange=function(t,e,r,i){var s,a,c=null,h=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):c=this.getTileCoordExtent(t,i);h>=this.minZoom;){if(e(h,2===this.zoomFactor_?th(s=Math.floor(s/2),s,a=Math.floor(a/2),a,r):this.getTileRangeForExtentAndZ(c,h,r)))return!0;--h}return!1},n.prototype.getExtent=function(){return this.extent_},n.prototype.getMaxZoom=function(){return this.maxZoom},n.prototype.getMinZoom=function(){return this.minZoom},n.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},n.prototype.getResolution=function(t){return this.resolutions_[t]},n.prototype.getResolutions=function(){return this.resolutions_},n.prototype.getTileCoordChildTileRange=function(t,e,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*t[1],o=2*t[2];return th(i,i+1,o,o+1,e)}var s=this.getTileCoordExtent(t,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,e)}return null},n.prototype.getTileRangeForTileCoordAndZ=function(t,e,r){if(e>this.maxZoom||e<this.minZoom)return null;var i=t[0],o=t[1],s=t[2];if(e===i)return th(o,s,o,s,r);if(this.zoomFactor_){var a=Math.pow(this.zoomFactor_,e-i),c=Math.floor(o*a),h=Math.floor(s*a);return e<i?th(c,c,h,h,r):th(c,Math.floor(a*(o+1))-1,h,Math.floor(a*(s+1))-1,r)}var E=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(E,e,r)},n.prototype.getTileRangeExtent=function(t,e,r){var i=this.getOrigin(t),o=this.getResolution(t),s=$a(this.getTileSize(t),this.tmpSize_);return W(i[0]+e.minX*s[0]*o,i[1]+e.minY*s[1]*o,i[0]+(e.maxX+1)*s[0]*o,i[1]+(e.maxY+1)*s[1]*o,r)},n.prototype.getTileRangeForExtentAndZ=function(t,e,r){var i=px;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,i);var o=i[1],s=i[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,i),th(o,i[1],s,i[2],r)},n.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),r=this.getResolution(t[0]),i=$a(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*r,e[1]-(t[2]+.5)*i[1]*r]},n.prototype.getTileCoordExtent=function(t,e){var r=this.getOrigin(t[0]),i=this.getResolution(t[0]),o=$a(this.getTileSize(t[0]),this.tmpSize_),s=r[0]+t[1]*o[0]*i,a=r[1]-(t[2]+1)*o[1]*i;return W(s,a,s+o[0]*i,a+o[1]*i,e)},n.prototype.getTileCoordForCoordAndResolution=function(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)},n.prototype.getTileCoordForXYAndResolution_=function(t,e,r,i,o){var s=this.getZForResolution(r),a=r/this.getResolution(s),c=this.getOrigin(s),h=$a(this.getTileSize(s),this.tmpSize_),m=i?.5:0,E=Math.floor((t-c[0])/r+(i?.5:0)),S=Math.floor((c[1]-e)/r+m),x=a*E/h[0],P=a*S/h[1];return i?(x=Math.ceil(x)-1,P=Math.ceil(P)-1):(x=Math.floor(x),P=Math.floor(P)),Ub(s,x,P,o)},n.prototype.getTileCoordForXYAndZ_=function(t,e,r,i,o){var s=this.getOrigin(r),a=this.getResolution(r),c=$a(this.getTileSize(r),this.tmpSize_),p=i?.5:0,m=Math.floor((t-s[0])/a+(i?.5:0)),E=Math.floor((s[1]-e)/a+p),S=m/c[0],x=E/c[1];return i?(S=Math.ceil(S)-1,x=Math.ceil(x)-1):(S=Math.floor(S),x=Math.floor(x)),Ub(r,S,x,o)},n.prototype.getTileCoordForCoordAndZ=function(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)},n.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},n.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},n.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},n.prototype.getZForResolution=function(t,e){return mt(Se(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},n.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,r=new Array(e),i=this.minZoom;i<e;++i)r[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=r},n}();function Hb(n){var t=n.getDefaultTileGrid();return t||(t=Yy(n),n.setDefaultTileGrid(t)),t}function el(n){var t=n||{},e=t.extent||Zi("EPSG:3857").getExtent(),r={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:hs(e,t.maxZoom,t.tileSize,t.maxResolution)};return new Wy(r)}function hs(n,t,e,r){for(var i=void 0!==t?t:42,o=yo(n),s=Yi(n),a=$a(void 0!==e?e:256),c=r>0?r:Math.max(s/a[0],o/a[1]),h=i+1,p=new Array(h),m=0;m<h;++m)p[m]=c/Math.pow(2,m);return p}function Yy(n,t,e,r){return function(n,t,e,r){var i=void 0!==r?r:"top-left",o=hs(n,t,e);return new Wy({extent:n,origin:Hs(n,i),resolutions:o,tileSize:e})}(h0(n),t,e,r)}function h0(n){var t=(n=Zi(n)).getExtent();if(!t){var e=180*wr[en.DEGREES]/n.getMetersPerUnit();t=W(-e,-e,e,e)}return t}const qy=function(){function n(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0}return n.prototype.getReadOptions=function(t,e){var r;if(e){var i=e.dataProjection?Zi(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()===en.TILE_PIXELS&&(i=Zi(i)).setWorldExtent(e.extent),r={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(r)},n.prototype.adaptOptions=function(t){return xt({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},n.prototype.getType=function(){return Ht()},n.prototype.readFeature=function(t,e){return Ht()},n.prototype.readFeatures=function(t,e){return Ht()},n.prototype.readGeometry=function(t,e){return Ht()},n.prototype.readProjection=function(t){return Ht()},n.prototype.writeFeature=function(t,e){return Ht()},n.prototype.writeFeatures=function(t,e){return Ht()},n.prototype.writeGeometry=function(t,e){return Ht()},n}();function tp(n,t,e){var o,r=e?Zi(e.featureProjection):null,i=e?Zi(e.dataProjection):null;if(o=r&&i&&!ba(r,i)?(t?n.clone():n).transform(t?r:i,t?i:r):n,t&&e&&void 0!==e.decimals){var s=Math.pow(10,e.decimals);o===n&&(o=n.clone()),o.applyTransform(function(c){for(var h=0,p=c.length;h<p;++h)c[h]=Math.round(c[h]*s)/s;return c})}return o}function np(n,t,e,r,i,o,s){var a,c,h=(e-t)/r;if(1===h)a=t;else if(2===h)a=t,c=i;else if(0!==h){for(var p=n[t],m=n[t+1],E=0,S=[0],x=t+r;x<e;x+=r){var P=n[x],R=n[x+1];E+=Math.sqrt((P-p)*(P-p)+(R-m)*(R-m)),S.push(E),p=P,m=R}var F=i*E,D=function(n,t,e){for(var r,i,o=at,s=0,a=n.length,c=!1;s<a;)(i=+o(n[r=s+(a-s>>1)],t))<0?s=r+1:(a=r,c=!i);return c?s:~s}(S,F);D<0?(c=(F-S[-D-2])/(S[-D-1]-S[-D-2]),a=t+(-D-2)*r):a=t+D*r}var j=s>1?s:2,G=o||new Array(j);for(x=0;x<j;++x)G[x]=void 0===a?NaN:void 0===c?n[a+x]:Kr(n[a+x],n[a+r+x],c);return G}function p0(n,t,e,r,i,o){if(e==t)return null;var s;if(i<n[t+r-1])return o?((s=n.slice(t,t+r))[r-1]=i,s):null;if(n[e-1]<i)return o?((s=n.slice(e-r,e))[r-1]=i,s):null;if(i==n[t+r-1])return n.slice(t,t+r);for(var a=t/r,c=e/r;a<c;){var h=a+c>>1;i<n[(h+1)*r-1]?c=h:a=h+1}var p=n[a*r-1];if(i==p)return n.slice((a-1)*r,(a-1)*r+r);var E=(i-p)/(n[(a+1)*r-1]-p);s=[];for(var S=0;S<r-1;++S)s.push(Kr(n[(a-1)*r+S],n[a*r+S],E));return s.push(i),s}function rp(n,t,e,r){for(var i=n[t],o=n[t+1],s=0,a=t+r;a<e;a+=r){var c=n[a],h=n[a+1];s+=Math.sqrt((c-i)*(c-i)+(h-o)*(h-o)),i=c,o=h}return s}var Xy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Uh=function(n){function t(e,r){var i=n.call(this)||this;return i.flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?i.setCoordinates(e,r):i.setFlatCoordinates(r,e),i}return Xy(t,n),t.prototype.appendCoordinate=function(e){this.flatCoordinates?Be(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()},t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,r,i,o){return o<ys(this.getExtent(),e,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ad(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,r,i,o))},t.prototype.forEachSegment=function(e){return et(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},t.prototype.getCoordinateAtM=function(e,r){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:p0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,void 0!==r&&r)},t.prototype.getCoordinates=function(){return bc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinateAt=function(e,r){return np(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r,this.stride)},t.prototype.getLength=function(){return rp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},t.prototype.getSimplifiedGeometryInternal=function(e){var r=[];return r.length=Ec(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r,0),new t(r,"XY")},t.prototype.getType=function(){return Wt.LINE_STRING},t.prototype.intersectsExtent=function(e){return jt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},t.prototype.setCoordinates=function(e,r){this.setLayout(r,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Lf(this.flatCoordinates,0,e,this.stride),this.changed()},t}(sd);var Cg=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const m0=function(n){function t(e,r,i){var o=n.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(e[0]))o.setCoordinates(e,r);else if(void 0!==r&&i)o.setFlatCoordinates(r,e),o.ends_=i;else{for(var s=o.getLayout(),a=e,c=[],h=[],p=0,m=a.length;p<m;++p){var E=a[p];0===p&&(s=E.getLayout()),Be(c,E.getFlatCoordinates()),h.push(c.length)}o.setFlatCoordinates(s,c),o.ends_=h}return o}return Cg(t,n),t.prototype.appendLineString=function(e){this.flatCoordinates?Be(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,r,i,o){return o<ys(this.getExtent(),e,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ng(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rg(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,r,i,o))},t.prototype.getCoordinateAtM=function(e,r,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:function(n,t,e,r,i,o,s){if(s)return p0(n,t,e[e.length-1],r,i,o);var a;if(i<n[r-1])return o?((a=n.slice(0,r))[r-1]=i,a):null;if(n[n.length-1]<i)return o?((a=n.slice(n.length-r))[r-1]=i,a):null;for(var c=0,h=e.length;c<h;++c){var p=e[c];if(t!=p){if(i<n[t+r-1])return null;if(i<=n[p-1])return p0(n,t,p,r,i,!1);t=p}}return null}(this.flatCoordinates,0,this.ends_,this.stride,e,void 0!==r&&r,void 0!==i&&i)},t.prototype.getCoordinates=function(){return ld(this.flatCoordinates,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getLineString=function(e){return e<0||this.ends_.length<=e?null:new Uh(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)},t.prototype.getLineStrings=function(){for(var e=this.flatCoordinates,r=this.ends_,i=this.layout,o=[],s=0,a=0,c=r.length;a<c;++a){var h=r[a],p=new Uh(e.slice(s,h),i);o.push(p),s=h}return o},t.prototype.getFlatMidpoints=function(){for(var e=[],r=this.flatCoordinates,i=0,o=this.ends_,s=this.stride,a=0,c=o.length;a<c;++a){var h=o[a];Be(e,np(r,i,h,s,.5)),i=h}return e},t.prototype.getSimplifiedGeometryInternal=function(e){var r=[],i=[];return r.length=function(n,t,e,r,i,o,s,a){for(var c=0,h=e.length;c<h;++c){var p=e[c];s=Ec(n,t,p,r,i,o,s),a.push(s),t=p}return s}(this.flatCoordinates,0,this.ends_,this.stride,e,r,0,i),new t(r,"XY",i)},t.prototype.getType=function(){return Wt.MULTI_LINE_STRING},t.prototype.intersectsExtent=function(e){return function(n,t,e,r,i){for(var o=0,s=e.length;o<s;++o){if(jt(n,t,e[o],r,i))return!0;t=e[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,e)},t.prototype.setCoordinates=function(e,r){this.setLayout(r,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=_c(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},t}(sd);var Xb=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Sg=function(n){function t(e,r){var i=n.call(this)||this;return r&&!Array.isArray(e[0])?i.setFlatCoordinates(r,e):i.setCoordinates(e,r),i}return Xb(t,n),t.prototype.appendPoint=function(e){this.flatCoordinates?Be(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()},t.prototype.clone=function(){var e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e},t.prototype.closestPointXY=function(e,r,i,o){if(o<ys(this.getExtent(),e,r))return o;for(var s=this.flatCoordinates,a=this.stride,c=0,h=s.length;c<h;c+=a){var p=Sn(e,r,s[c],s[c+1]);if(p<o){o=p;for(var m=0;m<a;++m)i[m]=s[c+m];i.length=a}}return o},t.prototype.getCoordinates=function(){return bc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getPoint=function(e){return e<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=e?null:new B(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)},t.prototype.getPoints=function(){for(var e=this.flatCoordinates,r=this.layout,i=this.stride,o=[],s=0,a=e.length;s<a;s+=i){var c=new B(e.slice(s,s+i),r);o.push(c)}return o},t.prototype.getType=function(){return Wt.MULTI_POINT},t.prototype.intersectsExtent=function(e){for(var r=this.flatCoordinates,i=this.stride,o=0,s=r.length;o<s;o+=i)if(tt(e,r[o],r[o+1]))return!0;return!1},t.prototype.setCoordinates=function(e,r){this.setLayout(r,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Lf(this.flatCoordinates,0,e,this.stride),this.changed()},t}(sd);function Vh(n,t,e,r){for(var i=[],o=[1/0,1/0,-1/0,-1/0],s=0,a=e.length;s<a;++s){var c=e[s];o=vt(n,t,c[0],r),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=c[c.length-1]}return i}var yx=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Ky=function(n){function t(e,r,i){var o=n.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){for(var s=o.getLayout(),a=e,c=[],h=[],p=0,m=a.length;p<m;++p){var E=a[p];0===p&&(s=E.getLayout());for(var S=c.length,x=E.getEnds(),P=0,R=x.length;P<R;++P)x[P]+=S;Be(c,E.getFlatCoordinates()),h.push(x)}r=s,e=c,i=h}return void 0!==r&&i?(o.setFlatCoordinates(r,e),o.endss_=i):o.setCoordinates(e,r),o}return yx(t,n),t.prototype.appendPolygon=function(e){var r;if(this.flatCoordinates){var i=this.flatCoordinates.length;Be(this.flatCoordinates,e.getFlatCoordinates());for(var o=0,s=(r=e.getEnds().slice()).length;o<s;++o)r[o]+=i}else this.flatCoordinates=e.getFlatCoordinates().slice(),r=e.getEnds().slice(),this.endss_.push();this.endss_.push(r),this.changed()},t.prototype.clone=function(){for(var e=this.endss_.length,r=new Array(e),i=0;i<e;++i)r[i]=this.endss_[i].slice();var o=new t(this.flatCoordinates.slice(),this.layout,r);return o.applyProperties(this),o},t.prototype.closestPointXY=function(e,r,i,o){return o<ys(this.getExtent(),e,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(n,t,e,r,i){for(var o=0,s=e.length;o<s;++o){var a=e[o];i=ng(n,t,a,r,i),t=a[a.length-1]}return i}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(n,t,e,r,i,o,s,a,c,h,p){for(var m=[NaN,NaN],E=0,S=e.length;E<S;++E){var x=e[E];h=rg(n,t,x,r,i,true,s,a,c,h,m),t=x[x.length-1]}return h}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,e,r,i,o))},t.prototype.containsXY=function(e,r){return function(n,t,e,r,i,o){if(0===e.length)return!1;for(var s=0,a=e.length;s<a;++s){var c=e[s];if(z(n,t,c,r,i,o))return!0;t=c[c.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,r)},t.prototype.getArea=function(){return function(n,t,e,r){for(var i=0,o=0,s=e.length;o<s;++o){var a=e[o];i+=Um(n,t,a,r),t=a[a.length-1]}return i}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},t.prototype.getCoordinates=function(e){var r;return void 0!==e?fo(r=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,e):r=this.flatCoordinates,uy(r,0,this.endss_,this.stride)},t.prototype.getEndss=function(){return this.endss_},t.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var e=Vh(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Ne(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},t.prototype.getInteriorPoints=function(){return new Sg(this.getFlatInteriorPoints().slice(),"XYM")},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;!function(n,t,e,r,i){for(var o=0,s=e.length;o<s;++o){var a=e[o];if(!Va(n,t,a,r,undefined))return!1;a.length&&(t=a[a.length-1])}return!0}(e,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=fo(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=e,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(e){var r=[],i=[];return r.length=function(n,t,e,r,i,o,s,a){for(var c=0,h=e.length;c<h;++c){var p=e[c],m=[];s=og(n,t,p,r,i,o,s,m),a.push(m),t=p[p.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),r,0,i),new t(r,"XY",i)},t.prototype.getPolygon=function(e){if(e<0||this.endss_.length<=e)return null;var r;if(0===e)r=0;else{var i=this.endss_[e-1];r=i[i.length-1]}var o=this.endss_[e].slice(),s=o[o.length-1];if(0!==r)for(var a=0,c=o.length;a<c;++a)o[a]-=r;return new za(this.flatCoordinates.slice(r,s),this.layout,o)},t.prototype.getPolygons=function(){for(var e=this.layout,r=this.flatCoordinates,i=this.endss_,o=[],s=0,a=0,c=i.length;a<c;++a){var h=i[a].slice(),p=h[h.length-1];if(0!==s)for(var m=0,E=h.length;m<E;++m)h[m]-=s;var S=new za(r.slice(s,p),e,h);o.push(S),s=p}return o},t.prototype.getType=function(){return Wt.MULTI_POLYGON},t.prototype.intersectsExtent=function(e){return function(n,t,e,r,i){for(var o=0,s=e.length;o<s;++o){var a=e[o];if(oi(n,t,a,r,i))return!0;t=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)},t.prototype.setCoordinates=function(e,r){this.setLayout(r,e,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=function(n,t,e,r,i){for(var o=i||[],s=0,a=0,c=e.length;a<c;++a){var h=_c(n,t,e[a],r,o[s]);o[s++]=h,t=h[h.length-1]}return o.length=s,o}(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var o=i[i.length-1];this.flatCoordinates.length=0===o.length?0:o[o.length-1]}this.changed()},t}(sd);var Kb=ee(6697),Zy=ee.n(Kb),_x=[1,0,0,1,0,0],zh=function(){function n(t,e,r,i,o){this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=i}return n.prototype.get=function(t){return this.properties_[t]},n.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===Wt.POINT?fe(this.flatCoordinates_):vt(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},n.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=Xo(this.getExtent());this.flatInteriorPoints_=ae(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},n.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=Vh(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=Ne(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},n.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=np(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},n.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,i=0,o=r.length;i<o;++i){var s=r[i],a=np(t,e,s,2,.5);Be(this.flatMidpoints_,a),e=s}}return this.flatMidpoints_},n.prototype.getId=function(){return this.id_},n.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},n.prototype.getGeometry=function(){return this},n.prototype.getSimplifiedGeometry=function(t){return this},n.prototype.simplifyTransformed=function(t,e){return this},n.prototype.getProperties=function(){return this.properties_},n.prototype.getStride=function(){return 2},n.prototype.getStyleFunction=function(){},n.prototype.getType=function(){return this.type_},n.prototype.transform=function(t){var e=(t=Zi(t)).getExtent(),r=t.getWorldExtent();if(e&&r){var i=yo(r)/yo(e);In(_x,r[0],r[3],i,-i,0,0,0),Is(this.flatCoordinates_,0,this.flatCoordinates_.length,2,_x,this.flatCoordinates_)}},n.prototype.getEnds=function(){return this.ends_},n}();zh.prototype.getEndss=zh.prototype.getEnds,zh.prototype.getFlatCoordinates=zh.prototype.getOrientedFlatCoordinates;const Ql=zh;var Zb=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function Jb(n,t,e){if(3===n){var r={keys:[],values:[],features:[]},i=e.readVarint()+e.pos;e.readFields(eA,r,i),r.length=r.features.length,r.length&&(t[r.name]=r)}}function eA(n,t,e){if(15===n)t.version=e.readVarint();else if(1===n)t.name=e.readString();else if(5===n)t.extent=e.readVarint();else if(2===n)t.features.push(e.pos);else if(3===n)t.keys.push(e.readString());else if(4===n){for(var r=null,i=e.readVarint()+e.pos;e.pos<i;)r=1==(n=e.readVarint()>>3)?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null;t.values.push(r)}}function Qb(n,t,e){if(1==n)t.id=e.readVarint();else if(2==n)for(var r=e.readVarint()+e.pos;e.pos<r;){var i=t.layer.keys[e.readVarint()],o=t.layer.values[e.readVarint()];t.properties[i]=o}else 3==n?t.type=e.readVarint():4==n&&(t.geometry=e.pos)}function bx(n,t,e){n.pos=t.features[e];var r=n.readVarint()+n.pos,i={layer:t,type:0,properties:{}};return n.readFields(Qb,i,r),i}const wx=function(n){function t(e){var r=n.call(this)||this,i=e||{};return r.dataProjection=new ke({code:"",units:en.TILE_PIXELS}),r.featureClass_=i.featureClass?i.featureClass:Ql,r.geometryName_=i.geometryName,r.layerName_=i.layerName?i.layerName:"layer",r.layers_=i.layers?i.layers:null,r.idProperty_=i.idProperty,r}return Zb(t,n),t.prototype.readRawGeometry_=function(e,r,i,o){e.pos=r.geometry;for(var s=e.readVarint()+e.pos,a=1,c=0,h=0,p=0,m=0,E=0;e.pos<s;){if(!c){var S=e.readVarint();a=7&S,c=S>>3}c--,1===a||2===a?(h+=e.readSVarint(),p+=e.readSVarint(),1===a&&m>E&&(o.push(m),E=m),i.push(h,p),m+=2):7===a?m>E&&(i.push(i[E],i[E+1]),m+=2):Nn(!1,59)}m>E&&(o.push(m),E=m)},t.prototype.createFeature_=function(e,r,i){var o=r.type;if(0===o)return null;var s,c,a=r.properties;this.idProperty_?(c=a[this.idProperty_],delete a[this.idProperty_]):c=r.id,a[this.layerName_]=r.layer.name;var h=[],p=[];this.readRawGeometry_(e,r,h,p);var m=function(n,t){var e;return 1===n?e=1===t?Wt.POINT:Wt.MULTI_POINT:2===n?e=1===t?Wt.LINE_STRING:Wt.MULTI_LINE_STRING:3===n&&(e=Wt.POLYGON),e}(o,p.length);if(this.featureClass_===Ql)(s=new this.featureClass_(m,h,p,a,c)).transform(i.dataProjection);else{var E=void 0;if(m==Wt.POLYGON){for(var S=[],x=0,P=0,R=0,F=p.length;R<F;++R){var D=p[R];if(Nu(h,x,D,2)){if(0===S.length)continue;S[S.length-1].push(p[P])}else S.push(p.slice(P,R+1));P=R+1,x=D}E=S.length>1?new Ky(h,"XY",S):new za(h,"XY",p)}else E=m===Wt.POINT?new B(h,"XY"):m===Wt.LINE_STRING?new Uh(h,"XY"):m===Wt.POLYGON?new za(h,"XY",p):m===Wt.MULTI_POINT?new Sg(h,"XY"):m===Wt.MULTI_LINE_STRING?new m0(h,"XY",p):null;s=new(0,this.featureClass_),this.geometryName_&&s.setGeometryName(this.geometryName_);var G=tp(E,!1,i);s.setGeometry(G),s.setId(c),s.setProperties(a,!0)}return s},t.prototype.getType=function(){return"arraybuffer"},t.prototype.readFeatures=function(e,r){var i=this.layers_,o=this.adaptOptions(r),s=Zi(o.dataProjection);s.setWorldExtent(o.extent),o.dataProjection=s;var a=new Kb(e),c=a.readFields(Jb,{}),h=[];for(var p in c)if(!i||-1!=i.indexOf(p)){var m=c[p];s.setExtent(m?[0,0,m.extent,m.extent]:null);for(var S=0,x=m.length;S<x;++S){var P=bx(a,m,S);h.push(this.createFeature_(a,P,o))}}return h},t.prototype.readProjection=function(e){return this.dataProjection},t.prototype.setLayers=function(e){this.layers_=e},t}(qy);var $b=ee(3036);const ip=function(){function n(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=$a(t.scale),this.displacement_=t.displacement}return n.prototype.clone=function(){var t=this.getScale();return new n({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},n.prototype.getOpacity=function(){return this.opacity_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getScaleArray=function(){return this.scaleArray_},n.prototype.getDisplacement=function(){return this.displacement_},n.prototype.getAnchor=function(){return Ht()},n.prototype.getImage=function(t){return Ht()},n.prototype.getHitDetectionImage=function(){return Ht()},n.prototype.getPixelRatio=function(t){return 1},n.prototype.getImageState=function(){return Ht()},n.prototype.getImageSize=function(){return Ht()},n.prototype.getOrigin=function(){return Ht()},n.prototype.getSize=function(){return Ht()},n.prototype.setOpacity=function(t){this.opacity_=t},n.prototype.setRotateWithView=function(t){this.rotateWithView_=t},n.prototype.setRotation=function(t){this.rotation_=t},n.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=$a(t)},n.prototype.listenImageChange=function(t){Ht()},n.prototype.load=function(){Ht()},n.prototype.unlistenImageChange=function(t){Ht()},n}();function Vu(n){return Array.isArray(n)?Us(n):n}var v0=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Cx=function(n){function t(e){var r=this;return(r=n.call(this,{opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=void 0,r.hitDetectionCanvas_=null,r.fill_=void 0!==e.fill?e.fill:null,r.origin_=[0,0],r.points_=e.points,r.radius_=void 0!==e.radius?e.radius:e.radius1,r.radius2_=e.radius2,r.angle_=void 0!==e.angle?e.angle:0,r.stroke_=void 0!==e.stroke?e.stroke:null,r.anchor_=null,r.size_=null,r.renderOptions_=null,r.render(),r}return v0(t,n),t.prototype.clone=function(){var e=this.getScale(),r=new t({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice()});return r.setOpacity(this.getOpacity()),r},t.prototype.getAnchor=function(){return this.anchor_},t.prototype.getAngle=function(){return this.angle_},t.prototype.getFill=function(){return this.fill_},t.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},t.prototype.getImage=function(e){var r=this.canvas_[e];if(!r){var i=this.renderOptions_,o=Tl(i.size*e,i.size*e);this.draw_(i,o,e),this.canvas_[e]=r=o.canvas}return r},t.prototype.getPixelRatio=function(e){return e},t.prototype.getImageSize=function(){return this.size_},t.prototype.getImageState=function(){return 2},t.prototype.getOrigin=function(){return this.origin_},t.prototype.getPoints=function(){return this.points_},t.prototype.getRadius=function(){return this.radius_},t.prototype.getRadius2=function(){return this.radius2_},t.prototype.getSize=function(){return this.size_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.listenImageChange=function(e){},t.prototype.load=function(){},t.prototype.unlistenImageChange=function(e){},t.prototype.calculateLineJoinSize_=function(e,r,i){if(0===r||this.points_===1/0||"bevel"!==e&&"miter"!==e)return r;var o=this.radius_,s=void 0===this.radius2_?o:this.radius2_;if(o<s){var a=o;o=s,s=a}var h=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),p=s*Math.sin(h),E=o-Math.sqrt(s*s-p*p),S=Math.sqrt(p*p+E*E),x=S/p;if("miter"===e&&x<=i)return x*r;var P=r/2/x,R=r/2*(E/S),D=Math.sqrt((o+P)*(o+P)+R*R)-o;if(void 0===this.radius2_||"bevel"===e)return 2*D;var j=o*Math.sin(h),X=s-Math.sqrt(o*o-j*j),$=Math.sqrt(j*j+X*X)/j;return $<=i?2*Math.max(D,$*r/2-s-o):2*D},t.prototype.createRenderOptions=function(){var s,e=kh,r=0,i=null,o=0,a=0;this.stroke_&&(null===(s=this.stroke_.getColor())&&(s=Jd),s=Vu(s),void 0===(a=this.stroke_.getWidth())&&(a=1),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(e=this.stroke_.getLineJoin())&&(e=kh),void 0===(r=this.stroke_.getMiterLimit())&&(r=10));var c=this.calculateLineJoinSize_(e,a,r),h=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:s,strokeWidth:a,size:Math.ceil(2*h+c),lineDash:i,lineDashOffset:o,lineJoin:e,miterLimit:r}},t.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var e=this.renderOptions_.size,r=this.getDisplacement();this.canvas_={},this.anchor_=[e/2-r[0],e/2+r[1]],this.size_=[e,e]},t.prototype.draw_=function(e,r,i){if(r.scale(i,i),r.translate(e.size/2,e.size/2),this.createPath_(r),this.fill_){var o=this.fill_.getColor();null===o&&(o=Ha),r.fillStyle=Vu(o),r.fill()}this.stroke_&&(r.strokeStyle=e.strokeStyle,r.lineWidth=e.strokeWidth,r.setLineDash&&e.lineDash&&(r.setLineDash(e.lineDash),r.lineDashOffset=e.lineDashOffset),r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit,r.stroke())},t.prototype.createHitDetectionCanvas_=function(e){if(this.fill_){var r=this.fill_.getColor(),i=0;if("string"==typeof r&&(r=Ca(r)),null===r?i=1:Array.isArray(r)&&(i=4===r.length?r[3]:1),0===i){var o=Tl(e.size,e.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(e,o)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},t.prototype.createPath_=function(e){var r=this.points_,i=this.radius_;if(r===1/0)e.arc(0,0,i,0,2*Math.PI);else{var o=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(r*=2);for(var s=this.angle_-Math.PI/2,a=2*Math.PI/r,c=0;c<r;c++){var h=s+c*a,p=c%2==0?i:o;e.lineTo(p*Math.cos(h),p*Math.sin(h))}e.closePath()}},t.prototype.drawHitDetectionCanvas_=function(e,r){r.translate(e.size/2,e.size/2),this.createPath_(r),r.fillStyle=Ha,r.fill(),this.stroke_&&(r.strokeStyle=e.strokeStyle,r.lineWidth=e.strokeWidth,e.lineDash&&(r.setLineDash(e.lineDash),r.lineDashOffset=e.lineDashOffset),r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit,r.stroke())},t}(ip);var Sx=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Ml=function(n){function t(e){var i=e||{};return n.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,scale:void 0!==i.scale?i.scale:1,rotation:void 0!==i.rotation?i.rotation:0,rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return Sx(t,n),t.prototype.clone=function(){var e=this.getScale(),r=new t({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return r.setOpacity(this.getOpacity()),r},t.prototype.setRadius=function(e){this.radius_=e,this.render()},t}(Cx),md=function(){function n(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return n.prototype.clone=function(){var t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0})},n.prototype.getColor=function(){return this.color_},n.prototype.setColor=function(t){this.color_=t},n}(),op=function(){function n(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return n.prototype.clone=function(){var t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},n.prototype.getColor=function(){return this.color_},n.prototype.getLineCap=function(){return this.lineCap_},n.prototype.getLineDash=function(){return this.lineDash_},n.prototype.getLineDashOffset=function(){return this.lineDashOffset_},n.prototype.getLineJoin=function(){return this.lineJoin_},n.prototype.getMiterLimit=function(){return this.miterLimit_},n.prototype.getWidth=function(){return this.width_},n.prototype.setColor=function(t){this.color_=t},n.prototype.setLineCap=function(t){this.lineCap_=t},n.prototype.setLineDash=function(t){this.lineDash_=t},n.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},n.prototype.setLineJoin=function(t){this.lineJoin_=t},n.prototype.setMiterLimit=function(t){this.miterLimit_=t},n.prototype.setWidth=function(t){this.width_=t},n}();var Hh=function(){function n(t){var e=t||{};this.geometry_=null,this.geometryFunction_=_0,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return n.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new n({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},n.prototype.getRenderer=function(){return this.renderer_},n.prototype.setRenderer=function(t){this.renderer_=t},n.prototype.getGeometry=function(){return this.geometry_},n.prototype.getGeometryFunction=function(){return this.geometryFunction_},n.prototype.getFill=function(){return this.fill_},n.prototype.setFill=function(t){this.fill_=t},n.prototype.getImage=function(){return this.image_},n.prototype.setImage=function(t){this.image_=t},n.prototype.getStroke=function(){return this.stroke_},n.prototype.setStroke=function(t){this.stroke_=t},n.prototype.getText=function(){return this.text_},n.prototype.setText=function(t){this.text_=t},n.prototype.getZIndex=function(){return this.zIndex_},n.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=_0,this.geometry_=t},n.prototype.setZIndex=function(t){this.zIndex_=t},n}(),Ic=null;function xg(n,t){if(!Ic){var e=new md({color:"rgba(255,255,255,0.4)"}),r=new op({color:"#3399CC",width:1.25});Ic=[new Hh({image:new Ml({fill:e,stroke:r,radius:5}),fill:e,stroke:r})]}return Ic}function _0(n){return n.getGeometry()}const Wh=Hh;var tw=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const e_=function(n){function t(e){var r=this,i=e||{},o=xt({},i);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,(r=n.call(this,o)||this).declutter_=void 0!==i.declutter&&i.declutter,r.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(i.style),r.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,r.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,r}return tw(t,n),t.prototype.getDeclutter=function(){return this.declutter_},t.prototype.getFeatures=function(e){return n.prototype.getFeatures.call(this,e)},t.prototype.getRenderBuffer=function(){return this.renderBuffer_},t.prototype.getRenderOrder=function(){return this.get("renderOrder")},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},t.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},t.prototype.renderDeclutter=function(e){e.declutterTree||(e.declutterTree=new $b(9)),this.getRenderer().renderDeclutter(e)},t.prototype.setRenderOrder=function(e){this.set("renderOrder",e)},t.prototype.setStyle=function(e){this.style_=void 0!==e?e:xg,this.styleFunction_=null===e?void 0:function(n){var t,e;"function"==typeof n?t=n:(Array.isArray(n)?e=n:(Nn("function"==typeof n.getZIndex,41),e=[n]),t=function(){return e});return t}(this.style_),this.changed()},t}(hd);var Yh={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Tg=[Yh.FILL],vd=[Yh.STROKE],qh=[Yh.BEGIN_PATH],sp=[Yh.CLOSE_PATH];const Qr=Yh,iA=function(){function n(){}return n.prototype.drawCustom=function(t,e,r){},n.prototype.drawGeometry=function(t){},n.prototype.setStyle=function(t){},n.prototype.drawCircle=function(t,e){},n.prototype.drawFeature=function(t,e){},n.prototype.drawGeometryCollection=function(t,e){},n.prototype.drawLineString=function(t,e){},n.prototype.drawMultiLineString=function(t,e){},n.prototype.drawMultiPoint=function(t,e){},n.prototype.drawMultiPolygon=function(t,e){},n.prototype.drawPoint=function(t,e){},n.prototype.drawPolygon=function(t,e){},n.prototype.drawText=function(t,e){},n.prototype.setFillStrokeStyle=function(t,e){},n.prototype.setImageStyle=function(t,e){},n.prototype.setTextStyle=function(t,e){},n}();var oA=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const t_=function(n){function t(e,r,i,o){var s=n.call(this)||this;return s.tolerance=e,s.maxExtent=r,s.pixelRatio=o,s.maxLineWidth=0,s.resolution=i,s.beginGeometryInstruction1_=null,s.beginGeometryInstruction2_=null,s.bufferedMaxExtent_=null,s.instructions=[],s.coordinates=[],s.tmpCoordinate_=[],s.hitDetectionInstructions=[],s.state={},s}return oA(t,n),t.prototype.applyPixelRatio=function(e){var r=this.pixelRatio;return 1==r?e:e.map(function(i){return i*r})},t.prototype.appendFlatPointCoordinates=function(e,r){for(var i=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,s=this.coordinates,a=s.length,c=0,h=e.length;c<h;c+=r)o[0]=e[c],o[1]=e[c+1],qo(i,o)&&(s[a++]=o[0],s[a++]=o[1]);return a},t.prototype.appendFlatLineCoordinates=function(e,r,i,o,s,a){var c=this.coordinates,h=c.length,p=this.getBufferedMaxExtent();a&&(r+=o);var P,R,F,m=e[r],E=e[r+1],S=this.tmpCoordinate_,x=!0;for(P=r+o;P<i;P+=o)S[0]=e[P],S[1]=e[P+1],(F=Je(p,S))!==R?(x&&(c[h++]=m,c[h++]=E,x=!1),c[h++]=S[0],c[h++]=S[1]):1===F?(c[h++]=S[0],c[h++]=S[1],x=!1):x=!0,m=S[0],E=S[1],R=F;return(s&&x||P===r+o)&&(c[h++]=m,c[h++]=E),h},t.prototype.drawCustomCoordinates_=function(e,r,i,o,s){for(var a=0,c=i.length;a<c;++a){var h=i[a],p=this.appendFlatLineCoordinates(e,r,h,o,!1,!1);s.push(p),r=h}return r},t.prototype.drawCustom=function(e,r,i){this.beginGeometry(e,r);var c,h,p,m,E,o=e.getType(),s=e.getStride(),a=this.coordinates.length;if(o==Wt.MULTI_POLYGON){c=e.getOrientedFlatCoordinates(),m=[];var S=e.getEndss();E=0;for(var x=0,P=S.length;x<P;++x){var R=[];E=this.drawCustomCoordinates_(c,E,S[x],s,R),m.push(R)}this.instructions.push([Qr.CUSTOM,a,m,e,i,uy])}else o==Wt.POLYGON||o==Wt.MULTI_LINE_STRING?(p=[],c=o==Wt.POLYGON?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),E=this.drawCustomCoordinates_(c,0,e.getEnds(),s,p),this.instructions.push([Qr.CUSTOM,a,p,e,i,ld])):o==Wt.LINE_STRING||o==Wt.CIRCLE?(c=e.getFlatCoordinates(),h=this.appendFlatLineCoordinates(c,0,c.length,s,!1,!1),this.instructions.push([Qr.CUSTOM,a,h,e,i,bc])):o==Wt.MULTI_POINT?(c=e.getFlatCoordinates(),(h=this.appendFlatPointCoordinates(c,s))>a&&this.instructions.push([Qr.CUSTOM,a,h,e,i,bc])):o==Wt.POINT&&(c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),this.instructions.push([Qr.CUSTOM,a,h=this.coordinates.length,e,i]));this.endGeometry(r)},t.prototype.beginGeometry=function(e,r){this.beginGeometryInstruction1_=[Qr.BEGIN_GEOMETRY,r,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Qr.BEGIN_GEOMETRY,r,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},t.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},t.prototype.reverseHitDetectionInstructions=function(){var e=this.hitDetectionInstructions;e.reverse();var r,o,s,i=e.length,a=-1;for(r=0;r<i;++r)(s=(o=e[r])[0])==Qr.END_GEOMETRY?a=r:s==Qr.BEGIN_GEOMETRY&&(o[2]=r,Le(this.hitDetectionInstructions,a,r),a=-1)},t.prototype.setFillStrokeStyle=function(e,r){var i=this.state;if(e){var o=e.getColor();i.fillStyle=Vu(o||Ha)}else i.fillStyle=void 0;if(r){var s=r.getColor();i.strokeStyle=Vu(s||Jd);var a=r.getLineCap();i.lineCap=void 0!==a?a:Vf;var c=r.getLineDash();i.lineDash=c?c.slice():Jl;var h=r.getLineDashOffset();i.lineDashOffset=h||0;var p=r.getLineJoin();i.lineJoin=void 0!==p?p:kh;var m=r.getWidth();i.lineWidth=void 0!==m?m:1;var E=r.getMiterLimit();i.miterLimit=void 0!==E?E:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},t.prototype.createFill=function(e){var r=e.fillStyle,i=[Qr.SET_FILL_STYLE,r];return"string"!=typeof r&&i.push(!0),i},t.prototype.applyStroke=function(e){this.instructions.push(this.createStroke(e))},t.prototype.createStroke=function(e){return[Qr.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]},t.prototype.updateFillStyle=function(e,r){var i=e.fillStyle;("string"!=typeof i||e.currentFillStyle!=i)&&(void 0!==i&&this.instructions.push(r.call(this,e)),e.currentFillStyle=i)},t.prototype.updateStrokeStyle=function(e,r){var i=e.strokeStyle,o=e.lineCap,s=e.lineDash,a=e.lineDashOffset,c=e.lineJoin,h=e.lineWidth,p=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=o||s!=e.currentLineDash&&!Me(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=c||e.currentLineWidth!=h||e.currentMiterLimit!=p)&&(void 0!==i&&r.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=o,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=c,e.currentLineWidth=h,e.currentMiterLimit=p)},t.prototype.endGeometry=function(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var r=[Qr.END_GEOMETRY,e];this.instructions.push(r),this.hitDetectionInstructions.push(r)},t.prototype.getBufferedMaxExtent=function(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Wi(this.maxExtent),this.maxLineWidth>0)&&vi(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_},t}(iA);var Hu=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const sA=function(n){function t(e,r,i,o){var s=n.call(this,e,r,i,o)||this;return s.hitDetectionImage_=null,s.image_=null,s.imagePixelRatio_=void 0,s.anchorX_=void 0,s.anchorY_=void 0,s.height_=void 0,s.opacity_=void 0,s.originX_=void 0,s.originY_=void 0,s.rotateWithView_=void 0,s.rotation_=void 0,s.scale_=void 0,s.width_=void 0,s.declutterImageWithText_=void 0,s}return Hu(t,n),t.prototype.drawPoint=function(e,r){if(this.image_){this.beginGeometry(e,r);var i=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(i,o);this.instructions.push([Qr.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Qr.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(r)}},t.prototype.drawMultiPoint=function(e,r){if(this.image_){this.beginGeometry(e,r);var i=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(i,o);this.instructions.push([Qr.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Qr.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(r)}},t.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,n.prototype.finish.call(this)},t.prototype.setImageStyle=function(e,r){var i=e.getAnchor(),o=e.getSize(),s=e.getHitDetectionImage(),a=e.getImage(this.pixelRatio),c=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=s,this.image_=a,this.height_=o[1],this.opacity_=e.getOpacity(),this.originX_=c[0],this.originY_=c[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=o[0],this.declutterImageWithText_=r},t}(t_);var n_=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const nh=function(n){function t(e,r,i,o){return n.call(this,e,r,i,o)||this}return n_(t,n),t.prototype.drawFlatCoordinates_=function(e,r,i,o){var s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,r,i,o,!1,!1),c=[Qr.MOVE_TO_LINE_TO,s,a];return this.instructions.push(c),this.hitDetectionInstructions.push(c),i},t.prototype.drawLineString=function(e,r){var i=this.state;if(void 0!==i.strokeStyle&&void 0!==i.lineWidth){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,r),this.hitDetectionInstructions.push([Qr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Jl,0],qh);var a=e.getFlatCoordinates(),c=e.getStride();this.drawFlatCoordinates_(a,0,a.length,c),this.hitDetectionInstructions.push(vd),this.endGeometry(r)}},t.prototype.drawMultiLineString=function(e,r){var i=this.state;if(void 0!==i.strokeStyle&&void 0!==i.lineWidth){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,r),this.hitDetectionInstructions.push([Qr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],qh);for(var a=e.getEnds(),c=e.getFlatCoordinates(),h=e.getStride(),p=0,m=0,E=a.length;m<E;++m)p=this.drawFlatCoordinates_(c,p,a[m],h);this.hitDetectionInstructions.push(vd),this.endGeometry(r)}},t.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(vd),this.reverseHitDetectionInstructions(),this.state=null,n.prototype.finish.call(this)},t.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(vd),e.lastStroke=this.coordinates.length),e.lastStroke=0,n.prototype.applyStroke.call(this,e),this.instructions.push(qh)},t}(t_);var r_=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const i_=function(n){function t(e,r,i,o){return n.call(this,e,r,i,o)||this}return r_(t,n),t.prototype.drawFlatCoordinatess_=function(e,r,i,o){var s=this.state,a=void 0!==s.fillStyle,c=void 0!==s.strokeStyle,h=i.length;this.instructions.push(qh),this.hitDetectionInstructions.push(qh);for(var p=0;p<h;++p){var m=i[p],E=this.coordinates.length,S=this.appendFlatLineCoordinates(e,r,m,o,!0,!c),x=[Qr.MOVE_TO_LINE_TO,E,S];this.instructions.push(x),this.hitDetectionInstructions.push(x),c&&(this.instructions.push(sp),this.hitDetectionInstructions.push(sp)),r=m}return a&&(this.instructions.push(Tg),this.hitDetectionInstructions.push(Tg)),c&&(this.instructions.push(vd),this.hitDetectionInstructions.push(vd)),r},t.prototype.drawCircle=function(e,r){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(e,r),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Qr.SET_FILL_STYLE,Ha]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Qr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var a=e.getFlatCoordinates(),c=e.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,c,!1,!1);var p=[Qr.CIRCLE,h];this.instructions.push(qh,p),this.hitDetectionInstructions.push(qh,p),void 0!==i.fillStyle&&(this.instructions.push(Tg),this.hitDetectionInstructions.push(Tg)),void 0!==i.strokeStyle&&(this.instructions.push(vd),this.hitDetectionInstructions.push(vd)),this.endGeometry(r)}},t.prototype.drawPolygon=function(e,r){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(e,r),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Qr.SET_FILL_STYLE,Ha]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Qr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var a=e.getEnds(),c=e.getOrientedFlatCoordinates(),h=e.getStride();this.drawFlatCoordinatess_(c,0,a,h),this.endGeometry(r)}},t.prototype.drawMultiPolygon=function(e,r){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(e,r),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Qr.SET_FILL_STYLE,Ha]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Qr.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var a=e.getEndss(),c=e.getOrientedFlatCoordinates(),h=e.getStride(),p=0,m=0,E=a.length;m<E;++m)p=this.drawFlatCoordinatess_(c,p,a[m],h);this.endGeometry(r)}},t.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var r=this.coordinates,i=0,o=r.length;i<o;++i)r[i]=Kd(r[i],e);return n.prototype.finish.call(this)},t.prototype.setFillStrokeStyles_=function(){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},t}(t_);function nw(n,t,e,r,i){var m,E,S,x,P,R,F,D,j,o=e,s=e,a=0,c=0,h=e;for(m=e;m<r;m+=i){var G=t[m],X=t[m+1];void 0!==x&&(D=G-x,j=X-P,S=Math.sqrt(D*D+j*j),void 0!==R&&(c+=E,Math.acos((R*D+F*j)/(E*S))>n&&(c>a&&(a=c,o=h,s=m),c=0,h=m-i)),E=S,R=D,F=j),x=G,P=X}return(c+=S)>a?[h,m]:[o,s]}var o_=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),w0={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Px={Circle:i_,Default:t_,Image:sA,LineString:nh,Polygon:i_,Text:function(n){function t(e,r,i,o){var s=n.call(this,e,r,i,o)||this;return s.labels_=null,s.text_="",s.textOffsetX_=0,s.textOffsetY_=0,s.textRotateWithView_=void 0,s.textRotation_=0,s.textFillState_=null,s.fillStates={},s.textStrokeState_=null,s.strokeStates={},s.textState_={},s.textStates={},s.textKey_="",s.fillKey_="",s.strokeKey_="",s.declutterImageWithText_=void 0,s}return o_(t,n),t.prototype.finish=function(){var e=n.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},t.prototype.drawText=function(e,r){var s=this.textState_;if(""!==this.text_&&s&&(this.textFillState_||this.textStrokeState_)){var a=this.coordinates,c=a.length,h=e.getType(),p=null,m=e.getStride();if("line"!==s.placement||h!=Wt.LINE_STRING&&h!=Wt.MULTI_LINE_STRING&&h!=Wt.POLYGON&&h!=Wt.MULTI_POLYGON){var $=s.overflow?null:[];switch(h){case Wt.POINT:case Wt.MULTI_POINT:p=e.getFlatCoordinates();break;case Wt.LINE_STRING:p=e.getFlatMidpoint();break;case Wt.CIRCLE:p=e.getCenter();break;case Wt.MULTI_LINE_STRING:p=e.getFlatMidpoints(),m=2;break;case Wt.POLYGON:p=e.getFlatInteriorPoint(),s.overflow||$.push(p[2]/this.resolution),m=3;break;case Wt.MULTI_POLYGON:var le=e.getFlatInteriorPoints();for(p=[],x=0,P=le.length;x<P;x+=3)s.overflow||$.push(le[x+2]/this.resolution),p.push(le[x],le[x+1]);if(0===p.length)return;m=2}if((J=this.appendFlatPointCoordinates(p,m))===c)return;if($&&(J-c)/2!=p.length/m){var ie=c/2;$=$.filter(function(Zt,gt){var Re=a[2*(ie+gt)]===p[gt*m]&&a[2*(ie+gt)+1]===p[gt*m+1];return Re||--ie,Re})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,r);var Fe=s.padding;if(Fe!=Fh&&(s.scale[0]<0||s.scale[1]<0)){var Ce=s.padding[0],$e=s.padding[1],ot=s.padding[2],st=s.padding[3];s.scale[0]<0&&($e=-$e,st=-st),s.scale[1]<0&&(Ce=-Ce,ot=-ot),Fe=[Ce,$e,ot,st]}var dt=this.pixelRatio;this.instructions.push([Qr.DRAW_IMAGE,c,J,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,Fe==Fh?Fh:Fe.map(function(Zt){return Zt*dt}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,$]);var kt=1/dt;this.hitDetectionInstructions.push([Qr.DRAW_IMAGE,c,J,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[kt,kt],NaN,this.declutterImageWithText_,Fe,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,$]),this.endGeometry(r)}else{if(!Oi(this.getBufferedMaxExtent(),e.getExtent()))return;var E=void 0;if(p=e.getFlatCoordinates(),h==Wt.LINE_STRING)E=[p.length];else if(h==Wt.MULTI_LINE_STRING)E=e.getEnds();else if(h==Wt.POLYGON)E=e.getEnds().slice(0,1);else if(h==Wt.MULTI_POLYGON){var S=e.getEndss();E=[];for(var x=0,P=S.length;x<P;++x)E.push(S[x][0])}this.beginGeometry(e,r);for(var R=s.textAlign,F=0,D=void 0,j=0,G=E.length;j<G;++j){if(null==R){var X=nw(s.maxAngle,p,F,E[j],m);F=X[0],D=X[1]}else D=E[j];for(x=F;x<D;x+=m)a.push(p[x],p[x+1]);var J;F=E[j],this.drawChars_(c,J=a.length),c=J}this.endGeometry(r)}}},t.prototype.saveTextStates_=function(){var e=this.textStrokeState_,r=this.textState_,i=this.textFillState_,o=this.strokeKey_;e&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));var s=this.textKey_;s in this.textStates||(this.textStates[s]={font:r.font,textAlign:r.textAlign||zf,textBaseline:r.textBaseline||qm,scale:r.scale});var a=this.fillKey_;i&&(a in this.fillStates||(this.fillStates[a]={fillStyle:i.fillStyle}))},t.prototype.drawChars_=function(e,r){var i=this.textStrokeState_,o=this.textState_,s=this.strokeKey_,a=this.textKey_,c=this.fillKey_;this.saveTextStates_();var h=this.pixelRatio,p=w0[o.textBaseline],m=this.textOffsetY_*h,E=this.text_,S=i?i.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([Qr.DRAW_CHARS,e,r,p,o.overflow,c,o.maxAngle,h,m,s,S*h,E,a,1]),this.hitDetectionInstructions.push([Qr.DRAW_CHARS,e,r,p,o.overflow,c,o.maxAngle,1,m,s,S,E,a,1/h])},t.prototype.setTextStyle=function(e,r){var i,o,s;if(e){var a=e.getFill();a?((o=this.textFillState_)||(this.textFillState_=o={}),o.fillStyle=Vu(a.getColor()||Ha)):this.textFillState_=o=null;var c=e.getStroke();if(c){(s=this.textStrokeState_)||(this.textStrokeState_=s={});var h=c.getLineDash(),p=c.getLineDashOffset(),m=c.getWidth(),E=c.getMiterLimit();s.lineCap=c.getLineCap()||Vf,s.lineDash=h?h.slice():Jl,s.lineDashOffset=void 0===p?0:p,s.lineJoin=c.getLineJoin()||kh,s.lineWidth=void 0===m?1:m,s.miterLimit=void 0===E?10:E,s.strokeStyle=Vu(c.getColor()||Jd)}else this.textStrokeState_=s=null;i=this.textState_;var S=e.getFont()||Lh;GI(S);var x=e.getScaleArray();i.overflow=e.getOverflow(),i.font=S,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.textBaseline=e.getTextBaseline()||qm,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Fh,i.scale=void 0===x?[1,1]:x;var P=e.getOffsetX(),R=e.getOffsetY(),F=e.getRotateWithView(),D=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===P?0:P,this.textOffsetY_=void 0===R?0:R,this.textRotateWithView_=void 0!==F&&F,this.textRotation_=void 0===D?0:D,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:Jt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+Jt(o.fillStyle):""}else this.text_="";this.declutterImageWithText_=r},t}(t_)};const Pg=function(){function n(t,e,r,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}return n.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var r=this.buildersByZIndex_[e];for(var i in r){var o=r[i].finish();t[e][i]=o}}return t},n.prototype.getBuilder=function(t,e){var r=void 0!==t?t.toString():"0",i=this.buildersByZIndex_[r];void 0===i&&(this.buildersByZIndex_[r]=i={});var o=i[e];return void 0===o&&(o=new(0,Px[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=o),o},n}();function s_(n,t,e,r,i,o,s,a,c,h,p,m){var E=n[t],S=n[t+1],x=0,P=0,R=0,F=0;function D(){x=E,P=S,E=n[t+=r],S=n[t+1],F+=R,R=Math.sqrt((E-x)*(E-x)+(S-P)*(S-P))}do{D()}while(t<e-r&&F+R<o);for(var j=(o-F)/R,G=Kr(x,E,j),X=Kr(P,S,j),J=t-r,$=F,le=o+a*c(h,i,p);t<e-r&&F+R<le;)D();var Ce,ie=Kr(x,E,j=(le-F)/R),Fe=Kr(P,S,j);if(m){var $e=[G,X,ie,Fe];_o($e,0,4,2,m,$e,$e),Ce=$e[0]>$e[2]}else Ce=G>ie;var ot=Math.PI,st=[],dt=J+r===t;if(R=0,F=$,E=n[t=J],S=n[t+1],dt){D();var kt=Math.atan2(S-P,E-x);return Ce&&(kt+=kt>0?-ot:ot),st[0]=[Qe=(ie+G)/2,Zt=(Fe+X)/2,(le-o)/2,kt,i],st}for(var gt,Re=0,Xe=i.length;Re<Xe;){D();var Oe=Math.atan2(S-P,E-x);if(Ce&&(Oe+=Oe>0?-ot:ot),void 0!==gt){var qt=Oe-gt;if(qt+=qt>ot?-2*ot:qt<-ot?2*ot:0,Math.abs(qt)>s)return null}gt=Oe;for(var Pt=Re,$t=0;Re<Xe;++Re){var Pn=a*c(h,i[Ce?Xe-Re-1:Re],p);if(t+r<e&&F+R<o+$t+Pn/2)break;$t+=Pn}if(Re!==Pt){var ft=Ce?i.substring(Xe-Pt,Xe-Re):i.substring(Pt,Re),Qe=Kr(x,E,j=(o+$t/2-F)/R),Zt=Kr(P,S,j);st.push([Qe,Zt,$t/2,Oe,ft]),o+=$t}}return st}var ap=[1/0,1/0,-1/0,-1/0],ih=[],Rl=[],Ol=[],Ac=[];function lp(n){return n[3].declutterBox}var Ig=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Mc(n,t){return("start"===t||"end"===t)&&!Ig.test(n)&&(t="start"===t?"left":"right"),w0[t]}const iw=function(){function n(t,e,r,i){this.overlaps=r,this.pixelRatio=e,this.resolution=t,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}return n.prototype.createLabel=function(t,e,r,i){var o=t+e+r+i;if(this.labels_[o])return this.labels_[o];var s=i?this.strokeStates[i]:null,a=r?this.fillStates[r]:null,c=this.textStates[e],h=this.pixelRatio,p=[c.scale[0]*h,c.scale[1]*h],m=Mc(t,c.textAlign||zf),E=i&&s.lineWidth?s.lineWidth:0,S=t.split("\n"),x=S.length,P=[],R=function(n,t,e){for(var r=t.length,i=0,o=0;o<r;++o){var s=wy(n,t[o]);i=Math.max(i,s),e.push(s)}return i}(c.font,S,P),F=BI(c.font),j=R+E,G=[],X=(j+2)*p[0],J=(F*x+E)*p[1],$={width:X<0?Math.floor(X):Math.ceil(X),height:J<0?Math.floor(J):Math.ceil(J),contextInstructions:G};(1!=p[0]||1!=p[1])&&G.push("scale",p),G.push("font",c.font),i&&(G.push("strokeStyle",s.strokeStyle),G.push("lineWidth",E),G.push("lineCap",s.lineCap),G.push("lineJoin",s.lineJoin),G.push("miterLimit",s.miterLimit),(lo?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(G.push("setLineDash",[s.lineDash]),G.push("lineDashOffset",s.lineDashOffset))),r&&G.push("fillStyle",a.fillStyle),G.push("textBaseline","middle"),G.push("textAlign","center");var Ce,ie=.5-m,Fe=m*j+ie*E;if(i)for(Ce=0;Ce<x;++Ce)G.push("strokeText",[S[Ce],Fe+ie*P[Ce],.5*(E+F)+Ce*F]);if(r)for(Ce=0;Ce<x;++Ce)G.push("fillText",[S[Ce],Fe+ie*P[Ce],.5*(E+F)+Ce*F]);return this.labels_[o]=$,$},n.prototype.replayTextBackground_=function(t,e,r,i,o,s,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,o),t.lineTo.apply(t,e),s&&(this.alignFill_=s[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},n.prototype.calculateImageOrLabelDimensions_=function(t,e,r,i,o,s,a,c,h,p,m,E,S,x,P,R){var ie,F=r-(a*=E[0]),D=i-(c*=E[1]),j=o+h>t?t-h:o,G=s+p>e?e-p:s,X=x[3]+j*E[0]+x[1],J=x[0]+G*E[1]+x[2],$=F-x[3],le=D-x[0];return(P||0!==m)&&(ih[0]=$,Ac[0]=$,ih[1]=le,Rl[1]=le,Rl[0]=$+X,Ol[0]=Rl[0],Ol[1]=le+J,Ac[1]=Ol[1]),0!==m?(Lo(ie=In([1,0,0,1,0,0],r,i,1,1,m,-r,-i),ih),Lo(ie,Rl),Lo(ie,Ol),Lo(ie,Ac),W(Math.min(ih[0],Rl[0],Ol[0],Ac[0]),Math.min(ih[1],Rl[1],Ol[1],Ac[1]),Math.max(ih[0],Rl[0],Ol[0],Ac[0]),Math.max(ih[1],Rl[1],Ol[1],Ac[1]),ap)):W(Math.min($,$+X),Math.min(le,le+J),Math.max($,$+X),Math.max(le,le+J),ap),S&&(F=Math.round(F),D=Math.round(D)),{drawImageX:F,drawImageY:D,drawImageW:j,drawImageH:G,originX:h,originY:p,declutterBox:{minX:ap[0],minY:ap[1],maxX:ap[2],maxY:ap[3],value:R},canvasTransform:ie,scale:E}},n.prototype.replayImageOrLabel_=function(t,e,r,i,o,s,a){var h=i.declutterBox,p=t.canvas,m=a?a[2]*i.scale[0]/2:0;return h.minX-m<=p.width/e&&h.maxX+m>=0&&h.minY-m<=p.height/e&&h.maxY+m>=0&&(!(!s&&!a)&&this.replayTextBackground_(t,ih,Rl,Ol,Ac,s,a),function(n,t,e,r,i,o,s,a,c,h,p){n.save(),1!==e&&(n.globalAlpha*=e),t&&n.setTransform.apply(n,t),r.contextInstructions?(n.translate(c,h),n.scale(p[0],p[1]),function(n,t){for(var e=n.contextInstructions,r=0,i=e.length;r<i;r+=2)Array.isArray(e[r+1])?t[e[r]].apply(t,e[r+1]):t[e[r]]=e[r+1]}(r,n)):p[0]<0||p[1]<0?(n.translate(c,h),n.scale(p[0],p[1]),n.drawImage(r,i,o,s,a,0,0,s,a)):n.drawImage(r,i,o,s,a,c,h,s*p[0],a*p[1]),n.restore()}(t,i.canvasTransform,o,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0},n.prototype.fill_=function(t){if(this.alignFill_){var e=Lo(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},n.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},n.prototype.drawLabelWithPointPlacement_=function(t,e,r,i){var o=this.textStates[e],s=this.createLabel(t,e,i,r),a=this.strokeStates[r],c=this.pixelRatio,h=Mc(t,o.textAlign||zf),p=w0[o.textBaseline||qm],m=a&&a.lineWidth?a.lineWidth:0;return{label:s,anchorX:h*(s.width/c-2*o.scale[0])+2*(.5-h)*m,anchorY:p*s.height/c+2*(.5-p)*m}},n.prototype.execute_=function(t,e,r,i,o,s,a,c){var h;this.pixelCoordinates_&&Me(r,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Is(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),function(n,t){n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5]}(this.renderedTransform_,r));for(var S,x,P,R,F,D,j,G,X,J,$,le,Zt,gt,Re,Xe,p=0,m=i.length,E=0,ie=0,Fe=0,Ce=null,$e=null,ot=this.coordinateCache_,st=this.viewRotation_,dt=Math.round(1e12*Math.atan2(-r[1],r[0]))/1e12,kt={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:st},Qe=this.instructions!=i||this.overlaps?0:200;p<m;){var Oe=i[p];switch(Oe[0]){case Qr.BEGIN_GEOMETRY:Xe=Oe[3],(Zt=Oe[1]).getGeometry()?void 0===a||Oi(a,Xe.getExtent())?++p:p=Oe[2]+1:p=Oe[2];break;case Qr.BEGIN_PATH:ie>Qe&&(this.fill_(t),ie=0),Fe>Qe&&(t.stroke(),Fe=0),!ie&&!Fe&&(t.beginPath(),R=NaN,F=NaN),++p;break;case Qr.CIRCLE:var Pt=h[E=Oe[1]],$t=h[E+1],ft=h[E+2]-Pt,Mn=h[E+3]-$t,$n=Math.sqrt(ft*ft+Mn*Mn);t.moveTo(Pt+$n,$t),t.arc(Pt,$t,$n,0,2*Math.PI,!0),++p;break;case Qr.CLOSE_PATH:t.closePath(),++p;break;case Qr.CUSTOM:E=Oe[1],S=Oe[2];var ai=Oe[4],yr=6==Oe.length?Oe[5]:void 0;kt.geometry=Oe[3],kt.feature=Zt,p in ot||(ot[p]=[]);var Mr=ot[p];yr?yr(h,E,S,2,Mr):(Mr[0]=h[E],Mr[1]=h[E+1],Mr.length=2),ai(Mr,kt),++p;break;case Qr.DRAW_IMAGE:E=Oe[1],S=Oe[2],x=Oe[4],P=Oe[5];var Ui=Oe[6],Wr=Oe[7],Ns=Oe[8],Nt=Oe[9],So=Oe[10],os=Oe[11],ts=Oe[12],$i=Oe[13],Ss=Oe[14];if(!(G=Oe[3])&&Oe.length>=19){var Xn=this.drawLabelWithPointPlacement_(X=Oe[18],J=Oe[19],$=Oe[20],le=Oe[21]);Oe[3]=G=Xn.label,Oe[4]=x=(Xn.anchorX-Oe[22])*this.pixelRatio,Oe[5]=P=(Xn.anchorY-Oe[23])*this.pixelRatio,Oe[6]=Ui=G.height,Oe[13]=$i=G.width}var zs=void 0;Oe.length>24&&(zs=Oe[24]);var co=void 0,Kn=void 0,ps=void 0;Oe.length>16?(co=Oe[15],Kn=Oe[16],ps=Oe[17]):(co=Fh,Kn=!1,ps=!1),So&&dt?os+=st:!So&&!dt&&(os-=st);for(var vo=0;E<S;E+=2)if(!(zs&&zs[vo++]<$i/this.pixelRatio)){var li=[t,e,G,Vr=this.calculateImageOrLabelDimensions_(G.width,G.height,h[E],h[E+1],$i,Ui,x,P,Ns,Nt,os,ts,o,co,Kn||ps,Zt),Wr,Kn?Ce:null,ps?$e:null],Mo=void 0,Qs=void 0;if(c&&Ss){var xs=S-E;if(!Ss[xs]){Ss[xs]=li;continue}if(Mo=Ss[xs],delete Ss[xs],Qs=lp(Mo),c.collides(Qs))continue}c&&c.collides(Vr.declutterBox)||(Mo&&(c&&c.insert(Qs),this.replayImageOrLabel_.apply(this,Mo)),c&&c.insert(Vr.declutterBox),this.replayImageOrLabel_.apply(this,li))}++p;break;case Qr.DRAW_CHARS:var ss=Oe[1],Fa=Oe[2],au=Oe[3],as=Oe[4];le=Oe[5];var ua=Oe[6],gs=Oe[7],Si=Oe[8];$=Oe[9];var Vo=Oe[10];X=Oe[11];var xf=[Oe[13],Oe[13]],Wl=this.textStates[J=Oe[12]],Yl=Wl.font,ql=[Wl.scale[0]*gs,Wl.scale[1]*gs],Ea=void 0;Yl in this.widths_?Ea=this.widths_[Yl]:this.widths_[Yl]=Ea={};var Fs=rp(h,ss,Fa,2),lu=Math.abs(ql[0])*mg(Yl,X,Ea);if(as||lu<=Fs){var ms=s_(h,ss,Fa,2,X,(Fs-lu)*w0[this.textStates[J].textAlign],ua,Math.abs(ql[0]),mg,Yl,Ea,dt?0:this.viewRotation_);e:if(ms){var zo=[],ls=void 0,ca=void 0,Gs=void 0,Xl=void 0;if($)for(ls=0,ca=ms.length;ls<ca;++ls){Gs=this.createLabel((Xl=ms[ls])[4],J,"",$);var Vr=this.calculateImageOrLabelDimensions_(Gs.width,Gs.height,Xl[0],Xl[1],Gs.width,Gs.height,x=Xl[2]+(ql[0]<0?-Vo:Vo),P=au*Gs.height+2*(.5-au)*Vo*ql[1]/ql[0]-Si,0,0,Xl[3],xf,!1,Fh,!1,Zt);if(c&&c.collides(Vr.declutterBox))break e;zo.push([t,e,Gs,Vr,1,null,null])}if(le)for(ls=0,ca=ms.length;ls<ca;++ls){if(Gs=this.createLabel((Xl=ms[ls])[4],J,le,""),Vr=this.calculateImageOrLabelDimensions_(Gs.width,Gs.height,Xl[0],Xl[1],Gs.width,Gs.height,x=Xl[2],P=au*Gs.height-Si,0,0,Xl[3],xf,!1,Fh,!1,Zt),c&&c.collides(Vr.declutterBox))break e;zo.push([t,e,Gs,Vr,1,null,null])}c&&c.load(zo.map(lp));for(var Tf=0,Dm=zo.length;Tf<Dm;++Tf)this.replayImageOrLabel_.apply(this,zo[Tf])}}++p;break;case Qr.END_GEOMETRY:if(void 0!==s){var eg=s(Zt=Oe[1],Xe);if(eg)return eg}++p;break;case Qr.FILL:Qe?ie++:this.fill_(t),++p;break;case Qr.MOVE_TO_LINE_TO:for(S=Oe[2],j=(Re=h[(E=Oe[1])+1])+.5|0,((D=(gt=h[E])+.5|0)!==R||j!==F)&&(t.moveTo(gt,Re),R=D,F=j),E+=2;E<S;E+=2)D=(gt=h[E])+.5|0,j=(Re=h[E+1])+.5|0,(E==S-2||D!==R||j!==F)&&(t.lineTo(gt,Re),R=D,F=j);++p;break;case Qr.SET_FILL_STYLE:Ce=Oe,this.alignFill_=Oe[2],ie&&(this.fill_(t),ie=0,Fe&&(t.stroke(),Fe=0)),t.fillStyle=Oe[1],++p;break;case Qr.SET_STROKE_STYLE:$e=Oe,Fe&&(t.stroke(),Fe=0),this.setStrokeStyle_(t,Oe),++p;break;case Qr.STROKE:Qe?Fe++:t.stroke(),++p;break;default:++p}}ie&&this.fill_(t),Fe&&t.stroke()},n.prototype.execute=function(t,e,r,i,o,s){this.viewRotation_=i,this.execute_(t,e,r,this.instructions,o,void 0,void 0,s)},n.prototype.executeHitDetection=function(t,e,r,i,o){return this.viewRotation_=r,this.execute_(t,1,e,this.hitDetectionInstructions,!0,i,o)},n}();var yd=["Polygon","Circle","LineString","Image","Text","Default"],a_=function(){function n(t,e,r,i,o,s){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=e,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(o)}return n.prototype.clip=function(t,e){var r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()},n.prototype.createExecutors_=function(t){for(var e in t){var r=this.executorsByZIndex_[e];void 0===r&&(this.executorsByZIndex_[e]=r={});var i=t[e];for(var o in i)r[o]=new iw(this.resolution_,this.pixelRatio_,this.overlaps_,i[o])}},n.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[e],i=0,o=t.length;i<o;++i)if(t[i]in r)return!0;return!1},n.prototype.forEachFeatureAtCoordinate=function(t,e,r,i,o,s){var a=2*(i=Math.round(i))+1,c=In(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-r,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=Tl(a,a));var m,p=this.hitDetectionContext_;p.canvas.width!==a||p.canvas.height!==a?(p.canvas.width=a,p.canvas.height=a):h||p.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(Tn(m=[1/0,1/0,-1/0,-1/0],t),vi(m,e*(this.renderBuffer_+i),m));var S,E=function(n){if(void 0!==Ag[n])return Ag[n];for(var t=2*n+1,e=n*n,r=new Array(e+1),i=0;i<=n;++i)for(var o=0;o<=n;++o){var s=i*i+o*o;if(s>e)break;var a=r[s];a||(r[s]=a=[]),a.push(4*((n+i)*t+(n+o))+3),i>0&&a.push(4*((n-i)*t+(n+o))+3),o>0&&(a.push(4*((n+i)*t+(n-o))+3),i>0&&a.push(4*((n-i)*t+(n-o))+3))}for(var c=[],h=(i=0,r.length);i<h;++i)r[i]&&c.push.apply(c,r[i]);return Ag[n]=c,c}(i);function x(J,$){for(var le=p.getImageData(0,0,a,a).data,ie=0,Fe=E.length;ie<Fe;ie++)if(le[E[ie]]>0){if(!s||"Image"!==S&&"Text"!==S||-1!==s.indexOf(J)){var Ce=(E[ie]-3)/4,$e=i-Ce%a,ot=i-(Ce/a|0),st=o(J,$,$e*$e+ot*ot);if(st)return st}p.clearRect(0,0,a,a);break}}var R,F,D,j,G,P=Object.keys(this.executorsByZIndex_).map(Number);for(P.sort(at),R=P.length-1;R>=0;--R){var X=P[R].toString();for(D=this.executorsByZIndex_[X],F=yd.length-1;F>=0;--F)if(void 0!==(j=D[S=yd[F]])&&(G=j.executeHitDetection(p,c,r,x,m)))return G}},n.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var r=e[0],i=e[1],o=e[2],s=e[3],a=[r,i,r,s,o,s,o,i];return Is(a,0,8,2,t,a),a},n.prototype.isEmpty=function(){return Ve(this.executorsByZIndex_)},n.prototype.execute=function(t,e,r,i,o,s,a){var c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(at),this.maxExtent_&&(t.save(),this.clip(t,r));var p,m,E,S,x,P,h=s||yd;for(a&&c.reverse(),p=0,m=c.length;p<m;++p){var R=c[p].toString();for(x=this.executorsByZIndex_[R],E=0,S=h.length;E<S;++E)void 0!==(P=x[h[E]])&&P.execute(t,e,r,i,o,a)}this.maxExtent_&&t.restore()},n}(),Ag={};const oh=a_;var cA=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const sw=function(n){function t(e){var r=n.call(this)||this;return r.boundHandleImageChange_=r.handleImageChange_.bind(r),r.layer_=e,r.declutterExecutorGroup=null,r}return cA(t,n),t.prototype.getFeatures=function(e){return Ht()},t.prototype.prepareFrame=function(e){return Ht()},t.prototype.renderFrame=function(e,r){return Ht()},t.prototype.loadedTileCallback=function(e,r,i){e[r]||(e[r]={}),e[r][i.tileCoord.toString()]=i},t.prototype.createLoadedTileFinder=function(e,r,i){return function(o,s){var a=this.loadedTileCallback.bind(this,i,o);return e.forEachLoadedTile(r,o,s,a)}.bind(this)},t.prototype.forEachFeatureAtCoordinate=function(e,r,i,o,s){},t.prototype.getDataAtPixel=function(e,r,i){return Ht()},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleFontsChanged=function(){},t.prototype.handleImageChange_=function(e){2===e.target.getState()&&this.renderIfReadyAndVisible()},t.prototype.loadImage=function(e){var r=e.getState();return 2!=r&&3!=r&&e.addEventListener("change",this.boundHandleImageChange_),0==r&&(e.load(),r=e.getState()),2==r},t.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();e.getVisible()&&"ready"==e.getSourceState()&&e.changed()},t}(cn);var Ix=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const aw=function(n){function t(e){var r=n.call(this,e)||this;return r.container=null,r.tempTransform=[1,0,0,1,0,0],r.pixelTransform=[1,0,0,1,0,0],r.inversePixelTransform=[1,0,0,1,0,0],r.context=null,r.containerReused=!1,r}return Ix(t,n),t.prototype.useContainer=function(e,r,i){var s,a,o=this.getLayer().getClassName();if(e&&""===e.style.opacity&&e.className===o&&(c=e.firstElementChild)instanceof HTMLCanvasElement&&(a=c.getContext("2d")),!a||0!==a.canvas.width&&a.canvas.style.transform!==r?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=e,this.context=a,this.containerReused=!0),!this.container){(s=document.createElement("div")).className=o;var c,h=s.style;h.position="absolute",h.width="100%",h.height="100%",a=Tl(),s.appendChild(c=a.canvas),(h=c.style).position="absolute",h.left="0",h.transformOrigin="top left",this.container=s,this.context=a}},t.prototype.clipUnrotated=function(e,r,i){var o=Ys(i),s=da(i),a=Ts(i),c=qr(i);Lo(r.coordinateToPixelTransform,o),Lo(r.coordinateToPixelTransform,s),Lo(r.coordinateToPixelTransform,a),Lo(r.coordinateToPixelTransform,c);var h=this.inversePixelTransform;Lo(h,o),Lo(h,s),Lo(h,a),Lo(h,c),e.save(),e.beginPath(),e.moveTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.clip()},t.prototype.dispatchRenderEvent_=function(e,r,i){var o=this.getLayer();if(o.hasListener(e)){var s=new Hm(e,this.inversePixelTransform,i,r);o.dispatchEvent(s)}},t.prototype.preRender=function(e,r){this.dispatchRenderEvent_("prerender",e,r)},t.prototype.postRender=function(e,r){this.dispatchRenderEvent_("postrender",e,r)},t.prototype.getRenderTransform=function(e,r,i,o,s,a,c){var m=o/r;return In(this.tempTransform,s/2,a/2,m,-m,-i,-e[0]+c,-e[1])},t.prototype.getDataAtPixel=function(e,r,i){var p,o=Lo(this.inversePixelTransform,e.slice()),s=this.context,c=this.getLayer().getExtent();if(c&&!qo(c,Lo(r.pixelToCoordinateTransform,e.slice())))return null;try{var m=Math.round(o[0]),E=Math.round(o[1]),S=document.createElement("canvas"),x=S.getContext("2d");S.width=1,S.height=1,x.clearRect(0,0,1,1),x.drawImage(s.canvas,m,E,1,1,0,0,1,1),p=x.getImageData(0,0,1,1).data}catch(P){return"SecurityError"===P.name?new Uint8Array:p}return 0===p[3]?null:p},t}(sw);var Mx=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Ox=function(n){function t(e){var r=n.call(this,e)||this;return r.extentChanged=!0,r.renderedExtent_=null,r.renderedProjection=null,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=[1/0,1/0,-1/0,-1/0],r.tmpTileRange_=new jb(0,0,0,0),r}return Mx(t,n),t.prototype.isDrawableTile=function(e){var r=this.getLayer(),i=e.getState(),o=r.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!o},t.prototype.getTile=function(e,r,i,o){var s=o.pixelRatio,a=o.viewState.projection,c=this.getLayer(),p=c.getSource().getTile(e,r,i,s,a);return 3==p.getState()&&(c.getUseInterimTilesOnError()?c.getPreload()>0&&(this.newTiles_=!0):p.setState(2)),this.isDrawableTile(p)||(p=p.getInterimTile()),p},t.prototype.loadedTileCallback=function(e,r,i){return!!this.isDrawableTile(i)&&n.prototype.loadedTileCallback.call(this,e,r,i)},t.prototype.prepareFrame=function(e){return!!this.getLayer().getSource()},t.prototype.renderFrame=function(e,r){var i=e.layerStatesArray[e.layerIndex],o=e.viewState,s=o.projection,a=o.resolution,c=o.center,h=o.rotation,p=e.pixelRatio,m=this.getLayer(),E=m.getSource(),S=E.getRevision(),x=E.getTileGridForProjection(s),P=x.getZForResolution(a,E.zDirection),R=x.getResolution(P),F=e.extent,D=i.extent&&Gn(i.extent);D&&(F=eo(F,Gn(i.extent)));var j=E.getTilePixelRatio(p),G=Math.round(e.size[0]*j),X=Math.round(e.size[1]*j);if(h){var J=Math.round(Math.sqrt(G*G+X*X));G=J,X=J}var $=R*G/2/j,le=R*X/2/j,ie=[c[0]-$,c[1]-le,c[0]+$,c[1]+le],Fe=x.getTileRangeForExtentAndZ(F,P),Ce={};Ce[P]={};var $e=this.createLoadedTileFinder(E,s,Ce),ot=this.tmpExtent,st=this.tmpTileRange_;this.newTiles_=!1;for(var dt=Fe.minX;dt<=Fe.maxX;++dt)for(var kt=Fe.minY;kt<=Fe.maxY;++kt){var Qe=this.getTile(P,dt,kt,e);if(this.isDrawableTile(Qe)){var Zt=Jt(this);if(2==Qe.getState()){Ce[P][Qe.tileCoord.toString()]=Qe;var gt=Qe.inTransition(Zt);!this.newTiles_&&(gt||-1===this.renderedTiles.indexOf(Qe))&&(this.newTiles_=!0)}if(1===Qe.getAlpha(Zt,e.time))continue}var Re=x.getTileCoordChildTileRange(Qe.tileCoord,st,ot),Xe=!1;Re&&(Xe=$e(P+1,Re)),Xe||x.forEachTileCoordParentTileRange(Qe.tileCoord,$e,st,ot)}var Oe=R/a;In(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/j,1/j,h,-G/2,-X/2);var qt=ds(this.pixelTransform);this.useContainer(r,qt,i.opacity);var Pt=this.context,$t=Pt.canvas;ii(this.inversePixelTransform,this.pixelTransform),In(this.tempTransform,G/2,X/2,Oe,Oe,0,-G/2,-X/2),$t.width!=G||$t.height!=X?($t.width=G,$t.height=X):this.containerReused||Pt.clearRect(0,0,G,X),D&&this.clipUnrotated(Pt,e,D),xt(Pt,E.getContextOptions()),this.preRender(Pt,e),this.renderedTiles.length=0;var Pn,ft,Mn,dn=Object.keys(Ce).map(Number);dn.sort(at),1!==i.opacity||this.containerReused&&!E.getOpaque(e.viewState.projection)?(Pn=[],ft=[]):dn=dn.reverse();for(var $n=dn.length-1;$n>=0;--$n){var kn=dn[$n],ai=E.getTilePixelSize(kn,p,s),Mr=x.getResolution(kn)/R,Ui=ai[0]*Mr*Oe,Wr=ai[1]*Mr*Oe,Ns=x.getTileCoordForCoordAndZ(Ys(ie),kn),Nt=x.getTileCoordExtent(Ns),So=Lo(this.tempTransform,[j*(Nt[0]-ie[0])/R,j*(ie[3]-Nt[3])/R]),os=j*E.getGutterForProjection(s),ts=Ce[kn];for(var $i in ts){var Ss=(Qe=ts[$i]).tileCoord,Xn=Ns[1]-Ss[1],mo=Math.round(So[0]-(Xn-1)*Ui),Uo=Ns[2]-Ss[2],zs=Math.round(So[1]-(Uo-1)*Wr),co=mo-(dt=Math.round(So[0]-Xn*Ui)),Kn=zs-(kt=Math.round(So[1]-Uo*Wr)),ps=P===kn;if(!(gt=ps&&1!==Qe.getAlpha(Jt(this),e.time)))if(Pn){Pt.save(),Mn=[dt,kt,dt+co,kt,dt+co,kt+Kn,dt,kt+Kn];for(var vo=0,Vr=Pn.length;vo<Vr;++vo)if(P!==kn&&kn<ft[vo]){var li=Pn[vo];Pt.beginPath(),Pt.moveTo(Mn[0],Mn[1]),Pt.lineTo(Mn[2],Mn[3]),Pt.lineTo(Mn[4],Mn[5]),Pt.lineTo(Mn[6],Mn[7]),Pt.moveTo(li[6],li[7]),Pt.lineTo(li[4],li[5]),Pt.lineTo(li[2],li[3]),Pt.lineTo(li[0],li[1]),Pt.clip()}Pn.push(Mn),ft.push(kn)}else Pt.clearRect(dt,kt,co,Kn);this.drawTileImage(Qe,e,dt,kt,co,Kn,os,ps,i.opacity),Pn&&!gt?(Pt.restore(),this.renderedTiles.unshift(Qe)):this.renderedTiles.push(Qe),this.updateUsedTiles(e.usedTiles,E,Qe)}}return this.renderedRevision=S,this.renderedResolution=R,this.extentChanged=!this.renderedExtent_||!nn(this.renderedExtent_,ie),this.renderedExtent_=ie,this.renderedPixelRatio=p,this.renderedProjection=s,this.manageTilePyramid(e,E,x,p,s,F,P,m.getPreload()),this.scheduleExpireCache(e,E),this.postRender(Pt,e),i.extent&&Pt.restore(),qt!==$t.style.transform&&($t.style.transform=qt),this.container},t.prototype.drawTileImage=function(e,r,i,o,s,a,c,h,p){var m=this.getTileImage(e);if(m){var E=Jt(this),S=h?e.getAlpha(E,r.time):1,x=p*S,P=x!==this.context.globalAlpha;P&&(this.context.save(),this.context.globalAlpha=x),this.context.drawImage(m,c,c,m.width-2*c,m.height-2*c,i,o,s,a),P&&this.context.restore(),1!==S?r.animate=!0:h&&e.endTransition(E)}},t.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},t.prototype.getTileImage=function(e){return e.getImage()},t.prototype.scheduleExpireCache=function(e,r){if(r.canExpireCache()){var i=function(o,s,a){var c=Jt(o);c in a.usedTiles&&o.expireCache(a.viewState.projection,a.usedTiles[c])}.bind(null,r);e.postRenderFunctions.push(i)}},t.prototype.updateUsedTiles=function(e,r,i){var o=Jt(r);o in e||(e[o]={}),e[o][i.getKey()]=!0},t.prototype.manageTilePyramid=function(e,r,i,o,s,a,c,h,p){var m=Jt(r);m in e.wantedTiles||(e.wantedTiles[m]={});var R,F,D,j,G,X,E=e.wantedTiles[m],S=e.tileQueue,P=0;for(X=i.getMinZoom();X<=c;++X)for(F=i.getTileRangeForExtentAndZ(a,X,F),D=i.getResolution(X),j=F.minX;j<=F.maxX;++j)for(G=F.minY;G<=F.maxY;++G)c-X<=h?(++P,0==(R=r.getTile(X,j,G,o,s)).getState()&&(E[R.getKey()]=!0,S.isKeyQueued(R.getKey())||S.enqueue([R,m,i.getTileCoordCenter(R.tileCoord),D])),void 0!==p&&p(R)):r.useTile(X,j,G,s);r.updateCacheSize(P,s)},t}(aw);var Dx=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const dA=function(n){function t(e,r,i,o,s,a,c){var h=n.call(this)||this;return h.context_=e,h.pixelRatio_=r,h.extent_=i,h.transform_=o,h.viewRotation_=s,h.squaredTolerance_=a,h.userTransform_=c,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=[1,0,0,1,0,0],h}return Dx(t,n),t.prototype.drawImages_=function(e,r,i,o){if(this.image_){var s=Is(e,r,i,o,this.transform_,this.pixelCoordinates_),a=this.context_,c=this.tmpLocalTransform_,h=a.globalAlpha;1!=this.imageOpacity_&&(a.globalAlpha=h*this.imageOpacity_);var p=this.imageRotation_;this.imageRotateWithView_&&(p+=this.viewRotation_);for(var m=0,E=s.length;m<E;m+=2){var S=s[m]-this.imageAnchorX_,x=s[m+1]-this.imageAnchorY_;if(0!==p||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var P=S+this.imageAnchorX_,R=x+this.imageAnchorY_;In(c,P,R,1,1,p,-P,-R),a.setTransform.apply(a,c),a.translate(P,R),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.setTransform(1,0,0,1,0,0)}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,S,x,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(a.globalAlpha=h)}},t.prototype.drawText_=function(e,r,i,o){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var s=Is(e,r,i,o,this.transform_,this.pixelCoordinates_),a=this.context_,c=this.textRotation_;for(this.textRotateWithView_&&(c+=this.viewRotation_);r<i;r+=o){var h=s[r]+this.textOffsetX_,p=s[r+1]+this.textOffsetY_;if(0!==c||1!=this.textScale_[0]||1!=this.textScale_[1]){var m=In(this.tmpLocalTransform_,h,p,1,1,c,-h,-p);a.setTransform.apply(a,m),a.translate(h,p),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&a.strokeText(this.text_,h,p),this.textFillState_&&a.fillText(this.text_,h,p)}}},t.prototype.moveToLineTo_=function(e,r,i,o,s){var a=this.context_,c=Is(e,r,i,o,this.transform_,this.pixelCoordinates_);a.moveTo(c[0],c[1]);var h=c.length;s&&(h-=2);for(var p=2;p<h;p+=2)a.lineTo(c[p],c[p+1]);return s&&a.closePath(),i},t.prototype.drawRings_=function(e,r,i,o){for(var s=0,a=i.length;s<a;++s)r=this.moveToLineTo_(e,r,i[s],o,!0);return r},t.prototype.drawCircle=function(e){if(Oi(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var r=function(n,t,e){var r=n.getFlatCoordinates();if(r){var i=n.getStride();return Is(r,0,r.length,i,t,e)}return null}(e,this.transform_,this.pixelCoordinates_),i=r[2]-r[0],o=r[3]-r[1],s=Math.sqrt(i*i+o*o),a=this.context_;a.beginPath(),a.arc(r[0],r[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}},t.prototype.setStyle=function(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())},t.prototype.setTransform=function(e){this.transform_=e},t.prototype.drawGeometry=function(e){switch(e.getType()){case Wt.POINT:this.drawPoint(e);break;case Wt.LINE_STRING:this.drawLineString(e);break;case Wt.POLYGON:this.drawPolygon(e);break;case Wt.MULTI_POINT:this.drawMultiPoint(e);break;case Wt.MULTI_LINE_STRING:this.drawMultiLineString(e);break;case Wt.MULTI_POLYGON:this.drawMultiPolygon(e);break;case Wt.GEOMETRY_COLLECTION:this.drawGeometryCollection(e);break;case Wt.CIRCLE:this.drawCircle(e)}},t.prototype.drawFeature=function(e,r){var i=r.getGeometryFunction()(e);!i||!Oi(this.extent_,i.getExtent())||(this.setStyle(r),this.drawGeometry(i))},t.prototype.drawGeometryCollection=function(e){for(var r=e.getGeometriesArray(),i=0,o=r.length;i<o;++i)this.drawGeometry(r[i])},t.prototype.drawPoint=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var r=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(r,0,r.length,i),""!==this.text_&&this.drawText_(r,0,r.length,i)},t.prototype.drawMultiPoint=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var r=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(r,0,r.length,i),""!==this.text_&&this.drawText_(r,0,r.length,i)},t.prototype.drawLineString=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Oi(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,i=e.getFlatCoordinates();r.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),r.stroke()}if(""!==this.text_){var o=e.getFlatMidpoint();this.drawText_(o,0,2,2)}}},t.prototype.drawMultiLineString=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var r=e.getExtent();if(Oi(this.extent_,r)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,o=e.getFlatCoordinates(),s=0,a=e.getEnds(),c=e.getStride();i.beginPath();for(var h=0,p=a.length;h<p;++h)s=this.moveToLineTo_(o,s,a[h],c,!1);i.stroke()}if(""!==this.text_){var m=e.getFlatMidpoints();this.drawText_(m,0,m.length,2)}}},t.prototype.drawPolygon=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Oi(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var r=this.context_;r.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}if(""!==this.text_){var i=e.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},t.prototype.drawMultiPolygon=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Oi(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var r=this.context_,i=e.getOrientedFlatCoordinates(),o=0,s=e.getEndss(),a=e.getStride();r.beginPath();for(var c=0,h=s.length;c<h;++c)o=this.drawRings_(i,o,s[c],a);this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}if(""!==this.text_){var m=e.getFlatInteriorPoints();this.drawText_(m,0,m.length,2)}}},t.prototype.setContextFillState_=function(e){var r=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,r.fillStyle=e.fillStyle):(r.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})},t.prototype.setContextStrokeState_=function(e){var r=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,r.lineCap=e.lineCap),r.setLineDash&&(Me(i.lineDash,e.lineDash)||r.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,r.lineDashOffset=e.lineDashOffset)),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,r.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,r.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,r.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,r.strokeStyle=e.strokeStyle)):(r.lineCap=e.lineCap,r.setLineDash&&(r.setLineDash(e.lineDash),r.lineDashOffset=e.lineDashOffset),r.lineJoin=e.lineJoin,r.lineWidth=e.lineWidth,r.miterLimit=e.miterLimit,r.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})},t.prototype.setContextTextState_=function(e){var r=this.context_,i=this.contextTextState_,o=e.textAlign?e.textAlign:zf;i?(i.font!=e.font&&(i.font=e.font,r.font=e.font),i.textAlign!=o&&(i.textAlign=o,r.textAlign=o),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,r.textBaseline=e.textBaseline)):(r.font=e.font,r.textAlign=o,r.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:o,textBaseline:e.textBaseline})},t.prototype.setFillStrokeStyle=function(e,r){var i=this;if(e){var o=e.getColor();this.fillState_={fillStyle:Vu(o||Ha)}}else this.fillState_=null;if(r){var s=r.getColor(),a=r.getLineCap(),c=r.getLineDash(),h=r.getLineDashOffset(),p=r.getLineJoin(),m=r.getWidth(),E=r.getMiterLimit(),S=c||Jl;this.strokeState_={lineCap:void 0!==a?a:Vf,lineDash:1===this.pixelRatio_?S:S.map(function(x){return x*i.pixelRatio_}),lineDashOffset:(h||0)*this.pixelRatio_,lineJoin:void 0!==p?p:kh,lineWidth:(void 0!==m?m:1)*this.pixelRatio_,miterLimit:void 0!==E?E:10,strokeStyle:Vu(s||Jd)}}else this.strokeState_=null},t.prototype.setImageStyle=function(e){var r;if(e&&(r=e.getSize())){var i=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*this.pixelRatio_,this.imageAnchorY_=i[1]*this.pixelRatio_,this.imageHeight_=r[1]*this.pixelRatio_,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation(),this.imageScale_=e.getScaleArray(),this.imageWidth_=r[0]*this.pixelRatio_}else this.image_=null},t.prototype.setTextStyle=function(e){if(e){var r=e.getFill();if(r){var i=r.getColor();this.textFillState_={fillStyle:Vu(i||Ha)}}else this.textFillState_=null;var o=e.getStroke();if(o){var s=o.getColor(),a=o.getLineCap(),c=o.getLineDash(),h=o.getLineDashOffset(),p=o.getLineJoin(),m=o.getWidth(),E=o.getMiterLimit();this.textStrokeState_={lineCap:void 0!==a?a:Vf,lineDash:c||Jl,lineDashOffset:h||0,lineJoin:void 0!==p?p:kh,lineWidth:void 0!==m?m:1,miterLimit:void 0!==E?E:10,strokeStyle:Vu(s||Jd)}}else this.textStrokeState_=null;var S=e.getFont(),x=e.getOffsetX(),P=e.getOffsetY(),R=e.getRotateWithView(),F=e.getRotation(),D=e.getScaleArray(),j=e.getText(),G=e.getTextAlign(),X=e.getTextBaseline();this.textState_={font:void 0!==S?S:Lh,textAlign:void 0!==G?G:zf,textBaseline:void 0!==X?X:qm},this.text_=void 0!==j?j:"",this.textOffsetX_=void 0!==x?this.pixelRatio_*x:0,this.textOffsetY_=void 0!==P?this.pixelRatio_*P:0,this.textRotateWithView_=void 0!==R&&R,this.textRotation_=void 0!==F?F:0,this.textScale_=[this.pixelRatio_*D[0],this.pixelRatio_*D[1]]}else this.text_=""},t}(iA);var hA=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const S0=function(n){function t(e,r,i,o){var s=n.call(this)||this;return s.extent=e,s.pixelRatio_=i,s.resolution=r,s.state=o,s}return hA(t,n),t.prototype.changed=function(){this.dispatchEvent("change")},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return Ht()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){Ht()},t}(tn);var Lx=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function lw(n,t,e){var r=n;if(r.src&&pa){var i=r.decode(),o=!0;return i.then(function(){o&&t()}).catch(function(c){o&&("EncodingError"===c.name&&"Invalid image type."===c.message?t():e())}),function(){o=!1}}var a=[lr(r,"load",t),lr(r,"error",e)];return function(){a.forEach(un)}}!function(n){function t(e,r,i,o,s,a){var c=n.call(this,e,r,i,0)||this;return c.src_=o,c.image_=new Image,null!==s&&(c.image_.crossOrigin=s),c.unlisten_=null,c.state=0,c.imageLoadFunction_=a,c}Lx(t,n),t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=yo(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},t.prototype.load=function(){(0==this.state||3==this.state)&&(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=lw(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.setImage=function(e){this.image_=e,this.resolution=yo(this.extent)/this.image_.height},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(S0);var Nx=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Mg=null,uw=function(n){function t(e,r,i,o,s,a){var c=n.call(this)||this;return c.hitDetectionImage_=null,c.image_=e||new Image,null!==o&&(c.image_.crossOrigin=o),c.canvas_={},c.color_=a,c.unlisten_=null,c.imageState_=s,c.size_=i,c.src_=r,c}return Nx(t,n),t.prototype.isTainted_=function(){if(void 0===this.tainted_&&2===this.imageState_){Mg||(Mg=Tl(1,1)),Mg.drawImage(this.image_,0,0);try{Mg.getImageData(0,0,1,1),this.tainted_=!1}catch(e){Mg=null,this.tainted_=!0}}return!0===this.tainted_},t.prototype.dispatchChangeEvent_=function(){this.dispatchEvent("change")},t.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},t.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},t.prototype.getImage=function(e){return this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_},t.prototype.getPixelRatio=function(e){return this.replaceColor_(e),this.canvas_[e]?e:1},t.prototype.getImageState=function(){return this.imageState_},t.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],r=this.size_[1],i=Tl(e,r);i.fillRect(0,0,e,r),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},t.prototype.getSize=function(){return this.size_},t.prototype.getSrc=function(){return this.src_},t.prototype.load=function(){if(0==this.imageState_){this.imageState_=1;try{this.image_.src=this.src_}catch(e){this.handleImageError_()}this.unlisten_=lw(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},t.prototype.replaceColor_=function(e){if(this.color_&&!this.canvas_[e]){var r=document.createElement("canvas");this.canvas_[e]=r,r.width=Math.ceil(this.image_.width*e),r.height=Math.ceil(this.image_.height*e);var i=r.getContext("2d");if(i.scale(e,e),i.drawImage(this.image_,0,0),i.globalCompositeOperation="multiply","multiply"===i.globalCompositeOperation||this.isTainted_())i.fillStyle=Fu(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(this.image_,0,0);else{for(var o=i.getImageData(0,0,r.width,r.height),s=o.data,a=this.color_[0]/255,c=this.color_[1]/255,h=this.color_[2]/255,p=this.color_[3],m=0,E=s.length;m<E;m+=4)s[m]*=a,s[m+1]*=c,s[m+2]*=h,s[m+3]*=p;i.putImageData(o,0,0)}}},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(tn),cw=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const u_=function(n){function t(e){var r=this,i=e||{};(r=n.call(this,{opacity:void 0!==i.opacity?i.opacity:1,rotation:void 0!==i.rotation?i.rotation:0,scale:void 0!==i.scale?i.scale:1,displacement:void 0!==i.displacement?i.displacement:[0,0],rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView})||this).anchor_=void 0!==i.anchor?i.anchor:[.5,.5],r.normalizedAnchor_=null,r.anchorOrigin_=void 0!==i.anchorOrigin?i.anchorOrigin:"top-left",r.anchorXUnits_=void 0!==i.anchorXUnits?i.anchorXUnits:"fraction",r.anchorYUnits_=void 0!==i.anchorYUnits?i.anchorYUnits:"fraction",r.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null;var h=void 0!==i.img?i.img:null,p=void 0!==i.imgSize?i.imgSize:null,m=i.src;Nn(!(void 0!==m&&h),4),Nn(!h||h&&p,5),(void 0===m||0===m.length)&&h&&(m=h.src||Jt(h)),Nn(void 0!==m&&m.length>0,6);var E=void 0!==i.src?0:2;return r.color_=void 0!==i.color?Ca(i.color):null,r.iconImage_=function(n,t,e,r,i,o){var s=Cc.get(t,r,o);return s||(s=new uw(n,t,e,r,i,o),Cc.set(t,r,o,s)),s}(h,m,p,r.crossOrigin_,E,r.color_),r.offset_=void 0!==i.offset?i.offset:[0,0],r.offsetOrigin_=void 0!==i.offsetOrigin?i.offsetOrigin:"top-left",r.origin_=null,r.size_=void 0!==i.size?i.size:null,r}return cw(t,n),t.prototype.clone=function(){var e=this.getScale();return new t({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},t.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var e=this.anchor_,r=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!r)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=r[0]),"fraction"==this.anchorYUnits_&&(e[1]*=r[1])}if("top-left"!=this.anchorOrigin_){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+r[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+r[1])}var i=this.getDisplacement();return e[0]-=i[0],e[1]+=i[1],this.normalizedAnchor_=e,this.normalizedAnchor_},t.prototype.setAnchor=function(e){this.anchor_=e,this.normalizedAnchor_=null},t.prototype.getColor=function(){return this.color_},t.prototype.getImage=function(e){return this.iconImage_.getImage(e)},t.prototype.getPixelRatio=function(e){return this.iconImage_.getPixelRatio(e)},t.prototype.getImageSize=function(){return this.iconImage_.getSize()},t.prototype.getImageState=function(){return this.iconImage_.getImageState()},t.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},t.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var e=this.offset_;if("top-left"!=this.offsetOrigin_){var r=this.getSize(),i=this.iconImage_.getSize();if(!r||!i)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=i[0]-r[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=i[1]-r[1]-e[1])}return this.origin_=e,this.origin_},t.prototype.getSrc=function(){return this.iconImage_.getSrc()},t.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},t.prototype.listenImageChange=function(e){this.iconImage_.addEventListener("change",e)},t.prototype.load=function(){this.iconImage_.load()},t.prototype.unlistenImageChange=function(e){this.iconImage_.removeEventListener("change",e)},t}(ip);var _s=.5;function up(n,t,e,r,i,o,s){var h=Tl(n[0]*_s,n[1]*_s);h.imageSmoothingEnabled=!1;for(var p=h.canvas,m=new dA(h,_s,i,null,s),E=e.length,S=Math.floor(16777215/E),x={},P=1;P<=E;++P){var R=e[P-1],F=R.getStyleFunction()||r;if(r){var D=F(R,o);if(D){Array.isArray(D)||(D=[D]);for(var G="#"+("000000"+(P*S).toString(16)).slice(-6),X=0,J=D.length;X<J;++X){var $=D[X],le=$.getGeometryFunction()(R);if(le&&Oi(i,le.getExtent())){var ie=$.clone(),Fe=ie.getFill();Fe&&Fe.setColor(G);var Ce=ie.getStroke();Ce&&(Ce.setColor(G),Ce.setLineDash(null)),ie.setText(void 0);var $e=$.getImage();if($e&&0!==$e.getOpacity()){var ot=$e.getImageSize();if(!ot)continue;var st=Tl(ot[0],ot[1],void 0,{alpha:!1}),dt=st.canvas;st.fillStyle=G,st.fillRect(0,0,dt.width,dt.height),ie.setImage(new u_({img:dt,imgSize:ot,anchor:$e.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:$e.getOrigin(),opacity:1,size:$e.getSize(),scale:$e.getScale(),rotation:$e.getRotation(),rotateWithView:$e.getRotateWithView()}))}var kt=ie.getZIndex()||0;(Qe=x[kt])||(x[kt]=Qe={},Qe[Wt.POLYGON]=[],Qe[Wt.CIRCLE]=[],Qe[Wt.LINE_STRING]=[],Qe[Wt.POINT]=[]),Qe[le.getType().replace("Multi","")].push(le,ie)}}}}}for(var Zt=Object.keys(x).map(Number).sort(at),gt=(P=0,Zt.length);P<gt;++P){var Qe=x[Zt[P]];for(var Re in Qe){var Xe=Qe[Re];for(X=0,J=Xe.length;X<J;X+=2){m.setStyle(Xe[X+1]);for(var Oe=0,qt=t.length;Oe<qt;++Oe)m.setTransform(t[Oe]),m.drawGeometry(Xe[X])}}}return h.getImageData(0,0,p.width,p.height)}function c_(n,t,e){var r=[];if(e){var i=Math.floor(Math.round(n[0])*_s),o=Math.floor(Math.round(n[1])*_s),s=4*(mt(i,0,e.width-1)+mt(o,0,e.height-1)*e.width),p=e.data[s+2]+256*(e.data[s+1]+256*e.data[s]),m=Math.floor(16777215/t.length);p&&p%m==0&&r.push(t[p/m-1])}return r}var Ux={Point:function(n,t,e,r,i){var a,o=e.getImage(),s=e.getText();if(i&&(n=i,a=o&&s&&s.getText()?{}:void 0),o){if(2!=o.getImageState())return;var c=n.getBuilder(e.getZIndex(),"Image");c.setImageStyle(o,a),c.drawPoint(t,r)}if(s&&s.getText()){var h=n.getBuilder(e.getZIndex(),"Text");h.setTextStyle(s,a),h.drawText(t,r)}},LineString:function(n,t,e,r,i){var o=e.getStroke();if(o){var s=n.getBuilder(e.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawLineString(t,r)}var a=e.getText();if(a&&a.getText()){var c=(i||n).getBuilder(e.getZIndex(),"Text");c.setTextStyle(a),c.drawText(t,r)}},Polygon:function(n,t,e,r,i){var o=e.getFill(),s=e.getStroke();if(o||s){var a=n.getBuilder(e.getZIndex(),"Polygon");a.setFillStrokeStyle(o,s),a.drawPolygon(t,r)}var c=e.getText();if(c&&c.getText()){var h=(i||n).getBuilder(e.getZIndex(),"Text");h.setTextStyle(c),h.drawText(t,r)}},MultiPoint:function(n,t,e,r,i){var a,o=e.getImage(),s=e.getText();if(i&&(n=i,a=o&&s&&s.getText()?{}:void 0),o){if(2!=o.getImageState())return;var c=n.getBuilder(e.getZIndex(),"Image");c.setImageStyle(o,a),c.drawMultiPoint(t,r)}if(s&&s.getText()){var h=(i||n).getBuilder(e.getZIndex(),"Text");h.setTextStyle(s,a),h.drawText(t,r)}},MultiLineString:function(n,t,e,r,i){var o=e.getStroke();if(o){var s=n.getBuilder(e.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawMultiLineString(t,r)}var a=e.getText();if(a&&a.getText()){var c=(i||n).getBuilder(e.getZIndex(),"Text");c.setTextStyle(a),c.drawText(t,r)}},MultiPolygon:function(n,t,e,r,i){var o=e.getFill(),s=e.getStroke();if(s||o){var a=n.getBuilder(e.getZIndex(),"Polygon");a.setFillStrokeStyle(o,s),a.drawMultiPolygon(t,r)}var c=e.getText();if(c&&c.getText()){var h=(i||n).getBuilder(e.getZIndex(),"Text");h.setTextStyle(c),h.drawText(t,r)}},GeometryCollection:function(n,t,e,r,i){var s,a,o=t.getGeometriesArray();for(s=0,a=o.length;s<a;++s)(0,Ux[o[s].getType()])(n,o[s],e,r,i)},Circle:function(n,t,e,r,i){var o=e.getFill(),s=e.getStroke();if(o||s){var a=n.getBuilder(e.getZIndex(),"Circle");a.setFillStrokeStyle(o,s),a.drawCircle(t,r)}var c=e.getText();if(c&&c.getText()){var h=(i||n).getBuilder(e.getZIndex(),"Text");h.setTextStyle(c),h.drawText(t,r)}}};function d_(n,t){return parseInt(Jt(n),10)-parseInt(Jt(t),10)}function dw(n,t){var e=hw(n,t);return e*e}function hw(n,t){return.5*n/t}function Rg(n,t,e,r,i,o,s){var a=!1,c=e.getImage();if(c){var h=c.getImageState();2==h||3==h?c.unlistenImageChange(i):(0==h&&c.load(),h=c.getImageState(),c.listenImageChange(i),a=!0)}return function(n,t,e,r,i,o){var s=e.getGeometryFunction()(t);if(s){var a=s.simplifyTransformed(r,i);e.getRenderer()?h_(n,a,e,t):(0,Ux[a.getType()])(n,a,e,t,o)}}(n,t,e,r,o,s),a}function h_(n,t,e,r){if(t.getType()!=Wt.GEOMETRY_COLLECTION)n.getBuilder(e.getZIndex(),"Default").drawCustom(t,r,e.getRenderer());else for(var i=t.getGeometries(),o=0,s=i.length;o<s;++o)h_(n,i[o],e,r)}var zx=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),P0={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},cp={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};const p_=function(n){function t(e){var r=n.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.dirty_=!1,r.renderedPixelToCoordinateTransform_=null,r.renderTileImageQueue_={},r.tileListenerKeys_={},r.tmpTransform_=[1,0,0,1,0,0],r}return zx(t,n),t.prototype.prepareTile=function(e,r,i,o){var s,a=Jt(e),c=e.getState();return(2===c||3===c)&&a in this.tileListenerKeys_&&(un(this.tileListenerKeys_[a]),delete this.tileListenerKeys_[a]),(2===c||3===c)&&(this.updateExecutorGroup_(e,r,i),this.tileImageNeedsRender_(e)&&(s=!0,o&&(this.renderTileImageQueue_[a]=e))),s},t.prototype.getTile=function(e,r,i,o){var s=o.pixelRatio,a=o.viewState,c=a.resolution,h=a.projection,p=this.getLayer(),m=p.getSource().getTile(e,r,i,s,h);if(m.getState()<2){m.wantedResolution=c;var E=Jt(m);if(!(E in this.tileListenerKeys_)){var S=mn(m,"change",this.prepareTile.bind(this,m,s,h,!0));this.tileListenerKeys_[E]=S}}else{var x=o.viewHints;(!(x[0]||x[1])||!m.wantedResolution)&&(m.wantedResolution=c),this.prepareTile(m,s,h,!1)&&"vector"!==p.getRenderMode()&&this.renderTileImage_(m,o)}return n.prototype.getTile.call(this,e,r,i,o)},t.prototype.isDrawableTile=function(e){var r=this.getLayer();return n.prototype.isDrawableTile.call(this,e)&&("vector"===r.getRenderMode()?Jt(r)in e.executorGroups:e.hasContext(r))},t.prototype.getTileImage=function(e){return e.getImage(this.getLayer())},t.prototype.prepareFrame=function(e){var r=this.getLayer().getRevision();return this.renderedLayerRevision_!=r&&(this.renderedTiles.length=0),this.renderedLayerRevision_=r,n.prototype.prepareFrame.call(this,e)},t.prototype.updateExecutorGroup_=function(e,r,i){var o=this.getLayer(),s=o.getRevision(),a=o.getRenderOrder()||null,c=e.wantedResolution,h=e.getReplayState(o);if(h.dirty||h.renderedResolution!==c||h.renderedRevision!=s||h.renderedRenderOrder!=a){var p=o.getSource(),m=o.getDeclutter(),E=p.getTileGrid(),x=p.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),P=p.getSourceTiles(r,i,e),R=Jt(o);delete e.hitDetectionImageData[R],e.executorGroups[R]=[],m&&(e.declutterExecutorGroups[R]=[]);for(var F=function(X,J){var $=P[X];if(2!=$.getState())return"continue";var ie=E.getTileCoordExtent($.tileCoord),Fe=eo(x,ie),Ce=vi(Fe,o.getRenderBuffer()*c,D.tmpExtent),$e=nn(ie,Fe)?null:Ce;h.dirty=!1;var ot=new Pg(0,Ce,c,r),st=m?new Pg(0,Fe,c,r):void 0,dt=dw(c,r),kt=function($t){var dn,Pn=$t.getStyleFunction()||o.getStyleFunction();if(Pn&&(dn=Pn($t,c)),dn){var ft=this.renderFeature($t,dt,dn,ot,st);this.dirty_=this.dirty_||ft,h.dirty=h.dirty||ft}},Qe=$.getFeatures();a&&a!==h.renderedRenderOrder&&Qe.sort(a);for(var Zt=0,gt=Qe.length;Zt<gt;++Zt){var Re=Qe[Zt];(!$e||Oi($e,Re.getGeometry().getExtent()))&&kt.call(D,Re)}var Xe=ot.finish(),Oe="vector"!==o.getRenderMode()&&m&&1===P.length?null:Fe,qt=new oh(Oe,c,r,p.getOverlaps(),Xe,o.getRenderBuffer());if(e.executorGroups[R].push(qt),st){var Pt=new oh(null,c,r,p.getOverlaps(),st.finish(),o.getRenderBuffer());e.declutterExecutorGroups[R].push(Pt)}},D=this,j=0,G=P.length;j<G;++j)F(j);h.renderedRevision=s,h.renderedRenderOrder=a,h.renderedResolution=c}},t.prototype.forEachFeatureAtCoordinate=function(e,r,i,o,s){var a=r.viewState.resolution,c=r.viewState.rotation;i=null==i?0:i;var h=this.getLayer(),m=h.getSource().getTileGridForProjection(r.viewState.projection),E=vs([e]);vi(E,a*i,E);for(var R,S={},x=function(G,X,J){var $=G.getId();void 0===$&&($=Jt(G));var le=S[$];if(le){if(!0!==le&&J<le.distanceSq){if(0===J)return S[$]=!0,s.splice(s.lastIndexOf(le),1),o(G,h,X);le.geometry=X,le.distanceSq=J}}else{if(0===J)return S[$]=!0,o(G,h,X);s.push(S[$]={feature:G,layer:h,geometry:X,distanceSq:J,callback:o})}},P=this.renderedTiles,F=function(G,X){var J=P[G];if(!Oi(m.getTileCoordExtent(J.wrappedTileCoord),E))return"continue";var le=Jt(h),ie=[J.executorGroups[le]],Fe=J.declutterExecutorGroups[le];Fe&&ie.push(Fe),ie.some(function(Ce){for(var $e=Ce===Fe?r.declutterTree.all().map(function(kt){return kt.value}):null,ot=0,st=Ce.length;ot<st;++ot)if(R=Ce[ot].forEachFeatureAtCoordinate(e,a,c,i,x,$e))return!0})},D=0,j=P.length;!R&&D<j;++D)F(D);return R},t.prototype.getFeatures=function(e){return new Promise(function(r,i){for(var x,o=this.getLayer(),s=Jt(o),a=o.getSource(),c=this.renderedProjection,h=c.getExtent(),p=this.renderedResolution,m=a.getTileGridForProjection(c),E=Lo(this.renderedPixelToCoordinateTransform_,e.slice()),S=m.getTileCoordForCoordAndResolution(E,p),P=0,R=this.renderedTiles.length;P<R;++P)if(S.toString()===this.renderedTiles[P].tileCoord.toString()){if(2===(x=this.renderedTiles[P]).getState()){var F=m.getTileCoordExtent(x.tileCoord);a.getWrapX()&&c.canWrapX()&&!Zn(h,F)&&Qt(E,c);break}x=void 0}if(!x||x.loadingSourceTiles>0)r([]);else{var j=Ys(m.getTileCoordExtent(x.wrappedTileCoord)),G=[(E[0]-j[0])/p,(j[1]-E[1])/p],X=x.getSourceTiles().reduce(function(Fe,Ce){return Fe.concat(Ce.getFeatures())},[]),J=x.hitDetectionImageData[s];if(!J&&!this.animatingOrInteracting_){var $=$a(m.getTileSize(m.getZForResolution(p))),le=this.renderedRotation_;J=up($,[this.getRenderTransform(m.getTileCoordCenter(x.wrappedTileCoord),p,0,_s,$[0]*_s,$[1]*_s,0)],X,o.getStyleFunction(),m.getTileCoordExtent(x.wrappedTileCoord),x.getReplayState(o).renderedResolution,le),x.hitDetectionImageData[s]=J}r(c_(G,X,J))}}.bind(this))},t.prototype.handleFontsChanged=function(){te(this.renderTileImageQueue_);var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.renderDeclutter=function(e){var r=this.context,i=r.globalAlpha;r.globalAlpha=this.getLayer().getOpacity();for(var o=e.viewHints,s=!(o[0]||o[1]),a=this.renderedTiles,c=0,h=a.length;c<h;++c){var p=a[c],m=p.declutterExecutorGroups[Jt(this.getLayer())];if(m)for(var E=m.length-1;E>=0;--E)m[E].execute(this.context,1,this.getTileRenderTransform(p,e),e.viewState.rotation,s,void 0,e.declutterTree)}r.globalAlpha=i},t.prototype.getTileRenderTransform=function(e,r){var i=r.pixelRatio,o=r.viewState,s=o.center,a=o.resolution,c=o.rotation,h=r.size,p=Math.round(h[0]*i),m=Math.round(h[1]*i),S=this.getLayer().getSource().getTileGridForProjection(r.viewState.projection),x=e.tileCoord,P=S.getTileCoordExtent(e.wrappedTileCoord),R=S.getTileCoordExtent(x,this.tmpExtent)[0]-P[0];return Ba(ko(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(s,a,c,i,p,m,R))},t.prototype.renderFrame=function(e,r){var i=e.viewHints,o=!(i[0]||i[1]);this.renderQueuedTileImages_(o,e),n.prototype.renderFrame.call(this,e,r),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var s=this.getLayer(),a=s.getRenderMode(),c=s.getSource(),h=e.usedTiles[Jt(c)];for(var p in this.renderTileImageQueue_)(!h||!(p in h))&&delete this.renderTileImageQueue_[p];var m=this.context,E=m.globalAlpha;m.globalAlpha=s.getOpacity();for(var S=cp[a],P=e.viewState.rotation,R=this.renderedTiles,F=[],D=[],j=R.length-1;j>=0;--j)for(var G=R[j],X=this.getTileRenderTransform(G,e),J=G.executorGroups[Jt(s)],$=!1,le=0,ie=J.length;le<ie;++le){var Fe=J[le];if(Fe.hasExecutors(S)){var Ce=G.tileCoord[0],$e=void 0;if(!$&&($e=Fe.getClipCoords(X))){m.save();for(var ot=0,st=F.length;ot<st;++ot){var dt=F[ot];Ce<D[ot]&&(m.beginPath(),m.moveTo($e[0],$e[1]),m.lineTo($e[2],$e[3]),m.lineTo($e[4],$e[5]),m.lineTo($e[6],$e[7]),m.moveTo(dt[6],dt[7]),m.lineTo(dt[4],dt[5]),m.lineTo(dt[2],dt[3]),m.lineTo(dt[0],dt[1]),m.clip())}}Fe.execute(m,1,X,P,o,S),!$&&$e&&(m.restore(),F.push($e),D.push(Ce),$=!0)}}return m.globalAlpha=E,this.container},t.prototype.renderQueuedTileImages_=function(e,r){for(var i in this.renderTileImageQueue_){if(!e&&Date.now()-r.time>8){r.animate=!0;break}var o=this.renderTileImageQueue_[i];delete this.renderTileImageQueue_[i],this.renderTileImage_(o,r)}},t.prototype.renderFeature=function(e,r,i,o,s){if(!i)return!1;var a=!1;if(Array.isArray(i))for(var c=0,h=i.length;c<h;++c)a=Rg(o,e,i[c],r,this.boundHandleStyleImageChange_,void 0,s)||a;else a=Rg(o,e,i,r,this.boundHandleStyleImageChange_,void 0,s);return a},t.prototype.tileImageNeedsRender_=function(e){var r=this.getLayer();if("vector"===r.getRenderMode())return!1;var i=e.getReplayState(r),o=r.getRevision();return i.renderedTileResolution!==e.wantedResolution||i.renderedTileRevision!==o},t.prototype.renderTileImage_=function(e,r){var i=this.getLayer(),o=e.getReplayState(i),s=i.getRevision(),a=e.executorGroups[Jt(i)];o.renderedTileRevision=s;var c=e.wrappedTileCoord,h=c[0],p=i.getSource(),m=r.pixelRatio,S=r.viewState.projection,x=p.getTileGridForProjection(S),P=x.getResolution(e.tileCoord[0]),R=r.pixelRatio/e.wantedResolution*P,F=x.getResolution(h),D=e.getContext(i);m=Math.round(Math.max(m,R/m));var j=p.getTilePixelSize(h,m,S);D.canvas.width=j[0],D.canvas.height=j[1];var G=m/R;if(1!==G){var X=cs(this.tmpTransform_);ko(X,G,G),D.setTransform.apply(D,X)}var J=x.getTileCoordExtent(c,this.tmpExtent),$=R/F,le=cs(this.tmpTransform_);ko(le,$,-$),function(n,t,e){Ba(n,ga(El,1,0,0,1,t,e))}(le,-J[0],-J[3]);for(var ie=0,Fe=a.length;ie<Fe;++ie)a[ie].execute(D,G,le,0,!0,P0[i.getRenderMode()]);o.renderedTileResolution=e.wantedResolution},t}(Ox);var g_=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const I0=function(n){function t(e){var r=this,i=e||{},o=xt({},i);delete o.preload,delete o.useInterimTilesOnError,r=n.call(this,o)||this,"image"===i.renderMode&&(console.warn('renderMode: "image" is deprecated. Option ignored.'),i.renderMode=void 0);var s=i.renderMode||"hybrid";return Nn("hybrid"==s||"vector"==s,28),r.renderMode_=s,r.setPreload(i.preload?i.preload:0),r.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),r}return g_(t,n),t.prototype.createRenderer=function(){return new p_(this)},t.prototype.getFeatures=function(e){return n.prototype.getFeatures.call(this,e)},t.prototype.getRenderMode=function(){return this.renderMode_},t.prototype.getPreload=function(){return this.get("preload")},t.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},t.prototype.setPreload=function(e){this.set("preload",e)},t.prototype.setUseInterimTilesOnError=function(e){this.set("useInterimTilesOnError",e)},t}(e_);var Ed=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Hx=function(n){function t(e){var r=this,i=e||{},o=xt({},i);return delete o.preload,delete o.useInterimTilesOnError,(r=n.call(this,o)||this).setPreload(void 0!==i.preload?i.preload:0),r.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),r}return Ed(t,n),t.prototype.getPreload=function(){return this.get("preload")},t.prototype.setPreload=function(e){this.set("preload",e)},t.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},t.prototype.setUseInterimTilesOnError=function(e){this.set("useInterimTilesOnError",e)},t}(hd);var vw=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const bd=function(n){function t(e){return n.call(this,e)||this}return vw(t,n),t.prototype.createRenderer=function(){return new Ox(this)},t}(Hx);var yw=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const lh=function(n){function t(e,r,i){var o=n.call(this)||this,s=i||{};return o.tileCoord=e,o.state=r,o.interimTile=null,o.key="",o.transition_=void 0===s.transition?250:s.transition,o.transitionStarts_={},o}return yw(t,n),t.prototype.changed=function(){this.dispatchEvent("change")},t.prototype.release=function(){},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var e=this.interimTile;do{if(2==e.getState())return this.transition_=0,e;e=e.interimTile}while(e);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var e=this.interimTile,r=this;do{if(2==e.getState()){e.interimTile=null;break}1==e.getState()?r=e:0==e.getState()?r.interimTile=e.interimTile:r=e,e=r.interimTile}while(e)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(e){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()},t.prototype.load=function(){Ht()},t.prototype.getAlpha=function(e,r){if(!this.transition_)return 1;var i=this.transitionStarts_[e];if(i){if(-1===i)return 1}else this.transitionStarts_[e]=i=r;var o=r-i+1e3/60;return o>=this.transition_?1:De(o/this.transition_)},t.prototype.inTransition=function(e){return!!this.transition_&&-1!==this.transitionStarts_[e]},t.prototype.endTransition=function(e){this.transition_&&(this.transitionStarts_[e]=-1)},t}(tn);var vA=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const _w=function(n){function t(e,r,i,o,s,a){var c=n.call(this,e,r,a)||this;return c.extent=null,c.format_=o,c.features_=null,c.projection=null,c.tileLoadFunction_=s,c.url_=i,c.key=i,c}return vA(t,n),t.prototype.getFormat=function(){return this.format_},t.prototype.getFeatures=function(){return this.features_},t.prototype.load=function(){0==this.state&&(this.setState(1),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},t.prototype.onLoad=function(e,r){this.setFeatures(e)},t.prototype.onError=function(){this.setState(3)},t.prototype.setFeatures=function(e){this.features_=e,this.setState(2)},t.prototype.setLoader=function(e){this.loader_=e},t}(lh),Ew=function(){function n(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return n.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},n.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},n.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},n.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},n.prototype.get=function(t,e){var r=this.entries_[t];return Nn(void 0!==r,15),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_},n.prototype.remove=function(t){var e=this.entries_[t];return Nn(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},n.prototype.getCount=function(){return this.count_},n.prototype.getKeys=function(){var r,t=new Array(this.count_),e=0;for(r=this.newest_;r;r=r.older)t[e++]=r.key_;return t},n.prototype.getValues=function(){var r,t=new Array(this.count_),e=0;for(r=this.newest_;r;r=r.older)t[e++]=r.value_;return t},n.prototype.peekLast=function(){return this.oldest_.value_},n.prototype.peekLastKey=function(){return this.oldest_.key_},n.prototype.peekFirstKey=function(){return this.newest_.key_},n.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},n.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},n.prototype.set=function(t,e){Nn(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_},n.prototype.setSize=function(t){this.highWaterMark=t},n}();var Yx=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const y_=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Yx(t,n),t.prototype.expireCache=function(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()},t.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var i=zb(this.peekFirstKey())[0];this.forEach(function(o){o.tileCoord[0]!==i&&(this.remove(Vb(o.tileCoord)),o.release())}.bind(this))}},t}(Ew);var bw=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function A0(n){return n?Array.isArray(n)?function(t){return n}:"function"==typeof n?n:function(t){return[n]}:null}const qx=function(n){function t(e){var r=n.call(this)||this;return r.projection=Zi(e.projection),r.attributions_=A0(e.attributions),r.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,r.loading=!1,r.state_=void 0!==e.state?e.state:"ready",r.wrapX_=void 0!==e.wrapX&&e.wrapX,r}return bw(t,n),t.prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection},t.prototype.getResolutions=function(){return Ht()},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.getContextOptions=function(){},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(e){this.attributions_=A0(e),this.changed()},t.prototype.setState=function(e){this.state_=e,this.changed()},t}(Wn);var Xx=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Lg=function(n){function t(e){var r=n.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;r.opaque_=void 0!==e.opaque&&e.opaque,r.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,r.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var o=e.tileGrid;return o&&$a(o.getTileSize(o.getMinZoom()),[256,256]),r.tileCache=new y_(e.cacheSize||0),r.tmpSize=[0,0],r.key_=e.key||"",r.tileOptions={transition:e.transition},r.zDirection=e.zDirection?e.zDirection:0,r}return Xx(t,n),t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(e,r){var i=this.getTileCacheForProjection(e);i&&i.expireCache(r)},t.prototype.forEachLoadedTile=function(e,r,i,o){var s=this.getTileCacheForProjection(e);if(!s)return!1;for(var c,h,p,a=!0,m=i.minX;m<=i.maxX;++m)for(var E=i.minY;E<=i.maxY;++E)h=$f(r,m,E),p=!1,s.containsKey(h)&&(p=2===(c=s.get(h)).getState())&&(p=!1!==o(c)),p||(a=!1);return a},t.prototype.getGutterForProjection=function(e){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(e){this.key_!==e&&(this.key_=e,this.changed())},t.prototype.getOpaque=function(e){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},t.prototype.getTile=function(e,r,i,o,s){return Ht()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(e){return this.tileGrid?this.tileGrid:Hb(e)},t.prototype.getTileCacheForProjection=function(e){return Nn(ba(this.getProjection(),e),68),this.tileCache},t.prototype.getTilePixelRatio=function(e){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(e,r,i){var o=this.getTileGridForProjection(i),s=this.getTilePixelRatio(r),a=$a(o.getTileSize(e),this.tmpSize);return 1==s?a:function(n,t,e){return void 0===e&&(e=[0,0]),e[0]=n[0]*t+.5|0,e[1]=n[1]*t+.5|0,e}(a,s,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(e,r){var i=void 0!==r?r:this.getProjection(),o=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=function(n,t,e){var r=t[0],i=n.getTileCoordCenter(t),o=h0(e);if(qo(o,i))return t;var s=Yi(o),a=Math.ceil((o[0]-i[0])/s);return i[0]+=s*a,n.getTileCoordForCoordAndZ(i,r)}(o,e,i)),function(n,t){var e=n[0],r=n[1],i=n[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;var o=t.getFullTileRange(e);return!o||o.containsXY(r,i)}(e,o)?e:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),n.prototype.refresh.call(this)},t.prototype.updateCacheSize=function(e,r){var i=this.getTileCacheForProjection(r);e>i.highWaterMark&&(i.highWaterMark=e)},t.prototype.useTile=function(e,r,i,o){},t}(qx),ww=function(n){function t(e,r){var i=n.call(this,e)||this;return i.tile=r,i}return Xx(t,n),t}(xe);const kg=Lg;function hp(n,t){var e=/\{z\}/g,r=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(s,a,c){if(s)return n.replace(e,s[0].toString()).replace(r,s[1].toString()).replace(i,s[2].toString()).replace(o,function(){var p=t.getFullTileRange(s[0]);return Nn(p,55),(p.getHeight()-s[2]-1).toString()})}}var po=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Jx=function(n){function t(e){var r=n.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.generateTileUrlFunction_=r.tileUrlFunction===t.prototype.tileUrlFunction,r.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(r.tileUrlFunction=e.tileUrlFunction),r.urls=null,e.urls?r.setUrls(e.urls):e.url&&r.setUrl(e.url),r.tileLoadingKeys_={},r}return po(t,n),t.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(e){var s,r=e.target,i=Jt(r),o=r.getState();1==o?(this.tileLoadingKeys_[i]=!0,s="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=3==o?"tileloaderror":2==o?"tileloadend":void 0),null!=s&&this.dispatchEvent(new ww(s,r))},t.prototype.setTileLoadFunction=function(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()},t.prototype.setTileUrlFunction=function(e,r){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),void 0!==r?this.setKey(r):this.changed()},t.prototype.setUrl=function(e){var r=function(n){var t=[],e=/\{([a-z])-([a-z])\}/.exec(n);if(e){var r=e[1].charCodeAt(0),i=e[2].charCodeAt(0),o=void 0;for(o=r;o<=i;++o)t.push(n.replace(e[0],String.fromCharCode(o)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(n)){for(var s=parseInt(e[2],10),a=parseInt(e[1],10);a<=s;a++)t.push(n.replace(e[0],a.toString()));return t}return t.push(n),t}(e);this.urls=r,this.setUrls(r)},t.prototype.setUrls=function(e){this.urls=e;var r=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(n,t){for(var e=n.length,r=new Array(e),i=0;i<e;++i)r[i]=hp(n[i],t);return function(n){return 1===n.length?n[0]:function(t,e,r){if(t){var o=kr(function(n){return(n[1]<<n[0])+n[2]}(t),n.length);return n[o](t,e,r)}}}(r)}(e,this.tileGrid),r):this.setKey(r)},t.prototype.tileUrlFunction=function(e,r,i){},t.prototype.useTile=function(e,r,i){var o=$f(e,r,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)},t}(kg);var wd=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),M0=[];const Qx=function(n){function t(e,r,i,o){var s=n.call(this,e,r,{transition:0})||this;return s.context_={},s.executorGroups={},s.declutterExecutorGroups={},s.loadingSourceTiles=0,s.hitDetectionImageData={},s.replayState_={},s.sourceTiles=[],s.errorTileKeys={},s.getSourceTiles=o.bind(void 0,s),s.wrappedTileCoord=i,s}return wd(t,n),t.prototype.getContext=function(e){var r=Jt(e);return r in this.context_||(this.context_[r]=Tl(1,1,M0)),this.context_[r]},t.prototype.hasContext=function(e){return Jt(e)in this.context_},t.prototype.getImage=function(e){return this.hasContext(e)?this.getContext(e).canvas:null},t.prototype.getReplayState=function(e){var r=Jt(e);return r in this.replayState_||(this.replayState_[r]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[r]},t.prototype.load=function(){this.getSourceTiles()},t.prototype.release=function(){for(var e in this.context_)M0.push(this.context_[e].canvas),delete this.context_[e];n.prototype.release.call(this)},t}(lh);function Cw(n,t,e,r,i,o,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof n?n(e,r,i):n,!0),"arraybuffer"==t.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){var h=t.getType(),p=void 0;"json"==h||"text"==h?p=a.responseText:"xml"==h?(p=a.responseXML)||(p=(new DOMParser).parseFromString(a.responseText,"application/xml")):"arraybuffer"==h&&(p=a.response),p?o(t.readFeatures(p,{extent:e,featureProjection:i}),t.readProjection(p)):s()}else s()},a.onerror=s,a.send()}function w_(n,t){return function(e,r,i,o,s){var a=this;Cw(n,t,e,r,i,function(c,h){a.addFeatures(c),void 0!==o&&o(c)},s||it)}}var C_=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const _A=function(n){function t(e){var r=this,i=e.projection||"EPSG:3857",o=e.extent||h0(i),s=e.tileGrid||el({extent:o,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(r=n.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:i,state:e.state,tileGrid:s,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:t1,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,r.sourceTileCache=new y_(r.tileCache.highWaterMark),r.overlaps_=null==e.overlaps||e.overlaps,r.tileClass=e.tileClass?e.tileClass:_w,r.tileGrids_={},r}return C_(t,n),t.prototype.getFeaturesInExtent=function(e){var r=[],i=this.tileCache;if(0===i.getCount())return r;var o=zb(i.peekFirstKey())[0],s=this.tileGrid;return i.forEach(function(a){if(a.tileCoord[0]===o&&2===a.getState())for(var c=a.getSourceTiles(),h=0,p=c.length;h<p;++h){var m=c[h];if(Oi(e,s.getTileCoordExtent(m.tileCoord))){var S=m.getFeatures();if(S)for(var x=0,P=S.length;x<P;++x){var R=S[x],F=R.getGeometry();Oi(e,F.getExtent())&&r.push(R)}}}}),r},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},t.prototype.expireCache=function(e,r){var i=this.getTileCacheForProjection(e),o=Object.keys(r).reduce(function(s,a){var c=function(n){var t=n.substring(n.lastIndexOf("/")+1,n.length).split(",").map(Number);return $f(t[0],t[1],t[2])}(a);if(i.containsKey(c))for(var h=i.get(c).sourceTiles,p=0,m=h.length;p<m;++p)s[h[p].getKey()]=!0;return s},{});n.prototype.expireCache.call(this,e,r),this.sourceTileCache.expireCache(o)},t.prototype.getSourceTiles=function(e,r,i){var o=this;if(0===i.getState()){i.setState(1);var s=i.wrappedTileCoord,a=this.getTileGridForProjection(r),c=a.getTileCoordExtent(s),p=a.getResolution(s[0]);vi(c,-p,c);var m=this.tileGrid,E=m.getExtent();E&&eo(c,E,c);var S=m.getZForResolution(p,1);m.forEachTileCoord(c,S,function(x){var P=o.tileUrlFunction(x,e,r),R=o.sourceTileCache.containsKey(P)?o.sourceTileCache.get(P):new o.tileClass(x,P?0:4,P,o.format_,o.tileLoadFunction);i.sourceTiles.push(R);var F=R.getState();if(F<2){var D=function(j){o.handleTileChange(j);var G=R.getState();if(2===G||3===G){var X=R.getKey();X in i.errorTileKeys?2===R.getState()&&delete i.errorTileKeys[X]:i.loadingSourceTiles--,3===G?i.errorTileKeys[X]=!0:R.removeEventListener("change",D),0===i.loadingSourceTiles&&i.setState(Ve(i.errorTileKeys)?2:3)}};R.addEventListener("change",D),i.loadingSourceTiles++}0===F&&(R.extent=m.getTileCoordExtent(x),R.projection=r,R.resolution=m.getResolution(x[0]),o.sourceTileCache.set(P,R),R.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(function(x){return 3===x.getState()})?3:2)}return i.sourceTiles},t.prototype.getTile=function(e,r,i,o,s){var h,a=$f(e,r,i),c=this.getKey();if(this.tileCache.containsKey(a)&&(h=this.tileCache.get(a)).key===c)return h;var p=[e,r,i],m=this.getTileCoordForTileUrlFunction(p,s),E=this.getTileGrid().getExtent(),S=this.getTileGridForProjection(s);if(m&&E){var x=S.getTileCoordExtent(m);vi(x,-S.getResolution(e),x),Oi(E,x)||(m=null)}var P=!0;if(null!==m){var R=this.tileGrid,F=S.getResolution(e),D=R.getZForResolution(F,1),j=S.getTileCoordExtent(m);vi(j,-F,j),R.forEachTileCoord(j,D,function(X){P=P&&!this.tileUrlFunction(X,o,s)}.bind(this))}var G=new Qx(p,P?4:0,m,this.getSourceTiles.bind(this,o,s));return G.key=c,h?(G.interimTile=h,G.refreshInterimChain(),this.tileCache.replace(a,G)):this.tileCache.set(a,G),G},t.prototype.getTileGridForProjection=function(e){var r=e.getCode(),i=this.tileGrids_[r];if(!i){var o=this.tileGrid;i=Yy(e,void 0,o?o.getTileSize(o.getMinZoom()):void 0),this.tileGrids_[r]=i}return i},t.prototype.getTilePixelRatio=function(e){return e},t.prototype.getTilePixelSize=function(e,r,i){var s=$a(this.getTileGridForProjection(i).getTileSize(e),this.tmpSize);return[Math.round(s[0]*r),Math.round(s[1]*r)]},t.prototype.updateCacheSize=function(e,r){n.prototype.updateCacheSize.call(this,2*e,r),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(r).highWaterMark},t}(Jx);function t1(n,t){n.setLoader(function(e,r,i){Cw(t,n.getFormat(),e,r,i,n.onLoad.bind(n),n.onError.bind(n))})}var fp=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const R0=function(n){function t(e){var r=n.call(this)||this;return r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addChangeListener(r.geometryName_,r.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?r.setGeometry(e):r.setProperties(e)),r}return fp(t,n),t.prototype.clone=function(){var e=new t(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&e.setGeometry(r.clone());var i=this.getStyle();return i&&e.setStyle(i),e},t.prototype.getGeometry=function(){return this.get(this.geometryName_)},t.prototype.getId=function(){return this.id_},t.prototype.getGeometryName=function(){return this.geometryName_},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.handleGeometryChange_=function(){this.changed()},t.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(un(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=mn(e,"change",this.handleGeometryChange_,this)),this.changed()},t.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},t.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?function(n){return"function"==typeof n?n:(Array.isArray(n)?t=n:(Nn("function"==typeof n.getZIndex,41),t=[n]),function(){return t});var t}(e):void 0,this.changed()},t.prototype.setId=function(e){this.id_=e,this.changed()},t.prototype.setGeometryName=function(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},t}(Wn);var xw=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function Pw(n){for(var t=[],e=0,r=n.length;e<r;++e)t.push(n[e].clone());return t}const O0=function(n){function t(e){var r=n.call(this)||this;return r.geometries_=e||null,r.changeEventsKeys_=[],r.listenGeometriesChange_(),r}return xw(t,n),t.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(un),this.changeEventsKeys_.length=0},t.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var e=0,r=this.geometries_.length;e<r;++e)this.changeEventsKeys_.push(mn(this.geometries_[e],"change",this.changed,this))},t.prototype.clone=function(){var e=new t(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e},t.prototype.closestPointXY=function(e,r,i,o){if(o<ys(this.getExtent(),e,r))return o;for(var s=this.geometries_,a=0,c=s.length;a<c;++a)o=s[a].closestPointXY(e,r,i,o);return o},t.prototype.containsXY=function(e,r){for(var i=this.geometries_,o=0,s=i.length;o<s;++o)if(i[o].containsXY(e,r))return!0;return!1},t.prototype.computeExtent=function(e){oe(e);for(var r=this.geometries_,i=0,o=r.length;i<o;++i)bn(e,r[i].getExtent());return e},t.prototype.getGeometries=function(){return Pw(this.geometries_)},t.prototype.getGeometriesArray=function(){return this.geometries_},t.prototype.getGeometriesArrayRecursive=function(){for(var e=[],r=this.geometries_,i=0,o=r.length;i<o;++i)r[i].getType()===this.getType()?e=e.concat(r[i].getGeometriesArrayRecursive()):e.push(r[i]);return e},t.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var r=[],i=this.geometries_,o=!1,s=0,a=i.length;s<a;++s){var c=i[s],h=c.getSimplifiedGeometry(e);r.push(h),h!==c&&(o=!0)}if(o){var p=new t(null);return p.setGeometriesArray(r),p}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},t.prototype.getType=function(){return Wt.GEOMETRY_COLLECTION},t.prototype.intersectsExtent=function(e){for(var r=this.geometries_,i=0,o=r.length;i<o;++i)if(r[i].intersectsExtent(e))return!0;return!1},t.prototype.isEmpty=function(){return 0===this.geometries_.length},t.prototype.rotate=function(e,r){for(var i=this.geometries_,o=0,s=i.length;o<s;++o)i[o].rotate(e,r);this.changed()},t.prototype.scale=function(e,r,i){var o=i;o||(o=Xo(this.getExtent()));for(var s=this.geometries_,a=0,c=s.length;a<c;++a)s[a].scale(e,r,o);this.changed()},t.prototype.setGeometries=function(e){this.setGeometriesArray(Pw(e))},t.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},t.prototype.applyTransform=function(e){for(var r=this.geometries_,i=0,o=r.length;i<o;++i)r[i].applyTransform(e);this.changed()},t.prototype.translate=function(e,r){for(var i=this.geometries_,o=0,s=i.length;o<s;++o)i[o].translate(e,r);this.changed()},t.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),n.prototype.disposeInternal.call(this)},t}(Xd);var r1=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function Fg(n){return"string"==typeof n?JSON.parse(n)||null:null!==n?n:null}const EA=function(n){function t(){return n.call(this)||this}return r1(t,n),t.prototype.getType=function(){return"json"},t.prototype.readFeature=function(e,r){return this.readFeatureFromObject(Fg(e),this.getReadOptions(e,r))},t.prototype.readFeatures=function(e,r){return this.readFeaturesFromObject(Fg(e),this.getReadOptions(e,r))},t.prototype.readFeatureFromObject=function(e,r){return Ht()},t.prototype.readFeaturesFromObject=function(e,r){return Ht()},t.prototype.readGeometry=function(e,r){return this.readGeometryFromObject(Fg(e),this.getReadOptions(e,r))},t.prototype.readGeometryFromObject=function(e,r){return Ht()},t.prototype.readProjection=function(e){return this.readProjectionFromObject(Fg(e))},t.prototype.readProjectionFromObject=function(e){return Ht()},t.prototype.writeFeature=function(e,r){return JSON.stringify(this.writeFeatureObject(e,r))},t.prototype.writeFeatureObject=function(e,r){return Ht()},t.prototype.writeFeatures=function(e,r){return JSON.stringify(this.writeFeaturesObject(e,r))},t.prototype.writeFeaturesObject=function(e,r){return Ht()},t.prototype.writeGeometry=function(e,r){return JSON.stringify(this.writeGeometryObject(e,r))},t.prototype.writeGeometryObject=function(e,r){return Ht()},t}(qy);var Iw=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function x_(n,t){if(!n)return null;var e;switch(n.type){case Wt.POINT:e=function(n){return new B(n.coordinates)}(n);break;case Wt.LINE_STRING:e=function(n){return new Uh(n.coordinates)}(n);break;case Wt.POLYGON:e=function(n){return new za(n.coordinates)}(n);break;case Wt.MULTI_POINT:e=function(n){return new Sg(n.coordinates)}(n);break;case Wt.MULTI_LINE_STRING:e=function(n){return new m0(n.coordinates)}(n);break;case Wt.MULTI_POLYGON:e=function(n){return new Ky(n.coordinates)}(n);break;case Wt.GEOMETRY_COLLECTION:e=function(n,t){var e=n.geometries.map(function(r){return x_(r,undefined)});return new O0(e)}(n);break;default:throw new Error("Unsupported GeoJSON type: "+n.type)}return tp(e,!1,t)}function w(n,t){var r,e=(n=tp(n,!0,t)).getType();switch(e){case Wt.POINT:r=function(n,t){return{type:"Point",coordinates:n.getCoordinates()}}(n);break;case Wt.LINE_STRING:r=function(n,t){return{type:"LineString",coordinates:n.getCoordinates()}}(n);break;case Wt.POLYGON:r=function(n,t){var e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(e)}}(n,t);break;case Wt.MULTI_POINT:r=function(n,t){return{type:"MultiPoint",coordinates:n.getCoordinates()}}(n);break;case Wt.MULTI_LINE_STRING:r=function(n,t){return{type:"MultiLineString",coordinates:n.getCoordinates()}}(n);break;case Wt.MULTI_POLYGON:r=function(n,t){var e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(e)}}(n,t);break;case Wt.GEOMETRY_COLLECTION:r=function(n,t){return{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){var i=xt({},t);return delete i.featureProjection,w(r,i)})}}(n,t);break;case Wt.CIRCLE:r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+e)}return r}const Mt=function(n){function t(e){var r=this,i=e||{};return(r=n.call(this)||this).dataProjection=Zi(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(r.defaultFeatureProjection=Zi(i.featureProjection)),r.geometryName_=i.geometryName,r.extractGeometryName_=i.extractGeometryName,r}return Iw(t,n),t.prototype.readFeatureFromObject=function(e,r){var i,o=x_((i="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null}).geometry,r),s=new R0;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(o),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s},t.prototype.readFeaturesFromObject=function(e,r){var o=null;if("FeatureCollection"===e.type){o=[];for(var a=e.features,c=0,h=a.length;c<h;++c)o.push(this.readFeatureFromObject(a[c],r))}else o=[this.readFeatureFromObject(e,r)];return o},t.prototype.readGeometryFromObject=function(e,r){return x_(e,r)},t.prototype.readProjectionFromObject=function(e){var i,r=e.crs;return r?"name"==r.type?i=Zi(r.properties.name):"EPSG"===r.type?i=Zi("EPSG:"+r.properties.code):Nn(!1,36):i=this.dataProjection,i},t.prototype.writeFeatureObject=function(e,r){r=this.adaptOptions(r);var i={type:"Feature",geometry:null,properties:null},o=e.getId();if(void 0!==o&&(i.id=o),!e.hasProperties())return i;var s=e.getProperties(),a=e.getGeometry();return a&&(i.geometry=w(a,r),delete s[e.getGeometryName()]),Ve(s)||(i.properties=s),i},t.prototype.writeFeaturesObject=function(e,r){r=this.adaptOptions(r);for(var i=[],o=0,s=e.length;o<s;++o)i.push(this.writeFeatureObject(e[o],r));return{type:"FeatureCollection",features:i}},t.prototype.writeGeometryObject=function(e,r){return w(e,this.adaptOptions(r))},t}(EA);var an=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const bo=function(n){function t(e,r,i,o,s,a){var c=n.call(this,e,r,a)||this;return c.crossOrigin_=o,c.src_=i,c.key=i,c.image_=new Image,null!==o&&(c.image_.crossOrigin=o),c.unlisten_=null,c.tileLoadFunction_=s,c}return an(t,n),t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(e){this.image_=e,this.state=2,this.unlistenImage_(),this.changed()},t.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.image_=function(){var n=Tl(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}(),this.changed()},t.prototype.handleImageLoad_=function(){var e=this.image_;this.state=e.naturalWidth&&e.naturalHeight?2:4,this.unlistenImage_(),this.changed()},t.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=lw(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(lh),P_=function(){function n(t,e,r,i,o,s){this.sourceProj_=t,this.targetProj_=e;var a={},c=yl(this.targetProj_,this.sourceProj_);this.transformInv_=function(j){var G=j[0]+"/"+j[1];return a[G]||(a[G]=c(j)),a[G]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Yi(i)==Yi(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Yi(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Yi(this.targetProj_.getExtent()):null;var h=Ys(r),p=da(r),m=Ts(r),E=qr(r),S=this.transformInv_(h),x=this.transformInv_(p),P=this.transformInv_(m),R=this.transformInv_(E),F=10+(s?Math.max(0,Math.ceil(vn(Fi(r)/(s*s*256*256)))):0);if(this.addQuad_(h,p,m,E,S,x,P,R,F),this.wrapsXInSource_){var D=1/0;this.triangles_.forEach(function(j,G,X){D=Math.min(D,j.source[0][0],j.source[1][0],j.source[2][0])}),this.triangles_.forEach(function(j){if(Math.max(j.source[0][0],j.source[1][0],j.source[2][0])-D>this.sourceWorldWidth_/2){var G=[[j.source[0][0],j.source[0][1]],[j.source[1][0],j.source[1][1]],[j.source[2][0],j.source[2][1]]];G[0][0]-D>this.sourceWorldWidth_/2&&(G[0][0]-=this.sourceWorldWidth_),G[1][0]-D>this.sourceWorldWidth_/2&&(G[1][0]-=this.sourceWorldWidth_),G[2][0]-D>this.sourceWorldWidth_/2&&(G[2][0]-=this.sourceWorldWidth_);var X=Math.min(G[0][0],G[1][0],G[2][0]);Math.max(G[0][0],G[1][0],G[2][0])-X<this.sourceWorldWidth_/2&&(j.source=G)}}.bind(this))}a={}}return n.prototype.addTriangle_=function(t,e,r,i,o,s){this.triangles_.push({source:[i,o,s],target:[t,e,r]})},n.prototype.addQuad_=function(t,e,r,i,o,s,a,c,h){var p=vs([o,s,a,c]),m=this.sourceWorldWidth_?Yi(p)/this.sourceWorldWidth_:null,E=this.sourceWorldWidth_,S=this.sourceProj_.canWrapX()&&m>.5&&m<1,x=!1;if(h>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(x=Yi(vs([t,e,r,i]))/this.targetWorldWidth_>.25||x),!S&&this.sourceProj_.isGlobal()&&m&&(x=m>.25||x)),!(!x&&this.maxSourceExtent_&&isFinite(p[0])&&isFinite(p[1])&&isFinite(p[2])&&isFinite(p[3]))||Oi(p,this.maxSourceExtent_)){var F=0;if(!(x||isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(c[0])&&isFinite(c[1])))if(h>0)x=!0;else if(1!=(F=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(c[0])&&isFinite(c[1])?0:1))&&2!=F&&4!=F&&8!=F)return;if(h>0){if(!x){var j=this.transformInv_([(t[0]+r[0])/2,(t[1]+r[1])/2]),G=void 0;G=S?(kr(o[0],E)+kr(a[0],E))/2-kr(j[0],E):(o[0]+a[0])/2-j[0];var J=(o[1]+a[1])/2-j[1];x=G*G+J*J>this.errorThresholdSquared_}if(x){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var le=[(e[0]+r[0])/2,(e[1]+r[1])/2],ie=this.transformInv_(le),Fe=[(i[0]+t[0])/2,(i[1]+t[1])/2],Ce=this.transformInv_(Fe);this.addQuad_(t,e,le,Fe,o,s,ie,Ce,h-1),this.addQuad_(Fe,le,r,i,Ce,ie,a,c,h-1)}else{var $e=[(t[0]+e[0])/2,(t[1]+e[1])/2],ot=this.transformInv_($e),st=[(r[0]+i[0])/2,(r[1]+i[1])/2],dt=this.transformInv_(st);this.addQuad_(t,$e,st,i,o,ot,dt,c,h-1),this.addQuad_($e,e,r,st,ot,s,a,dt,h-1)}return}}if(S){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&F)&&this.addTriangle_(t,r,i,o,a,c),0==(14&F)&&this.addTriangle_(t,r,e,o,a,s),F&&(0==(13&F)&&this.addTriangle_(e,i,t,s,c,o),0==(7&F)&&this.addTriangle_(e,i,r,s,c,a))}},n.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,r,i){var o=e.source;Tn(t,o[0]),Tn(t,o[1]),Tn(t,o[2])}),t},n.prototype.getTriangles=function(){return this.triangles_},n}();var Rw,Cd={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};function Oc(n,t,e,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(t,e),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(t,r)+1,Math.max(e,i)),n.restore()}function Gg(n,t){return Math.abs(n[4*t]-210)>2||Math.abs(n[4*t+3]-191.25)>2}function wA(n,t,e,r){var i=rd(e,t,n),o=nd(t,r,e),s=t.getMetersPerUnit();void 0!==s&&(o*=s);var a=n.getMetersPerUnit();void 0!==a&&(o/=a);var c=n.getExtent();if(!c||qo(c,i)){var h=nd(n,o,i)/o;isFinite(h)&&h>0&&(o/=h)}return o}var I_=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Bg=function(n){function t(e,r,i,o,s,a,c,h,p,m,E,S){var x=n.call(this,s,0)||this;x.renderEdges_=void 0!==E&&E,x.contextOptions_=S,x.pixelRatio_=c,x.gutter_=h,x.canvas_=null,x.sourceTileGrid_=r,x.targetTileGrid_=o,x.wrappedTileCoord_=a||s,x.sourceTiles_=[],x.sourcesListenerKeys_=null,x.sourceZ_=0;var P=o.getTileCoordExtent(x.wrappedTileCoord_),R=x.targetTileGrid_.getExtent(),F=x.sourceTileGrid_.getExtent(),D=R?eo(P,R):P;if(0===Fi(D))return x.state=4,x;var j=e.getExtent();j&&(F=F?eo(F,j):j);var G=o.getResolution(x.wrappedTileCoord_[0]),X=function(n,t,e,r){var i=Xo(e),o=wA(n,t,i,r);return(!isFinite(o)||o<=0)&&Oo(e,function(s){return o=wA(n,t,s,r),isFinite(o)&&o>0}),o}(e,i,D,G);if(!isFinite(X)||X<=0)return x.state=4,x;if(x.triangulation_=new P_(e,i,D,F,X*(void 0!==m?m:.5),G),0===x.triangulation_.getTriangles().length)return x.state=4,x;x.sourceZ_=r.getZForResolution(X);var $=x.triangulation_.calculateSourceExtent();if(F&&(e.canWrapX()?($[1]=mt($[1],F[1],F[3]),$[3]=mt($[3],F[1],F[3])):$=eo($,F)),Fi($)){for(var le=r.getTileRangeForExtentAndZ($,x.sourceZ_),ie=le.minX;ie<=le.maxX;ie++)for(var Fe=le.minY;Fe<=le.maxY;Fe++){var Ce=p(x.sourceZ_,ie,Fe,c);Ce&&x.sourceTiles_.push(Ce)}0===x.sourceTiles_.length&&(x.state=4)}else x.state=4;return x}return I_(t,n),t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var e=[];if(this.sourceTiles_.forEach(function(p,m,E){p&&2==p.getState()&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(p.tileCoord),image:p.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=3;else{var r=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(r),o="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],a=this.targetTileGrid_.getResolution(r),c=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(n,t,e,r,i,o,s,a,c,h,p,m){var E=Tl(Math.round(e*n),Math.round(e*t));if(xt(E,m),0===c.length)return E.canvas;function S(G){return Math.round(G*e)/e}E.scale(e,e),E.globalCompositeOperation="lighter";var x=[1/0,1/0,-1/0,-1/0];c.forEach(function(G,X,J){bn(x,G.extent)});var P=Yi(x),R=yo(x),F=Tl(Math.round(e*P/r),Math.round(e*R/r));xt(F,m);var D=e/r;c.forEach(function(G,X,J){var $=G.extent[0]-x[0],le=-(G.extent[3]-x[3]),ie=Yi(G.extent),Fe=yo(G.extent);G.image.width>0&&G.image.height>0&&F.drawImage(G.image,h,h,G.image.width-2*h,G.image.height-2*h,$*D,le*D,ie*D,Fe*D)});var j=Ys(s);return a.getTriangles().forEach(function(G,X,J){var $=G.source,le=G.target,ie=$[0][0],Fe=$[0][1],Ce=$[1][0],$e=$[1][1],ot=$[2][0],st=$[2][1],dt=S((le[0][0]-j[0])/o),kt=S(-(le[0][1]-j[1])/o),Qe=S((le[1][0]-j[0])/o),Zt=S(-(le[1][1]-j[1])/o),gt=S((le[2][0]-j[0])/o),Re=S(-(le[2][1]-j[1])/o),Xe=ie,Oe=Fe;ie=0,Fe=0;var Pt=function(n){for(var t=n.length,e=0;e<t;e++){for(var r=e,i=Math.abs(n[e][e]),o=e+1;o<t;o++){var s=Math.abs(n[o][e]);s>i&&(i=s,r=o)}if(0===i)return null;var a=n[r];n[r]=n[e],n[e]=a;for(var c=e+1;c<t;c++)for(var h=-n[c][e]/n[e][e],p=e;p<t+1;p++)e==p?n[c][p]=0:n[c][p]+=h*n[e][p]}for(var m=new Array(t),E=t-1;E>=0;E--){m[E]=n[E][t]/n[E][E];for(var S=E-1;S>=0;S--)n[S][t]-=n[S][E]*m[E]}return m}([[Ce-=Xe,$e-=Oe,0,0,Qe-dt],[ot-=Xe,st-=Oe,0,0,gt-dt],[0,0,Ce,$e,Zt-kt],[0,0,ot,st,Re-kt]]);if(Pt){if(E.save(),E.beginPath(),function(){if(void 0===Rw){var n=document.createElement("canvas").getContext("2d");n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Oc(n,4,5,4,0),Oc(n,4,5,0,5);var t=n.getImageData(0,0,3,3).data;Rw=Gg(t,0)||Gg(t,4)||Gg(t,8)}return Rw}()||m===Cd){E.moveTo(Qe,Zt);for(var dn=dt-Qe,Pn=kt-Zt,ft=0;ft<4;ft++)E.lineTo(Qe+S((ft+1)*dn/4),Zt+S(ft*Pn/3)),3!=ft&&E.lineTo(Qe+S((ft+1)*dn/4),Zt+S((ft+1)*Pn/3));E.lineTo(gt,Re)}else E.moveTo(Qe,Zt),E.lineTo(dt,kt),E.lineTo(gt,Re);E.clip(),E.transform(Pt[0],Pt[2],Pt[1],Pt[3],dt,kt),E.translate(x[0]-Xe,x[3]-Oe),E.scale(r/e,-r/e),E.drawImage(F.canvas,0,0),E.restore()}}),p&&(E.save(),E.globalCompositeOperation="source-over",E.strokeStyle="black",E.lineWidth=1,a.getTriangles().forEach(function(G,X,J){var $=G.target,le=($[0][0]-j[0])/o,ie=-($[0][1]-j[1])/o,Fe=($[1][0]-j[0])/o,Ce=-($[1][1]-j[1])/o,$e=($[2][0]-j[0])/o,ot=-($[2][1]-j[1])/o;E.beginPath(),E.moveTo(Fe,Ce),E.lineTo(le,ie),E.lineTo($e,ot),E.closePath(),E.stroke()}),E.restore()),E.canvas}(o,s,this.pixelRatio_,c,this.sourceTileGrid_.getExtent(),a,h,this.triangulation_,e,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=2}this.changed()},t.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(r,i,o){var s=r.getState();if(0==s||1==s){e++;var a=mn(r,"change",function(c){var h=r.getState();(2==h||3==h||4==h)&&(un(a),0==--e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(a)}}.bind(this)),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(r,i,o){0==r.getState()&&r.load()})}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(un),this.sourcesListenerKeys_=null},t}(lh);var Ow=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function l1(n,t){n.getImage().src=t}const D0=function(n){function t(e){var r=n.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:l1,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,r.tileClass=void 0!==e.tileClass?e.tileClass:bo,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,r.contextOptions_=!1===e.imageSmoothing?Cd:void 0,r.renderReprojectionEdges_=!1,r}return Ow(t,n),t.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},t.prototype.expireCache=function(e,r){var i=this.getTileCacheForProjection(e);for(var o in this.tileCache.expireCache(this.tileCache==i?r:{}),this.tileCacheForProjection){var s=this.tileCacheForProjection[o];s.expireCache(s==i?r:{})}},t.prototype.getContextOptions=function(){return this.contextOptions_},t.prototype.getGutterForProjection=function(e){return this.getProjection()&&e&&!ba(this.getProjection(),e)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getKey=function(){return n.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},t.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!ba(this.getProjection(),e))&&n.prototype.getOpaque.call(this,e)},t.prototype.getTileGridForProjection=function(e){var r=this.getProjection();if(this.tileGrid&&(!r||ba(r,e)))return this.tileGrid;var i=Jt(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Hb(e)),this.tileGridForProjection[i]},t.prototype.getTileCacheForProjection=function(e){var r=this.getProjection();if(!r||ba(r,e))return this.tileCache;var i=Jt(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new y_(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},t.prototype.createTile_=function(e,r,i,o,s,a){var c=[e,r,i],h=this.getTileCoordForTileUrlFunction(c,s),p=h?this.tileUrlFunction(h,o,s):void 0,m=new this.tileClass(c,void 0!==p?0:4,void 0!==p?p:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return m.key=a,m.addEventListener("change",this.handleTileChange.bind(this)),m},t.prototype.getTile=function(e,r,i,o,s){var a=this.getProjection();if(!a||!s||ba(a,s))return this.getTileInternal(e,r,i,o,a||s);var c=this.getTileCacheForProjection(s),h=[e,r,i],p=void 0,m=Vb(h);c.containsKey(m)&&(p=c.get(m));var E=this.getKey();if(p&&p.key==E)return p;var S=this.getTileGridForProjection(a),x=this.getTileGridForProjection(s),P=this.getTileCoordForTileUrlFunction(h,s),R=new Bg(a,S,s,x,h,P,this.getTilePixelRatio(o),this.getGutter(),function(F,D,j,G){return this.getTileInternal(F,D,j,G,a)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return R.key=E,p?(R.interimTile=p,R.refreshInterimChain(),c.replace(m,R)):c.set(m,R),R},t.prototype.getTileInternal=function(e,r,i,o,s){var a=null,c=$f(e,r,i),h=this.getKey();if(this.tileCache.containsKey(c)){if((a=this.tileCache.get(c)).key!=h){var p=a;(a=this.createTile_(e,r,i,o,s,h)).interimTile=0==p.getState()?p.interimTile:p,a.refreshInterimChain(),this.tileCache.replace(c,a)}}else a=this.createTile_(e,r,i,o,s,h),this.tileCache.set(c,a);return a},t.prototype.setRenderReprojectionEdges=function(e){if(this.renderReprojectionEdges_!=e){for(var r in this.renderReprojectionEdges_=e,this.tileCacheForProjection)this.tileCacheForProjection[r].clear();this.changed()}},t.prototype.setTileGridForProjection=function(e,r){var i=Zi(e);if(i){var o=Jt(i);o in this.tileGridForProjection||(this.tileGridForProjection[o]=r)}},t}(Jx);var L0=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const N0=function(n){function t(e){var i=e||{},o=void 0!==i.projection?i.projection:"EPSG:3857",s=void 0!==i.tileGrid?i.tileGrid:el({extent:h0(o),maxResolution:i.maxResolution,maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});return n.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,imageSmoothing:i.imageSmoothing,opaque:i.opaque,projection:o,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:s,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection})||this}return L0(t,n),t}(D0);var F0=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const j0=function(n){function t(e){var i=e||{};return n.call(this,{attributions:void 0!==i.attributions?i.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],attributionsCollapsible:!1,cacheSize:i.cacheSize,crossOrigin:void 0!==i.crossOrigin?i.crossOrigin:"anonymous",imageSmoothing:i.imageSmoothing,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,opaque:void 0===i.opaque||i.opaque,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,transition:i.transition,url:void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:i.wrapX,zDirection:i.zDirection})||this}return F0(t,n),t}(N0),u1=function(){function n(t){this.rbush_=new $b(t),this.items_={}}return n.prototype.insert=function(t,e){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(r),this.items_[Jt(e)]=r},n.prototype.load=function(t,e){for(var r=new Array(e.length),i=0,o=e.length;i<o;i++){var s=t[i],a=e[i],c={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};r[i]=c,this.items_[Jt(a)]=c}this.rbush_.load(r)},n.prototype.remove=function(t){var e=Jt(t),r=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(r)},n.prototype.update=function(t,e){var r=this.items_[Jt(e)];nn([r.minX,r.minY,r.maxX,r.maxY],t)||(this.remove(e),this.insert(t,e))},n.prototype.getAll=function(){return this.rbush_.all().map(function(e){return e.value})},n.prototype.getInExtent=function(t){return this.rbush_.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).map(function(i){return i.value})},n.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},n.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},n.prototype.forEach_=function(t,e){for(var r,i=0,o=t.length;i<o;i++)if(r=e(t[i]))return r;return r},n.prototype.isEmpty=function(){return Ve(this.items_)},n.prototype.clear=function(){this.rbush_.clear(),this.items_={}},n.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return W(e.minX,e.minY,e.maxX,e.maxY,t)},n.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},n}();function CA(n,t){return[[-1/0,-1/0,1/0,1/0]]}var c1=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Kh=function(n){function t(e,r,i){var o=n.call(this,e)||this;return o.feature=r,o.features=i,o}return c1(t,n),t}(xe);const d1=function(n){function t(e){var r=this,i=e||{};(r=n.call(this,{attributions:i.attributions,projection:void 0,state:"ready",wrapX:void 0===i.wrapX||i.wrapX})||this).loader_=it,r.format_=i.format,r.overlaps_=void 0===i.overlaps||i.overlaps,r.url_=i.url,void 0!==i.loader?r.loader_=i.loader:void 0!==r.url_&&(Nn(r.format_,7),r.loader_=w_(r.url_,r.format_)),r.strategy_=void 0!==i.strategy?i.strategy:CA;var s,a,o=void 0===i.useSpatialIndex||i.useSpatialIndex;return r.featuresRtree_=o?new u1:null,r.loadedExtentsRtree_=new u1,r.loadingExtentsCount_=0,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(i.features)?a=i.features:i.features&&(a=(s=i.features).getArray()),!o&&void 0===s&&(s=new vu(a)),void 0!==a&&r.addFeaturesInternal(a),void 0!==s&&r.bindFeaturesCollection_(s),r}return c1(t,n),t.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},t.prototype.addFeatureInternal=function(e){var r=Jt(e);if(this.addToIndex_(r,e)){this.setupChangeEvents_(r,e);var i=e.getGeometry();if(i){var o=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,e)}else this.nullGeometryFeatures_[r]=e;this.dispatchEvent(new Kh("addfeature",e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)},t.prototype.setupChangeEvents_=function(e,r){this.featureChangeKeys_[e]=[mn(r,"change",this.handleFeatureChange_,this),mn(r,"propertychange",this.handleFeatureChange_,this)]},t.prototype.addToIndex_=function(e,r){var i=!0,o=r.getId();return void 0!==o&&(o.toString()in this.idIndex_?i=!1:this.idIndex_[o.toString()]=r),i&&(Nn(!(e in this.uidIndex_),30),this.uidIndex_[e]=r),i},t.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},t.prototype.addFeaturesInternal=function(e){for(var r=[],i=[],o=[],s=0,a=e.length;s<a;s++){var h=Jt(c=e[s]);this.addToIndex_(h,c)&&i.push(c)}s=0;for(var p=i.length;s<p;s++){var c;h=Jt(c=i[s]),this.setupChangeEvents_(h,c);var m=c.getGeometry();if(m){var E=m.getExtent();r.push(E),o.push(c)}else this.nullGeometryFeatures_[h]=c}this.featuresRtree_&&this.featuresRtree_.load(r,o),s=0;for(var S=i.length;s<S;s++)this.dispatchEvent(new Kh("addfeature",i[s]))},t.prototype.bindFeaturesCollection_=function(e){var r=!1;this.addEventListener("addfeature",function(i){r||(r=!0,e.push(i.feature),r=!1)}),this.addEventListener("removefeature",function(i){r||(r=!0,e.remove(i.feature),r=!1)}),e.addEventListener("add",function(i){r||(r=!0,this.addFeature(i.element),r=!1)}.bind(this)),e.addEventListener("remove",function(i){r||(r=!0,this.removeFeature(i.element),r=!1)}.bind(this)),this.featuresCollection_=e},t.prototype.clear=function(e){if(e){for(var r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(un);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var o in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[o]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var s=new Kh("clear");this.dispatchEvent(s),this.changed()},t.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},t.prototype.forEachFeatureAtCoordinateDirect=function(e,r){return this.forEachFeatureInExtent([e[0],e[1],e[0],e[1]],function(o){if(o.getGeometry().intersectsCoordinate(e))return r(o)})},t.prototype.forEachFeatureInExtent=function(e,r){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,r);this.featuresCollection_&&this.featuresCollection_.forEach(r)},t.prototype.forEachFeatureIntersectingExtent=function(e,r){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){var s=r(i);if(s)return s}})},t.prototype.getFeaturesCollection=function(){return this.featuresCollection_},t.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Ve(this.nullGeometryFeatures_)||Be(e,Ee(this.nullGeometryFeatures_))),e},t.prototype.getFeaturesAtCoordinate=function(e){var r=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){r.push(i)}),r},t.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_?this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},t.prototype.getClosestFeatureToCoordinate=function(e,r){var i=e[0],o=e[1],s=null,a=[NaN,NaN],c=1/0,h=[-1/0,-1/0,1/0,1/0],p=r||Ue;return this.featuresRtree_.forEachInExtent(h,function(m){if(p(m)){var E=m.getGeometry(),S=c;if((c=E.closestPointXY(i,o,a,c))<S){s=m;var x=Math.sqrt(c);h[0]=i-x,h[1]=o-x,h[2]=i+x,h[3]=o+x}}}),s},t.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},t.prototype.getFeatureById=function(e){var r=this.idIndex_[e.toString()];return void 0!==r?r:null},t.prototype.getFeatureByUid=function(e){var r=this.uidIndex_[e];return void 0!==r?r:null},t.prototype.getFormat=function(){return this.format_},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.getUrl=function(){return this.url_},t.prototype.handleFeatureChange_=function(e){var r=e.target,i=Jt(r),o=r.getGeometry();if(o){var s=o.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(s,r)):this.featuresRtree_&&this.featuresRtree_.update(s,r)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(r),this.nullGeometryFeatures_[i]=r);var a=r.getId();if(void 0!==a){var c=a.toString();this.idIndex_[c]!==r&&(this.removeFromIdIndex_(r),this.idIndex_[c]=r)}else this.removeFromIdIndex_(r),this.uidIndex_[i]=r;this.changed(),this.dispatchEvent(new Kh("changefeature",r))},t.prototype.hasFeature=function(e){var r=e.getId();return void 0!==r?r in this.idIndex_:Jt(e)in this.uidIndex_},t.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Ve(this.nullGeometryFeatures_)},t.prototype.loadFeatures=function(e,r,i){for(var o=this.loadedExtentsRtree_,s=this.strategy_(e,r),a=function(m,E){var S=s[m];o.forEachInExtent(S,function(P){return Zn(P.extent,S)})||(++c.loadingExtentsCount_,c.dispatchEvent(new Kh("featuresloadstart")),c.loader_.call(c,S,r,i,function(P){--this.loadingExtentsCount_,this.dispatchEvent(new Kh("featuresloadend",void 0,P))}.bind(c),function(){--this.loadingExtentsCount_,this.dispatchEvent(new Kh("featuresloaderror"))}.bind(c)),o.insert(S,{extent:S.slice()}))},c=this,h=0,p=s.length;h<p;++h)a(h);this.loading=this.loader_!==it&&this.loadingExtentsCount_>0},t.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),n.prototype.refresh.call(this)},t.prototype.removeLoadedExtent=function(e){var i,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(o){if(nn(o.extent,e))return i=o,!0}),i&&r.remove(i)},t.prototype.removeFeature=function(e){var r=Jt(e);r in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[r]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e),this.changed()},t.prototype.removeFeatureInternal=function(e){var r=Jt(e);this.featureChangeKeys_[r].forEach(un),delete this.featureChangeKeys_[r];var i=e.getId();void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[r],this.dispatchEvent(new Kh("removefeature",e))},t.prototype.removeFromIdIndex_=function(e){var r=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],r=!0;break}return r},t.prototype.setLoader=function(e){this.loader_=e},t.prototype.setUrl=function(e){Nn(this.format_,7),this.url_=e,this.setLoader(w_(e,this.format_))},t}(qx);var L2=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const k2=function(n){function t(e){var r=n.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.dirty_=!1,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=[1/0,1/0,-1/0,-1/0],r.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r.declutterExecutorGroup=null,r.clipping=!0,r}return L2(t,n),t.prototype.useContainer=function(e,r,i){i<1&&(e=null),n.prototype.useContainer.call(this,e,r,i)},t.prototype.renderWorlds=function(e,r,i){var o=r.extent,s=r.viewState,a=s.center,c=s.resolution,h=s.projection,p=s.rotation,m=h.getExtent(),E=this.getLayer().getSource(),S=r.pixelRatio,x=r.viewHints,P=!(x[0]||x[1]),R=this.context,F=Math.round(r.size[0]*S),D=Math.round(r.size[1]*S),j=E.getWrapX()&&h.canWrapX(),G=j?Yi(m):null,X=j?Math.ceil((o[2]-m[2])/G)+1:1,J=j?Math.floor((o[0]-m[0])/G):0;do{var $=this.getRenderTransform(a,c,p,S,F,D,J*G);e.execute(R,1,$,p,P,void 0,i)}while(++J<X)},t.prototype.renderDeclutter=function(e){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree)},t.prototype.renderFrame=function(e,r){var i=e.pixelRatio,o=e.layerStatesArray[e.layerIndex];(function(n,t,e){ga(n,t,0,0,e,0,0)})(this.pixelTransform,1/i,1/i),ii(this.inversePixelTransform,this.pixelTransform);var s=ds(this.pixelTransform);this.useContainer(r,s,o.opacity);var a=this.context,c=a.canvas,h=this.replayGroup_,p=this.declutterExecutorGroup;if((!h||h.isEmpty())&&(!p||p.isEmpty()))return!this.containerReused&&c.width>0&&(c.width=0),this.container;var m=Math.round(e.size[0]*i),E=Math.round(e.size[1]*i);c.width!=m||c.height!=E?(c.width=m,c.height=E,c.style.transform!==s&&(c.style.transform=s)):this.containerReused||a.clearRect(0,0,m,E),this.preRender(a,e);var S=e.viewState,P=!1,R=!0;if(o.extent&&this.clipping){var F=Gn(o.extent);(P=(R=Oi(F,e.extent))&&!Zn(F,e.extent))&&this.clipUnrotated(a,e,F)}R&&this.renderWorlds(h,e),P&&a.restore(),this.postRender(a,e);var D=o.opacity,j=this.container;return D!==parseFloat(j.style.opacity)&&(j.style.opacity=1===D?"":String(D)),this.renderedRotation_!==S.rotation&&(this.renderedRotation_=S.rotation,this.hitDetectionImageData_=null),this.container},t.prototype.getFeatures=function(e){return new Promise(function(r){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];Lo(this.pixelTransform,i);var o=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,c=this.renderedProjection_,h=this.wrappedRenderedExtent_,p=this.getLayer(),m=[],E=i[0]*_s,S=i[1]*_s;m.push(this.getRenderTransform(o,s,a,_s,E,S,0).slice());var x=p.getSource(),P=c.getExtent();if(x.getWrapX()&&c.canWrapX()&&!Zn(P,h)){for(var R=h[0],F=Yi(P),D=0;R<P[0];)--D,m.push(this.getRenderTransform(o,s,a,_s,E,S,F*D).slice()),R+=F;for(D=0,R=h[2];R>P[2];)++D,m.push(this.getRenderTransform(o,s,a,_s,E,S,F*D).slice()),R-=F}this.hitDetectionImageData_=up(i,m,this.renderedFeatures_,p.getStyleFunction(),h,s,a)}r(c_(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},t.prototype.forEachFeatureAtCoordinate=function(e,r,i,o,s){var a=this;if(this.replayGroup_){var S,c=r.viewState.resolution,h=r.viewState.rotation,p=this.getLayer(),m={},E=function(P,R,F){var D=Jt(P),j=m[D];if(j){if(!0!==j&&F<j.distanceSq){if(0===F)return m[D]=!0,s.splice(s.lastIndexOf(j),1),o(P,p,R);j.geometry=R,j.distanceSq=F}}else{if(0===F)return m[D]=!0,o(P,p,R);s.push(m[D]={feature:P,layer:p,geometry:R,distanceSq:F,callback:o})}},x=[this.replayGroup_];return this.declutterExecutorGroup&&x.push(this.declutterExecutorGroup),x.some(function(P){return S=P.forEachFeatureAtCoordinate(e,c,h,i,E,P===a.declutterExecutorGroup?r.declutterTree.all().map(function(R){return R.value}):null)}),S}},t.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.prepareFrame=function(e){var r=this.getLayer(),i=r.getSource();if(!i)return!1;var o=e.viewHints[0],s=e.viewHints[1],a=r.getUpdateWhileAnimating(),c=r.getUpdateWhileInteracting();if(!this.dirty_&&!a&&o||!c&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var h=e.extent,p=e.viewState,m=p.projection,E=p.resolution,S=e.pixelRatio,x=r.getRevision(),P=r.getRenderBuffer(),R=r.getRenderOrder();void 0===R&&(R=d_);var F=p.center.slice(),D=vi(h,P*E),j=D.slice(),G=[D.slice()],X=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!Zn(X,e.extent)){var J=Yi(X),$=Math.max(Yi(D)/2,J);D[0]=X[0]-$,D[2]=X[2]+$,Qt(F,m);var le=function(n,t){var e=t.getExtent(),r=Xo(n);if(t.canWrapX()&&(r[0]<e[0]||r[0]>=e[2])){var i=Yi(e),s=Math.floor((r[0]-e[0])/i)*i;n[0]-=s,n[2]-=s}return n}(G[0],m);le[0]<X[0]&&le[2]<X[2]?G.push([le[0]+J,le[1],le[2]+J,le[3]]):le[0]>X[0]&&le[2]>X[2]&&G.push([le[0]-J,le[1],le[2]-J,le[3]])}if(!this.dirty_&&this.renderedResolution_==E&&this.renderedRevision_==x&&this.renderedRenderOrder_==R&&Zn(this.wrappedRenderedExtent_,D))return Me(this.renderedExtent_,j)||(this.hitDetectionImageData_=null,this.renderedExtent_=j),this.renderedCenter_=F,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var Fe,ie=new Pg(hw(E,S),D,E,S);this.getLayer().getDeclutter()&&(Fe=new Pg(hw(E,S),D,E,S));var $e,Ce=Gt();if(Ce){for(var ot=0,st=G.length;ot<st;++ot)i.loadFeatures(Jr(G[ot]),E,Ce);$e=wa(Ce,m)}else for(ot=0,st=G.length;ot<st;++ot)i.loadFeatures(G[ot],E,m);var dt=dw(E,S),kt=function(Xe){var Oe,qt=Xe.getStyleFunction()||r.getStyleFunction();if(qt&&(Oe=qt(Xe,E)),Oe){var Pt=this.renderFeature(Xe,dt,Oe,ie,$e,Fe);this.dirty_=this.dirty_||Pt}}.bind(this),Qe=Jr(D),Zt=i.getFeaturesInExtent(Qe);for(R&&Zt.sort(R),ot=0,st=Zt.length;ot<st;++ot)kt(Zt[ot]);this.renderedFeatures_=Zt;var gt=ie.finish(),Re=new oh(D,E,S,i.getOverlaps(),gt,r.getRenderBuffer());return Fe&&(this.declutterExecutorGroup=new oh(D,E,S,i.getOverlaps(),Fe.finish(),r.getRenderBuffer())),this.renderedResolution_=E,this.renderedRevision_=x,this.renderedRenderOrder_=R,this.renderedExtent_=j,this.wrappedRenderedExtent_=D,this.renderedCenter_=F,this.renderedProjection_=m,this.replayGroup_=Re,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},t.prototype.renderFeature=function(e,r,i,o,s,a){if(!i)return!1;var c=!1;if(Array.isArray(i))for(var h=0,p=i.length;h<p;++h)c=Rg(o,e,i[h],r,this.boundHandleStyleImageChange_,s,a)||c;else c=Rg(o,e,i,r,this.boundHandleStyleImageChange_,s,a);return c},t}(aw);var TA=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const A_=function(n){function t(e){return n.call(this,e)||this}return TA(t,n),t.prototype.createRenderer=function(){return new k2(this)},t}(e_);window.ol&&!ol.ext&&(ol.ext={});var N2=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n};window.ol&&(ol.inherits||(ol.inherits=N2)),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.Element&&!Element.prototype.remove&&(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});const M_=N2;var IA=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const AA=function(n){function t(e){return n.call(this,e||{})||this}return IA(t,n),t}(hd);var G2=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const A5=function(n){function t(e){var r=n.call(this,e)||this;return r.image_=null,r}return G2(t,n),t.prototype.getImage=function(){return this.image_?this.image_.getImage():null},t.prototype.prepareFrame=function(e){var r=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,o=e.viewState,s=o.resolution,a=this.getLayer().getSource(),c=e.viewHints,h=e.extent;if(void 0!==r.extent&&(h=eo(h,Gn(r.extent))),!c[0]&&!c[1]&&!pl(h))if(a){var E=a.getImage(h,s,i,o.projection);E&&this.loadImage(E)&&(this.image_=E)}else this.image_=null;return!!this.image_},t.prototype.renderFrame=function(e,r){var i=this.image_,o=i.getExtent(),s=i.getResolution(),a=i.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],h=e.pixelRatio,p=e.viewState,m=p.center,S=e.size,x=h*s/(p.resolution*a),P=Math.round(S[0]*h),R=Math.round(S[1]*h),F=p.rotation;if(F){var D=Math.round(Math.sqrt(P*P+R*R));P=D,R=D}In(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/h,1/h,F,-P/2,-R/2),ii(this.inversePixelTransform,this.pixelTransform);var j=ds(this.pixelTransform);this.useContainer(r,j,c.opacity);var G=this.context,X=G.canvas;X.width!=P||X.height!=R?(X.width=P,X.height=R):this.containerReused||G.clearRect(0,0,P,R);var J=!1,$=!0;if(c.extent){var le=Gn(c.extent);(J=($=Oi(le,e.extent))&&!Zn(le,e.extent))&&this.clipUnrotated(G,e,le)}var ie=i.getImage(),Fe=In(this.tempTransform,P/2,R/2,x,x,0,a*(o[0]-m[0])/s,a*(m[1]-o[3])/s);this.renderedResolution=s*h/a;var Ce=ie.width*Fe[0],$e=ie.height*Fe[3];if(xt(G,this.getLayer().getSource().getContextOptions()),this.preRender(G,e),$&&Ce>=.5&&$e>=.5){var ot=Fe[4],st=Fe[5],dt=c.opacity,kt=void 0;1!==dt&&(kt=G.globalAlpha,G.globalAlpha=dt),G.drawImage(ie,0,0,+ie.width,+ie.height,Math.round(ot),Math.round(st),Math.round(Ce),Math.round($e)),1!==dt&&(G.globalAlpha=kt)}return this.postRender(G,e),J&&G.restore(),j!==X.style.transform&&(X.style.transform=j),this.container},t}(aw);var j2=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const M5=function(n){function t(e){return n.call(this,e)||this}return j2(t,n),t.prototype.createRenderer=function(){return new A5(this)},t}(AA);var DA,h1=34962,z2=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function H2(n,t){for(var e=z2.length,r=0;r<e;++r)try{var i=n.getContext(z2[r],t);if(i)return i}catch(o){}return null}function g1(n){switch(n){case h1:return Float32Array;case 34963:return Uint32Array;default:return Float32Array}}const pp=function(){function n(t,e){this.array=null,this.type=t,Nn(t===h1||34963===t,62),this.usage=void 0!==e?e:35044}return n.prototype.ofSize=function(t){this.array=new(g1(this.type))(t)},n.prototype.fromArray=function(t){this.array=g1(this.type).from(t)},n.prototype.fromArrayBuffer=function(t){this.array=new(g1(this.type))(t)},n.prototype.getType=function(){return this.type},n.prototype.getArray=function(){return this.array},n.prototype.getUsage=function(){return this.usage},n.prototype.getSize=function(){return this.array?this.array.length:0},n}(),R_=function(){function n(t){this.gl_=t.webGlContext;var e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(r);var i=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(i,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n"),e.compileShader(i),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,r),e.attachShader(this.renderTargetProgram_,i),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(s){this.uniforms_.push({value:t.uniforms[s],location:e.getUniformLocation(this.renderTargetProgram_,s)})}.bind(this))}return n.prototype.getGL=function(){return this.gl_},n.prototype.init=function(t){var e=this.getGL(),r=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;var o=e.RGBA,a=e.RGBA,c=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,0,o,r[0],r[1],0,a,c,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}},n.prototype.apply=function(t,e){var r=this.getGL(),i=t.size;r.bindFramebuffer(r.FRAMEBUFFER,e?e.getFrameBuffer():null),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.useProgram(this.renderTargetProgram_),r.enableVertexAttribArray(this.renderTargetAttribLocation_),r.vertexAttribPointer(this.renderTargetAttribLocation_,2,r.FLOAT,!1,0,0),r.uniform2f(this.renderTargetUniformLocation_,i[0],i[1]),r.uniform1i(this.renderTargetTextureLocation_,0),this.applyUniforms(t),r.drawArrays(r.TRIANGLES,0,6)},n.prototype.getFrameBuffer=function(){return this.frameBuffer_},n.prototype.applyUniforms=function(t){var r,e=this.getGL(),i=1;this.uniforms_.forEach(function(o){if((r="function"==typeof o.value?o.value(t):o.value)instanceof HTMLCanvasElement||r instanceof ImageData)o.texture||(o.texture=e.createTexture()),e.activeTexture(e["TEXTURE"+i]),e.bindTexture(e.TEXTURE_2D,o.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),r instanceof ImageData?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,r.width,r.height,0,e.UNSIGNED_BYTE,new Uint8Array(r.data)):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.uniform1i(o.location,i++);else if(Array.isArray(r))switch(r.length){case 2:return void e.uniform2f(o.location,r[0],r[1]);case 3:return void e.uniform3f(o.location,r[0],r[1],r[2]);case 4:return void e.uniform4f(o.location,r[0],r[1],r[2],r[3]);default:return}else"number"==typeof r&&e.uniform1f(o.location,r)})},n}();function kw(n,t){return n[0]=t[0],n[1]=t[1],n[4]=t[2],n[5]=t[3],n[12]=t[4],n[13]=t[5],n}var X2=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sd={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function GA(n){switch(n){case Sd.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Sd.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Sd.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Sd.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}const BA=function(n){function t(e){var r=n.call(this)||this,i=e||{};r.boundHandleWebGLContextLost_=r.handleWebGLContextLost.bind(r),r.boundHandleWebGLContextRestored_=r.handleWebGLContextRestored.bind(r),r.canvas_=document.createElement("canvas"),r.canvas_.style.position="absolute",r.canvas_.style.left="0",r.gl_=H2(r.canvas_);var o=r.getGL();if(r.bufferCache_={},r.currentProgram_=null,Nn(function(n,t){return n.indexOf("OES_element_index_uint")>=0}(function(){if(!DA){var t=H2(document.createElement("canvas"));t&&(DA=t.getSupportedExtensions())}return DA}()),63),o.getExtension("OES_element_index_uint"),r.canvas_.addEventListener("webglcontextlost",r.boundHandleWebGLContextLost_),r.canvas_.addEventListener("webglcontextrestored",r.boundHandleWebGLContextRestored_),r.offsetRotateMatrix_=[1,0,0,1,0,0],r.offsetScaleMatrix_=[1,0,0,1,0,0],r.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.uniformLocations_={},r.attribLocations_={},r.uniforms_=[],i.uniforms)for(var s in i.uniforms)r.uniforms_.push({name:s,value:i.uniforms[s]});return r.postProcessPasses_=i.postProcesses?i.postProcesses.map(function(a){return new R_({webGlContext:o,scaleRatio:a.scaleRatio,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,uniforms:a.uniforms})}):[new R_({webGlContext:o})],r.shaderCompileErrors_=null,r.startTime_=Date.now(),r}return X2(t,n),t.prototype.bindBuffer=function(e){var r=this.getGL(),i=Jt(e),o=this.bufferCache_[i];if(!o){var s=r.createBuffer();this.bufferCache_[i]=o={buffer:e,webGlBuffer:s}}r.bindBuffer(e.getType(),o.webGlBuffer)},t.prototype.flushBufferData=function(e){var r=this.getGL();this.bindBuffer(e),r.bufferData(e.getType(),e.getArray(),e.getUsage())},t.prototype.deleteBuffer=function(e){var r=this.getGL(),i=Jt(e),o=this.bufferCache_[i];o&&!r.isContextLost()&&r.deleteBuffer(o.webGlBuffer),delete this.bufferCache_[i]},t.prototype.disposeInternal=function(){this.canvas_.removeEventListener("webglcontextlost",this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener("webglcontextrestored",this.boundHandleWebGLContextRestored_)},t.prototype.prepareDraw=function(e){var r=this.getGL(),i=this.getCanvas(),o=e.size,s=e.pixelRatio;i.width=o[0]*s,i.height=o[1]*s,i.style.width=o[0]+"px",i.style.height=o[1]+"px",r.useProgram(this.currentProgram_);for(var a=this.postProcessPasses_.length-1;a>=0;a--)this.postProcessPasses_[a].init(e);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.currentProgram_),this.applyFrameState(e),this.applyUniforms(e)},t.prototype.prepareDrawToRenderTarget=function(e,r,i){var o=this.getGL(),s=r.getSize();o.bindFramebuffer(o.FRAMEBUFFER,r.getFramebuffer()),o.viewport(0,0,s[0],s[1]),o.bindTexture(o.TEXTURE_2D,r.getTexture()),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,i?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(e),this.applyUniforms(e)},t.prototype.drawElements=function(e,r){var i=this.getGL();i.drawElements(i.TRIANGLES,r-e,i.UNSIGNED_INT,4*e)},t.prototype.finalizeDraw=function(e){for(var r=0;r<this.postProcessPasses_.length;r++)this.postProcessPasses_[r].apply(e,this.postProcessPasses_[r+1]||null)},t.prototype.getCanvas=function(){return this.canvas_},t.prototype.getGL=function(){return this.gl_},t.prototype.applyFrameState=function(e){var r=e.size,i=e.viewState.rotation,o=cs(this.offsetScaleMatrix_);ko(o,2/r[0],2/r[1]);var s=cs(this.offsetRotateMatrix_);0!==i&&function(n,t){var e=Math.cos(t),r=Math.sin(t);Ba(n,ga(El,e,r,-r,e,0,0))}(s,-i),this.setUniformMatrixValue("u_offsetScaleMatrix",kw(this.tmpMat4_,o)),this.setUniformMatrixValue("u_offsetRotateMatrix",kw(this.tmpMat4_,s)),this.setUniformFloatValue("u_time",.001*(Date.now()-this.startTime_)),this.setUniformFloatValue("u_zoom",e.viewState.zoom),this.setUniformFloatValue("u_resolution",e.viewState.resolution)},t.prototype.applyUniforms=function(e){var i,r=this.getGL(),o=0;this.uniforms_.forEach(function(s){if((i="function"==typeof s.value?s.value(e):s.value)instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData)s.texture||(s.prevValue=void 0,s.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+o]),r.bindTexture(r.TEXTURE_2D,s.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(!(i instanceof HTMLImageElement)||i.complete)&&s.prevValue!==i&&(s.prevValue=i,r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,i)),r.uniform1i(this.getUniformLocation(s.name),o++);else if(Array.isArray(i)&&6===i.length)this.setUniformMatrixValue(s.name,kw(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:return void r.uniform2f(this.getUniformLocation(s.name),i[0],i[1]);case 3:return void r.uniform3f(this.getUniformLocation(s.name),i[0],i[1],i[2]);case 4:return void r.uniform4f(this.getUniformLocation(s.name),i[0],i[1],i[2],i[3]);default:return}else"number"==typeof i&&r.uniform1f(this.getUniformLocation(s.name),i)}.bind(this))},t.prototype.useProgram=function(e){return e!=this.currentProgram_&&(this.getGL().useProgram(e),this.currentProgram_=e,this.uniformLocations_={},this.attribLocations_={},!0)},t.prototype.compileShader=function(e,r){var i=this.getGL(),o=i.createShader(r);return i.shaderSource(o,e),i.compileShader(o),o},t.prototype.getProgram=function(e,r){var i=this.getGL(),o=this.compileShader(e,i.FRAGMENT_SHADER),s=this.compileShader(r,i.VERTEX_SHADER),a=i.createProgram();if(i.attachShader(a,o),i.attachShader(a,s),i.linkProgram(a),!i.getShaderParameter(o,i.COMPILE_STATUS)){var c="Fragment shader compliation failed: "+i.getShaderInfoLog(o);throw new Error(c)}if(i.deleteShader(o),!i.getShaderParameter(s,i.COMPILE_STATUS))throw c="Vertex shader compilation failed: "+i.getShaderInfoLog(s),new Error(c);if(i.deleteShader(s),!i.getProgramParameter(a,i.LINK_STATUS))throw c="GL program linking failed: "+i.getShaderInfoLog(s),new Error(c);return a},t.prototype.getUniformLocation=function(e){return void 0===this.uniformLocations_[e]&&(this.uniformLocations_[e]=this.getGL().getUniformLocation(this.currentProgram_,e)),this.uniformLocations_[e]},t.prototype.getAttributeLocation=function(e){return void 0===this.attribLocations_[e]&&(this.attribLocations_[e]=this.getGL().getAttribLocation(this.currentProgram_,e)),this.attribLocations_[e]},t.prototype.makeProjectionTransform=function(e,r){var i=e.size,o=e.viewState.rotation,s=e.viewState.resolution,a=e.viewState.center;return cs(r),In(r,0,0,2/(s*i[0]),2/(s*i[1]),-o,-a[0],-a[1]),r},t.prototype.setUniformFloatValue=function(e,r){this.getGL().uniform1f(this.getUniformLocation(e),r)},t.prototype.setUniformMatrixValue=function(e,r){this.getGL().uniformMatrix4fv(this.getUniformLocation(e),!1,r)},t.prototype.enableAttributeArray_=function(e,r,i,o,s){var a=this.getAttributeLocation(e);a<0||(this.getGL().enableVertexAttribArray(a),this.getGL().vertexAttribPointer(a,r,i,!1,o,s))},t.prototype.enableAttributes=function(e){for(var r=function(n){for(var t=0,e=0;e<n.length;e++){var r=n[e];t+=r.size*GA(r.type)}return t}(e),i=0,o=0;o<e.length;o++){var s=e[o];this.enableAttributeArray_(s.name,s.size,s.type||5126,r,i),i+=s.size*GA(s.type)}},t.prototype.handleWebGLContextLost=function(){te(this.bufferCache_),this.currentProgram_=null},t.prototype.handleWebGLContextRestored=function(){},t.prototype.createTexture=function(e,r,i){var o=this.getGL(),s=i||o.createTexture(),c=o.RGBA,p=o.RGBA,m=o.UNSIGNED_BYTE;return o.bindTexture(o.TEXTURE_2D,s),r?o.texImage2D(o.TEXTURE_2D,0,c,p,m,r):o.texImage2D(o.TEXTURE_2D,0,c,e[0],e[1],0,p,m,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),s},t}(Ge);var jA=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function _1(n,t){var e=t||[],r=256,i=255;return e[0]=Math.floor(n/r/r/r)/i,e[1]=Math.floor(n/r/r)%r/i,e[2]=Math.floor(n/r)%r/i,e[3]=n%r/i,e}const Z2=function(n){function t(e,r){var i=n.call(this,e)||this,o=r||{};return i.helper=new BA({postProcesses:o.postProcesses,uniforms:o.uniforms}),void 0!==o.className&&(i.helper.getCanvas().className=o.className),i}return jA(t,n),t.prototype.disposeInternal=function(){this.helper.dispose(),n.prototype.disposeInternal.call(this)},t.prototype.dispatchRenderEvent_=function(e,r){var i=this.getLayer();if(i.hasListener(e)){var o=new Hm(e,null,r,null);i.dispatchEvent(o)}},t.prototype.preRender=function(e){this.dispatchRenderEvent_("prerender",e)},t.prototype.postRender=function(e){this.dispatchRenderEvent_("postrender",e)},t}(sw);var Lc=new Uint8Array(4);const UA=function(){function n(t,e){this.helper_=t;var r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return n.prototype.setSize=function(t){Me(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())},n.prototype.getSize=function(){return this.size_},n.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},n.prototype.readAll=function(){if(this.dataCacheDirty_){var t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},n.prototype.readPixel=function(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return Lc[0]=0,Lc[1]=0,Lc[2]=0,Lc[3]=0,Lc;this.readAll();var r=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return Lc[0]=this.data_[4*r],Lc[1]=this.data_[4*r+1],Lc[2]=this.data_[4*r+2],Lc[3]=this.data_[4*r+3],Lc},n.prototype.getTexture=function(){return this.texture_},n.prototype.getFramebuffer=function(){return this.framebuffer_},n.prototype.updateSize_=function(){var t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)},n}();var J2=new Blob(['var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};'],{type:"application/javascript"}),w1=URL.createObjectURL(J2),Q2=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const S1=function(n){function t(e,r){var i=this,o=r.uniforms||{},s=[1,0,0,1,0,0];o.u_projectionMatrix=s,(i=n.call(this,e,{className:r.className,uniforms:o,postProcesses:r.postProcesses})||this).sourceRevision_=-1,i.verticesBuffer_=new pp(h1,35048),i.hitVerticesBuffer_=new pp(h1,35048),i.indicesBuffer_=new pp(34963,35048),i.program_=i.helper.getProgram(r.fragmentShader,r.vertexShader),i.hitDetectionEnabled_=!(!r.hitFragmentShader||!r.hitVertexShader),i.hitProgram_=i.hitDetectionEnabled_&&i.helper.getProgram(r.hitFragmentShader,r.hitVertexShader);var a=r.attributes?r.attributes.map(function(h){return{name:"a_"+h.name,size:1,type:Sd.FLOAT}}):[];i.attributes=[{name:"a_position",size:2,type:Sd.FLOAT},{name:"a_index",size:1,type:Sd.FLOAT}].concat(a),i.hitDetectionAttributes=[{name:"a_position",size:2,type:Sd.FLOAT},{name:"a_index",size:1,type:Sd.FLOAT},{name:"a_hitColor",size:4,type:Sd.FLOAT},{name:"a_featureUid",size:1,type:Sd.FLOAT}].concat(a),i.customAttributes=r.attributes?r.attributes:[],i.previousExtent_=[1/0,1/0,-1/0,-1/0],i.currentTransform_=s,i.renderTransform_=[1,0,0,1,0,0],i.invertRenderTransform_=[1,0,0,1,0,0],i.renderInstructions_=new Float32Array(0),i.hitRenderInstructions_=new Float32Array(0),i.hitRenderTarget_=i.hitDetectionEnabled_&&new UA(i.helper),i.worker_=new Worker(w1),i.worker_.addEventListener("message",function(h){var p=h.data;if("GENERATE_BUFFERS"===p.type){var m=p.projectionTransform;p.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(p.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(p.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(p.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=m,ii(this.invertRenderTransform_,this.renderTransform_),p.hitDetection?this.hitRenderInstructions_=new Float32Array(h.data.renderInstructions):this.renderInstructions_=new Float32Array(h.data.renderInstructions),this.getLayer().changed()}}.bind(i)),i.featureCache_={},i.featureCount_=0;var c=i.getLayer().getSource();return i.sourceListenKeys_=[mn(c,"addfeature",i.handleSourceFeatureAdded_,i),mn(c,"changefeature",i.handleSourceFeatureChanged_,i),mn(c,"removefeature",i.handleSourceFeatureDelete_,i),mn(c,"clear",i.handleSourceFeatureClear_,i)],c.forEachFeature(function(h){this.featureCache_[Jt(h)]={feature:h,properties:h.getProperties(),geometry:h.getGeometry()},this.featureCount_++}.bind(i)),i}return Q2(t,n),t.prototype.handleSourceFeatureAdded_=function(e){var r=e.feature;this.featureCache_[Jt(r)]={feature:r,properties:r.getProperties(),geometry:r.getGeometry()},this.featureCount_++},t.prototype.handleSourceFeatureChanged_=function(e){var r=e.feature;this.featureCache_[Jt(r)]={feature:r,properties:r.getProperties(),geometry:r.getGeometry()}},t.prototype.handleSourceFeatureDelete_=function(e){delete this.featureCache_[Jt(e.feature)],this.featureCount_--},t.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},t.prototype.renderFrame=function(e){this.preRender(e);var r=this.indicesBuffer_.getSize();this.helper.drawElements(0,r),this.helper.finalizeDraw(e);var i=this.helper.getCanvas(),s=e.layerStatesArray[e.layerIndex].opacity;return s!==parseFloat(i.style.opacity)&&(i.style.opacity=String(s)),this.hitDetectionEnabled_&&(this.renderHitDetection(e),this.hitRenderTarget_.clearCachedData()),this.postRender(e),i},t.prototype.prepareFrame=function(e){var r=this.getLayer(),i=r.getSource(),o=e.viewState,s=!e.viewHints[0]&&!e.viewHints[1],a=!nn(this.previousExtent_,e.extent),c=this.sourceRevision_<i.getRevision();if(c&&(this.sourceRevision_=i.getRevision()),s&&(a||c)){var h=o.projection,p=o.resolution,m=r instanceof e_?r.getRenderBuffer():0,E=vi(e.extent,m*p);i.loadFeatures(E,p,h),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.makeProjectionTransform(e,this.currentTransform_),Ba(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},t.prototype.rebuildBuffers_=function(e){var r=[1,0,0,1,0,0];this.helper.makeProjectionTransform(e,r);var i=(2+this.customAttributes.length)*this.featureCount_;if((!this.renderInstructions_||this.renderInstructions_.length!==i)&&(this.renderInstructions_=new Float32Array(i)),this.hitDetectionEnabled_){var o=(7+this.customAttributes.length)*this.featureCount_;(!this.hitRenderInstructions_||this.hitRenderInstructions_.length!==o)&&(this.hitRenderInstructions_=new Float32Array(o))}var s,a,E,c=[],h=[],p=0,m=0;for(var S in this.featureCache_)if((a=(s=this.featureCache_[S]).geometry)&&a.getType()===Wt.POINT){c[0]=a.getFlatCoordinates()[0],c[1]=a.getFlatCoordinates()[1],Lo(r,c),E=_1(m+6,h),this.renderInstructions_[p++]=c[0],this.renderInstructions_[p++]=c[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[m++]=c[0],this.hitRenderInstructions_[m++]=c[1],this.hitRenderInstructions_[m++]=E[0],this.hitRenderInstructions_[m++]=E[1],this.hitRenderInstructions_[m++]=E[2],this.hitRenderInstructions_[m++]=E[3],this.hitRenderInstructions_[m++]=Number(S));for(var x=void 0,P=0;P<this.customAttributes.length;P++)x=this.customAttributes[P].callback(s.feature,s.properties),this.renderInstructions_[p++]=x,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[m++]=x)}var R={type:"GENERATE_BUFFERS",renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(R.projectionTransform=r,this.worker_.postMessage(R,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var F={type:"GENERATE_BUFFERS",renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};F.projectionTransform=r,F.hitDetection=!0,this.worker_.postMessage(F,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},t.prototype.forEachFeatureAtCoordinate=function(e,r,i,o,s){if(Nn(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var a=Lo(r.coordinateToPixelTransform,e.slice()),c=this.hitRenderTarget_.readPixel(a[0]/2,a[1]/2),p=function(n){var t=0,e=256,r=255;return t+=Math.round(n[0]*e*e*e*r),t+=Math.round(n[1]*e*e*r),(t+=Math.round(n[2]*e*r))+Math.round(n[3]*r)}([c[0]/255,c[1]/255,c[2]/255,c[3]/255]),E=Math.floor(this.hitRenderInstructions_[p]).toString(),x=this.getLayer().getSource().getFeatureByUid(E);if(x)return o(x,this.getLayer(),null)}},t.prototype.renderHitDetection=function(e){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var r=this.indicesBuffer_.getSize();this.helper.drawElements(0,r)}},t.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(e){un(e)}),this.sourceListenKeys_=null,n.prototype.disposeInternal.call(this)},t}(Z2);var zA=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),x1=["#00f","#0ff","#0f0","#ff0","#f00"];const WA=function(n){function t(e){var r=this,i=e||{},o=xt({},i);delete o.gradient,delete o.radius,delete o.blur,delete o.weight,(r=n.call(this,o)||this).gradient_=null,r.addChangeListener("gradient",r.handleGradientChanged_),r.setGradient(i.gradient?i.gradient:x1),r.setBlur(void 0!==i.blur?i.blur:15),r.setRadius(void 0!==i.radius?i.radius:8);var s=i.weight?i.weight:"weight";return r.weightFunction_="string"==typeof s?function(a){return a.get(s)}:s,r.setRenderOrder(null),r}return zA(t,n),t.prototype.getBlur=function(){return this.get("blur")},t.prototype.getGradient=function(){return this.get("gradient")},t.prototype.getRadius=function(){return this.get("radius")},t.prototype.handleGradientChanged_=function(){this.gradient_=function(n){for(var r=Tl(1,256),i=r.createLinearGradient(0,0,1,256),o=1/(n.length-1),s=0,a=n.length;s<a;++s)i.addColorStop(s*o,n[s]);return r.fillStyle=i,r.fillRect(0,0,1,256),r.canvas}(this.getGradient())},t.prototype.setBlur=function(e){this.set("blur",e)},t.prototype.setGradient=function(e){this.set("gradient",e)},t.prototype.setRadius=function(e){this.set("radius",e)},t.prototype.createRenderer=function(){return new S1(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(e){var r=this.weightFunction_(e);return void 0!==r?mt(r,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get("radius")+this.get("blur"))}.bind(this),u_blurSlope:function(){return this.get("radius")/Math.max(1,this.get("blur"))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.gradient_}.bind(this)}}]})},t.prototype.renderDeclutter=function(){},t}(A_);window.ol&&(ol.ext.input={});var jg=function(n){n=n||{},Wn.call(this);var t=this.input=n.input||zn.create("INPUT",{type:n.type,min:n.min,max:n.max,step:n.step,parent:n.parent});n.disabled&&(t.disabled=!0),void 0!==n.checked&&(t.checked=!!n.checked),void 0!==n.val&&(t.value=n.val)};M_(jg,Wn),jg.prototype._listenDrag=function(n,t){var e=function(r){this.moving=!0;var i=function(o){"pointerup"===o.type&&(document.removeEventListener("pointermove",i),document.removeEventListener("pointerup",i),document.removeEventListener("pointercancel",i),setTimeout(function(){this.moving=!1}.bind(this))),o.target===n&&t(o),o.stopPropagation(),o.preventDefault()}.bind(this);document.addEventListener("pointermove",i,!1),document.addEventListener("pointerup",i,!1),document.addEventListener("pointercancel",i,!1),r.stopPropagation(),r.preventDefault()}.bind(this);n.addEventListener("mousedown",e,!1),n.addEventListener("touchstart",e,!1)},jg.prototype.setValue=function(n){void 0!==n&&(this.input.value=n),this.input.dispatchEvent(new Event("change"))},jg.prototype.getValue=function(){return this.input.value},jg.prototype.getInputElement=function(){return this.input};const Fw=jg;var Gw=function(n){Fw.call(this,n=n||{});var t=this.element=zn.create("LABEL",{html:n.html,className:("ol-ext-check ol-ext-checkbox"+(n.className||"")).trim()});this.input.parentNode&&this.input.parentNode.insertBefore(t,this.input),t.appendChild(this.input),zn.create("SPAN",{parent:t}),n.after&&t.appendChild(document.createTextNode(n.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))};M_(Gw,Fw),Gw.prototype.isChecked=function(){return this.input.checked};const D_=Gw;var T1=function(n){D_.call(this,n=n||{}),this.element.className=("ol-ext-toggle-switch "+(n.className||"")).trim()};M_(T1,D_);const YA=T1;var P1=function(n,t){D_.call(this,n,t=t||{}),this.element.className=("ol-ext-check ol-ext-radio"+(t.className||"")).trim()};M_(P1,D_);const I1=P1;var go={create:function(n,t){var e;if(t=t||{},"TEXT"===n)e=document.createTextNode(t.html||""),t.parent&&t.parent.appendChild(e);else for(var r in e=document.createElement(n),/button/i.test(n)&&e.setAttribute("type","button"),t)switch(r){case"className":t.className&&t.className.trim&&e.setAttribute("class",t.className.trim());break;case"html":t.html instanceof Element?e.appendChild(t.html):void 0!==t.html&&(e.innerHTML=t.html);break;case"parent":t.parent&&t.parent.appendChild(e);break;case"options":if(console.log("options",t.options),/select/i.test(n))for(var i in t.options)go.create("OPTION",{html:i,value:t.options[i],parent:e});break;case"style":this.setStyle(e,t.style);break;case"change":case"click":go.addListener(e,r,t[r]);break;case"on":for(var o in t.on)go.addListener(e,o,t.on[o]);break;case"checked":e.checked=!!t.checked;break;default:e.setAttribute(r,t[r])}return e},createSwitch:function(n){var t=go.create("INPUT",{type:"checkbox",on:n.on,parent:n.parent}),e=Object.assign({input:t},n||{});return new YA(e),t},createCheck:function(n){var t=go.create("INPUT",{name:n.name,type:"radio"===n.type?"radio":"checkbox",on:n.on,parent:n.parent});console.log(t);var e=Object.assign({input:t},n||{});return"radio"===n.type?new I1(e):new D_(e),t},setHTML:function(n,t){t instanceof Element?n.appendChild(t):void 0!==t&&(n.innerHTML=t)},appendText:function(n,t){n.appendChild(document.createTextNode(t||""))},addListener:function(n,t,e,r){"string"==typeof t&&(t=t.split(" ")),t.forEach(function(i){n.addEventListener(i,e,r)})},removeListener:function(n,t,e){"string"==typeof t&&(t=t.split(" ")),t.forEach(function(r){n.removeEventListener(r,e)})},show:function(n){n.style.display=""},hide:function(n){n.style.display="none"},hidden:function(n){return"none"===go.getStyle(n,"display")},toggle:function(n){n.style.display="none"===n.style.display?"":"none"},setStyle:function(n,t){for(var e in t)switch(e){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":n.style[e]="number"==typeof t[e]?t[e]+"px":t[e];break;default:n.style[e]=t[e]}},getStyle:function(n,t){var e,i,o,s,r=(n.ownerDocument||document).defaultView;if(r&&r.getComputedStyle)t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),e=r.getComputedStyle(n,null).getPropertyValue(t);else if(n.currentStyle&&(t=t.replace(/-(\w)/g,function(i,o){return o.toUpperCase()}),/^\d+(em|pt|%|ex)?$/i.test(e=n.currentStyle[t])))return i=e,o=n.style.left,s=n.runtimeStyle.left,n.runtimeStyle.left=n.currentStyle.left,n.style.left=i||0,i=n.style.pixelLeft+"px",n.style.left=o,n.runtimeStyle.left=s,i;return/px$/.test(e)?parseInt(e):e},outerHeight:function(n){return n.offsetHeight+go.getStyle(n,"marginBottom")},outerWidth:function(n){return n.offsetWidth+go.getStyle(n,"marginLeft")},offsetRect:function(n){var t=n.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:t.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:t.height||t.bottom-t.top,width:t.width||t.right-t.left}},scrollDiv:function(n,t){var i,e=!1,r=0,o=0,s="function"==typeof t.onmove?t.onmove:function(){},a=t.vertical?"pageY":"pageX",c=t.vertical?"scrollTop":"scrollLeft",h=!1;n.querySelectorAll("img").forEach(function(m){m.ondragstart=function(){return!1}}),n.style["touch-action"]="none",go.addListener(n,["pointerdown"],function(m){h=!1,e=m[a],o=new Date,n.classList.add("ol-move")}),go.addListener(window,["pointermove"],function(m){if(h=!0,!1!==e){var E=e-m[a];n[c]+=E,(i=new Date)-o&&(r=(r+E/(i-o))/2),e=m[a],o=i,E&&s(!0)}});var p=function(m){var E=m>0?Math.min(100,m/2):Math.max(-100,m/2);m-=E,n[c]+=E,-1<m&&m<1?(h?setTimeout(function(){n.classList.remove("ol-move")}):n.classList.remove("ol-move"),h=!1,s(!1)):setTimeout(function(){p(m)},40)};go.addListener(window,["pointerup","pointercancel"],function(m){(o=new Date-o)>100?r=0:o>0&&(r=((r||0)+(e-m[a])/o)/2),p(!1===t.animate?0:200*r),e=!1,r=0,o=0}),t.mousewheel&&go.addListener(n,["mousewheel","DOMMouseScroll","onmousewheel"],function(m){var E=Math.max(-1,Math.min(1,m.wheelDelta||-m.detail));return n.classList.add("ol-move"),n[c]-=30*E,n.classList.remove("ol-move"),!1})},dispatchEvent:function(n,t){var e;try{e=new CustomEvent(n)}catch(r){(e=document.createEvent("CustomEvent")).initCustomEvent(n,!0,!0,{})}t.dispatchEvent(e)}};const zn=go;var Ao=function(n){n=n||{};var e,t=this;this.dcount=0,this.show_progress=n.show_progress,this.oninfo="function"==typeof n.oninfo?n.oninfo:null,this.onextent="function"==typeof n.onextent?n.onextent:null,this.hasextent=n.extent||n.onextent,this.hastrash=n.trash,this.reordering=!1!==n.reordering,this._layers=[],this._layerGroup=n.layerGroup&&n.layerGroup.getLayers?n.layerGroup:null,"function"==typeof n.displayInLayerSwitcher&&(this.displayInLayerSwitcher=n.displayInLayerSwitcher),n.target?e=zn.create("DIV",{className:n.switcherClass||"ol-layerswitcher"}):((e=zn.create("DIV",{className:(n.switcherClass||"ol-layerswitcher")+" ol-unselectable ol-control"})).classList.add(!1!==n.collapsed?"ol-collapsed":"ol-forceopen"),this.button=zn.create("BUTTON",{type:"button",parent:e}),this.button.addEventListener("touchstart",function(r){e.classList.toggle("ol-collapsed"),t.dispatchEvent({type:"toggle",collapsed:e.classList.contains("ol-collapsed")}),r.preventDefault(),t.overflow()}),this.button.addEventListener("click",function(){e.classList.toggle("ol-forceopen"),e.classList.add("ol-collapsed"),t.dispatchEvent({type:"toggle",collapsed:!e.classList.contains("ol-forceopen")}),t.overflow()}),n.mouseover&&(e.addEventListener("mouseleave",function(){e.classList.add("ol-collapsed"),t.dispatchEvent({type:"toggle",collapsed:!0})}),e.addEventListener("mouseover",function(){e.classList.remove("ol-collapsed"),t.dispatchEvent({type:"toggle",collapsed:!1})})),n.noScroll||(this.topv=zn.create("DIV",{className:"ol-switchertopdiv",parent:e,click:function(){t.overflow("+50%")}}),this.botv=zn.create("DIV",{className:"ol-switcherbottomdiv",parent:e,click:function(){t.overflow("-50%")}})),this._noScroll=n.noScroll),this.panel_=zn.create("UL",{className:"panel",parent:e}),!n.target&&!n.noScroll&&zn.addListener(this.panel_,"mousewheel DOMMouseScroll onmousewheel",function(r){t.overflow(Math.max(-1,Math.min(1,r.wheelDelta||-r.detail)))&&(r.stopPropagation(),r.preventDefault())}),this.header_=zn.create("LI",{className:"ol-header",parent:this.panel_}),Bh.call(this,{element:e,target:n.target}),this.set("drawDelay",n.drawDelay||0),this.set("selection",n.selection)};M_(Ao,Bh),Ao.prototype.tip={up:"up/down",down:"down",info:"informations...",extent:"zoom to extent",trash:"remove layer",plus:"expand/shrink"},Ao.prototype.displayInLayerSwitcher=function(n){return!1!==n.get("displayInLayerSwitcher")},Ao.prototype.setMap=function(n){if(Bh.prototype.setMap.call(this,n),this.drawPanel(),this._listener)for(var t in this._listener)pi(this._listener[t]);this._listener=null,n&&(this._listener={moveend:n.on("moveend",this.viewChange.bind(this)),size:n.on("change:size",this.overflow.bind(this))},this._listener.change=this._layerGroup?this._layerGroup.getLayers().on("change:length",this.drawPanel.bind(this)):n.getLayerGroup().getLayers().on("change:length",this.drawPanel.bind(this)))},Ao.prototype.show=function(){this.element.classList.add("ol-forceopen"),this.overflow()},Ao.prototype.hide=function(){this.element.classList.remove("ol-forceopen"),this.overflow()},Ao.prototype.toggle=function(){this.element.classList.toggle("ol-forceopen"),this.overflow()},Ao.prototype.isOpen=function(){return this.element.classList.contains("ol-forceopen")},Ao.prototype.setHeader=function(n){zn.setHTML(this.header_,n)},Ao.prototype.overflow=function(n){if(this.button&&!this._noScroll){if(zn.hidden(this.panel_))return void zn.setStyle(this.element,{height:"auto"});var t=zn.outerHeight(this.element),e=zn.outerHeight(this.panel_),r=this.button.offsetTop+zn.outerHeight(this.button),i=this.panel_.offsetTop-r;if(e>t-r){zn.setStyle(this.element,{height:"100%"});var o=2*zn.getStyle(this.panel_.querySelectorAll("li.visible .li-content")[0],"height");switch(n){case 1:i+=o;break;case-1:i-=o;break;case"+50%":i+=Math.round(t/2);break;case"-50%":i-=Math.round(t/2)}return i+e<=t-3*r/2?(i=t-3*r/2-e,zn.hide(this.botv)):zn.show(this.botv),i>=0?(i=0,zn.hide(this.topv)):zn.show(this.topv),zn.setStyle(this.panel_,{top:i+"px"}),!0}return zn.setStyle(this.element,{height:"auto"}),zn.setStyle(this.panel_,{top:0}),zn.hide(this.botv),zn.hide(this.topv),!1}return!1},Ao.prototype._setLayerForLI=function(n,t){var e=[];t.getLayers&&e.push(t.getLayers().on("change:length",this.drawPanel.bind(this))),n&&(e.push(t.on("change:opacity",function(){this.setLayerOpacity(t,n)}.bind(this))),e.push(t.on("change:visible",function(){this.setLayerVisibility(t,n)}.bind(this)))),e.push(t.on("propertychange",function(r){("displayInLayerSwitcher"===r.key||"openInLayerSwitcher"===r.key)&&this.drawPanel(r)}.bind(this))),this._layers.push({li:n,layer:t,listeners:e})},Ao.prototype.setLayerOpacity=function(n,t){var e=t.querySelector(".layerswitcher-opacity-cursor");e&&(e.style.left=100*n.getOpacity()+"%"),this.dispatchEvent({type:"layer:opacity",layer:n})},Ao.prototype.setLayerVisibility=function(n,t){var e=t.querySelector(".ol-visibility");e&&(e.checked=n.getVisible()),n.getVisible()?t.classList.add("ol-visible"):t.classList.remove("ol-visible"),this.dispatchEvent({type:"layer:visible",layer:n})},Ao.prototype._clearLayerForLI=function(){this._layers.forEach(function(n){n.listeners.forEach(function(t){pi(t)})}),this._layers=[]},Ao.prototype._getLayerForLI=function(n){for(var e,t=0;e=this._layers[t];t++)if(e.li===n)return e.layer;return null},Ao.prototype.viewChange=function(){this.panel_.querySelectorAll("li").forEach(function(n){var t=this._getLayerForLI(n);t&&(this.testLayerVisibility(t)?n.classList.remove("ol-layer-hidden"):n.classList.add("ol-layer-hidden"))}.bind(this))},Ao.prototype.getPanel=function(){return this.panel_},Ao.prototype.drawPanel=function(){if(this.getMap()){var n=this;this.dcount++,setTimeout(function(){n.drawPanel_()},this.get("drawDelay")||0)}},Ao.prototype.drawPanel_=function(){--this.dcount||this.dragging_||(this._clearLayerForLI(),this.panel_.querySelectorAll("li").forEach(function(n){n.classList.contains("ol-header")||n.remove()}.bind(this)),this.drawList(this.panel_,this._layerGroup?this._layerGroup.getLayers():this.getMap().getLayers()))},Ao.prototype.switchLayerVisibility=function(n,t){n.get("baseLayer")?(n.getVisible()||n.setVisible(!0),t.forEach(function(e){n!==e&&e.get("baseLayer")&&e.getVisible()&&e.setVisible(!1)})):n.setVisible(!n.getVisible())},Ao.prototype.testLayerVisibility=function(n){if(!this.getMap())return!0;var t=this.getMap().getView().getResolution(),e=this.getMap().getView().getZoom();if(n.getMaxResolution()<=t||n.getMinResolution()>=t)return!1;if(n.getMinZoom&&(n.getMinZoom()>=e||n.getMaxZoom()<e))return!1;var r=n.getExtent();return!r||Oi(this.getMap().getView().calculateExtent(this.getMap().getSize()),r)},Ao.prototype.dragOrdering_=function(n){n.stopPropagation(),n.preventDefault();var o,a,c,h,p,t=this,e=n.currentTarget.parentNode.parentNode,r=!0,i=this.panel_,s=n.pageY||n.touches&&n.touches.length&&n.touches[0].pageY||n.changedTouches&&n.changedTouches.length&&n.changedTouches[0].pageY;function E(S){if(o=S.pageY||S.touches&&S.touches.length&&S.touches[0].pageY||S.changedTouches&&S.changedTouches.length&&S.changedTouches[0].pageY,r&&Math.abs(s-o)>2&&(r=!1,e.classList.add("drag"),h=t._getLayerForLI(e),a=!1,p=t._getLayerForLI(e.parentNode.parentNode),c=zn.create("LI",{className:"ol-dragover",html:e.innerHTML,style:{position:"absolute","z-index":1e4,left:e.offsetLeft,opacity:.5,width:zn.outerWidth(e),height:zn.getStyle(e,"height")},parent:i}),t.element.classList.add("drag"),t.dispatchEvent({type:"reorder-start",layer:h,group:p})),!r){var x;for(S.preventDefault(),S.stopPropagation(),zn.setStyle(c,{top:o-zn.offsetRect(i).top+i.scrollTop+5}),(x=S.touches?document.elementFromPoint(S.touches[0].clientX,S.touches[0].clientY):S.target).classList.contains("ol-switcherbottomdiv")?t.overflow(-1):x.classList.contains("ol-switchertopdiv")&&t.overflow(1);x&&"LI"!==x.tagName;)x=x.parentNode;(!x||!x.classList.contains("dropover"))&&e.parentNode.querySelectorAll("li").forEach(function(P){P.classList.remove("dropover"),P.classList.remove("dropover-after"),P.classList.remove("dropover-before")}),x&&x.parentNode.classList.contains("drag")&&x!==e?((a=t._getLayerForLI(x))&&!a.get("allwaysOnTop")==!h.get("allwaysOnTop")?(x.classList.add("dropover"),x.classList.add(e.offsetTop<x.offsetTop?"dropover-after":"dropover-before")):a=!1,zn.show(c)):(a=!1,x===e?zn.hide(c):zn.show(c)),a?c.classList.remove("forbidden"):c.classList.add("forbidden")}}e.parentNode.classList.add("drag"),zn.addListener(document,"mousemove touchmove",E),zn.addListener(document,"mouseup touchend touchcancel",function m(){if(a){var S=h;if(S&&a){for(var x,P=(x=p?p.getLayers():t._layerGroup?t._layerGroup.getLayers():t.getMap().getLayers()).getArray(),R=0;R<P.length;R++)if(P[R]==S){x.removeAt(R);break}for(var F=0;F<P.length;F++)if(P[F]==a){x.insertAt(R>F?F:F+1,S);break}}t.dispatchEvent({type:"reorder-end",layer:S,group:p})}e.parentNode.querySelectorAll("li").forEach(function(D){D.classList.remove("dropover"),D.classList.remove("dropover-after"),D.classList.remove("dropover-before")}),e.classList.remove("drag"),e.parentNode.classList.remove("drag"),t.element.classList.remove("drag"),c&&c.remove(),zn.removeListener(document,"mousemove touchmove",E),zn.removeListener(document,"mouseup touchend touchcancel",m)})},Ao.prototype.dragOpacity_=function(n){n.stopPropagation(),n.preventDefault();var t=this,e=n.target,r=this._getLayerForLI(e.parentNode.parentNode.parentNode);if(r){var i=n.pageX||n.touches&&n.touches.length&&n.touches[0].pageX||n.changedTouches&&n.changedTouches.length&&n.changedTouches[0].pageX,o=zn.getStyle(e,"left")-i;t.dragging_=!0,zn.addListener(document,"mouseup touchend touchcancel",function s(){zn.removeListener(document,"mouseup touchend touchcancel",s),zn.removeListener(document,"mousemove touchmove",a),t.dragging_=!1}),zn.addListener(document,"mousemove touchmove",a)}function a(c){var p=(o+(c.pageX||c.touches&&c.touches.length&&c.touches[0].pageX||c.changedTouches&&c.changedTouches.length&&c.changedTouches[0].pageX))/zn.getStyle(e.parentNode,"width"),m=Math.max(0,Math.min(1,p));zn.setStyle(e,{left:100*m+"%"}),e.parentNode.nextElementSibling.innerHTML=Math.round(100*m),r.setOpacity(m)}},Ao.prototype.drawList=function(n,t){var e=this,r=t.getArray(),i=function(p){p.stopPropagation(),p.preventDefault();var m=e._getLayerForLI(this.parentNode.parentNode);e.switchLayerVisibility(m,t),e.get("selection")&&m.getVisible()&&e.selectLayer(m)};function o(p){p.stopPropagation(),p.preventDefault();var m=e._getLayerForLI(this.parentNode.parentNode);e.oninfo(m),e.dispatchEvent({type:"info",layer:m})}function s(p){p.stopPropagation(),p.preventDefault();var m=e._getLayerForLI(this.parentNode.parentNode);e.onextent?e.onextent(m):e.getMap().getView().fit(m.getExtent(),e.getMap().getSize()),e.dispatchEvent({type:"extent",layer:m})}function a(p){p.stopPropagation(),p.preventDefault();var E,m=this.parentNode.parentNode.parentNode.parentNode,S=e._getLayerForLI(m);S?(E=e._getLayerForLI(this.parentNode.parentNode),S.getLayers().remove(E),0==S.getLayers().getLength()&&!S.get("noSwitcherDelete")&&a.call(m.querySelectorAll(".layerTrash")[0],p)):(m=this.parentNode.parentNode,e.getMap().removeLayer(e._getLayerForLI(m)))}function c(p){if(this.displayInLayerSwitcher(p)){var m=zn.create("LI",{className:(p.getVisible()?"visible ":" ")+(p.get("baseLayer")?"baselayer":""),parent:n});this._setLayerForLI(m,p),this._selectedLayer===p&&m.classList.add("ol-layer-select");var E=zn.create("DIV",{className:"ol-layerswitcher-buttons",parent:m}),S=zn.create("DIV",{className:"li-content",parent:m});zn.create("INPUT",{type:p.get("baseLayer")?"radio":"checkbox",className:"ol-visibility",checked:p.getVisible(),click:i,parent:S});var x=zn.create("LABEL",{title:p.get("title")||p.get("name"),click:i,unselectable:"on",style:{userSelect:"none"},parent:S});if(x.addEventListener("selectstart",function(){return!1}),zn.create("SPAN",{html:p.get("title")||p.get("name"),click:function(G){this.get("selection")&&(G.stopPropagation(),this.selectLayer(p))}.bind(this),parent:x}),this.reordering&&(h<r.length-1&&(p.get("allwaysOnTop")||!r[h+1].get("allwaysOnTop"))||h>0&&(!p.get("allwaysOnTop")||r[h-1].get("allwaysOnTop")))&&zn.create("DIV",{className:"layerup",title:this.tip.up,on:{"mousedown touchstart":function(G){e.dragOrdering_(G)}},parent:E}),p.getLayers){var P=0;p.getLayers().forEach(function(G){e.displayInLayerSwitcher(G)&&P++}),P&&zn.create("DIV",{className:p.get("openInLayerSwitcher")?"collapse-layers":"expend-layers",title:this.tip.plus,click:function(){var G=e._getLayerForLI(this.parentNode.parentNode);G.set("openInLayerSwitcher",!G.get("openInLayerSwitcher"))},parent:E})}if(this.oninfo&&zn.create("DIV",{className:"layerInfo",title:this.tip.info,click:o,parent:E}),this.hastrash&&!p.get("noSwitcherDelete")&&zn.create("DIV",{className:"layerTrash",title:this.tip.trash,click:a,parent:E}),this.hasextent&&r[h].getExtent()){var R=r[h].getExtent();4==R.length&&R[0]<R[2]&&R[1]<R[3]&&zn.create("DIV",{className:"layerExtent",title:this.tip.extent,click:s,parent:E})}if(this.show_progress&&p instanceof bd){var F=zn.create("DIV",{className:"layerswitcher-progress",parent:S});this.setprogress_(p),p.layerswitcher_progress=zn.create("DIV",{parent:F})}var D=zn.create("DIV",{className:"layerswitcher-opacity",click:function(G){if(G.target===this){G.stopPropagation(),G.preventDefault();var X=Math.max(0,Math.min(1,G.offsetX/zn.getStyle(this,"width")));e._getLayerForLI(this.parentNode.parentNode).setOpacity(X)}},parent:S});if(zn.create("DIV",{className:"layerswitcher-opacity-cursor",style:{left:100*p.getOpacity()+"%"},on:{"mousedown touchstart":function(G){e.dragOpacity_(G)}},parent:D}),zn.create("DIV",{className:"layerswitcher-opacity-label",html:Math.round(100*p.getOpacity()),parent:S}),p.getLayers&&(m.classList.add("ol-layer-group"),!0===p.get("openInLayerSwitcher"))){var j=zn.create("UL",{parent:m});this.drawList(j,p.getLayers())}m.classList.add(this.getLayerClass(p)),this.dispatchEvent({type:"drawlist",layer:p,li:m})}else this._setLayerForLI(null,p)}for(var h=r.length-1;h>=0;h--)c.call(this,r[h]);this.viewChange(),n===this.panel_&&this.overflow()},Ao.prototype.getLayerClass=function(n){return n?n.getLayers?"ol-layer-group":n instanceof A_?"ol-layer-vector":n instanceof I0?"ol-layer-vectortile":n instanceof bd?"ol-layer-tile":n instanceof M5?"ol-layer-image":n instanceof WA?"ol-layer-heatmap":n.getFeatures?"ol-layer-vectorimage":"unknown":"none"},Ao.prototype.selectLayer=function(n,t){if(!n){if(!this.getMap())return;n=this.getMap().getLayers().item(this.getMap().getLayers().getLength()-1)}this._selectedLayer=n,this.drawPanel(),t||this.dispatchEvent({type:"select",layer:n})},Ao.prototype.getSelection=function(){return this._selectedLayer},Ao.prototype.setprogress_=function(n){if(!n.layerswitcher_progress){var t=0,e=0,r=function(){e===t?(e=t=0,zn.setStyle(n.layerswitcher_progress,{width:0})):zn.setStyle(n.layerswitcher_progress,{width:(t/e*100).toFixed(1)+"%"})};n.getSource().on("tileloadstart",function(){e++,r()}),n.getSource().on("tileloadend",function(){t++,r()}),n.getSource().on("tileloaderror",function(){t++,r()})}};const qA=Ao,ZA=function(){function n(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=$a(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new md({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return n.prototype.clone=function(){var t=this.getScale();return new n({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},n.prototype.getOverflow=function(){return this.overflow_},n.prototype.getFont=function(){return this.font_},n.prototype.getMaxAngle=function(){return this.maxAngle_},n.prototype.getPlacement=function(){return this.placement_},n.prototype.getOffsetX=function(){return this.offsetX_},n.prototype.getOffsetY=function(){return this.offsetY_},n.prototype.getFill=function(){return this.fill_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getScaleArray=function(){return this.scaleArray_},n.prototype.getStroke=function(){return this.stroke_},n.prototype.getText=function(){return this.text_},n.prototype.getTextAlign=function(){return this.textAlign_},n.prototype.getTextBaseline=function(){return this.textBaseline_},n.prototype.getBackgroundFill=function(){return this.backgroundFill_},n.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},n.prototype.getPadding=function(){return this.padding_},n.prototype.setOverflow=function(t){this.overflow_=t},n.prototype.setFont=function(t){this.font_=t},n.prototype.setMaxAngle=function(t){this.maxAngle_=t},n.prototype.setOffsetX=function(t){this.offsetX_=t},n.prototype.setOffsetY=function(t){this.offsetY_=t},n.prototype.setPlacement=function(t){this.placement_=t},n.prototype.setRotateWithView=function(t){this.rotateWithView_=t},n.prototype.setFill=function(t){this.fill_=t},n.prototype.setRotation=function(t){this.rotation_=t},n.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=$a(void 0!==t?t:1)},n.prototype.setStroke=function(t){this.stroke_=t},n.prototype.setText=function(t){this.text_=t},n.prototype.setTextAlign=function(t){this.textAlign_=t},n.prototype.setTextBaseline=function(t){this.textBaseline_=t},n.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},n.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},n.prototype.setPadding=function(t){this.padding_=t},n}();var Bw=ee(728),ek=ee.n(Bw),Ya={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90\xb0 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) \u2014 it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn\u2019t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] \u2260 value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] \u2265 value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] \u2264 value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] \u2208 {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] \u2209 {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 \u2227 ... \u2227 fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 \u2228 ... \u2228 fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `\xacf0 \u2227 ... \u2227 \xacfn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a boolean, the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns null if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Gets the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Gets the feature properties object.  Note that in some cases, it may be more efficient to use ["get", "property_name"] directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns null if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Gets the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`. `Multi*` feature types are only returned in GeoJSON sources. When working with vector tile sources, use the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Gets the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Gets the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Zoom","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"heatmap-density":{doc:"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Gets the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the fog. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the fog to the color of the sky. A value of zero leaves a sharp transition from fog to sky. Increasing the value blends the color of fog into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0"}}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0\xb0 (0\xb0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0\xb0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0\xb0, directly above, to 180\xb0, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},terrain:{source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0\xb0 north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0\xb0 is directly above, at zenith, and 90\xb0 at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0\xb0 north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0\xb0 is directly above, at zenith, and 90\xb0 at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}}},Uw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function N_(n){var t={exports:{}};return n(t,t.exports),t.exports}function cM(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}var dM=N_(function(n,t){!function(e){var r=t&&!t.nodeType&&t,i=n&&!n.nodeType&&n,o="object"==typeof Uw&&Uw;(o.global===o||o.window===o||o.self===o)&&(e=o);var s,$,a=2147483647,c=36,R=/^xn--/,F=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},X=Math.floor,J=String.fromCharCode;function le(Re){throw RangeError(j[Re])}function ie(Re,Xe){for(var Oe=Re.length,qt=[];Oe--;)qt[Oe]=Xe(Re[Oe]);return qt}function Fe(Re,Xe){var Oe=Re.split("@"),qt="";return Oe.length>1&&(qt=Oe[0]+"@",Re=Oe[1]),qt+ie((Re=Re.replace(D,".")).split("."),Xe).join(".")}function Ce(Re){for(var Pt,$t,Xe=[],Oe=0,qt=Re.length;Oe<qt;)(Pt=Re.charCodeAt(Oe++))>=55296&&Pt<=56319&&Oe<qt?56320==(64512&($t=Re.charCodeAt(Oe++)))?Xe.push(((1023&Pt)<<10)+(1023&$t)+65536):(Xe.push(Pt),Oe--):Xe.push(Pt);return Xe}function $e(Re){return ie(Re,function(Xe){var Oe="";return Xe>65535&&(Oe+=J((Xe-=65536)>>>10&1023|55296),Xe=56320|1023&Xe),Oe+J(Xe)}).join("")}function ot(Re){return Re-48<10?Re-22:Re-65<26?Re-65:Re-97<26?Re-97:c}function st(Re,Xe){return Re+22+75*(Re<26)-((0!=Xe)<<5)}function dt(Re,Xe,Oe){var qt=0;for(Re=Oe?X(Re/700):Re>>1,Re+=X(Re/Xe);Re>455;qt+=c)Re=X(Re/35);return X(qt+36*Re/(Re+38))}function kt(Re){var qt,Pn,ft,Mn,$n,kn,ai,yr,Mr,Ui,Xe=[],Oe=Re.length,Pt=0,$t=128,dn=72;for((Pn=Re.lastIndexOf("-"))<0&&(Pn=0),ft=0;ft<Pn;++ft)Re.charCodeAt(ft)>=128&&le("not-basic"),Xe.push(Re.charCodeAt(ft));for(Mn=Pn>0?Pn+1:0;Mn<Oe;){for($n=Pt,kn=1,ai=c;Mn>=Oe&&le("invalid-input"),((yr=ot(Re.charCodeAt(Mn++)))>=c||yr>X((a-Pt)/kn))&&le("overflow"),Pt+=yr*kn,!(yr<(Mr=ai<=dn?1:ai>=dn+26?26:ai-dn));ai+=c)kn>X(a/(Ui=c-Mr))&&le("overflow"),kn*=Ui;dn=dt(Pt-$n,qt=Xe.length+1,0==$n),X(Pt/qt)>a-$t&&le("overflow"),$t+=X(Pt/qt),Pt%=qt,Xe.splice(Pt++,0,$t)}return $e(Xe)}function Qe(Re){var Xe,Oe,qt,Pt,$t,dn,Pn,ft,Mn,$n,kn,yr,Mr,Ui,Wr,ai=[];for(yr=(Re=Ce(Re)).length,Xe=128,Oe=0,$t=72,dn=0;dn<yr;++dn)(kn=Re[dn])<128&&ai.push(J(kn));for(qt=Pt=ai.length,Pt&&ai.push("-");qt<yr;){for(Pn=a,dn=0;dn<yr;++dn)(kn=Re[dn])>=Xe&&kn<Pn&&(Pn=kn);for(Pn-Xe>X((a-Oe)/(Mr=qt+1))&&le("overflow"),Oe+=(Pn-Xe)*Mr,Xe=Pn,dn=0;dn<yr;++dn)if((kn=Re[dn])<Xe&&++Oe>a&&le("overflow"),kn==Xe){for(ft=Oe,Mn=c;!(ft<($n=Mn<=$t?1:Mn>=$t+26?26:Mn-$t));Mn+=c)ai.push(J(st($n+(Wr=ft-$n)%(Ui=c-$n),0))),ft=X(Wr/Ui);ai.push(J(st(ft,0))),$t=dt(Oe,Mr,qt==Pt),Oe=0,++qt}++Oe,++Xe}return ai.join("")}if(s={version:"1.3.2",ucs2:{decode:Ce,encode:$e},decode:kt,encode:Qe,toASCII:function(Re){return Fe(Re,function(Xe){return F.test(Xe)?"xn--"+Qe(Xe):Xe})},toUnicode:function(Re){return Fe(Re,function(Xe){return R.test(Xe)?kt(Xe.slice(4).toLowerCase()):Xe})}},r&&i)if(n.exports==r)i.exports=s;else for($ in s)s.hasOwnProperty($)&&(r[$]=s[$]);else e.punycode=s}(Uw)}),Pd_isString=function(n){return"string"==typeof n},Pd_isObject=function(n){return"object"==typeof n&&null!==n},Pd_isNull=function(n){return null===n};function hM(n,t){return Object.prototype.hasOwnProperty.call(n,t)}var fM=function(n,t,e,r){e=e||"=";var i={};if("string"!=typeof n||0===n.length)return i;var o=/\+/g;n=n.split(t=t||"&");var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=n.length;s>0&&a>s&&(a=s);for(var c=0;c<a;++c){var m,E,S,x,h=n[c].replace(o,"%20"),p=h.indexOf(e);p>=0?(m=h.substr(0,p),E=h.substr(p+1)):(m=h,E=""),S=decodeURIComponent(m),x=decodeURIComponent(E),hM(i,S)?Array.isArray(i[S])?i[S].push(x):i[S]=[i[S],x]:i[S]=x}return i},H0=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}},Ek=function(n,t,e,r){return t=t||"&",e=e||"=",null===n&&(n=void 0),"object"==typeof n?Object.keys(n).map(function(i){var o=encodeURIComponent(H0(i))+e;return Array.isArray(n[i])?n[i].map(function(s){return o+encodeURIComponent(H0(s))}).join(t):o+encodeURIComponent(H0(n[i]))}).join(t):r?encodeURIComponent(H0(r))+e+encodeURIComponent(H0(n)):""},D1=N_(function(n,t){t.decode=t.parse=fM,t.encode=t.stringify=Ek});function kc(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Tk=/^([a-z0-9.+-]+:)/i,Pk=/:[0-9]*$/,Ik=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Mk=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),L1=["'"].concat(Mk),pM=["%","/","?",";","#"].concat(L1),gM=["/","?","#"],k1=/^[+a-z0-9A-Z_-]{0,63}$/,mM=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,vM={javascript:!0,"javascript:":!0},Vw={javascript:!0,"javascript:":!0},Ug={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function G_(n,...t){for(const e of t)for(const r in e)n[r]=e[r];return n}kc.prototype.parse=function(n,t,e){if(!Pd_isString(n))throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var r=n.indexOf("?"),i=-1!==r&&r<n.indexOf("#")?"?":"#",o=n.split(i);o[0]=o[0].replace(/\\/g,"/");var a=n=o.join(i);if(a=a.trim(),!e&&1===n.split("#").length){var c=Ik.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],this.query=t?D1.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=Tk.exec(a);if(h){var p=(h=h[0]).toLowerCase();this.protocol=p,a=a.substr(h.length)}if(e||h||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var m="//"===a.substr(0,2);m&&(!h||!Vw[h])&&(a=a.substr(2),this.slashes=!0)}if(!Vw[h]&&(m||h&&!Ug[h])){for(var E=-1,S=0;S<gM.length;S++)-1!==(x=a.indexOf(gM[S]))&&(-1===E||x<E)&&(E=x);var P,R;for(-1!==(R=-1===E?a.lastIndexOf("@"):a.lastIndexOf("@",E))&&(P=a.slice(0,R),a=a.slice(R+1),this.auth=decodeURIComponent(P)),E=-1,S=0;S<pM.length;S++){var x;-1!==(x=a.indexOf(pM[S]))&&(-1===E||x<E)&&(E=x)}-1===E&&(E=a.length),this.host=a.slice(0,E),a=a.slice(E),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var D=this.hostname.split(/\./),j=(S=0,D.length);S<j;S++){var G=D[S];if(G&&!G.match(k1)){for(var X="",J=0,$=G.length;J<$;J++)G.charCodeAt(J)>127?X+="x":X+=G[J];if(!X.match(k1)){var le=D.slice(0,S),ie=D.slice(S+1),Fe=G.match(mM);Fe&&(le.push(Fe[1]),ie.unshift(Fe[2])),ie.length&&(a="/"+ie.join(".")+a),this.hostname=le.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),F||(this.hostname=dM.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!vM[p])for(S=0,j=L1.length;S<j;S++){var ot=L1[S];if(-1!==a.indexOf(ot)){var st=encodeURIComponent(ot);st===ot&&(st=escape(ot)),a=a.split(ot).join(st)}}var dt=a.indexOf("#");-1!==dt&&(this.hash=a.substr(dt),a=a.slice(0,dt));var kt=a.indexOf("?");return-1!==kt?(this.search=a.substr(kt),this.query=a.substr(kt+1),t&&(this.query=D1.parse(this.query)),a=a.slice(0,kt)):t&&(this.search="",this.query={}),a&&(this.pathname=a),Ug[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},kc.prototype.format=function(){var n=this.auth||"";n&&(n=(n=encodeURIComponent(n)).replace(/%3A/i,":"),n+="@");var t=this.protocol||"",e=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=n+this.host:this.hostname&&(i=n+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&Pd_isObject(this.query)&&Object.keys(this.query).length&&(o=D1.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||Ug[t])&&!1!==i?(i="//"+(i||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(e=e.replace(/[?#]/g,function(a){return encodeURIComponent(a)}))+(s=s.replace("#","%23"))+r},kc.prototype.resolve=function(n){return this.resolveObject(function(n,t,e){if(n&&Pd_isObject(n)&&n instanceof kc)return n;var r=new kc;return r.parse(n,t,e),r}(n,!1,!0)).format()},kc.prototype.resolveObject=function(n){if(Pd_isString(n)){var t=new kc;t.parse(n,!1,!0),n=t}for(var e=new kc,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];e[o]=this[o]}if(e.hash=n.hash,""===n.href)return e.href=e.format(),e;if(n.slashes&&!n.protocol){for(var s=Object.keys(n),a=0;a<s.length;a++){var c=s[a];"protocol"!==c&&(e[c]=n[c])}return Ug[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(n.protocol&&n.protocol!==e.protocol){if(!Ug[n.protocol]){for(var h=Object.keys(n),p=0;p<h.length;p++){var m=h[p];e[m]=n[m]}return e.href=e.format(),e}if(e.protocol=n.protocol,n.host||Vw[n.protocol])e.pathname=n.pathname;else{for(var j=(n.pathname||"").split("/");j.length&&!(n.host=j.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),""!==j[0]&&j.unshift(""),j.length<2&&j.unshift(""),e.pathname=j.join("/")}return e.search=n.search,e.query=n.query,e.host=n.host||"",e.auth=n.auth,e.hostname=n.hostname||n.host,e.port=n.port,(e.pathname||e.search)&&(e.path=(e.pathname||"")+(e.search||"")),e.slashes=e.slashes||n.slashes,e.href=e.format(),e}var x=e.pathname&&"/"===e.pathname.charAt(0),P=n.host||n.pathname&&"/"===n.pathname.charAt(0),R=P||x||e.host&&n.pathname,F=R,D=e.pathname&&e.pathname.split("/")||[],G=(j=n.pathname&&n.pathname.split("/")||[],e.protocol&&!Ug[e.protocol]);if(G&&(e.hostname="",e.port=null,e.host&&(""===D[0]?D[0]=e.host:D.unshift(e.host)),e.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(""===j[0]?j[0]=n.host:j.unshift(n.host)),n.host=null),R=R&&(""===j[0]||""===D[0])),P)e.host=n.host||""===n.host?n.host:e.host,e.hostname=n.hostname||""===n.hostname?n.hostname:e.hostname,e.search=n.search,e.query=n.query,D=j;else if(j.length)D||(D=[]),D.pop(),D=D.concat(j),e.search=n.search,e.query=n.query;else if(!function(n){return null==n}(n.search))return G&&(e.hostname=e.host=D.shift(),(X=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=X.shift(),e.host=e.hostname=X.shift())),e.search=n.search,e.query=n.query,(!Pd_isNull(e.pathname)||!Pd_isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e;if(!D.length)return e.pathname=null,e.path=e.search?"/"+e.search:null,e.href=e.format(),e;for(var J=D.slice(-1)[0],$=(e.host||n.host||D.length>1)&&("."===J||".."===J)||""===J,le=0,ie=D.length;ie>=0;ie--)"."===(J=D[ie])?D.splice(ie,1):".."===J?(D.splice(ie,1),le++):le&&(D.splice(ie,1),le--);if(!R&&!F)for(;le--;le)D.unshift("..");R&&""!==D[0]&&(!D[0]||"/"!==D[0].charAt(0))&&D.unshift(""),$&&"/"!==D.join("/").substr(-1)&&D.push("");var X,Fe=""===D[0]||D[0]&&"/"===D[0].charAt(0);return G&&(e.hostname=e.host=Fe?"":D.length?D.shift():"",(X=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=X.shift(),e.host=e.hostname=X.shift())),(R=R||e.host&&D.length)&&!Fe&&D.unshift(""),D.length?e.pathname=D.join("/"):(e.pathname=null,e.path=null),(!Pd_isNull(e.pathname)||!Pd_isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=n.auth||e.auth,e.slashes=e.slashes||n.slashes,e.href=e.format(),e},kc.prototype.parseHost=function(){var n=this.host,t=Pk.exec(n);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),n=n.substr(0,n.length-t.length)),n&&(this.hostname=n)};class nr extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class G1{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[r,i]of e)this.bindings[r]=i}concat(t){return new G1(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const zw={kind:"null"},xn={kind:"number"},di={kind:"string"},hi={kind:"boolean"},Nc={kind:"color"},Zh={kind:"object"},Qn={kind:"value"},B_={kind:"collator"},X0={kind:"formatted"},j_={kind:"resolvedImage"};function Yu(n,t){return{kind:"array",itemType:n,N:t}}function Es(n){if("array"===n.kind){const t=Es(n.itemType);return"number"==typeof n.N?`array<${t}, ${n.N}>`:"value"===n.itemType.kind?"array":`array<${t}>`}return n.kind}const CM=[zw,xn,di,hi,Nc,X0,Zh,Yu(Qn),j_];function K0(n,t){if("error"===t.kind)return null;if("array"===n.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!K0(n.itemType,t.itemType))&&("number"!=typeof n.N||n.N===t.N))return null}else{if(n.kind===t.kind)return null;if("value"===n.kind)for(const e of CM)if(!K0(e,t))return null}return`Expected ${Es(n)} but found ${Es(t)} instead.`}function B1(n,t){return t.some(e=>e.kind===n.kind)}function U_(n,t){return t.some(e=>"null"===e?null===n:"array"===e?Array.isArray(n):"object"===e?n&&!Array.isArray(n)&&"object"==typeof n:e===typeof n)}var SM=N_(function(n,t){var e={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(h){return(h=Math.round(h))<0?0:h>255?255:h}function o(h){return r("%"===h[h.length-1]?parseFloat(h)/100*255:parseInt(h))}function s(h){return function(h){return h<0?0:h>1?1:h}("%"===h[h.length-1]?parseFloat(h)/100:parseFloat(h))}function a(h,p,m){return m<0?m+=1:m>1&&(m-=1),6*m<1?h+(p-h)*m*6:2*m<1?p:3*m<2?h+(p-h)*(2/3-m)*6:h}try{t.parseCSSColor=function(h){var m,p=h.replace(/ /g,"").toLowerCase();if(p in e)return e[p].slice();if("#"===p[0])return 4===p.length?(m=parseInt(p.substr(1),16))>=0&&m<=4095?[(3840&m)>>4|(3840&m)>>8,240&m|(240&m)>>4,15&m|(15&m)<<4,1]:null:7===p.length&&(m=parseInt(p.substr(1),16))>=0&&m<=16777215?[(16711680&m)>>16,(65280&m)>>8,255&m,1]:null;var E=p.indexOf("("),S=p.indexOf(")");if(-1!==E&&S+1===p.length){var x=p.substr(0,E),P=p.substr(E+1,S-(E+1)).split(","),R=1;switch(x){case"rgba":if(4!==P.length)return null;R=s(P.pop());case"rgb":return 3!==P.length?null:[o(P[0]),o(P[1]),o(P[2]),R];case"hsla":if(4!==P.length)return null;R=s(P.pop());case"hsl":if(3!==P.length)return null;var F=(parseFloat(P[0])%360+360)%360/360,D=s(P[1]),j=s(P[2]),G=j<=.5?j*(D+1):j+D-j*D,X=2*j-G;return[r(255*a(X,G,F+1/3)),r(255*a(X,G,F)),r(255*a(X,G,F-1/3)),R];default:return null}}return null}}catch(h){}});class Ji{constructor(t,e,r,i=1){this.r=t,this.g=e,this.b=r,this.a=i}static parse(t){if(!t)return;if(t instanceof Ji)return t;if("string"!=typeof t)return;const e=SM.parseCSSColor(t);return e?new Ji(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,r,i]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(r)},${i})`}toArray(){const{r:t,g:e,b:r,a:i}=this;return 0===i?[0,0,0,0]:[255*t/i,255*e/i,255*r/i,i]}}Ji.black=new Ji(0,0,0,1),Ji.white=new Ji(1,1,1,1),Ji.transparent=new Ji(0,0,0,0),Ji.red=new Ji(1,0,0,1),Ji.blue=new Ji(0,0,1,1);class j1{constructor(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class U1{constructor(t,e,r,i,o){this.text=t,this.image=e,this.scale=r,this.fontStack=i,this.textColor=o}}class Id{constructor(t){this.sections=t}static fromString(t){return new Id([new U1(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(t=>0!==t.text.length||t.image&&0!==t.image.name.length)}static factory(t){return t instanceof Id?t:Id.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const r={};e.fontStack&&(r["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(r["font-scale"]=e.scale),e.textColor&&(r["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(r)}return t}}class Fc{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Fc({name:t,available:!1}):null}serialize(){return["image",this.name]}}function V1(n,t,e,r){return"number"==typeof n&&n>=0&&n<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[n,t,e,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[n,t,e,r]:[n,t,e]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function V_(n){if(null===n)return!0;if("string"==typeof n)return!0;if("boolean"==typeof n)return!0;if("number"==typeof n)return!0;if(n instanceof Ji)return!0;if(n instanceof j1)return!0;if(n instanceof Id)return!0;if(n instanceof Fc)return!0;if(Array.isArray(n)){for(const t of n)if(!V_(t))return!1;return!0}if("object"==typeof n){for(const t in n)if(!V_(n[t]))return!1;return!0}return!1}function va(n){if(null===n)return zw;if("string"==typeof n)return di;if("boolean"==typeof n)return hi;if("number"==typeof n)return xn;if(n instanceof Ji)return Nc;if(n instanceof j1)return B_;if(n instanceof Id)return X0;if(n instanceof Fc)return j_;if(Array.isArray(n)){const t=n.length;let e;for(const r of n){const i=va(r);if(e){if(e===i)continue;e=Qn;break}e=i}return Yu(e||Qn,t)}return Zh}function z_(n){const t=typeof n;return null===n?"":"string"===t||"number"===t||"boolean"===t?String(n):n instanceof Ji||n instanceof Id||n instanceof Fc?n.toString():JSON.stringify(n)}class hh{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!V_(t[1]))return e.error("invalid value");const r=t[1];let i=va(r);const o=e.expectedType;return"array"===i.kind&&0===i.N&&o&&"array"===o.kind&&("number"!=typeof o.N||0===o.N)&&(i=o),new hh(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ji?["rgba"].concat(this.value.toArray()):this.value instanceof Id?this.value.serialize():this.value}}class ia{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const z1={string:di,number:xn,boolean:hi,object:Zh};class Ad{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i,r=1;const o=t[0];if("array"===o){let a,c;if(t.length>2){const h=t[1];if("string"!=typeof h||!(h in z1)||"object"===h)return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=z1[h],r++}else a=Qn;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);c=t[2],r++}i=Yu(a,c)}else i=z1[o];const s=[];for(;r<t.length;r++){const a=e.parse(t[r],r,Qn);if(!a)return null;s.push(a)}return new Ad(i,s)}evaluate(t){for(let e=0;e<this.args.length;e++){const r=this.args[e].evaluate(t);if(!K0(this.type,va(r)))return r;if(e===this.args.length-1)throw new ia(`Expected value to be of type ${Es(this.type)}, but found ${Es(va(r))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);const i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map(r=>r.serialize()))}}class Hw{constructor(t){this.type=X0,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return e.error("First argument must be an image or text section.");const i=[];let o=!1;for(let s=1;s<=t.length-1;++s){const a=t[s];if(o&&"object"==typeof a&&!Array.isArray(a)){o=!1;let c=null;if(a["font-scale"]&&(c=e.parse(a["font-scale"],1,xn),!c))return null;let h=null;if(a["text-font"]&&(h=e.parse(a["text-font"],1,Yu(di)),!h))return null;let p=null;if(a["text-color"]&&(p=e.parse(a["text-color"],1,Nc),!p))return null;const m=i[i.length-1];m.scale=c,m.font=h,m.textColor=p}else{const c=e.parse(t[s],1,Qn);if(!c)return null;const h=c.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,i.push({content:c,scale:null,font:null,textColor:null})}}return new Hw(i)}evaluate(t){return new Id(this.sections.map(r=>{const i=r.content.evaluate(t);return va(i)===j_?new U1("",i,null,null,null):new U1(z_(i),null,r.scale?r.scale.evaluate(t):null,r.font?r.font.evaluate(t).join(","):null,r.textColor?r.textColor.evaluate(t):null)}))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const r={};e.scale&&(r["font-scale"]=e.scale.serialize()),e.font&&(r["text-font"]=e.font.serialize()),e.textColor&&(r["text-color"]=e.textColor.serialize()),t.push(r)}return t}}class H_{constructor(t){this.type=j_,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const r=e.parse(t[1],1,di);return r?new H_(r):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),r=Fc.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const xM={"to-boolean":hi,"to-color":Nc,"to-number":xn,"to-string":di};class Jh{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");const i=xM[r],o=[];for(let s=1;s<t.length;s++){const a=e.parse(t[s],s,Qn);if(!a)return null;o.push(a)}return new Jh(i,o)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,r;for(const i of this.args){if(e=i.evaluate(t),r=null,e instanceof Ji)return e;if("string"==typeof e){const o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&(r=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:V1(e[0],e[1],e[2],e[3]),!r))return new Ji(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ia(r||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const r of this.args){if(e=r.evaluate(t),null===e)return 0;const i=Number(e);if(!isNaN(i))return i}throw new ia(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?Id.fromString(z_(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Fc.fromString(z_(this.args[0].evaluate(t))):z_(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Hw([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new H_(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(e=>{t.push(e.serialize())}),t}}const Dk=["Unknown","Point","LineString","Polygon"];class H1{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Dk[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Ji.parse(t)),e}}class Md{constructor(t,e,r,i){this.name=t,this.type=e,this._evaluate=r,this.args=i}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,e){const r=t[0],i=Md.definitions[r];if(!i)return e.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(i)?i[0]:i.type,s=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,a=s.filter(([h])=>!Array.isArray(h)||h.length===t.length-1);let c=null;for(const[h,p]of a){c=new Ww(e.registry,e.path,null,e.scope);const m=[];let E=!1;for(let S=1;S<t.length;S++){const x=t[S],P=Array.isArray(h)?h[S-1]:h.type,R=c.parse(x,1+m.length,P);if(!R){E=!0;break}m.push(R)}if(!E){if(Array.isArray(h)&&h.length!==m.length){c.error(`Expected ${h.length} arguments, but found ${m.length} instead.`);continue}for(let S=0;S<m.length;S++){const x=Array.isArray(h)?h[S]:h.type,P=m[S];c.concat(S+1).checkSubtype(x,P.type)}if(0===c.errors.length)return new Md(r,o,p,m)}}if(1===a.length)e.errors.push(...c.errors);else{const p=(a.length?a:s).map(([E])=>function(n){return Array.isArray(n)?`(${n.map(Es).join(", ")})`:`(${Es(n.type)}...)`}(E)).join(" | "),m=[];for(let E=1;E<t.length;E++){const S=e.parse(t[E],1+m.length);if(!S)return null;m.push(Es(S.type))}e.error(`Expected arguments of type ${p}, but found (${m.join(", ")}) instead.`)}return null}static register(t,e){Md.definitions=e;for(const r in e)t[r]=Md}}class W1{constructor(t,e,r){this.type=B_,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");const i=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,hi);if(!i)return null;const o=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,hi);if(!o)return null;let s=null;return r.locale&&(s=e.parse(r.locale,1,di),!s)?null:new W1(i,o,s)}evaluate(t){return new j1(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Vg=8192;function TM(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.max(n[2],t[0]),n[3]=Math.max(n[3],t[1])}function zg(n,t){return!(n[0]<=t[0]||n[2]>=t[2]||n[1]<=t[1]||n[3]>=t[3])}function kk(n,t){const e=function(n){return(180+n)/360}(n[0]),r=function(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}(n[1]),i=Math.pow(2,t.z);return[Math.round(e*i*Vg),Math.round(r*i*Vg)]}function Nk(n,t,e){const r=n[0]-t[0],i=n[1]-t[1],o=n[0]-e[0],s=n[1]-e[1];return r*s-o*i==0&&r*o<=0&&i*s<=0}function IM(n,t,e){return t[1]>n[1]!=e[1]>n[1]&&n[0]<(e[0]-t[0])*(n[1]-t[1])/(e[1]-t[1])+t[0]}function Hg(n,t){let e=!1;for(let r=0,i=t.length;r<i;r++){const o=t[r];for(let s=0,a=o.length;s<a-1;s++){if(Nk(n,o[s],o[s+1]))return!1;IM(n,o[s],o[s+1])&&(e=!e)}}return e}function Fk(n,t){for(let e=0;e<t.length;e++)if(Hg(n,t[e]))return!0;return!1}function AM(n,t,e,r){const c=r[0]-e[0],h=r[1]-e[1],p=(n[0]-e[0])*h-c*(n[1]-e[1]),m=(t[0]-e[0])*h-c*(t[1]-e[1]);return p>0&&m<0||p<0&&m>0}function Bk(n,t,e,r){return 0!==function(n,t){return n[0]*t[1]-n[1]*t[0]}([r[0]-e[0],r[1]-e[1]],[t[0]-n[0],t[1]-n[1]])&&!(!AM(n,t,e,r)||!AM(e,r,n,t))}function jk(n,t,e){for(const r of e)for(let i=0;i<r.length-1;++i)if(Bk(n,t,r[i],r[i+1]))return!0;return!1}function Y1(n,t){for(let e=0;e<n.length;++e)if(!Hg(n[e],t))return!1;for(let e=0;e<n.length-1;++e)if(jk(n[e],n[e+1],t))return!1;return!0}function Uk(n,t){for(let e=0;e<t.length;e++)if(Y1(n,t[e]))return!0;return!1}function q1(n,t,e){const r=[];for(let i=0;i<n.length;i++){const o=[];for(let s=0;s<n[i].length;s++){const a=kk(n[i][s],e);TM(t,a),o.push(a)}r.push(o)}return r}function Wg(n,t,e){const r=[];for(let i=0;i<n.length;i++){const o=q1(n[i],t,e);r.push(o)}return r}function MM(n,t,e,r){if(n[0]<e[0]||n[0]>e[2]){const i=.5*r;let o=n[0]-e[0]>i?-r:e[0]-n[0]>i?r:0;0===o&&(o=n[0]-e[2]>i?-r:e[2]-n[0]>i?r:0),n[0]+=o}TM(t,n)}function OM(n,t,e,r){const i=Math.pow(2,r.z)*Vg,o=[r.x*Vg,r.y*Vg],s=[];for(const a of n)for(const c of a){const h=[c.x+o[0],c.y+o[1]];MM(h,t,e,i),s.push(h)}return s}function X1(n,t,e,r){const i=Math.pow(2,r.z)*Vg,o=[r.x*Vg,r.y*Vg],s=[];for(const a of n){const c=[];for(const h of a){const p=[h.x+o[0],h.y+o[1]];TM(t,p),c.push(p)}s.push(c)}if(t[2]-t[0]<=i/2){!function(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}(t);for(const a of s)for(const c of a)MM(c,t,e,i)}return s}class Yg{constructor(t,e){this.type=hi,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(V_(t[1])){const r=t[1];if("FeatureCollection"===r.type)for(let i=0;i<r.features.length;++i){const o=r.features[i].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Yg(r,r.features[i].geometry)}else if("Feature"===r.type){const i=r.geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Yg(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new Yg(r,r)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(n,t){const e=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if("Polygon"===t.type){const o=q1(t.coordinates,r,i),s=OM(n.geometry(),e,r,i);if(!zg(e,r))return!1;for(const a of s)if(!Hg(a,o))return!1}if("MultiPolygon"===t.type){const o=Wg(t.coordinates,r,i),s=OM(n.geometry(),e,r,i);if(!zg(e,r))return!1;for(const a of s)if(!Fk(a,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(n,t){const e=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if("Polygon"===t.type){const o=q1(t.coordinates,r,i),s=X1(n.geometry(),e,r,i);if(!zg(e,r))return!1;for(const a of s)if(!Y1(a,o))return!1}if("MultiPolygon"===t.type){const o=Wg(t.coordinates,r,i),s=X1(n.geometry(),e,r,i);if(!zg(e,r))return!1;for(const a of s)if(!Uk(a,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Z0(n){if(n instanceof Md){if("get"===n.name&&1===n.args.length)return!1;if("feature-state"===n.name)return!1;if("has"===n.name&&1===n.args.length)return!1;if("properties"===n.name||"geometry-type"===n.name||"id"===n.name)return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Yg)return!1;let t=!0;return n.eachChild(e=>{t&&!Z0(e)&&(t=!1)}),t}function W_(n){if(n instanceof Md&&"feature-state"===n.name)return!1;let t=!0;return n.eachChild(e=>{t&&!W_(e)&&(t=!1)}),t}function Y_(n,t){if(n instanceof Md&&t.indexOf(n.name)>=0)return!1;let e=!0;return n.eachChild(r=>{e&&!Y_(r,t)&&(e=!1)}),e}class q_{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const r=t[1];return e.scope.has(r)?new q_(r,e.scope.get(r)):e.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Ww{constructor(t,e=[],r,i=new G1,o=[]){this.registry=t,this.path=e,this.key=e.map(s=>`[${s}]`).join(""),this.scope=i,this.errors=o,this.expectedType=r}parse(t,e,r,i,o={}){return e?this.concat(e,r,i)._parse(t,o):this._parse(t,o)}_parse(t,e){function r(i,o,s){return"assert"===s?new Ad(o,[i]):"coerce"===s?new Jh(o,[i]):i}if((null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t)&&(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=t[0];if("string"!=typeof i)return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[i];if(o){let s=o.parse(t,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,c=s.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==c.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==c.kind&&"string"!==c.kind){if(this.checkSubtype(a,c))return null}else s=r(s,a,e.typeAnnotation||"coerce");else s=r(s,a,e.typeAnnotation||"assert")}if(!(s instanceof hh)&&"resolvedImage"!==s.type.kind&&K1(s)){const a=new H1;try{s=new hh(s.type,s.evaluate(a))}catch(c){return this.error(c.message),null}}return s}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,r){const i="number"==typeof t?this.path.concat(t):this.path,o=r?this.scope.concat(r):this.scope;return new Ww(this.registry,i,e||null,o,this.errors)}error(t,...e){const r=`${this.key}${e.map(i=>`[${i}]`).join("")}`;this.errors.push(new nr(r,t))}checkSubtype(t,e){const r=K0(t,e);return r&&this.error(r),r}}function K1(n){if(n instanceof q_)return K1(n.boundExpression);if(n instanceof Md&&"error"===n.name)return!1;if(n instanceof W1)return!1;if(n instanceof Yg)return!1;const t=n instanceof Jh||n instanceof Ad;let e=!0;return n.eachChild(r=>{e=t?e&&K1(r):e&&r instanceof hh}),!!e&&Z0(n)&&Y_(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function Yw(n,t){const e=n.length-1;let s,a,r=0,i=e,o=0;for(;r<=i;)if(o=Math.floor((r+i)/2),s=n[o],a=n[o+1],s<=t){if(o===e||t<a)return o;r=o+1}else{if(!(s>t))throw new ia("Input is not a number.");i=o-1}return 0}class J0{constructor(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[i,o]of r)this.labels.push(i),this.outputs.push(o)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const r=e.parse(t[1],1,xn);if(!r)return null;const i=[];let o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType);for(let s=1;s<t.length;s+=2){const a=1===s?-1/0:t[s],c=t[s+1],h=s,p=s+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(i.length&&i[i.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);const m=e.parse(c,p,o);if(!m)return null;o=o||m.type,i.push([a,m])}return new J0(o,r,i)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return r[0].evaluate(t);const o=e.length;return i>=e[o-1]?r[o-1].evaluate(t):r[Yw(e,i)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var zk=qg;function qg(n,t,e,r){this.cx=3*n,this.bx=3*(e-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=r,this.p2x=e,this.p2y=r}function qu(n,t,e){return n*(1-e)+t*e}qg.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n},qg.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n},qg.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},qg.prototype.solveCurveX=function(n,t){var e,r,i,o,s;for(void 0===t&&(t=1e-6),i=n,s=0;s<8;s++){if(o=this.sampleCurveX(i)-n,Math.abs(o)<t)return i;var a=this.sampleCurveDerivativeX(i);if(Math.abs(a)<1e-6)break;i-=o/a}if((i=n)<(e=0))return e;if(i>(r=1))return r;for(;e<r;){if(o=this.sampleCurveX(i),Math.abs(o-n)<t)return i;n>o?e=i:r=i,i=.5*(r-e)+e}return i},qg.prototype.solve=function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))};var LM=Object.freeze({__proto__:null,number:qu,color:function(n,t,e){return new Ji(qu(n.r,t.r,e),qu(n.g,t.g,e),qu(n.b,t.b,e),qu(n.a,t.a,e))},array:function(n,t,e){return n.map((r,i)=>qu(r,t[i],e))}});const GM=4/29,Xg=6/29,Z1=3*Xg*Xg,Yk=Math.PI/180,jM=180/Math.PI;function J1(n){return n>.008856451679035631?Math.pow(n,1/3):n/Z1+GM}function Q1(n){return n>Xg?n*n*n:Z1*(n-GM)}function $1(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function X_(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function qw(n){const t=X_(n.r),e=X_(n.g),r=X_(n.b),i=J1((.4124564*t+.3575761*e+.1804375*r)/.95047),o=J1((.2126729*t+.7151522*e+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-J1((.0193339*t+.119192*e+.9503041*r)/1.08883)),alpha:n.a}}function eT(n){let t=(n.l+16)/116,e=isNaN(n.a)?t:t+n.a/500,r=isNaN(n.b)?t:t-n.b/200;return t=1*Q1(t),e=.95047*Q1(e),r=1.08883*Q1(r),new Ji($1(3.2404542*e-1.5371385*t-.4985314*r),$1(-.969266*e+1.8760108*t+.041556*r),$1(.0556434*e-.2040259*t+1.0572252*r),n.alpha)}function nT(n,t,e){const r=t-n;return n+e*(r>180||r<-180?r-360*Math.round(r/360):r)}const Q0={forward:qw,reverse:eT,interpolate:function(n,t,e){return{l:qu(n.l,t.l,e),a:qu(n.a,t.a,e),b:qu(n.b,t.b,e),alpha:qu(n.alpha,t.alpha,e)}}},K__forward=function(n){const{l:t,a:e,b:r}=qw(n),i=Math.atan2(r,e)*jM;return{h:i<0?i+360:i,c:Math.sqrt(e*e+r*r),l:t,alpha:n.a}},K__reverse=function(n){const t=n.h*Yk,e=n.c;return eT({l:n.l,a:Math.cos(t)*e,b:Math.sin(t)*e,alpha:n.alpha})},K__interpolate=function(n,t,e){return{h:nT(n.h,t.h,e),c:qu(n.c,t.c,e),l:qu(n.l,t.l,e),alpha:qu(n.alpha,t.alpha,e)}};class Xu{constructor(t,e,r,i,o){this.type=t,this.operator=e,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(t,e,r,i){let o=0;if("exponential"===t.name)o=Xw(e,t.base,r,i);else if("linear"===t.name)o=Xw(e,1,r,i);else if("cubic-bezier"===t.name){const s=t.controlPoints;o=new zk(s[0],s[1],s[2],s[3]).solve(Xw(e,1,r,i))}return o}static parse(t,e){let[r,i,o,...s]=t;if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const h=i[1];if("number"!=typeof h)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:h}}else{if("cubic-bezier"!==i[0])return e.error(`Unknown interpolation type ${String(i[0])}`,1,0);{const h=i.slice(1);if(4!==h.length||h.some(p=>"number"!=typeof p||p<0||p>1))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:h}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(o=e.parse(o,2,xn),!o)return null;const a=[];let c=null;"interpolate-hcl"===r||"interpolate-lab"===r?c=Nc:e.expectedType&&"value"!==e.expectedType.kind&&(c=e.expectedType);for(let h=0;h<s.length;h+=2){const p=s[h],m=s[h+1],E=h+3,S=h+4;if("number"!=typeof p)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',E);if(a.length&&a[a.length-1][0]>=p)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',E);const x=e.parse(m,S,c);if(!x)return null;c=c||x.type,a.push([p,x])}return"number"===c.kind||"color"===c.kind||"array"===c.kind&&"number"===c.itemType.kind&&"number"==typeof c.N?new Xu(c,r,i,o,a):e.error(`Type ${Es(c)} is not interpolatable.`)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return r[0].evaluate(t);const o=e.length;if(i>=e[o-1])return r[o-1].evaluate(t);const s=Yw(e,i),h=Xu.interpolationFactor(this.interpolation,i,e[s],e[s+1]),p=r[s].evaluate(t),m=r[s+1].evaluate(t);return"interpolate"===this.operator?LM[this.type.kind.toLowerCase()](p,m,h):"interpolate-hcl"===this.operator?K__reverse(K__interpolate(K__forward(p),K__forward(m),h)):Q0.reverse(Q0.interpolate(Q0.forward(p),Q0.forward(m),h))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e}}function Xw(n,t,e,r){const i=r-e,o=n-e;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}class Kw{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let r=null;const i=e.expectedType;i&&"value"!==i.kind&&(r=i);const o=[];for(const a of t.slice(1)){const c=e.parse(a,1+o.length,r,void 0,{typeAnnotation:"omit"});if(!c)return null;r=r||c.type,o.push(c)}return i&&o.some(a=>K0(i,a.type))?new Kw(Qn,o):new Kw(r,o)}evaluate(t){let i,e=null,r=0;for(const o of this.args)if(r++,e=o.evaluate(t),e&&e instanceof Fc&&!e.available&&(i||(i=e.name),e=null,r===this.args.length&&(e=i)),null!==e)break;return e}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(e=>{t.push(e.serialize())}),t}}class Zw{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const r=[];for(let o=1;o<t.length-1;o+=2){const s=t[o];if("string"!=typeof s)return e.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return e.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=e.parse(t[o+1],o+1);if(!a)return null;r.push([s,a])}const i=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return i?new Zw(r,i):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,r]of this.bindings)t.push(e,r.serialize());return t.push(this.result.serialize()),t}}class Qh{constructor(t,e,r){this.type=t,this.index=e,this.input=r}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,xn),i=e.parse(t[2],2,Yu(e.expectedType||Qn));return r&&i?new Qh(i.type.itemType,r,i):null}evaluate(t){const e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new ia(`Array index out of bounds: ${e} < 0.`);if(e>=r.length)throw new ia(`Array index out of bounds: ${e} > ${r.length-1}.`);if(e!==Math.floor(e))throw new ia(`Array index must be an integer, but found ${e} instead.`);return r[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class UM{constructor(t,e){this.type=hi,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,Qn),i=e.parse(t[2],2,Qn);return r&&i?B1(r.type,[hi,di,xn,zw,Qn])?new UM(r,i):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Es(r.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!r)return!1;if(!U_(e,["boolean","string","number","null"]))throw new ia(`Expected first argument to be of type boolean, string, number or null, but found ${Es(va(e))} instead.`);if(!U_(r,["string","array"]))throw new ia(`Expected second argument to be of type array or string, but found ${Es(va(r))} instead.`);return r.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class $0{constructor(t,e,r){this.type=xn,this.needle=t,this.haystack=e,this.fromIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,Qn),i=e.parse(t[2],2,Qn);if(!r||!i)return null;if(!B1(r.type,[hi,di,xn,zw,Qn]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Es(r.type)} instead`);if(4===t.length){const o=e.parse(t[3],3,xn);return o?new $0(r,i,o):null}return new $0(r,i)}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!U_(e,["boolean","string","number","null"]))throw new ia(`Expected first argument to be of type boolean, string, number or null, but found ${Es(va(e))} instead.`);if(!U_(r,["string","array"]))throw new ia(`Expected second argument to be of type array or string, but found ${Es(va(r))} instead.`);if(this.fromIndex){const i=this.fromIndex.evaluate(t);return r.indexOf(e,i)}return r.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class ev{constructor(t,e,r,i,o,s){this.inputType=t,this.type=e,this.input=r,this.cases=i,this.outputs=o,this.otherwise=s}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let r,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const o={},s=[];for(let h=2;h<t.length-1;h+=2){let p=t[h];const m=t[h+1];Array.isArray(p)||(p=[p]);const E=e.concat(h);if(0===p.length)return E.error("Expected at least one branch label.");for(const x of p){if("number"!=typeof x&&"string"!=typeof x)return E.error("Branch labels must be numbers or strings.");if("number"==typeof x&&Math.abs(x)>Number.MAX_SAFE_INTEGER)return E.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof x&&Math.floor(x)!==x)return E.error("Numeric branch labels must be integer values.");if(r){if(E.checkSubtype(r,va(x)))return null}else r=va(x);if(void 0!==o[String(x)])return E.error("Branch labels must be unique.");o[String(x)]=s.length}const S=e.parse(m,h,i);if(!S)return null;i=i||S.type,s.push(S)}const a=e.parse(t[1],1,Qn);if(!a)return null;const c=e.parse(t[t.length-1],t.length-1,i);return!c||"value"!==a.type.kind&&e.concat(1).checkSubtype(r,a.type)?null:new ev(r,i,a,o,s,c)}evaluate(t){const e=this.input.evaluate(t);return(va(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),r=[],i={};for(const s of e){const a=i[this.cases[s]];void 0===a?(i[this.cases[s]]=r.length,r.push([this.cases[s],[s]])):r[a][1].push(s)}const o=s=>"number"===this.inputType.kind?Number(s):s;for(const[s,a]of r)t.push(1===a.length?o(a[0]):a.map(o)),t.push(this.outputs[s].serialize());return t.push(this.otherwise.serialize()),t}}class iT{constructor(t,e,r){this.type=t,this.branches=e,this.otherwise=r}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const i=[];for(let s=1;s<t.length-1;s+=2){const a=e.parse(t[s],s,hi);if(!a)return null;const c=e.parse(t[s+1],s+1,r);if(!c)return null;i.push([a,c]),r=r||c.type}const o=e.parse(t[t.length-1],t.length-1,r);return o?new iT(r,i,o):null}evaluate(t){for(const[e,r]of this.branches)if(e.evaluate(t))return r.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,r]of this.branches)t(e),t(r);t(this.otherwise)}outputDefined(){return this.branches.every(([t,e])=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(e=>{t.push(e.serialize())}),t}}class $h{constructor(t,e,r,i){this.type=t,this.input=e,this.beginIndex=r,this.endIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,Qn),i=e.parse(t[2],2,xn);if(!r||!i)return null;if(!B1(r.type,[Yu(Qn),di,Qn]))return e.error(`Expected first argument to be of type array or string, but found ${Es(r.type)} instead`);if(4===t.length){const o=e.parse(t[3],3,xn);return o?new $h(r.type,r,i,o):null}return new $h(r.type,r,i)}evaluate(t){const e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!U_(e,["string","array"]))throw new ia(`Expected first argument to be of type array or string, but found ${Es(va(e))} instead.`);if(this.endIndex){const i=this.endIndex.evaluate(t);return e.slice(r,i)}return e.slice(r)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function VM(n,t){return"=="===n||"!="===n?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function HM(n,t,e,r){return 0===r.compare(t,e)}function vp(n,t,e){const r="=="!==n&&"!="!==n;return class pV{constructor(o,s,a){this.type=hi,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument="value"===o.type.kind||"value"===s.type.kind}static parse(o,s){if(3!==o.length&&4!==o.length)return s.error("Expected two or three arguments.");const a=o[0];let c=s.parse(o[1],1,Qn);if(!c)return null;if(!VM(a,c.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${Es(c.type)}'.`);let h=s.parse(o[2],2,Qn);if(!h)return null;if(!VM(a,h.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${Es(h.type)}'.`);if(c.type.kind!==h.type.kind&&"value"!==c.type.kind&&"value"!==h.type.kind)return s.error(`Cannot compare types '${Es(c.type)}' and '${Es(h.type)}'.`);r&&("value"===c.type.kind&&"value"!==h.type.kind?c=new Ad(h.type,[c]):"value"!==c.type.kind&&"value"===h.type.kind&&(h=new Ad(c.type,[h])));let p=null;if(4===o.length){if("string"!==c.type.kind&&"string"!==h.type.kind&&"value"!==c.type.kind&&"value"!==h.type.kind)return s.error("Cannot use collator to compare non-string types.");if(p=s.parse(o[3],3,B_),!p)return null}return new pV(c,h,p)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(r&&this.hasUntypedArgument){const c=va(s),h=va(a);if(c.kind!==h.kind||"string"!==c.kind&&"number"!==c.kind)throw new ia(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${c.kind}, ${h.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const c=va(s),h=va(a);if("string"!==c.kind||"string"!==h.kind)return t(o,s,a)}return this.collator?e(o,s,a,this.collator.evaluate(o)):t(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}serialize(){const o=[n];return this.eachChild(s=>{o.push(s.serialize())}),o}}}const WM=vp("==",function(n,t,e){return t===e},HM),YM=vp("!=",function(n,t,e){return t!==e},function(n,t,e,r){return!HM(0,t,e,r)}),qM=vp("<",function(n,t,e){return t<e},function(n,t,e,r){return r.compare(t,e)<0}),tN=vp(">",function(n,t,e){return t>e},function(n,t,e,r){return r.compare(t,e)>0}),H5=vp("<=",function(n,t,e){return t<=e},function(n,t,e,r){return r.compare(t,e)<=0}),nN=vp(">=",function(n,t,e){return t>=e},function(n,t,e,r){return r.compare(t,e)>=0});class oT{constructor(t,e,r,i,o){this.type=di,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const r=e.parse(t[1],1,xn);if(!r)return null;const i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");let o=null;if(i.locale&&(o=e.parse(i.locale,1,di),!o))return null;let s=null;if(i.currency&&(s=e.parse(i.currency,1,di),!s))return null;let a=null;if(i["min-fraction-digits"]&&(a=e.parse(i["min-fraction-digits"],1,xn),!a))return null;let c=null;return i["max-fraction-digits"]&&(c=e.parse(i["max-fraction-digits"],1,xn),!c)?null:new oT(r,o,s,a,c)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class sT{constructor(t){this.type=xn,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error(`Expected argument of type string or array, but found ${Es(r.type)} instead.`):new sT(r):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ia(`Expected value to be of type string or array, but found ${Es(va(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(e=>{t.push(e.serialize())}),t}}const Qw={"==":WM,"!=":YM,">":tN,"<":qM,">=":nN,"<=":H5,array:Ad,at:Qh,boolean:Ad,case:iT,coalesce:Kw,collator:W1,format:Hw,image:H_,in:UM,"index-of":$0,interpolate:Xu,"interpolate-hcl":Xu,"interpolate-lab":Xu,length:sT,let:Zw,literal:hh,match:ev,number:Ad,"number-format":oT,object:Ad,slice:$h,step:J0,string:Ad,"to-boolean":Jh,"to-color":Jh,"to-number":Jh,"to-string":Jh,var:q_,within:Yg};function aT(n,[t,e,r,i]){t=t.evaluate(n),e=e.evaluate(n),r=r.evaluate(n);const o=i?i.evaluate(n):1,s=V1(t,e,r,o);if(s)throw new ia(s);return new Ji(t/255*o,e/255*o,r/255*o,o)}function lT(n,t){return n in t}function uT(n,t){const e=t[n];return void 0===e?null:e}function yp(n){return{type:n}}function tv(n){return{result:"success",value:n}}function nv(n){return{result:"error",value:n}}function Z_(n){return"data-driven"===n["property-type"]||"cross-faded-data-driven"===n["property-type"]}function J_(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function rv(n){return!!n.expression&&n.expression.interpolated}function Li(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":null===n?"null":typeof n}function Q_(n){return"object"==typeof n&&null!==n&&!Array.isArray(n)}Md.register(Qw,{error:[{kind:"error"},[di],(n,[t])=>{throw new ia(t.evaluate(n))}],typeof:[di,[Qn],(n,[t])=>Es(va(t.evaluate(n)))],"to-rgba":[Yu(xn,4),[Nc],(n,[t])=>t.evaluate(n).toArray()],rgb:[Nc,[xn,xn,xn],aT],rgba:[Nc,[xn,xn,xn,xn],aT],has:{type:hi,overloads:[[[di],(n,[t])=>lT(t.evaluate(n),n.properties())],[[di,Zh],(n,[t,e])=>lT(t.evaluate(n),e.evaluate(n))]]},get:{type:Qn,overloads:[[[di],(n,[t])=>uT(t.evaluate(n),n.properties())],[[di,Zh],(n,[t,e])=>uT(t.evaluate(n),e.evaluate(n))]]},"feature-state":[Qn,[di],(n,[t])=>uT(t.evaluate(n),n.featureState||{})],properties:[Zh,[],n=>n.properties()],"geometry-type":[di,[],n=>n.geometryType()],id:[Qn,[],n=>n.id()],zoom:[xn,[],n=>n.globals.zoom],"heatmap-density":[xn,[],n=>n.globals.heatmapDensity||0],"line-progress":[xn,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[xn,[],n=>n.globals.skyRadialProgress||0],accumulated:[Qn,[],n=>void 0===n.globals.accumulated?null:n.globals.accumulated],"+":[xn,yp(xn),(n,t)=>{let e=0;for(const r of t)e+=r.evaluate(n);return e}],"*":[xn,yp(xn),(n,t)=>{let e=1;for(const r of t)e*=r.evaluate(n);return e}],"-":{type:xn,overloads:[[[xn,xn],(n,[t,e])=>t.evaluate(n)-e.evaluate(n)],[[xn],(n,[t])=>-t.evaluate(n)]]},"/":[xn,[xn,xn],(n,[t,e])=>t.evaluate(n)/e.evaluate(n)],"%":[xn,[xn,xn],(n,[t,e])=>t.evaluate(n)%e.evaluate(n)],ln2:[xn,[],()=>Math.LN2],pi:[xn,[],()=>Math.PI],e:[xn,[],()=>Math.E],"^":[xn,[xn,xn],(n,[t,e])=>Math.pow(t.evaluate(n),e.evaluate(n))],sqrt:[xn,[xn],(n,[t])=>Math.sqrt(t.evaluate(n))],log10:[xn,[xn],(n,[t])=>Math.log(t.evaluate(n))/Math.LN10],ln:[xn,[xn],(n,[t])=>Math.log(t.evaluate(n))],log2:[xn,[xn],(n,[t])=>Math.log(t.evaluate(n))/Math.LN2],sin:[xn,[xn],(n,[t])=>Math.sin(t.evaluate(n))],cos:[xn,[xn],(n,[t])=>Math.cos(t.evaluate(n))],tan:[xn,[xn],(n,[t])=>Math.tan(t.evaluate(n))],asin:[xn,[xn],(n,[t])=>Math.asin(t.evaluate(n))],acos:[xn,[xn],(n,[t])=>Math.acos(t.evaluate(n))],atan:[xn,[xn],(n,[t])=>Math.atan(t.evaluate(n))],min:[xn,yp(xn),(n,t)=>Math.min(...t.map(e=>e.evaluate(n)))],max:[xn,yp(xn),(n,t)=>Math.max(...t.map(e=>e.evaluate(n)))],abs:[xn,[xn],(n,[t])=>Math.abs(t.evaluate(n))],round:[xn,[xn],(n,[t])=>{const e=t.evaluate(n);return e<0?-Math.round(-e):Math.round(e)}],floor:[xn,[xn],(n,[t])=>Math.floor(t.evaluate(n))],ceil:[xn,[xn],(n,[t])=>Math.ceil(t.evaluate(n))],"filter-==":[hi,[di,Qn],(n,[t,e])=>n.properties()[t.value]===e.value],"filter-id-==":[hi,[Qn],(n,[t])=>n.id()===t.value],"filter-type-==":[hi,[di],(n,[t])=>n.geometryType()===t.value],"filter-<":[hi,[di,Qn],(n,[t,e])=>{const r=n.properties()[t.value],i=e.value;return typeof r==typeof i&&r<i}],"filter-id-<":[hi,[Qn],(n,[t])=>{const e=n.id(),r=t.value;return typeof e==typeof r&&e<r}],"filter->":[hi,[di,Qn],(n,[t,e])=>{const r=n.properties()[t.value],i=e.value;return typeof r==typeof i&&r>i}],"filter-id->":[hi,[Qn],(n,[t])=>{const e=n.id(),r=t.value;return typeof e==typeof r&&e>r}],"filter-<=":[hi,[di,Qn],(n,[t,e])=>{const r=n.properties()[t.value],i=e.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[hi,[Qn],(n,[t])=>{const e=n.id(),r=t.value;return typeof e==typeof r&&e<=r}],"filter->=":[hi,[di,Qn],(n,[t,e])=>{const r=n.properties()[t.value],i=e.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[hi,[Qn],(n,[t])=>{const e=n.id(),r=t.value;return typeof e==typeof r&&e>=r}],"filter-has":[hi,[Qn],(n,[t])=>t.value in n.properties()],"filter-has-id":[hi,[],n=>null!==n.id()&&void 0!==n.id()],"filter-type-in":[hi,[Yu(di)],(n,[t])=>t.value.indexOf(n.geometryType())>=0],"filter-id-in":[hi,[Yu(Qn)],(n,[t])=>t.value.indexOf(n.id())>=0],"filter-in-small":[hi,[di,Yu(Qn)],(n,[t,e])=>e.value.indexOf(n.properties()[t.value])>=0],"filter-in-large":[hi,[di,Yu(Qn)],(n,[t,e])=>function(n,t,e,r){for(;e<=r;){const i=e+r>>1;if(t[i]===n)return!0;t[i]>n?r=i-1:e=i+1}return!1}(n.properties()[t.value],e.value,0,e.value.length-1)],all:{type:hi,overloads:[[[hi,hi],(n,[t,e])=>t.evaluate(n)&&e.evaluate(n)],[yp(hi),(n,t)=>{for(const e of t)if(!e.evaluate(n))return!1;return!0}]]},any:{type:hi,overloads:[[[hi,hi],(n,[t,e])=>t.evaluate(n)||e.evaluate(n)],[yp(hi),(n,t)=>{for(const e of t)if(e.evaluate(n))return!0;return!1}]]},"!":[hi,[hi],(n,[t])=>!t.evaluate(n)],"is-supported-script":[hi,[di],(n,[t])=>{const e=n.globals&&n.globals.isSupportedScript;return!e||e(t.evaluate(n))}],upcase:[di,[di],(n,[t])=>t.evaluate(n).toUpperCase()],downcase:[di,[di],(n,[t])=>t.evaluate(n).toLowerCase()],concat:[di,yp(Qn),(n,t)=>t.map(e=>z_(e.evaluate(n))).join("")],"resolved-locale":[di,[B_],(n,[t])=>t.evaluate(n).resolvedLocale()]});class ZM{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new H1,this._defaultValue=e?function(n){return"color"===n.type&&Q_(n.default)?new Ji(0,0,0,0):"color"===n.type?Ji.parse(n.default)||null:void 0===n.default?null:n.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,r,i,o,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(t,e,r,i,o,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new ia(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,"undefined"!=typeof console&&console.warn(a.message)),this._defaultValue}}}function eE(n){return Array.isArray(n)&&n.length>0&&"string"==typeof n[0]&&n[0]in Qw}function $w(n,t){const e=new Ww(Qw,[],t?function(n){const t={color:Nc,string:di,number:xn,enum:di,boolean:hi,formatted:X0,resolvedImage:j_};return"array"===n.type?Yu(t[n.value]||Qn,n.length):t[n.type]}(t):void 0),r=e.parse(n,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?tv(new ZM(r,t)):nv(e.errors)}class JM{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!W_(e.expression)}evaluateWithoutErrorHandling(t,e,r,i,o,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,i,o,s)}evaluate(t,e,r,i,o,s){return this._styleExpression.evaluate(t,e,r,i,o,s)}}class cT{constructor(t,e,r,i){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!W_(e.expression),this.interpolationType=i}evaluateWithoutErrorHandling(t,e,r,i,o,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,i,o,s)}evaluate(t,e,r,i,o,s){return this._styleExpression.evaluate(t,e,r,i,o,s)}interpolationFactor(t,e,r){return this.interpolationType?Xu.interpolationFactor(this.interpolationType,t,e,r):0}}function Kg(n,t){if("error"===(n=$w(n,t)).result)return n;const e=n.value.expression,r=Z0(e);if(!r&&!Z_(t))return nv([new nr("","data expressions not supported")]);const i=Y_(e,["zoom"]);if(!i&&!J_(t))return nv([new nr("","zoom expressions not supported")]);const o=tC(e);if(!o&&!i)return nv([new nr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof nr)return nv([o]);if(o instanceof Xu&&!rv(t))return nv([new nr("",'"interpolate" expressions cannot be used with this property')]);if(!o)return tv(new JM(r?"constant":"source",n.value));return tv(new cT(r?"camera":"composite",n.value,o.labels,o instanceof Xu?o.interpolation:void 0))}function tC(n){let t=null;if(n instanceof Zw)t=tC(n.result);else if(n instanceof Kw){for(const e of n.args)if(t=tC(e),t)break}else(n instanceof J0||n instanceof Xu)&&n.input instanceof Md&&"zoom"===n.input.name&&(t=n);return t instanceof nr||n.eachChild(e=>{const r=tC(e);r instanceof nr?t=r:!t&&r?t=new nr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new nr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function iv(n){return"object"==typeof n?["literal",n]:n}function dT(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function $M(n,t){const e=iv(function(n,t){return void 0!==n?n:void 0!==t?t:void 0}(n.default,t.default));return void 0===e&&"resolvedImage"===t.type?"":e}function iC(n,t,e){const r=oC(n,t),i=["get",n.property];if("categorical"===r&&"boolean"==typeof e[0][0]){const o=["case"];for(const s of e)o.push(["==",i,s[0]],s[1]);return o.push($M(n,t)),o}if("categorical"===r){const o=["match",i];for(const s of e)Jg(o,s[0],s[1],!1);return o.push($M(n,t)),o}if("interval"===r){const o=["step",["number",i]];for(const s of e)Jg(o,s[0],s[1],!0);return tE(o),void 0===n.default?o:["case",["==",["typeof",i],"number"],o,iv(n.default)]}if("exponential"===r){const o=void 0!==n.base?n.base:1,s=[dT(n),1===o?["linear"]:["exponential",o],["number",i]];for(const a of e)Jg(s,a[0],a[1],!1);return void 0===n.default?s:["case",["==",["typeof",i],"number"],s,iv(n.default)]}throw new Error(`Unknown property function type ${r}`)}function tE(n){"step"===n[0]&&3===n.length&&(n.push(0),n.push(n[3]))}function Jg(n,t,e,r){n.length>3&&t===n[n.length-2]||(r&&2===n.length||n.push(t),n.push(e))}function oC(n,t){return n.type?n.type:t.expression.interpolated?"exponential":"interval"}function tR(n){const t=["concat"],e=/{([^{}]+)}/g;let r=0;for(let i=e.exec(n);null!==i;i=e.exec(n)){const o=n.slice(r,e.lastIndex-i[0].length);r=e.lastIndex,o.length>0&&t.push(o),t.push(["get",i[1]])}if(1===t.length)return n;if(r<n.length)t.push(n.slice(r));else if(2===t.length)return["to-string",t[1]];return t}function nE(n){if(!0===n||!1===n)return!0;if(!Array.isArray(n)||0===n.length)return!1;switch(n[0]){case"has":return n.length>=2&&"$id"!==n[1]&&"$type"!==n[1];case"in":return n.length>=3&&("string"!=typeof n[1]||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==n.length||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const t of n.slice(1))if(!nE(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const nR={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function rR(n,t){return n<t?-1:n>t?1:0}function rE(n){if(!Array.isArray(n))return!1;if("within"===n[0])return!0;for(let t=1;t<n.length;t++)if(rE(n[t]))return!0;return!1}function Qg(n){if(!n)return!0;const t=n[0];return n.length<=1?"any"!==t:"=="===t?iR(n[1],n[2],"=="):"!="===t?tf(iR(n[1],n[2],"==")):"<"===t||">"===t||"<="===t||">="===t?iR(n[1],n[2],t):"any"===t?function(n){return["any"].concat(n.map(Qg))}(n.slice(1)):"all"===t?["all"].concat(n.slice(1).map(Qg)):"none"===t?["all"].concat(n.slice(1).map(Qg).map(tf)):"in"===t?wo(n[1],n.slice(2)):"!in"===t?tf(wo(n[1],n.slice(2))):"has"===t?ef(n[1]):"!has"===t?tf(ef(n[1])):"within"!==t||n}function iR(n,t,e){switch(n){case"$type":return[`filter-type-${e}`,t];case"$id":return[`filter-id-${e}`,t];default:return[`filter-${e}`,n,t]}}function wo(n,t){if(0===t.length)return!1;switch(n){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",n,["literal",t.sort(rR)]]:["filter-in-small",n,["literal",t]]}}function ef(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function tf(n){return["!",n]}var q5=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function pN(n,t){const e={};for(const r in n)"ref"!==r&&(e[r]=n[r]);return q5.forEach(r=>{r in t&&(e[r]=t[r])}),e}class En{constructor(t,e,r,i){this.message=(t?`${t}: `:"")+r,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)}}class gT{constructor(t){this.error=t,this.message=t.message;const e=t.message.match(/line (\d+)/);this.line=e?parseInt(e[1],10):0}}function sv(n){const e=n.value;return e?[new En(n.key,e,"constants have been deprecated as of v8")]:[]}function Rs(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Ep(n){if(Array.isArray(n))return n.map(Ep);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const t={};for(const e in n)t[e]=Ep(n[e]);return t}return Rs(n)}function Ll(n){const t=n.key,e=n.value,r=n.valueSpec||{},i=n.objectElementValidators||{},o=n.style,s=n.styleSpec;let a=[];const c=Li(e);if("object"!==c)return[new En(t,e,`object expected, ${c} found`)];for(const h in e){const p=h.split(".")[0],m=r[p]||r["*"];let E;if(i[p])E=i[p];else if(r[p])E=tl;else if(i["*"])E=i["*"];else{if(!r["*"]){a.push(new En(t,e[h],`unknown property "${h}"`));continue}E=tl}a=a.concat(E({key:(t&&`${t}.`)+h,value:e[h],valueSpec:m,style:o,styleSpec:s,object:e,objectKey:h},e))}for(const h in r)i[h]||r[h].required&&void 0===r[h].default&&void 0===e[h]&&a.push(new En(t,e,`missing required property "${h}"`));return a}function aR(n){const t=n.value,e=n.valueSpec,r=n.style,i=n.styleSpec,o=n.key,s=n.arrayElementValidator||tl;if("array"!==Li(t))return[new En(o,t,`array expected, ${Li(t)} found`)];if(e.length&&t.length!==e.length)return[new En(o,t,`array length ${e.length} expected, length ${t.length} found`)];if(e["min-length"]&&t.length<e["min-length"])return[new En(o,t,`array length at least ${e["min-length"]} expected, length ${t.length} found`)];let a={type:e.value,values:e.values,minimum:e.minimum,maximum:e.maximum};i.$version<7&&(a.function=e.function),"object"===Li(e.value)&&(a=e.value);let c=[];for(let h=0;h<t.length;h++)c=c.concat(s({array:t,arrayIndex:h,value:t[h],valueSpec:a,style:r,styleSpec:i,key:`${o}[${h}]`}));return c}function sE(n){const t=n.key,e=n.value,r=n.valueSpec;let i=Li(e);if("number"===i&&e!=e&&(i="NaN"),"number"!==i)return[new En(t,e,`number expected, ${i} found`)];if("minimum"in r){let o=r.minimum;if("array"===Li(r.minimum)&&(o=r.minimum[n.arrayIndex]),e<o)return[new En(t,e,`${e} is less than the minimum value ${o}`)]}if("maximum"in r){let o=r.maximum;if("array"===Li(r.maximum)&&(o=r.maximum[n.arrayIndex]),e>o)return[new En(t,e,`${e} is greater than the maximum value ${o}`)]}return[]}function mT(n){const t=n.valueSpec,e=Rs(n.value.type);let r,o,s,i={};const a="categorical"!==e&&void 0===n.value.property,c=!a,h="array"===Li(n.value.stops)&&"array"===Li(n.value.stops[0])&&"object"===Li(n.value.stops[0][0]),p=Ll({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(P){if("identity"===e)return[new En(P.key,P.value,'identity function may not have a "stops" property')];let R=[];const F=P.value;return R=R.concat(aR({key:P.key,value:F,valueSpec:P.valueSpec,style:P.style,styleSpec:P.styleSpec,arrayElementValidator:E})),"array"===Li(F)&&0===F.length&&R.push(new En(P.key,F,"array must have at least one stop")),R},default:function(P){return tl({key:P.key,value:P.value,valueSpec:t,style:P.style,styleSpec:P.styleSpec})}}});return"identity"===e&&a&&p.push(new En(n.key,n.value,'missing required property "property"')),"identity"!==e&&!n.value.stops&&p.push(new En(n.key,n.value,'missing required property "stops"')),"exponential"===e&&n.valueSpec.expression&&!rv(n.valueSpec)&&p.push(new En(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(c&&!Z_(n.valueSpec)?p.push(new En(n.key,n.value,"property functions not supported")):a&&!J_(n.valueSpec)&&p.push(new En(n.key,n.value,"zoom functions not supported"))),("categorical"===e||h)&&void 0===n.value.property&&p.push(new En(n.key,n.value,'"property" property is required')),p;function E(P){let R=[];const F=P.value,D=P.key;if("array"!==Li(F))return[new En(D,F,`array expected, ${Li(F)} found`)];if(2!==F.length)return[new En(D,F,`array length 2 expected, length ${F.length} found`)];if(h){if("object"!==Li(F[0]))return[new En(D,F,`object expected, ${Li(F[0])} found`)];if(void 0===F[0].zoom)return[new En(D,F,"object stop key must have zoom")];if(void 0===F[0].value)return[new En(D,F,"object stop key must have value")];if(s&&s>Rs(F[0].zoom))return[new En(D,F[0].zoom,"stop zoom values must appear in ascending order")];Rs(F[0].zoom)!==s&&(s=Rs(F[0].zoom),o=void 0,i={}),R=R.concat(Ll({key:`${D}[0]`,value:F[0],valueSpec:{zoom:{}},style:P.style,styleSpec:P.styleSpec,objectElementValidators:{zoom:sE,value:S}}))}else R=R.concat(S({key:`${D}[0]`,value:F[0],valueSpec:{},style:P.style,styleSpec:P.styleSpec},F));return eE(Ep(F[1]))?R.concat([new En(`${D}[1]`,F[1],"expressions are not allowed in function stops.")]):R.concat(tl({key:`${D}[1]`,value:F[1],valueSpec:t,style:P.style,styleSpec:P.styleSpec}))}function S(P,R){const F=Li(P.value),D=Rs(P.value),j=null!==P.value?P.value:R;if(r){if(F!==r)return[new En(P.key,j,`${F} stop domain type must match previous stop domain type ${r}`)]}else r=F;if("number"!==F&&"string"!==F&&"boolean"!==F)return[new En(P.key,j,"stop domain value must be a number, string, or boolean")];if("number"!==F&&"categorical"!==e){let G=`number expected, ${F} found`;return Z_(t)&&void 0===e&&(G+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new En(P.key,j,G)]}return"categorical"!==e||"number"!==F||isFinite(D)&&Math.floor(D)===D?"categorical"!==e&&"number"===F&&void 0!==o&&D<o?[new En(P.key,j,"stop domain values must appear in ascending order")]:(o=D,"categorical"===e&&D in i?[new En(P.key,j,"stop domain values must be unique")]:(i[D]=!0,[])):[new En(P.key,j,`integer expected, found ${D}`)]}}function em(n){const t=("property"===n.expressionContext?Kg:$w)(Ep(n.value),n.valueSpec);if("error"===t.result)return t.value.map(r=>new En(`${n.key}${r.key}`,n.value,r.message));const e=t.value.expression||t.value._styleExpression.expression;if("property"===n.expressionContext&&"text-font"===n.propertyKey&&!e.outputDefined())return[new En(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===n.expressionContext&&"layout"===n.propertyType&&!W_(e))return[new En(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===n.expressionContext&&!W_(e))return[new En(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&0===n.expressionContext.indexOf("cluster")){if(!Y_(e,["zoom","feature-state"]))return[new En(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===n.expressionContext&&!Z0(e))return[new En(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function lC(n){const t=n.key,e=n.value,r=n.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(Rs(e))&&i.push(new En(t,e,`expected one of [${r.values.join(", ")}], ${JSON.stringify(e)} found`)):-1===Object.keys(r.values).indexOf(Rs(e))&&i.push(new En(t,e,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(e)} found`)),i}function aE(n){return nE(Ep(n.value))?em(G_({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):uC(n)}function uC(n){const t=n.value,e=n.key;if("array"!==Li(t))return[new En(e,t,`array expected, ${Li(t)} found`)];const r=n.styleSpec;let i,o=[];if(t.length<1)return[new En(e,t,"filter array must have at least 1 element")];switch(o=o.concat(lC({key:`${e}[0]`,value:t[0],valueSpec:r.filter_operator,style:n.style,styleSpec:n.styleSpec})),Rs(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Rs(t[1])&&o.push(new En(e,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&o.push(new En(e,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=Li(t[1]),"string"!==i&&o.push(new En(`${e}[1]`,t[1],`string expected, ${i} found`)));for(let s=2;s<t.length;s++)i=Li(t[s]),"$type"===Rs(t[1])?o=o.concat(lC({key:`${e}[${s}]`,value:t[s],valueSpec:r.geometry_type,style:n.style,styleSpec:n.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new En(`${e}[${s}]`,t[s],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let s=1;s<t.length;s++)o=o.concat(uC({key:`${e}[${s}]`,value:t[s],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":i=Li(t[1]),2!==t.length?o.push(new En(e,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new En(`${e}[1]`,t[1],`string expected, ${i} found`));break;case"within":i=Li(t[1]),2!==t.length?o.push(new En(e,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==i&&o.push(new En(`${e}[1]`,t[1],`object expected, ${i} found`))}return o}function vN(n,t){const e=n.key,r=n.style,i=n.styleSpec,o=n.value,s=n.objectKey,a=i[`${t}_${n.layerType}`];if(!a)return[];const c=s.match(/^(.*)-transition$/);if("paint"===t&&c&&a[c[1]]&&a[c[1]].transition)return tl({key:e,value:o,valueSpec:i.transition,style:r,styleSpec:i});const h=n.valueSpec||a[s];if(!h)return[new En(e,o,`unknown property "${s}"`)];let p;if("string"===Li(o)&&Z_(h)&&!h.tokens&&(p=/^{([^}]+)}$/.exec(o)))return[new En(e,o,`"${s}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(p[1])} }\`.`)];const m=[];return"symbol"===n.layerType&&("text-field"===s&&r&&!r.glyphs&&m.push(new En(e,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&Q_(Ep(o))&&"identity"===Rs(o.type)&&m.push(new En(e,o,'"text-font" does not support identity functions'))),m.concat(tl({key:n.key,value:o,valueSpec:h,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:s}))}function yN(n){return vN(n,"paint")}function Hr(n){return vN(n,"layout")}function _N(n){let t=[];const e=n.value,r=n.key,i=n.style,o=n.styleSpec;!e.type&&!e.ref&&t.push(new En(r,e,'either "type" or "ref" is required'));let s=Rs(e.type);const a=Rs(e.ref);if(e.id){const c=Rs(e.id);for(let h=0;h<n.arrayIndex;h++){const p=i.layers[h];Rs(p.id)===c&&t.push(new En(r,e.id,`duplicate layer id "${e.id}", previously used at line ${p.id.__line__}`))}}if("ref"in e){let c;["type","source","source-layer","filter","layout"].forEach(h=>{h in e&&t.push(new En(r,e[h],`"${h}" is prohibited for ref layers`))}),i.layers.forEach(h=>{Rs(h.id)===a&&(c=h)}),c?c.ref?t.push(new En(r,e.ref,"ref cannot reference another ref layer")):s=Rs(c.type):t.push(new En(r,e.ref,`ref layer "${a}" not found`))}else if("background"!==s&&"sky"!==s)if(e.source){const c=i.sources&&i.sources[e.source],h=c&&Rs(c.type);c?"vector"===h&&"raster"===s?t.push(new En(r,e.source,`layer "${e.id}" requires a raster source`)):"raster"===h&&"raster"!==s?t.push(new En(r,e.source,`layer "${e.id}" requires a vector source`)):"vector"!==h||e["source-layer"]?"raster-dem"===h&&"hillshade"!==s?t.push(new En(r,e.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===s&&e.paint&&e.paint["line-gradient"]&&("geojson"!==h||!c.lineMetrics)&&t.push(new En(r,e,`layer "${e.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new En(r,e,`layer "${e.id}" must specify a "source-layer"`)):t.push(new En(r,e.source,`source "${e.source}" not found`))}else t.push(new En(r,e,'missing required property "source"'));return t=t.concat(Ll({key:r,value:e,valueSpec:o.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":()=>[],type:()=>tl({key:`${r}.type`,value:e.type,valueSpec:o.layer.type,style:n.style,styleSpec:n.styleSpec,object:e,objectKey:"type"}),filter:aE,layout:c=>Ll({layer:e,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":h=>Hr(G_({layerType:s},h))}}),paint:c=>Ll({layer:e,key:c.key,value:c.value,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":h=>yN(G_({layerType:s},h))}})}})),t}function ph(n){const t=n.value,e=n.key,r=Li(t);return"string"!==r?[new En(e,t,`string expected, ${r} found`)]:[]}const uR={promoteId:function({key:n,value:t}){if("string"===Li(t))return ph({key:n,value:t});{const e=[];for(const r in t)e.push(...ph({key:`${n}.${r}`,value:t[r]}));return e}}};function cR(n){const t=n.value,e=n.key,r=n.styleSpec,i=n.style;if(!t.type)return[new En(e,t,'"type" is required')];const o=Rs(t.type);let s;switch(o){case"vector":case"raster":case"raster-dem":return s=Ll({key:e,value:t,valueSpec:r[`source_${o.replace("-","_")}`],style:n.style,styleSpec:r,objectElementValidators:uR}),s;case"geojson":if(s=Ll({key:e,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:uR}),t.cluster)for(const a in t.clusterProperties){const[c,h]=t.clusterProperties[a],p="string"==typeof c?[c,["accumulated"],["get",a]]:c;s.push(...em({key:`${e}.${a}.map`,value:h,expressionContext:"cluster-map"})),s.push(...em({key:`${e}.${a}.reduce`,value:p,expressionContext:"cluster-reduce"}))}return s;case"video":return Ll({key:e,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Ll({key:e,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new En(e,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return lC({key:`${e}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function bN(n){const t=n.value,e=n.styleSpec,r=e.light,i=n.style;let o=[];const s=Li(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new En("light",t,`object expected, ${s} found`)]),o;for(const a in t){const c=a.match(/^(.*)-transition$/);o=o.concat(c&&r[c[1]]&&r[c[1]].transition?tl({key:a,value:t[a],valueSpec:e.transition,style:i,styleSpec:e}):r[a]?tl({key:a,value:t[a],valueSpec:r[a],style:i,styleSpec:e}):[new En(a,t[a],`unknown property "${a}"`)])}return o}function wN(n){const t=n.value,e=n.key,r=n.style,i=n.styleSpec,o=i.terrain;let s=[];const a=Li(t);if(void 0===t)return s;if("object"!==a)return s=s.concat([new En("terrain",t,`object expected, ${a} found`)]),s;for(const c in t){const h=c.match(/^(.*)-transition$/);s=s.concat(h&&o[h[1]]&&o[h[1]].transition?tl({key:c,value:t[c],valueSpec:i.transition,style:r,styleSpec:i}):o[c]?tl({key:c,value:t[c],valueSpec:o[c],style:r,styleSpec:i}):[new En(c,t[c],`unknown property "${c}"`)])}if(t.source){const c=r.sources&&r.sources[t.source],h=c&&Rs(c.type);c?"raster-dem"!==h&&s.push(new En(e,t.source,`terrain cannot be used with a source of type ${h}, it only be used with a "raster-dem" source type`)):s.push(new En(e,t.source,`source "${t.source}" not found`))}else s.push(new En(e,t,'terrain is missing required property "source"'));return s}function dR(n){const t=n.value,e=n.style,r=n.styleSpec,i=r.fog;let o=[];const s=Li(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new En("fog",t,`object expected, ${s} found`)]),o;for(const a in t){const c=a.match(/^(.*)-transition$/);o=o.concat(c&&i[c[1]]&&i[c[1]].transition?tl({key:a,value:t[a],valueSpec:r.transition,style:e,styleSpec:r}):i[a]?tl({key:a,value:t[a],valueSpec:i[a],style:e,styleSpec:r}):[new En(a,t[a],`unknown property "${a}"`)])}return o}const hR={"*":()=>[],array:aR,boolean:function(n){const t=n.value,e=n.key,r=Li(t);return"boolean"!==r?[new En(e,t,`boolean expected, ${r} found`)]:[]},number:sE,color:function(n){const t=n.key,e=n.value,r=Li(e);return"string"!==r?[new En(t,e,`color expected, ${r} found`)]:null===SM.parseCSSColor(e)?[new En(t,e,`color expected, "${e}" found`)]:[]},constants:sv,enum:lC,filter:aE,function:mT,layer:_N,object:Ll,source:cR,light:bN,terrain:wN,fog:dR,string:ph,formatted:function(n){return 0===ph(n).length?[]:em(n)},resolvedImage:function(n){return 0===ph(n).length?[]:em(n)}};function tl(n){const t=n.value,e=n.valueSpec,r=n.styleSpec;return e.expression&&Q_(Rs(t))?mT(n):e.expression&&eE(Ep(t))?em(n):e.type&&hR[e.type]?hR[e.type](n):Ll(G_({},n,{valueSpec:e.type?r[e.type]:e}))}function SN(n){const t=n.value,e=n.key,r=ph(n);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new En(e,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new En(e,t,'"glyphs" url must include a "{range}" token'))),r}function gh(n,t=Ya){let e=[];return e=e.concat(tl({key:"",value:n,valueSpec:t.$root,styleSpec:t,style:n,objectElementValidators:{glyphs:SN,"*":()=>[]}})),n.constants&&(e=e.concat(sv({key:"constants",value:n.constants,style:n,styleSpec:t}))),fR(e)}function fR(n){return[].concat(n).sort((t,e)=>t.line-e.line)}function bp(n){return function(...t){return fR(n.apply(this,t))}}gh.source=bp(cR),gh.light=bp(bN),gh.terrain=bp(wN),gh.fog=bp(dR),gh.layer=bp(_N),gh.filter=bp(aE),gh.paintProperty=bp(yN),gh.layoutProperty=bp(Hr);var xN=N_(function(n,t){var e=function(){var r=function(F,D,j,G){for(j=j||{},G=F.length;G--;j[F[G]]=D);return j},i=[1,12],o=[1,13],s=[1,9],a=[1,10],c=[1,11],h=[1,14],p=[1,15],m=[14,18,22,24],E=[18,22],S=[22,24],x={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(D,j,G,X,J,$,le){var ie=$.length-1;switch(J){case 1:this.$=new String(D.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(D),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=$[ie-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=$[ie-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[$[ie-2],$[ie]];break;case 16:this.$={},this.$[$[ie][0]]=$[ie][1];break;case 17:this.$=$[ie-2],$[ie-2][$[ie][0]]=$[ie][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[$[ie]];break;case 21:this.$=$[ie-2],$[ie-2].push($[ie])}},table:[{3:5,4:i,5:6,6:o,7:3,8:s,9:4,10:a,11:c,12:1,13:2,15:7,16:8,17:h,23:p},{1:[3]},{14:[1,16]},r(m,[2,7]),r(m,[2,8]),r(m,[2,9]),r(m,[2,10]),r(m,[2,11]),r(m,[2,12]),r(m,[2,3]),r(m,[2,4]),r(m,[2,5]),r([14,18,21,22,24],[2,1]),r(m,[2,2]),{3:20,4:i,18:[1,17],19:18,20:19},{3:5,4:i,5:6,6:o,7:3,8:s,9:4,10:a,11:c,13:23,15:7,16:8,17:h,23:p,24:[1,21],25:22},{1:[2,6]},r(m,[2,13]),{18:[1,24],22:[1,25]},r(E,[2,16]),{21:[1,26]},r(m,[2,18]),{22:[1,28],24:[1,27]},r(S,[2,20]),r(m,[2,14]),{3:20,4:i,20:29},{3:5,4:i,5:6,6:o,7:3,8:s,9:4,10:a,11:c,13:30,15:7,16:8,17:h,23:p},r(m,[2,19]),{3:5,4:i,5:6,6:o,7:3,8:s,9:4,10:a,11:c,13:31,15:7,16:8,17:h,23:p},r(E,[2,17]),r(E,[2,15]),r(S,[2,21])],defaultActions:{16:[2,6]},parseError:function(D,j){if(!j.recoverable)throw new Error(D);this.trace(D)},parse:function(D){var j=this,G=[0],X=[null],J=[],$=this.table,le="",ie=0,Fe=0,Ce=2,$e=1,ot=J.slice.call(arguments,1),st=Object.create(this.lexer),dt={yy:{}};for(var kt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,kt)&&(dt.yy[kt]=this.yy[kt]);st.setInput(D,dt.yy),dt.yy.lexer=st,dt.yy.parser=this,void 0===st.yylloc&&(st.yylloc={});var Qe=st.yylloc;J.push(Qe);var Zt=st.options&&st.options.ranges;function gt(){var $n;return"number"!=typeof($n=st.lex()||$e)&&($n=j.symbols_[$n]||$n),$n}this.parseError="function"==typeof dt.yy.parseError?dt.yy.parseError:Object.getPrototypeOf(this).parseError;for(var Re,Xe,Oe,qt,$t,dn,ft,Pt={};;){if(this.defaultActions[Xe=G[G.length-1]]?Oe=this.defaultActions[Xe]:(null==Re&&(Re=gt()),Oe=$[Xe]&&$[Xe][Re]),void 0===Oe||!Oe.length||!Oe[0]){var Mn="";for($t in ft=[],$[Xe])this.terminals_[$t]&&$t>Ce&&ft.push("'"+this.terminals_[$t]+"'");Mn=st.showPosition?"Parse error on line "+(ie+1)+":\n"+st.showPosition()+"\nExpecting "+ft.join(", ")+", got '"+(this.terminals_[Re]||Re)+"'":"Parse error on line "+(ie+1)+": Unexpected "+(Re==$e?"end of input":"'"+(this.terminals_[Re]||Re)+"'"),this.parseError(Mn,{text:st.match,token:this.terminals_[Re]||Re,line:st.yylineno,loc:Qe,expected:ft})}if(Oe[0]instanceof Array&&Oe.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Xe+", token: "+Re);switch(Oe[0]){case 1:G.push(Re),X.push(st.yytext),J.push(st.yylloc),G.push(Oe[1]),Re=null,Fe=st.yyleng,le=st.yytext,ie=st.yylineno,Qe=st.yylloc;break;case 2:if(Pt.$=X[X.length-(dn=this.productions_[Oe[1]][1])],Pt._$={first_line:J[J.length-(dn||1)].first_line,last_line:J[J.length-1].last_line,first_column:J[J.length-(dn||1)].first_column,last_column:J[J.length-1].last_column},Zt&&(Pt._$.range=[J[J.length-(dn||1)].range[0],J[J.length-1].range[1]]),void 0!==(qt=this.performAction.apply(Pt,[le,Fe,ie,dt.yy,Oe[1],X,J].concat(ot))))return qt;dn&&(G=G.slice(0,-1*dn*2),X=X.slice(0,-1*dn),J=J.slice(0,-1*dn)),G.push(this.productions_[Oe[1]][0]),X.push(Pt.$),J.push(Pt._$),G.push($[G[G.length-2]][G[G.length-1]]);break;case 3:return!0}}return!0}};function R(){this.yy={}}return x.lexer={EOF:1,parseError:function(j,G){if(!this.yy.parser)throw new Error(j);this.yy.parser.parseError(j,G)},setInput:function(D,j){return this.yy=j||this.yy||{},this._input=D,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var D=this._input[0];return this.yytext+=D,this.yyleng++,this.offset++,this.match+=D,this.matched+=D,D.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),D},unput:function(D){var j=D.length,G=D.split(/(?:\r\n?|\n)/g);this._input=D+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-j),this.offset-=j;var X=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),G.length-1&&(this.yylineno-=G.length-1);var J=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:G?(G.length===X.length?this.yylloc.first_column:0)+X[X.length-G.length].length-G[0].length:this.yylloc.first_column-j},this.options.ranges&&(this.yylloc.range=[J[0],J[0]+this.yyleng-j]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(D){this.unput(this.match.slice(D))},pastInput:function(){var D=this.matched.substr(0,this.matched.length-this.match.length);return(D.length>20?"...":"")+D.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var D=this.match;return D.length<20&&(D+=this._input.substr(0,20-D.length)),(D.substr(0,20)+(D.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var D=this.pastInput(),j=new Array(D.length+1).join("-");return D+this.upcomingInput()+"\n"+j+"^"},test_match:function(D,j){var G,X,J;if(this.options.backtrack_lexer&&(J={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(J.yylloc.range=this.yylloc.range.slice(0))),(X=D[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=X.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:X?X[X.length-1].length-X[X.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+D[0].length},this.yytext+=D[0],this.match+=D[0],this.matches=D,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(D[0].length),this.matched+=D[0],G=this.performAction.call(this,this.yy,this,j,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),G)return G;if(this._backtrack){for(var $ in J)this[$]=J[$];return!1}return!1},next:function(){if(this.done)return this.EOF;var D,j,G,X;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var J=this._currentRules(),$=0;$<J.length;$++)if((G=this._input.match(this.rules[J[$]]))&&(!j||G[0].length>j[0].length)){if(j=G,X=$,this.options.backtrack_lexer){if(!1!==(D=this.test_match(G,J[$])))return D;if(this._backtrack){j=!1;continue}return!1}if(!this.options.flex)break}return j?!1!==(D=this.test_match(j,J[X]))&&D:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(j){this.conditionStack.push(j)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(j){return(j=this.conditionStack.length-1-Math.abs(j||0))>=0?this.conditionStack[j]:"INITIAL"},pushState:function(j){this.begin(j)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(j,G,X,J){switch(X){case 0:break;case 1:return 6;case 2:return G.yytext=G.yytext.substr(1,G.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},R.prototype=x,x.Parser=R,new R}();void 0!==cM&&(t.parser=e,t.Parser=e.Parser,t.parse=function(){return e.parse.apply(e,arguments)})});function av(n,t=Ya){let e=n;try{e=function(n){if(n instanceof String||"string"==typeof n||n instanceof Buffer)try{return xN.parse(n.toString())}catch(t){throw new gT(t)}return n}(e)}catch(r){return[r]}return gh(e,t)}new Set(["vector","raster","raster-dem"]);const vR_isExpression=eE,vR_createPropertyExpression=Kg,yR_convertFunction=function(n,t){let e=n.stops;if(!e)return function(n,t){const e=["get",n.property];if(void 0===n.default)return"string"===t.type?["string",e]:e;if("enum"===t.type)return["match",e,Object.keys(t.values),e,n.default];{const r=["color"===t.type?"to-color":t.type,e,iv(n.default)];return"array"===t.type&&r.splice(1,0,t.value,t.length||null),r}}(n,t);const r=e&&"object"==typeof e[0][0],i=r||void 0!==n.property,o=r||!i;return e=e.map(s=>!i&&t.tokens&&"string"==typeof s[1]?[s[0],tR(s[1])]:[s[0],iv(s[1])]),r?function(n,t,e){const r={},i={},o=[];for(let a=0;a<e.length;a++){const c=e[a],h=c[0].zoom;void 0===r[h]&&(r[h]={zoom:h,type:n.type,property:n.property,default:n.default},i[h]=[],o.push(h)),i[h].push([c[0].value,c[1]])}if("exponential"===oC({},t)){const a=[dT(n),["linear"],["zoom"]];for(const c of o)Jg(a,c,iC(r[c],t,i[c]),!1);return a}{const a=["step",["zoom"]];for(const c of o)Jg(a,c,iC(r[c],t,i[c]),!0);return tE(a),a}}(n,t,e):o?function(n,t,e,r=["zoom"]){const i=oC(n,t);let o,s=!1;if("interval"===i)o=["step",r],s=!0;else{if("exponential"!==i)throw new Error(`Unknown zoom function type "${i}"`);{const a=void 0!==n.base?n.base:1;o=[dT(n),1===a?["linear"]:["exponential",a],r]}}for(const a of e)Jg(o,a[0],a[1],s);return tE(o),o}(n,t,e):iC(n,t,e)},yR_isFunction=Q_;function _T(n){return n*Math.PI/180}av.parsed=av,av.latest=av;var _R=function(){for(var n=[],t=78271.51696402048;n.length<=24;t/=2)n.push(t);return n}();function tm(n,t){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(n,t);var e=document.createElement("canvas");return e.width=n,e.height=t,e}var ET,ER=Array(256).join("\u200a");function bR(n,t){if(t>=.05){for(var e="",r=n.split("\n"),i=ER.slice(0,Math.round(t/.1)),o=0,s=r.length;o<s;++o)o>0&&(e+="\n"),e+=r[o].split("").join(i);return e}return n}function wR(){return ET||(ET=tm(1,1).getContext("2d")),ET}function nm(n,t){return wR().measureText(n).width+(n.length-1)*t}var bT={};function wT(n,t,e,r){if(-1!==n.indexOf("\n")){for(var i=n.split("\n"),o=[],s=0,a=i.length;s<a;++s)o.push(wT(i[s],t,e,r));return o.join("\n")}var c=e+","+t+","+n+","+r,h=bT[c];if(!h){var p=n.split(" ");if(p.length>1){var m=wR();m.font=t;var S=m.measureText("M").width*e,x="";for(o=[],s=0,a=p.length;s<a;++s){var P=p[s],R=x+(x?" ":"")+P;nm(R,r)<=S?x=R:(x&&o.push(x),x=P)}for(x&&o.push(x),s=0,a=o.length;s<a&&a>1;++s){var F=o[s];if(nm(F,r)<.35*S){var D=s>0?nm(o[s-1],r):1/0,j=s<a-1?nm(o[s+1],r):1/0;o.splice(s,1),a-=1,D<j?(o[s-1]+=" "+F,s-=1):o[s]=F+" "+o[s]}}for(s=0,a=o.length-1;s<a;++s){var G=o[s],X=o[s+1];if(nm(G,r)>.7*S&&nm(X,r)<.6*S){var J=G.split(" "),$=J.pop();nm($,r)<.2*S&&(o[s]=J.join(" "),o[s+1]=$+" "+X),a-=1}}h=o.join("\n")}else h=n;h=bR(h,r),bT[c]=h}return h}Ey&&mn(Ey,"clear",function(){bT={}});var fC,xT,MN=yR_isFunction,RN=yR_convertFunction,Q5=vR_isExpression,$5=vR_createPropertyExpression,e4={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},CT={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},ST={},dC={zoom:0},hC={};function ti(n,t,e,r,i){var o=n.id;hC[o]||(hC[o]={});var s=hC[o];if(!s[e]){var a=(n[t]||ST)[e],c=Ya[t+"_"+n.type][e];void 0===a&&(a=c.default);var h=Q5(a);if(!h&&MN(a)&&(a=RN(a,c),h=!0),h){var p=function(n,t){var e=$5(n,t);if("error"===e.result)throw new Error(e.value.map(function(r){return r.key+": "+r.message}).join(", "));return e.value}(a,c);s[e]=p.evaluate.bind(p)}else"color"==c.type&&(a=Ji.parse(a)),s[e]=function(){return a}}return dC.zoom=r,s[e](dC,i)}var lv={};function jc(n,t){if(n){if(0===n.a||0===t)return;var e=n.a;return t=void 0===t?1:t,"rgba("+Math.round(255*n.r/e)+","+Math.round(255*n.g/e)+","+Math.round(255*n.b/e)+","+e*t+")"}return n}var Nl=/^([^]*)\{(.*)\}([^]*)$/;function pC(n,t){var e;do{(e=n.match(Nl))&&(n=e[1]+(t[e[2]]||"")+e[3])}while(e);return n}function LN(n,t,e,r,i,o,s){if(void 0===r&&(r=_R),"string"==typeof t&&(t=JSON.parse(t)),8!=t.version)throw new Error("glStyle version 8 required.");var a,c;if(o)if("undefined"!=typeof Image){var h=new Image;h.crossOrigin="anonymous",h.onload=function(){a=h,c=[h.width,h.height],n.changed(),h.onload=null},h.src=o}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var p=self;p.postMessage({action:"loadImage",src:o}),p.addEventListener("message",function(st){"imageLoaded"===st.data.action&&st.data.src===o&&(c=[(a=st.data.image).width,a.height])})}for(var x,m=function(n){n=n.slice();const t=Object.create(null);for(let e=0;e<n.length;e++)t[n[e].id]=n[e];for(let e=0;e<n.length;e++)"ref"in n[e]&&(n[e]=pN(n[e],t[n[e].ref]));return n}(t.layers),E={},S=[],P=0,R=m.length;P<R;++P){var F=m[P],D=F.id;if("string"==typeof e&&F.source==e||-1!==e.indexOf(D)){var j=F["source-layer"];if(!x){var G=t.sources[x=F.source];if(!G)throw new Error('Source "'+x+'" is not defined');var X=G.type;if("vector"!==X&&"geojson"!==X)throw new Error('Source "'+x+'" is not of type "vector" or "geojson", but "'+X+'"')}var J=E[j];J||(E[j]=J=[]),J.push({layer:F,index:P}),S.push(D)}delete hC[D],delete lv[D]}var $=new op,le=new md,ie={},Fe={},Ce=[],$e=function(ot,st){var dt=ot.getProperties(),kt=E[dt.layer];if(kt){var Qe=r.indexOf(st);-1==Qe&&(Qe=function(n,t){for(var e=0,r=t.length;e<r;++e)if(t[e]<n&&e+1<r){var o=t[e]/t[e+1];return e+Math.log(t[e]/n)/Math.log(o)}return r-1}(st,r));for(var Zt=e4[ot.getGeometry().getType()],gt={properties:dt,type:Zt},Re=-1,Oe=function($t,dn){var Pn=kt[$t],ft=Pn.layer,$n=ft.layout||ST,kn=ft.paint||ST;if("none"===$n.visibility||"minzoom"in ft&&Qe<ft.minzoom||"maxzoom"in ft&&Qe>=ft.maxzoom)return"continue";var ai=ft.filter;if(!ai||function(n,t,e,r){return n in lv||(lv[n]=function(n){if(null==n)return{filter:()=>!0,needGeometry:!1};nE(n)||(n=Qg(n));const t=$w(n,nR);if("error"===t.result)throw new Error(t.value.map(e=>`${e.key}: ${e.message}`).join(", "));return{filter:(r,i,o)=>t.value.evaluate(r,i,{},o),needGeometry:rE(n)}}(t).filter),dC.zoom=r,lv[n](dC,e)}(ft.id,ai,gt,Qe)){ft;var yr=void 0,Mr=void 0,Ui=void 0,Wr=void 0,Ns=void 0,Nt=void 0,So=Pn.index;if(3==Zt&&("fill"==ft.type||"fill-extrusion"==ft.type))if(Mr=ti(ft,"paint",ft.type+"-opacity",Qe,gt),ft.type+"-pattern"in kn){var os=ti(ft,"paint",ft.type+"-pattern",Qe,gt);if(os){var ts="string"==typeof os?pC(os,dt):os.toString();if(a&&i&&i[ts]){++Re,(!(Nt=Ce[Re])||!Nt.getFill()||Nt.getStroke()||Nt.getText())&&(Nt=new Wh({fill:new md}),Ce[Re]=Nt),Ui=Nt.getFill(),Nt.setZIndex(So);var Ss=Fe[$i=ts+"."+Mr];Ss||((Uo=(mo=tm((Xn=i[ts]).width,Xn.height)).getContext("2d")).globalAlpha=Mr,Uo.drawImage(a,Xn.x,Xn.y,Xn.width,Xn.height,0,0,Xn.width,Xn.height),Ss=Uo.createPattern(mo,"repeat"),Fe[$i]=Ss),Ui.setColor(Ss)}}}else(yr=jc(ti(ft,"paint",ft.type+"-color",Qe,gt),Mr))&&(ft.type+"-outline-color"in kn&&(Ns=jc(ti(ft,"paint",ft.type+"-outline-color",Qe,gt),Mr)),Ns||(Ns=yr),++Re,(!(Nt=Ce[Re])||!(Nt.getFill()&&Nt.getStroke())||Nt.getText())&&(Nt=new Wh({fill:new md,stroke:new op}),Ce[Re]=Nt),(Ui=Nt.getFill()).setColor(yr),(Wr=Nt.getStroke()).setColor(Ns),Wr.setWidth(1),Nt.setZIndex(So));if(1!=Zt&&"line"==ft.type){yr=!("line-pattern"in kn)&&"line-color"in kn?jc(ti(ft,"paint","line-color",Qe,gt),ti(ft,"paint","line-opacity",Qe,gt)):void 0;var zs=ti(ft,"paint","line-width",Qe,gt);yr&&zs>0&&(++Re,(!(Nt=Ce[Re])||!Nt.getStroke()||Nt.getFill()||Nt.getText())&&(Nt=new Wh({stroke:new op}),Ce[Re]=Nt),(Wr=Nt.getStroke()).setLineCap(ti(ft,"layout","line-cap",Qe,gt)),Wr.setLineJoin(ti(ft,"layout","line-join",Qe,gt)),Wr.setMiterLimit(ti(ft,"layout","line-miter-limit",Qe,gt)),Wr.setColor(yr),Wr.setWidth(zs),Wr.setLineDash(kn["line-dasharray"]?ti(ft,"paint","line-dasharray",Qe,gt).map(function(P5){return P5*zs}):null),Nt.setZIndex(So))}var co=!1,Kn=null,ps=0,vo=void 0,Vr=void 0,li=void 0;if((1==Zt||2==Zt)&&"icon-image"in $n){var Mo=ti(ft,"layout","icon-image",Qe,gt);if(Mo){vo="string"==typeof Mo?pC(Mo,dt):Mo.toString();var Qs=void 0;if(a&&i&&i[vo]){var xs=ti(ft,"layout","icon-rotation-alignment",Qe,gt);if(2==Zt){var ss=ot.getGeometry();if(ss.getFlatMidpoint||ss.getFlatMidpoints){var Fa=ss.getExtent();if(Math.sqrt(Math.max(Math.pow((Fa[2]-Fa[0])/st,2),Math.pow((Fa[3]-Fa[1])/st,2)))>150){var as="MultiLineString"===ss.getType()?ss.getFlatMidpoints():ss.getFlatMidpoint();if(xT||(xT=new Ql("Point",fC=[NaN,NaN],[],{},null)),Qs=xT,fC[0]=as[0],fC[1]=as[1],"line"===(ua=ti(ft,"layout","symbol-placement",Qe,gt))&&"map"===xs)for(var gs=ss.getStride(),Si=ss.getFlatCoordinates(),Vo=0,xf=Si.length-gs;Vo<xf;Vo+=gs){var Wl=Si[Vo],Yl=Si[Vo+1],ql=Si[Vo+gs],Ea=Si[Vo+gs+1],Fs=Math.min(Wl,ql),lu=Math.min(Yl,Ea),Au=Math.max(Wl,ql),cl=Math.max(Yl,Ea);if(as[0]>=Fs&&as[0]<=Au&&as[1]>=lu&&as[1]<=cl){ps=Math.atan2(Yl-Ea,ql-Wl);break}}}}}if(2!==Zt||Qs){var ms=ti(ft,"layout","icon-size",Qe,gt),zo=void 0!==kn["icon-color"]?ti(ft,"paint","icon-color",Qe,gt):null;if(!zo||0!==zo.a){var $i=vo+"."+ms;if(null!==zo&&($i+="."+zo),!(Vr=ie[$i])){var Xn=i[vo];if(null!==zo){var mo,Uo;(Uo=(mo=tm(Xn.width,Xn.height)).getContext("2d")).drawImage(a,Xn.x,Xn.y,Xn.width,Xn.height,0,0,Xn.width,Xn.height);for(var ls=Uo.getImageData(0,0,mo.width,mo.height),ca=0,oy=ls.data.length;ca<oy;ca+=4){var Gs=zo.a;0!==Gs&&(ls.data[ca]=255*zo.r/Gs,ls.data[ca+1]=255*zo.g/Gs,ls.data[ca+2]=255*zo.b/Gs),ls.data[ca+3]=Gs}Uo.putImageData(ls,0,0),Vr=new u_({img:mo,imgSize:[mo.width,mo.height],scale:ms/Xn.pixelRatio}),ie[$i]=Vr}else Vr=new u_({img:a,imgSize:c,size:[Xn.width,Xn.height],offset:[Xn.x,Xn.y],rotateWithView:"map"===xs,scale:ms/Xn.pixelRatio}),ie[$i]=Vr}}Vr&&(++Re,(!(Nt=Ce[Re])||!Nt.getImage()||Nt.getFill()||Nt.getStroke())&&(Nt=new Wh,Ce[Re]=Nt),Nt.setGeometry(Qs),Vr.setRotation(ps+_T(ti(ft,"layout","icon-rotate",Qe,gt))),Vr.setOpacity(ti(ft,"paint","icon-opacity",Qe,gt)),Vr.setAnchor(CT[ti(ft,"layout","icon-anchor",Qe,gt)]),Nt.setImage(Vr),Kn=Nt.getText(),Nt.setText(void 0),Nt.setZIndex(So),co=!0,li=!1)}else li=!0}}}if(1==Zt&&"circle-radius"in kn){++Re,(!(Nt=Ce[Re])||!Nt.getImage()||Nt.getFill()||Nt.getStroke())&&(Nt=new Wh,Ce[Re]=Nt);var Xl=ti(ft,"paint","circle-radius",Qe,gt),Tf=jc(ti(ft,"paint","circle-stroke-color",Qe,gt),ti(ft,"paint","circle-stroke-opacity",Qe,gt)),Dm=jc(ti(ft,"paint","circle-color",Qe,gt),ti(ft,"paint","circle-opacity",Qe,gt)),eg=ti(ft,"paint","circle-stroke-width",Qe,gt),bI=Xl+"."+Tf+"."+Dm+"."+eg;(Vr=ie[bI])||(Vr=new Ml({radius:Xl,stroke:Tf&&eg>0?new op({width:eg,color:Tf}):void 0,fill:Dm?new md({color:Dm}):void 0}),ie[bI]=Vr),Nt.setImage(Vr),Kn=Nt.getText(),Nt.setText(void 0),Nt.setGeometry(void 0),Nt.setZIndex(So),co=!0}var dl=void 0;if("text-field"in $n&&(dl=pC(ti(ft,"layout","text-field",Qe,gt).toString(),dt).trim(),Mr=ti(ft,"paint","text-opacity",Qe,gt)),dl&&Mr&&!li){co||(++Re,(!(Nt=Ce[Re])||!Nt.getText()||Nt.getFill()||Nt.getStroke())&&(Nt=new Wh,Ce[Re]=Nt),Nt.setImage(void 0),Nt.setGeometry(void 0)),Nt.getText()||Nt.setText(Kn||new ZA({padding:[2,2,2,2]})),Kn=Nt.getText();var Wd=Math.round(ti(ft,"layout","text-size",Qe,gt)),wI=ti(ft,"layout","text-font",Qe,gt),ab=ti(ft,"layout","text-line-height",Qe,gt),CI=Bw(s?s(wI):wI,Wd,ab),SI=$n["text-transform"];"uppercase"==SI?dl=dl.toUpperCase():"lowercase"==SI&&(dl=dl.toLowerCase());var x5=ti(ft,"layout","text-max-width",Qe,gt),xI=ti(ft,"layout","text-letter-spacing",Qe,gt),TI=2==Zt?bR(dl,xI):wT(dl,CI,x5,xI);Kn.setText(TI),Kn.setFont(CI),Kn.setRotation(_T(ti(ft,"layout","text-rotate",Qe,gt)));var Lm=ti(ft,"layout","text-anchor",Qe,gt),ua=co||1==Zt?"point":ti(ft,"layout","symbol-placement",Qe,gt);Kn.setPlacement(ua);var fc=ti(ft,"paint","text-halo-width",Qe,gt),PI=ti(ft,"layout","text-offset",Qe,gt),II=ti(ft,"paint","text-translate",Qe,gt),lb=0,ub=0;if("point"==ua){var cb="center";-1!==Lm.indexOf("left")?(cb="left",ub=fc):-1!==Lm.indexOf("right")&&(cb="right",ub=-fc),Kn.setTextAlign(cb);var T5=ti(ft,"layout","text-rotation-alignment",Qe,gt);Kn.setRotateWithView("map"==T5)}else Kn.setMaxAngle(_T(ti(ft,"layout","text-max-angle",Qe,gt))*dl.length/TI.length),Kn.setTextAlign(),Kn.setRotateWithView(!1);var db="middle";0==Lm.indexOf("bottom")?(db="bottom",lb=-fc-.5*(ab-1)*Wd):0==Lm.indexOf("top")&&(db="top",lb=fc+.5*(ab-1)*Wd),Kn.setTextBaseline(db),Kn.setOffsetX(PI[0]*Wd+ub+II[0]),Kn.setOffsetY(PI[1]*Wd+lb+II[1]),le.setColor(jc(ti(ft,"paint","text-color",Qe,gt),Mr)),Kn.setFill(le);var AI=jc(ti(ft,"paint","text-halo-color",Qe,gt),Mr);if(AI){$.setColor(AI);var MI=.5*Wd;$.setWidth((fc*=2)<=MI?fc:MI),Kn.setStroke($)}else Kn.setStroke(void 0);var sy=ti(ft,"layout","text-padding",Qe,gt),Pf=Kn.getPadding();sy!==Pf[0]&&(Pf[0]=sy,Pf[1]=sy,Pf[2]=sy,Pf[3]=sy),Nt.setZIndex(So)}}},qt=0,Pt=kt.length;qt<Pt;++qt)Oe(qt);if(Re>-1)return Ce.length=Re+1,Ce}};return n.setStyle($e),n.set("mapbox-source",x),n.set("mapbox-layers",S),$e}var gC,TT=ee(1249),SR=ee.n(TT),kN=/font-family: ?([^;]*);/,NN=/("|')/g;function xR(n){if(!gC){gC={};for(var t=document.styleSheets,e=0,r=t.length;e<r;++e){var i=t[e];try{var o=i.rules||i.cssRules;if(o)for(var s=0,a=o.length;s<a;++s){var c=o[s];if(5==c.type){var h=c.cssText.match(kN);gC[h[1].replace(NN,"")]=!0}}}catch(p){}}}return n in gC}var TR={},t4=TT.getNames();function FN(n){var t=n.toString();if(t in TR)return n;for(var e=n.map(function(h){var p=Bw(h,1).split(" ");return[p.slice(3).join(" ").replace(/"/g,""),p[1]+p[0]]}),r=0,i=e.length;r<i;++r){var o=e[r],s=o[0];if(!xR(s)&&-1!==t4.indexOf(s)){var a="https://fonts.googleapis.com/css?family="+s.replace(/ /g,"+")+":"+o[1];if(!document.querySelector('link[href="'+a+'"]')){var c=document.createElement("link");c.href=a,c.rel="stylesheet",document.head.appendChild(c)}}}return TR[t]=!0,n}var PR=/^(.*)(\?.*)$/;function IR(n,t,e){var r=(n=function(n,t){return t&&0===n.indexOf(".")&&(n=t+n),n}(n,t)).match(PR);return r?r[1]+e+(r.length>2?r[2]:""):n+e}new Mt;const wp=JSON.parse('{"i8":"3.1.0","hT":"02/08/2021"}');ee(7594),ee(5277),ee(8745),ee(2984),ee(1025),ee(9312),ee(5716),ee(5796),ee(4506),ee(7174),ee(2904),ee(2950),ee(1852),ee(3425),ee(9966),ee(4474),ee(2197),ee(5767),ee(7947),ee(801),ee(2606),ee(7254),ee(9905),ee(4887),ee(8263),ee(2405),ee(5895),ee(9874),ee(8009),ee(4537),ee(4497),ee(2224),ee(4553),ee(7586),ee(6692);function Ir(){return function(){throw new Error("Unimplemented abstract method.")}()}var jR=0;function Lr(n){return n.ol_uid||(n.ol_uid=String(++jR))}var qa="function"==typeof Object.assign?Object.assign:function(n,t){if(null==n)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(n),r=1,i=arguments.length;r<i;++r){var o=arguments[r];if(null!=o)for(var s in o)o.hasOwnProperty(s)&&(e[s]=o[s])}return e};function Ia(n){for(var t in n)delete n[t]}var rm="function"==typeof Object.values?Object.values:function(n){var t=[];for(var e in n)t.push(n[e]);return t};function uE(n){var t;for(t in n)return!1;return!t}function Fl(n,t,e,r,i){if(r&&r!==n&&(e=e.bind(r)),i){var o=e;e=function(){n.removeEventListener(t,e),o.apply(this,arguments)}}var s={target:n,type:t,listener:e};return n.addEventListener(t,e),s}function MT(n,t,e,r){return Fl(n,t,e,r,!0)}function ya(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Ia(n))}const RT=function(){function n(){this.disposed_=!1}return n.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},n.prototype.disposeInternal=function(){},n}();function sf(n,t){return n>t?1:n<t?-1:0}function Ku(n,t){return n.indexOf(t)>=0}function VR(n,t,e){var r=n.length;if(n[0]<=t)return 0;if(t<=n[r-1])return r-1;var i=void 0;if(e>0){for(i=1;i<r;++i)if(n[i]<t)return i-1}else if(e<0){for(i=1;i<r;++i)if(n[i]<=t)return i}else for(i=1;i<r;++i){if(n[i]==t)return i;if(n[i]<t)return n[i-1]-t<t-n[i]?i-1:i}return r-1}function OT(n,t,e){for(;t<e;){var r=n[t];n[t]=n[e],n[e]=r,++t,--e}}function Qo(n,t){for(var e=Array.isArray(t)?t:[t],r=e.length,i=0;i<r;i++)n[n.length]=e[i]}function af(n,t){var e=n.length;if(e!==t.length)return!1;for(var r=0;r<e;r++)if(n[r]!==t[r])return!1;return!0}function uv(){return!0}function cE(){return!1}function Cp(){}const Rd=function(){function n(t){this.type=t,this.target=null}return n.prototype.preventDefault=function(){this.propagationStopped=!0},n.prototype.stopPropagation=function(){this.propagationStopped=!0},n}();var HR=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const cv=function(n){function t(e){var r=n.call(this)||this;return r.eventTarget_=e,r.pendingRemovals_={},r.dispatching_={},r.listeners_={},r}return HR(t,n),t.prototype.addEventListener=function(e,r){if(e&&r){var i=this.listeners_[e];i||(this.listeners_[e]=i=[]),-1===i.indexOf(r)&&i.push(r)}},t.prototype.dispatchEvent=function(e){var r="string"==typeof e?new Rd(e):e,i=r.type;r.target||(r.target=this.eventTarget_||this);var s,o=this.listeners_[i];if(o){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var a=0,c=o.length;a<c;++a)if(!1===(s="handleEvent"in o[a]?o[a].handleEvent(r):o[a].call(this,r))||r.propagationStopped){s=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var h=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];h--;)this.removeEventListener(i,Cp);delete this.dispatching_[i]}return s}},t.prototype.disposeInternal=function(){Ia(this.listeners_)},t.prototype.getListeners=function(e){return this.listeners_[e]},t.prototype.hasListener=function(e){return e?e in this.listeners_:Object.keys(this.listeners_).length>0},t.prototype.removeEventListener=function(e,r){var i=this.listeners_[e];if(i){var o=i.indexOf(r);-1!==o&&(e in this.pendingRemovals_?(i[o]=Cp,++this.pendingRemovals_[e]):(i.splice(o,1),0===i.length&&delete this.listeners_[e]))}},t}(RT);var YR=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function Aa(n){if(Array.isArray(n))for(var t=0,e=n.length;t<e;++t)ya(n[t]);else ya(n)}const XR=function(n){function t(){var e=n.call(this)||this;return e.revision_=0,e}return YR(t,n),t.prototype.changed=function(){++this.revision_,this.dispatchEvent("change")},t.prototype.getRevision=function(){return this.revision_},t.prototype.on=function(e,r){if(Array.isArray(e)){for(var i=e.length,o=new Array(i),s=0;s<i;++s)o[s]=Fl(this,e[s],r);return o}return Fl(this,e,r)},t.prototype.once=function(e,r){if(Array.isArray(e)){for(var i=e.length,o=new Array(i),s=0;s<i;++s)o[s]=MT(this,e[s],r);return o}return MT(this,e,r)},t.prototype.un=function(e,r){if(Array.isArray(e))for(var i=0,o=e.length;i<o;++i)this.removeEventListener(e[i],r);else this.removeEventListener(e,r)},t}(cv);var kT=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),KR=function(n){function t(e,r,i){var o=n.call(this,e)||this;return o.key=r,o.oldValue=i,o}return kT(t,n),t}(Rd),ZR=function(n){function t(e){var r=n.call(this)||this;return Lr(r),r.values_={},void 0!==e&&r.setProperties(e),r}return kT(t,n),t.prototype.get=function(e){var r;return this.values_.hasOwnProperty(e)&&(r=this.values_[e]),r},t.prototype.getKeys=function(){return Object.keys(this.values_)},t.prototype.getProperties=function(){return qa({},this.values_)},t.prototype.notify=function(e,r){var i;i=Vc(e),this.dispatchEvent(new KR(i,e,r)),this.dispatchEvent(new KR(i="propertychange",e,r))},t.prototype.set=function(e,r,i){if(i)this.values_[e]=r;else{var o=this.values_[e];this.values_[e]=r,o!==r&&this.notify(e,o)}},t.prototype.setProperties=function(e,r){for(var i in e)this.set(i,e[i],r)},t.prototype.unset=function(e,r){if(e in this.values_){var i=this.values_[e];delete this.values_[e],r||this.notify(e,i)}},t}(XR),wC={};function Vc(n){return wC.hasOwnProperty(n)?wC[n]:wC[n]="change:"+n}const mh=ZR;var lF="ol-collapsed",w4=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),uF=["style","variant","weight","size","lineHeight","family"],cF=function(n){var t=n.match(w4);if(!t)return null;for(var e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,i=uF.length;r<i;++r){var o=t[r+1];void 0!==o&&(e[uF[r]]=o)}return e.families=e.family.split(/,\s?/),e},dE="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",NT=(dE.indexOf("firefox"),-1!==dE.indexOf("safari")&&dE.indexOf("chrom"),-1!==dE.indexOf("webkit")&&dE.indexOf("edge"),dE.indexOf("macintosh"),"undefined"!=typeof devicePixelRatio&&devicePixelRatio,"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope),C4="undefined"!=typeof Image&&Image.prototype.decode;function Ju(n,t,e){var r=e&&e.length?e.shift():NT?new OffscreenCanvas(n||300,t||300):document.createElement("canvas");return n&&(r.width=n),t&&(r.height=t),r.getContext("2d")}function S4(n){var t=n.offsetWidth,e=getComputedStyle(n);return t+(parseInt(e.marginLeft,10)+parseInt(e.marginRight,10))}function dF(n){var t=n.offsetHeight,e=getComputedStyle(n);return t+(parseInt(e.marginTop,10)+parseInt(e.marginBottom,10))}function QR(n,t){var e=t.parentNode;e&&e.replaceChild(n,t)}function FT(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function hF(n){for(;n.lastChild;)n.removeChild(n.lastChild)}!function(){try{var t=Object.defineProperty({},"passive",{get:function(){!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(e){}}();var x4=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const $R=function(n){function t(e){var r=this,o="Assertion failed. See https://openlayers.org/en/v"+"6.3.1".split("-")[0]+"/doc/errors/#"+e+" for details.";return(r=n.call(this,o)||this).code=e,r.name="AssertionError",r.message=o,r}return x4(t,n),t}(Error);function qi(n,t){if(!n)throw new $R(t)}function Od(n){for(var t=[1/0,1/0,-1/0,-1/0],e=0,r=n.length;e<r;++e)fE(t,n[e]);return t}function vh(n,t,e){return e?(e[0]=n[0]-t,e[1]=n[1]-t,e[2]=n[2]+t,e[3]=n[3]+t,e):[n[0]-t,n[1]-t,n[2]+t,n[3]+t]}function im(n,t,e){var r,i;return(r=t<n[0]?n[0]-t:n[2]<t?t-n[2]:0)*r+(i=e<n[1]?n[1]-e:n[3]<e?e-n[3]:0)*i}function hE(n,t){return SC(n,t[0],t[1])}function eu(n,t){return n[0]<=t[0]&&t[2]<=n[2]&&n[1]<=t[1]&&t[3]<=n[3]}function SC(n,t,e){return n[0]<=t&&t<=n[2]&&n[1]<=e&&e<=n[3]}function GT(n,t){var s=t[0],a=t[1],c=0;return s<n[0]?c|=16:s>n[2]&&(c|=4),a<n[1]?c|=8:a>n[3]&&(c|=2),0===c&&(c=1),c}function Qu(n,t,e,r,i){return i?(i[0]=n,i[1]=t,i[2]=e,i[3]=r,i):[n,t,e,r]}function om(n){return Qu(1/0,1/0,-1/0,-1/0,n)}function dv(n,t){var e=n[0],r=n[1];return Qu(e,r,e,r,t)}function eO(n,t,e,r,i){return nO(om(i),n,t,e,r)}function Sp(n,t){return n[0]==t[0]&&n[2]==t[2]&&n[1]==t[1]&&n[3]==t[3]}function tO(n,t){return t[0]<n[0]&&(n[0]=t[0]),t[2]>n[2]&&(n[2]=t[2]),t[1]<n[1]&&(n[1]=t[1]),t[3]>n[3]&&(n[3]=t[3]),n}function fE(n,t){t[0]<n[0]&&(n[0]=t[0]),t[0]>n[2]&&(n[2]=t[0]),t[1]<n[1]&&(n[1]=t[1]),t[1]>n[3]&&(n[3]=t[1])}function nO(n,t,e,r,i){for(;e<r;e+=i)xC(n,t[e],t[e+1]);return n}function xC(n,t,e){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}function rO(n,t){var e;return!!((e=t(TC(n)))||(e=t(sm(n)),e)||(e=t(uf(n)),e)||(e=t(lf(n)),e))&&e}function BT(n){var t=0;return function(n){return n[2]<n[0]||n[3]<n[1]}(n)||(t=Os(n)*$u(n)),t}function TC(n){return[n[0],n[1]]}function sm(n){return[n[2],n[1]]}function xp(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function A4(n,t){var e;return"bottom-left"===t?e=TC(n):"bottom-right"===t?e=sm(n):"top-left"===t?e=lf(n):"top-right"===t?e=uf(n):qi(!1,13),e}function jT(n,t,e,r,i){var o=t*r[0]/2,s=t*r[1]/2,a=Math.cos(e),c=Math.sin(e),h=o*a,p=o*c,m=s*a,E=s*c,S=n[0],x=n[1],P=S-h+E,R=S-h-E,F=S+h-E,D=S+h+E,j=x-p-m,G=x-p+m,X=x+p+m,J=x+p-m;return Qu(Math.min(P,R,F,D),Math.min(j,G,X,J),Math.max(P,R,F,D),Math.max(j,G,X,J),i)}function $u(n){return n[3]-n[1]}function Tp(n,t,e){var r=e||[1/0,1/0,-1/0,-1/0];return oa(n,t)?(r[0]=n[0]>t[0]?n[0]:t[0],r[1]=n[1]>t[1]?n[1]:t[1],r[2]=n[2]<t[2]?n[2]:t[2],r[3]=n[3]<t[3]?n[3]:t[3]):om(r),r}function lf(n){return[n[0],n[3]]}function uf(n){return[n[2],n[3]]}function Os(n){return n[2]-n[0]}function oa(n,t){return n[0]<=t[2]&&n[2]>=t[0]&&n[1]<=t[3]&&n[3]>=t[1]}function VT(n,t,e,r){var i=[];if(r>1)for(var o=n[2]-n[0],s=n[3]-n[1],a=0;a<r;++a)i.push(n[0]+o*a/r,n[1],n[2],n[1]+s*a/r,n[2]-o*a/r,n[3],n[0],n[3]-s*a/r);else i=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];t(i,i,2);for(var c=[],h=[],p=(a=0,i.length);a<p;a+=2)c.push(i[a]),h.push(i[a+1]);return function(n,t,e){return Qu(Math.min.apply(null,n),Math.min.apply(null,t),Math.max.apply(null,n),Math.max.apply(null,t),e)}(c,h,e)}var EF=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Eu=function(n){function t(e){var r=n.call(this)||this;r.options=e,r.id=e.id,r.insertFirst=void 0===e.insertFirst||e.insertFirst,r.stopEvent=void 0===e.stopEvent||e.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",r.element.style.position="absolute";var i=e.autoPan;return i&&"object"!=typeof i&&(i={animation:e.autoPanAnimation,margin:e.autoPanMargin}),r.autoPan=i||!1,r.rendered={transform_:"",visible:!0},r.mapPostrenderListenerKey=null,r.addEventListener(Vc("element"),r.handleElementChanged),r.addEventListener(Vc("map"),r.handleMapChanged),r.addEventListener(Vc("offset"),r.handleOffsetChanged),r.addEventListener(Vc("position"),r.handlePositionChanged),r.addEventListener(Vc("positioning"),r.handlePositioningChanged),void 0!==e.element&&r.setElement(e.element),r.setOffset(void 0!==e.offset?e.offset:[0,0]),r.setPositioning(void 0!==e.positioning?e.positioning:"top-left"),void 0!==e.position&&r.setPosition(e.position),r}return EF(t,n),t.prototype.getElement=function(){return this.get("element")},t.prototype.getId=function(){return this.id},t.prototype.getMap=function(){return this.get("map")},t.prototype.getOffset=function(){return this.get("offset")},t.prototype.getPosition=function(){return this.get("position")},t.prototype.getPositioning=function(){return this.get("positioning")},t.prototype.handleElementChanged=function(){hF(this.element);var e=this.getElement();e&&this.element.appendChild(e)},t.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(FT(this.element),ya(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey=Fl(e,"postrender",this.render,this),this.updatePixelPosition();var r=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?r.insertBefore(this.element,r.childNodes[0]||null):r.appendChild(this.element),this.performAutoPan()}},t.prototype.render=function(){this.updatePixelPosition()},t.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},t.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},t.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},t.prototype.setElement=function(e){this.set("element",e)},t.prototype.setMap=function(e){this.set("map",e)},t.prototype.setOffset=function(e){this.set("offset",e)},t.prototype.setPosition=function(e){this.set("position",e)},t.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},t.prototype.panIntoView=function(e){var r=this.getMap();if(r&&r.getTargetElement()&&this.get("position")){var i=this.getRect(r.getTargetElement(),r.getSize()),o=this.getElement(),s=this.getRect(o,[S4(o),dF(o)]),a=void 0===e.margin?20:e.margin;if(!eu(i,s)){var c=s[0]-i[0],h=i[2]-s[2],p=s[1]-i[1],m=i[3]-s[3],E=[0,0];if(c<0?E[0]=c-a:h<0&&(E[0]=Math.abs(h)+a),p<0?E[1]=p-a:m<0&&(E[1]=Math.abs(m)+a),0!==E[0]||0!==E[1]){var S=r.getView().getCenterInternal(),x=r.getPixelFromCoordinateInternal(S),P=[x[0]+E[0],x[1]+E[1]],R=e.animation||{};r.getView().animateInternal({center:r.getCoordinateFromPixelInternal(P),duration:R.duration,easing:R.easing})}}}},t.prototype.getRect=function(e,r){var i=e.getBoundingClientRect(),o=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[o,s,o+r[0],s+r[1]]},t.prototype.setPositioning=function(e){this.set("positioning",e)},t.prototype.setVisible=function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)},t.prototype.updatePixelPosition=function(){var e=this.getMap(),r=this.getPosition();if(e&&e.isRendered()&&r){var i=e.getPixelFromCoordinate(r),o=e.getSize();this.updateRenderedPosition(i,o)}else this.setVisible(!1)},t.prototype.updateRenderedPosition=function(e,r){var i=this.element.style,o=this.getOffset(),s=this.getPositioning();this.setVisible(!0);var h="0%",p="0%";"bottom-right"==s||"center-right"==s||"top-right"==s?h="-100%":("bottom-center"==s||"center-center"==s||"top-center"==s)&&(h="-50%"),"bottom-left"==s||"bottom-center"==s||"bottom-right"==s?p="-100%":("center-left"==s||"center-center"==s||"center-right"==s)&&(p="-50%");var m="translate("+h+", "+p+") translate("+(Math.round(e[0]+o[0])+"px")+", "+(Math.round(e[1]+o[1])+"px")+")";this.rendered.transform_!=m&&(this.rendered.transform_=m,i.transform=m,i.msTransform=m)},t.prototype.getOptions=function(){return this.options},t}(mh);var YT=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const pE=function(n){function t(e,r,i){var o=n.call(this)||this,s=i||{};return o.tileCoord=e,o.state=r,o.interimTile=null,o.hifi=!0,o.key="",o.transition_=void 0===s.transition?250:s.transition,o.transitionStarts_={},o}return YT(t,n),t.prototype.changed=function(){this.dispatchEvent("change")},t.prototype.release=function(){},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var e=this.interimTile;do{if(2==e.getState())return this.transition_=0,e;e=e.interimTile}while(e);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var e=this.interimTile,r=this;do{if(2==e.getState()){e.interimTile=null;break}1==e.getState()?r=e:0==e.getState()?r.interimTile=e.interimTile:r=e,e=r.interimTile}while(e)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(e){if(3!==this.state&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()},t.prototype.load=function(){Ir()},t.prototype.getAlpha=function(e,r){if(!this.transition_)return 1;var i=this.transitionStarts_[e];if(i){if(-1===i)return 1}else this.transitionStarts_[e]=i=r;var o=r-i+1e3/60;return o>=this.transition_?1:function(n){return Math.pow(n,3)}(o/this.transition_)},t.prototype.inTransition=function(e){return!!this.transition_&&-1!==this.transitionStarts_[e]},t.prototype.endTransition=function(e){this.transition_&&(this.transitionStarts_[e]=-1)},t}(cv);var qT=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),sO=[];const wF=function(n){function t(e,r,i,o){var s=n.call(this,e,r,{transition:0})||this;return s.context_={},s.executorGroups={},s.loadingSourceTiles=0,s.errorSourceTileKeys={},s.hitDetectionImageData={},s.replayState_={},s.sourceTiles=null,s.getSourceTiles=o.bind(void 0,s),s.sourceZ=-1,s.hifi=!1,s.wrappedTileCoord=i,s}return qT(t,n),t.prototype.getContext=function(e){var r=Lr(e);return r in this.context_||(this.context_[r]=Ju(1,1,sO)),this.context_[r]},t.prototype.hasContext=function(e){return Lr(e)in this.context_},t.prototype.getImage=function(e){return this.hasContext(e)?this.getContext(e).canvas:null},t.prototype.getReplayState=function(e){var r=Lr(e);return r in this.replayState_||(this.replayState_[r]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[r]},t.prototype.load=function(){this.getSourceTiles()},t.prototype.release=function(){for(var e in this.context_)sO.push(this.context_[e].canvas);n.prototype.release.call(this)},t}(pE);var D4=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const L4=function(n){function t(e,r,i,o,s,a){var c=n.call(this,e,r,a)||this;return c.extent=null,c.format_=o,c.features_=null,c.projection=null,c.tileLoadFunction_=s,c.url_=i,c}return D4(t,n),t.prototype.getFormat=function(){return this.format_},t.prototype.getFeatures=function(){return this.features_},t.prototype.getKey=function(){return this.url_},t.prototype.load=function(){0==this.state&&(this.setState(1),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},t.prototype.onLoad=function(e,r){this.setFeatures(e)},t.prototype.onError=function(){this.setState(3)},t.prototype.setFeatures=function(e){this.features_=e,this.setState(2)},t.prototype.setLoader=function(e){this.loader_=e},t}(pE);function aO(n,t,e){return void 0===e&&(e=[0,0]),e[0]=n[0]+2*t,e[1]=n[1]+2*t,e}function lO(n,t,e){return void 0===e&&(e=[0,0]),e[0]=n[0]*t+.5|0,e[1]=n[1]*t+.5|0,e}function Ld(n,t){return Array.isArray(n)?n:(void 0===t?t=[n,n]:(t[0]=n,t[1]=n),t)}function Pp(n,t,e){return Math.min(Math.max(n,t),e)}var uO="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function SF(n,t,e,r,i,o){var s=i-e,a=o-r;if(0!==s||0!==a){var c=((n-e)*s+(t-r)*a)/(s*s+a*a);c>1?(e=i,r=o):c>0&&(e+=s*c,r+=a*c)}return am(n,t,e,r)}function am(n,t,e,r){var i=e-n,o=r-t;return i*i+o*o}function hv(n){return n*Math.PI/180}function lm(n,t){var e=n%t;return e*t<0?e+t:e}function um(n,t,e){return n+e*(t-n)}function dO(n,t,e,r){return void 0!==r?(r[0]=n,r[1]=t,r[2]=e,r):[n,t,e]}function gE(n,t,e){return n+"/"+t+"/"+e}function XT(n){return gE(n[0],n[1],n[2])}function fv(n){return n.split("/").map(Number)}function PC(n){return(n[1]<<n[0])+n[2]}function xF(n,t){var e=/\{z\}/g,r=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(s,a,c){if(s)return n.replace(e,s[0].toString()).replace(r,s[1].toString()).replace(i,s[2].toString()).replace(o,function(){var p=t.getFullTileRange(s[0]);return qi(p,55),(p.getHeight()-s[2]-1).toString()})}}function fO(n,t){for(var e=n.length,r=new Array(e),i=0;i<e;++i)r[i]=xF(n[i],t);return pO(r)}function pO(n){return 1===n.length?n[0]:function(t,e,r){if(t){var o=lm(PC(t),n.length);return n[o](t,e,r)}}}function TF(n,t,e){}function PF(n){var t=[],e=/\{([a-z])-([a-z])\}/.exec(n);if(e){var r=e[1].charCodeAt(0),i=e[2].charCodeAt(0),o=void 0;for(o=r;o<=i;++o)t.push(n.replace(e[0],String.fromCharCode(o)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(n)){for(var s=parseInt(e[2],10),a=parseInt(e[1],10);a<=s;a++)t.push(n.replace(e[0],a.toString()));return t}return t.push(n),t}const mO=function(){function n(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return n.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},n.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},n.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},n.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},n.prototype.get=function(t,e){var r=this.entries_[t];return qi(void 0!==r,15),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_},n.prototype.remove=function(t){var e=this.entries_[t];return qi(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},n.prototype.getCount=function(){return this.count_},n.prototype.getKeys=function(){var r,t=new Array(this.count_),e=0;for(r=this.newest_;r;r=r.older)t[e++]=r.key_;return t},n.prototype.getValues=function(){var r,t=new Array(this.count_),e=0;for(r=this.newest_;r;r=r.older)t[e++]=r.value_;return t},n.prototype.peekLast=function(){return this.oldest_.value_},n.prototype.peekLastKey=function(){return this.oldest_.key_},n.prototype.peekFirstKey=function(){return this.newest_.key_},n.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},n.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},n.prototype.set=function(t,e){qi(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_},n.prototype.setSize=function(t){this.highWaterMark=t},n}();var IF=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const KT=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return IF(t,n),t.prototype.expireCache=function(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()},t.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var i=fv(this.peekFirstKey())[0];this.forEach(function(o){o.tileCoord[0]!==i&&(this.remove(XT(o.tileCoord)),o.release())}.bind(this))}},t}(mO);var mE=6371008.8;function cm(n,t,e){var r=e||mE,i=hv(n[1]),o=hv(t[1]),s=(o-i)/2,a=hv(t[0]-n[0])/2,c=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function pv(n,t){for(var e=0,r=n.length,i=n[r-1][0],o=n[r-1][1],s=0;s<r;s++){var a=n[s][0],c=n[s][1];e+=hv(a-i)*(2+Math.sin(hv(o))+Math.sin(hv(c))),i=a,o=c}return e*t*t/2}function sa(n,t){var e=t||{},r=e.radius||mE,i=e.projection||"EPSG:3857",o=n.getType();"GeometryCollection"!==o&&(n=n.clone().transform(i,"EPSG:4326"));var a,c,h,p,m,E,s=0;switch(o){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(a=n.getCoordinates(),s=Math.abs(pv(a[0],r)),h=1,p=a.length;h<p;++h)s-=Math.abs(pv(a[h],r));break;case"MultiPolygon":for(h=0,p=(a=n.getCoordinates()).length;h<p;++h)for(c=a[h],s+=Math.abs(pv(c[0],r)),m=1,E=c.length;m<E;++m)s-=Math.abs(pv(c[m],r));break;case"GeometryCollection":var S=n.getGeometries();for(h=0,p=S.length;h<p;++h)s+=sa(S[h],t);break;default:throw new Error("Unsupported geometry type: "+o)}return s}var gv={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},cf={};cf[gv.DEGREES]=2*Math.PI*6370997/360,cf[gv.FEET]=.3048,cf[gv.METERS]=1,cf[gv.USFEET]=1200/3937;const Ip=gv,AC=function(){function n(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return n.prototype.canWrapX=function(){return this.canWrapX_},n.prototype.getCode=function(){return this.code_},n.prototype.getExtent=function(){return this.extent_},n.prototype.getUnits=function(){return this.units_},n.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||cf[this.units_]},n.prototype.getWorldExtent=function(){return this.worldExtent_},n.prototype.getAxisOrientation=function(){return this.axisOrientation_},n.prototype.isGlobal=function(){return this.global_},n.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},n.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},n.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},n.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},n.prototype.setWorldExtent=function(t){this.worldExtent_=t},n.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},n.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},n}();var RF=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vE=6378137,zc=Math.PI*vE,yO=[-zc,-zc,zc,zc],ZT=[-180,-85,180,85],df=function(n){function t(e){return n.call(this,{code:e,units:Ip.METERS,extent:yO,global:!0,worldExtent:ZT,getPointResolution:function(r,i){return r/uO(i[1]/vE)}})||this}return RF(t,n),t}(AC),_O=[new df("EPSG:3857"),new df("EPSG:102100"),new df("EPSG:102113"),new df("EPSG:900913"),new df("urn:ogc:def:crs:EPSG:6.18:3:3857"),new df("urn:ogc:def:crs:EPSG::3857"),new df("http://www.opengis.net/gml/srs/epsg.xml#3857")];var JT=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ma=[-180,-90,180,90],F4=6378137*Math.PI/180,Ap=function(n){function t(e,r){return n.call(this,{code:e,units:Ip.DEGREES,extent:Ma,axisOrientation:r,global:!0,metersPerUnit:F4,worldExtent:Ma})||this}return JT(t,n),t}(AC),bO=[new Ap("CRS:84"),new Ap("EPSG:4326","neu"),new Ap("urn:ogc:def:crs:EPSG::4326","neu"),new Ap("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Ap("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ap("urn:ogc:def:crs:OGC:2:84"),new Ap("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ap("urn:x-ogc:def:crs:EPSG:4326","neu")],yh={};function mv(n,t,e){var r=n.getCode(),i=t.getCode();r in yh||(yh[r]={}),yh[r][i]=e}function DF(n,t){var e;return n in yh&&t in yh[n]&&(e=yh[n][t]),e}var wO={};function $T(n,t,e){var r;if(void 0!==t){for(var i=0,o=n.length;i<o;++i)t[i]=n[i];r=t}else r=n.slice();return r}function NF(n,t,e){if(void 0!==t&&n!==t){for(var r=0,i=n.length;r<i;++r)t[r]=n[r];n=t}return n}function CO(n){(function(n,t){wO[n]=t})(n.getCode(),n),mv(n,n,$T)}function Ar(n){return"string"==typeof n?function(n){return wO[n]||null}(n):n||null}function SO(n,t,e,r){var i,o=(n=Ar(n)).getPointResolutionFunc();if(o)i=o(t,e),r&&r!==n.getUnits()&&(s=n.getMetersPerUnit())&&(i=i*s/cf[r]);else if(n.getUnits()==Ip.DEGREES&&!r||r==Ip.DEGREES)i=t;else{var s,c=vv(n,Ar("EPSG:4326")),h=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];i=(cm((h=c(h,h,2)).slice(0,2),h.slice(2,4))+cm(h.slice(4,6),h.slice(6,8)))/2,void 0!==(s=r?cf[r]:n.getMetersPerUnit())&&(i/=s)}return i}function xO(n){(function(n){n.forEach(CO)})(n),n.forEach(function(t){n.forEach(function(e){t!==e&&mv(t,e,$T)})})}function TO(n){return function(t,e,r){for(var i=t.length,o=void 0!==r?r:2,s=void 0!==e?e:new Array(i),a=0;a<i;a+=o){var c=n([t[a],t[a+1]]);s[a]=c[0],s[a+1]=c[1];for(var h=o-1;h>=2;--h)s[a+h]=t[a+h]}return s}}function GF(n,t,e,r){var i=Ar(n),o=Ar(t);mv(i,o,TO(e)),mv(o,i,TO(r))}function hf(n,t){if(n===t)return!0;var e=n.getUnits()===t.getUnits();return(n.getCode()===t.getCode()||vv(n,t)===$T)&&e}function vv(n,t){var i=DF(n.getCode(),t.getCode());return i||(i=NF),i}function yv(n,t){return vv(Ar(n),Ar(t))}function Qi(n,t,e){return yv(t,e)(n,void 0,n.length)}function kd(n,t,e,r){return VT(n,yv(t,e),void 0,r)}var Nd=null;function Mp(){return Nd}function PO(n,t){return n}function Fd(n,t){return n}function IO(n,t){return n}function eP(n,t){return n}xO(_O),xO(bO),function(n,t,e,r){n.forEach(function(i){t.forEach(function(o){mv(i,o,e),mv(o,i,r)})})}(bO,_O,function(n,t,e){var r=n.length,i=e>1?e:2,o=t;void 0===o&&(o=i>2?n.slice():new Array(r));for(var s=zc,a=0;a<r;a+=i){o[a]=s*n[a]/180;var c=vE*Math.log(Math.tan(Math.PI*(+n[a+1]+90)/360));c>s?c=s:c<-s&&(c=-s),o[a+1]=c}return o},function(n,t,e){var r=n.length,i=e>1?e:2,o=t;void 0===o&&(o=i>2?n.slice():new Array(r));for(var s=0;s<r;s+=i)o[s]=180*n[s]/zc,o[s+1]=360*Math.atan(Math.exp(n[s+1]/vE))/Math.PI-90;return o});var jF=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function VF(n){return n?Array.isArray(n)?function(t){return n}:"function"==typeof n?n:function(t){return[n]}:null}const nP=function(n){function t(e){var r=n.call(this)||this;return r.projection_=Ar(e.projection),r.attributions_=VF(e.attributions),r.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,r.loading=!1,r.state_=void 0!==e.state?e.state:"ready",r.wrapX_=void 0!==e.wrapX&&e.wrapX,r}return jF(t,n),t.prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolutions=function(){return Ir()},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(e){this.attributions_=VF(e),this.changed()},t.prototype.setState=function(e){this.state_=e,this.changed()},t}(mh);var Hc=function(){function n(t,e,r,i){this.minX=t,this.maxX=e,this.minY=r,this.maxY=i}return n.prototype.contains=function(t){return this.containsXY(t[1],t[2])},n.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},n.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},n.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},n.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},n.prototype.getHeight=function(){return this.maxY-this.minY+1},n.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},n.prototype.getWidth=function(){return this.maxX-this.minX+1},n.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},n}();function MO(n,t,e,r,i){return void 0!==i?(i.minX=n,i.maxX=t,i.minY=e,i.maxY=r,i):new Hc(n,t,e,r)}const rP=Hc;var HF=[0,0,0];const OC=function(){function n(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,qi(function(n,t,e){var r=function(s,a){return a-s}||sf;return n.every(function(i,o){if(0===o)return!0;var s=r(n[o-1],i);return!(s>0||0===s)})}(this.resolutions_),17),!t.origins)for(var r=0,i=this.resolutions_.length-1;r<i;++r)if(e){if(this.resolutions_[r]/this.resolutions_[r+1]!==e){e=void 0;break}}else e=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,qi(this.origins_.length==this.resolutions_.length,20));var o=t.extent;void 0!==o&&!this.origin_&&!this.origins_&&(this.origin_=lf(o)),qi(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,qi(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,qi(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==o?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(s,a){return new rP(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1))},this):o&&this.calculateTileRanges_(o)}return n.prototype.forEachTileCoord=function(t,e,r){for(var i=this.getTileRangeForExtentAndZ(t,e),o=i.minX,s=i.maxX;o<=s;++o)for(var a=i.minY,c=i.maxY;a<=c;++a)r([e,o,a])},n.prototype.forEachTileCoordParentTileRange=function(t,e,r,i){var s,a,c=null,h=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):c=this.getTileCoordExtent(t,i);h>=this.minZoom;){if(e(h,2===this.zoomFactor_?MO(s=Math.floor(s/2),s,a=Math.floor(a/2),a,r):this.getTileRangeForExtentAndZ(c,h,r)))return!0;--h}return!1},n.prototype.getExtent=function(){return this.extent_},n.prototype.getMaxZoom=function(){return this.maxZoom},n.prototype.getMinZoom=function(){return this.minZoom},n.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},n.prototype.getResolution=function(t){return this.resolutions_[t]},n.prototype.getResolutions=function(){return this.resolutions_},n.prototype.getTileCoordChildTileRange=function(t,e,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*t[1],o=2*t[2];return MO(i,i+1,o,o+1,e)}var s=this.getTileCoordExtent(t,r);return this.getTileRangeForExtentAndZ(s,t[0]+1,e)}return null},n.prototype.getTileRangeExtent=function(t,e,r){var i=this.getOrigin(t),o=this.getResolution(t),s=Ld(this.getTileSize(t),this.tmpSize_);return Qu(i[0]+e.minX*s[0]*o,i[1]+e.minY*s[1]*o,i[0]+(e.maxX+1)*s[0]*o,i[1]+(e.maxY+1)*s[1]*o,r)},n.prototype.getTileRangeForExtentAndZ=function(t,e,r){var i=HF;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,i);var o=i[1],s=i[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,i),MO(o,i[1],s,i[2],r)},n.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),r=this.getResolution(t[0]),i=Ld(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*r,e[1]-(t[2]+.5)*i[1]*r]},n.prototype.getTileCoordExtent=function(t,e){var r=this.getOrigin(t[0]),i=this.getResolution(t[0]),o=Ld(this.getTileSize(t[0]),this.tmpSize_),s=r[0]+t[1]*o[0]*i,a=r[1]-(t[2]+1)*o[1]*i;return Qu(s,a,s+o[0]*i,a+o[1]*i,e)},n.prototype.getTileCoordForCoordAndResolution=function(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)},n.prototype.getTileCoordForXYAndResolution_=function(t,e,r,i,o){var s=this.getZForResolution(r),a=r/this.getResolution(s),c=this.getOrigin(s),h=Ld(this.getTileSize(s),this.tmpSize_),m=i?.5:0,E=Math.floor((t-c[0])/r+(i?.5:0)),S=Math.floor((c[1]-e)/r+m),x=a*E/h[0],P=a*S/h[1];return i?(x=Math.ceil(x)-1,P=Math.ceil(P)-1):(x=Math.floor(x),P=Math.floor(P)),dO(s,x,P,o)},n.prototype.getTileCoordForXYAndZ_=function(t,e,r,i,o){var s=this.getOrigin(r),a=this.getResolution(r),c=Ld(this.getTileSize(r),this.tmpSize_),p=i?.5:0,m=Math.floor((t-s[0])/a+(i?.5:0)),E=Math.floor((s[1]-e)/a+p),S=m/c[0],x=E/c[1];return i?(S=Math.ceil(S)-1,x=Math.ceil(x)-1):(S=Math.floor(S),x=Math.floor(x)),dO(r,S,x,o)},n.prototype.getTileCoordForCoordAndZ=function(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)},n.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},n.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},n.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},n.prototype.getZForResolution=function(t,e){return Pp(VR(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},n.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,r=new Array(e),i=this.minZoom;i<e;++i)r[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=r},n}();function iP(n){var t=n.getDefaultTileGrid();return t||(t=_E(n),n.setDefaultTileGrid(t)),t}function _v(n){var t=n||{},e=t.extent||Ar("EPSG:3857").getExtent(),r={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:yE(e,t.maxZoom,t.tileSize,t.maxResolution)};return new OC(r)}function yE(n,t,e,r){for(var i=void 0!==t?t:42,o=$u(n),s=Os(n),a=Ld(void 0!==e?e:256),c=r>0?r:Math.max(s/a[0],o/a[1]),h=i+1,p=new Array(h),m=0;m<h;++m)p[m]=c/Math.pow(2,m);return p}function _E(n,t,e,r){return function(n,t,e,r){var i=void 0!==r?r:"top-left",o=yE(n,t,e);return new OC({extent:n,origin:A4(n,i),resolutions:o,tileSize:e})}(EE(n),t,e,r)}function EE(n){var t=(n=Ar(n)).getExtent();if(!t){var e=180*cf[Ip.DEGREES]/n.getMetersPerUnit();t=Qu(-e,-e,e,e)}return t}var aP=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),WF=function(n){function t(e){var r=n.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;r.opaque_=void 0!==e.opaque&&e.opaque,r.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,r.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var i=[256,256],o=e.tileGrid;o&&Ld(o.getTileSize(o.getMinZoom()),i);var s="undefined"!=typeof screen,a=s?screen.availWidth||screen.width:1920,c=s?screen.availHeight||screen.height:1080,h=4*Math.ceil(a/i[0])*Math.ceil(c/i[1]);return r.tileCache=new KT(Math.max(h,e.cacheSize||0)),r.tmpSize=[0,0],r.key_=e.key||"",r.tileOptions={transition:e.transition},r.zDirection=e.zDirection?e.zDirection:0,r}return aP(t,n),t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(e,r){var i=this.getTileCacheForProjection(e);i&&i.expireCache(r)},t.prototype.forEachLoadedTile=function(e,r,i,o){var s=this.getTileCacheForProjection(e);if(!s)return!1;for(var c,h,p,a=!0,m=i.minX;m<=i.maxX;++m)for(var E=i.minY;E<=i.maxY;++E)h=gE(r,m,E),p=!1,s.containsKey(h)&&(p=2===(c=s.get(h)).getState())&&(p=!1!==o(c)),p||(a=!1);return a},t.prototype.getGutterForProjection=function(e){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(e){this.key_!==e&&(this.key_=e,this.changed())},t.prototype.getOpaque=function(e){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},t.prototype.getTile=function(e,r,i,o,s){return Ir()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(e){return this.tileGrid?this.tileGrid:iP(e)},t.prototype.getTileCacheForProjection=function(e){var r=this.getProjection();return r&&!hf(r,e)?null:this.tileCache},t.prototype.getTilePixelRatio=function(e){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(e,r,i){var o=this.getTileGridForProjection(i),s=this.getTilePixelRatio(r),a=Ld(o.getTileSize(e),this.tmpSize);return 1==s?a:lO(a,s,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(e,r){var i=void 0!==r?r:this.getProjection(),o=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=function(n,t,e){var r=t[0],i=n.getTileCoordCenter(t),o=EE(e);if(hE(o,i))return t;var s=Os(o),a=Math.ceil((o[0]-i[0])/s);return i[0]+=s*a,n.getTileCoordForCoordAndZ(i,r)}(o,e,i)),function(n,t){var e=n[0],r=n[1],i=n[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;var s,o=t.getExtent();return!(s=o?t.getTileRangeForExtentAndZ(o,e):t.getFullTileRange(e))||s.containsXY(r,i)}(e,o)?e:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),n.prototype.refresh.call(this)},t.prototype.useTile=function(e,r,i,o){},t}(nP),YF=function(n){function t(e,r){var i=n.call(this,e)||this;return i.tile=r,i}return aP(t,n),t}(Rd);const OO=WF;var qF=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const DC=function(n){function t(e){var r=n.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.generateTileUrlFunction_=!e.tileUrlFunction,r.tileLoadFunction=e.tileLoadFunction,r.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(r):TF,r.urls=null,e.urls?r.setUrls(e.urls):e.url&&r.setUrl(e.url),r.tileLoadingKeys_={},r}return qF(t,n),t.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(e){var s,r=e.target,i=Lr(r),o=r.getState();1==o?(this.tileLoadingKeys_[i]=!0,s="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=3==o?"tileloaderror":2==o?"tileloadend":void 0),null!=s&&this.dispatchEvent(new YF(s,r))},t.prototype.setTileLoadFunction=function(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()},t.prototype.setTileUrlFunction=function(e,r){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),void 0!==r?this.setKey(r):this.changed()},t.prototype.setUrl=function(e){var r=PF(e);this.urls=r,this.setUrls(r)},t.prototype.setUrls=function(e){this.urls=e;var r=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(fO(e,this.tileGrid),r):this.setKey(r)},t.prototype.useTile=function(e,r,i){var o=gE(e,r,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)},t}(OO);function Ev(n,t,e,r){return function(i,o,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof n?n(i,o,s):n,!0),"arraybuffer"==t.getType()&&(a.responseType="arraybuffer"),a.withCredentials=false,a.onload=function(c){if(!a.status||a.status>=200&&a.status<300){var h=t.getType(),p=void 0;"json"==h||"text"==h?p=a.responseText:"xml"==h?(p=a.responseXML)||(p=(new DOMParser).parseFromString(a.responseText,"application/xml")):"arraybuffer"==h&&(p=a.response),p?e.call(this,t.readFeatures(p,{extent:i,featureProjection:s}),t.readProjection(p)):r.call(this)}else r.call(this)}.bind(this),a.onerror=function(){r.call(this)}.bind(this),a.send()}}function bE(n,t){return Ev(n,t,function(e,r){"function"==typeof this.addFeatures&&this.addFeatures(e)},Cp)}var LC=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const wE=function(n){function t(e){var r=this,i=e.projection||"EPSG:3857",o=e.extent||EE(i),s=e.tileGrid||_v({extent:o,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(r=n.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:i,state:e.state,tileGrid:s,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:kC,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,r.loadingTiles_={},r.sourceTileCache=new KT(r.tileCache.highWaterMark),r.overlaps_=null==e.overlaps||e.overlaps,r.tileClass=e.tileClass?e.tileClass:L4,r.tileGrids_={},r}return LC(t,n),t.prototype.getFeaturesInExtent=function(e){var r=[],i=this.tileCache;if(0===i.getCount())return r;var o=fv(i.peekFirstKey())[0],s=this.tileGrid;return i.forEach(function(a){if(a.tileCoord[0]===o&&2===a.getState())for(var c=a.getSourceTiles(),h=0,p=c.length;h<p;++h){var m=c[h];if(oa(e,s.getTileCoordExtent(m.tileCoord))){var S=m.getFeatures();if(S)for(var x=0,P=S.length;x<P;++x){var R=S[x],F=R.getGeometry();oa(e,F.getExtent())&&r.push(R)}}}}),r},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},t.prototype.expireCache=function(e,r){n.prototype.expireCache.call(this,e,r),this.sourceTileCache.expireCache({})},t.prototype.getSourceTiles=function(e,r,i){var o=i.wrappedTileCoord,s=this.getTileGridForProjection(r),a=s.getTileCoordExtent(o),h=s.getResolution(o[0]);vh(a,-h,a);var p=this.tileGrid,m=p.getExtent();m&&Tp(a,m,a);var P,R,F,E=p.getZForResolution(h,1),S=p.getMinZoom(),x=i.sourceTiles;if(x&&x.length>0&&x[0].tileCoord[0]===E)P=x,R=!0,F=E;else{P=[],F=E+1;do{--F,R=!0,p.forEachTileCoord(a,F,function(D){var G,j=this.tileUrlFunction(D,e,r);if(void 0!==j)if(this.sourceTileCache.containsKey(j)){var X=(G=this.sourceTileCache.get(j)).getState();if(2===X||3===X||4===X)return void P.push(G)}else F===E&&((G=new this.tileClass(D,0,j,this.format_,this.tileLoadFunction)).extent=p.getTileCoordExtent(D),G.projection=r,G.resolution=p.getResolution(D[0]),this.sourceTileCache.set(j,G),G.addEventListener("change",this.handleTileChange.bind(this)),G.load());R=R&&G&&2===G.getState(),G&&4!==G.getState()&&0===i.getState()&&(i.loadingSourceTiles++,G.addEventListener("change",function J(){var $=G.getState(),le=G.getKey();if(2===$||3===$){2===$?(G.removeEventListener("change",J),i.loadingSourceTiles--,delete i.errorSourceTileKeys[le]):3===$&&(i.errorSourceTileKeys[le]=!0);var ie=Object.keys(i.errorSourceTileKeys).length;i.loadingSourceTiles-ie==0&&(i.hifi=0===ie,i.sourceZ=E,i.setState(2))}}))}.bind(this)),R||(P.length=0)}while(!R&&F>S)}return 0===i.getState()&&i.setState(1),R&&(i.hifi=E===F,i.sourceZ=F,i.getState()<2?i.setState(2):(!x||!af(P,x))&&(i.sourceTiles=P)),P},t.prototype.getTile=function(e,r,i,o,s){var h,a=gE(e,r,i),c=this.getKey();if(this.tileCache.containsKey(a)&&(h=this.tileCache.get(a)).key===c)return h;var p=[e,r,i],m=this.getTileCoordForTileUrlFunction(p,s),E=this.getTileGrid().getExtent(),S=this.getTileGridForProjection(s);if(m&&E){var x=S.getTileCoordExtent(m);vh(x,-S.getResolution(e),x),oa(E,x)||(m=null)}var P=!0;if(null!==m){var R=this.tileGrid,F=S.getResolution(e),D=R.getZForResolution(F,1),j=S.getTileCoordExtent(m);vh(j,-F,j),R.forEachTileCoord(j,D,function(X){P=P&&!this.tileUrlFunction(X,o,s)}.bind(this))}var G=new wF(p,P?4:0,m,this.getSourceTiles.bind(this,o,s));return G.key=c,h?(G.interimTile=h,G.refreshInterimChain(),this.tileCache.replace(a,G)):this.tileCache.set(a,G),G},t.prototype.getTileGridForProjection=function(e){var r=e.getCode(),i=this.tileGrids_[r];if(!i){var o=this.tileGrid;i=_E(e,void 0,o?o.getTileSize(o.getMinZoom()):void 0),this.tileGrids_[r]=i}return i},t.prototype.getTilePixelRatio=function(e){return e},t.prototype.getTilePixelSize=function(e,r,i){var s=Ld(this.getTileGridForProjection(i).getTileSize(e),this.tmpSize);return[Math.round(s[0]*r),Math.round(s[1]*r)]},t}(DC);function kC(n,t){var e=Ev(t,n.getFormat(),n.onLoad.bind(n),n.onError.bind(n));n.setLoader(e)}var DO=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),NC=function(n){function t(e,r,i){var o=n.call(this,e)||this;return o.element=r,o.index=i,o}return DO(t,n),t}(Rd);const hm=function(n){function t(e,r){var i=n.call(this)||this;if(i.unique_=!!(r||{}).unique,i.array_=e||[],i.unique_)for(var s=0,a=i.array_.length;s<a;++s)i.assertUnique_(i.array_[s],s);return i.updateLength_(),i}return DO(t,n),t.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},t.prototype.extend=function(e){for(var r=0,i=e.length;r<i;++r)this.push(e[r]);return this},t.prototype.forEach=function(e){for(var r=this.array_,i=0,o=r.length;i<o;++i)e(r[i],i,r)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(e){return this.array_[e]},t.prototype.getLength=function(){return this.get("length")},t.prototype.insertAt=function(e,r){this.unique_&&this.assertUnique_(r),this.array_.splice(e,0,r),this.updateLength_(),this.dispatchEvent(new NC("add",r,e))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(e){this.unique_&&this.assertUnique_(e);var r=this.getLength();return this.insertAt(r,e),this.getLength()},t.prototype.remove=function(e){for(var r=this.array_,i=0,o=r.length;i<o;++i)if(r[i]===e)return this.removeAt(i)},t.prototype.removeAt=function(e){var r=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new NC("remove",r,e)),r},t.prototype.setAt=function(e,r){var i=this.getLength();if(e<i){this.unique_&&this.assertUnique_(r,e);var o=this.array_[e];this.array_[e]=r,this.dispatchEvent(new NC("remove",o,e)),this.dispatchEvent(new NC("add",r,e))}else{for(var s=i;s<e;++s)this.insertAt(s,void 0);this.insertAt(e,r)}},t.prototype.updateLength_=function(){this.set("length",this.array_.length)},t.prototype.assertUnique_=function(e,r){for(var i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===e&&i!==r)throw new $R(58)},t}(mh);function ZF(n,t){return[[-1/0,-1/0,1/0,1/0]]}var cP=ee(7346),NO=ee.n(cP);const dP=function(){function n(t){this.rbush_=new(NO())(t),this.items_={}}return n.prototype.insert=function(t,e){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(r),this.items_[Lr(e)]=r},n.prototype.load=function(t,e){for(var r=new Array(e.length),i=0,o=e.length;i<o;i++){var s=t[i],a=e[i],c={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};r[i]=c,this.items_[Lr(a)]=c}this.rbush_.load(r)},n.prototype.remove=function(t){var e=Lr(t),r=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(r)},n.prototype.update=function(t,e){var r=this.items_[Lr(e)];Sp([r.minX,r.minY,r.maxX,r.maxY],t)||(this.remove(e),this.insert(t,e))},n.prototype.getAll=function(){return this.rbush_.all().map(function(e){return e.value})},n.prototype.getInExtent=function(t){return this.rbush_.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}).map(function(i){return i.value})},n.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},n.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},n.prototype.forEach_=function(t,e){for(var r,i=0,o=t.length;i<o;i++)if(r=e(t[i]))return r;return r},n.prototype.isEmpty=function(){return uE(this.items_)},n.prototype.clear=function(){this.rbush_.clear(),this.items_={}},n.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Qu(e.minX,e.minY,e.maxX,e.maxY,t)},n.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},n}();var FC=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),CE=function(n){function t(e,r){var i=n.call(this,e)||this;return i.feature=r,i}return FC(t,n),t}(Rd);const bu=function(n){function t(e){var r=this,i=e||{};(r=n.call(this,{attributions:i.attributions,projection:void 0,state:"ready",wrapX:void 0===i.wrapX||i.wrapX})||this).loader_=Cp,r.format_=i.format,r.overlaps_=void 0===i.overlaps||i.overlaps,r.url_=i.url,void 0!==i.loader?r.loader_=i.loader:void 0!==r.url_&&(qi(r.format_,7),r.loader_=bE(r.url_,r.format_)),r.strategy_=void 0!==i.strategy?i.strategy:ZF;var s,a,o=void 0===i.useSpatialIndex||i.useSpatialIndex;return r.featuresRtree_=o?new dP:null,r.loadedExtentsRtree_=new dP,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(i.features)?a=i.features:i.features&&(a=(s=i.features).getArray()),!o&&void 0===s&&(s=new hm(a)),void 0!==a&&r.addFeaturesInternal(a),void 0!==s&&r.bindFeaturesCollection_(s),r}return FC(t,n),t.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},t.prototype.addFeatureInternal=function(e){var r=Lr(e);if(this.addToIndex_(r,e)){this.setupChangeEvents_(r,e);var i=e.getGeometry();if(i){var o=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,e)}else this.nullGeometryFeatures_[r]=e;this.dispatchEvent(new CE("addfeature",e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)},t.prototype.setupChangeEvents_=function(e,r){this.featureChangeKeys_[e]=[Fl(r,"change",this.handleFeatureChange_,this),Fl(r,"propertychange",this.handleFeatureChange_,this)]},t.prototype.addToIndex_=function(e,r){var i=!0,o=r.getId();return void 0!==o&&(o.toString()in this.idIndex_?i=!1:this.idIndex_[o.toString()]=r),i&&(qi(!(e in this.uidIndex_),30),this.uidIndex_[e]=r),i},t.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},t.prototype.addFeaturesInternal=function(e){for(var r=[],i=[],o=[],s=0,a=e.length;s<a;s++){var h=Lr(c=e[s]);this.addToIndex_(h,c)&&i.push(c)}s=0;for(var p=i.length;s<p;s++){var c;h=Lr(c=i[s]),this.setupChangeEvents_(h,c);var m=c.getGeometry();if(m){var E=m.getExtent();r.push(E),o.push(c)}else this.nullGeometryFeatures_[h]=c}this.featuresRtree_&&this.featuresRtree_.load(r,o),s=0;for(var S=i.length;s<S;s++)this.dispatchEvent(new CE("addfeature",i[s]))},t.prototype.bindFeaturesCollection_=function(e){var r=!1;this.addEventListener("addfeature",function(i){r||(r=!0,e.push(i.feature),r=!1)}),this.addEventListener("removefeature",function(i){r||(r=!0,e.remove(i.feature),r=!1)}),e.addEventListener("add",function(i){r||(r=!0,this.addFeature(i.element),r=!1)}.bind(this)),e.addEventListener("remove",function(i){r||(r=!0,this.removeFeature(i.element),r=!1)}.bind(this)),this.featuresCollection_=e},t.prototype.clear=function(e){if(e){for(var r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(ya);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var o in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[o]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var s=new CE("clear");this.dispatchEvent(s),this.changed()},t.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},t.prototype.forEachFeatureAtCoordinateDirect=function(e,r){return this.forEachFeatureInExtent([e[0],e[1],e[0],e[1]],function(o){if(o.getGeometry().intersectsCoordinate(e))return r(o)})},t.prototype.forEachFeatureInExtent=function(e,r){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,r);this.featuresCollection_&&this.featuresCollection_.forEach(r)},t.prototype.forEachFeatureIntersectingExtent=function(e,r){return this.forEachFeatureInExtent(e,function(i){if(i.getGeometry().intersectsExtent(e)){var s=r(i);if(s)return s}})},t.prototype.getFeaturesCollection=function(){return this.featuresCollection_},t.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),uE(this.nullGeometryFeatures_)||Qo(e,rm(this.nullGeometryFeatures_))),e},t.prototype.getFeaturesAtCoordinate=function(e){var r=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){r.push(i)}),r},t.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_?this.featuresRtree_.getInExtent(e):this.featuresCollection_?this.featuresCollection_.getArray():[]},t.prototype.getClosestFeatureToCoordinate=function(e,r){var i=e[0],o=e[1],s=null,a=[NaN,NaN],c=1/0,h=[-1/0,-1/0,1/0,1/0],p=r||uv;return this.featuresRtree_.forEachInExtent(h,function(m){if(p(m)){var E=m.getGeometry(),S=c;if((c=E.closestPointXY(i,o,a,c))<S){s=m;var x=Math.sqrt(c);h[0]=i-x,h[1]=o-x,h[2]=i+x,h[3]=o+x}}}),s},t.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},t.prototype.getFeatureById=function(e){var r=this.idIndex_[e.toString()];return void 0!==r?r:null},t.prototype.getFeatureByUid=function(e){var r=this.uidIndex_[e];return void 0!==r?r:null},t.prototype.getFormat=function(){return this.format_},t.prototype.getOverlaps=function(){return this.overlaps_},t.prototype.getUrl=function(){return this.url_},t.prototype.handleFeatureChange_=function(e){var r=e.target,i=Lr(r),o=r.getGeometry();if(o){var s=o.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(s,r)):this.featuresRtree_&&this.featuresRtree_.update(s,r)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(r),this.nullGeometryFeatures_[i]=r);var a=r.getId();if(void 0!==a){var c=a.toString();this.idIndex_[c]!==r&&(this.removeFromIdIndex_(r),this.idIndex_[c]=r)}else this.removeFromIdIndex_(r),this.uidIndex_[i]=r;this.changed(),this.dispatchEvent(new CE("changefeature",r))},t.prototype.hasFeature=function(e){var r=e.getId();return void 0!==r?r in this.idIndex_:Lr(e)in this.uidIndex_},t.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&uE(this.nullGeometryFeatures_)},t.prototype.loadFeatures=function(e,r,i){var o=this.loadedExtentsRtree_,s=this.strategy_(e,r);this.loading=!1;for(var a=function(m,E){var S=s[m];o.forEachInExtent(S,function(P){return eu(P.extent,S)})||(c.loader_.call(c,S,r,i),o.insert(S,{extent:S.slice()}),c.loading=c.loader_!==Cp)},c=this,h=0,p=s.length;h<p;++h)a(h)},t.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),n.prototype.refresh.call(this)},t.prototype.removeLoadedExtent=function(e){var i,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(o){if(Sp(o.extent,e))return i=o,!0}),i&&r.remove(i)},t.prototype.removeFeature=function(e){var r=Lr(e);r in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[r]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e),this.changed()},t.prototype.removeFeatureInternal=function(e){var r=Lr(e);this.featureChangeKeys_[r].forEach(ya),delete this.featureChangeKeys_[r];var i=e.getId();void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[r],this.dispatchEvent(new CE("removefeature",e))},t.prototype.removeFromIdIndex_=function(e){var r=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===e){delete this.idIndex_[i],r=!0;break}return r},t.prototype.setLoader=function(e){this.loader_=e},t.prototype.setUrl=function(e){qi(this.format_,7),this.setLoader(bE(e,this.format_))},t}(nP);var Op="1.3.0";function GC(n,t,e,r){var i=Qi(e,t,n),o=SO(t,r,e),s=t.getMetersPerUnit();void 0!==s&&(o*=s);var a=n.getMetersPerUnit();void 0!==a&&(o/=a);var c=n.getExtent();if(!c||hE(c,i)){var h=SO(n,o,i)/o;isFinite(h)&&h>0&&(o/=h)}return o}function hP(n,t,e,r){var i=e-n,o=r-t,s=Math.sqrt(i*i+o*o);return[Math.round(e+i/s),Math.round(r+o/s)]}function Eh(n,t,e,r,i,o,s,a,c,h,p){var m=Ju(Math.round(e*n),Math.round(e*t));if(0===c.length)return m.canvas;m.scale(e,e);var E=[1/0,1/0,-1/0,-1/0];c.forEach(function(D,j,G){tO(E,D.extent)});var S=Os(E),x=$u(E),P=Ju(Math.round(e*S/r),Math.round(e*x/r)),R=e/r;c.forEach(function(D,j,G){var X=D.extent[0]-E[0],J=-(D.extent[3]-E[3]),$=Os(D.extent),le=$u(D.extent);P.drawImage(D.image,h,h,D.image.width-2*h,D.image.height-2*h,X*R,J*R,$*R,le*R)});var F=lf(s);return a.getTriangles().forEach(function(D,j,G){var X=D.source,J=D.target,$=X[0][0],le=X[0][1],ie=X[1][0],Fe=X[1][1],Ce=X[2][0],$e=X[2][1],ot=(J[0][0]-F[0])/o,st=-(J[0][1]-F[1])/o,dt=(J[1][0]-F[0])/o,kt=-(J[1][1]-F[1])/o,Qe=(J[2][0]-F[0])/o,Zt=-(J[2][1]-F[1])/o,gt=$,Re=le;$=0,le=0;var Oe=function(n){for(var t=n.length,e=0;e<t;e++){for(var r=e,i=Math.abs(n[e][e]),o=e+1;o<t;o++){var s=Math.abs(n[o][e]);s>i&&(i=s,r=o)}if(0===i)return null;var a=n[r];n[r]=n[e],n[e]=a;for(var c=e+1;c<t;c++)for(var h=-n[c][e]/n[e][e],p=e;p<t+1;p++)e==p?n[c][p]=0:n[c][p]+=h*n[e][p]}for(var m=new Array(t),E=t-1;E>=0;E--){m[E]=n[E][t]/n[E][E];for(var S=E-1;S>=0;S--)n[S][t]-=n[S][E]*m[E]}return m}([[ie-=gt,Fe-=Re,0,0,dt-ot],[Ce-=gt,$e-=Re,0,0,Qe-ot],[0,0,ie,Fe,kt-st],[0,0,Ce,$e,Zt-st]]);if(Oe){m.save(),m.beginPath();var qt=(ot+dt+Qe)/3,Pt=(st+kt+Zt)/3,$t=hP(qt,Pt,ot,st),dn=hP(qt,Pt,dt,kt),Pn=hP(qt,Pt,Qe,Zt);m.moveTo(dn[0],dn[1]),m.lineTo($t[0],$t[1]),m.lineTo(Pn[0],Pn[1]),m.clip(),m.transform(Oe[0],Oe[2],Oe[1],Oe[3],ot,st),m.translate(E[0]-gt,E[3]-Re),m.scale(r/e,-r/e),m.drawImage(P.canvas,0,0),m.restore()}}),p&&(m.save(),m.strokeStyle="black",m.lineWidth=1,a.getTriangles().forEach(function(D,j,G){var X=D.target,J=(X[0][0]-F[0])/o,$=-(X[0][1]-F[1])/o,le=(X[1][0]-F[0])/o,ie=-(X[1][1]-F[1])/o,Fe=(X[2][0]-F[0])/o,Ce=-(X[2][1]-F[1])/o;m.beginPath(),m.moveTo(le,ie),m.lineTo(J,$),m.lineTo(Fe,Ce),m.closePath(),m.stroke()}),m.restore()),m.canvas}var BC=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const GO=function(n){function t(e,r,i,o){var s=n.call(this)||this;return s.extent=e,s.pixelRatio_=i,s.resolution=r,s.state=o,s}return BC(t,n),t.prototype.changed=function(){this.dispatchEvent("change")},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return Ir()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){Ir()},t}(cv);var QF=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function jC(n,t,e){var r=n;if(r.src&&C4){var i=r.decode(),o=!0;return i.then(function(){o&&t()}).catch(function(c){o&&("EncodingError"===c.name&&"Invalid image type."===c.message?t():e())}),function(){o=!1}}var a=[MT(r,"load",t),MT(r,"error",e)];return function(){a.forEach(ya)}}const jO=function(n){function t(e,r,i,o,s,a){var c=n.call(this,e,r,i,0)||this;return c.src_=o,c.image_=new Image,null!==s&&(c.image_.crossOrigin=s),c.unlisten_=null,c.state=0,c.imageLoadFunction_=a,c}return QF(t,n),t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=$u(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},t.prototype.load=function(){(0==this.state||3==this.state)&&(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=jC(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.setImage=function(e){this.image_=e},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(GO);var UO=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const eG=function(n){function t(e,r,i,o,s,a){var c=n.call(this,e,r,a)||this;return c.crossOrigin_=o,c.src_=i,c.image_=new Image,null!==o&&(c.image_.crossOrigin=o),c.unlisten_=null,c.tileLoadFunction_=s,c}return UO(t,n),t.prototype.getImage=function(){return this.image_},t.prototype.getKey=function(){return this.src_},t.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.image_=function(){var n=Ju(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}(),this.changed()},t.prototype.handleImageLoad_=function(){var e=this.image_;this.state=e.naturalWidth&&e.naturalHeight?2:4,this.unlistenImage_(),this.changed()},t.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=jC(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(pE),zO=function(){function n(t,e,r,i,o,s){this.sourceProj_=t,this.targetProj_=e;var a={},c=yv(this.targetProj_,this.sourceProj_);this.transformInv_=function(j){var G=j[0]+"/"+j[1];return a[G]||(a[G]=c(j)),a[G]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Os(i)==Os(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Os(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Os(this.targetProj_.getExtent()):null;var h=lf(r),p=uf(r),m=sm(r),E=TC(r),S=this.transformInv_(h),x=this.transformInv_(p),P=this.transformInv_(m),R=this.transformInv_(E),F=10+(s?Math.max(0,Math.ceil(Math.log2(BT(r)/(s*s*256*256)))):0);if(this.addQuad_(h,p,m,E,S,x,P,R,F),this.wrapsXInSource_){var D=1/0;this.triangles_.forEach(function(j,G,X){D=Math.min(D,j.source[0][0],j.source[1][0],j.source[2][0])}),this.triangles_.forEach(function(j){if(Math.max(j.source[0][0],j.source[1][0],j.source[2][0])-D>this.sourceWorldWidth_/2){var G=[[j.source[0][0],j.source[0][1]],[j.source[1][0],j.source[1][1]],[j.source[2][0],j.source[2][1]]];G[0][0]-D>this.sourceWorldWidth_/2&&(G[0][0]-=this.sourceWorldWidth_),G[1][0]-D>this.sourceWorldWidth_/2&&(G[1][0]-=this.sourceWorldWidth_),G[2][0]-D>this.sourceWorldWidth_/2&&(G[2][0]-=this.sourceWorldWidth_);var X=Math.min(G[0][0],G[1][0],G[2][0]);Math.max(G[0][0],G[1][0],G[2][0])-X<this.sourceWorldWidth_/2&&(j.source=G)}}.bind(this))}a={}}return n.prototype.addTriangle_=function(t,e,r,i,o,s){this.triangles_.push({source:[i,o,s],target:[t,e,r]})},n.prototype.addQuad_=function(t,e,r,i,o,s,a,c,h){var p=Od([o,s,a,c]),m=this.sourceWorldWidth_?Os(p)/this.sourceWorldWidth_:null,E=this.sourceWorldWidth_,S=this.sourceProj_.canWrapX()&&m>.5&&m<1,x=!1;if(h>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(x=Os(Od([t,e,r,i]))/this.targetWorldWidth_>.25||x),!S&&this.sourceProj_.isGlobal()&&m&&(x=m>.25||x)),x||!this.maxSourceExtent_||oa(p,this.maxSourceExtent_)){if(!(x||isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(c[0])&&isFinite(c[1]))){if(!(h>0))return;x=!0}if(h>0){if(!x){var D=this.transformInv_([(t[0]+r[0])/2,(t[1]+r[1])/2]),j=void 0;j=S?(lm(o[0],E)+lm(a[0],E))/2-lm(D[0],E):(o[0]+a[0])/2-D[0];var X=(o[1]+a[1])/2-D[1];x=j*j+X*X>this.errorThresholdSquared_}if(x){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var $=[(e[0]+r[0])/2,(e[1]+r[1])/2],le=this.transformInv_($),ie=[(i[0]+t[0])/2,(i[1]+t[1])/2],Fe=this.transformInv_(ie);this.addQuad_(t,e,$,ie,o,s,le,Fe,h-1),this.addQuad_(ie,$,r,i,Fe,le,a,c,h-1)}else{var Ce=[(t[0]+e[0])/2,(t[1]+e[1])/2],$e=this.transformInv_(Ce),ot=[(r[0]+i[0])/2,(r[1]+i[1])/2],st=this.transformInv_(ot);this.addQuad_(t,Ce,ot,i,o,$e,st,c,h-1),this.addQuad_(Ce,e,r,ot,$e,s,a,st,h-1)}return}}if(S){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,r,i,o,a,c),this.addTriangle_(t,e,r,o,s,a)}},n.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,r,i){var o=e.source;fE(t,o[0]),fE(t,o[1]),fE(t,o[2])}),t},n.prototype.getTriangles=function(){return this.triangles_},n}();var tG=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Y4=function(n){function t(e,r,i,o,s,a,c,h,p,m,E){var S=n.call(this,s,0)||this;S.renderEdges_=void 0!==E&&E,S.pixelRatio_=c,S.gutter_=h,S.canvas_=null,S.sourceTileGrid_=r,S.targetTileGrid_=o,S.wrappedTileCoord_=a||s,S.sourceTiles_=[],S.sourcesListenerKeys_=null,S.sourceZ_=0;var x=o.getTileCoordExtent(S.wrappedTileCoord_),P=S.targetTileGrid_.getExtent(),R=S.sourceTileGrid_.getExtent(),F=P?Tp(x,P):x;if(0===BT(F))return S.state=4,S;var D=e.getExtent();D&&(R=R?Tp(R,D):D);var j=o.getResolution(S.wrappedTileCoord_[0]),X=GC(e,i,xp(F),j);if(!isFinite(X)||X<=0)return S.state=4,S;if(S.triangulation_=new zO(e,i,F,R,X*(void 0!==m?m:.5),j),0===S.triangulation_.getTriangles().length)return S.state=4,S;S.sourceZ_=r.getZForResolution(X);var $=S.triangulation_.calculateSourceExtent();if(R&&(e.canWrapX()?($[1]=Pp($[1],R[1],R[3]),$[3]=Pp($[3],R[1],R[3])):$=Tp($,R)),BT($)){for(var le=r.getTileRangeForExtentAndZ($,S.sourceZ_),ie=le.minX;ie<=le.maxX;ie++)for(var Fe=le.minY;Fe<=le.maxY;Fe++){var Ce=p(S.sourceZ_,ie,Fe,c);Ce&&S.sourceTiles_.push(Ce)}0===S.sourceTiles_.length&&(S.state=4)}else S.state=4;return S}return tG(t,n),t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var e=[];if(this.sourceTiles_.forEach(function(p,m,E){p&&2==p.getState()&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(p.tileCoord),image:p.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=3;else{var r=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(r),o="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],a=this.targetTileGrid_.getResolution(r),c=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Eh(o,s,this.pixelRatio_,c,this.sourceTileGrid_.getExtent(),a,h,this.triangulation_,e,this.gutter_,this.renderEdges_),this.state=2}this.changed()},t.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(r,i,o){var s=r.getState();if(0==s||1==s){e++;var a=Fl(r,"change",function(c){var h=r.getState();(2==h||3==h||4==h)&&(ya(a),0==--e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(a)}}.bind(this)),this.sourceTiles_.forEach(function(r,i,o){0==r.getState()&&r.load()}),0===e&&setTimeout(this.reproject_.bind(this),0)}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(ya),this.sourcesListenerKeys_=null},t}(pE);var q4=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function nG(n,t){n.getImage().src=t}const gP=function(n){function t(e){var r=n.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:nG,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,r.tileClass=void 0!==e.tileClass?e.tileClass:eG,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,r.renderReprojectionEdges_=!1,r}return q4(t,n),t.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},t.prototype.expireCache=function(e,r){var i=this.getTileCacheForProjection(e);for(var o in this.tileCache.expireCache(this.tileCache==i?r:{}),this.tileCacheForProjection){var s=this.tileCacheForProjection[o];s.expireCache(s==i?r:{})}},t.prototype.getGutterForProjection=function(e){return this.getProjection()&&e&&!hf(this.getProjection(),e)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!hf(this.getProjection(),e))&&n.prototype.getOpaque.call(this,e)},t.prototype.getTileGridForProjection=function(e){var r=this.getProjection();if(this.tileGrid&&(!r||hf(r,e)))return this.tileGrid;var i=Lr(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=iP(e)),this.tileGridForProjection[i]},t.prototype.getTileCacheForProjection=function(e){var r=this.getProjection();if(!r||hf(r,e))return this.tileCache;var i=Lr(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new KT(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},t.prototype.createTile_=function(e,r,i,o,s,a){var c=[e,r,i],h=this.getTileCoordForTileUrlFunction(c,s),p=h?this.tileUrlFunction(h,o,s):void 0,m=new this.tileClass(c,void 0!==p?0:4,void 0!==p?p:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return m.key=a,m.addEventListener("change",this.handleTileChange.bind(this)),m},t.prototype.getTile=function(e,r,i,o,s){var a=this.getProjection();if(!a||!s||hf(a,s))return this.getTileInternal(e,r,i,o,a||s);var c=this.getTileCacheForProjection(s),h=[e,r,i],p=void 0,m=XT(h);c.containsKey(m)&&(p=c.get(m));var E=this.getKey();if(p&&p.key==E)return p;var S=this.getTileGridForProjection(a),x=this.getTileGridForProjection(s),P=this.getTileCoordForTileUrlFunction(h,s),R=new Y4(a,S,s,x,h,P,this.getTilePixelRatio(o),this.getGutter(),function(F,D,j,G){return this.getTileInternal(F,D,j,G,a)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return R.key=E,p?(R.interimTile=p,R.refreshInterimChain(),c.replace(m,R)):c.set(m,R),R},t.prototype.getTileInternal=function(e,r,i,o,s){var a=null,c=gE(e,r,i),h=this.getKey();if(this.tileCache.containsKey(c)){if((a=this.tileCache.get(c)).key!=h){var p=a;(a=this.createTile_(e,r,i,o,s,h)).interimTile=0==p.getState()?p.interimTile:p,a.refreshInterimChain(),this.tileCache.replace(c,a)}}else a=this.createTile_(e,r,i,o,s,h),this.tileCache.set(c,a);return a},t.prototype.setRenderReprojectionEdges=function(e){if(this.renderReprojectionEdges_!=e){for(var r in this.renderReprojectionEdges_=e,this.tileCacheForProjection)this.tileCacheForProjection[r].clear();this.changed()}},t.prototype.setTileGridForProjection=function(e,r){var i=Ar(e);if(i){var o=Lr(i);o in this.tileGridForProjection||(this.tileGridForProjection[o]=r)}},t}(DC);function UC(n,t,e){var r=void 0!==e?n.toFixed(e):""+n,i=r.indexOf(".");return(i=-1===i?r.length:i)>t?r:new Array(1+t-i).join("0")+r}function rG(n,t){for(var e=(""+n).split("."),r=(""+t).split("."),i=0;i<Math.max(e.length,r.length);i++){var o=parseInt(e[i]||"0",10),s=parseInt(r[i]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}function SE(n,t){var e=[];Object.keys(t).forEach(function(i){null!=t[i]&&e.push(i+"="+encodeURIComponent(t[i]))});var r=e.join("&");return(n=-1===(n=n.replace(/[?&]$/,"")).indexOf("?")?n+"?":n+"&")+r}var iG=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function Z4(n,t,e){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(e)),!(r.getResolutions().length<=n[0])){1!=t&&(!this.hidpi_||void 0===this.serverType_)&&(t=1);var i=r.getResolution(n[0]),o=r.getTileCoordExtent(n,this.tmpExtent_),s=Ld(r.getTileSize(n[0]),this.tmpSize),a=this.gutter_;0!==a&&(s=aO(s,a,this.tmpSize),o=vh(o,i*a,o)),1!=t&&(s=lO(s,t,this.tmpSize));var c={SERVICE:"WMS",VERSION:Op,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return qa(c,this.params_),this.getRequestUrl_(n,s,o,t,e,c)}}const HO=function(n){function t(e){var r=this,i=e||{},o=i.params||{};return(r=n.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:!(!("TRANSPARENT"in o)||o.TRANSPARENT),projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,tileUrlFunction:Z4,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition})||this).gutter_=void 0!==i.gutter?i.gutter:0,r.params_=o,r.v13_=!0,r.serverType_=i.serverType,r.hidpi_=void 0===i.hidpi||i.hidpi,r.tmpExtent_=[1/0,1/0,-1/0,-1/0],r.updateV13_(),r.setKey(r.getKeyForParams_()),r}return iG(t,n),t.prototype.getFeatureInfoUrl=function(e,r,i,o){var s=Ar(i),a=this.getProjection(),c=this.getTileGrid();c||(c=this.getTileGridForProjection(s));var h=c.getZForResolution(r,this.zDirection),p=c.getTileCoordForCoordAndZ(e,h);if(!(c.getResolutions().length<=p[0])){var m=c.getResolution(p[0]),E=c.getTileCoordExtent(p,this.tmpExtent_),S=Ld(c.getTileSize(p[0]),this.tmpSize),x=this.gutter_;0!==x&&(S=aO(S,x,this.tmpSize),E=vh(E,m*x,E)),a&&a!==s&&(m=GC(a,s,e,m),E=kd(E,s,a),e=Qi(e,s,a));var P={SERVICE:"WMS",VERSION:Op,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};qa(P,this.params_,o);var R=Math.floor((e[0]-E[0])/m),F=Math.floor((E[3]-e[1])/m);return P[this.v13_?"I":"X"]=R,P[this.v13_?"J":"Y"]=F,this.getRequestUrl_(p,S,E,1,a||s,P)}},t.prototype.getLegendUrl=function(e,r){if(void 0!==this.urls[0]){var i={SERVICE:"WMS",VERSION:Op,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===r||void 0===r.LAYER){var o=this.params_.LAYERS;if(Array.isArray(o)&&1!==o.length)return;i.LAYER=o}if(void 0!==e){var a=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=e*a*39.37*(25.4/.28)}return qa(i,r),SE(this.urls[0],i)}},t.prototype.getGutter=function(){return this.gutter_},t.prototype.getParams=function(){return this.params_},t.prototype.getRequestUrl_=function(e,r,i,o,s,a){var c=this.urls;if(c){if(a.WIDTH=r[0],a.HEIGHT=r[1],a[this.v13_?"CRS":"SRS"]=s.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=o)switch(this.serverType_){case"geoserver":var h=90*o+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+h:a.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":a.MAP_RESOLUTION=90*o;break;case"carmentaserver":case"qgis":a.DPI=90*o;break;default:qi(!1,52)}var p=s.getAxisOrientation(),m=i;if(this.v13_&&"ne"==p.substr(0,2)){var E=void 0;E=i[0],m[0]=i[1],m[1]=E,E=i[2],m[2]=i[3],m[3]=E}return a.BBOX=m.join(","),SE(1==c.length?c[0]:c[lm(PC(e),c.length)],a)}},t.prototype.getTilePixelRatio=function(e){return this.hidpi_&&void 0!==this.serverType_?e:1},t.prototype.getKeyForParams_=function(){var e=0,r=[];for(var i in this.params_)r[e++]=i+"-"+this.params_[i];return r.join("/")},t.prototype.updateParams=function(e){qa(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())},t.prototype.updateV13_=function(){this.v13_=rG(this.params_.VERSION||Op,"1.3")>=0},t}(gP);var l=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const d=function(n){function t(e){var r=this,i=void 0!==e.requestEncoding?e.requestEncoding:"KVP",o=e.tileGrid,s=e.urls;return void 0===s&&void 0!==e.url&&(s=PF(e.url)),(r=n.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:o,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:TF,urls:s,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition})||this).version_=void 0!==e.version?e.version:"1.0.0",r.format_=void 0!==e.format?e.format:"image/jpeg",r.dimensions_=void 0!==e.dimensions?e.dimensions:{},r.layer_=e.layer,r.matrixSet_=e.matrixSet,r.style_=e.style,r.requestEncoding_=i,r.setKey(r.getKeyForDimensions_()),s&&s.length>0&&(r.tileUrlFunction=pO(s.map(v.bind(r)))),r}return l(t,n),t.prototype.setUrls=function(e){this.urls=e;var r=e.join("\n");this.setTileUrlFunction(pO(e.map(v.bind(this))),r)},t.prototype.getDimensions=function(){return this.dimensions_},t.prototype.getFormat=function(){return this.format_},t.prototype.getLayer=function(){return this.layer_},t.prototype.getMatrixSet=function(){return this.matrixSet_},t.prototype.getRequestEncoding=function(){return this.requestEncoding_},t.prototype.getStyle=function(){return this.style_},t.prototype.getVersion=function(){return this.version_},t.prototype.getKeyForDimensions_=function(){var e=0,r=[];for(var i in this.dimensions_)r[e++]=i+"-"+this.dimensions_[i];return r.join("/")},t.prototype.updateDimensions=function(e){qa(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())},t}(gP);function v(n){var t=this.requestEncoding_,e={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==t&&qa(e,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),n="KVP"==t?SE(n,e):n.replace(/\{(\w+?)\}/g,function(o,s){return s.toLowerCase()in e?e[s.toLowerCase()]:o});var r=this.tileGrid,i=this.dimensions_;return function(o,s,a){if(o){var c={TileMatrix:r.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};qa(c,i);var h=n;return"KVP"==t?SE(h,c):h.replace(/\{(\w+?)\}/g,function(p,m){return c[m]})}}}var C=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const I=function(n){function t(e,r,i,o,s,a){var c=this,h=e.getExtent(),p=r.getExtent(),m=p?Tp(i,p):i,S=GC(e,r,xp(m),o),P=new zO(e,r,m,h,.5*S,o),F=a(P.calculateSourceExtent(),S,s),D=F?0:4,j=F?F.getPixelRatio():1;return(c=n.call(this,i,o,j,D)||this).targetProj_=r,c.maxSourceExtent_=h,c.triangulation_=P,c.targetResolution_=o,c.targetExtent_=i,c.sourceImage_=F,c.sourcePixelRatio_=j,c.canvas_=null,c.sourceListenerKey_=null,c}return C(t,n),t.prototype.disposeInternal=function(){1==this.state&&this.unlistenSource_(),n.prototype.disposeInternal.call(this)},t.prototype.getImage=function(){return this.canvas_},t.prototype.getProjection=function(){return this.targetProj_},t.prototype.reproject_=function(){var e=this.sourceImage_.getState();if(2==e){var r=Os(this.targetExtent_)/this.targetResolution_,i=$u(this.targetExtent_)/this.targetResolution_;this.canvas_=Eh(r,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),0,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=e,this.changed()},t.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var e=this.sourceImage_.getState();2==e||3==e?this.reproject_():(this.sourceListenerKey_=Fl(this.sourceImage_,"change",function(r){var i=this.sourceImage_.getState();(2==i||3==i)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},t.prototype.unlistenSource_=function(){ya(this.sourceListenerKey_),this.sourceListenerKey_=null},t}(GO);var N=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Z=function(n){function t(e,r){var i=n.call(this,e)||this;return i.image=r,i}return N(t,n),t}(Rd);function be(n,t){n.getImage().src=t}const He=function(n){function t(e){var r=n.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return r.resolutions_=void 0!==e.resolutions?e.resolutions:null,r.reprojectedImage_=null,r.reprojectedRevision_=0,r}return N(t,n),t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.findNearestResolution=function(e){if(this.resolutions_){var r=VR(this.resolutions_,e,0);e=this.resolutions_[r]}return e},t.prototype.getImage=function(e,r,i,o){var s=this.getProjection();if(!s||!o||hf(s,o))return s&&(o=s),this.getImageInternal(e,r,i,o);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&hf(this.reprojectedImage_.getProjection(),o)&&this.reprojectedImage_.getResolution()==r&&Sp(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new I(s,o,e,r,i,function(a,c,h){return this.getImageInternal(a,c,h,s)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_},t.prototype.getImageInternal=function(e,r,i,o){return Ir()},t.prototype.handleImageChange=function(e){var r=e.target;switch(r.getState()){case 1:this.loading=!0,this.dispatchEvent(new Z("imageloadstart",r));break;case 2:this.loading=!1,this.dispatchEvent(new Z("imageloadend",r));break;case 3:this.loading=!1,this.dispatchEvent(new Z("imageloaderror",r))}},t}(nP);var lt=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rt=[101,101];const hn=function(n){function t(e){var r=this,i=e||{};return(r=n.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions})||this).crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,r.url_=i.url,r.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:be,r.params_=i.params||{},r.v13_=!0,r.updateV13_(),r.serverType_=i.serverType,r.hidpi_=void 0===i.hidpi||i.hidpi,r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==i.ratio?i.ratio:1.5,r}return lt(t,n),t.prototype.getFeatureInfoUrl=function(e,r,i,o){if(void 0!==this.url_){var s=Ar(i),a=this.getProjection();a&&a!==s&&(r=GC(a,s,e,r),e=Qi(e,s,a));var c=jT(e,r,0,Rt),h={SERVICE:"WMS",VERSION:Op,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};qa(h,this.params_,o);var p=Math.floor((e[0]-c[0])/r),m=Math.floor((c[3]-e[1])/r);return h[this.v13_?"I":"X"]=p,h[this.v13_?"J":"Y"]=m,this.getRequestUrl_(c,Rt,1,a||s,h)}},t.prototype.getLegendUrl=function(e,r){if(void 0!==this.url_){var i={SERVICE:"WMS",VERSION:Op,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===r||void 0===r.LAYER){var o=this.params_.LAYERS;if(Array.isArray(o)&&1!==o.length)return;i.LAYER=o}if(void 0!==e){var a=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=e*a*39.37*(25.4/.28)}return qa(i,r),SE(this.url_,i)}},t.prototype.getParams=function(){return this.params_},t.prototype.getImageInternal=function(e,r,i,o){if(void 0===this.url_)return null;r=this.findNearestResolution(r),1!=i&&(!this.hidpi_||void 0===this.serverType_)&&(i=1);var s=r/i,a=xp(e),p=jT(a,s,0,[Math.ceil(Os(e)/s),Math.ceil($u(e)/s)]),S=jT(a,s,0,[Math.ceil(this.ratio_*Os(e)/s),Math.ceil(this.ratio_*$u(e)/s)]),x=this.image_;if(x&&this.renderedRevision_==this.getRevision()&&x.getResolution()==r&&x.getPixelRatio()==i&&eu(x.getExtent(),p))return x;var P={SERVICE:"WMS",VERSION:Op,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};qa(P,this.params_),this.imageSize_[0]=Math.round(Os(S)/s),this.imageSize_[1]=Math.round($u(S)/s);var R=this.getRequestUrl_(S,this.imageSize_,i,o,P);return this.image_=new jO(S,r,i,R,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener("change",this.handleImageChange.bind(this)),this.image_},t.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},t.prototype.getRequestUrl_=function(e,r,i,o,s){if(qi(void 0!==this.url_,9),s[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(s.STYLES=""),1!=i)switch(this.serverType_){case"geoserver":var a=90*i+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+a:s.FORMAT_OPTIONS="dpi:"+a;break;case"mapserver":s.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":s.DPI=90*i;break;default:qi(!1,8)}s.WIDTH=r[0],s.HEIGHT=r[1];var h,c=o.getAxisOrientation();return h=this.v13_&&"ne"==c.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,s.BBOX=h.join(","),SE(this.url_,s)},t.prototype.getUrl=function(){return this.url_},t.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},t.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},t.prototype.updateParams=function(e){qa(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},t.prototype.updateV13_=function(){this.v13_=rG(this.params_.VERSION||Op,"1.3")>=0},t}(He);var _a=uv,gm=cE,Lp=function(n){return"pointermove"==n.type},kp=function(n){return"singleclick"==n.type},vP=function(n){var t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},zC=function(n){var t=n.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},RV=function(n){var t=n.pointerEvent;return qi(void 0!==t,56),t.isPrimary&&0===t.button};var OV=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const J4=function(n){function t(e){var r=n.call(this)||this;return e.handleEvent&&(r.handleEvent=e.handleEvent),r.map_=null,r.setActive(!0),r}return OV(t,n),t.prototype.getActive=function(){return this.get("active")},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(e){return!0},t.prototype.setActive=function(e){this.set("active",e)},t.prototype.setMap=function(e){this.map_=e},t}(mh);var Q4=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,$4=/^([a-z]*)$|^hsla?\(.*\)$/i;var kV=function(){var t={},e=0;return function(r){var i;if(t.hasOwnProperty(r))i=t[r];else{if(e>=1024){var o=0;for(var s in t)0==(3&o++)&&(delete t[s],--e)}i=function(n){var t,e,r,i,o;if($4.exec(n)&&(n=function(n){var t=document.createElement("div");if(t.style.color=n,""!==t.style.color){document.body.appendChild(t);var e=getComputedStyle(t).color;return document.body.removeChild(t),e}return""}(n)),Q4.exec(n)){var a,s=n.length-1;a=s<=4?1:2;var c=4===s||8===s;t=parseInt(n.substr(1+0*a,a),16),e=parseInt(n.substr(1+1*a,a),16),r=parseInt(n.substr(1+2*a,a),16),i=c?parseInt(n.substr(1+3*a,a),16):255,1==a&&(t=(t<<4)+t,e=(e<<4)+e,r=(r<<4)+r,c&&(i=(i<<4)+i)),o=[t,e,r,i/255]}else 0==n.indexOf("rgba(")?tB(o=n.slice(5,-1).split(",").map(Number)):0==n.indexOf("rgb(")?((o=n.slice(4,-1).split(",").map(Number)).push(1),tB(o)):qi(!1,14);return o}(r),t[r]=i,++e}return i}}();function sG(n){return Array.isArray(n)?n:kV(n)}function tB(n){return n[0]=Pp(n[0]+.5|0,0,255),n[1]=Pp(n[1]+.5|0,0,255),n[2]=Pp(n[2]+.5|0,0,255),n[3]=Pp(n[3],0,1),n}function nB(n){var t=n[0];t!=(0|t)&&(t=t+.5|0);var e=n[1];e!=(0|e)&&(e=e+.5|0);var r=n[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+t+","+e+","+r+","+(void 0===n[3]?1:n[3])+")"}function Np(n){return Array.isArray(n)?nB(n):n}var aG=new Array(6);function rB(n){return yP(n,1,0,0,1,0,0)}function XO(n,t){var e=n[0],r=n[1],i=n[2],o=n[3],s=n[4],a=n[5],c=t[0],h=t[1],p=t[2],m=t[3],E=t[4],S=t[5];return n[0]=e*c+i*h,n[1]=r*c+o*h,n[2]=e*p+i*m,n[3]=r*p+o*m,n[4]=e*E+i*S+s,n[5]=r*E+o*S+a,n}function yP(n,t,e,r,i,o,s){return n[0]=t,n[1]=e,n[2]=r,n[3]=i,n[4]=o,n[5]=s,n}function Ra(n,t){var e=t[0],r=t[1];return t[0]=n[0]*e+n[2]*r+n[4],t[1]=n[1]*e+n[3]*r+n[5],t}function lG(n,t,e){return XO(n,yP(aG,t,0,0,e,0,0))}function Fp(n,t,e,r,i,o,s,a){var c=Math.sin(o),h=Math.cos(o);return n[0]=r*h,n[1]=i*c,n[2]=-r*c,n[3]=i*h,n[4]=s*r*h-a*r*c+t,n[5]=s*i*c+a*i*h+e,n}function uG(n,t){var e=function(n){return n[0]*n[3]-n[1]*n[2]}(t);qi(0!==e,32);var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],c=t[5];return n[0]=s/e,n[1]=-i/e,n[2]=-o/e,n[3]=r/e,n[4]=(o*c-s*a)/e,n[5]=-(r*c-i*a)/e,n}function KO(n){return"matrix("+n.join(", ")+")"}var iB="10px sans-serif",mm="#000",HC="round",ZO=[],WC="round",EP="#000",bP="center",QO="middle",YC=[0,0,0,0],Cv=new mh,cG=new cv;cG.setSize=function(){console.warn("labelCache is deprecated.")};var dG,qC=null,hG={},UV=function(){var o,s,t="32px ",e=["monospace","serif"],r=e.length,i="wmytzilWMYTZIL@#/&?$%10\uf013";function a(h,p,m){for(var E=!0,S=0;S<r;++S){var x=e[S];if(s=$O(h+" "+p+" "+t+x,i),m!=x){var P=$O(h+" "+p+" "+t+m+","+x,i);E=E&&P!=s}}return!!E}function c(){for(var h=!0,p=Cv.getKeys(),m=0,E=p.length;m<E;++m){var S=p[m];Cv.get(S)<100&&(a.apply(this,S.split("\n"))?(Ia(hG),qC=null,dG=void 0,Cv.set(S,100)):(Cv.set(S,Cv.get(S)+1,!0),h=!1))}h&&(clearInterval(o),o=void 0)}return function(h){var p=cF(h);if(p)for(var m=p.families,E=0,S=m.length;E<S;++E){var x=m[E],P=p.style+"\n"+p.weight+"\n"+x;void 0===Cv.get(P)&&(Cv.set(P,100,!0),a(p.style,p.weight,x)||(Cv.set(P,0,!0),void 0===o&&(o=setInterval(c,32))))}}}(),VV=function(){var n,t=hG;return function(e){var r=t[e];if(null==r)if(NT){var i=cF(e),o=oB(e,"\u017dg"),s=isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight);hG[e]=s*(o.actualBoundingBoxAscent+o.actualBoundingBoxDescent)}else n||((n=document.createElement("div")).innerHTML="M",n.style.margin="0 !important",n.style.padding="0 !important",n.style.position="absolute !important",n.style.left="-99999px !important"),n.style.font=e,document.body.appendChild(n),t[e]=r=n.offsetHeight,document.body.removeChild(n);return r}}();function oB(n,t){return qC||(qC=Ju(1,1)),n!=dG&&(qC.font=n,dG=qC.font),qC.measureText(t)}function $O(n,t){return oB(n,t).width}function sB(n,t,e){if(t in e)return e[t];var r=$O(n,t);return e[t]=r,r}function aB(n,t,e,r){0!==t&&(n.translate(e,r),n.rotate(t),n.translate(-e,-r))}function lB(n,t,e,r,i,o,s,a,c,h,p){n.save(),1!==e&&(n.globalAlpha*=e),t&&n.setTransform.apply(n,t),r.contextInstructions?(n.translate(c,h),n.scale(p,p),function(n,t){for(var e=n.contextInstructions,r=0,i=e.length;r<i;r+=2)Array.isArray(e[r+1])?t[e[r]].apply(t,e[r+1]):t[e[r]]=e[r+1]}(r,n)):n.drawImage(r,i,o,s,a,c,h,s*p,a*p),n.restore()}var eD=null;const tD=function(){function n(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.displacement_=t.displacement}return n.prototype.clone=function(){return new n({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},n.prototype.getOpacity=function(){return this.opacity_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getDisplacement=function(){return this.displacement_},n.prototype.getAnchor=function(){return Ir()},n.prototype.getImage=function(t){return Ir()},n.prototype.getHitDetectionImage=function(t){return Ir()},n.prototype.getImageState=function(){return Ir()},n.prototype.getImageSize=function(){return Ir()},n.prototype.getHitDetectionImageSize=function(){return Ir()},n.prototype.getOrigin=function(){return Ir()},n.prototype.getSize=function(){return Ir()},n.prototype.setOpacity=function(t){this.opacity_=t},n.prototype.setRotateWithView=function(t){this.rotateWithView_=t},n.prototype.setRotation=function(t){this.rotation_=t},n.prototype.setScale=function(t){this.scale_=t},n.prototype.listenImageChange=function(t){Ir()},n.prototype.load=function(){Ir()},n.prototype.unlistenImageChange=function(t){Ir()},n}();var qV=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const KV=function(n){function t(e){var r=this;return(r=n.call(this,{opacity:1,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,rotation:void 0!==e.rotation?e.rotation:0,scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=null,r.hitDetectionCanvas_=null,r.fill_=void 0!==e.fill?e.fill:null,r.origin_=[0,0],r.points_=e.points,r.radius_=void 0!==e.radius?e.radius:e.radius1,r.radius2_=e.radius2,r.angle_=void 0!==e.angle?e.angle:0,r.stroke_=void 0!==e.stroke?e.stroke:null,r.anchor_=null,r.size_=null,r.imageSize_=null,r.hitDetectionImageSize_=null,r.render(),r}return qV(t,n),t.prototype.clone=function(){var e=new t({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return e.setOpacity(this.getOpacity()),e.setScale(this.getScale()),e},t.prototype.getAnchor=function(){return this.anchor_},t.prototype.getAngle=function(){return this.angle_},t.prototype.getFill=function(){return this.fill_},t.prototype.getHitDetectionImage=function(e){return this.hitDetectionCanvas_},t.prototype.getImage=function(e){return this.canvas_},t.prototype.getImageSize=function(){return this.imageSize_},t.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},t.prototype.getImageState=function(){return 2},t.prototype.getOrigin=function(){return this.origin_},t.prototype.getPoints=function(){return this.points_},t.prototype.getRadius=function(){return this.radius_},t.prototype.getRadius2=function(){return this.radius2_},t.prototype.getSize=function(){return this.size_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.listenImageChange=function(e){},t.prototype.load=function(){},t.prototype.unlistenImageChange=function(e){},t.prototype.render=function(){var a,e=HC,r=WC,i=0,o=null,s=0,c=0;this.stroke_&&(null===(a=this.stroke_.getColor())&&(a=EP),a=Np(a),void 0===(c=this.stroke_.getWidth())&&(c=1),o=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),void 0===(r=this.stroke_.getLineJoin())&&(r=WC),void 0===(e=this.stroke_.getLineCap())&&(e=HC),void 0===(i=this.stroke_.getMiterLimit())&&(i=10));var h=2*(this.radius_+c)+1,p={strokeStyle:a,strokeWidth:c,size:h,lineCap:e,lineDash:o,lineDashOffset:s,lineJoin:r,miterLimit:i},m=Ju(h,h);this.canvas_=m.canvas;var E=h=this.canvas_.width,S=this.getDisplacement();this.draw_(p,m,0,0),this.createHitDetectionCanvas_(p),this.anchor_=[h/2-S[0],h/2+S[1]],this.size_=[h,h],this.imageSize_=[E,E]},t.prototype.draw_=function(e,r,i,o){var s,a,c;r.setTransform(1,0,0,1,0,0),r.translate(i,o),r.beginPath();var h=this.points_;if(h===1/0)r.arc(e.size/2,e.size/2,this.radius_,0,2*Math.PI,!0);else{var p=void 0!==this.radius2_?this.radius2_:this.radius_;for(p!==this.radius_&&(h*=2),s=0;s<=h;s++)a=2*s*Math.PI/h-Math.PI/2+this.angle_,r.lineTo(e.size/2+(c=s%2==0?this.radius_:p)*Math.cos(a),e.size/2+c*Math.sin(a))}if(this.fill_){var m=this.fill_.getColor();null===m&&(m=mm),r.fillStyle=Np(m),r.fill()}this.stroke_&&(r.strokeStyle=e.strokeStyle,r.lineWidth=e.strokeWidth,r.setLineDash&&e.lineDash&&(r.setLineDash(e.lineDash),r.lineDashOffset=e.lineDashOffset),r.lineCap=e.lineCap,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit,r.stroke()),r.closePath()},t.prototype.createHitDetectionCanvas_=function(e){if(this.hitDetectionImageSize_=[e.size,e.size],this.hitDetectionCanvas_=this.canvas_,this.fill_){var r=this.fill_.getColor(),i=0;if("string"==typeof r&&(r=sG(r)),null===r?i=1:Array.isArray(r)&&(i=4===r.length?r[3]:1),0===i){var o=Ju(e.size,e.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(e,o,0,0)}}},t.prototype.drawHitDetectionCanvas_=function(e,r,i,o){r.setTransform(1,0,0,1,0,0),r.translate(i,o),r.beginPath();var s=this.points_;if(s===1/0)r.arc(e.size/2,e.size/2,this.radius_,0,2*Math.PI,!0);else{var a=void 0!==this.radius2_?this.radius2_:this.radius_;a!==this.radius_&&(s*=2);var c=void 0,h=void 0,p=void 0;for(c=0;c<=s;c++)p=2*c*Math.PI/s-Math.PI/2+this.angle_,r.lineTo(e.size/2+(h=c%2==0?this.radius_:a)*Math.cos(p),e.size/2+h*Math.sin(p))}r.fillStyle=mm,r.fill(),this.stroke_&&(r.strokeStyle=e.strokeStyle,r.lineWidth=e.strokeWidth,e.lineDash&&(r.setLineDash(e.lineDash),r.lineDashOffset=e.lineDashOffset),r.stroke()),r.closePath()},t}(tD);var ZV=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Bd=function(n){function t(e){var i=e||{};return n.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,displacement:void 0!==i.displacement?i.displacement:[0,0]})||this}return ZV(t,n),t.prototype.clone=function(){var e=new t({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return e.setOpacity(this.getOpacity()),e.setScale(this.getScale()),e},t.prototype.setRadius=function(e){this.radius_=e,this.render()},t}(KV),ro=function(){function n(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return n.prototype.clone=function(){var t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0})},n.prototype.getColor=function(){return this.color_},n.prototype.setColor=function(t){this.color_=t},n}(),Gi=function(){function n(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return n.prototype.clone=function(){var t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},n.prototype.getColor=function(){return this.color_},n.prototype.getLineCap=function(){return this.lineCap_},n.prototype.getLineDash=function(){return this.lineDash_},n.prototype.getLineDashOffset=function(){return this.lineDashOffset_},n.prototype.getLineJoin=function(){return this.lineJoin_},n.prototype.getMiterLimit=function(){return this.miterLimit_},n.prototype.getWidth=function(){return this.width_},n.prototype.setColor=function(t){this.color_=t},n.prototype.setLineCap=function(t){this.lineCap_=t},n.prototype.setLineDash=function(t){this.lineDash_=t},n.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},n.prototype.setLineJoin=function(t){this.lineJoin_=t},n.prototype.setMiterLimit=function(t){this.miterLimit_=t},n.prototype.setWidth=function(t){this.width_=t},n}();var XC=function(){function n(t){var e=t||{};this.geometry_=null,this.geometryFunction_=uB,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return n.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new n({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},n.prototype.getRenderer=function(){return this.renderer_},n.prototype.setRenderer=function(t){this.renderer_=t},n.prototype.getGeometry=function(){return this.geometry_},n.prototype.getGeometryFunction=function(){return this.geometryFunction_},n.prototype.getFill=function(){return this.fill_},n.prototype.setFill=function(t){this.fill_=t},n.prototype.getImage=function(){return this.image_},n.prototype.setImage=function(t){this.image_=t},n.prototype.getStroke=function(){return this.stroke_},n.prototype.setStroke=function(t){this.stroke_=t},n.prototype.getText=function(){return this.text_},n.prototype.setText=function(t){this.text_=t},n.prototype.getZIndex=function(){return this.zIndex_},n.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=uB,this.geometry_=t},n.prototype.setZIndex=function(t){this.zIndex_=t},n}(),fG=null;function tz(n,t){if(!fG){var e=new ro({color:"rgba(255,255,255,0.4)"}),r=new Gi({color:"#3399CC",width:1.25});fG=[new XC({image:new Bd({fill:e,stroke:r,radius:5}),fill:e,stroke:r})]}return fG}function pG(){var n={},t=[255,255,255,1],e=[0,153,255,1];return n.Polygon=[new XC({fill:new ro({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new XC({stroke:new Gi({color:t,width:5})}),new XC({stroke:new Gi({color:e,width:3})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new XC({image:new Bd({radius:6,fill:new ro({color:e}),stroke:new Gi({color:t,width:1.5})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function uB(n){return n.getGeometry()}const br=XC;var cB=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),rz=function(n){function t(e,r,i,o){var s=n.call(this,e)||this;return s.selected=r,s.deselected=i,s.mapBrowserEvent=o,s}return cB(t,n),t}(Rd),nD={};function oz(n){if(!this.condition_(n))return!0;var t=this.addCondition_(n),e=this.removeCondition_(n),r=this.toggleCondition_(n),i=!t&&!e&&!r,o=n.map,s=this.getFeatures(),a=[],c=[];if(i){Ia(this.featureLayerAssociation_),o.forEachFeatureAtPixel(n.pixel,function(S,x){if(this.filter_(S,x))return c.push(S),this.addFeatureLayerAssociation_(S,x),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var h=s.getLength()-1;h>=0;--h){var p=s.item(h),m=c.indexOf(p);m>-1?c.splice(m,1):(s.remove(p),a.push(p))}0!==c.length&&s.extend(c)}else{o.forEachFeatureAtPixel(n.pixel,function(S,x){if(this.filter_(S,x))return!t&&!r||Ku(s.getArray(),S)?(e||r)&&Ku(s.getArray(),S)&&(a.push(S),this.removeFeatureLayerAssociation_(S)):(c.push(S),this.addFeatureLayerAssociation_(S,x)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var E=a.length-1;E>=0;--E)s.remove(a[E]);s.extend(c)}return(c.length>0||a.length>0)&&this.dispatchEvent(new rz("select",c,a,n)),!0}const pf=function(n){function t(e){var o,r=n.call(this,{handleEvent:oz})||this,i=e||{};if(r.boundAddFeature_=r.addFeature_.bind(r),r.boundRemoveFeature_=r.removeFeature_.bind(r),r.condition_=i.condition?i.condition:kp,r.addCondition_=i.addCondition?i.addCondition:gm,r.removeCondition_=i.removeCondition?i.removeCondition:gm,r.toggleCondition_=i.toggleCondition?i.toggleCondition:zC,r.multi_=!!i.multi&&i.multi,r.filter_=i.filter?i.filter:uv,r.hitTolerance_=i.hitTolerance?i.hitTolerance:0,r.style_=void 0!==i.style?i.style:function(){var n=pG();return Qo(n.Polygon,n.LineString),Qo(n.GeometryCollection,n.LineString),function(t){return t.getGeometry()?n[t.getGeometry().getType()]:null}}(),r.features_=i.features||new hm,i.layers)if("function"==typeof i.layers)o=i.layers;else{var s=i.layers;o=function(a){return Ku(s,a)}}else o=uv;return r.layerFilter_=o,r.featureLayerAssociation_={},r}return cB(t,n),t.prototype.addFeatureLayerAssociation_=function(e,r){this.featureLayerAssociation_[Lr(e)]=r},t.prototype.getFeatures=function(){return this.features_},t.prototype.getHitTolerance=function(){return this.hitTolerance_},t.prototype.getLayer=function(e){return this.featureLayerAssociation_[Lr(e)]},t.prototype.setHitTolerance=function(e){this.hitTolerance_=e},t.prototype.setMap=function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),n.prototype.setMap.call(this,e),e?(this.features_.addEventListener("add",this.boundAddFeature_),this.features_.addEventListener("remove",this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener("add",this.boundAddFeature_),this.features_.removeEventListener("remove",this.boundRemoveFeature_))},t.prototype.addFeature_=function(e){this.style_&&this.applySelectedStyle_(e.element)},t.prototype.removeFeature_=function(e){this.style_&&this.restorePreviousStyle_(e.element)},t.prototype.getStyle=function(){return this.style_},t.prototype.applySelectedStyle_=function(e){var r=Lr(e);r in nD||(nD[r]=e.getStyle()),e.setStyle(this.style_)},t.prototype.restorePreviousStyle_=function(e){var r=Lr(e),i=this.getMap().getInteractions().getArray().filter(function(o){return o instanceof t&&o.getStyle()&&-1!==o.getFeatures().getArray().indexOf(e)});i.length>0?e.setStyle(i[i.length-1].getStyle()):(e.setStyle(nD[r]),delete nD[r])},t.prototype.removeFeatureLayerAssociation_=function(e){delete this.featureLayerAssociation_[Lr(e)]},t}(J4);var az=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const jd=function(n){function t(e){var r=n.call(this)||this;return r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addEventListener(Vc(r.geometryName_),r.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?r.setGeometry(e):r.setProperties(e)),r}return az(t,n),t.prototype.clone=function(){var e=new t(this.getProperties());e.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&e.setGeometry(r.clone());var i=this.getStyle();return i&&e.setStyle(i),e},t.prototype.getGeometry=function(){return this.get(this.geometryName_)},t.prototype.getId=function(){return this.id_},t.prototype.getGeometryName=function(){return this.geometryName_},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.handleGeometryChange_=function(){this.changed()},t.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(ya(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=Fl(e,"change",this.handleGeometryChange_,this)),this.changed()},t.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},t.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?function(n){return"function"==typeof n?n:(Array.isArray(n)?t=n:(qi("function"==typeof n.getZIndex,41),t=[n]),function(){return t});var t}(e):void 0,this.changed()},t.prototype.setId=function(e){this.id_=e,this.changed()},t.prototype.setGeometryName=function(e){this.removeEventListener(Vc(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=e,this.addEventListener(Vc(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},t}(mh);function dB(n,t){var S,x,i=t[0],o=t[1],s=i[0],a=i[1],c=o[0],h=o[1],p=c-s,m=h-a,E=0===p&&0===m?0:(p*(n[0]-s)+m*(n[1]-a))/(p*p+m*m||0);return E<=0?(S=s,x=a):E>=1?(S=c,x=h):(S=s+E*p,x=a+E*m),[S,x]}function xE(n,t){for(var e=!0,r=n.length-1;r>=0;--r)if(n[r]!=t[r]){e=!1;break}return e}function KC(n,t){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r}function fB(n,t){return Math.sqrt(KC(n,t))}function pB(n,t){var e=t.getExtent();if(t.canWrapX()&&(n[0]<e[0]||n[0]>=e[2])){var r=Os(e),i=Math.floor((n[0]-e[0])/r);n[0]-=i*r}return n}function Sv(n,t,e,r,i,o){for(var s=o||[],a=0,c=t;c<e;c+=r){var h=n[c],p=n[c+1];s[a++]=i[0]*h+i[2]*p+i[4],s[a++]=i[1]*h+i[3]*p+i[5]}return o&&s.length!=a&&(s.length=a),s}function gB(n,t,e,r,i,o,s){for(var a=s||[],c=Math.cos(i),h=Math.sin(i),p=o[0],m=o[1],E=0,S=t;S<e;S+=r){var x=n[S]-p,P=n[S+1]-m;a[E++]=p+x*c-P*h,a[E++]=m+x*h+P*c;for(var R=S+2;R<S+r;++R)a[E++]=n[R]}return s&&a.length!=E&&(a.length=E),a}function mB(n,t,e,r,i,o,s){for(var a=s||[],c=0,h=t;h<e;h+=r){a[c++]=n[h]+i,a[c++]=n[h+1]+o;for(var p=h+2;p<h+r;++p)a[c++]=n[p]}return s&&a.length!=c&&(a.length=c),a}var pz=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vB=[1,0,0,1,0,0];const yB=function(n){function t(){var e=n.call(this)||this;return e.extent_=[1/0,1/0,-1/0,-1/0],e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=function(n){var e,r,i,t=!1;return function(){var o=Array.prototype.slice.call(arguments);return(!t||this!==i||!af(o,r))&&(t=!0,i=this,r=o,e=n.apply(this,arguments)),e}}(function(r,i,o){if(!o)return this.getSimplifiedGeometry(i);var s=this.clone();return s.applyTransform(o),s.getSimplifiedGeometry(i)}),e}return pz(t,n),t.prototype.simplifyTransformed=function(e,r){return this.simplifyTransformedInternal(this.getRevision(),e,r)},t.prototype.clone=function(){return Ir()},t.prototype.closestPointXY=function(e,r,i,o){return Ir()},t.prototype.containsXY=function(e,r){var i=this.getClosestPoint([e,r]);return i[0]===e&&i[1]===r},t.prototype.getClosestPoint=function(e,r){var i=r||[NaN,NaN];return this.closestPointXY(e[0],e[1],i,1/0),i},t.prototype.intersectsCoordinate=function(e){return this.containsXY(e[0],e[1])},t.prototype.computeExtent=function(e){return Ir()},t.prototype.getExtent=function(e){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(n,t){return t?(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t):n}(this.extent_,e)},t.prototype.rotate=function(e,r){Ir()},t.prototype.scale=function(e,r,i){Ir()},t.prototype.simplify=function(e){return this.getSimplifiedGeometry(e*e)},t.prototype.getSimplifiedGeometry=function(e){return Ir()},t.prototype.getType=function(){return Ir()},t.prototype.applyTransform=function(e){Ir()},t.prototype.intersectsExtent=function(e){return Ir()},t.prototype.translate=function(e,r){Ir()},t.prototype.transform=function(e,r){var i=Ar(e),o=i.getUnits()==Ip.TILE_PIXELS?function(s,a,c){var h=i.getExtent(),p=i.getWorldExtent(),m=$u(p)/$u(h);return Fp(vB,p[0],p[3],m,-m,0,0,0),Sv(s,0,s.length,c,vB,a),yv(i,r)(s,a,c)}:yv(i,r);return this.applyTransform(o),this},t}(mh);var mz=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function _B(n){var t;return"XY"==n?t=2:"XYZ"==n||"XYM"==n?t=3:"XYZM"==n&&(t=4),t}const xv=function(n){function t(){var e=n.call(this)||this;return e.layout="XY",e.stride=2,e.flatCoordinates=null,e}return mz(t,n),t.prototype.computeExtent=function(e){return eO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},t.prototype.getCoordinates=function(){return Ir()},t.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.getFlatCoordinates=function(){return this.flatCoordinates},t.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},t.prototype.getLayout=function(){return this.layout},t.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var r=this.getSimplifiedGeometryInternal(e);return r.getFlatCoordinates().length<this.flatCoordinates.length?r:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)},t.prototype.getSimplifiedGeometryInternal=function(e){return this},t.prototype.getStride=function(){return this.stride},t.prototype.setFlatCoordinates=function(e,r){this.stride=_B(e),this.layout=e,this.flatCoordinates=r},t.prototype.setCoordinates=function(e,r){Ir()},t.prototype.setLayout=function(e,r,i){var o;if(e)o=_B(e);else{for(var s=0;s<i;++s){if(0===r.length)return this.layout="XY",void(this.stride=2);r=r[0]}e=function(n){var t;return 2==n?t="XY":3==n?t="XYZ":4==n&&(t="XYZM"),t}(o=r.length)}this.layout=e,this.stride=o},t.prototype.applyTransform=function(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},t.prototype.rotate=function(e,r){var i=this.getFlatCoordinates();if(i){var o=this.getStride();gB(i,0,i.length,o,e,r,i),this.changed()}},t.prototype.scale=function(e,r,i){var o=r;void 0===o&&(o=e);var s=i;s||(s=xp(this.getExtent()));var a=this.getFlatCoordinates();if(a){var c=this.getStride();(function(n,t,e,r,i,o,s,a){for(var c=a||[],h=s[0],p=s[1],m=0,E=0;E<e;E+=r){var x=n[E+1]-p;c[m++]=h+i*(n[E]-h),c[m++]=p+o*x;for(var P=E+2;P<E+r;++P)c[m++]=n[P]}a&&c.length!=m&&(c.length=m)})(a,0,a.length,c,e,o,s,a),this.changed()}},t.prototype.translate=function(e,r){var i=this.getFlatCoordinates();if(i){var o=this.getStride();mB(i,0,i.length,o,e,r,i),this.changed()}},t}(yB);function EB(n,t,e,r){for(var i=0,o=e.length;i<o;++i)n[t++]=e[i];return t}function rD(n,t,e,r){for(var i=0,o=e.length;i<o;++i)for(var s=e[i],a=0;a<r;++a)n[t++]=s[a];return t}function gG(n,t,e,r,i){for(var o=i||[],s=0,a=0,c=e.length;a<c;++a){var h=rD(n,t,e[a],r);o[s++]=h,t=h}return o.length=s,o}var bz=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const nc=function(n){function t(e,r){var i=n.call(this)||this;return i.setCoordinates(e,r),i}return bz(t,n),t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(e,r,i,o){var s=this.flatCoordinates,a=am(e,r,s[0],s[1]);if(a<o){for(var c=this.stride,h=0;h<c;++h)i[h]=s[h];return i.length=c,a}return o},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(e){return dv(this.flatCoordinates,e)},t.prototype.getType=function(){return"Point"},t.prototype.intersectsExtent=function(e){return SC(e,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(e,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=EB(this.flatCoordinates,0,e),this.changed()},t}(xv);function bB(n,t,e,r){for(var i=0,o=n[e-r],s=n[e-r+1];t<e;t+=r){var a=n[t],c=n[t+1];i+=s*a-o*c,o=a,s=c}return i/2}function wB(n,t,e,r){for(var i=0,o=0,s=e.length;o<s;++o){var a=e[o];i+=bB(n,t,a,r),t=a}return i}function CB(n,t,e,r,i,o,s){var m,a=n[t],c=n[t+1],h=n[e]-a,p=n[e+1]-c;if(0===h&&0===p)m=t;else{var E=((i-a)*h+(o-c)*p)/(h*h+p*p);if(E>1)m=e;else{if(E>0){for(var S=0;S<r;++S)s[S]=um(n[t+S],n[e+S],E);return void(s.length=r)}m=t}}for(S=0;S<r;++S)s[S]=n[m+S];s.length=r}function mG(n,t,e,r,i){var o=n[t],s=n[t+1];for(t+=r;t<e;t+=r){var a=n[t],c=n[t+1],h=am(o,s,a,c);h>i&&(i=h),o=a,s=c}return i}function vG(n,t,e,r,i){for(var o=0,s=e.length;o<s;++o){var a=e[o];i=mG(n,t,a,r,i),t=a}return i}function yG(n,t,e,r,i,o,s,a,c,h,p){if(t==e)return h;var m,E;if(0===i){if((E=am(s,a,n[t],n[t+1]))<h){for(m=0;m<r;++m)c[m]=n[t+m];return c.length=r,E}return h}for(var S=p||[NaN,NaN],x=t+r;x<e;)if(CB(n,x-r,x,r,s,a,S),(E=am(s,a,S[0],S[1]))<h){for(h=E,m=0;m<r;++m)c[m]=S[m];c.length=r,x+=r}else x+=r*Math.max((Math.sqrt(E)-Math.sqrt(h))/i|0,1);if(o&&(CB(n,e-r,t,r,s,a,S),(E=am(s,a,S[0],S[1]))<h)){for(h=E,m=0;m<r;++m)c[m]=S[m];c.length=r}return h}function _G(n,t,e,r,i,o,s,a,c,h,p){for(var m=p||[NaN,NaN],E=0,S=e.length;E<S;++E){var x=e[E];h=yG(n,t,x,r,i,o,s,a,c,h,m),t=x}return h}function CP(n,t,e,r,i){for(var o=void 0!==i?i:[],s=0,a=t;a<e;a+=r)o[s++]=n.slice(a,a+r);return o.length=s,o}function iD(n,t,e,r,i){for(var o=void 0!==i?i:[],s=0,a=0,c=e.length;a<c;++a){var h=e[a];o[s++]=CP(n,t,h,r,o[s]),t=h}return o.length=s,o}function SB(n,t,e,r,i){for(var o=void 0!==i?i:[],s=0,a=0,c=e.length;a<c;++a){var h=e[a];o[s++]=iD(n,t,h,r,o[s]),t=h[h.length-1]}return o.length=s,o}function oD(n,t,e,r,i,o,s){var a=(e-t)/r;if(a<3){for(;t<e;t+=r)o[s++]=n[t],o[s++]=n[t+1];return s}var c=new Array(a);c[0]=1,c[a-1]=1;for(var h=[t,e-r],p=0;h.length>0;){for(var m=h.pop(),E=h.pop(),S=0,x=n[E],P=n[E+1],R=n[m],F=n[m+1],D=E+r;D<m;D+=r){var X=SF(n[D],n[D+1],x,P,R,F);X>S&&(p=D,S=X)}S>i&&(c[(p-t)/r]=1,E+r<p&&h.push(E,p),p+r<m&&h.push(p,m))}for(D=0;D<a;++D)c[D]&&(o[s++]=n[t+D*r],o[s++]=n[t+D*r+1]);return s}function TE(n,t){return t*Math.round(n/t)}function Pz(n,t,e,r,i,o,s){if(t==e)return s;var h,p,a=TE(n[t],i),c=TE(n[t+1],i);t+=r,o[s++]=a,o[s++]=c;do{if(h=TE(n[t],i),p=TE(n[t+1],i),(t+=r)==e)return o[s++]=h,o[s++]=p,s}while(h==a&&p==c);for(;t<e;){var m=TE(n[t],i),E=TE(n[t+1],i);if(t+=r,m!=h||E!=p){var S=h-a,x=p-c,P=m-a,R=E-c;if(S*R==x*P&&(S<0&&P<S||S==P||S>0&&P>S)&&(x<0&&R<x||x==R||x>0&&R>x)){h=m,p=E;continue}o[s++]=h,o[s++]=p,a=h,c=p,h=m,p=E}}return o[s++]=h,o[s++]=p,s}function TB(n,t,e,r,i,o,s,a){for(var c=0,h=e.length;c<h;++c){var p=e[c];s=Pz(n,t,p,r,i,o,s),a.push(s),t=p}return s}var Az=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const EG=function(n){function t(e,r){var i=n.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?i.setCoordinates(e,r):i.setFlatCoordinates(r,e),i}return Az(t,n),t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(e,r,i,o){return o<im(this.getExtent(),e,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,r,i,o))},t.prototype.getArea=function(){return bB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinates=function(){return CP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getSimplifiedGeometryInternal=function(e){var r=[];return r.length=oD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r,0),new t(r,"XY")},t.prototype.getType=function(){return"LinearRing"},t.prototype.intersectsExtent=function(e){return!1},t.prototype.setCoordinates=function(e,r){this.setLayout(r,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=rD(this.flatCoordinates,0,e,this.stride),this.changed()},t}(xv);function Rz(n,t,e,r,i){return!rO(i,function(s){return!PE(n,t,e,r,s[0],s[1])})}function PE(n,t,e,r,i,o){for(var s=0,a=n[e-r],c=n[e-r+1];t<e;t+=r){var h=n[t],p=n[t+1];c<=o?p>o&&(h-a)*(o-c)-(i-a)*(p-c)>0&&s++:p<=o&&(h-a)*(o-c)-(i-a)*(p-c)<0&&s--,a=h,c=p}return 0!==s}function bG(n,t,e,r,i,o){if(0===e.length||!PE(n,t,e[0],r,i,o))return!1;for(var s=1,a=e.length;s<a;++s)if(PE(n,e[s-1],e[s],r,i,o))return!1;return!0}function wG(n,t,e,r,i,o,s){for(var a,c,h,p,m,E,S,x=i[o+1],P=[],R=0,F=e.length;R<F;++R){var D=e[R];for(p=n[D-r],E=n[D-r+1],a=t;a<D;a+=r)m=n[a],S=n[a+1],(x<=E&&S<=x||E<=x&&x<=S)&&P.push(h=(x-E)/(S-E)*(m-p)+p),p=m,E=S}var j=NaN,G=-1/0;for(P.sort(sf),p=P[0],a=1,c=P.length;a<c;++a){m=P[a];var X=Math.abs(m-p);X>G&&bG(n,t,e,r,h=(p+m)/2,x)&&(j=h,G=X),p=m}return isNaN(j)&&(j=i[o]),s?(s.push(j,x,G),s):[j,x,G]}function PB(n,t,e,r,i){for(var o=[],s=0,a=e.length;s<a;++s){var c=e[s];o=wG(n,t,c,r,i,2*s,o),t=c[c.length-1]}return o}function IB(n,t,e,r,i){for(var a,o=[n[t],n[t+1]],s=[];t+r<e;t+=r){if(s[0]=n[t+r],s[1]=n[t+r+1],a=i(o,s))return a;o[0]=s[0],o[1]=s[1]}return!1}function sD(n,t,e,r,i){var o=nO([1/0,1/0,-1/0,-1/0],n,t,e,r);return!!oa(i,o)&&(!!(eu(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3])||IB(n,t,e,r,function(s,a){return function(n,t,e){var r=!1,i=GT(n,t),o=GT(n,e);if(1===i||1===o)r=!0;else{var s=n[0],a=n[1],c=n[2],h=n[3],E=e[0],S=e[1],x=(S-t[1])/(E-t[0]),P=void 0,R=void 0;!!(2&o)&&!(2&i)&&(r=(P=E-(S-h)/x)>=s&&P<=c),r||!(4&o)||4&i||(r=(R=S-(E-c)*x)>=a&&R<=h),r||!(8&o)||8&i||(r=(P=E-(S-a)/x)>=s&&P<=c),!r&&16&o&&!(16&i)&&(r=(R=S-(E-s)*x)>=a&&R<=h)}return r}(i,s,a)}))}function AB(n,t,e,r,i){if(!function(n,t,e,r,i){return!!(sD(n,t,e,r,i)||PE(n,t,e,r,i[0],i[1])||PE(n,t,e,r,i[0],i[3])||PE(n,t,e,r,i[2],i[1])||PE(n,t,e,r,i[2],i[3]))}(n,t,e[0],r,i))return!1;if(1===e.length)return!0;for(var o=1,s=e.length;o<s;++o)if(Rz(n,e[o-1],e[o],r,i)&&!sD(n,e[o-1],e[o],r,i))return!1;return!0}function Nz(n,t,e,r){for(;t<e-r;){for(var i=0;i<r;++i){var o=n[t+i];n[t+i]=n[e-r+i],n[e-r+i]=o}t+=r,e-=r}}function CG(n,t,e,r){for(var i=0,o=n[e-r],s=n[e-r+1];t<e;t+=r){var a=n[t],c=n[t+1];i+=(a-o)*(c+s),o=a,s=c}return i>0}function MB(n,t,e,r,i){for(var o=void 0!==i&&i,s=0,a=e.length;s<a;++s){var c=e[s],h=CG(n,t,c,r);if(0===s){if(o&&h||!o&&!h)return!1}else if(o&&!h||!o&&h)return!1;t=c}return!0}function SG(n,t,e,r,i){for(var o=void 0!==i&&i,s=0,a=e.length;s<a;++s){var c=e[s],h=CG(n,t,c,r);(0===s?o&&h||!o&&!h:o&&!h||!o&&h)&&Nz(n,t,c,r),t=c}return t}function RB(n,t,e,r,i){for(var o=0,s=e.length;o<s;++o)t=SG(n,t,e[o],r,i);return t}var Gz=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),aD=function(n){function t(e,r,i){var o=n.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,void 0!==r&&i?(o.setFlatCoordinates(r,e),o.ends_=i):o.setCoordinates(e,r),o}return Gz(t,n),t.prototype.appendLinearRing=function(e){this.flatCoordinates?Qo(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},t.prototype.closestPointXY=function(e,r,i,o){return o<im(this.getExtent(),e,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vG(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_G(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,r,i,o))},t.prototype.containsXY=function(e,r){return bG(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,r)},t.prototype.getArea=function(){return wB(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},t.prototype.getCoordinates=function(e){var r;return void 0!==e?SG(r=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,e):r=this.flatCoordinates,iD(r,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var e=xp(this.getExtent());this.flatInteriorPoint_=wG(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},t.prototype.getInteriorPoint=function(){return new nc(this.getFlatInteriorPoint(),"XYM")},t.prototype.getLinearRingCount=function(){return this.ends_.length},t.prototype.getLinearRing=function(e){return e<0||this.ends_.length<=e?null:new EG(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)},t.prototype.getLinearRings=function(){for(var e=this.layout,r=this.flatCoordinates,i=this.ends_,o=[],s=0,a=0,c=i.length;a<c;++a){var h=i[a],p=new EG(r.slice(s,h),e);o.push(p),s=h}return o},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;MB(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=SG(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(e){var r=[],i=[];return r.length=TB(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),r,0,i),new t(r,"XY",i)},t.prototype.getType=function(){return"Polygon"},t.prototype.intersectsExtent=function(e){return AB(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)},t.prototype.setCoordinates=function(e,r){this.setLayout(r,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=gG(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},t}(xv);const Yc=aD;function OB(n,t,e){for(var r=t||32,i=n.getStride(),o=n.getLayout(),s=n.getCenter(),a=i*(r+1),c=new Array(a),h=0;h<a;h+=i){c[h]=0,c[h+1]=0;for(var p=2;p<i;p++)c[h+p]=s[p]}var E=new aD(c,o,[c.length]);return function(n,t,e,r){for(var i=n.getFlatCoordinates(),o=n.getStride(),s=i.length/o-1,a=r||0,c=0;c<=s;++c){var h=c*o,p=a+2*lm(c,s)*Math.PI/s;i[h]=t[0]+e*Math.cos(p),i[h+1]=t[1]+e*Math.sin(p)}n.changed()}(E,s,n.getRadius(),e),E}var jz=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const DB=function(n){function t(e){var r=this,i=e||{};return r=n.call(this,i)||this,i.handleDownEvent&&(r.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(r.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(r.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(r.handleUpEvent=i.handleUpEvent),i.stopDown&&(r.stopDown=i.stopDown),r.handlingDownUpSequence=!1,r.trackedPointers_={},r.targetPointers=[],r}return jz(t,n),t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(e){return!1},t.prototype.handleDragEvent=function(e){},t.prototype.handleEvent=function(e){if(!e.pointerEvent)return!0;var r=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if("pointerdrag"==e.type)this.handleDragEvent(e);else if("pointerup"==e.type){var i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if("pointerdown"==e.type){var o=this.handleDownEvent(e);this.handlingDownUpSequence=o,r=this.stopDown(o)}else"pointermove"==e.type&&this.handleMoveEvent(e);return!r},t.prototype.handleMoveEvent=function(e){},t.prototype.handleUpEvent=function(e){return!1},t.prototype.stopDown=function(e){return e},t.prototype.updateTrackedPointers_=function(e){if(function(n){var t=n.type;return"pointerdown"===t||"pointerdrag"===t||"pointerup"===t}(e)){var r=e.pointerEvent,i=r.pointerId.toString();"pointerup"==e.type?delete this.trackedPointers_[i]:("pointerdown"==e.type||i in this.trackedPointers_)&&(this.trackedPointers_[i]=r),this.targetPointers=rm(this.trackedPointers_)}},t}(J4);var zz=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Wz=function(n){function t(e){var r=n.call(this)||this,i=qa({},e);return i.opacity=void 0!==e.opacity?e.opacity:1,qi("number"==typeof i.opacity,64),i.visible=void 0===e.visible||e.visible,i.zIndex=e.zIndex,i.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,i.minResolution=void 0!==e.minResolution?e.minResolution:0,i.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,i.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,r.className_=void 0!==i.className?e.className:"ol-layer",delete i.className,r.setProperties(i),r.state_=null,r}return zz(t,n),t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(e){var r=this.state_||{layer:this,managed:void 0===e||e},i=this.getZIndex();return r.opacity=Pp(Math.round(100*this.getOpacity())/100,0,1),r.sourceState=this.getSourceState(),r.visible=this.getVisible(),r.extent=this.getExtent(),r.zIndex=void 0!==i?i:!1===r.managed?1/0:0,r.maxResolution=this.getMaxResolution(),r.minResolution=Math.max(this.getMinResolution(),0),r.minZoom=this.getMinZoom(),r.maxZoom=this.getMaxZoom(),this.state_=r,r},t.prototype.getLayersArray=function(e){return Ir()},t.prototype.getLayerStatesArray=function(e){return Ir()},t.prototype.getExtent=function(){return this.get("extent")},t.prototype.getMaxResolution=function(){return this.get("maxResolution")},t.prototype.getMinResolution=function(){return this.get("minResolution")},t.prototype.getMinZoom=function(){return this.get("minZoom")},t.prototype.getMaxZoom=function(){return this.get("maxZoom")},t.prototype.getOpacity=function(){return this.get("opacity")},t.prototype.getSourceState=function(){return Ir()},t.prototype.getVisible=function(){return this.get("visible")},t.prototype.getZIndex=function(){return this.get("zIndex")},t.prototype.setExtent=function(e){this.set("extent",e)},t.prototype.setMaxResolution=function(e){this.set("maxResolution",e)},t.prototype.setMinResolution=function(e){this.set("minResolution",e)},t.prototype.setMaxZoom=function(e){this.set("maxZoom",e)},t.prototype.setMinZoom=function(e){this.set("minZoom",e)},t.prototype.setOpacity=function(e){qi("number"==typeof e,64),this.set("opacity",e)},t.prototype.setVisible=function(e){this.set("visible",e)},t.prototype.setZIndex=function(e){this.set("zIndex",e)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),n.prototype.disposeInternal.call(this)},t}(mh);var Yz=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function Xz(n,t){if(!n.visible)return!1;var e=t.resolution;if(e<n.minResolution||e>=n.maxResolution)return!1;var r=t.zoom;return r>n.minZoom&&r<=n.maxZoom}const LB=function(n){function t(e){var r=this,i=qa({},e);return delete i.source,(r=n.call(this,i)||this).mapPrecomposeKey_=null,r.mapRenderKey_=null,r.sourceChangeKey_=null,r.renderer_=null,e.render&&(r.render=e.render),e.map&&r.setMap(e.map),r.addEventListener(Vc("source"),r.handleSourcePropertyChange_),r.setSource(e.source?e.source:null),r}return Yz(t,n),t.prototype.getLayersArray=function(e){var r=e||[];return r.push(this),r},t.prototype.getLayerStatesArray=function(e){var r=e||[];return r.push(this.getLayerState()),r},t.prototype.getSource=function(){return this.get("source")||null},t.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():"undefined"},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(ya(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=Fl(e,"change",this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(e){return this.renderer_.getFeatures(e)},t.prototype.render=function(e,r){var i=this.getRenderer();if(i.prepareFrame(e))return i.renderFrame(e,r)},t.prototype.setMap=function(e){this.mapPrecomposeKey_&&(ya(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ya(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Fl(e,"precompose",function(r){var o=r.frameState.layerStatesArray,s=this.getLayerState(!1);qi(!o.some(function(a){return a.layer===s.layer}),67),o.push(s)},this),this.mapRenderKey_=Fl(this,"change",e.render,e),this.changed())},t.prototype.setSource=function(e){this.set("source",e)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.setSource(null),n.prototype.disposeInternal.call(this)},t}(Wz);var Kz=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const NB=function(n){function t(e){var r=this,i=e||{},o=qa({},i);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,(r=n.call(this,o)||this).declutter_=void 0!==i.declutter&&i.declutter,r.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(i.style),r.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,r.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,r}return Kz(t,n),t.prototype.getDeclutter=function(){return this.declutter_},t.prototype.getFeatures=function(e){return n.prototype.getFeatures.call(this,e)},t.prototype.getRenderBuffer=function(){return this.renderBuffer_},t.prototype.getRenderOrder=function(){return this.get("renderOrder")},t.prototype.getStyle=function(){return this.style_},t.prototype.getStyleFunction=function(){return this.styleFunction_},t.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},t.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},t.prototype.setRenderOrder=function(e){this.set("renderOrder",e)},t.prototype.setStyle=function(e){this.style_=void 0!==e?e:tz,this.styleFunction_=null===e?void 0:function(n){var t,e;"function"==typeof n?t=n:(Array.isArray(n)?e=n:(qi("function"==typeof n.getZIndex,41),e=[n]),t=function(){return e});return t}(this.style_),this.changed()},t}(LB),FB=function(){function n(){}return n.prototype.drawCustom=function(t,e,r){},n.prototype.drawGeometry=function(t){},n.prototype.setStyle=function(t){},n.prototype.drawCircle=function(t,e){},n.prototype.drawFeature=function(t,e){},n.prototype.drawGeometryCollection=function(t,e){},n.prototype.drawLineString=function(t,e){},n.prototype.drawMultiLineString=function(t,e){},n.prototype.drawMultiPoint=function(t,e){},n.prototype.drawMultiPolygon=function(t,e){},n.prototype.drawPoint=function(t,e){},n.prototype.drawPolygon=function(t,e){},n.prototype.drawText=function(t,e){},n.prototype.setFillStrokeStyle=function(t,e){},n.prototype.setImageStyle=function(t,e){},n.prototype.setTextStyle=function(t,e){},n}();var SP={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},lD=[SP.FILL],Tv=[SP.STROKE],IE=[SP.BEGIN_PATH],GB=[SP.CLOSE_PATH];const Ei=SP;var Qz=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const xP=function(n){function t(e,r,i,o){var s=n.call(this)||this;return s.tolerance=e,s.maxExtent=r,s.pixelRatio=o,s.maxLineWidth=0,s.resolution=i,s.beginGeometryInstruction1_=null,s.beginGeometryInstruction2_=null,s.bufferedMaxExtent_=null,s.instructions=[],s.coordinates=[],s.tmpCoordinate_=[],s.hitDetectionInstructions=[],s.state={},s}return Qz(t,n),t.prototype.applyPixelRatio=function(e){var r=this.pixelRatio;return 1==r?e:e.map(function(i){return i*r})},t.prototype.appendFlatCoordinates=function(e,r,i,o,s,a){var c=this.coordinates.length,h=this.getBufferedMaxExtent();a&&(r+=o);var x,P,R,p=e[r],m=e[r+1],E=this.tmpCoordinate_,S=!0;for(x=r+o;x<i;x+=o)E[0]=e[x],E[1]=e[x+1],(R=GT(h,E))!==P?(S&&(this.coordinates[c++]=p,this.coordinates[c++]=m),this.coordinates[c++]=E[0],this.coordinates[c++]=E[1],S=!1):1===R?(this.coordinates[c++]=E[0],this.coordinates[c++]=E[1],S=!1):S=!0,p=E[0],m=E[1],P=R;return(s&&S||x===r+o)&&(this.coordinates[c++]=p,this.coordinates[c++]=m),c},t.prototype.drawCustomCoordinates_=function(e,r,i,o,s){for(var a=0,c=i.length;a<c;++a){var h=i[a],p=this.appendFlatCoordinates(e,r,h,o,!1,!1);s.push(p),r=h}return r},t.prototype.drawCustom=function(e,r,i){this.beginGeometry(e,r);var c,h,p,m,E,o=e.getType(),s=e.getStride(),a=this.coordinates.length;if("MultiPolygon"==o){c=(e=e).getOrientedFlatCoordinates(),m=[];var S=e.getEndss();E=0;for(var x=0,P=S.length;x<P;++x){var R=[];E=this.drawCustomCoordinates_(c,E,S[x],s,R),m.push(R)}this.instructions.push([Ei.CUSTOM,a,m,e,i,SB])}else"Polygon"==o||"MultiLineString"==o?(p=[],c="Polygon"==o?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),E=this.drawCustomCoordinates_(c,0,e.getEnds(),s,p),this.instructions.push([Ei.CUSTOM,a,p,e,i,iD])):"LineString"==o||"MultiPoint"==o?(c=e.getFlatCoordinates(),h=this.appendFlatCoordinates(c,0,c.length,s,!1,!1),this.instructions.push([Ei.CUSTOM,a,h,e,i,CP])):"Point"==o&&(c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),this.instructions.push([Ei.CUSTOM,a,h=this.coordinates.length,e,i]));this.endGeometry(r)},t.prototype.beginGeometry=function(e,r){var i=e.getExtent();this.beginGeometryInstruction1_=[Ei.BEGIN_GEOMETRY,r,0,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Ei.BEGIN_GEOMETRY,r,0,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},t.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},t.prototype.reverseHitDetectionInstructions=function(){var e=this.hitDetectionInstructions;e.reverse();var r,o,s,i=e.length,a=-1;for(r=0;r<i;++r)(s=(o=e[r])[0])==Ei.END_GEOMETRY?a=r:s==Ei.BEGIN_GEOMETRY&&(o[2]=r,OT(this.hitDetectionInstructions,a,r),a=-1)},t.prototype.setFillStrokeStyle=function(e,r){var i=this.state;if(e){var o=e.getColor();i.fillStyle=Np(o||mm)}else i.fillStyle=void 0;if(r){var s=r.getColor();i.strokeStyle=Np(s||EP);var a=r.getLineCap();i.lineCap=void 0!==a?a:HC;var c=r.getLineDash();i.lineDash=c?c.slice():ZO;var h=r.getLineDashOffset();i.lineDashOffset=h||0;var p=r.getLineJoin();i.lineJoin=void 0!==p?p:WC;var m=r.getWidth();i.lineWidth=void 0!==m?m:1;var E=r.getMiterLimit();i.miterLimit=void 0!==E?E:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},t.prototype.createFill=function(e){var r=e.fillStyle,i=[Ei.SET_FILL_STYLE,r];return"string"!=typeof r&&i.push(!0),i},t.prototype.applyStroke=function(e){this.instructions.push(this.createStroke(e))},t.prototype.createStroke=function(e){return[Ei.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]},t.prototype.updateFillStyle=function(e,r){var i=e.fillStyle;("string"!=typeof i||e.currentFillStyle!=i)&&(void 0!==i&&this.instructions.push(r.call(this,e)),e.currentFillStyle=i)},t.prototype.updateStrokeStyle=function(e,r){var i=e.strokeStyle,o=e.lineCap,s=e.lineDash,a=e.lineDashOffset,c=e.lineJoin,h=e.lineWidth,p=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=o||s!=e.currentLineDash&&!af(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=c||e.currentLineWidth!=h||e.currentMiterLimit!=p)&&(void 0!==i&&r.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=o,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=c,e.currentLineWidth=h,e.currentMiterLimit=p)},t.prototype.endGeometry=function(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var r=[Ei.END_GEOMETRY,e];this.instructions.push(r),this.hitDetectionInstructions.push(r)},t.prototype.getBufferedMaxExtent=function(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=function(n,t){return n.slice()}(this.maxExtent),this.maxLineWidth>0)&&vh(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_},t}(FB);var e7=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const n7=function(n){function t(e,r,i,o){var s=n.call(this,e,r,i,o)||this;return s.declutterGroups_=null,s.hitDetectionImage_=null,s.image_=null,s.anchorX_=void 0,s.anchorY_=void 0,s.height_=void 0,s.opacity_=void 0,s.originX_=void 0,s.originY_=void 0,s.rotateWithView_=void 0,s.rotation_=void 0,s.scale_=void 0,s.width_=void 0,s}return e7(t,n),t.prototype.drawCoordinates_=function(e,r,i,o){return this.appendFlatCoordinates(e,r,i,o,!1,!1)},t.prototype.drawPoint=function(e,r){if(this.image_){this.beginGeometry(e,r);var i=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.drawCoordinates_(i,0,i.length,o);this.instructions.push([Ei.DRAW_IMAGE,s,a,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([Ei.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(r)}},t.prototype.drawMultiPoint=function(e,r){if(this.image_){this.beginGeometry(e,r);var i=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.drawCoordinates_(i,0,i.length,o);this.instructions.push([Ei.DRAW_IMAGE,s,a,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([Ei.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(r)}},t.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,n.prototype.finish.call(this)},t.prototype.setImageStyle=function(e,r){var i=e.getAnchor(),o=e.getSize(),s=e.getHitDetectionImage(1),a=e.getImage(1),c=e.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroups_=r,this.hitDetectionImage_=s,this.image_=a,this.height_=o[1],this.opacity_=e.getOpacity(),this.originX_=c[0],this.originY_=c[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScale(),this.width_=o[0]},t}(xP);var r7=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const o7=function(n){function t(e,r,i,o){return n.call(this,e,r,i,o)||this}return r7(t,n),t.prototype.drawFlatCoordinates_=function(e,r,i,o){var s=this.coordinates.length,a=this.appendFlatCoordinates(e,r,i,o,!1,!1),c=[Ei.MOVE_TO_LINE_TO,s,a];return this.instructions.push(c),this.hitDetectionInstructions.push(c),i},t.prototype.drawLineString=function(e,r){var i=this.state;if(void 0!==i.strokeStyle&&void 0!==i.lineWidth){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,r),this.hitDetectionInstructions.push([Ei.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],IE);var a=e.getFlatCoordinates(),c=e.getStride();this.drawFlatCoordinates_(a,0,a.length,c),this.hitDetectionInstructions.push(Tv),this.endGeometry(r)}},t.prototype.drawMultiLineString=function(e,r){var i=this.state;if(void 0!==i.strokeStyle&&void 0!==i.lineWidth){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,r),this.hitDetectionInstructions.push([Ei.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],IE);for(var a=e.getEnds(),c=e.getFlatCoordinates(),h=e.getStride(),p=0,m=0,E=a.length;m<E;++m)p=this.drawFlatCoordinates_(c,p,a[m],h);this.hitDetectionInstructions.push(Tv),this.endGeometry(r)}},t.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Tv),this.reverseHitDetectionInstructions(),this.state=null,n.prototype.finish.call(this)},t.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Tv),e.lastStroke=this.coordinates.length),e.lastStroke=0,n.prototype.applyStroke.call(this,e),this.instructions.push(IE)},t}(xP);var s7=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const BB=function(n){function t(e,r,i,o){return n.call(this,e,r,i,o)||this}return s7(t,n),t.prototype.drawFlatCoordinatess_=function(e,r,i,o){var s=this.state,a=void 0!==s.fillStyle,c=void 0!==s.strokeStyle,h=i.length;this.instructions.push(IE),this.hitDetectionInstructions.push(IE);for(var p=0;p<h;++p){var m=i[p],E=this.coordinates.length,S=this.appendFlatCoordinates(e,r,m,o,!0,!c),x=[Ei.MOVE_TO_LINE_TO,E,S];this.instructions.push(x),this.hitDetectionInstructions.push(x),c&&(this.instructions.push(GB),this.hitDetectionInstructions.push(GB)),r=m}return a&&(this.instructions.push(lD),this.hitDetectionInstructions.push(lD)),c&&(this.instructions.push(Tv),this.hitDetectionInstructions.push(Tv)),r},t.prototype.drawCircle=function(e,r){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(e,r),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Ei.SET_FILL_STYLE,mm]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Ei.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var a=e.getFlatCoordinates(),c=e.getStride(),h=this.coordinates.length;this.appendFlatCoordinates(a,0,a.length,c,!1,!1);var p=[Ei.CIRCLE,h];this.instructions.push(IE,p),this.hitDetectionInstructions.push(IE,p),void 0!==i.fillStyle&&(this.instructions.push(lD),this.hitDetectionInstructions.push(lD)),void 0!==i.strokeStyle&&(this.instructions.push(Tv),this.hitDetectionInstructions.push(Tv)),this.endGeometry(r)}},t.prototype.drawPolygon=function(e,r){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(e,r),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Ei.SET_FILL_STYLE,mm]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Ei.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var a=e.getEnds(),c=e.getOrientedFlatCoordinates(),h=e.getStride();this.drawFlatCoordinatess_(c,0,a,h),this.endGeometry(r)}},t.prototype.drawMultiPolygon=function(e,r){var i=this.state;if(void 0!==i.fillStyle||void 0!==i.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(e,r),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([Ei.SET_FILL_STYLE,mm]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([Ei.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var a=e.getEndss(),c=e.getOrientedFlatCoordinates(),h=e.getStride(),p=0,m=0,E=a.length;m<E;++m)p=this.drawFlatCoordinatess_(c,p,a[m],h);this.endGeometry(r)}},t.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var r=this.coordinates,i=0,o=r.length;i<o;++i)r[i]=TE(r[i],e);return n.prototype.finish.call(this)},t.prototype.setFillStrokeStyles_=function(){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},t}(xP);function l7(n,t,e,r,i){var m,E,S,x,P,R,F,D,j,o=e,s=e,a=0,c=0,h=e;for(m=e;m<r;m+=i){var G=t[m],X=t[m+1];void 0!==x&&(D=G-x,j=X-P,S=Math.sqrt(D*D+j*j),void 0!==R&&(c+=E,Math.acos((R*D+F*j)/(E*S))>n&&(c>a&&(a=c,o=h,s=m),c=0,h=m-i)),E=S,R=D,F=j),x=G,P=X}return(c+=S)>a?[h,m]:[o,s]}var u7=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),TP={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},d7={Circle:BB,Default:xP,Image:n7,LineString:o7,Polygon:BB,Text:function(n){function t(e,r,i,o){var s=n.call(this,e,r,i,o)||this;return s.labels_=null,s.text_="",s.textOffsetX_=0,s.textOffsetY_=0,s.textRotateWithView_=void 0,s.textRotation_=0,s.textFillState_=null,s.fillStates={},s.textStrokeState_=null,s.strokeStates={},s.textState_={},s.textStates={},s.textKey_="",s.fillKey_="",s.strokeKey_="",s}return u7(t,n),t.prototype.finish=function(){var e=n.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},t.prototype.drawText=function(e,r){var s=this.textState_;if(""!==this.text_&&s&&(this.textFillState_||this.textStrokeState_)){var E,S,a=this.coordinates.length,c=e.getType(),h=null,p=2,m=2;if("line"===s.placement){if(!oa(this.getBufferedMaxExtent(),e.getExtent()))return;var x=void 0;if(h=e.getFlatCoordinates(),m=e.getStride(),"LineString"==c)x=[h.length];else if("MultiLineString"==c)x=e.getEnds();else if("Polygon"==c)x=e.getEnds().slice(0,1);else if("MultiPolygon"==c){var P=e.getEndss();for(x=[],E=0,S=P.length;E<S;++E)x.push(P[E][0])}this.beginGeometry(e,r);for(var R=s.textAlign,F=0,D=void 0,j=0,G=x.length;j<G;++j){if(null==R){var X=l7(s.maxAngle,h,F,x[j],m);F=X[0],D=X[1]}else D=x[j];for(E=F;E<D;E+=m)this.coordinates.push(h[E],h[E+1]);p=this.coordinates.length,F=x[j];var J=this.declutterGroups_?0===j?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(a,p,J),a=p}this.endGeometry(r)}else{var $=null;switch(s.overflow||($=[]),c){case"Point":case"MultiPoint":p=(h=e.getFlatCoordinates()).length;break;case"LineString":h=e.getFlatMidpoint();break;case"Circle":h=e.getCenter();break;case"MultiLineString":p=(h=e.getFlatMidpoints()).length;break;case"Polygon":h=e.getFlatInteriorPoint(),s.overflow||$.push(h[2]/this.resolution),m=3;break;case"MultiPolygon":var le=e.getFlatInteriorPoints();for(h=[],E=0,S=le.length;E<S;E+=3)s.overflow||$.push(le[E+2]/this.resolution),h.push(le[E],le[E+1]);if(0==(p=h.length))return}p=this.appendFlatCoordinates(h,0,p,m,!1,!1),this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,r);var ie=this.pixelRatio;this.instructions.push([Ei.DRAW_IMAGE,a,p,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,s.padding==YC?YC:s.padding.map(function(Fe){return Fe*ie}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,$]),this.hitDetectionInstructions.push([Ei.DRAW_IMAGE,a,p,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,s.padding,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,$]),this.endGeometry(r)}}},t.prototype.saveTextStates_=function(){var e=this.textStrokeState_,r=this.textState_,i=this.textFillState_,o=this.strokeKey_;e&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));var s=this.textKey_;s in this.textStates||(this.textStates[s]={font:r.font,textAlign:r.textAlign||bP,textBaseline:r.textBaseline||QO,scale:r.scale});var a=this.fillKey_;i&&(a in this.fillStates||(this.fillStates[a]={fillStyle:i.fillStyle}))},t.prototype.drawChars_=function(e,r,i){var o=this.textStrokeState_,s=this.textState_,a=this.strokeKey_,c=this.textKey_,h=this.fillKey_;this.saveTextStates_();var p=this.pixelRatio,m=TP[s.textBaseline],E=this.textOffsetY_*p,S=this.text_,P=o?o.lineWidth*s.scale/2:0;this.instructions.push([Ei.DRAW_CHARS,e,r,m,i,s.overflow,h,s.maxAngle,p,E,a,P*p,S,c,1]),this.hitDetectionInstructions.push([Ei.DRAW_CHARS,e,r,m,i,s.overflow,h,s.maxAngle,1,E,a,P,S,c,1/p])},t.prototype.setTextStyle=function(e,r){var i,o,s;if(e){this.declutterGroups_=r;var a=e.getFill();a?((o=this.textFillState_)||(this.textFillState_=o={}),o.fillStyle=Np(a.getColor()||mm)):this.textFillState_=o=null;var c=e.getStroke();if(c){(s=this.textStrokeState_)||(this.textStrokeState_=s={});var h=c.getLineDash(),p=c.getLineDashOffset(),m=c.getWidth(),E=c.getMiterLimit();s.lineCap=c.getLineCap()||HC,s.lineDash=h?h.slice():ZO,s.lineDashOffset=void 0===p?0:p,s.lineJoin=c.getLineJoin()||WC,s.lineWidth=void 0===m?1:m,s.miterLimit=void 0===E?10:E,s.strokeStyle=Np(c.getColor()||EP)}else this.textStrokeState_=s=null;i=this.textState_;var S=e.getFont()||iB;UV(S);var x=e.getScale();i.overflow=e.getOverflow(),i.font=S,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.textBaseline=e.getTextBaseline()||QO,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||YC,i.scale=void 0===x?1:x;var P=e.getOffsetX(),R=e.getOffsetY(),F=e.getRotateWithView(),D=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===P?0:P,this.textOffsetY_=void 0===R?0:R,this.textRotateWithView_=void 0!==F&&F,this.textRotation_=void 0===D?0:D,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:Lr(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+Lr(o.fillStyle):""}else this.text_=""},t}(xP)};const UB=function(){function n(t,e,r,i,o){this.declutter_=o,this.declutterGroups_=null,this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}return n.prototype.addDeclutter=function(t){var e=null;return this.declutter_&&(t?(e=this.declutterGroups_)[0][4]++:(this.declutterGroups_=e=[[1/0,1/0,-1/0,-1/0]],e[0].push(1))),e},n.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var r=this.buildersByZIndex_[e];for(var i in r){var o=r[i].finish();t[e][i]=o}}return t},n.prototype.getBuilder=function(t,e){var r=void 0!==t?t.toString():"0",i=this.buildersByZIndex_[r];void 0===i&&(this.buildersByZIndex_[r]=i={});var o=i[e];return void 0===o&&(o=new(0,d7[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=o),o},n}();function TG(n,t,e,r){for(var i=n[t],o=n[t+1],s=0,a=t+r;a<e;a+=r){var c=n[a],h=n[a+1];s+=Math.sqrt((c-i)*(c-i)+(h-o)*(h-o)),i=c,o=h}return s}function f7(n,t,e,r,i,o,s,a,c,h,p){for(var X,J,m=[],E=n[t]>n[e-r],S=i.length,x=n[t],P=n[t+1],R=n[t+=r],F=n[t+1],D=0,j=Math.sqrt(Math.pow(R-x,2)+Math.pow(F-P,2)),G=!1,$=0;$<S;++$){for(var le=i[X=E?S-$-1:$],ie=a*c(h,le,p),Fe=o+ie/2;t<e-r&&D+j<Fe;)x=R,P=F,R=n[t+=r],F=n[t+1],D+=j,j=Math.sqrt(Math.pow(R-x,2)+Math.pow(F-P,2));var Ce=Fe-D,$e=Math.atan2(F-P,R-x);if(E&&($e+=$e>0?-Math.PI:Math.PI),void 0!==J){var ot=$e-J;if(G=G||0!==ot,ot+=ot>Math.PI?-2*Math.PI:ot<-Math.PI?2*Math.PI:0,Math.abs(ot)>s)return null}J=$e;var st=Ce/j,dt=um(x,R,st),kt=um(P,F,st);m[X]=[dt,kt,ie/2,$e,le],o+=ie}return G?m:[[m[0][0],m[0][1],m[0][2],m[0][3],i]]}var AE=[1/0,1/0,-1/0,-1/0],PP=[1,0,0,1,0,0],vm=[],Bp=[],jp=[],ym=[];const g7=function(){function n(t,e,r,i){this.overlaps=r,this.pixelRatio=e,this.resolution=t,this.declutterItems=[],this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}return n.prototype.createLabel=function(t,e,r,i){var o=t+e+r+i;if(this.labels_[o])return this.labels_[o];var s=i?this.strokeStates[i]:null,a=r?this.fillStates[r]:null,c=this.textStates[e],p=c.scale*this.pixelRatio,m=TP[c.textAlign||bP],E=i&&s.lineWidth?s.lineWidth:0,S=t.split("\n"),x=S.length,P=[],R=function(n,t,e){for(var r=t.length,i=0,o=0;o<r;++o){var s=$O(n,t[o]);i=Math.max(i,s),e.push(s)}return i}(c.font,S,P),F=VV(c.font),D=F*x,j=R+E,G=[],X={width:Math.ceil((j+2)*p),height:Math.ceil((D+E)*p),contextInstructions:G};1!=p&&G.push("scale",[p,p]),G.push("font",c.font),i&&(G.push("strokeStyle",s.strokeStyle),G.push("lineWidth",E),G.push("lineCap",s.lineCap),G.push("lineJoin",s.lineJoin),G.push("miterLimit",s.miterLimit),(NT?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(G.push("setLineDash",[s.lineDash]),G.push("lineDashOffset",s.lineDashOffset))),r&&G.push("fillStyle",a.fillStyle),G.push("textBaseline","middle"),G.push("textAlign","center");var ie,$=.5-m,le=m*j+$*E;if(i)for(ie=0;ie<x;++ie)G.push("strokeText",[S[ie],le+$*P[ie],.5*(E+F)+ie*F]);if(r)for(ie=0;ie<x;++ie)G.push("fillText",[S[ie],le+$*P[ie],.5*(E+F)+ie*F]);return this.labels_[o]=X,X},n.prototype.replayTextBackground_=function(t,e,r,i,o,s,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,o),t.lineTo.apply(t,e),s&&(this.alignFill_=s[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},n.prototype.replayImageOrLabel_=function(t,e,r,i,o,s,a,c,h,p,m,E,S,x,P,R,F,D){var j=F||D,G=P+p>i.width?i.width-p:P,X=c+m>i.height?i.height-m:c,J=R[3]+G*S+R[1],$=R[0]+X*S+R[2],le=(e-=o*=S)-R[3],ie=(r-=s*=S)-R[0];(j||0!==E)&&(vm[0]=le,ym[0]=le,vm[1]=ie,Bp[1]=ie,Bp[0]=le+J,jp[0]=Bp[0],jp[1]=ie+$,ym[1]=jp[1]);var Fe=null;if(0!==E){var Ce=e+o,$e=r+s;Fe=Fp(PP,Ce,$e,1,1,E,-Ce,-$e),Ra(PP,vm),Ra(PP,Bp),Ra(PP,jp),Ra(PP,ym),Qu(Math.min(vm[0],Bp[0],jp[0],ym[0]),Math.min(vm[1],Bp[1],jp[1],ym[1]),Math.max(vm[0],Bp[0],jp[0],ym[0]),Math.max(vm[1],Bp[1],jp[1],ym[1]),AE)}else Qu(le,ie,le+J,ie+$,AE);var ot=t.canvas,st=D?D[2]*S/2:0,dt=AE[0]-st<=ot.width&&AE[2]+st>=0&&AE[1]-st<=ot.height&&AE[3]+st>=0;if(x&&(e=Math.round(e),r=Math.round(r)),a){if(!dt&&1==a[4])return;tO(a,AE);var kt=dt?[t,Fe?Fe.slice(0):null,h,i,p,m,G,X,e,r,S]:null;kt&&(j&&kt.push(F,D,vm.slice(0),Bp.slice(0),jp.slice(0),ym.slice(0)),a.push(kt))}else dt&&(j&&this.replayTextBackground_(t,vm,Bp,jp,ym,F,D),lB(t,Fe,h,i,p,m,G,X,e,r,S))},n.prototype.fill_=function(t){if(this.alignFill_){var e=Ra(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},n.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},n.prototype.renderDeclutter=function(t,e,r,i){if(t&&t.length>5){var o=t[4];if(1==o||o==t.length-5){var s={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(i||(i=new(NO())(9)),!i.collides(s)){i.insert(s);for(var a=5,c=t.length;a<c;++a){var h=t[a],p=h[0],m=p.globalAlpha;m!==r&&(p.globalAlpha=r),h.length>11&&this.replayTextBackground_(h[0],h[13],h[14],h[15],h[16],h[11],h[12]),lB.apply(void 0,h),m!==r&&(p.globalAlpha=m)}}t.length=5,om(t)}}return i},n.prototype.drawLabelWithPointPlacement_=function(t,e,r,i){var o=this.textStates[e],s=this.createLabel(t,e,i,r),a=this.strokeStates[r],c=this.pixelRatio,h=TP[o.textAlign||bP],p=TP[o.textBaseline||QO],m=a&&a.lineWidth?a.lineWidth:0;return{label:s,anchorX:h*(s.width/c-2*o.scale)+2*(.5-h)*m,anchorY:p*s.height/c+2*(.5-p)*m}},n.prototype.execute_=function(t,e,r,i,o,s){var a;this.declutterItems.length=0,this.pixelCoordinates_&&af(e,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=Sv(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),function(n,t){n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5]}(this.renderedTransform_,e));for(var m,E,S,x,P,R,F,D,j,G,X,J,$,le,Zt,gt,Re,c=0,h=r.length,p=0,ie=0,Fe=0,Ce=null,$e=null,ot=this.coordinateCache_,st=this.viewRotation_,dt=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,kt={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:st},Qe=this.instructions!=r||this.overlaps?0:200;c<h;){var Xe=r[c];switch(Xe[0]){case Ei.BEGIN_GEOMETRY:(Zt=Xe[1]).getGeometry()?void 0===s||oa(s,Xe[3])?++c:c=Xe[2]+1:c=Xe[2];break;case Ei.BEGIN_PATH:ie>Qe&&(this.fill_(t),ie=0),Fe>Qe&&(t.stroke(),Fe=0),!ie&&!Fe&&(t.beginPath(),x=NaN,P=NaN),++c;break;case Ei.CIRCLE:var qt=a[p=Xe[1]],Pt=a[p+1],Pn=a[p+2]-qt,ft=a[p+3]-Pt,Mn=Math.sqrt(Pn*Pn+ft*ft);t.moveTo(qt+Mn,Pt),t.arc(qt,Pt,Mn,0,2*Math.PI,!0),++c;break;case Ei.CLOSE_PATH:t.closePath(),++c;break;case Ei.CUSTOM:p=Xe[1],m=Xe[2];var kn=Xe[4],ai=6==Xe.length?Xe[5]:void 0;kt.geometry=Xe[3],kt.feature=Zt,c in ot||(ot[c]=[]);var yr=ot[c];ai?ai(a,p,m,2,yr):(yr[0]=a[p],yr[1]=a[p+1],yr.length=2),kn(yr,kt),++c;break;case Ei.DRAW_IMAGE:p=Xe[1],m=Xe[2],E=Xe[4],S=Xe[5],j=o?null:Xe[6];var Mr=Xe[7],Ui=Xe[8],Wr=Xe[9],Ns=Xe[10],Nt=Xe[11],So=Xe[12],os=Xe[13],ts=Xe[14];if(!(G=Xe[3])&&Xe.length>=19){var $i=this.drawLabelWithPointPlacement_(X=Xe[18],J=Xe[19],$=Xe[20],le=Xe[21]);Xe[3]=G=$i.label,Xe[4]=E=($i.anchorX-Xe[22])*this.pixelRatio,Xe[5]=S=($i.anchorY-Xe[23])*this.pixelRatio,Xe[7]=Mr=G.height,Xe[14]=ts=G.width}var mo=void 0;Xe.length>24&&(mo=Xe[24]);var Uo=void 0,zs=void 0,co=void 0;Xe.length>16?(Uo=Xe[15],zs=Xe[16],co=Xe[17]):(Uo=YC,zs=!1,co=!1),Nt&&dt?So+=st:!Nt&&!dt&&(So-=st);for(var Kn=0,ps=0;p<m;p+=2)if(!(mo&&mo[Kn++]<ts/this.pixelRatio)){if(j){var vo=Math.floor(ps);j.length<vo+1&&((D=[1/0,1/0,-1/0,-1/0]).push(j[0][4]),j.push(D)),D=j[vo]}this.replayImageOrLabel_(t,a[p],a[p+1],G,E,S,D,Mr,Ui,Wr,Ns,So,os,i,ts,Uo,zs?Ce:null,co?$e:null),D&&(ps===Math.floor(ps)&&this.declutterItems.push(this,D,Zt),ps+=1/D[4])}++c;break;case Ei.DRAW_CHARS:var Vr=Xe[1],li=Xe[2],Mo=Xe[3];D=o?null:Xe[4];var Qs=Xe[5];le=Xe[6];var xs=Xe[7],Fa=Xe[9];$=Xe[10];var au=Xe[11];X=Xe[12];var as=Xe[14],ua=this.textStates[J=Xe[13]],gs=ua.font,Si=ua.scale*Xe[8],Vo=void 0;gs in this.widths_?Vo=this.widths_[gs]:this.widths_[gs]=Vo={};var xf=TG(a,Vr,li,2),Wl=Si*sB(gs,X,Vo);if(Qs||Wl<=xf){var Ea=f7(a,Vr,li,2,X,(xf-Wl)*TP[this.textStates[J].textAlign],xs,Si,sB,gs,Vo);if(Ea){var Fs=void 0,lu=void 0,cl=void 0,ms=void 0;if($)for(Fs=0,lu=Ea.length;Fs<lu;++Fs)cl=this.createLabel((ms=Ea[Fs])[4],J,"",$),this.replayImageOrLabel_(t,ms[0],ms[1],cl,E=ms[2]+au,S=Mo*cl.height+2*(.5-Mo)*au-Fa,D,cl.height,1,0,0,ms[3],as,!1,cl.width,YC,null,null);if(le)for(Fs=0,lu=Ea.length;Fs<lu;++Fs)cl=this.createLabel((ms=Ea[Fs])[4],J,le,""),this.replayImageOrLabel_(t,ms[0],ms[1],cl,E=ms[2],S=Mo*cl.height-Fa,D,cl.height,1,0,0,ms[3],as,!1,cl.width,YC,null,null)}}this.declutterItems.push(this,D,Zt),++c;break;case Ei.END_GEOMETRY:if(void 0!==o){var zo=o(Zt=Xe[1]);if(zo)return zo}++c;break;case Ei.FILL:Qe?ie++:this.fill_(t),++c;break;case Ei.MOVE_TO_LINE_TO:for(m=Xe[2],F=(Re=a[(p=Xe[1])+1])+.5|0,((R=(gt=a[p])+.5|0)!==x||F!==P)&&(t.moveTo(gt,Re),x=R,P=F),p+=2;p<m;p+=2)R=(gt=a[p])+.5|0,F=(Re=a[p+1])+.5|0,(p==m-2||R!==x||F!==P)&&(t.lineTo(gt,Re),x=R,P=F);++c;break;case Ei.SET_FILL_STYLE:Ce=Xe,this.alignFill_=Xe[2],ie&&(this.fill_(t),ie=0,Fe&&(t.stroke(),Fe=0)),t.fillStyle=Xe[1],++c;break;case Ei.SET_STROKE_STYLE:$e=Xe,Fe&&(t.stroke(),Fe=0),this.setStrokeStyle_(t,Xe),++c;break;case Ei.STROKE:Qe?Fe++:t.stroke(),++c;break;default:++c}}ie&&this.fill_(t),Fe&&t.stroke()},n.prototype.execute=function(t,e,r,i){this.viewRotation_=r,this.execute_(t,e,this.instructions,i,void 0,void 0)},n.prototype.executeHitDetection=function(t,e,r,i,o){return this.viewRotation_=r,this.execute_(t,e,this.hitDetectionInstructions,!0,i,o)},n}();var PG=["Polygon","Circle","LineString","Image","Text","Default"],m7=function(){function n(t,e,r,i,o,s){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=e,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(o)}return n.prototype.clip=function(t,e){var r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()},n.prototype.createExecutors_=function(t){for(var e in t){var r=this.executorsByZIndex_[e];void 0===r&&(this.executorsByZIndex_[e]=r={});var i=t[e];for(var o in i)r[o]=new g7(this.resolution_,this.pixelRatio_,this.overlaps_,i[o])}},n.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[e],i=0,o=t.length;i<o;++i)if(t[i]in r)return!0;return!1},n.prototype.forEachFeatureAtCoordinate=function(t,e,r,i,o,s){var a=2*(i=Math.round(i))+1,c=Fp(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-r,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=Ju(a,a));var p,h=this.hitDetectionContext_;h.canvas.width!==a||h.canvas.height!==a?(h.canvas.width=a,h.canvas.height=a):h.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(fE(p=[1/0,1/0,-1/0,-1/0],t),vh(p,e*(this.renderBuffer_+i),p));var E,m=function(n){if(void 0!==IG[n])return IG[n];for(var t=2*n+1,e=new Array(t),r=0;r<t;r++)e[r]=new Array(t);for(var i=n,o=0,s=0;i>=o;)Pv(e,n+i,n+o),Pv(e,n+o,n+i),Pv(e,n-o,n+i),Pv(e,n-i,n+o),Pv(e,n-i,n-o),Pv(e,n-o,n-i),Pv(e,n+o,n-i),Pv(e,n+i,n-o),2*((s+=1+2*++o)-i)+1>0&&(s+=1-2*(i-=1));return IG[n]=e,e}(i);function S(X){for(var J=h.getImageData(0,0,a,a).data,$=0;$<a;$++)for(var le=0;le<a;le++)if(m[$][le]&&J[4*(le*a+$)+3]>0){var ie=void 0;return(!(s&&("Image"==E||"Text"==E))||-1!==s.indexOf(X))&&(ie=o(X)),ie||void h.clearRect(0,0,a,a)}}var P,R,F,D,j,x=Object.keys(this.executorsByZIndex_).map(Number);for(x.sort(sf),P=x.length-1;P>=0;--P){var G=x[P].toString();for(F=this.executorsByZIndex_[G],R=PG.length-1;R>=0;--R)if(void 0!==(D=F[E=PG[R]])&&(j=D.executeHitDetection(h,c,r,S,p)))return j}},n.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var r=e[0],i=e[1],o=e[2],s=e[3],a=[r,i,r,s,o,s,o,i];return Sv(a,0,8,2,t,a),a},n.prototype.isEmpty=function(){return uE(this.executorsByZIndex_)},n.prototype.execute=function(t,e,r,i,o,s){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(sf),this.maxExtent_&&(t.save(),this.clip(t,e));var h,p,m,E,S,x,c=o||PG;for(h=0,p=a.length;h<p;++h){var P=a[h].toString();for(S=this.executorsByZIndex_[P],m=0,E=c.length;m<E;++m){var R=c[m];if(void 0!==(x=S[R]))if(!s||"Image"!=R&&"Text"!=R)x.execute(t,e,r,i);else{var F=s[P];F?F.push(x,e.slice(0)):s[P]=[x,e.slice(0)]}}}this.maxExtent_&&t.restore()},n}(),IG={0:[[!0]]};function Pv(n,t,e){var r,i=Math.floor(n.length/2);if(t>=i)for(r=i;r<t;r++)n[r][e]=!0;else if(t<i)for(r=t+1;r<i;r++)n[r][e]=!0}function VB(n,t,e,r,i,o){for(var s=Object.keys(n).map(Number).sort(sf),a=0,c=s.length;a<c;++a)for(var h=n[s[a].toString()],p=void 0,m=0,E=h.length;m<E;){var S=h[m++];S!==p&&(p=S,o.push({items:S.declutterItems,opacity:r}));var x=h[m++];S.execute(t,x,e,i)}}const zB=m7;var y7=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const E7=function(n){function t(e,r,i,o){var s=n.call(this,e)||this;return s.inversePixelTransform=r,s.frameState=i,s.context=o,s}return y7(t,n),t}(Rd);var b7=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const C7=function(n){function t(e){var r=n.call(this)||this;return r.boundHandleImageChange_=r.handleImageChange_.bind(r),r.layer_=e,r}return b7(t,n),t.prototype.getFeatures=function(e){return Ir()},t.prototype.prepareFrame=function(e){return Ir()},t.prototype.renderFrame=function(e,r){return Ir()},t.prototype.loadedTileCallback=function(e,r,i){e[r]||(e[r]={}),e[r][i.tileCoord.toString()]=i},t.prototype.createLoadedTileFinder=function(e,r,i){return function(o,s){var a=this.loadedTileCallback.bind(this,i,o);return e.forEachLoadedTile(r,o,s,a)}.bind(this)},t.prototype.forEachFeatureAtCoordinate=function(e,r,i,o,s){},t.prototype.getDataAtPixel=function(e,r,i){return Ir()},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleFontsChanged=function(){},t.prototype.handleImageChange_=function(e){2===e.target.getState()&&this.renderIfReadyAndVisible()},t.prototype.loadImage=function(e){var r=e.getState();return 2!=r&&3!=r&&e.addEventListener("change",this.boundHandleImageChange_),0==r&&(e.load(),r=e.getState()),2==r},t.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();e.getVisible()&&"ready"==e.getSourceState()&&e.changed()},t}(XR);var S7=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const HB=function(n){function t(e){var r=n.call(this,e)||this;return r.container=null,r.tempTransform_=[1,0,0,1,0,0],r.pixelTransform=[1,0,0,1,0,0],r.inversePixelTransform=[1,0,0,1,0,0],r.context=null,r.containerReused=!1,r}return S7(t,n),t.prototype.useContainer=function(e,r,i){var s,a,o=this.getLayer().getClassName();if(e&&""===e.style.opacity&&e.className===o&&(c=e.firstElementChild)instanceof HTMLCanvasElement&&(a=c.getContext("2d")),a&&a.canvas.style.transform===r?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(s=document.createElement("div")).className=o;var c,h=s.style;h.position="absolute",h.width="100%",h.height="100%",a=Ju(),s.appendChild(c=a.canvas),(h=c.style).position="absolute",h.left="0",h.transformOrigin="top left",this.container=s,this.context=a}},t.prototype.clip=function(e,r,i){var o=r.pixelRatio,s=r.size[0]*o/2,a=r.size[1]*o/2,c=r.viewState.rotation,h=lf(i),p=uf(i),m=sm(i),E=TC(i);Ra(r.coordinateToPixelTransform,h),Ra(r.coordinateToPixelTransform,p),Ra(r.coordinateToPixelTransform,m),Ra(r.coordinateToPixelTransform,E),e.save(),aB(e,-c,s,a),e.beginPath(),e.moveTo(h[0]*o,h[1]*o),e.lineTo(p[0]*o,p[1]*o),e.lineTo(m[0]*o,m[1]*o),e.lineTo(E[0]*o,E[1]*o),e.clip(),aB(e,c,s,a)},t.prototype.clipUnrotated=function(e,r,i){var o=lf(i),s=uf(i),a=sm(i),c=TC(i);Ra(r.coordinateToPixelTransform,o),Ra(r.coordinateToPixelTransform,s),Ra(r.coordinateToPixelTransform,a),Ra(r.coordinateToPixelTransform,c);var h=this.inversePixelTransform;Ra(h,o),Ra(h,s),Ra(h,a),Ra(h,c),e.save(),e.beginPath(),e.moveTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.clip()},t.prototype.dispatchRenderEvent_=function(e,r,i){var o=this.getLayer();if(o.hasListener(e)){var s=new E7(e,this.inversePixelTransform,i,r);o.dispatchEvent(s)}},t.prototype.preRender=function(e,r){this.dispatchRenderEvent_("prerender",e,r)},t.prototype.postRender=function(e,r){this.dispatchRenderEvent_("postrender",e,r)},t.prototype.getRenderTransform=function(e,r,i,o,s,a,c){var m=o/r;return Fp(this.tempTransform_,s/2,a/2,m,-m,-i,-e[0]+c,-e[1])},t.prototype.getDataAtPixel=function(e,r,i){var a,o=Ra(this.inversePixelTransform,e.slice()),s=this.context;try{a=s.getImageData(Math.round(o[0]),Math.round(o[1]),1,1).data}catch(c){return"SecurityError"===c.name?new Uint8Array:a}return 0===a[3]?null:a},t}(C7);var WB={Point:function(n,t,e,r){var i=e.getImage();if(i){if(2!=i.getImageState())return;var o=n.getBuilder(e.getZIndex(),"Image");o.setImageStyle(i,n.addDeclutter(!1)),o.drawPoint(t,r)}var s=e.getText();if(s){var a=n.getBuilder(e.getZIndex(),"Text");a.setTextStyle(s,n.addDeclutter(!!i)),a.drawText(t,r)}},LineString:function(n,t,e,r){var i=e.getStroke();if(i){var o=n.getBuilder(e.getZIndex(),"LineString");o.setFillStrokeStyle(null,i),o.drawLineString(t,r)}var s=e.getText();if(s){var a=n.getBuilder(e.getZIndex(),"Text");a.setTextStyle(s,n.addDeclutter(!1)),a.drawText(t,r)}},Polygon:function(n,t,e,r){var i=e.getFill(),o=e.getStroke();if(i||o){var s=n.getBuilder(e.getZIndex(),"Polygon");s.setFillStrokeStyle(i,o),s.drawPolygon(t,r)}var a=e.getText();if(a){var c=n.getBuilder(e.getZIndex(),"Text");c.setTextStyle(a,n.addDeclutter(!1)),c.drawText(t,r)}},MultiPoint:function(n,t,e,r){var i=e.getImage();if(i){if(2!=i.getImageState())return;var o=n.getBuilder(e.getZIndex(),"Image");o.setImageStyle(i,n.addDeclutter(!1)),o.drawMultiPoint(t,r)}var s=e.getText();if(s){var a=n.getBuilder(e.getZIndex(),"Text");a.setTextStyle(s,n.addDeclutter(!!i)),a.drawText(t,r)}},MultiLineString:function(n,t,e,r){var i=e.getStroke();if(i){var o=n.getBuilder(e.getZIndex(),"LineString");o.setFillStrokeStyle(null,i),o.drawMultiLineString(t,r)}var s=e.getText();if(s){var a=n.getBuilder(e.getZIndex(),"Text");a.setTextStyle(s,n.addDeclutter(!1)),a.drawText(t,r)}},MultiPolygon:function(n,t,e,r){var i=e.getFill(),o=e.getStroke();if(o||i){var s=n.getBuilder(e.getZIndex(),"Polygon");s.setFillStrokeStyle(i,o),s.drawMultiPolygon(t,r)}var a=e.getText();if(a){var c=n.getBuilder(e.getZIndex(),"Text");c.setTextStyle(a,n.addDeclutter(!1)),c.drawText(t,r)}},GeometryCollection:function(n,t,e,r){var o,s,i=t.getGeometriesArray();for(o=0,s=i.length;o<s;++o)(0,WB[i[o].getType()])(n,i[o],e,r)},Circle:function(n,t,e,r){var i=e.getFill(),o=e.getStroke();if(i||o){var s=n.getBuilder(e.getZIndex(),"Circle");s.setFillStrokeStyle(i,o),s.drawCircle(t,r)}var a=e.getText();if(a){var c=n.getBuilder(e.getZIndex(),"Text");c.setTextStyle(a,n.addDeclutter(!1)),c.drawText(t,r)}}};function P7(n,t){return parseInt(Lr(n),10)-parseInt(Lr(t),10)}function YB(n,t){var e=qB(n,t);return e*e}function qB(n,t){return.5*n/t}function uD(n,t,e,r,i,o){var s=!1,a=e.getImage();if(a){var c=a.getImageState();2==c||3==c?a.unlistenImageChange(i):(0==c&&a.load(),c=a.getImageState(),a.listenImageChange(i),s=!0)}return function(n,t,e,r,i){var o=e.getGeometryFunction()(t);if(o){var s=o.simplifyTransformed(r,i);e.getRenderer()?XB(n,s,e,t):(0,WB[s.getType()])(n,s,e,t)}}(n,t,e,r,o),s}function XB(n,t,e,r){if("GeometryCollection"!=t.getType())n.getBuilder(e.getZIndex(),"Default").drawCustom(t,r,e.getRenderer());else for(var i=t.getGeometries(),o=0,s=i.length;o<s;++o)XB(n,i[o],e,r)}var F7=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const B7=function(n){function t(e,r,i,o,s,a,c){var h=n.call(this)||this;return h.context_=e,h.pixelRatio_=r,h.extent_=i,h.transform_=o,h.viewRotation_=s,h.squaredTolerance_=a,h.userTransform_=c,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=0,h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=0,h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=[1,0,0,1,0,0],h}return F7(t,n),t.prototype.drawImages_=function(e,r,i,o){if(this.image_){var s=Sv(e,r,i,2,this.transform_,this.pixelCoordinates_),a=this.context_,c=this.tmpLocalTransform_,h=a.globalAlpha;1!=this.imageOpacity_&&(a.globalAlpha=h*this.imageOpacity_);var p=this.imageRotation_;this.imageRotateWithView_&&(p+=this.viewRotation_);for(var m=0,E=s.length;m<E;m+=2){var S=s[m]-this.imageAnchorX_,x=s[m+1]-this.imageAnchorY_;if(0!==p||1!=this.imageScale_){var P=S+this.imageAnchorX_,R=x+this.imageAnchorY_;Fp(c,P,R,this.imageScale_,this.imageScale_,p,-P,-R),a.setTransform.apply(a,c)}a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,S,x,this.imageWidth_,this.imageHeight_)}(0!==p||1!=this.imageScale_)&&a.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(a.globalAlpha=h)}},t.prototype.drawText_=function(e,r,i,o){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var s=Sv(e,r,i,o,this.transform_,this.pixelCoordinates_),a=this.context_,c=this.textRotation_;for(this.textRotateWithView_&&(c+=this.viewRotation_);r<i;r+=o){var h=s[r]+this.textOffsetX_,p=s[r+1]+this.textOffsetY_;if(0!==c||1!=this.textScale_){var m=Fp(this.tmpLocalTransform_,h,p,this.textScale_,this.textScale_,c,-h,-p);a.setTransform.apply(a,m)}this.textStrokeState_&&a.strokeText(this.text_,h,p),this.textFillState_&&a.fillText(this.text_,h,p)}(0!==c||1!=this.textScale_)&&a.setTransform(1,0,0,1,0,0)}},t.prototype.moveToLineTo_=function(e,r,i,o,s){var a=this.context_,c=Sv(e,r,i,o,this.transform_,this.pixelCoordinates_);a.moveTo(c[0],c[1]);var h=c.length;s&&(h-=2);for(var p=2;p<h;p+=2)a.lineTo(c[p],c[p+1]);return s&&a.closePath(),i},t.prototype.drawRings_=function(e,r,i,o){for(var s=0,a=i.length;s<a;++s)r=this.moveToLineTo_(e,r,i[s],o,!0);return r},t.prototype.drawCircle=function(e){if(oa(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var r=function(n,t,e){var r=n.getFlatCoordinates();if(r){var i=n.getStride();return Sv(r,0,r.length,i,t,e)}return null}(e,this.transform_,this.pixelCoordinates_),i=r[2]-r[0],o=r[3]-r[1],s=Math.sqrt(i*i+o*o),a=this.context_;a.beginPath(),a.arc(r[0],r[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}},t.prototype.setStyle=function(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())},t.prototype.setTransform=function(e){this.transform_=e},t.prototype.drawGeometry=function(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}},t.prototype.drawFeature=function(e,r){var i=r.getGeometryFunction()(e);!i||!oa(this.extent_,i.getExtent())||(this.setStyle(r),this.drawGeometry(i))},t.prototype.drawGeometryCollection=function(e){for(var r=e.getGeometriesArray(),i=0,o=r.length;i<o;++i)this.drawGeometry(r[i])},t.prototype.drawPoint=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var r=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(r,0,r.length,i),""!==this.text_&&this.drawText_(r,0,r.length,i)},t.prototype.drawMultiPoint=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var r=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(r,0,r.length,i),""!==this.text_&&this.drawText_(r,0,r.length,i)},t.prototype.drawLineString=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),oa(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,i=e.getFlatCoordinates();r.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),r.stroke()}if(""!==this.text_){var o=e.getFlatMidpoint();this.drawText_(o,0,2,2)}}},t.prototype.drawMultiLineString=function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var r=e.getExtent();if(oa(this.extent_,r)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,o=e.getFlatCoordinates(),s=0,a=e.getEnds(),c=e.getStride();i.beginPath();for(var h=0,p=a.length;h<p;++h)s=this.moveToLineTo_(o,s,a[h],c,!1);i.stroke()}if(""!==this.text_){var m=e.getFlatMidpoints();this.drawText_(m,0,m.length,2)}}},t.prototype.drawPolygon=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),oa(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var r=this.context_;r.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}if(""!==this.text_){var i=e.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},t.prototype.drawMultiPolygon=function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),oa(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var r=this.context_,i=e.getOrientedFlatCoordinates(),o=0,s=e.getEndss(),a=e.getStride();r.beginPath();for(var c=0,h=s.length;c<h;++c)o=this.drawRings_(i,o,s[c],a);this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}if(""!==this.text_){var m=e.getFlatInteriorPoints();this.drawText_(m,0,m.length,2)}}},t.prototype.setContextFillState_=function(e){var r=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,r.fillStyle=e.fillStyle):(r.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})},t.prototype.setContextStrokeState_=function(e){var r=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,r.lineCap=e.lineCap),r.setLineDash&&(af(i.lineDash,e.lineDash)||r.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,r.lineDashOffset=e.lineDashOffset)),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,r.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,r.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,r.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,r.strokeStyle=e.strokeStyle)):(r.lineCap=e.lineCap,r.setLineDash&&(r.setLineDash(e.lineDash),r.lineDashOffset=e.lineDashOffset),r.lineJoin=e.lineJoin,r.lineWidth=e.lineWidth,r.miterLimit=e.miterLimit,r.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})},t.prototype.setContextTextState_=function(e){var r=this.context_,i=this.contextTextState_,o=e.textAlign?e.textAlign:bP;i?(i.font!=e.font&&(i.font=e.font,r.font=e.font),i.textAlign!=o&&(i.textAlign=o,r.textAlign=o),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,r.textBaseline=e.textBaseline)):(r.font=e.font,r.textAlign=o,r.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:o,textBaseline:e.textBaseline})},t.prototype.setFillStrokeStyle=function(e,r){if(e){var i=e.getColor();this.fillState_={fillStyle:Np(i||mm)}}else this.fillState_=null;if(r){var o=r.getColor(),s=r.getLineCap(),a=r.getLineDash(),c=r.getLineDashOffset(),h=r.getLineJoin(),p=r.getWidth(),m=r.getMiterLimit();this.strokeState_={lineCap:void 0!==s?s:HC,lineDash:a||ZO,lineDashOffset:c||0,lineJoin:void 0!==h?h:WC,lineWidth:this.pixelRatio_*(void 0!==p?p:1),miterLimit:void 0!==m?m:10,strokeStyle:Np(o||EP)}}else this.strokeState_=null},t.prototype.setImageStyle=function(e){if(e){var r=e.getAnchor(),i=e.getImage(1),o=e.getOrigin(),s=e.getSize();this.imageAnchorX_=r[0],this.imageAnchorY_=r[1],this.imageHeight_=s[1],this.image_=i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation(),this.imageScale_=e.getScale()*this.pixelRatio_,this.imageWidth_=s[0]}else this.image_=null},t.prototype.setTextStyle=function(e){if(e){var r=e.getFill();if(r){var i=r.getColor();this.textFillState_={fillStyle:Np(i||mm)}}else this.textFillState_=null;var o=e.getStroke();if(o){var s=o.getColor(),a=o.getLineCap(),c=o.getLineDash(),h=o.getLineDashOffset(),p=o.getLineJoin(),m=o.getWidth(),E=o.getMiterLimit();this.textStrokeState_={lineCap:void 0!==a?a:HC,lineDash:c||ZO,lineDashOffset:h||0,lineJoin:void 0!==p?p:WC,lineWidth:void 0!==m?m:1,miterLimit:void 0!==E?E:10,strokeStyle:Np(s||EP)}}else this.textStrokeState_=null;var S=e.getFont(),x=e.getOffsetX(),P=e.getOffsetY(),R=e.getRotateWithView(),F=e.getRotation(),D=e.getScale(),j=e.getText(),G=e.getTextAlign(),X=e.getTextBaseline();this.textState_={font:void 0!==S?S:iB,textAlign:void 0!==G?G:bP,textBaseline:void 0!==X?X:QO},this.text_=void 0!==j?j:"",this.textOffsetX_=void 0!==x?this.pixelRatio_*x:0,this.textOffsetY_=void 0!==P?this.pixelRatio_*P:0,this.textRotateWithView_=void 0!==R&&R,this.textRotation_=void 0!==F?F:0,this.textScale_=this.pixelRatio_*(void 0!==D?D:1)}else this.text_=""},t}(FB);function KB(n,t,e){return t+":"+n+":"+(e?function(n){return"string"==typeof n?n:nB(n)}(e):"null")}var ZB=new(function(){function n(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return n.prototype.clear=function(){this.cache_={},this.cacheSize_=0},n.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},n.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_)0==(3&t++)&&!this.cache_[e].hasListener()&&(delete this.cache_[e],--this.cacheSize_)}},n.prototype.get=function(t,e,r){var i=KB(t,e,r);return i in this.cache_?this.cache_[i]:null},n.prototype.set=function(t,e,r,i){var o=KB(t,e,r);this.cache_[o]=i,++this.cacheSize_},n.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},n}()),U7=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),V7=function(n){function t(e,r,i,o,s,a){var c=n.call(this)||this;return c.hitDetectionImage_=null,c.image_=e||new Image,null!==o&&(c.image_.crossOrigin=o),c.canvas_=a?document.createElement("canvas"):null,c.color_=a,c.unlisten_=null,c.imageState_=s,c.size_=i,c.src_=r,c}return U7(t,n),t.prototype.isTainted_=function(e){if(void 0===this.tainted_&&2===this.imageState_){e||(e=Ju(1,1)).drawImage(this.image_,0,0);try{e.getImageData(0,0,1,1),this.tainted_=!1}catch(r){this.tainted_=!0}}return!0===this.tainted_},t.prototype.dispatchChangeEvent_=function(){this.dispatchEvent("change")},t.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},t.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},t.prototype.getImage=function(e){return this.canvas_?this.canvas_:this.image_},t.prototype.getImageState=function(){return this.imageState_},t.prototype.getHitDetectionImage=function(e){if(!this.hitDetectionImage_)if(this.isTainted_()){var r=this.size_[0],i=this.size_[1],o=Ju(r,i);o.fillRect(0,0,r,i),this.hitDetectionImage_=o.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},t.prototype.getSize=function(){return this.size_},t.prototype.getSrc=function(){return this.src_},t.prototype.load=function(){if(0==this.imageState_){this.imageState_=1;try{this.image_.src=this.src_}catch(e){this.handleImageError_()}this.unlisten_=jC(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},t.prototype.replaceColor_=function(){if(this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var e=this.canvas_.getContext("2d");if(e.drawImage(this.image_,0,0),this.isTainted_(e)){var r=this.color_;return e.globalCompositeOperation="multiply",e.fillStyle="rgb("+r[0]+","+r[1]+","+r[2]+")",e.fillRect(0,0,this.image_.width,this.image_.height),e.globalCompositeOperation="destination-in",void e.drawImage(this.image_,0,0)}for(var i=e.getImageData(0,0,this.image_.width,this.image_.height),o=i.data,s=this.color_[0]/255,a=this.color_[1]/255,c=this.color_[2]/255,h=0,p=o.length;h<p;h+=4)o[h]*=s,o[h+1]*=a,o[h+2]*=c;e.putImageData(i,0,0)}},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(cv);var H7=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const wu=function(n){function t(e){var r=this,i=e||{};(r=n.call(this,{opacity:void 0!==i.opacity?i.opacity:1,rotation:void 0!==i.rotation?i.rotation:0,scale:void 0!==i.scale?i.scale:1,displacement:void 0!==i.displacement?i.displacement:[0,0],rotateWithView:void 0!==i.rotateWithView&&i.rotateWithView})||this).anchor_=void 0!==i.anchor?i.anchor:[.5,.5],r.normalizedAnchor_=null,r.anchorOrigin_=void 0!==i.anchorOrigin?i.anchorOrigin:"top-left",r.anchorXUnits_=void 0!==i.anchorXUnits?i.anchorXUnits:"fraction",r.anchorYUnits_=void 0!==i.anchorYUnits?i.anchorYUnits:"fraction",r.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null;var h=void 0!==i.img?i.img:null,p=void 0!==i.imgSize?i.imgSize:null,m=i.src;qi(!(void 0!==m&&h),4),qi(!h||h&&p,5),(void 0===m||0===m.length)&&h&&(m=h.src||Lr(h)),qi(void 0!==m&&m.length>0,6);var E=void 0!==i.src?0:2;return r.color_=void 0!==i.color?sG(i.color):null,r.iconImage_=function(n,t,e,r,i,o){var s=ZB.get(t,r,o);return s||(s=new V7(n,t,e,r,i,o),ZB.set(t,r,o,s)),s}(h,m,p,r.crossOrigin_,E,r.color_),r.offset_=void 0!==i.offset?i.offset:[0,0],r.offsetOrigin_=void 0!==i.offsetOrigin?i.offsetOrigin:"top-left",r.origin_=null,r.size_=void 0!==i.size?i.size:null,r}return H7(t,n),t.prototype.clone=function(){return new t({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},t.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var e=this.anchor_,r=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!r)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=r[0]),"fraction"==this.anchorYUnits_&&(e[1]*=r[1])}if("top-left"!=this.anchorOrigin_){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+r[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+r[1])}return this.normalizedAnchor_=e,this.normalizedAnchor_},t.prototype.setAnchor=function(e){this.anchor_=e,this.normalizedAnchor_=null},t.prototype.getColor=function(){return this.color_},t.prototype.getImage=function(e){return this.iconImage_.getImage(e)},t.prototype.getImageSize=function(){return this.iconImage_.getSize()},t.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},t.prototype.getImageState=function(){return this.iconImage_.getImageState()},t.prototype.getHitDetectionImage=function(e){return this.iconImage_.getHitDetectionImage(e)},t.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var e=this.offset_,r=this.getDisplacement();if("top-left"!=this.offsetOrigin_){var i=this.getSize(),o=this.iconImage_.getSize();if(!i||!o)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=o[0]-i[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=o[1]-i[1]-e[1])}return e[0]+=r[0],e[1]+=r[1],this.origin_=e,this.origin_},t.prototype.getSrc=function(){return this.iconImage_.getSrc()},t.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},t.prototype.listenImageChange=function(e){this.iconImage_.addEventListener("change",e)},t.prototype.load=function(){this.iconImage_.load()},t.prototype.unlistenImageChange=function(e){this.iconImage_.removeEventListener("change",e)},t}(tD);function JB(n,t,e,r,i,o,s){var h=Ju(n[0]/2,n[1]/2);h.imageSmoothingEnabled=!1;for(var p=h.canvas,m=new B7(h,.5,i,null,s),E=e.length,S=Math.floor(16777215/E),x={},P=1;P<=E;++P){var R=e[P-1],F=R.getStyleFunction()||r;if(r){var D=F(R,o);if(D){Array.isArray(D)||(D=[D]);for(var G="#"+("000000"+(P*S).toString(16)).slice(-6),X=0,J=D.length;X<J;++X){var $=D[X],le=$.clone(),ie=le.getFill();ie&&ie.setColor(G);var Fe=le.getStroke();Fe&&Fe.setColor(G),le.setText(void 0);var Ce=$.getImage();if(Ce){var $e=Ce.getImageSize();if(!$e)continue;var ot=document.createElement("canvas");ot.width=$e[0],ot.height=$e[1];var st=ot.getContext("2d",{alpha:!1});st.fillStyle=G;var dt=st.canvas;st.fillRect(0,0,dt.width,dt.height),Ju($e?$e[0]:dt.width,$e?$e[1]:dt.height).drawImage(dt,0,0),le.setImage(new wu({img:dt,imgSize:$e,anchor:Ce.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Ce.getOrigin(),size:Ce.getSize(),opacity:Ce.getOpacity(),scale:Ce.getScale(),rotation:Ce.getRotation(),rotateWithView:Ce.getRotateWithView()}))}var gt=Number(le.getZIndex());(Re=x[gt])||(x[gt]=Re={},Re.Polygon=[],Re.Circle=[],Re.LineString=[],Re.Point=[]);var Xe=le.getGeometryFunction()(R);Xe&&oa(i,Xe.getExtent())&&Re[Xe.getType().replace("Multi","")].push(Xe,le)}}}}for(var Oe=Object.keys(x).map(Number).sort(sf),qt=(P=0,Oe.length);P<qt;++P){var Re=x[Oe[P]];for(var Pt in Re){var $t=Re[Pt];for(X=0,J=$t.length;X<J;X+=2){m.setStyle($t[X+1]);for(var dn=0,Pn=t.length;dn<Pn;++dn)m.setTransform(t[dn]),m.drawGeometry($t[X])}}}return document.body.appendChild(h.canvas),h.getImageData(0,0,p.width,p.height)}function QB(n,t,e){var r=[];if(e){var i=4*(Math.round(n[0]/2)+Math.round(n[1]/2)*e.width),c=e.data[i+2]+256*(e.data[i+1]+256*e.data[i]),h=Math.floor(16777215/t.length);c&&c%h==0&&r.push(t[c/h-1])}return r}var Y7=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const X7=function(n){function t(e){var r=n.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.dirty_=!1,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=[1/0,1/0,-1/0,-1/0],r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r}return Y7(t,n),t.prototype.useContainer=function(e,r,i){i<1&&(e=null),n.prototype.useContainer.call(this,e,r,i)},t.prototype.renderFrame=function(e,r){var i=e.pixelRatio,o=e.layerStatesArray[e.layerIndex];(function(n,t,e){yP(n,t,0,0,e,0,0)})(this.pixelTransform,1/i,1/i),uG(this.inversePixelTransform,this.pixelTransform);var s=KO(this.pixelTransform);this.useContainer(r,s,o.opacity);var a=this.context,c=a.canvas,h=this.replayGroup_;if(!h||h.isEmpty())return!this.containerReused&&c.width>0&&(c.width=0),this.container;var p=Math.round(e.size[0]*i),m=Math.round(e.size[1]*i);c.width!=p||c.height!=m?(c.width=p,c.height=m,c.style.transform!==s&&(c.style.transform=s)):this.containerReused||a.clearRect(0,0,p,m),this.preRender(a,e);var E=e.extent,S=e.viewState,x=S.center,P=S.resolution,R=S.projection,F=S.rotation,D=R.getExtent(),j=this.getLayer().getSource(),G=!1;if(o.extent){var X=eP(o.extent);(G=!eu(X,e.extent)&&oa(X,e.extent))&&this.clip(a,e,X)}var J=e.viewHints,$=!(J[0]||J[1]),le=this.getRenderTransform(x,P,F,i,p,m,0),ie=this.getLayer().getDeclutter()?{}:null;if(h.execute(a,le,F,$,void 0,ie),j.getWrapX()&&R.canWrapX()&&!eu(D,E)){for(var Fe=E[0],Ce=Os(D),$e=0;Fe<D[0];){--$e;var st=this.getRenderTransform(x,P,F,i,p,m,Ce*$e);h.execute(a,st,F,$,void 0,ie),Fe+=Ce}for($e=0,Fe=E[2];Fe>D[2];){++$e;var dt=this.getRenderTransform(x,P,F,i,p,m,Ce*$e);h.execute(a,dt,F,$,void 0,ie),Fe-=Ce}}if(ie){var kt=e.viewHints;VB(ie,a,F,1,!(kt[0]||kt[1]),e.declutterItems)}G&&a.restore(),this.postRender(a,e);var Zt=o.opacity,gt=this.container;return Zt!==parseFloat(gt.style.opacity)&&(gt.style.opacity=1===Zt?"":Zt),this.container},t.prototype.getFeatures=function(e){return new Promise(function(r,i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var o=[this.context.canvas.width,this.context.canvas.height];Ra(this.pixelTransform,o);var s=this.renderedCenter_,a=this.renderedResolution_,c=this.renderedRotation_,h=this.renderedProjection_,p=this.renderedExtent_,m=this.getLayer(),E=[],S=o[0]/2,x=o[1]/2;E.push(this.getRenderTransform(s,a,c,.5,S,x,0).slice());var P=m.getSource(),R=h.getExtent();if(P.getWrapX()&&h.canWrapX()&&!eu(R,p)){for(var F=p[0],D=Os(R),j=0;F<R[0];)--j,E.push(this.getRenderTransform(s,a,c,.5,S,x,D*j).slice()),F+=D;for(j=0,F=p[2];F>R[2];)++j,E.push(this.getRenderTransform(s,a,c,.5,S,x,D*j).slice()),F-=D}this.hitDetectionImageData_=JB(o,E,this.renderedFeatures_,m.getStyleFunction(),p,a,c)}r(QB(e,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},t.prototype.forEachFeatureAtCoordinate=function(e,r,i,o,s){if(this.replayGroup_){var a=r.viewState.resolution,c=r.viewState.rotation,h=this.getLayer(),p={};return this.replayGroup_.forEachFeatureAtCoordinate(e,a,c,i,function(E){var S=Lr(E);if(!(S in p))return p[S]=!0,o(E,h)},h.getDeclutter()?s:null)}},t.prototype.handleFontsChanged=function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.prepareFrame=function(e){var r=this.getLayer(),i=r.getSource();if(!i)return!1;var o=e.viewHints[0],s=e.viewHints[1],a=r.getUpdateWhileAnimating(),c=r.getUpdateWhileInteracting();if(!this.dirty_&&!a&&o||!c&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var h=e.extent,p=e.viewState,m=p.projection,E=p.resolution,S=e.pixelRatio,x=r.getRevision(),P=r.getRenderBuffer(),R=r.getRenderOrder();void 0===R&&(R=P7);var F=p.center.slice(),D=vh(h,P*E),j=[D.slice()],G=m.getExtent();if(i.getWrapX()&&m.canWrapX()&&!eu(G,e.extent)){var X=Os(G),J=Math.max(Os(D)/2,X);D[0]=G[0]-J,D[2]=G[2]+J,pB(F,m);var $=function(n,t){var e=t.getExtent(),r=xp(n);if(t.canWrapX()&&(r[0]<e[0]||r[0]>=e[2])){var i=Os(e),s=Math.floor((r[0]-e[0])/i)*i;n[0]-=s,n[2]-=s}return n}(j[0],m);$[0]<G[0]&&$[2]<G[2]?j.push([$[0]+X,$[1],$[2]+X,$[3]]):$[0]>G[0]&&$[2]>G[2]&&j.push([$[0]-X,$[1],$[2]-X,$[3]])}if(!this.dirty_&&this.renderedResolution_==E&&this.renderedRevision_==x&&this.renderedRenderOrder_==R&&eu(this.renderedExtent_,D))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var Fe,le=new UB(qB(E,S),D,E,S,r.getDeclutter()),ie=Mp();if(ie){for(var Ce=0,$e=j.length;Ce<$e;++Ce)i.loadFeatures(IO(j[Ce]),E,ie);Fe=vv(ie,m)}else for(Ce=0,$e=j.length;Ce<$e;++Ce)i.loadFeatures(j[Ce],E,m);var ot=YB(E,S),st=function(gt){var Re,Xe=gt.getStyleFunction()||r.getStyleFunction();if(Xe&&(Re=Xe(gt,E)),Re){var Oe=this.renderFeature(gt,ot,Re,le,Fe);this.dirty_=this.dirty_||Oe}}.bind(this),dt=IO(D),kt=i.getFeaturesInExtent(dt);for(R&&kt.sort(R),Ce=0,$e=kt.length;Ce<$e;++Ce)st(kt[Ce]);this.renderedFeatures_=kt;var Qe=le.finish(),Zt=new zB(D,E,S,i.getOverlaps(),Qe,r.getRenderBuffer());return this.renderedResolution_=E,this.renderedRevision_=x,this.renderedRenderOrder_=R,this.renderedExtent_=D,this.renderedRotation_=p.rotation,this.renderedCenter_=F,this.renderedProjection_=m,this.replayGroup_=Zt,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},t.prototype.renderFeature=function(e,r,i,o,s){if(!i)return!1;var a=!1;if(Array.isArray(i))for(var c=0,h=i.length;c<h;++c)a=uD(o,e,i[c],r,this.boundHandleStyleImageChange_,s)||a;else a=uD(o,e,i,r,this.boundHandleStyleImageChange_,s);return a},t}(HB);var K7=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const rc=function(n){function t(e){return n.call(this,e)||this}return K7(t,n),t.prototype.createRenderer=function(){return new X7(this)},t}(NB);var $B=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tj=[0,0,0,0],ZC=[],MG=function(n){function t(e,r,i){var o=n.call(this,e)||this;return o.features=r,o.mapBrowserEvent=i,o}return $B(t,n),t}(Rd);function Q7(n,t){return n.index-t.index}function nj(n,t,e){var r=t.geometry;if("Circle"===r.getType()){var i=r;if(1===t.index){var o=Mp();o&&(i=i.clone().transform(o,e));var s=KC(i.getCenter(),Fd(n)),a=Math.sqrt(s)-i.getRadius();return a*a}}var c=Fd(n);return ZC[0]=Fd(t.segment[0]),ZC[1]=Fd(t.segment[1]),function(n,t){return KC(n,dB(n,t))}(c,ZC)}function rj(n,t,e){var r=t.geometry;if("Circle"===r.getType()&&1===t.index){var i=r,o=Mp();return o&&(i=i.clone().transform(o,e)),PO(i.getClosestPoint(Fd(n)))}var s=Fd(n);return ZC[0]=Fd(t.segment[0]),ZC[1]=Fd(t.segment[1]),PO(dB(s,ZC))}function $7(){var n=pG();return function(t,e){return n.Point}}const RG=function(n){function t(e){var i,r=n.call(this,e)||this;if(r.boundHandleFeatureChange_=r.handleFeatureChange_.bind(r),r.condition_=e.condition?e.condition:RV,r.defaultDeleteCondition_=function(o){return function(n){var t=n.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey}(o)&&kp(o)},r.deleteCondition_=e.deleteCondition?e.deleteCondition:r.defaultDeleteCondition_,r.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:_a,r.vertexFeature_=null,r.vertexSegments_=null,r.lastPixel_=[0,0],r.ignoreNextSingleClick_=!1,r.modified_=!1,r.rBush_=new dP,r.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,r.snappedToVertex_=!1,r.changingFeature_=!1,r.dragSegments_=[],r.overlay_=new rc({source:new bu({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:$7(),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.SEGMENT_WRITERS_={Point:r.writePointGeometry_.bind(r),LineString:r.writeLineStringGeometry_.bind(r),LinearRing:r.writeLineStringGeometry_.bind(r),Polygon:r.writePolygonGeometry_.bind(r),MultiPoint:r.writeMultiPointGeometry_.bind(r),MultiLineString:r.writeMultiLineStringGeometry_.bind(r),MultiPolygon:r.writeMultiPolygonGeometry_.bind(r),Circle:r.writeCircleGeometry_.bind(r),GeometryCollection:r.writeGeometryCollectionGeometry_.bind(r)},r.source_=null,e.source?(r.source_=e.source,i=new hm(r.source_.getFeatures()),r.source_.addEventListener("addfeature",r.handleSourceAdd_.bind(r)),r.source_.addEventListener("removefeature",r.handleSourceRemove_.bind(r))):i=e.features,!i)throw new Error("The modify interaction requires features or a source");return r.features_=i,r.features_.forEach(r.addFeature_.bind(r)),r.features_.addEventListener("add",r.handleFeatureAdd_.bind(r)),r.features_.addEventListener("remove",r.handleFeatureRemove_.bind(r)),r.lastPointerEvent_=null,r}return $B(t,n),t.prototype.addFeature_=function(e){var r=e.getGeometry();if(r){var i=this.SEGMENT_WRITERS_[r.getType()];i&&i(e,r)}var o=this.getMap();o&&o.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,o),e.addEventListener("change",this.boundHandleFeatureChange_)},t.prototype.willModifyFeatures_=function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new MG("modifystart",this.features_,e)))},t.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener("change",this.boundHandleFeatureChange_)},t.prototype.removeFeatureSegmentData_=function(e){var r=this.rBush_,i=[];r.forEach(function(c){e===c.feature&&i.push(c)});for(var o=i.length-1;o>=0;--o){for(var s=i[o],a=this.dragSegments_.length-1;a>=0;--a)this.dragSegments_[a][0]===s&&this.dragSegments_.splice(a,1);r.remove(s)}},t.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),n.prototype.setActive.call(this,e)},t.prototype.setMap=function(e){this.overlay_.setMap(e),n.prototype.setMap.call(this,e)},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},t.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},t.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},t.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var r=e.target;this.removeFeature_(r),this.addFeature_(r)}},t.prototype.handleFeatureRemove_=function(e){this.removeFeature_(e.element)},t.prototype.writePointGeometry_=function(e,r){var i=r.getCoordinates(),o={feature:e,geometry:r,segment:[i,i]};this.rBush_.insert(r.getExtent(),o)},t.prototype.writeMultiPointGeometry_=function(e,r){for(var i=r.getCoordinates(),o=0,s=i.length;o<s;++o){var a=i[o],c={feature:e,geometry:r,depth:[o],index:o,segment:[a,a]};this.rBush_.insert(r.getExtent(),c)}},t.prototype.writeLineStringGeometry_=function(e,r){for(var i=r.getCoordinates(),o=0,s=i.length-1;o<s;++o){var a=i.slice(o,o+2),c={feature:e,geometry:r,index:o,segment:a};this.rBush_.insert(Od(a),c)}},t.prototype.writeMultiLineStringGeometry_=function(e,r){for(var i=r.getCoordinates(),o=0,s=i.length;o<s;++o)for(var a=i[o],c=0,h=a.length-1;c<h;++c){var p=a.slice(c,c+2),m={feature:e,geometry:r,depth:[o],index:c,segment:p};this.rBush_.insert(Od(p),m)}},t.prototype.writePolygonGeometry_=function(e,r){for(var i=r.getCoordinates(),o=0,s=i.length;o<s;++o)for(var a=i[o],c=0,h=a.length-1;c<h;++c){var p=a.slice(c,c+2),m={feature:e,geometry:r,depth:[o],index:c,segment:p};this.rBush_.insert(Od(p),m)}},t.prototype.writeMultiPolygonGeometry_=function(e,r){for(var i=r.getCoordinates(),o=0,s=i.length;o<s;++o)for(var a=i[o],c=0,h=a.length;c<h;++c)for(var p=a[c],m=0,E=p.length-1;m<E;++m){var S=p.slice(m,m+2),x={feature:e,geometry:r,depth:[c,o],index:m,segment:S};this.rBush_.insert(Od(S),x)}},t.prototype.writeCircleGeometry_=function(e,r){var i=r.getCenter(),o={feature:e,geometry:r,index:0,segment:[i,i]},s={feature:e,geometry:r,index:1,segment:[i,i]},a=[o,s];o.featureSegments=a,s.featureSegments=a,this.rBush_.insert(dv(i),o);var c=r,h=Mp();if(h&&this.getMap()){var p=this.getMap().getView().getProjection();c=OB(c=c.clone().transform(h,p)).transform(p,h)}this.rBush_.insert(c.getExtent(),s)},t.prototype.writeGeometryCollectionGeometry_=function(e,r){for(var i=r.getGeometriesArray(),o=0;o<i.length;++o){var s=i[o];(0,this.SEGMENT_WRITERS_[s.getType()])(e,s)}},t.prototype.createOrUpdateVertexFeature_=function(e){var r=this.vertexFeature_;return r?r.getGeometry().setCoordinates(e):(r=new jd(new nc(e)),this.vertexFeature_=r,this.overlay_.getSource().addFeature(r)),r},t.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,!e.map.getView().getInteracting()&&"pointermove"==e.type&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(r=!("singleclick"!=e.type||!this.ignoreNextSingleClick_)||this.removePoint()),"singleclick"==e.type&&(this.ignoreNextSingleClick_=!1),n.prototype.handleEvent.call(this,e)&&!r);var r},t.prototype.handleDragEvent=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);for(var r=e.coordinate,i=0,o=this.dragSegments_.length;i<o;++i){for(var s=this.dragSegments_[i],a=s[0],c=a.depth,h=a.geometry,p=void 0,m=a.segment,E=s[1];r.length<h.getStride();)r.push(m[E][r.length]);switch(h.getType()){case"Point":p=r,m[0]=r,m[1]=r;break;case"MultiPoint":(p=h.getCoordinates())[a.index]=r,m[0]=r,m[1]=r;break;case"LineString":(p=h.getCoordinates())[a.index+E]=r,m[E]=r;break;case"MultiLineString":case"Polygon":(p=h.getCoordinates())[c[0]][a.index+E]=r,m[E]=r;break;case"MultiPolygon":(p=h.getCoordinates())[c[1]][c[0]][a.index+E]=r,m[E]=r;break;case"Circle":if(m[0]=r,m[1]=r,0===a.index)this.changingFeature_=!0,h.setCenter(r),this.changingFeature_=!1;else{this.changingFeature_=!0;var S=e.map.getView().getProjection(),x=fB(Fd(h.getCenter()),Fd(r)),P=Mp();if(P){var R=h.clone().transform(P,S);R.setRadius(x),x=R.transform(S,P).getRadius()}h.setRadius(x),this.changingFeature_=!1}}p&&this.setGeometryCoordinates_(h,p)}this.createOrUpdateVertexFeature_(r)},t.prototype.handleDownEvent=function(e){if(!this.condition_(e))return!1;var r=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,r),this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var o=e.map.getView().getProjection(),s=[],a=i.getGeometry().getCoordinates(),c=Od([a]),h=this.rBush_.getInExtent(c),p={};h.sort(Q7);for(var m=0,E=h.length;m<E;++m){var S=h[m],x=S.segment,P=Lr(S.feature),R=S.depth;if(R&&(P+="-"+R.join("-")),p[P]||(p[P]=new Array(2)),"Circle"!==S.geometry.getType()||1!==S.index)if(!xE(x[0],a)||p[P][0])if(!xE(x[1],a)||p[P][1])Lr(x)in this.vertexSegments_&&!p[P][0]&&!p[P][1]&&this.insertVertexCondition_(e)&&s.push([S,a]);else{if(("LineString"===S.geometry.getType()||"MultiLineString"===S.geometry.getType())&&p[P][0]&&0===p[P][0].index)continue;this.dragSegments_.push([S,1]),p[P][1]=S}else this.dragSegments_.push([S,0]),p[P][0]=S;else xE(rj(r,S,o),a)&&!p[P][0]&&(this.dragSegments_.push([S,0]),p[P][0]=S)}s.length&&this.willModifyFeatures_(e);for(var D=s.length-1;D>=0;--D)this.insertVertex_.apply(this,s[D])}return!!this.vertexFeature_},t.prototype.handleUpEvent=function(e){for(var r=this.dragSegments_.length-1;r>=0;--r){var i=this.dragSegments_[r][0],o=i.geometry;if("Circle"===o.getType()){var s=o.getCenter(),a=i.featureSegments[0],c=i.featureSegments[1];a.segment[0]=s,a.segment[1]=s,c.segment[0]=s,c.segment[1]=s,this.rBush_.update(dv(s),a);var h=o,p=Mp();if(p){var m=e.map.getView().getProjection();h=OB(h=h.clone().transform(p,m)).transform(m,p)}this.rBush_.update(h.getExtent(),c)}else this.rBush_.update(Od(i.segment),i)}return this.modified_&&(this.dispatchEvent(new MG("modifyend",this.features_,e)),this.modified_=!1),!1},t.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)},t.prototype.handlePointerAtPixel_=function(e,r,i){var o=i||r.getCoordinateFromPixel(e),s=r.getView().getProjection(),p=IO(vh(eP(dv(o,tj)),r.getView().getResolution()*this.pixelTolerance_,tj)),E=this.rBush_.getInExtent(p);if(E.length>0){E.sort(function(Fe,Ce){return nj(o,Fe,s)-nj(o,Ce,s)});var S=E[0],x=S.segment,P=rj(o,S,s),R=r.getPixelFromCoordinate(P),F=fB(e,R);if(F<=this.pixelTolerance_){var D={};if("Circle"===S.geometry.getType()&&1===S.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(P);else{var j=r.getPixelFromCoordinate(x[0]),G=r.getPixelFromCoordinate(x[1]),X=KC(R,j),J=KC(R,G);F=Math.sqrt(Math.min(X,J)),this.snappedToVertex_=F<=this.pixelTolerance_,this.snappedToVertex_&&(P=X>J?x[1]:x[0]),this.createOrUpdateVertexFeature_(P);for(var $=1,le=E.length;$<le;++$){var ie=E[$].segment;if(!(xE(x[0],ie[0])&&xE(x[1],ie[1])||xE(x[0],ie[1])&&xE(x[1],ie[0])))break;D[Lr(ie)]=!0}}return D[Lr(x)]=!0,void(this.vertexSegments_=D)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},t.prototype.insertVertex_=function(e,r){for(var h,i=e.segment,o=e.feature,s=e.geometry,a=e.depth,c=e.index;r.length<s.getStride();)r.push(0);switch(s.getType()){case"MultiLineString":case"Polygon":(h=s.getCoordinates())[a[0]].splice(c+1,0,r);break;case"MultiPolygon":(h=s.getCoordinates())[a[1]][a[0]].splice(c+1,0,r);break;case"LineString":(h=s.getCoordinates()).splice(c+1,0,r);break;default:return}this.setGeometryCoordinates_(s,h);var p=this.rBush_;p.remove(e),this.updateSegmentIndices_(s,c,a,1);var m={segment:[i[0],r],feature:o,geometry:s,depth:a,index:c};p.insert(Od(m.segment),m),this.dragSegments_.push([m,1]);var E={segment:[r,i[1]],feature:o,geometry:s,depth:a,index:c+1};p.insert(Od(E.segment),E),this.dragSegments_.push([E,0]),this.ignoreNextSingleClick_=!0},t.prototype.removePoint=function(){if(this.lastPointerEvent_&&"pointerdrag"!=this.lastPointerEvent_.type){var e=this.lastPointerEvent_;this.willModifyFeatures_(e);var r=this.removeVertex_();return this.dispatchEvent(new MG("modifyend",this.features_,e)),this.modified_=!1,r}return!1},t.prototype.removeVertex_=function(){var o,s,a,c,h,p,m,E,S,x,P,e=this.dragSegments_,r={},i=!1;for(h=e.length-1;h>=0;--h)P=Lr((x=(a=e[h])[0]).feature),x.depth&&(P+="-"+x.depth.join("-")),P in r||(r[P]={}),0===a[1]?(r[P].right=x,r[P].index=x.index):1==a[1]&&(r[P].left=x,r[P].index=x.index+1);for(P in r){switch(S=r[P].right,(E=(p=r[P].index)-1)<0&&(E=0),o=s=(c=(x=void 0!==(m=r[P].left)?m:S).geometry).getCoordinates(),i=!1,c.getType()){case"MultiLineString":s[x.depth[0]].length>2&&(s[x.depth[0]].splice(p,1),i=!0);break;case"LineString":s.length>2&&(s.splice(p,1),i=!0);break;case"MultiPolygon":o=o[x.depth[1]];case"Polygon":(o=o[x.depth[0]]).length>4&&(p==o.length-1&&(p=0),o.splice(p,1),i=!0,0===p&&(o.pop(),o.push(o[0]),E=o.length-1))}if(i){this.setGeometryCoordinates_(c,s);var R=[];if(void 0!==m&&(this.rBush_.remove(m),R.push(m.segment[0])),void 0!==S&&(this.rBush_.remove(S),R.push(S.segment[1])),void 0!==m&&void 0!==S){var F={depth:x.depth,feature:x.feature,geometry:x.geometry,index:E,segment:R};this.rBush_.insert(Od(F.segment),F)}this.updateSegmentIndices_(c,p,x.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return i},t.prototype.setGeometryCoordinates_=function(e,r){this.changingFeature_=!0,e.setCoordinates(r),this.changingFeature_=!1},t.prototype.updateSegmentIndices_=function(e,r,i,o){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(void 0===i||void 0===s.depth||af(s.depth,i))&&s.index>r&&(s.index+=o)})},t}(DB);var e9=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const n9=function(n){function t(e,r,i){var o=n.call(this,e)||this;return o.map=r,o.frameState=void 0!==i?i:null,o}return e9(t,n),t}(Rd);var r9=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const o9=function(n){function t(e,r,i,o,s){var a=n.call(this,e,r,s)||this;return a.originalEvent=i,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==o&&o,a}return r9(t,n),Object.defineProperty(t.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(e){this.pixel_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(e){this.coordinate_=e},enumerable:!0,configurable:!0}),t.prototype.preventDefault=function(){n.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){n.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},t}(n9);var s9=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const l9=function(n){function t(e,r,i,o,s){var a=n.call(this,e,r,i,o,s)||this;return a.pointerEvent=i,a}return s9(t,n),t}(o9);var u9=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const c9=function(n){function t(e,r,i){var o=n.call(this)||this;return void 0!==i&&void 0===r?o.setFlatCoordinates(i,e):o.setCenterAndRadius(e,r||0,i),o}return u9(t,n),t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),void 0,this.layout)},t.prototype.closestPointXY=function(e,r,i,o){var s=this.flatCoordinates,a=e-s[0],c=r-s[1],h=a*a+c*c;if(h<o){if(0===h)for(var p=0;p<this.stride;++p)i[p]=s[p];else{var m=this.getRadius()/Math.sqrt(h);for(i[0]=s[0]+m*a,i[1]=s[1]+m*c,p=2;p<this.stride;++p)i[p]=s[p]}return i.length=this.stride,h}return o},t.prototype.containsXY=function(e,r){var i=this.flatCoordinates,o=e-i[0],s=r-i[1];return o*o+s*s<=this.getRadiusSquared_()},t.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.computeExtent=function(e){var r=this.flatCoordinates,i=r[this.stride]-r[0];return Qu(r[0]-i,r[1]-i,r[0]+i,r[1]+i,e)},t.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},t.prototype.getRadiusSquared_=function(){var e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],r=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+r*r},t.prototype.getType=function(){return"Circle"},t.prototype.intersectsExtent=function(e){if(oa(e,this.getExtent())){var i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]||rO(e,this.intersectsCoordinate.bind(this))}return!1},t.prototype.setCenter=function(e){var r=this.stride,i=this.flatCoordinates[r]-this.flatCoordinates[0],o=e.slice();o[r]=o[0]+i;for(var s=1;s<r;++s)o[r+s]=e[s];this.setFlatCoordinates(this.layout,o),this.changed()},t.prototype.setCenterAndRadius=function(e,r,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,s=EB(o,0,e);o[s++]=o[0]+r;for(var a=1,c=this.stride;a<c;++a)o[s++]=o[a];o.length=s,this.changed()},t.prototype.getCoordinates=function(){return null},t.prototype.setCoordinates=function(e,r){},t.prototype.setRadius=function(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()},t.prototype.rotate=function(e,r){var i=this.getCenter(),o=this.getStride();this.setCenter(gB(i,0,i.length,o,e,r,i)),this.changed()},t.prototype.translate=function(e,r){var i=this.getCenter(),o=this.getStride();this.setCenter(mB(i,0,i.length,o,e,r,i)),this.changed()},t}(xv);function cD(n,t,e,r,i,o){var s=NaN,a=NaN,c=(e-t)/r;if(1===c)s=n[t],a=n[t+1];else if(2==c)s=(1-i)*n[t]+i*n[t+r],a=(1-i)*n[t+1]+i*n[t+r+1];else if(0!==c){for(var h=n[t],p=n[t+1],m=0,E=[0],S=t+r;S<e;S+=r){var x=n[S],P=n[S+1];m+=Math.sqrt((x-h)*(x-h)+(P-p)*(P-p)),E.push(m),h=x,p=P}var R=i*m,F=function(n,t,e){for(var r,i,o=sf,s=0,a=n.length,c=!1;s<a;)(i=+o(n[r=s+(a-s>>1)],t))<0?s=r+1:(a=r,c=!i);return c?s:~s}(E,R);if(F<0){var D=(R-E[-F-2])/(E[-F-1]-E[-F-2]),j=t+(-F-2)*r;s=um(n[j],n[j+r],D),a=um(n[j+1],n[j+r+1],D)}else s=n[t+F*r],a=n[t+F*r+1]}return o?(o[0]=s,o[1]=a,o):[s,a]}function OG(n,t,e,r,i,o){if(e==t)return null;var s;if(i<n[t+r-1])return o?((s=n.slice(t,t+r))[r-1]=i,s):null;if(n[e-1]<i)return o?((s=n.slice(e-r,e))[r-1]=i,s):null;if(i==n[t+r-1])return n.slice(t,t+r);for(var a=t/r,c=e/r;a<c;){var h=a+c>>1;i<n[(h+1)*r-1]?c=h:a=h+1}var p=n[a*r-1];if(i==p)return n.slice((a-1)*r,(a-1)*r+r);var E=(i-p)/(n[(a+1)*r-1]-p);s=[];for(var S=0;S<r-1;++S)s.push(um(n[(a-1)*r+S],n[a*r+S],E));return s.push(i),s}var h9=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const bh=function(n){function t(e,r){var i=n.call(this)||this;return i.flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?i.setCoordinates(e,r):i.setFlatCoordinates(r,e),i}return h9(t,n),t.prototype.appendCoordinate=function(e){this.flatCoordinates?Qo(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()},t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(e,r,i,o){return o<im(this.getExtent(),e,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,r,i,o))},t.prototype.forEachSegment=function(e){return IB(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},t.prototype.getCoordinateAtM=function(e,r){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:OG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,void 0!==r&&r)},t.prototype.getCoordinates=function(){return CP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinateAt=function(e,r){return cD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r)},t.prototype.getLength=function(){return TG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},t.prototype.getSimplifiedGeometryInternal=function(e){var r=[];return r.length=oD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,r,0),new t(r,"XY")},t.prototype.getType=function(){return"LineString"},t.prototype.intersectsExtent=function(e){return sD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},t.prototype.setCoordinates=function(e,r){this.setLayout(r,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=rD(this.flatCoordinates,0,e,this.stride),this.changed()},t}(xv);var p9=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const JC=function(n){function t(e,r,i){var o=n.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(e[0]))o.setCoordinates(e,r);else if(void 0!==r&&i)o.setFlatCoordinates(r,e),o.ends_=i;else{for(var s=o.getLayout(),a=e,c=[],h=[],p=0,m=a.length;p<m;++p){var E=a[p];0===p&&(s=E.getLayout()),Qo(c,E.getFlatCoordinates()),h.push(c.length)}o.setFlatCoordinates(s,c),o.ends_=h}return o}return p9(t,n),t.prototype.appendLineString=function(e){this.flatCoordinates?Qo(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},t.prototype.closestPointXY=function(e,r,i,o){return o<im(this.getExtent(),e,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vG(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_G(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,r,i,o))},t.prototype.getCoordinateAtM=function(e,r,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:function(n,t,e,r,i,o,s){if(s)return OG(n,t,e[e.length-1],r,i,o);var a;if(i<n[r-1])return o?((a=n.slice(0,r))[r-1]=i,a):null;if(n[n.length-1]<i)return o?((a=n.slice(n.length-r))[r-1]=i,a):null;for(var c=0,h=e.length;c<h;++c){var p=e[c];if(t!=p){if(i<n[t+r-1])return null;if(i<=n[p-1])return OG(n,t,p,r,i,!1);t=p}}return null}(this.flatCoordinates,0,this.ends_,this.stride,e,void 0!==r&&r,void 0!==i&&i)},t.prototype.getCoordinates=function(){return iD(this.flatCoordinates,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getLineString=function(e){return e<0||this.ends_.length<=e?null:new bh(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)},t.prototype.getLineStrings=function(){for(var e=this.flatCoordinates,r=this.ends_,i=this.layout,o=[],s=0,a=0,c=r.length;a<c;++a){var h=r[a],p=new bh(e.slice(s,h),i);o.push(p),s=h}return o},t.prototype.getFlatMidpoints=function(){for(var e=[],r=this.flatCoordinates,i=0,o=this.ends_,s=this.stride,a=0,c=o.length;a<c;++a){var h=o[a];Qo(e,cD(r,i,h,s,.5)),i=h}return e},t.prototype.getSimplifiedGeometryInternal=function(e){var r=[],i=[];return r.length=function(n,t,e,r,i,o,s,a){for(var c=0,h=e.length;c<h;++c){var p=e[c];s=oD(n,t,p,r,i,o,s),a.push(s),t=p}return s}(this.flatCoordinates,0,this.ends_,this.stride,e,r,0,i),new t(r,"XY",i)},t.prototype.getType=function(){return"MultiLineString"},t.prototype.intersectsExtent=function(e){return function(n,t,e,r,i){for(var o=0,s=e.length;o<s;++o){if(sD(n,t,e[o],r,i))return!0;t=e[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,e)},t.prototype.setCoordinates=function(e,r){this.setLayout(r,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=gG(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},t}(xv);var m9=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const AP=function(n){function t(e,r){var i=n.call(this)||this;return r&&!Array.isArray(e[0])?i.setFlatCoordinates(r,e):i.setCoordinates(e,r),i}return m9(t,n),t.prototype.appendPoint=function(e){this.flatCoordinates?Qo(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()},t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(e,r,i,o){if(o<im(this.getExtent(),e,r))return o;for(var s=this.flatCoordinates,a=this.stride,c=0,h=s.length;c<h;c+=a){var p=am(e,r,s[c],s[c+1]);if(p<o){o=p;for(var m=0;m<a;++m)i[m]=s[c+m];i.length=a}}return o},t.prototype.getCoordinates=function(){return CP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getPoint=function(e){return e<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=e?null:new nc(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)},t.prototype.getPoints=function(){for(var e=this.flatCoordinates,r=this.layout,i=this.stride,o=[],s=0,a=e.length;s<a;s+=i){var c=new nc(e.slice(s,s+i),r);o.push(c)}return o},t.prototype.getType=function(){return"MultiPoint"},t.prototype.intersectsExtent=function(e){for(var r=this.flatCoordinates,i=this.stride,o=0,s=r.length;o<s;o+=i)if(SC(e,r[o],r[o+1]))return!0;return!1},t.prototype.setCoordinates=function(e,r){this.setLayout(r,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=rD(this.flatCoordinates,0,e,this.stride),this.changed()},t}(xv);function oj(n,t,e,r){for(var i=[],o=[1/0,1/0,-1/0,-1/0],s=0,a=e.length;s<a;++s){var c=e[s];o=eO(n,t,c[0],r),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=c[c.length-1]}return i}var y9=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const dD=function(n){function t(e,r,i){var o=n.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){for(var s=o.getLayout(),a=e,c=[],h=[],p=0,m=a.length;p<m;++p){var E=a[p];0===p&&(s=E.getLayout());for(var S=c.length,x=E.getEnds(),P=0,R=x.length;P<R;++P)x[P]+=S;Qo(c,E.getFlatCoordinates()),h.push(x)}r=s,e=c,i=h}return void 0!==r&&i?(o.setFlatCoordinates(r,e),o.endss_=i):o.setCoordinates(e,r),o}return y9(t,n),t.prototype.appendPolygon=function(e){var r;if(this.flatCoordinates){var i=this.flatCoordinates.length;Qo(this.flatCoordinates,e.getFlatCoordinates());for(var o=0,s=(r=e.getEnds().slice()).length;o<s;++o)r[o]+=i}else this.flatCoordinates=e.getFlatCoordinates().slice(),r=e.getEnds().slice(),this.endss_.push();this.endss_.push(r),this.changed()},t.prototype.clone=function(){for(var e=this.endss_.length,r=new Array(e),i=0;i<e;++i)r[i]=this.endss_[i].slice();return new t(this.flatCoordinates.slice(),this.layout,r)},t.prototype.closestPointXY=function(e,r,i,o){return o<im(this.getExtent(),e,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(n,t,e,r,i){for(var o=0,s=e.length;o<s;++o){var a=e[o];i=vG(n,t,a,r,i),t=a[a.length-1]}return i}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(n,t,e,r,i,o,s,a,c,h,p){for(var m=[NaN,NaN],E=0,S=e.length;E<S;++E){var x=e[E];h=_G(n,t,x,r,i,true,s,a,c,h,m),t=x[x.length-1]}return h}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,e,r,i,o))},t.prototype.containsXY=function(e,r){return function(n,t,e,r,i,o){if(0===e.length)return!1;for(var s=0,a=e.length;s<a;++s){var c=e[s];if(bG(n,t,c,r,i,o))return!0;t=c[c.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,r)},t.prototype.getArea=function(){return function(n,t,e,r){for(var i=0,o=0,s=e.length;o<s;++o){var a=e[o];i+=wB(n,t,a,r),t=a[a.length-1]}return i}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},t.prototype.getCoordinates=function(e){var r;return void 0!==e?RB(r=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,e):r=this.flatCoordinates,SB(r,0,this.endss_,this.stride)},t.prototype.getEndss=function(){return this.endss_},t.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var e=oj(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=PB(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},t.prototype.getInteriorPoints=function(){return new AP(this.getFlatInteriorPoints().slice(),"XYM")},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;!function(n,t,e,r,i){for(var o=0,s=e.length;o<s;++o){var a=e[o];if(!MB(n,t,a,r,undefined))return!1;a.length&&(t=a[a.length-1])}return!0}(e,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=RB(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=e,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(e){var r=[],i=[];return r.length=function(n,t,e,r,i,o,s,a){for(var c=0,h=e.length;c<h;++c){var p=e[c],m=[];s=TB(n,t,p,r,i,o,s,m),a.push(m),t=p[p.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),r,0,i),new t(r,"XY",i)},t.prototype.getPolygon=function(e){if(e<0||this.endss_.length<=e)return null;var r;if(0===e)r=0;else{var i=this.endss_[e-1];r=i[i.length-1]}var o=this.endss_[e].slice(),s=o[o.length-1];if(0!==r)for(var a=0,c=o.length;a<c;++a)o[a]-=r;return new Yc(this.flatCoordinates.slice(r,s),this.layout,o)},t.prototype.getPolygons=function(){for(var e=this.layout,r=this.flatCoordinates,i=this.endss_,o=[],s=0,a=0,c=i.length;a<c;++a){var h=i[a].slice(),p=h[h.length-1];if(0!==s)for(var m=0,E=h.length;m<E;++m)h[m]-=s;var S=new Yc(r.slice(s,p),e,h);o.push(S),s=p}return o},t.prototype.getType=function(){return"MultiPolygon"},t.prototype.intersectsExtent=function(e){return function(n,t,e,r,i){for(var o=0,s=e.length;o<s;++o){var a=e[o];if(AB(n,t,a,r,i))return!0;t=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)},t.prototype.setCoordinates=function(e,r){this.setLayout(r,e,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=function(n,t,e,r,i){for(var o=i||[],s=0,a=0,c=e.length;a<c;++a){var h=gG(n,t,e[a],r,o[s]);o[s++]=h,t=h[h.length-1]}return o.length=s,o}(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var o=i[i.length-1];this.flatCoordinates.length=0===o.length?0:o[o.length-1]}this.changed()},t}(xv);var sj=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fD=function(n){function t(e,r){var i=n.call(this,e)||this;return i.feature=r,i}return sj(t,n),t}(Rd);function b9(){var n=pG();return function(t,e){return n[t.getGeometry().getType()]}}const wh=function(n){function t(e){var r=this,i=e;i.stopDown||(i.stopDown=cE),(r=n.call(this,i)||this).shouldHandle_=!1,r.downPx_=null,r.freehand_=!1,r.source_=e.source?e.source:null,r.features_=e.features?e.features:null,r.snapTolerance_=e.snapTolerance?e.snapTolerance:12,r.type_=e.type,r.mode_=function(n){var t;return"Point"===n||"MultiPoint"===n?t="Point":"LineString"===n||"MultiLineString"===n?t="LineString":"Polygon"===n||"MultiPolygon"===n?t="Polygon":"Circle"===n&&(t="Circle"),t}(r.type_),r.stopClick_=!!e.stopClick,r.minPoints_=e.minPoints?e.minPoints:"Polygon"===r.mode_?3:2,r.maxPoints_=e.maxPoints?e.maxPoints:1/0,r.finishCondition_=e.finishCondition?e.finishCondition:uv;var o=e.geometryFunction;if(!o)if("Circle"===r.type_)o=function(c,h,p){var m=h||new c9([NaN,NaN]),E=Fd(c[0]),S=KC(E,Fd(c[1]));m.setCenterAndRadius(E,Math.sqrt(S));var x=Mp();return x&&m.transform(p,x),m};else{var s,a=r.mode_;"Point"===a?s=nc:"LineString"===a?s=bh:"Polygon"===a&&(s=Yc),o=function(c,h,p){var m=h;return m?m.setCoordinates("Polygon"===a?c[0].length?[c[0].concat([c[0][0]])]:[]:c):m=new s(c),m}}return r.geometryFunction_=o,r.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,r.finishCoordinate_=null,r.sketchFeature_=null,r.sketchPoint_=null,r.sketchCoords_=null,r.sketchLine_=null,r.sketchLineCoords_=null,r.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,r.overlay_=new rc({source:new bu({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:b9(),updateWhileInteracting:!0}),r.geometryName_=e.geometryName,r.condition_=e.condition?e.condition:vP,r.freehandCondition_=e.freehand?_a:e.freehandCondition?e.freehandCondition:zC,r.addEventListener(Vc("active"),r.updateState_),r}return sj(t,n),t.prototype.setMap=function(e){n.prototype.setMap.call(this,e),this.updateState_()},t.prototype.getOverlay=function(){return this.overlay_},t.prototype.handleEvent=function(e){"contextmenu"===e.originalEvent.type&&e.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(e);var r="pointermove"===e.type,i=!0;return!this.freehand_&&this.lastDragTime_&&"pointerdrag"===e.type&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,r=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&"pointerdrag"===e.type&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&"pointerdown"===e.type?i=!1:r?(i="pointermove"===e.type)&&this.freehand_?i=this.handlePointerMove_(e):("mouse"==e.pointerEvent.pointerType||"pointerdrag"===e.type&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):"dblclick"===e.type&&(i=!1),n.prototype.handleEvent.call(this,e)&&i},t.prototype.handleDownEvent=function(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new l9("pointermove",e.map,e.pointerEvent,!1,e.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)},t.prototype.handleUpEvent=function(e){var r=!0;return this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e),this.shouldHandle_?(this.finishCoordinate_?this.freehand_||"Circle"===this.mode_?this.finishDrawing():this.atFinish_(e)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate):(this.startDrawing_(e),"Point"===this.mode_&&this.finishDrawing()),r=!1):this.freehand_&&this.abortDrawing(),!r&&this.stopClick_&&e.stopPropagation(),r},t.prototype.handlePointerMove_=function(e){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var r=this.downPx_,i=e.pixel,o=r[0]-i[0],s=r[1]-i[1],a=o*o+s*s;if(this.shouldHandle_=this.freehand_?a>this.squaredClickTolerance_:a<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(e):this.createOrUpdateSketchPoint_(e),!0},t.prototype.atFinish_=function(e){var r=!1;if(this.sketchFeature_){var i=!1,o=[this.finishCoordinate_];if("LineString"===this.mode_)i=this.sketchCoords_.length>this.minPoints_;else if("Polygon"===this.mode_){var s=this.sketchCoords_;i=s[0].length>this.minPoints_,o=[s[0][0],s[0][s[0].length-2]]}if(i)for(var a=e.map,c=0,h=o.length;c<h;c++){var p=o[c],m=a.getPixelFromCoordinate(p),E=e.pixel,S=E[0]-m[0],x=E[1]-m[1],P=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(S*S+x*x)<=P){this.finishCoordinate_=p;break}}}return r},t.prototype.createOrUpdateSketchPoint_=function(e){var r=e.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(r):(this.sketchPoint_=new jd(new nc(r)),this.updateSketchFeatures_())},t.prototype.startDrawing_=function(e){var r=e.coordinate,i=e.map.getView().getProjection();this.finishCoordinate_=r,"Point"===this.mode_?this.sketchCoords_=r.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[r.slice(),r.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[r.slice(),r.slice()],this.sketchLineCoords_&&(this.sketchLine_=new jd(new bh(this.sketchLineCoords_)));var o=this.geometryFunction_(this.sketchCoords_,void 0,i);this.sketchFeature_=new jd,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new fD("drawstart",this.sketchFeature_))},t.prototype.modifyDrawing_=function(e){var s,a,h,r=e.coordinate,i=this.sketchFeature_.getGeometry(),o=e.map.getView().getProjection();if("Point"===this.mode_?a=this.sketchCoords_:"Polygon"===this.mode_?(a=(s=this.sketchCoords_[0])[s.length-1],this.atFinish_(e)&&(r=this.finishCoordinate_.slice())):a=(s=this.sketchCoords_)[s.length-1],a[0]=r[0],a[1]=r[1],this.geometryFunction_(this.sketchCoords_,i,o),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(r),"Polygon"==i.getType()&&"Polygon"!==this.mode_){this.sketchLine_||(this.sketchLine_=new jd);var p=i.getLinearRing(0);(h=this.sketchLine_.getGeometry())?(h.setFlatCoordinates(p.getLayout(),p.getFlatCoordinates()),h.changed()):(h=new bh(p.getFlatCoordinates(),p.getLayout()),this.sketchLine_.setGeometry(h))}else this.sketchLineCoords_&&(h=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},t.prototype.addToDrawing_=function(e){var o,s,r=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();"LineString"===this.mode_?(this.finishCoordinate_=e.slice(),(s=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?s.pop():o=!0),s.push(e.slice()),this.geometryFunction_(s,r,i)):"Polygon"===this.mode_&&((s=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?s.pop():o=!0),s.push(e.slice()),o&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,r,i)),this.updateSketchFeatures_(),o&&this.finishDrawing()},t.prototype.removeLastPoint=function(){if(this.sketchFeature_){var i,e=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();"LineString"===this.mode_?((i=this.sketchCoords_).splice(-2,1),this.geometryFunction_(i,e,r),i.length>=2&&(this.finishCoordinate_=i[i.length-2].slice())):"Polygon"===this.mode_&&((i=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(i),this.geometryFunction_(this.sketchCoords_,e,r)),0===i.length&&this.abortDrawing(),this.updateSketchFeatures_()}},t.prototype.finishDrawing=function(){var e=this.abortDrawing_();if(e){var r=this.sketchCoords_,i=e.getGeometry(),o=this.getMap().getView().getProjection();"LineString"===this.mode_?(r.pop(),this.geometryFunction_(r,i,o)):"Polygon"===this.mode_&&(r[0].pop(),this.geometryFunction_(r,i,o),r=i.getCoordinates()),"MultiPoint"===this.type_?e.setGeometry(new AP([r])):"MultiLineString"===this.type_?e.setGeometry(new JC([r])):"MultiPolygon"===this.type_&&e.setGeometry(new dD([r])),this.dispatchEvent(new fD("drawend",e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}},t.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),e},t.prototype.abortDrawing=function(){var e=this.abortDrawing_();e&&this.dispatchEvent(new fD("drawabort",e))},t.prototype.appendCoordinates=function(e){var r=this.mode_,i=[];"LineString"===r?i=this.sketchCoords_:"Polygon"===r&&(i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);for(var o=i.pop(),s=0;s<e.length;s++)this.addToDrawing_(e[s]);this.addToDrawing_(o)},t.prototype.extend=function(e){var i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();var o=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=o.slice(),this.sketchCoords_.push(o.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new fD("drawstart",this.sketchFeature_))},t.prototype.updateSketchFeatures_=function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var r=this.overlay_.getSource();r.clear(!0),r.addFeatures(e)},t.prototype.updateState_=function(){var e=this.getMap(),r=this.getActive();(!e||!r)&&this.abortDrawing(),this.overlay_.setMap(r?e:null)},t}(DB);var Iv=ee(8330);const Xr_getLogger=function(n){return"__PRODUCTION__".match(/true/)?Iv.disableAll():Iv.enableAll(),Iv.getLogger(n||"default")},ln={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(n,t){if(0===Object.keys(arguments).length)return"Message indefined !";var e=Array.prototype.slice.call(arguments),r=e.shift(),i=e,o=this[r];try{o=Array.isArray(i)&&i.length>0?o.replace("%var%",i.join(" - ")):o.replace("%var%","%var% (not specified)")}catch(s){}return o}};function Av(n){if(!(this instanceof Av))throw new TypeError("ErrorService constructor cannot be called as a function.");var t=n;"string"==typeof n||n instanceof String?(this.message=n,this.status=-1,this.type=Av.TYPE_UNKERR):(this.message=t.message||"undefined!?",this.type=t.type,this.status=t.status||-1),this.name="ErrorService",this.stack=(new Error).stack}Av.TYPE_SRVERR="SERVICE_ERROR",Av.TYPE_USEERR="USAGE_ERROR",Av.TYPE_UNKERR="UNKNOWN_ERROR",Av.prototype=Object.create(Error.prototype,{constructor:{value:Av,writable:!0,configurable:!0}});const pn=Av,Up={normalyzeParameters:function(n){var t=null;if(n){var e=[];for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];i||(i=""),e.push(r+"="+i)}t=e.join("&")}return t},normalyzeUrl:function(n,t,e){var r=n;if(n){var i=n.indexOf("?");-1===i&&(r+="?"),-1!==i&&i!==n.length-1&&(r+="&")}return t&&(r+="string"==typeof t?t:this.normalyzeParameters(t)),e&&(r=encodeURIComponent(r)),r},indent:function(n,t){return new Array((n||0)+1).join("\t")+t}};var T9=ee(3021),P9=ee.n(T9);const aj={call:function(n){var t=Xr_getLogger("XHR");if(t.trace("[XHR::call()]"),P9().polyfill(),!n.url)throw new Error("missing parameter : url is not defined !");if(!n.method)throw new Error("missing parameter : method is not defined !");n.format||(n.format="text");var e={};switch(e.url=n.url,e.data=n.data?n.data:null,e.method=n.method,e.timeOut=n.timeOut||0,e.scope=n.scope||this,e.proxy=n.proxy||null,e.content=n.content||null,e.headers=n.headers||{referer:"http://localhost"},n.method){case"DELETE":case"GET":break;case"PUT":case"POST":e.content=n.content?n.content:"application/x-www-form-urlencoded",e.headers=n.headers?n.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(n.format){case"text":this.__call(e).then(function(r){t.trace(r),n.onResponse.call(this,r)}).catch(function(r){n.onFailure.call(this,r)});break;case"json":this.__callJSON(e).then(function(r){t.trace(r),n.onResponse.call(this,r)}).catch(function(r){n.onFailure.call(this,r)});break;case"xml":this.__callXML(e).then(function(r){t.trace(r),n.onResponse.call(this,r)}).catch(function(r){n.onFailure.call(this,r)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(n){var t=Xr_getLogger("XHR");return t.trace("[XHR::__call()]"),new Promise(function(r,i){var o="POST"===n.method||"PUT"===n.method?1:0;n.data&&("object"==typeof n.data&&Object.keys(n.data).length||"string"==typeof n.data&&n.data.length)&&!o&&(n.url=Up.normalyzeUrl(n.url,n.data)),t.trace("URL = ",n.url);var s=null;if("undefined"==typeof window){var a=ee(640),c={headers:{Referer:"https://localhost"}};return n.data&&"string"==typeof n.data&&o&&(c={method:n.method,body:n.data,headers:{"Content-Type":n.content,Referer:"https://localhost"}}),a(n.url,c).then(function(E){E.ok?r(E.text()):i({message:"Errors Occured on Http Request (status : '"+E.statusText+"' | url : '"+E.url+"')",status:E.status})}).catch(function(E){i({message:E,status:-1})})}if(window.XMLHttpRequest){t.trace("XMLHttpRequest"),(s=new XMLHttpRequest).open(n.method,n.url,!0),s.overrideMimeType=n.content;var h=null;n.timeOut>0&&(t.trace("XHR - TimeOut actif !"),h=window.setTimeout(function(){i({message:"TimeOut Occured on Http Request with XMLHttpRequest !",status:-1})},n.timeOut)),o&&(t.trace("data = ",n.data),s.setRequestHeader("Content-type",n.content)),s.onerror=function(E){console.log(E),i(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},s.ontimeout=function(E){console.log(E),i(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},s.onreadystatechange=function(E){4===s.readyState&&(200===s.status?(window.clearTimeout(h),r(s.response)):i({message:"Errors Occured on Http Request (status : '"+E.target.statusText+"' | url : '"+E.target.responseURL+"')",status:E.target.status}))},s.send(n.data&&o?n.data:null)}else{if(!window.XDomainRequest)throw new Error("CORS not supported");t.trace("XDomainRequest"),(s=new XDomainRequest).open(n.method,n.url),s.overrideMimeType=n.content,n.timeOut>0&&(s.timeout=n.timeout,t.trace("XHR - TimeOut actif !")),o&&s.setRequestHeader("Content-type",n.content),s.onerror=function(){i(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},s.ontimeout=function(){i(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},s.onload=function(E){200===s.status?r(s.responseText):i({message:"Errors Occured on Http Request (status : '"+E.target.statusText+"' | url : '"+E.target.responseURL+"')",status:E.target.status})},s.send(n.data&&o?n.data:null)}})},__callJSON:function(n){return this.__call(n).then(JSON.parse).catch(function(t){console.log("_callJSON failed on : ",n.url,t)})},__callXML:function(n){return this.__call(n).then(function(t){var e;return"undefined"==typeof window?e=(new(0,ee(284).a)).parseFromString(t,"text/xml"):window.DOMParser?e=(new window.DOMParser).parseFromString(t,"text/xml"):((e=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)),e}).catch(function(t){console.log("__callXML failed on : ",n.url,t)})}},M9={uuid:function(){var n=Math.floor(Date.now());return function(){return n++}}(),call:function(n){var t=Xr_getLogger("JSONP");if(t.trace("[JSONP::call ()]"),!n)throw t.error("missing parameter : options !"),new Error("missing parameter : options !");if(!n.url)throw t.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(n.timeOut||(t.info("setting 'options.timeOut' default value"),n.timeOut=0),!n.onResponse)throw t.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var e="string"==typeof n.callbackSuffix?n.callbackSuffix:this.uuid(),r=!1,i=!1,o=n.url.indexOf("callback=");if(-1!==o){r=!0;var s=n.url.indexOf("&",o);-1===s&&(s=n.url.length);var a=n.url.substring(o+9,s);a&&(i=!0,n.callbackName=a,t.info("setting 'options.callbackName' value ("+n.callbackName+") from 'options.url' parameter"))}if(!r){var c=n.url.indexOf("?");n.url=-1===c?n.url+"?callback=":c===n.url.length?n.url+"callback=":n.url+"&callback=",t.info("setting callback default key in 'options.url' : "+n.url)}var h=!!n.callbackName||i;if(i||(n.callbackName||(t.info("setting 'options.callbackName' default value"),n.callbackName="callback",(e||""===e)&&(n.callbackName+=e)),n.url=n.url.replace("callback=","callback="+n.callbackName),t.info("setting callback function name in 'options.url' : "+n.url)),n.onTimeOut||(t.info("setting 'options.onTimeOut' default value"),n.onTimeOut=function(){console.log("TimeOut while invoking url : "+n.url)}),!h){var p=this,m=null;n.timeOut>0&&(m=window.setTimeout(function(){window[n.callbackName]=function(){},n.onTimeOut(),p._deleteScript(e)},n.timeOut)),window[n.callbackName]=function(E){window.clearTimeout(m),n.onResponse(E),p._deleteScript(e)}}this._createScript(e,n.url)},_createScript:function(n,t){var e,r=document.getElementById("results"+n);(e=document.createElement("script")).setAttribute("type","text/javascript"),e.setAttribute("src",t),e.setAttribute("charset","UTF-8"),e.setAttribute("id","results"+n),e.setAttribute("async","true");var i=document.documentElement||document.getElementsByTagName("head")[0];null===r?i.appendChild(e):i.replaceChild(e,r)},_deleteScript:function(n){var t=document.getElementById("results"+n);if(t){var e=t.parentNode||document.documentElement;if(!e)return;e.removeChild(t)}}},O9_send=function(n){var t=n||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if("undefined"!=typeof window||"JSONP"!==n.protocol){if("XHR"===n.protocol||"json"===n.format?t.wrap=!1:"JSONP"===n.protocol&&"xml"===n.format&&(t.wrap=!0),t.callback=null,t.output=t.wrap?"json":null,t.wrap){var e={};e.output=t.output,e.callback=t.callback,delete e.callback,t.url=Up.normalyzeUrl(n.url,e)}switch(t.protocol){case"XHR":"GET"===n.method&&n.nocache&&(t.url=Up.normalyzeUrl(t.url,{t:(new Date).getTime()})),aj.call(t);break;case"JSONP":t.data&&(t.url=Up.normalyzeUrl(t.url,t.data)),M9.call(t);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}else console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS")};var jl={ssl:!0,url:function(n,t){return(!1===jl.ssl?"http://":"https://")+"wxs.ign.fr".concat("/",n,t)},Alti:{_key:{"elevation-json":"/alti/rest/elevation.json","elevation-xml":"/alti/rest/elevation.xml","profil-json":"/alti/rest/elevationLine.json","profil-xml":"/alti/rest/elevationLine.xml",wps:"/alti/wps"},url:function(n){return{"elevation-json":jl.url(n,this._key["elevation-json"]),"elevation-xml":jl.url(n,this._key["elevation-xml"]),"profil-json":jl.url(n,this._key["profil-json"]),"profil-xml":jl.url(n,this._key["profil-xml"]),wps:jl.url(n,this._key.wps)}}},ProcessIsoCurve:{_key:{"iso-json":"/isochrone/isochrone.json","iso-xml":"/isochrone/isochrone.xml"},url:function(n){return{"iso-json":jl.url(n,this._key["iso-json"]),"iso-xml":jl.url(n,this._key["iso-xml"])}}},AutoComplete:{_key:"/ols/apis/completion",url:function(n){return jl.url(n,this._key)}},ReverseGeocode:{_key:"/geoportail/ols",url:function(n){return jl.url(n,this._key)}},AutoConf:{_key:{apiKey:"/autoconf",apiKeys:"/autoconf?keys=%KEYS%",aggregate:"/autoconf/id/"},url:function(n){var t="";if(Array.isArray(n)&&n.length>0){t=n[0];for(var e=1;e<n.length;e++)t+=","+n[e]}return{apiKey:jl.url(n,this._key.apiKey),apiKeys:jl.url(n[0],this._key.apiKeys).replace("%KEYS%",t),aggregate:jl.url(n,this._key.aggregate)}}},Geocode:{_key:"/geoportail/ols",url:function(n){return jl.url(n,this._key)}},Route:{_key:{ols:"/itineraire/ols","route-json":"/itineraire/rest/route.json","route-xml":"/itineraire/rest/route.xml"},url:function(n){return{ols:jl.url(n,this._key.ols),"route-json":jl.url(n,this._key["route-json"]),"route-xml":jl.url(n,this._key["route-xml"])}}}};const ME=jl,DG=JSON.parse('{"i8":"2.1.8","hT":"14/04/2021"}');function pD(n){if(!(this instanceof pD))throw new TypeError(ln.getMessage("CLASS_CONSTRUCTOR"));for(var t in this.logger=Xr_getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(i){console.log("onSuccess - la reponse est la suivante : ",i)},onFailure:function(i){200!==i.status&&i.status?console.log("onFailure - Erreur (",i.status,") : ",i.message):console.log("onFailure : ",i.message)}},n)n.hasOwnProperty(t)&&(this.options[t]=n[t]);if(!this.options.apiKey&&!this.options.serverUrl)throw new Error(ln.getMessage("PARAM_MISSING","apiKey","serverUrl"));if(this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(i){console.log("onSuccess - la r\xe9ponse brute du service est la suivante : ",i)}),null===this.options.onSuccess||"function"!=typeof this.options.onSuccess)throw new Error(ln.getMessage("PARAM_MISSING","onSuccess()"));if(!this.options.serverUrl){ME.ssl=this.options.ssl;var r=ME[this.CLASSNAME].url(this.options.apiKey);"string"==typeof r?this.options.serverUrl=r:this.logger.trace("URL par defaut \xe0 determiner au niveau du composant...")}switch(this.options.httpMethod="string"==typeof n.httpMethod?n.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(ln.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(ln.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol="string"==typeof n.protocol?n.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(ln.getMessage("PARAM_UNKNOWN","protocol"))}if("undefined"==typeof window&&"JSONP"===this.options.protocol)throw new Error(ln.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));"JSONP"===this.options.protocol&&(this.options.httpMethod="GET"),this.options.nocache=n.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}pD.prototype={constructor:pD,call:function(){this.logger.trace("CommonService::call ()");var n=this;function e(s){this.logger.trace("CommonService::onBuildRequest : ",s),this.callService.call(n,o,r)}function r(s){this.logger.trace("CommonService::onCallService : ",s),this.analyzeResponse.call(n,o,i)}function i(s){if(this.logger.trace("CommonService::onAnalyzeResponse : ",s),!s)return o.call(this,new pn("Analyse de la reponse en \xe9chec !?"));this.options.onSuccess.call(this,s)}function o(s){this.logger.trace("CommonService::onError()");var a=s;a instanceof pn||(a=new pn(s.message)),this.options.onFailure.call(this,a)}(function(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(n,o,e)}).call(n)},buildRequest:function(n,t){this.logger.error("overwritten method !"),n&&n.call(this,"This method must be overwritten !"),t.call(this,"This method must be overwritten !")},callService:function(n,t){var e=null,r=this.request,i=!(!this.options.proxyURL||"XHR"!==this.options.protocol);this.options.serverUrl=Up.normalyzeUrl(this.options.serverUrl,{"gp-access-lib":DG.i8},!1),i&&("GET"===this.options.httpMethod&&(e=this.options.proxyURL+Up.normalyzeUrl(this.options.serverUrl,this.request,!0),r=null),"POST"===this.options.httpMethod&&(e=this.options.proxyURL+Up.normalyzeUrl(this.options.serverUrl,null,!0),r=this.request));var o=this;O9_send({url:e||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:"XHR"!==this.options.protocol,callbackSuffix:this.options.callbackSuffix,data:r,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(a){o.logger.trace("callService::onResponse()");var c=null;if("XHR"===o.options.protocol&&(o.logger.trace("Response XHR",a),c=a),"JSONP"===o.options.protocol){if(o.logger.trace("Response JSON",a),!a)return void n.call(o,new pn("Le contenu de la reponse est vide !?"));if(a.http){if(200!==a.http.status)return void n.call(o,new pn({status:a.http.status,message:a.http.error,type:pn.TYPE_SRVERR}));c=a.xml,o.options.rawResponse&&(c=a)}else c=a}if("function"==typeof o.options.onBeforeParse){var h=o.options.onBeforeParse(c);"string"==typeof h&&(c=h)}o.response=c,t.call(o,c)},onFailure:function(a){o.logger.trace("callService::onFailure()"),a.type=pn.TYPE_SRVERR,n.call(o,new pn(a))},onTimeOut:function(){o.logger.trace("callService::onTimeOut()"),n.call(o,new pn("TimeOut!"))}})},analyzeResponse:function(n,t){this.logger.error("overwritten method !"),n&&n.call(this,"This method must be overwritten !"),t.call(this,"This method must be overwritten !")}};const qc=pD;function QC(n){if(!(this instanceof QC))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=Xr_getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=n||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json"}QC.CLASSNAME="AltiRequest",(QC.prototype={constructor:QC,setPositions:function(n){for(var t=[],e=0;e<n.length;e++){var r=n[e];r.lon&&r.lat&&t.push(r)}this.positions=t},getPositions:function(n){if(!n)return this.positions;var t=this.positions.length-1;return n>t||n<t?(this.logger.warn("index out of range !"),this.positions):this.positions[n]},addPositions:function(n){for(var t=0;t<n.length;t++){var e=n[t];e.lon&&e.lat&&this.positions.push(n[t])}},getLon:function(){for(var n=[],t=0;t<this.positions.length;t++)n.push(this.positions[t].lon);return this.logger.trace(n),n.join(this.delimiter)},getLat:function(){for(var n=[],t=0;t<this.positions.length;t++)n.push(this.positions[t].lat);return this.logger.trace(n),n.join(this.delimiter)}}).getData=function(){var n=[];return n.push({k:"lon",v:this.getLon()}),n.push({k:"lat",v:this.getLat()}),n.push({k:"delimiter",v:this.delimiter}),n.push({k:"indent",v:this.indent}),n.push({k:"crs",v:this.crs}),n.push({k:"format",v:this.format}),n};const gD=QC;function $C(n){if(!(this instanceof $C))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",gD.apply(this,arguments),this.logger=Xr_getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}($C.prototype=Object.create(gD.prototype,{zonly:{get:function(){return this._zonly},set:function(n){this._zonly=n}}})).constructor=$C,$C.prototype.getData=function(){var n=[];return n.push({k:"lon",v:this.getLon()}),n.push({k:"lat",v:this.getLat()}),n.push({k:"indent",v:this.indent}),n.push({k:"crs",v:this.crs}),n.push({k:"zonly",v:this.zonly}),n.push({k:"format",v:this.format}),n};const lj=$C;function eS(n){if(!(this instanceof eS))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",gD.apply(this,arguments),this.logger=Xr_getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}(eS.prototype=Object.create(gD.prototype,{sampling:{get:function(){return this._sampling},set:function(n){this._sampling=n}}})).constructor=eS,eS.prototype.getData=function(){var n=[];return n.push({k:"lon",v:this.getLon()}),n.push({k:"lat",v:this.getLat()}),n.push({k:"indent",v:this.indent}),n.push({k:"crs",v:this.crs}),n.push({k:"sampling",v:this.sampling}),n.push({k:"format",v:this.format}),n};const uj=eS;function mD(n){if(this.logger=Xr_getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof mD))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=n||{},!this.options)throw new Error(ln.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(ln.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new lj(this.options.param);break;case"Profil":this.DataObject=new uj(this.options.param);break;default:throw new Error(ln.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}mD.prototype={requestString:null,constructor:mD,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:"lon=__LON__\nlat=__LAT__\nindent=__INDENT__\ncrs='__CRS__'\n",input:{point:"zonly=__ZONLY__",profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var n="";return"POST"===this.method?n=this.template.post.value:"GET"===this.method&&(n=this.template.get.value),n=(n=(n=(n=n.replace(/__LON__/g,this.DataObject.getLon())).replace(/__LAT__/g,this.DataObject.getLat())).replace(/__INDENT__/g,this.DataObject.indent)).replace(/__CRS__/g,this.DataObject.crs),n+=this.__addDataInputs(),this.logger.trace("traduction tmpl",n),this.requestString=n,this.requestString},__addDataInputs:function(){var n;if(this.logger.trace("AltiRequestREST::addDataInput ()"),"POST"===this.method)n=this.template.post;else{if("GET"!==this.method)throw new Error("No other HTTP method supported by the service !");n=this.template.get}if("AltiElevationRequest"===this.DataObject.CLASSNAME)return n.input.point.replace(/__ZONLY__/g,this.DataObject.zonly);if("AltiProfilRequest"===this.DataObject.CLASSNAME)return n.input.profil.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};const L9=mD;function vD(n){if(this.logger=Xr_getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof vD))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=n||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}vD.prototype={requestString:null,constructor:vD,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=\x3c!-- __DATAINPUTS__ --\x3e",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs>\x3c!-- __DATAINPUTS__ --\x3e</wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){return['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'].join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var n="";if("POST"===this.method)n=this.template.post.value;else{if("GET"!==this.method)return this.logger.error("No other method supported by the service !"),!1;n=this.template.get.value}return n=(n=(n=(n=(n=n.replace(/__SERVICE__/g,this.paramservice)).replace(/__VERSION__/g,this.paramversion)).replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput)).replace(/__IDENTIFIER__/g,this.paramidentifier)).replace(/__REQUEST__/g,this.paramrequest),"POST"===this.method&&(n=(n=n.replace(/__NAMESPACE__/g,this.namespaceByDefault)).replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),(n=n.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()))?(this.requestString=n,this.logger.trace("traduction tmpl",n),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var n="GET"===this.method?this.template.get.input:this.template.post.input,t="GET"===this.method?";":"",e="",i=this.DataObject.getData(),o=0;o<i.length;o++)s=o,t&&(t=s===i.length-1?"":";"),e=e.concat(this.__addDataInput(n,i[s].k,i[s].v),t);var s;return e},__addDataInput:function(n,t,e){var r=n;return(r=r.replace(/__KEY__/g,t)).replace(/__DATA__/g,e)},setMethod:function(n){"GET"===n||"POST"===n?this.method=n:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};const k9=vD,F9_build=function(n){if(Xr_getLogger("AltiRequestWPS").trace(["AltiRequestWPS::build()"]),!n)throw new Error(ln.getMessage("PARAM_EMPTY","options"));if(!n.type)throw new Error(ln.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var e=null;switch(n.type){case"Elevation":n.wps.identifier="gs:WPSElevation",e=new lj(n.param);break;case"Profil":n.wps.identifier="gs:WPSLineElevation",e=new uj(n.param);break;default:throw new Error(ln.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var i=new k9({data:e,method:n.method,param:n.wps});if(!i.processRequestString())throw new Error("Enable to process request !");return i.requestString},B9_build=function(n){Xr_getLogger("AltiRequestFactory").trace(["AltiRequestFactory::build()"]);var e=null,r={type:n.sampling?"Profil":"Elevation",method:n.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null}};r.param.positions=n.positions,r.param.format=n.outputFormat,r.param.sampling=n.sampling,r.param.zonly=n.zonly;var i=null!==n.onError&&"function"==typeof n.onError,o=null!==n.onSuccess&&"function"==typeof n.onSuccess,s=null;switch(n.api){case"REST":var a=new L9(r);if(!a.processRequestString()){if(s="Error in process request (rest) !",i)return void n.onError.call(n.scope,new pn(s));throw new Error(s)}e=a.requestString;break;case"WPS":if(r.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},!(e=F9_build(r))){if(s="Error in process request (wps) !",i)return void n.onError.call(n.scope,new pn(s));throw new Error(s)}break;default:if(s="Type of API is not supported by service (REST or WPS) !",i)return void n.onError.call(n.scope,new pn(s));throw new Error(s)}return o&&n.onSuccess.call(n.scope,e),e};function yD(n){if(!(this instanceof yD))throw new TypeError("XML constructor cannot be called as a function.");this.logger=Xr_getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,n&&(n.xmlString&&"string"==typeof n.xmlString&&(this.xmlString=n.xmlString,this.xmlDoc=LG(n.xmlString)),n.reader&&this.setReader(n.reader))}function LG(n){if("undefined"==typeof window)return(new(0,ee(284).a)).parseFromString(n,"text/xml");var e,r,i="Erreur lors du parsing de la r\xe9ponse du service : XML non conforme";if(window.ActiveXObject){(r=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,r.loadXML(n);var o=r.parseError;if(o.errorCode)throw o.line&&o.linepos&&(i+="( ligne "+o.line+", colonne "+o.linepos),o.reason&&(i+=":  "+o.reason+")"),new Error(i);return r}if(window.DOMParser){e=new window.DOMParser;try{r=e.parseFromString(n,"text/xml")}catch(h){throw"SyntaxError"===h.message?new Error(i):new Error("Erreur lors du parsing de la r\xe9ponse du service : "+h.message)}if(r.getElementsByTagName("parsererror").length>0)for(var s=r.getElementsByTagName("parsererror"),a=0;a<s.length;a++){var c=s[a].innerHTML;if(-1===c.indexOf("Huge input lookup"))throw i+="("+c+")",new Error(i)}else if(!r.documentElement)throw new Error(i);return r}throw new Error("Incompatible DOM Parser pour ce navigateur !")}function cj(n){var t={};if(n.attributes.length>0){var e=function(n){if(n.attributes.length>0){for(var t={},e=n.attributes,r=0;r<e.length;r++){var i=e[r];t[i.nodeName]=i.nodeValue}return t}}(n);t.attributes=e}if(n.hasChildNodes())for(var i,r={},o=n.childNodes,s=0;s<o.length;s++)if(3===(i=o[s]).nodeType)t.textContent=i.nodeValue;else if(1===i.nodeType)if(r=cj(i),t[i.nodeName]){if(!Array.isArray(t[i.nodeName])){var a=t[i.nodeName];t[i.nodeName]=[],t[i.nodeName].push(a)}t[i.nodeName].push(r)}else t[i.nodeName]=r;return t}yD.prototype={constructor:yD,getXMLString:function(){return this.xmlString},setXMLString:function(n){n&&"string"==typeof n&&(this.xmlString=n,this.xmlDoc=LG(n))},getReader:function(){return this.reader},setReader:function(n){n&&n.read&&"function"==typeof n.read&&(this.reader=n)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(n){this.xmlDoc=n},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=LG(this.xmlString)),this.xmlDoc){var t,n=function(n){var t;return 9===n.nodeType?t=n.documentElement:1===n.nodeType&&(t=n),t}(this.xmlDoc);return n?(this.reader&&this.reader.read?t=this.reader.read(n):(t={})[n.nodeName]=cj(n),t):{}}}};const tS=yD;function _D(){if(!(this instanceof _D))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}_D.prototype={constructor:_D};const kG=_D;function ED(){if(!(this instanceof ED))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}ED.prototype={constructor:ED};const bD=ED;var gf={};gf.READERS={elevations:function(n){var t=new kG;if(n.hasChildNodes())for(var r,i,e=n.childNodes,o=0;o<e.length;o++)gf.READERS[(r=e[o]).nodeName]&&(i=gf.READERS[r.nodeName](r),t.elevations.push(i));return t},elevation:function(n){var t=new bD;if(n.hasChildNodes())for(var r,e=n.childNodes,i=0;i<e.length;i++)gf.READERS[(r=e[i]).nodeName]&&gf.READERS[r.nodeName](r,t);return t},lat:function(n,t){var e=n.firstChild;if(!e||3!==e.nodeType)throw new Error("Erreur dans la lecture de la r\xe9ponse du service : latitude attendue mais absente");t.lat=parseFloat(e.nodeValue)},lon:function(n,t){var e=n.firstChild;if(!e||3!==e.nodeType)throw new Error("Erreur dans la lecture de la r\xe9ponse du service : longitude attendue mais absente");t.lon=parseFloat(e.nodeValue)},z:function(n,t){var e=n.firstChild;if(!e||3!==e.nodeType)throw new Error("Erreur dans la lecture de la r\xe9ponse du service : altitude attendue mais absente");if(!t)return(t=new bD).z=parseFloat(e.nodeValue),t;t.z=parseFloat(e.nodeValue)},acc:function(n,t){var e=n.firstChild;if(!e||3!==e.nodeType)throw new Error("Erreur dans la lecture de la r\xe9ponse du service : pr\xe9cision (acc) attendue mais absente");t.acc=parseFloat(e.nodeValue)},exceptionreport:function(n){var t={};if(n.hasChildNodes())for(var r,e=n.childNodes,i=0;i<e.length;i++)"Exception"===(r=e[i]).nodeName&&(t.exceptionReport=gf.READERS.exception(r));return t},exception:function(n){var t={},e=n.getAttribute("exceptionCode");e&&(t.exceptionCode=e);var r=n.firstChild;return r&&3===r.nodeType&&(t.exception=r.nodeValue),t},error:function(n){var t={error:{}};if(n.hasChildNodes())for(var r,e=n.childNodes,i=0;i<e.length;i++){var o;1===(r=e[i]).nodeType&&"code"===r.nodeName&&(o=r.firstChild)&&3===o.nodeType&&(t.error.code=o.nodeValue),1===r.nodeType&&"description"===r.nodeName&&(o=r.firstChild)&&3===o.nodeType&&(t.error.description=o.nodeValue)}return t}},gf.read=function(n){if("elevations"===n.nodeName)return gf.READERS.elevations(n);if("ExceptionReport"===n.nodeName)return gf.READERS.exceptionreport(n);if("error"===n.nodeName)return gf.READERS.error(n);throw new Error("Erreur lors de la lecture de la r\xe9ponse : elle n'est pas au format attendu.")};const V9=gf,H9_build=function(n){var t=Xr_getLogger("AltiResponseFactory");t.trace(["AltiResponseFactory::build()"]);var e=null;if(n.response){if(n.rawResponse)t.trace("analyze response : raw"),e=n.response;else{switch(n.outputFormat){case"xml":t.trace("analyze response : xml");try{var r=new tS({reader:V9});if("string"==typeof n.response?r.setXMLString(n.response):r.setXMLDoc(n.response),!(e=r.parse()))throw new Error(ln.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(m){return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_EXCEPTION",m.message),status:200,type:pn.TYPE_SRVERR}))}break;case"json":t.trace("analyze response : json"),t.trace("analyze response : ",typeof n.response);var o;if((o="string"==typeof n.response?JSON.parse(n.response):n.response)&&o.error)return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_EXCEPTION",o.error.description),status:200,type:pn.TYPE_SRVERR}));if(o){var c,s=o.elevations,a=new kG;if(Array.isArray(s)&&s.length)for(var h=0;h<s.length;h++)c=new bD,"object"==typeof s[h]?(s[h].lon&&(c.lon=s[h].lon),s[h].lat&&(c.lat=s[h].lat),s[h].z&&(c.z=s[h].z),s[h].acc&&(c.acc=s[h].acc)):"number"==typeof s[h]&&(c.z=s[h]),Array.isArray(a.elevations)&&a.elevations.push(c);e=a}if(!e)return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:pn.TYPE_UNKERR,status:-1}));break;default:return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:pn.TYPE_UNKERR,status:-1}))}if(e.exceptionReport)return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:pn.TYPE_SRVERR,status:200}));if(e.error)return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_EXCEPTION",e.error.description),type:pn.TYPE_SRVERR,status:200}))}n.onSuccess.call(n.scope,e)}else n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_EMPTY")))};function RE(n){if(!(this instanceof RE))throw new TypeError(ln.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",qc.apply(this,arguments),this.logger=Xr_getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!n.positions)throw new Error(ln.getMessage("PARAM_MISSING","positions"));if(0===n.positions.length)throw new Error(ln.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=n.positions,this.options.outputFormat="string"==typeof n.outputFormat?n.outputFormat.toLowerCase():"xml",this.options.sampling=n.sampling||null,this.options.api="string"==typeof n.api?n.api.toUpperCase():"REST","REST"===this.options.api&&(this.options.httpMethod="GET"),this.options.zonly=n.zonly||!1,!this.options.serverUrl){var t=ME.Alti.url(this.options.apiKey),e=null;switch(this.options.api){case"WPS":e=t.wps;break;case"REST":var r=(n.sampling?"profil":"elevation")+"-"+this.options.outputFormat;e=t[r];break;default:throw new Error(ln.getMessage("PARAM_UNKNOWN","api"))}if(!e)throw new Error("Url by default not found !");this.options.serverUrl=e,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var i=this.options.serverUrl.lastIndexOf(".");if(-1!==i){var o=this.options.serverUrl.substring(i+1);if(o&&o.length<5)switch(this.logger.trace("Server Extension URL : "+o),o.toLowerCase()){case"json":case"xml":this.options.outputFormat=o.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}(RE.prototype=Object.create(qc.prototype,{})).constructor=RE,RE.prototype.buildRequest=function(n,t){B9_build({httpMethod:this.options.httpMethod,onSuccess:function(r){this.request=r,t.call(this,this.request)},onError:n,scope:this,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly})},RE.prototype.analyzeResponse=function(n,t){this.response?H9_build({response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:n,onSuccess:t,scope:this}):n.call(this,new pn(ln.getMessage("SERVICE_RESPONSE_EMPTY")))};const W9=RE;function wD(){if(!(this instanceof wD))throw new TypeError("AutoConfResponse constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.territories={},this.tileMatrixSets={},this.services={}}wD.prototype={constructor:wD,isConfLoaded:function(n){if(n)return!!this.generalOptions.apiKeys[n]},getLayersId:function(n){return this.generalOptions.apiKeys[n]},getLayersConf:function(n){var t={},e=this.getLayersId(n);if(e)for(var r=0;r<e.length;r++){var i=e[r];t[i]=this.layers[i]}return t},getLayerConf:function(n){if(this.layers)return this.layers[n]},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(n){if(this.tileMatrixSets)return this.tileMatrixSets[n]},getTerritories:function(){return this.territories},getTerritoryConf:function(n){if(this.territories)return this.territories[n]},getServices:function(){return this.services},getServiceConf:function(n){if(this.services)return this.services[n]}};const dj=wD;function CD(){if(!(this instanceof CD))throw new TypeError("Constraint constructor cannot be called as a function.");this.crs=null,this.bbox={left:null,right:null,top:null,bottom:null},this.minScaleDenominator=null,this.maxScaleDenominator=null,this.temporalExtent=[null,null]}CD.prototype={constructor:CD};const Mv=CD;function SD(){if(!(this instanceof SD))throw new TypeError("Format constructor cannot be called as a function.");this.current=null,this.name=null}SD.prototype={constructor:SD};const hj=SD;function xD(){if(!(this instanceof xD))throw new TypeError("Layer constructor cannot be called as a function.")}xD.prototype={constructor:xD,getName:function(){return this.name},getTitle:function(){return this.title},getDescription:function(){return this.description},getLayerId:function(){return this.layerId},getQuicklookUrl:function(){return this.quicklookUrl},getDefaultProjection:function(){return this.defaultProjection},getProjections:function(){var n=[];return n.push(this.defaultProjection),n.concat(this.additionalProjections)},getBBOX:function(){if(this.globalConstraint)return this.globalConstraint.bbox},getMinScaleDenominator:function(){if(this.globalConstraint)return this.globalConstraint.minScaleDenominator},getMaxScaleDenominator:function(){if(this.globalConstraint)return this.globalConstraint.maxScaleDenominator},getTMSID:function(){if(this.wmtsOptions)return this.wmtsOptions.tileMatrixSetLink},getServiceParams:function(){return this.serviceParams},getServerUrl:function(n){if(n&&this.serviceParams&&this.serviceParams.serverUrl)return this.serviceParams.serverUrl[n]},getLegends:function(){return this.legends},getMetadata:function(){return this.metadata},getStyles:function(){return this.styles},getDefaultStyle:function(){if(this.styles){for(var n,t=this.styles,e=0;e<t.length;e++)if(!0===t[e].current){n=t[e].name;break}return n}},getThematics:function(){return this.thematics},getDefaultFormat:function(){if(this.formats){for(var n,t=this.formats,e=0;e<t.length;e++)if(!0===t[e].current){n=t[e].name;break}return n}},getConstraints:function(){return this.constraints},getOriginators:function(){return this.originators},getDimensions:function(){return this.dimensions},getAggregatedLayers:function(){if(this.isAggregate)return this.aggregatedLayers}};const fj=xD;function TD(){if(!(this instanceof TD))throw new TypeError("Legend constructor cannot be called as a function.");this.format=null,this.url=null,this.minScaleDenominator=null}TD.prototype={constructor:TD};const pj=TD;function PD(){if(!(this instanceof PD))throw new TypeError("Metadata constructor cannot be called as a function.");this.format=null,this.url=null}PD.prototype={constructor:PD};const gj=PD;function ID(){if(!(this instanceof ID))throw new TypeError("Originator constructor cannot be called as a function.");this.name=null,this.attribution=null,this.logo=null,this.url=null,this.constraints=[]}ID.prototype={constructor:ID};const mj=ID;function AD(){if(!(this instanceof AD))throw new TypeError("Service constructor cannot be called as a function.");this.title=null,this.serverUrl=null,this.version=null}AD.prototype={constructor:AD};const NG=AD;function MD(){if(!(this instanceof MD))throw new TypeError("Style constructor cannot be called as a function.");this.name=null,this.title=null,this.current=null,this.url=null}MD.prototype={constructor:MD};const vj=MD;function RD(){if(!(this instanceof RD))throw new TypeError("Territory constructor cannot be called as a function.");this.isDefault=null,this.defaultCRS=null,this.additionalCRS=[],this.geoBBOX={left:null,right:null,top:null,bottom:null},this.geoCenter={lon:null,lat:null},this.defaultOptions={resolution:null,minScaleDenominator:null,maxScaleDenominator:null},this.defaultLayers=[]}RD.prototype={constructor:RD};const yj=RD;function OD(){if(!(this instanceof OD))throw new TypeError("Thematic constructor cannot be called as a function.");this.inspire=null,this.name=null}OD.prototype={constructor:OD};const FG=OD;function DD(){if(!(this instanceof DD))throw new TypeError("TileMatrixSet constructor cannot be called as a function.");this.projection=null,this.nativeResolutions=[],this.matrixIds=[],this.tileMatrices={}}DD.prototype={constructor:DD,getResolutions:function(){return this.nativeResolutions},getMatrixIds:function(){return this.matrixIds},getProjection:function(){return this.projection},getTileMatrices:function(){return this.tileMatrices},getTopLeftCorner:function(){var n,t=this.getTileMatrices();if(t)for(var e in t)if(t.hasOwnProperty(e)){n=t[e].topLeftCorner;break}return n}};const _j=DD;function LD(){if(!(this instanceof LD))throw new TypeError("TileMatrix constructor cannot be called as a function.");this.matrixId=null,this.matrixHeight=null,this.matrixWidth=null,this.scaleDenominator=null,this.tileHeight=null,this.tileWidth=null,this.topLeftCorner=null}LD.prototype={constructor:LD,getTopLeftCorner:function(){return this.topLeftCorner},getScaleDenominator:function(){return this.scaleDenominator},getTileHeight:function(){return this.tileHeight},getTileWidth:function(){return this.tileWidth},getMatrixHeight:function(){return this.matrixHeight},getMatrixWidth:function(){return this.matrixWidth}};const Ej=LD;function kD(){if(!(this instanceof kD))throw new TypeError("TileMatrixLimit constructor cannot be called as a function.");this.minTileRow=null,this.maxTileRow=null,this.minTileCol=null,this.maxTileCol=null}kD.prototype={constructor:kD};const bj=kD;var Xa={};function Ud(n,t){if(n.hasChildNodes())for(var r,i,o,e=n.childNodes,s=0;s<e.length;s++)1===(r=e[s]).nodeType&&(Xa.READERS[o=r.prefix||Xa.DEFAULTPREFIX][i=r.localName||r.baseName||r.nodeName]?(0,Xa.READERS[o][i])(r,t):Ud(r,t))}function bi(n){var t,e="";return n.hasChildNodes()&&(3===(t=n.firstChild).nodeType||4===t.nodeType)&&(e=t.nodeValue),e}Xa.VERSION="1.1.0",Xa.NAMESPACES={xmlns:"http://www.opengis.net/context",gpp:"http://api.ign.fr/geoportail",ows:"http://www.opengis.net/ows/1.1",sld:"http://www.opengis.net/sld",wmts:"http://www.opengis.net/wmts/1.0",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},Xa.SCHEMALOCATION=["http://www.opengis.net/context http://wxs.ign.fr/schemas/extContext.xsd http://api.ign.fr/geoportail http://wxs.ign.fr/schemas/autoconf/autoconf.xsd","http://www.opengis.net/context http://wxs.ign.fr/schemas/extContext.xsd http://api.ign.fr/geoportail http://wxs.ign.fr/schemas/autoconf.xsd"],Xa.DEFAULTPREFIX="context",Xa.READERS={context:{ViewContext:function(n){!function(n){if(n.attributes.length>0){var t=function(n){if(n.attributes.length>0){for(var t={},e=n.attributes,r=0;r<e.length;r++){var i=e[r];t[i.nodeName]=i.nodeValue}return t}}(n);for(var e in t)if(t.hasOwnProperty(e)){if("version"===e&&t.version!==Xa.VERSION)return void console.log("[AutoConfResponseReader] autoconf version is not the expected one : there may be errors in parsing");if("xmlns"===e){if(t[e]!==Xa.NAMESPACES.xmlns)return void console.log("[AutoConfResponseReader] autoconf response default namespace is not the expected one");continue}var r=e.split(":")[0],i=e.split(":")[1];if("xmlns"===r&&i&&Xa.NAMESPACES[i]&&Xa.NAMESPACES[i]!==t[e])return void console.log("[AutoConfResponseReader] autoconf response "+e+" namespace is not the expected one");if("schemaLocation"===i&&t[e]!==Xa.SCHEMALOCATION[0]&&t[e]!==Xa.SCHEMALOCATION[1])return void console.log("[AutoConfResponseReader] autoconf response schema location is not the expected one")}}}(n);var t=new dj;return Ud(n,t),t},Title:function(n,t){t&&t.generalOptions?t.generalOptions.title=bi(n):t&&t.lyr&&(t.lyr.title=bi(n))},Abstract:function(n,t){t&&t.lyr&&(t.lyr.description=bi(n))},Server:function(n,t){var e=n.getAttribute("service"),r=n.getAttribute("title"),i=n.getAttribute("version");if(e)if(t&&t.services&&"object"==typeof t.services&&!t.services[e]){var o=new NG;o.title=r,o.version=i,Ud(n,o),t.services[e]=o}else t&&t.lyr&&(t.lyr.serviceParams||(t.lyr.serviceParams={}),t.lyr.serviceParams.id=e,t.lyr.serviceParams.version=i)},OnlineResource:function(n,t){t&&t.hasOwnProperty("serverUrl")&&(t.serverUrl=n.getAttribute("xlink:href"))},LayerList:function(n,t){if(Ud(n,t),t&&t.layers&&t.generalOptions&&t.services)for(var e in t.layers)if(t.layers.hasOwnProperty(e)){var r=t.layers[e],i=r.apiKeys;if(i&&Array.isArray(i))for(var o=0;o<i.length;o++){var s=i[o];t.generalOptions.apiKeys&&((!t.generalOptions.apiKeys[s]||!Array.isArray(t.generalOptions.apiKeys[s]))&&(t.generalOptions.apiKeys[s]=[]),t.generalOptions.apiKeys[s].push(e))}var a=r.serviceParams;if(a&&a.id&&!t.services[a.id]){var c=new NG;a.serverUrl&&(c.serverUrl=a.serverUrl),a.version&&(c.version=a.version),t.services[a.id]=c}if(r.wmtsOptions&&r.wmtsOptions.tileMatrixSetLink&&t.tileMatrixSets){var h=r.wmtsOptions.tileMatrixSetLink,p=t.tileMatrixSets;for(var m in p)p.hasOwnProperty(m)&&m===h&&(r.defaultProjection=p[m].projection)}}},Layer:function(n,t){if(t&&t.layers){var e={lyr:new fj,lyrId:null},r=n.getAttribute("hidden");e.lyr.hidden="1"===r;var i=n.getAttribute("queryable");if(e.lyr.queryable="1"===i,Ud(n,e),e.lyrId){if(e.lyr.serviceParams&&e.lyr.serviceParams.id){var o=e.lyr.serviceParams.id;if(-1!==o.toUpperCase().indexOf("OPENLS")||-1!==o.toUpperCase().indexOf("ELEVATION")){var s=e.lyrId.split("$")[0];e.lyrId=s+"$"+o}}e.lyr.layerId=e.lyrId,t.layers[e.lyrId]=e.lyr}}},Name:function(n,t){t&&t.lyr&&(t.lyr.name=bi(n))},SRS:function(n,t){t&&t.lyr&&(t.lyr.defaultProjection=bi(n))},Format:function(n,t){if(t&&t.lyr){var e=new hj,r=n.getAttribute("current");e.current="1"===r,e.name=bi(n),(!t.lyr.formats||!Array.isArray(t.lyr.formats))&&(t.lyr.formats=[]),t.lyr.formats.push(e)}},Style:function(n,t){if(t&&t.lyr){var e=new vj,r=n.getAttribute("current");if(e.current="1"===r||1===r,n.hasChildNodes)for(var o,s,i=n.childNodes,a=0;a<i.length;a++)1===(o=i[a]).nodeType&&("Name"===(s=o.localName||o.baseName||o.nodeName)?e.name=bi(o):"Title"===s?e.title=bi(o):"URL"===s&&(e.url=bi(o)));(!t.lyr.styles||!Array.isArray(t.lyr.styles))&&(t.lyr.styles=[]),t.lyr.styles.push(e)}},Dimension:function(n,t){var e=n.getAttribute("name"),r=bi(n);t&&t.lyr&&(t.lyr.dimensions||(t.lyr.dimensions={}),"Type"===e?t.lyr.dimensions.type=r:"VisibilityRange"===e?t.lyr.dimensions.visibilityRange=r:"VisibilityMode "===e?t.lyr.dimensions.visibilityMode=r:"GeometricType"===e?t.lyr.dimensions.geometricType=r:"NoDataValue"===e&&(t.lyr.dimensions.noDataValue=r))}},gpp:{Theme:function(n,t){t&&t.generalOptions&&t.generalOptions.hasOwnProperty("theme")&&(t.generalOptions.theme=bi(n))},defaultGMLGFIStyleUrl:function(n,t){t&&t.generalOptions&&t.generalOptions.hasOwnProperty("defaultGMLGFIStyle")&&(t.generalOptions.defaultGMLGFIStyle=bi(n))},Territory:function(n,t){var e=n.getAttribute("id");if(e){var r=new yj,i=n.getAttribute("default");r.isDefault="1"===i,Ud(n,r),t&&t.territories&&"object"==typeof t.territories&&(t.territories[e]=r)}},defaultCRS:function(n,t){t&&t.hasOwnProperty("defaultCRS")&&(t.defaultCRS=bi(n))},AdditionalCRS:function(n,t){var e=bi(n);e&&t&&(Array.isArray(t.additionalCRS)?t.additionalCRS.push(e):((!t.additionalProjections||!Array.isArray(t.additionalProjections))&&(t.additionalProjections=[]),t.additionalProjections.push(e)))},DefaultLayer:function(n,t){var e=n.getAttribute("layerId");e&&t&&Array.isArray(t.defaultLayers)&&t.defaultLayers.push(e)},BoundingBox:function(n,t){if(t){var e=bi(n).split(",");if(4===e.length){var r={left:parseFloat(e[0]),right:parseFloat(e[2]),top:parseFloat(e[3]),bottom:parseFloat(e[1])},i=n.getAttribute("minT"),o=n.getAttribute("maxT");if(t.hasOwnProperty("geoBBOX"))t.geoBBOX=r;else if(t.hasOwnProperty("bbox"))if(t.bbox.left||t.bbox.right||t.bbox.top||t.bbox.bottom){t.multiConstraints||(t.multiConstraints=[]);var s=new Mv;s.bbox=r,s.temporalExtent=[i,o],t.multiConstraints.push(s)}else t.bbox=r,t.temporalExtent=[i,o];else t.globalConstraint||(t.globalConstraint=new Mv),t.globalConstraint.bbox=r,t.globalConstraint.temporalExtent=[i,o]}}},Resolution:function(n,t){var e=bi(n);e&&t&&t.defaultOptions&&t.defaultOptions.hasOwnProperty("resolution")&&(t.defaultOptions.resolution=parseFloat(e))},x:function(n,t){var e=bi(n);e&&t&&t.geoCenter&&t.geoCenter.hasOwnProperty("lon")&&(t.geoCenter.lon=parseFloat(e))},y:function(n,t){var e=bi(n);e&&t&&t.geoCenter&&t.geoCenter.hasOwnProperty("lat")&&(t.geoCenter.lat=parseFloat(e))},Resolutions:function(n,t){t&&t.generalOptions&&t.generalOptions.hasOwnProperty("wgs84Resolutions")&&(t.generalOptions.wgs84Resolutions=bi(n).split(","))},Layer:function(n,t){if(t&&t.hasOwnProperty("lyrId")&&t.lyr){t.lyrId=n.getAttribute("id");var e=n.getAttribute("aggregate"),r=n.getAttribute("more");(e||r)&&(t.lyr.isAggregate=!0),Ud(n,t.lyr)}},Constraint:function(n,t){var e=new Mv;if(Ud(n,e),t)if((!t.constraints||!Array.isArray(t.constraints))&&(t.constraints=[]),e.multiConstraints&&Array.isArray(e.multiConstraints)){var r=new Mv;r.crs=e.crs,r.bbox=e.bbox,r.minScaleDenominator=e.minScaleDenominator,r.maxScaleDenominator=e.maxScaleDenominator,r.temporalExtent=e.temporalExtent,t.constraints.push(r);for(var i=0;i<e.multiConstraints.length;i++)(r=new Mv).crs=e.crs,r.minScaleDenominator=e.minScaleDenominator,r.maxScaleDenominator=e.maxScaleDenominator,r.bbox=e.multiConstraints[i].bbox,r.temporalExtent=e.multiConstraints[i].temporalExtent,t.constraints.push(r)}else t.constraints.push(e)},CRS:function(n,t){t&&t.hasOwnProperty("crs")&&(t.crs=bi(n))},Thematic:function(n,t){if(t){var e=new FG;e.inspire=!1,e.name=bi(n),(!t.thematics||!Array.isArray(t.thematics))&&(t.thematics=[]),t.thematics.push(e)}},InspireThematic:function(n,t){if(t){var e=new FG;e.inspire=!0,e.name=bi(n),(!t.thematics||!Array.isArray(t.thematics))&&(t.thematics=[]),t.thematics.push(e)}},Originator:function(n,t){if(t){var e=new mj;e.name=n.getAttribute("name"),Ud(n,e),(!t.originators||!Array.isArray(t.originators))&&(t.originators=[]),t.originators.push(e)}},Attribution:function(n,t){t&&t.hasOwnProperty("attribution")&&(t.attribution=bi(n))},Logo:function(n,t){t&&t.hasOwnProperty("logo")&&(t.logo=bi(n))},URL:function(n,t){t&&t.hasOwnProperty("url")&&(t.url=bi(n))},Legend:function(n,t){var e=new pj;Ud(n,e),t&&((!t.legends||!Array.isArray(t.legends))&&(t.legends=[]),t.legends.push(e))},LegendURL:function(n,t){if(t&&t.hasOwnProperty("format")&&(t.format=n.getAttribute("format"),n.hasChildNodes)){var e=n.childNodes[0];"OnlineResource"===(e.localName||e.baseName||e.nodeName)&&t.hasOwnProperty("url")&&(t.url=e.getAttribute("xlink:href"))}},QuickLook:function(n,t){if(n.hasChildNodes){var e=n.childNodes[0];"OnlineResource"===(e.localName||e.baseName||e.nodeName)&&t&&(t.quicklookUrl=e.getAttribute("xlink:href"))}},MetadataURL:function(n,t){if(t){var e=new gj;if(e.format=n.getAttribute("format"),n.hasChildNodes){var r=n.childNodes[0];"OnlineResource"===(r.localName||r.baseName||r.nodeName)&&(e.url=r.getAttribute("xlink:href"))}t.metadata||(t.metadata=[]),t.metadata.push(e)}},Key:function(n,t){if(t){var e=n.getAttribute("id");(!t.apiKeys||!Array.isArray(t.apiKeys))&&(t.apiKeys=[]),t.apiKeys.push(e);var r=bi(n);t.serviceParams||(t.serviceParams={}),t.serviceParams.serverUrl||(t.serviceParams.serverUrl={}),t.serviceParams.serverUrl[e]||(t.serviceParams.serverUrl[e]=r)}}},ows:{Identifier:function(n,t){t&&t.hasOwnProperty("TMS")?t.identifier=bi(n):t&&t.hasOwnProperty("matrixId")&&(t.matrixId=bi(n))},SupportedCRS:function(n,t){t&&t.TMS&&t.TMS.hasOwnProperty("projection")&&(t.TMS.projection=bi(n))}},sld:{MinScaleDenominator:function(n,t){var e=bi(n);e&&t&&(t.hasOwnProperty("defaultOptions")?t.defaultOptions.minScaleDenominator=parseFloat(e):t.lyr?(t.lyr.globalConstraint||(t.lyr.globalConstraint=new Mv),t.lyr.globalConstraint.minScaleDenominator=parseFloat(e)):t.hasOwnProperty("minScaleDenominator")&&(t.minScaleDenominator=parseFloat(e)))},MaxScaleDenominator:function(n,t){var e=bi(n);e&&t&&(t.hasOwnProperty("defaultOptions")?t.defaultOptions.maxScaleDenominator=parseFloat(e):t.lyr?(t.lyr.globalConstraint||(t.lyr.globalConstraint=new Mv),t.lyr.globalConstraint.maxScaleDenominator=parseFloat(e)):t.hasOwnProperty("maxScaleDenominator")&&(t.maxScaleDenominator=parseFloat(e)))}},wmts:{TileMatrixSetLimits:function(n,t){if(t){var e={};Ud(n,e),t.wmtsOptions||(t.wmtsOptions={}),t.wmtsOptions.tileMatrixSetLimits=e}},TileMatrixLimits:function(n,t){var r,e=new bj;if(n.hasChildNodes){for(var i=n.childNodes,o=0;o<i.length;o++){var s=i[o],a=s.localName||s.baseName||s.nodeName;"TileMatrix"===a?r=bi(s):"MinTileRow"===a?e.minTileRow=bi(s):"MaxTileRow"===a?e.maxTileRow=bi(s):"MinTileCol"===a?e.minTileCol=bi(s):"MaxTileCol"===a&&(e.maxTileCol=bi(s))}r&&t&&!t[r]&&(t[r]=e)}},TileMatrixSet:function(n,t){if(t&&t.tileMatrixSets){var e={};e.TMS=new _j,e.resolutions=[],Ud(n,e);var r=e.TMS.tileMatrices;for(var i in r)r.hasOwnProperty(i)&&e.TMS.matrixIds.push(i);if(("IGNF:WGS84G"===e.TMS.getProjection()||"EPSG:4326"===e.TMS.getProjection())&&t.generalOptions&&Array.isArray(t.generalOptions.wgs84Resolutions))for(var o=t.generalOptions.wgs84Resolutions,s=0;s<o.length;s++)e.resolutions[s]=parseFloat(o[s]);Array.isArray(e.resolutions)&&void 0!==e.resolutions.sort&&e.resolutions.sort(function(a,c){return c-a}),e.TMS.nativeResolutions=e.resolutions,t.tileMatrixSets[e.identifier]=e.TMS}else t&&!t.wmtsOptions&&(t.wmtsOptions={}),t.wmtsOptions.tileMatrixSetLink=bi(n)},TileMatrix:function(n,t){if(t){var e=new Ej;if(Ud(n,e),t.TMS&&t.TMS.getProjection()){var r=t.TMS.getProjection();if("EPSG:3857"===r||"EPSG:2154"===r){var i=28e-5*e.scaleDenominator;t.resolutions&&Array.isArray(t.resolutions)&&t.resolutions.push(i)}}t.TMS&&t.TMS.tileMatrices&&(t.TMS.tileMatrices[e.matrixId]=e)}},ScaleDenominator:function(n,t){var e=bi(n);e&&t&&t.hasOwnProperty("scaleDenominator")&&(t.scaleDenominator=parseFloat(e))},TopLeftCorner:function(n,t){var e=bi(n).split(" ");e&&t&&(t.topLeftCorner={},t.topLeftCorner.x=parseFloat(e[0]),t.topLeftCorner.y=parseFloat(e[1]))},TileWidth:function(n,t){var e=bi(n);e&&t&&t.hasOwnProperty("tileWidth")&&(t.tileWidth=parseInt(e,10))},TileHeight:function(n,t){var e=bi(n);e&&t&&t.hasOwnProperty("tileHeight")&&(t.tileHeight=parseInt(e,10))},MatrixWidth:function(n,t){var e=bi(n);e&&t&&t.hasOwnProperty("matrixWidth")&&(t.matrixWidth=parseInt(e,10))},MatrixHeight:function(n,t){var e=bi(n);e&&t&&t.hasOwnProperty("matrixHeight")&&(t.matrixHeight=parseInt(e,10))}},serviceException:function(n){var t={};if(n.hasChildNodes())for(var r,e=n.childNodes,i=0;i<e.length;i++)"exception"===(r=e[i]).nodeName&&(t.exceptionReport=Xa.READERS.exception(r));return t},exception:function(n){var t={},e=n.getAttribute("code");e&&(t.exceptionCode=e);var r=n.firstChild;return r&&3===r.nodeType&&(t.exception=r.nodeValue),t}},Xa.read=function(n){if("ViewContext"===n.nodeName)return Xa.READERS[n.prefix||Xa.DEFAULTPREFIX][n.nodeName](n);if("serviceException"===n.nodeName)return Xa.READERS[n.nodeName](n);throw new Error("Erreur lors de la lecture de la r\xe9ponse : elle n'est pas au format attendu.")};const X9=Xa,Z9={build:function(n){Xr_getLogger("AutoConfResponseFactory").trace(["AutoConfResponseFactory::build()"]);var e=null;if(n.response){if(n.rawResponse)e=n.response;else{try{var r=new tS({reader:X9});"string"==typeof n.response?r.setXMLString(n.response):r.setXMLDoc(n.response),e=r.parse()}catch(c){var i=c.message;return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_EXCEPTION",i+="string"==typeof n.response?"\n (raw response service'"+n.response+"')":"\n (raw response service'"+n.response.documentElement.innerHTML+"')"),status:200,type:pn.TYPE_SRVERR}))}var o=!0;for(var s in e)e.hasOwnProperty(s)&&(o=!1);if(o)return void n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_EMPTY_2")));if(e.exceptionReport)return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:pn.TYPE_SRVERR,status:200}))}var a="undefined"!=typeof window?window:{};a.Gp||(a.Gp={}),a.Gp.Config?this.mergeConfig(a.Gp.Config,e,n.layerId):a.Gp.Config=e,n.onSuccess.call(n.scope,a.Gp.Config)}else n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_EMPTY")))},mergeConfig:function(n,t,e){if(t&&n){for(var r in t)if(t.hasOwnProperty(r))if("generalOptions"===r)for(var i in t[r].apiKeys)t[r].apiKeys.hasOwnProperty(i)&&!n.generalOptions.apiKeys[i]&&(n.generalOptions.apiKeys[i]=t[r].apiKeys[i]);else if(n[r])for(var o in t[r])t[r].hasOwnProperty(o)&&!n[r][o]&&(n[r][o]=t[r][o]);if(e){var s=[];for(var a in t.layers)t.layers.hasOwnProperty(a)&&s.push(a);n.layers[e]&&(n.layers[e].aggregatedLayers=s)}}}};function OE(n){if(!(this instanceof OE))throw new TypeError(ln.getMessage("CLASS_CONSTRUCTOR","AutoConf"));if(this.CLASSNAME="AutoConf",n||(n={}),n.protocol=n.protocol||"JSONP",qc.apply(this,arguments),this.logger=Xr_getLogger("Gp.Services.AutoConf"),this.logger.trace("[Constructeur AutoConf (options)]"),!this.options.serverUrl&&!this.options.serverUrl){var t=ME.AutoConf.url(this.options.apiKey);this.options.serverUrl=this.options.layerId?t.aggregate+this.options.layerId:Array.isArray(this.options.apiKey)&&this.options.apiKey.length>0?t.apiKeys:t.apiKey}"XHR"===this.options.protocol&&"POST"===this.options.httpMethod&&(this.logger.warn("Le service ne g\xe9re pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"xml"}(OE.prototype=Object.create(qc.prototype,{})).constructor=OE,OE.prototype.buildRequest=function(n,t){var e="undefined"!=typeof window?window:{};if(e.Gp&&e.Gp.Config&&e.Gp.Config.generalOptions&&e.Gp.Config.layers&&e.Gp.Config.generalOptions.apiKeys[this.options.apiKey]){if(!this.options.layerId)return this.logger.warn("Gp.Config existe d\xe9j\xe0 pour cette cl\xe9"),void this.options.onSuccess.call(this,e.Gp.Config);if(e.Gp.Config.layers[this.options.layerId]&&e.Gp.Config.layers[this.options.layerId].aggregatedLayers)return this.logger.warn("Gp.Config existe d\xe9j\xe0 pour cette cl\xe9 et cette couche"),void this.options.onSuccess.call(this,e.Gp.Config)}this.request="",!(-1===this.options.serverUrl.indexOf("http://"))&&this.layerId&&(this.request=Up.normalyzeParameters({layerId:this.layerId})),this.request||""===this.request?t.call(this,this.request):n.call(this,new pn(ln.getMessage("SERVICE_REQUEST_BUILD")))},OE.prototype.analyzeResponse=function(n,t){this.response?Z9.build({layerId:this.options.layerId,response:this.response,rawResponse:this.options.rawResponse,onSuccess:t,onError:n,scope:this}):n.call(this,new pn(ln.getMessage("SERVICE_RESPONSE_EMPTY")))};const J9=OE;function ND(n){if(this.logger=Xr_getLogger(),this.logger.trace("[Constructeur RequestHeader ()]"),!(this instanceof ND))throw new TypeError("RequestHeader constructor cannot be called as a function.");for(var t in this.options=n||{srsName:"EPSG:4326"},n)n.hasOwnProperty(t)&&(this.options[t]=n[t])}ND.prototype={requestString:null,template:'<RequestHeader srsName="__SRSNAME__"/>',constructor:ND,toString:function(){var n=null;return n=(n=this.template).replace(/__SRSNAME__/g,this.options.srsName),this.requestString=n,this.requestString}};const Q9=ND;function FD(n){if(this.logger=Xr_getLogger(),this.logger.trace("[Constructeur Request ()]"),!(this instanceof FD))throw new TypeError("Request constructor cannot be called as a function.");for(var t in this.options=n||{maximumResponses:25,methodName:null,version:"1.2"},n)n.hasOwnProperty(t)&&(this.options[t]=n[t])}FD.prototype={requestString:null,template:'<Request maximumResponses="__MAXRESPONSES__" methodName="__METHODNAME__" requestID="__UUID__" version="__VERSION__">\x3c!-- __REQUESTSERVICE__ --\x3e</Request>',constructor:FD,guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=16*Math.random()|0;return("x"===n?t:3&t|8).toString(16)})},toString:function(){var n=null;return n=(n=(n=(n=(n=this.template).replace(/__MAXRESPONSES__/g,this.options.maximumResponses)).replace(/__METHODNAME__/g,this.options.methodName)).replace(/__UUID__/g,this.guid())).replace(/__VERSION__/g,this.options.version),this.requestString=n,this.requestString}};const $9=FD;function GD(n){if(this.logger=Xr_getLogger(),this.logger.trace("[Constructeur AbstractService ()]"),!(this instanceof GD))throw new TypeError("AbstractService constructor cannot be called as a function.");for(var t in this.options=n||{},n)n.hasOwnProperty(t)&&(this.options[t]=n[t])}GD.prototype={strRequest:null,oRequest:null,oFilter:null,constructor:GD,addRequest:function(n){this.logger.error("overwritten method !")},addFilter:function(n){this.logger.error("overwritten method !")},toString:function(){this.logger.error("overwritten method !")}};const MP=GD;function _m(n){if(this.logger=Xr_getLogger(),this.logger.trace("[Constructeur XLS()]"),!(this instanceof _m))throw new TypeError("XLS constructor cannot be called as a function.");for(var t in this.options={srsName:"EPSG:4326",maximumResponses:25},n)n.hasOwnProperty(t)&&n[t]&&(this.options[t]=n[t])}_m.VERSION="1.2",(_m.prototype={requestString:null,namespace:!1,oService:null,constructor:_m,template:'<?xml version="1.0" encoding="UTF-8"?>\n<XLS version="__VERSION__"\n__NAMESPACE__ \n__SCHEMALOCATION__>\n__REQUESTHEADER__\n__REQUEST__\n</XLS>\n',namespaceByDefault:function(){return['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns:xls="http://www.opengis.net/xls"','xmlns:gml="http://www.opengis.net/gml"'].join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd"'},setService:function(n){n?n instanceof MP?this.oService=n:this.logger.error("L'objet n'est pas du type 'LocationUtilityService' ou 'RouteService' !?"):this.logger.trace("L'objet de type Service XSL n'est pas encore defini !?")},getService:function(){return this.oService}}).addNamespace=function(n,t){for(var e=n.key,r=!1,i=this.namespaceByDefault().split(" "),o=0;o<i.length;o++)if(i[o].split("=")[0]==="xmlns:"+e){r=!0;break}return r?(t=(t=t.replace(/<(\w+[\s>])/g,"<"+e+":$1")).replace(/<\/(\w+[\s>])/g,"</"+e+":$1"),this.logger.trace("namespace",t),t):(this.logger.warn("L'ajout d'un nouvel namespace n'est pas encore impl\xe9ment\xe9 !"),t)},_m.prototype.build=function(){var n=!!this.getService(),t="";t=(t=(t=(t=this.template).replace(/__VERSION__/g,_m.VERSION)).replace(/__NAMESPACE__/g,this.namespaceByDefault)).replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault);var e=new Q9({srsName:this.options.srsName});t=t.replace(/__REQUESTHEADER__/g,e.toString());var r=new $9({maximumResponses:this.options.maximumResponses,version:_m.VERSION,methodName:n?this.getService().CLASSTYPE:null});if(t=t.replace(/__REQUEST__/g,r.toString()),n&&(t=t.replace(/<!-- __REQUESTSERVICE__ -->/g,this.getService().toString())),t)return this.namespace&&(t=this.addNamespace({key:"xls",url:"http://www.opengis.net/xls"},t)),this.requestString=t,this.logger.trace("traduction tmpl",t),this.requestString;this.logger.warn("traduction tmpl : empty request !?")};const GG=_m;function RP(n){if(this.logger=Xr_getLogger("Address"),this.logger.trace("[Constructeur Address ()]"),!(this instanceof RP))throw new TypeError("Address constructor cannot be called as a function.");if(this.options=n||{location:{},type:["StreetAddress"],filter:{}},!this.options.location||0===Object.keys(this.options.location).length)throw new Error("l'option 'location' n'est pas renseign\xe9e !")}(RP.prototype={constructor:RP,requestString:null,template:{address:'<Address countryCode="__COUNTRYCODE__">__LOCATION____PLACE____POSTALCODE____ENVELOPE__</Address>',location:{freeFormAddress:"<freeFormAddress>__FREEFORMADDRESSVALUE__</freeFormAddress>",streetAddress:{container:"<StreetAddress>__STREET____BUILDING__</StreetAddress>",building:'<Building number="__BUILDINGVALUE__"/>',street:"<Street>__STREETVALUE__</Street>"}},place:'<Place type="__PLACETYPE__">__PLACEVALUE__</Place>',postalCode:"<PostalCode>__POSTALCODEVALUE__</PostalCode>",envelope:"<gml:Envelope><gml:lowerCorner>__LEFT__ __BOTTOM__</gml:lowerCorner><gml:upperCorner>__RIGHT__ __TOP__</gml:upperCorner></gml:Envelope>"}}).toString=function(){var n=null;if(n=(n=this.template.address).replace(/__COUNTRYCODE__/g,this.options.type),"string"==typeof this.options.location){var t=this.template.location.freeFormAddress;t=t.replace(/__FREEFORMADDRESSVALUE__/g,this.options.location),n=n.replace(/__LOCATION__/g,t)}else{var e="",r="";this.options.location.number&&(e=(e=this.template.location.streetAddress.building).replace(/__BUILDINGVALUE__/g,this.options.location.number)),this.options.location.street&&(r=(r=this.template.location.streetAddress.street).replace(/__STREETVALUE__/g,this.options.location.street));var i=this.template.location.streetAddress.container;i=(i=i.replace(/__STREET__/g,r)).replace(/__BUILDING__/g,e),n=n.replace(/__LOCATION__/g,i)}var o="";this.options.location.postalCode&&(o=(o=this.template.postalCode).replace(/__POSTALCODEVALUE__/g,this.options.location.postalCode));var s="";if(this.options.filter){var a=this.options.filter.bbox;a&&(s=(s=(s=(s=(s=this.template.envelope).replace(/__LEFT__/g,a.left)).replace(/__BOTTOM__/g,a.bottom)).replace(/__RIGHT__/g,a.right)).replace(/__TOP__/g,a.top))}var c=[],h="";if(this.options.filter){var p=this.options.filter;for(var m in p)"bbox"!==m&&(h=(h=(h=this.template.place).replace(/__PLACETYPE__/g,m)).replace(/__PLACEVALUE__/g,p[m]),c.push(h))}var E="";return this.options.location.city&&(E=(E=(E=this.template.place).replace(/__PLACETYPE__/g,"Municipality")).replace(/__PLACEVALUE__/g,this.options.location.city),c.push(E)),n=(n=(n=n.replace(/__POSTALCODE__/g,o)).replace(/__PLACE__/g,c.join("\n"))).replace(/__ENVELOPE__/g,s),this.requestString=n,this.requestString};const wj=RP;function BD(){if(this.logger=Xr_getLogger("GeocodeFilterExtension"),this.logger.trace("[Constructeur GeocodeFilterExtension ()]"),!(this instanceof BD))throw new TypeError("GeocodeFilterExtension constructor cannot be called as a function.");this.filters=[]}BD.prototype={constructor:BD,addFilterExtensions:function(n){n&&this.filters.push(n)},getNames:function(){var n=[];for(var t in this.filters)n.push(this.filters[t].CLASSNAME);return this.logger.trace(n),n},getFilter:function(n){var t=null;for(var e in this.filters)this.filters[e].CLASSNAME===n&&(t=this.filters[e]);return this.logger.trace(t),t},getFilters:function(){return this.logger.trace(this.filters),this.filters},getAttributs:function(n){var t=[];for(var e in this.filters)this.filters[e].CLASSNAME===n&&(t=this.filters[e].attributesList);return this.logger.trace(t),t},setPlaceAttributs:function(n,t){var e=this.getFilter(n),r=this.getAttributs(n);for(var i in r){var o=r[i];t[o]&&(e.placeAttributes[o]=t[o])}},getPlaceAttributs:function(n){var t={};for(var e in this.filters)this.filters[e].CLASSNAME===n&&(t=this.filters[e].placeAttributes);return this.logger.trace(t),t}};const BG=BD;function jD(n){if(this.logger=Xr_getLogger(),this.logger.trace("[Constructeur GeocodeRequest ()]"),!(this instanceof jD))throw new TypeError("GeocodeRequest constructor cannot be called as a function.");for(var t in this.options=n||{},n)n.hasOwnProperty(t)&&(this.options[t]=n[t]);this.CLASSNAME="GeocodeRequest"}jD.prototype={strRequest:null,oAddress:null,oFilter:null,template:'<GeocodeRequest returnFreeForm="__RETURNFREEFORM__">__ADDRESS__</GeocodeRequest>',addAddress:function(n){n instanceof wj&&(this.oAddress=n)},addFilter:function(n){n instanceof BG&&(this.oFilter=n)},constructor:jD,toString:function(){var n="";if(n=this.template,!this.oAddress){var t={};if(t.location=this.options.location,t.type=this.options.filterOptions.type||["StreetAddress"],t.filter=this.options.filterOptions,delete t.filter.type,this.oFilter)for(var e in t.filter={},t.type){var r=t.type[e],i=this.oFilter.getFilter(r);if(i){for(var o=this.options.filterOptions,s=i.attributesList,a=0;a<s.length;a++){var c=s[a];o[c]&&(i.placeAttributes[i.serviceAttributes[a]]=o[c],this.logger.trace("Selection du filtre '"+c+"' sur le type '"+r+"'."))}var p=i.placeAttributes;for(var m in p)p.hasOwnProperty(m)&&(t.filter[m]=p[m])}else this.logger.warn("Le filtre '"+r+"' n'existe pas !?")}if(this.oAddress=new wj(t),!this.oAddress)throw new Error("La construction de l'adresse n'est pas correctement definie !?")}return n=(n=n.replace(/__ADDRESS__/g,this.oAddress.toString())).replace(/__RETURNFREEFORM__/g,this.options.returnFreeForm?"true":"false"),this.strRequest=n,this.strRequest}};const eH=jD;function OP(n){if(this.logger=Xr_getLogger("Position"),this.logger.trace("[Constructeur Position ()]"),!(this instanceof OP))throw new TypeError("Position constructor cannot be called as a function.");if(this.options=n||{},!this.options.position)throw new Error("l'option 'position' n'est pas renseign\xe9e !")}(OP.prototype={constructor:OP,requestString:null,template:{position:"<Position>__GMLPOINT____GMLFILTER__</Position>",gml:{point:'<gml:Point xmlns:gml="http://www.opengis.net/gml"><gml:pos>__X__ __Y__</gml:pos></gml:Point>',pos:null,filter:{bbox:'<gml:Envelope xmlns:gml="http://www.opengis.net/gml"><gml:lowerCorner>__LEFT__ __BOTTOM__</gml:lowerCorner><gml:upperCorner>__RIGHT__ __TOP__</gml:upperCorner></gml:Envelope>',circle:'<gml:CircleByCenterPoint xmlns:gml="http://www.opengis.net/gml"><gml:pos>__X__ __Y__</gml:pos><gml:radius>__RADIUS__</gml:radius></gml:CircleByCenterPoint>',polygon:'<gml:Polygon xmlns:gml="http://www.opengis.net/gml"><gml:exterior><gml:LinearRing><gml:posList>__XY__</gml:posList></gml:LinearRing></gml:exterior></gml:Polygon>',multipolygon:null}}}}).toString=function(){var n=this.template.position,t=this.template.gml.point;t=(t=t.replace(/__X__/g,this.options.position.x)).replace(/__Y__/g,this.options.position.y);var e="";if(this.options.filter){var r=this.options.filter;for(var i in r)switch(i){case"circle":e=(e=(e=(e=this.template.gml.filter[i]).replace(/__X__/g,r[i].x)).replace(/__Y__/g,r[i].y)).replace(/__RADIUS__/g,r[i].radius);break;case"bbox":e=(e=(e=(e=(e=this.template.gml.filter[i]).replace(/__LEFT__/g,r[i].left)).replace(/__BOTTOM__/g,r[i].bottom)).replace(/__RIGHT__/g,r[i].right)).replace(/__TOP__/g,r[i].top);break;case"polygon":e=this.template.gml.filter[i];for(var o="",s=r[i],a=0;a<s.length;a++){var c=s[a];if(Array.isArray(c)){this.logger.error("Holes are not implemented !");break}(c.x&&c.y||0===c.x||0===c.y)&&(o+=c.x+" "+c.y),s.length!==a+1&&(o+=" ")}e=e.replace(/__XY__/g,o);break;case"multipolygon":this.logger.warn("Filter '"+i+"' is not yet implemented !");break;default:this.logger.error("This filter '"+i+"' is not useful !")}}return n=(n=n.replace(/__GMLPOINT__/g,t)).replace(/__GMLFILTER__/g,e),this.requestString=n,this.requestString};const Cj=OP;function DP(n){if(this.logger=Xr_getLogger("Preference"),this.logger.trace("[Constructeur Preference ()]"),!(this instanceof DP))throw new TypeError("Preference constructor cannot be called as a function.");this.type=n}(DP.prototype={constructor:DP,requestString:null,template:"<ReverseGeocodePreference>__TYPE__</ReverseGeocodePreference>"}).toString=function(){for(var n=[],t="",e=0;e<this.type.length;e++)t=(t=this.template).replace(/__TYPE__/g,this.type[e]),n.push(t);return this.strRequest=n.join("\n"),this.strRequest};const Sj=DP;function UD(n){if(this.logger=Xr_getLogger(),this.logger.trace("[Constructeur ReverseGeocodeRequest ()]"),!(this instanceof UD))throw new TypeError("ReverseGeocodeRequest constructor cannot be called as a function.");for(var t in this.options=n||{},n)n.hasOwnProperty(t)&&(this.options[t]=n[t]);this.CLASSNAME="ReverseGeocodeRequest"}UD.prototype={strRequest:null,oPosition:null,oPreference:null,constructor:UD,template:'<ReverseGeocodeRequest returnFreeForm="__RETURNFREEFORM__">__POSITION____PREFERENCE__</ReverseGeocodeRequest>',addPosition:function(n){n instanceof Cj&&(this.oPosition=n)},addPreferences:function(n){n instanceof Sj&&(this.oPreference=n)},toString:function(){var n="";if(n=this.template,!this.oPreference&&(this.oPreference=new Sj(this.options.filterOptions.type||["StreetAddress"]),!this.oPreference))throw new Error("Les preferences ne sont pas definies !?");if(n=n.replace(/__PREFERENCE__/g,this.oPreference.toString()),!this.oPosition){var t={position:this.options.position,filter:{}};if(this.options.filterOptions&&(t.filter=this.options.filterOptions,delete t.filter.type),this.oPosition=new Cj(t),!this.oPosition)throw new Error("La position et ses filtres ne sont pas definis !?")}return n=(n=n.replace(/__POSITION__/g,this.oPosition.toString())).replace(/__RETURNFREEFORM__/g,this.options.returnFreeForm?"true":"false"),this.strRequest=n,this.strRequest}};const tH=UD;function Rv(n){if(this.logger=Xr_getLogger(),this.logger.trace("[Constructeur LocationUtilityService ()]"),!(this instanceof Rv))throw new TypeError("LocationUtilityService constructor cannot be called as a function.");this.CLASSNAME="LocationUtilityService",this.CLASSTYPE=null,MP.apply(this,arguments),this.options&&(this.CLASSTYPE=this.options.location?"GeocodeRequest":this.options.position?"ReverseGeocodeRequest":null)}(Rv.prototype=Object.create(MP.prototype,{})).constructor=Rv,Rv.prototype.addRequest=function(n){switch(this.CLASSTYPE=n.CLASSNAME,this.CLASSTYPE){case"GeocodeRequest":case"ReverseGeocodeRequest":this.oRequest=n;break;default:throw new Error("Ce n'est pas un objet de type 'LUS Request' !?")}},Rv.prototype.addFilter=function(n){n instanceof BG&&(this.oFilter=n)},Rv.prototype.toString=function(){if(!this.oRequest){if(!this.options)throw new Error("Les options ne sont pas renseign\xe9es, impossible de construire la requ\xeate !");"GeocodeRequest"===this.CLASSTYPE?(this.oRequest=new eH({location:this.options.location,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions||{}}),this.oFilter&&this.oRequest.addFilter(this.oFilter)):"ReverseGeocodeRequest"===this.CLASSTYPE?this.oRequest=new tH({position:this.options.position,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions||{}}):this.logger.error("impossible de determiner le type de geocodage : Direct ou Inverse !?")}if(!this.oRequest)throw new Error("Type de Geocodage indefini !");return this.strRequest=this.oRequest.toString(),this.strRequest};const xj=Rv;function VD(){if(!(this instanceof VD))throw new TypeError("GeocodeLocation constructor cannot be called as a function.");this.placeAttributes={},this.attributesList=[],this.serviceAttributes=[]}VD.prototype={constructor:VD};const Ov=VD;function LP(){if(!(this instanceof LP))throw new TypeError("StreetAddress constructor cannot be called as a function.");Ov.apply(this,arguments),this.CLASSNAME="StreetAddress",this.attributesList=["bbox","ID","IDTR","quality","territory","commune","department","insee","municipality"],this.serviceAttributes=["bbox","ID","IDTR","Qualite","Territoire","Commune","Departement","INSEE","Municipality"]}(LP.prototype=Object.create(Ov.prototype)).constructor=LP;const nH=LP;function kP(){if(!(this instanceof kP))throw new TypeError("PositionOfInterest constructor cannot be called as a function.");Ov.apply(this,arguments),this.CLASSNAME="PositionOfInterest",this.attributesList=["bbox","importance","nature","territory","commune","department","insee","municipality"],this.serviceAttributes=["bbox","Importance","Nature","Territoire","Commune","Departement","INSEE","Municipality"]}(kP.prototype=Object.create(Ov.prototype)).constructor=kP;const rH=kP;function NP(){if(!(this instanceof NP))throw new TypeError("CadastralParcel constructor cannot be called as a function.");Ov.apply(this,arguments),this.CLASSNAME="CadastralParcel",this.attributesList=["absorbedCity","sheet","number","section","commune","department","insee","municipality","origin"],this.serviceAttributes=["CommuneAbsorbee","Feuille","Numero","Section","Commune","Departement","INSEE","Municipality","Type"]}(NP.prototype=Object.create(Ov.prototype)).constructor=NP;const iH=NP;function FP(){if(!(this instanceof FP))throw new TypeError("Administratif constructor cannot be called as a function.");Ov.apply(this,arguments),this.CLASSNAME="Administratif",this.attributesList=["bbox","prefecture","inseeRegion","inseeDepartment","municipality"],this.serviceAttributes=["bbox","Prefecture","InseeRegion","InseeDepartement","Municipality"]}(FP.prototype=Object.create(Ov.prototype)).constructor=FP;const oH=FP,aH_build=function(n){var t=Xr_getLogger("DirectGeocodeRequestFactory");t.trace(["DirectGeocodeRequestFactory::build()"]);var e=null,r=new BG;r.addFilterExtensions(new oH),r.addFilterExtensions(new nH),r.addFilterExtensions(new rH),r.addFilterExtensions(new iH);var i=new xj({location:n.location,returnFreeForm:n.returnFreeForm,filterOptions:n.filterOptions});i.addFilter(r);var o=new GG({srsName:n.srs,maximumResponses:n.maximumResponses});return o.namespace=!0,o.setService(i),e=o.build(),"GET"===n.httpMethod&&(e="qxml="+encodeURIComponent(e).replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\./g,"%2E").replace(/!/g,"%21").replace(/~/g,"%7E").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")),t.trace(e),e};function zD(){if(!(this instanceof zD))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}zD.prototype={constructor:zD};const jG=zD;function HD(){if(!(this instanceof HD))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position={x:null,y:null},this.matchType=null,this.placeAttributes={},this.type=null}HD.prototype={constructor:HD};const GP=HD;function BP(){if(!(this instanceof BP))throw new TypeError("DirectGeocodedLocation constructor cannot be called as a function.");GP.apply(this,arguments),this.CLASSNAME="DirectGeocodedLocation",this.accuracy=null}(BP.prototype=Object.create(GP.prototype)).constructor=BP;const Tj=BP;var Ka={};function WD(n,t){if(n.hasChildNodes())for(var r,i,o,e=n.childNodes,s=0;s<e.length;s++)1===(r=e[s]).nodeType&&(Ka.READERS[o=r.prefix||Ka.DEFAULTPREFIX][i=r.localName||r.baseName||r.nodeName]?(0,Ka.READERS[o][i])(r,t):WD(r,t))}function nS(n){var t,e="";return n.hasChildNodes()&&3===(t=n.firstChild).nodeType&&(e=t.nodeValue),e}Ka.VERSION="1.2",Ka.NAMESPACES={xmlns:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xls:"http://www.opengis.net/xls",xlsext:"http://www.opengis.net/xlsext",xsi:"http://www.w3.org/2001/XMLSchema-instance"},Ka.SCHEMALOCATION="http://wxs.ign.fr/schemas/olsAll.xsd",Ka.DEFAULTPREFIX="xls",Ka.READERS={xls:{XLS:function(n){var t=new jG;return function(n){if(n.attributes.length>0){var t=function(n){if(n.attributes.length>0){for(var t={},e=n.attributes,r=0;r<e.length;r++){var i=e[r];t[i.nodeName]=i.nodeValue}return t}}(n);for(var e in t)if(t.hasOwnProperty(e)){if("version"===e&&t.version!==Ka.VERSION)return void console.log("[DirectGeocodeResponseReader] geocode version is not the expected one : there may be errors in parsing");if("xmlns"===e){if(t[e]!==Ka.NAMESPACES[Ka.DEFAULTPREFIX])return void console.log("[DirectGeocodeResponseReader] geocode response default namespace is not the expected one");continue}var r=e.split(":")[0],i=e.split(":")[1];if("xmlns"===r&&i&&Ka.NAMESPACES[i]&&Ka.NAMESPACES[i]!==t[e])return void console.log("[DirectGeocodeResponseReader] geocode response "+e+" namespace is not the expected one");if("schemaLocation"===i&&Ka.SCHEMALOCATION!==t[e])return void console.log("[DirectGeocodeResponseReader] geocode response schema location is not the expected one")}}}(n),WD(n,t),t},GeocodedAddress:function(n,t){var e=new Tj;WD(n,e),t&&Array.isArray(t.locations)&&t.locations.push(e)},GeocodeMatchCode:function(n,t){var e=n.getAttribute("accuracy");e&&t&&(t.accuracy=parseFloat(e));var r=n.getAttribute("matchType");r&&t&&(t.matchType=r)},Address:function(n,t){var e=n.getAttribute("countryCode");t&&e&&(t.type=e),WD(n,t)},freeFormAddress:function(n,t){t&&t.hasOwnProperty("placeAttributes")&&(t.placeAttributes.freeform=nS(n))},Building:function(n,t){var e=n.getAttribute("number");t&&t.hasOwnProperty("placeAttributes")&&(e?t.placeAttributes.number=e:n.getAttribute("buildingName")?t.placeAttributes.number=n.getAttribute("buildingName"):n.getAttribute("subdivision")&&(t.placeAttributes.number=n.getAttribute("subdivision")))},Street:function(n,t){t&&t.hasOwnProperty("placeAttributes")&&("StreetAddress"===t.type?t.placeAttributes.street=nS(n):"CadastralParcel"===t.type&&(t.placeAttributes.cadastralParcel=nS(n)))},Place:function(n,t){var e=n.getAttribute("type"),r=nS(n);if(t&&t.hasOwnProperty("placeAttributes"))if("Municipality"===e)t.placeAttributes.municipality=r;else if("Bbox"===e){var i=r.split(";");4===i.length&&(t.placeAttributes.bbox={left:parseFloat(i[0]),right:parseFloat(i[2]),top:parseFloat(i[1]),bottom:parseFloat(i[3])})}else"Commune"===e?t.placeAttributes.commune=r:"Departement"===e?t.placeAttributes.department=r:"INSEE"===e?t.placeAttributes.insee=r:"Qualite"===e?t.placeAttributes.quality=r:"Territoire"===e?t.placeAttributes.territory=r:"ID"===e?t.placeAttributes.ID=r:"ID_TR"===e?t.placeAttributes.IDTR=r:"Importance"===e?t.placeAttributes.importance=parseInt(r,10):"Nature"===e?t.placeAttributes.nature=r:"Numero"===e?t.placeAttributes.number=r:"Feuille"===e?t.placeAttributes.sheet=r:"Section"===e?t.placeAttributes.section=r:"CommuneAbsorbee"===e?t.placeAttributes.absorbedCity=r:"Arrondissement"===e?r&&(t.placeAttributes.arrondissement=r):"Type"===e?t.placeAttributes.origin=r:"Prefecture"===e?t.placeAttributes.prefecture=r:"InseeRegion"===e?t.placeAttributes.inseeRegion=r:"InseeDepartment"===e&&(t.placeAttributes.inseeDepartment=r)},PostalCode:function(n,t){t&&t.hasOwnProperty("placeAttributes")&&(t.placeAttributes.postalCode=nS(n))},Error:function(n){var t=n.getAttribute("message"),e=n.getAttribute("errorCode"),r=ln.getMessage("SERVICE_RESPONSE_EXCEPTION","("+e+") : "+t);throw new pn({message:r,type:pn.TYPE_SRVERR})}},gml:{pos:function(n,t){var e=nS(n);t&&e&&(t.position={x:parseFloat(e.split(" ")[0]),y:parseFloat(e.split(" ")[1])})}},ExceptionReport:function(n){var t={};if(n.hasChildNodes())for(var r,e=n.childNodes,i=0;i<e.length;i++)"Exception"===(r=e[i]).nodeName&&(t.exceptionReport=Ka.READERS.Exception(r));return t},Exception:function(n){var t={},e=n.getAttribute("exceptionCode");e&&(t.exceptionCode=e);var r=n.firstChild;return r&&3===r.nodeType&&(t.exception=r.nodeValue),t}},Ka.read=function(n){if("XLS"===n.nodeName){var t=n.prefix;return t||(t=Ka.DEFAULTPREFIX),Ka.READERS[t][n.nodeName](n)}if("ExceptionReport"===n.nodeName)return Ka.READERS[n.nodeName](n);var i=ln.getMessage("SERVICE_RESPONSE_ANALYSE",n.nodeName);throw new pn({message:i,type:pn.TYPE_UNKERR,status:200})};const cH=Ka,hH_build=function(n){var t=null;if(n.response){if(n.rawResponse)t=n.response;else{try{var e=new tS({reader:cH});if("string"==typeof n.response?e.setXMLString(n.response):e.setXMLDoc(n.response),!(t=e.parse()))throw new Error("L'analyse de la r\xe9ponse du service !?")}catch(i){var r=i.message;return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_ANALYSE",r+="string"==typeof n.response?"('"+n.response+"')":"('"+n.response.documentElement.innerHTML+"')"),type:pn.TYPE_UNKERR,status:-1}))}if(t.exceptionReport)return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:pn.TYPE_SRVERR,status:200}))}n.onSuccess.call(n.scope,t)}else n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_EMPTY"),type:pn.TYPE_SRVERR,status:-1}))};function DE(n){if(!(this instanceof DE))throw new TypeError(ln.getMessage("CLASS_CONSTRUCTOR","Geocode"));if(this.CLASSNAME="Geocode",qc.apply(this,arguments),this.logger=Xr_getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]"),!n.location)throw new Error(ln.getMessage("PARAM_MISSING","location"));if("object"==typeof n.location&&0===Object.keys(n.location).length)throw new Error(ln.getMessage("PARAM_EMPTY","location"));if("string"==typeof n.location&&0===n.location.length)throw new Error(ln.getMessage("PARAM_EMPTY","location"));this.options.location=n.location,(!n.filterOptions||"object"!=typeof n.filterOptions)&&(this.options.filterOptions=n.filterOptions={type:["StreetAddress"]}),0===Object.keys(n.filterOptions).length&&(this.options.filterOptions={type:["StreetAddress"]});for(var t=Object.keys(n.filterOptions),e=0;e<t.length;e++){var r=t[e],i=["department","number","postalCode","insee","importance","ID","IDTR","absorbedCity","sheet","section","inseeRegion","inseeDepartment"];-1!==i.indexOf(r)&&"string"!=typeof n.filterOptions[r]&&(n.filterOptions[r]=n.filterOptions[r].toString()),n.filterOptions[r]||delete this.options.filterOptions[r]}this.options.filterOptions.type=n.filterOptions.type||["StreetAddress"],this.options.maximumResponses=n.maximumResponses||25,this.options.returnFreeForm=n.returnFreeForm||!1,this.options.srs=n.srs||"EPSG:4326",this.options.outputFormat=this.options.rawResponse?"":"xml"}(DE.prototype=Object.create(qc.prototype,{})).constructor=DE,DE.prototype.buildRequest=function(n,t){this.request=aH_build({httpMethod:this.options.httpMethod,location:this.options.location,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions,srs:this.options.srs,maximumResponses:this.options.maximumResponses}),this.request?t.call(this,this.request):n.call(this,new pn(ln.getMessage("SERVICE_REQUEST_BUILD")))},DE.prototype.analyzeResponse=function(n,t){this.response?hH_build({response:this.response,rawResponse:this.options.rawResponse,onError:n,onSuccess:t,scope:this}):n.call(this,new pn(ln.getMessage("SERVICE_RESPONSE_EMPTY")))};const fH=DE,gH_build=function(n){var t=Xr_getLogger("ReverseGeocodeRequestFactory");t.trace(["ReverseGeocodeRequestFactory::build()"]);var e=n||{},r=null,i=new xj({position:e.position,returnFreeForm:e.returnFreeForm,filterOptions:e.filterOptions}),o=new GG({srsName:e.srs,maximumResponses:e.maximumResponses});return o.namespace=!0,o.setService(i),r=o.build(),"GET"===e.httpMethod&&(r="qxml="+encodeURIComponent(r).replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\./g,"%2E").replace(/!/g,"%21").replace(/~/g,"%7E").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")),t.trace(r),r};function jP(){if(!(this instanceof jP))throw new TypeError("ReverseGeocodedLocation constructor cannot be called as a function.");GP.apply(this,arguments),this.CLASSNAME="ReverseGeocodedLocation",this.searchCenterDistance=null}(jP.prototype=Object.create(GP.prototype)).constructor=jP;const Pj=jP;var Za={};function YD(n,t){if(n.hasChildNodes())for(var r,i,o,e=n.childNodes,s=0;s<e.length;s++)1===(r=e[s]).nodeType&&(Za.READERS[o=r.prefix||Za.DEFAULTPREFIX][i=r.localName||r.baseName||r.nodeName]?(0,Za.READERS[o][i])(r,t):YD(r,t))}function rS(n){var t,e="";return n.hasChildNodes()&&3===(t=n.firstChild).nodeType&&(e=t.nodeValue),e}Za.VERSION="1.2",Za.NAMESPACES={xmlns:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xls:"http://www.opengis.net/xls",xlsext:"http://www.opengis.net/xlsext",xsi:"http://www.w3.org/2001/XMLSchema-instance"},Za.SCHEMALOCATION="http://wxs.ign.fr/schemas/olsAll.xsd",Za.DEFAULTPREFIX="xls",Za.READERS={xls:{XLS:function(n){var t=new jG;return function(n){if(n.attributes.length>0){var t=function(n){if(n.attributes.length>0){for(var t={},e=n.attributes,r=0;r<e.length;r++){var i=e[r];t[i.nodeName]=i.nodeValue}return t}}(n);for(var e in t)if(t.hasOwnProperty(e)){if("version"===e&&t.version!==Za.VERSION)return void console.log("[ReverseGeocodeResponseReader] geocode version is not the expected one : there may be errors in parsing");if("xmlns"===e){if(t[e]!==Za.NAMESPACES[Za.DEFAULTPREFIX])return void console.log("[ReverseGeocodeResponseReader] geocode response default namespace is not the expected one");continue}var r=e.split(":")[0],i=e.split(":")[1];if("xmlns"===r&&i&&Za.NAMESPACES[i]&&Za.NAMESPACES[i]!==t[e])return void console.log("[ReverseGeocodeResponseReader] geocode response "+e+" namespace is not the expected one");if("schemaLocation"===i&&Za.SCHEMALOCATION!==t[e])return void console.log("[ReverseGeocodeResponseReader] geocode response schema location is not the expected one")}}}(n),YD(n,t),t},ReverseGeocodedLocation:function(n,t){var e=new Pj;YD(n,e),t&&Array.isArray(t.locations)&&t.locations.push(e)},Address:function(n,t){var e=n.getAttribute("countryCode");t&&e&&(t.type=e),YD(n,t)},Building:function(n,t){var e=n.getAttribute("number");t&&t.hasOwnProperty("placeAttributes")&&(e?t.placeAttributes.number=e:n.getAttribute("buildingName")?t.placeAttributes.number=n.getAttribute("buildingName"):n.getAttribute("subdivision")&&(t.placeAttributes.number=n.getAttribute("subdivision")))},Street:function(n,t){"StreetAddress"===t.type?t.placeAttributes.street=rS(n):"CadastralParcel"===t.type&&(t.placeAttributes.cadastralParcel=rS(n))},Place:function(n,t){var e=n.getAttribute("type"),r=rS(n);if(t&&t.hasOwnProperty("placeAttributes"))if("Municipality"===e)t.placeAttributes.municipality=r;else if("Bbox"===e){var i=r.split(";");4===i.length&&(t.placeAttributes.bbox={left:parseFloat(i[0]),right:parseFloat(i[2]),top:parseFloat(i[1]),bottom:parseFloat(i[3])})}else"Commune"===e?t.placeAttributes.commune=r:"Departement"===e?t.placeAttributes.department=r:"INSEE"===e?t.placeAttributes.insee=r:"Qualite"===e?t.placeAttributes.quality=r:"Territoire"===e?t.placeAttributes.territory=r:"ID"===e?t.placeAttributes.ID=r:"ID_TR"===e?t.placeAttributes.IDTR=r:"Importance"===e?t.placeAttributes.importance=parseInt(r,10):"Nature"===e?t.placeAttributes.nature=r:"Numero"===e?t.placeAttributes.number=r:"Feuille"===e?t.placeAttributes.sheet=r:"Section"===e?t.placeAttributes.section=r:"CommuneAbsorbee"===e?t.placeAttributes.absorbedCity=r:"Arrondissement"===e?r&&(t.placeAttributes.arrondissement=r):"Type"===e?t.placeAttributes.origin=r:"Prefecture"===e?t.placeAttributes.prefecture=r:"InseeRegion"===e?t.placeAttributes.inseeRegion=r:"InseeDepartment"===e&&(t.placeAttributes.inseeDepartment=r)},PostalCode:function(n,t){t&&t.hasOwnProperty("placeAttributes")&&(t.placeAttributes.postalCode=rS(n))},SearchCentreDistance:function(n,t){t&&(t.searchCenterDistance=parseFloat(n.getAttribute("value")))},Error:function(n){var t=n.getAttribute("message"),e=n.getAttribute("errorCode"),r=ln.getMessage("SERVICE_RESPONSE_EXCEPTION","("+e+") : "+t);throw new pn({message:r,type:pn.TYPE_SRVERR})}},gml:{pos:function(n,t){var e=rS(n);t&&e&&(t.position={x:parseFloat(e.split(" ")[0]),y:parseFloat(e.split(" ")[1])})}},xlsext:{ExtendedGeocodeMatchCode:function(n,t){t&&(t.matchType=rS(n))}},ExceptionReport:function(n){var t={};if(n.hasChildNodes())for(var r,e=n.childNodes,i=0;i<e.length;i++)"Exception"===(r=e[i]).nodeName&&(t.exceptionReport=Za.READERS.Exception(r));return t},Exception:function(n){var t={},e=n.getAttribute("exceptionCode");e&&(t.exceptionCode=e);var r=n.firstChild;return r&&3===r.nodeType&&(t.exception=r.nodeValue),t}},Za.read=function(n){if("XLS"===n.nodeName){var t=n.prefix;return t||(t=Za.DEFAULTPREFIX),Za.READERS[t][n.nodeName](n)}if("ExceptionReport"===n.nodeName)return Za.READERS[n.nodeName](n);throw new Error("Erreur lors de la lecture de la r\xe9ponse : elle n'est pas au format attendu.")};const yH=Za,EH_build=function(n){var t=null;if(n.response){if(n.rawResponse)t=n.response;else{try{var e=new tS({reader:yH});if("string"==typeof n.response?e.setXMLString(n.response):e.setXMLDoc(n.response),!(t=e.parse()))throw new Error("L'analyse de la r\xe9ponse du service !?")}catch(s){return s.status=200,void n.onError.call(n.scope,s)}if(t.exceptionReport)return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:pn.TYPE_SRVERR,status:200}));var r,i;if(n.scope&&n.scope.options&&n.scope.options.srs&&"EPSG:4326"!==n.scope.options.srs&&t.locations)for(var o=0;o<t.locations.length;o++)(r=t.locations[o])&&(i=r.position)&&(r.position={x:i.y,y:i.x})}n.onSuccess.call(n.scope,t)}else n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_EMPTY"),type:pn.TYPE_SRVERR,status:-1}))};function Em(n){if(!(this instanceof Em))throw new TypeError(ln.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));if(this.CLASSNAME="ReverseGeocode",qc.apply(this,arguments),this.logger=Xr_getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]"),!n.position)throw new Error(ln.getMessage("PARAM_MISSING","position"));if(null===n.position.x)throw new Error(ln.getMessage("PARAM_MISSING","position.x"));if(null===n.position.y)throw new Error(ln.getMessage("PARAM_MISSING","position.y"));this.options.position=n.position,(!n.filterOptions||"object"!=typeof n.filterOptions)&&(this.options.filterOptions=n.filterOptions={type:["StreetAddress"]}),0===Object.keys(n.filterOptions).length&&(this.options.filterOptions={type:["StreetAddress"]});for(var t=Object.keys(n.filterOptions),e=0;e<t.length;e++){var r=t[e];(!n.filterOptions[r]||0===Object.keys(n.filterOptions[r]).length)&&delete this.options.filterOptions[r]}if(this.options.filterOptions.type=n.filterOptions.type||["StreetAddress"],!Array.isArray(this.options.filterOptions.type))throw new Error(ln.getMessage("PARAM_TYPE","filterOptions.type"));if(this.options.maximumResponses=n.maximumResponses||25,this.options.returnFreeForm=n.returnFreeForm||!1,this.options.srs=n.srs||"CRS:84",-1===Em.geoEPSG.indexOf(this.options.srs)){if(this.options.position={x:this.options.position.y,y:this.options.position.x},this.options.filterOptions&&this.options.filterOptions.circle){var i=this.options.filterOptions.circle;this.options.filterOptions.circle={x:i.y,y:i.x,radius:i.radius}}if(this.options.filterOptions&&this.options.filterOptions.polygon){var o=this.options.filterOptions.polygon;for(e=0;e<o.length;e++){var s=o[e];this.options.filterOptions.polygon[e]={x:s.y,y:s.x}}}}this.options.outputFormat=this.options.rawResponse?"":"xml"}(Em.prototype=Object.create(qc.prototype,{})).constructor=Em,Em.prototype.buildRequest=function(n,t){this.request=gH_build({httpMethod:this.options.httpMethod,position:this.options.position,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions,srs:"EPSG:4326",maximumResponses:this.options.maximumResponses}),this.request?t.call(this,this.request):n.call(this,new pn(ln.getMessage("SERVICE_REQUEST_BUILD")))},Em.prototype.analyzeResponse=function(n,t){this.response?EH_build({response:this.response,rawResponse:this.options.rawResponse,onError:n,onSuccess:t,scope:this}):n.call(this,new pn(ln.getMessage("SERVICE_RESPONSE_EMPTY")))},Em.geoEPSG=["EPSG:4326"];const bH=Em;function qD(){if(!(this instanceof qD))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}qD.prototype={constructor:qD};const Ij=qD;function XD(){if(!(this instanceof XD))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}XD.prototype={constructor:XD};const Aj=XD,CH_build=function(n){var t=Xr_getLogger("AutoCompleteResponseFactory");t.trace(["AutoCompleteResponseFactory::build()"]);var e=null;if(n.response){if(n.rawResponse)t.trace("analyze response : raw"),e=n.response;else{var r;if(r="string"==typeof n.response?JSON.parse(n.response):n.response){if(r.error)return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_EXCEPTION",r.error.description),status:r.error.code,type:pn.TYPE_SRVERR}));if(e=new Ij,!r.results||!Array.isArray(r.results))return void n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_FORMAT_3")));for(var i=null,o=0;o<r.results.length;o++){var s=r.results[o];i=new Aj,s&&("StreetAddress"===s.country?(i.street=s.street,i.type="StreetAddress"):"PositionOfInterest"===s.country&&(i.poi=s.street,i.kind=s.kind,i.type="PositionOfInterest"),i.position&&(i.position.x=s.x,i.position.y=s.y),i.commune=s.city,i.fullText=s.fulltext,i.postalCode=s.zipcode,i.classification=s.classification),e.suggestedLocations.push(i)}if(!e.suggestedLocations.length)return void n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_FORMAT_3")))}if(!e)return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:pn.TYPE_UNKERR,status:-1}));if(e.exceptionReport)return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:pn.TYPE_SRVERR,status:200}))}n.onSuccess.call(n.scope,e)}else n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_EMPTY")))};function LE(n){if(!(this instanceof LE))throw new TypeError(ln.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));if(this.CLASSNAME="AutoComplete",qc.apply(this,arguments),this.logger=Xr_getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]"),!n.text)throw new Error(ln.getMessage("PARAM_MISSING","text"));this.options.text=n.text,(!n.filterOptions||"object"!=typeof n.filterOptions)&&(this.options.filterOptions=n.filterOptions={territory:[],type:["StreetAddress"]}),0===Object.keys(n.filterOptions).length&&(this.options.filterOptions={territory:[],type:["StreetAddress"]}),this.options.filterOptions.type=n.filterOptions.type||["StreetAddress"],this.options.filterOptions.territory=n.filterOptions.territory||[],this.options.maximumResponses=n.maximumResponses||10,"XHR"===this.options.protocol&&"POST"===this.options.httpMethod&&(this.logger.warn("Le service ne g\xe9re pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}(LE.prototype=Object.create(qc.prototype,{})).constructor=LE,LE.prototype.buildRequest=function(n,t){var e="";this.options.filterOptions.territory&&(e=this.options.filterOptions.territory.join(";"));var r="";this.options.filterOptions.type&&(r=this.options.filterOptions.type.join(",")),this.request=Up.normalyzeParameters({text:encodeURIComponent(this.options.text),type:r,terr:e,maximumResponses:this.options.maximumResponses}),this.request?t.call(this,this.request):n.call(this,new pn(ln.getMessage("SERVICE_REQUEST_BUILD")))},LE.prototype.analyzeResponse=function(n,t){this.response?CH_build({response:this.response,rawResponse:this.options.rawResponse,onSuccess:t,onError:n,scope:this}):n.call(this,new pn(ln.getMessage("SERVICE_RESPONSE_EMPTY")))};const SH=LE;function KD(n){if(this.logger=Xr_getLogger("RoutePlan"),this.logger.trace("[Constructeur RoutePlan ()]"),!(this instanceof KD))throw new TypeError("RoutePlan constructor cannot be called as a function.");if(this.options=n||{},!this.options.startPoint)throw new Error("l'option 'startPoint' n'est pas renseign\xe9e !");if(!this.options.endPoint)throw new Error("l'option 'endPoint' n'est pas renseign\xe9e !")}KD.prototype={constructor:KD,requestString:null,template:{routePlan:"<RoutePlan>__ROUTEPREFERENCE____GRAPH____WAYPOINTLIST____AVOIDLIST__</RoutePlan>",routePreference:"<RoutePreference>__VALUEROUTEPREFERENCE__</RoutePreference>",graph:'<xlsext:graphName xmlns:xlsext="http://www.opengis.net/xlsext" name="__VALUEGRAPH__"/>',wayPointList:{container:"<WayPointList>__STARTPOINT____VIAPOINT____ENDPOINT__</WayPointList>",point:'<Position><gml:Point xmlns:gml="http://www.opengis.net/gml"><gml:pos>__X__ __Y__</gml:pos></gml:Point></Position>',startPoint:"<StartPoint>__POINT__</StartPoint>",endPoint:"<EndPoint>__POINT__</EndPoint>",viaPoint:"<ViaPoint>__POINT__</ViaPoint>"},avoidList:{container:"<AvoidList>__AVOIDFEATURE__</AvoidList>",avoidFeature:"<AvoidFeature>__VALUEAVOIDFEATURE__</AvoidFeature>"}},toString:function(){var n="";if(n=this.template.routePlan,this.options.routePreference){var t=this.template.routePreference;t=t.replace(/__VALUEROUTEPREFERENCE__/,this.options.routePreference),n=n.replace(/__ROUTEPREFERENCE__/g,t)}if(n=n.replace(/__ROUTEPREFERENCE__/g,""),this.options.avoidFeature){for(var e=this.template.avoidList.container,r=[],i=0;i<this.options.avoidFeature.length;i++){var o=this.template.avoidList.avoidFeature;o=o.replace(/__VALUEAVOIDFEATURE__/,this.options.avoidFeature[i]),r.push(o)}e=e.replace(/__AVOIDFEATURE__/,r.join("\n")),n=n.replace(/__AVOIDLIST__/g,e)}if(n=n.replace(/__AVOIDLIST__/g,""),this.options.graph){var s=this.template.graph;s=s.replace(/__VALUEGRAPH__/,this.options.graph),n=n.replace(/__GRAPH__/g,s)}n=n.replace(/__GRAPH__/g,"");var a=this.template.wayPointList.container,c="";if(c=(c=(c=this.template.wayPointList.point).replace(/__X__/,this.options.startPoint.x)).replace(/__Y__/,this.options.startPoint.y),a=a.replace(/__STARTPOINT__/,this.template.wayPointList.startPoint.replace(/__POINT__/,c)),c=(c=(c=this.template.wayPointList.point).replace(/__X__/,this.options.endPoint.x)).replace(/__Y__/,this.options.endPoint.y),a=a.replace(/__ENDPOINT__/,this.template.wayPointList.endPoint.replace(/__POINT__/,c)),this.options.viaPoint){for(var h=[],p=0;p<this.options.viaPoint.length;p++){var m=this.options.viaPoint[p];c=(c=(c=this.template.wayPointList.point).replace(/__X__/,m.x)).replace(/__Y__/,m.y),h.push(c)}a=a.replace(/__VIAPOINT__/,this.template.wayPointList.viaPoint.replace(/__POINT__/,h.join("\n")))}else a=a.replace(/__VIAPOINT__/,"");return n=n.replace(/__WAYPOINTLIST__/g,a),this.requestString=n,this.requestString}};const Mj=KD;function ZD(n){if(this.logger=Xr_getLogger(),this.logger.trace("[Constructeur DetermineRouteRequest ()]"),!(this instanceof ZD))throw new TypeError("DetermineRouteRequest constructor cannot be called as a function.");for(var t in this.options=n||{},n)n.hasOwnProperty(t)&&(this.options[t]=n[t]);this.CLASSNAME="DetermineRouteRequest"}ZD.prototype={strRequest:null,oRoutePlan:null,template:{determineRouteRequest:'<DetermineRouteRequest distanceUnit="__DISTANCEUNIT__">__ROUTEPLAN____ROUTEINSTRUCTIONREQUEST____ROUTEGEOMETRYREQUEST____ROUTEMAPREQUEST__</DetermineRouteRequest>',routeInstructionRequest:'<RouteInstructionsRequest provideGeometry="__PROVIDEGEOMETRY__" provideBoundingBox="__PROVIDEBBOX__" />',routeGeometryRequest:"<RouteGeometryRequest />",routeMapRequest:""},addRoute:function(n){n instanceof Mj&&(this.oRoutePlan=n)},constructor:ZD,toString:function(){var n="";if(!(n=(n=this.template.determineRouteRequest).replace(/__DISTANCEUNIT__/g,this.options.distanceUnit||"KM"),this.oRoutePlan||(this.oRoutePlan=new Mj(this.options.route),this.oRoutePlan)))throw new Error("La construction du calcul d'initineraire n'est pas correctement definie !?");n=n.replace(/__ROUTEPLAN__/g,this.oRoutePlan.toString());var e=this.template.routeInstructionRequest;return e=(e=e.replace(/__PROVIDEGEOMETRY__/g,this.options.provideGeometry||!1)).replace(/__PROVIDEBBOX__/g,this.options.provideBoundingBox||!1),n=(n=(n=n.replace(/__ROUTEINSTRUCTIONREQUEST__/g,e)).replace(/__ROUTEGEOMETRYREQUEST__/g,this.template.routeGeometryRequest)).replace(/__ROUTEMAPREQUEST__/g,this.template.routeMapRequest),this.strRequest=n,this.strRequest}};const xH=ZD;var TH=ee(3758),PH=ee.n(TH);function Dv(n){if(this.logger=Xr_getLogger(),this.logger.trace("[Constructeur RouteService ()]"),!(this instanceof Dv))throw new TypeError("RouteService constructor cannot be called as a function.");this.CLASSNAME="RouteService",this.CLASSTYPE="RouteRequest",MP.apply(this,arguments)}(Dv.prototype=Object.create(MP.prototype,{})).constructor=Dv,Dv.prototype.addRequest=function(n){if("DetermineRouteRequest"!==n.CLASSNAME)throw new Error("Ce n'est pas un objet de type 'Route Request' !?");this.oRequest=n},Dv.prototype.addFilter=function(n){n instanceof PH()&&(this.oFilter=n)},Dv.prototype.toString=function(){if(!this.oRequest){if(!this.options)throw new Error("Les options ne sont pas renseign\xe9es, impossible de construire la requ\xeate !");"RouteRequest"===this.CLASSTYPE&&(this.oRequest=new xH({distanceUnit:this.options.distanceUnit||null,provideGeometry:this.options.provideGeometry||null,provideBoundingBox:this.options.provideBoundingBox||null,route:{routePreference:this.options.routePreference||null,startPoint:this.options.startPoint,viaPoint:this.options.viaPoint||null,endPoint:this.options.endPoint,avoidFeature:this.options.avoidFeature||null,graph:this.options.graph||null,expectedStartTime:this.options.expectedStartTime||null}}),this.oFilter&&this.oRequest.addFilter(this.oFilter))}if(!this.oRequest)throw new Error("Type de requ\xeate indefini !");return this.strRequest=this.oRequest.toString(),this.strRequest};const IH=Dv,MH_build=function(n){Xr_getLogger("RouteRequestOLS").trace(["RouteRequestOLS::build()"]);var e=null,i=new IH({startPoint:n.startPoint,endPoint:n.endPoint,viaPoint:n.viaPoints,provideBoundingBox:n.provideBbox,avoidFeature:n.exclusions,expectedStartTime:n.expectedStartTime,distanceUnit:n.distanceUnit,graph:n.graph,provideGeometry:n.geometryInInstructions,routePreference:n.routePreference}),o=new GG({srsName:n.srs,maximumResponses:n.maximumResponses});return o.namespace=!0,o.setService(i),e=o.build(),"GET"===n.httpMethod&&(e="qxml="+encodeURIComponent(e).replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\./g,"%2E").replace(/!/g,"%21").replace(/~/g,"%7E").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")),e};function iS(n){if(!(this instanceof iS))throw new TypeError("RouteParamREST constructor cannot be called as a function.");if(this.logger=Xr_getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=n||{},this.origin=this.options.startPoint.x+","+this.options.startPoint.y,this.destination=this.options.endPoint.x+","+this.options.endPoint.y,this.waypoints=this.options.viaPoints||null,this.startDateTime=this.options.expectedStartTime||null,this.graphName=this.options.graph,this.srs=this.options.srs,this.exclusions=this.options.exclusions,this.method="TIME",this.options.routePreference)switch(this.options.routePreference){case"fastest":this.method="TIME";break;case"shortest":this.method="DISTANCE";break;default:this.logger.warn("Par defaut, on prend l'itin\xe9raire le plus rapide !"),this.method="TIME"}this.format=this.options.geometryInInstructions?"STANDARDEXT":"STANDARD",this.tolerance=10,this.profileId=null,this.profileName=null}iS.CLASSNAME="RouteParamREST",(iS.prototype={constructor:iS,getWaypoints:function(){if(this.waypoints){for(var n=[],t=0;t<this.waypoints.length;t++){var e=this.waypoints[t];n.push(e.x+","+e.y)}return n.join(";")}},getExclusions:function(){return this.exclusions.join(";")}}).getParams=function(){var n=[];return n.push({k:"origin",v:this.origin}),n.push({k:"destination",v:this.destination}),n.push({k:"method",v:this.method}),this.waypoints&&n.push({k:"waypoints",v:this.getWaypoints()}),this.startDateTime&&n.push({k:"startDateTime",v:this.startDateTime}),this.graphName&&n.push({k:"graphName",v:this.graphName}),this.exclusions&&n.push({k:"exclusions",v:this.getExclusions()}),this.srs&&n.push({k:"srs",v:this.srs}),this.format&&n.push({k:"format",v:this.format}),n};const RH=iS;function JD(n){if(this.logger=Xr_getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof JD))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!n)throw new Error(ln.getMessage("PARAM_EMPTY","options"));this.settings=n}JD.prototype={requestString:null,constructor:JD,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var t=new RH(this.settings).getParams(),e="",r=0;r<t.length;r++){var i=t[r];e&&(e+="&"),e+=i.k+"="+i.v}return this.logger.trace(e),this.requestString=e,this.requestString}};const OH=JD,LH_build=function(n){Xr_getLogger("RouteRequestFactory").trace(["RouteRequestFactory::build()"]);var e=null,r=n||{},i=null!==n.onError&&"function"==typeof n.onError,o=null;switch(n.api){case"REST":var s=new OH(r);if(!s.processRequestString()){if(o="Error process request (rest) !",i)return void n.onError.call(n.scope,new pn(o));throw new Error(o)}e=s.requestString;break;case"OLS":if(!(e=MH_build(r))){if(o="Error process request (ols) !",i)return void n.onError.call(n.scope,new pn(o));throw new Error(o)}break;default:if(o="Type of API is not supported by service (REST or OLS) !",i)return void n.onError.call(n.scope,new pn(o));throw new Error(o)}return e},QD={toJson:function(n,t,e){var r=Xr_getLogger(),i=null;try{if(!n)throw new Error("La chaine WKT n'est pas renseign\xe9e !");var s;if(t||(t=function(a){console.log(a)}),e||(e=function(a){console.log(a)}),n=n.replace(/(-?\d+\.?[0-9]*)\s(-?\d+\.?[0-9]+)/g,s="[$1,$2]"),/^(\w+)/.exec(n),"POLYGON"===RegExp.$1?(s='{"type" : "Polygon",',n=(n=(n=(n=(n=n.replace(RegExp.$1,s)).replace(/(\({2}?)/,s='"coordinates" : [[')).replace(/(\){2}?)/,s="]]}")).replace(/(\()/g,s="[")).replace(/(\))/g,s="]")):"LINESTRING"===RegExp.$1&&(s='{"type" : "LineString",',n=(n=(n=n.replace(RegExp.$1,s)).replace(/(\(\(?)/,s='"coordinates" : [')).replace(/(\)\)?)/,s="]}")),r.trace(n),!(i=JSON.parse(n)))throw new Error("Le JSON est vide !");if(!i.type)throw new Error("Le type de geometrie n'est pas connu !");if(!i.coordinates)throw new Error("La liste des points est vide !");t.call(this,i)}catch(a){if("SyntaxError"===a.name)return void e.call(this,"Erreur de parsing JSON !");e.call(this,a)}}};function $D(){if(!(this instanceof $D))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}$D.prototype={constructor:$D};const UG=$D;function eL(){if(!(this instanceof eL))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}eL.prototype={constructor:eL};const VG=eL;var oS={};function bm(n){var t,e="";return n.hasChildNodes()&&(t=n.firstChild)&&3===t.nodeType&&(e=t.nodeValue),e}function Rj(n,t){if(n.hasChildNodes())for(var r,i,e=n.childNodes,o=0;o<e.length;o++)1===(r=e[o]).nodeType&&(oS.READERS[i=r.localName||r.baseName||r.nodeName]?(0,oS.READERS[i])(r,t):Rj(r,t))}oS.READERS={routeResult:function(n){var t=new UG;if(Rj(n,t),"error"===t.status){var e=ln.getMessage("SERVICE_RESPONSE_EXCEPTION",t.message);throw new pn({message:e,type:pn.TYPE_SRVERR})}return t},status:function(n,t){var e=bm(n);("ERROR"===e||"error"===e)&&t&&(t.status="error")},message:function(n,t){t&&(t.message=bm(n))},distance:function(n,t){t&&(t.totalDistance=bm(n))},durationSeconds:function(n,t){t&&(t.totalTime=parseFloat(bm(n)))},bounds:function(n,t){if(t&&t.bbox){var e=bm(n).split(/[,;]/);t.bbox.left=parseFloat(e[0]),t.bbox.bottom=parseFloat(e[1]),t.bbox.right=parseFloat(e[2]),t.bbox.top=parseFloat(e[3])}},geometryWkt:function(n,t){t&&QD.toJson(n.innerHTML,function(o){t.routeGeometry=o},function(){var o=ln.getMessage("PARAM_FORMAT",["geometryWkt"]);throw new Error(o)})},step:function(n,t){var r,e=new VG;if(n.hasChildNodes)for(var o,s,i=n.childNodes,a=0;a<i.length;a++)1===(o=i[a]).nodeType&&("durationSeconds"===(s=o.localName||o.baseName||o.nodeName)?e.duration=bm(o):"distance"===s?e.distance=bm(o):"navInstruction"===s?e.code=bm(o):"name"===s&&(r=bm(o)));if(e.code)switch(e.code){case"F":e.instruction="Valeur non renseign\xe9e"!==r?"Tout droit "+r:"Continuer tout droit ";break;case"B":e.instruction="Demi-tour "+r;break;case"L":e.instruction="Tourner \xe0 gauche "+r;break;case"R":e.instruction="Tourner \xe0 droite "+r;break;case"BL":e.instruction="Tourner tr\xe8s \xe0 gauche "+r;break;case"BR":e.instruction="Tourner tr\xe8s \xe0 droite "+r;break;case"FL":e.instruction="Tourner l\xe9g\xe8rement \xe0 gauche "+r;break;case"FR":e.instruction="Tourner l\xe9g\xe8rement \xe0 droite "+r;break;case"round_about_entry":e.instruction="Entr\xe9e rond-point "+r;break;case"round_about_exit":e.instruction="Sortie rond-point "+r;break;case null:e.instruction="Prendre "+r;break;default:e.instruction="?"+e.code+"? "+r}Array.isArray(t.routeInstructions)&&t.routeInstructions.push(e)}},oS.read=function(n){if("routeResult"===n.nodeName)return oS.READERS.routeResult(n);throw new Error("Erreur lors de la lecture de la r\xe9ponse : elle n'est pas au format attendu.")};const NH=oS;const FH={READERS:{},read:function(n){Xr_getLogger("RouteResponseOLSReader").error("not yet implemented !")}},BH_build=function(n){var t=Xr_getLogger("RouteResponseFactory");t.trace("RouteResponseFactory::build()");var e=null;if(n.response){if(n.rawResponse)t.trace("analyze response : raw"),e=n.response;else{switch(n.outputFormat){case"xml":t.trace("analyze response : xml");var r="REST"===n.api?NH:FH;try{var i=new tS({reader:r});if("string"==typeof n.response?i.setXMLString(n.response):i.setXMLDoc(n.response),!(e=i.parse()))throw new pn(ln.getMessage("SERVICE_RESPONSE_FORMAT","xml"))}catch(P){return void n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_ANALYSE",n.response)))}break;case"json":t.trace("analyze response : json");var o=null;if((o="string"==typeof n.response?JSON.parse(n.response):n.response)&&o.message)return void n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_EXCEPTION",o.message)));if(o){var s=[],a=[],c=[];if((e=new UG).hasOwnProperty("totalTime")&&(e.totalTime=parseFloat(o.durationSeconds)),e.hasOwnProperty("totalDistance")&&(e.totalDistance="m"===n.distanceUnit?o.distanceMeters:o.distance),e.hasOwnProperty("bbox")){var h=o.bounds.split(/[,;]/);e.bbox.left=parseFloat(h[0]),e.bbox.bottom=parseFloat(h[1]),e.bbox.right=parseFloat(h[2]),e.bbox.top=parseFloat(h[3])}if(e.hasOwnProperty("routeGeometry")){var E=o.geometryWkt||o.simplifiedWkt;if(E&&(QD.toJson(E,function(P){e.routeGeometry=P},function(P){console.log(P),n.onError.call(n.scope,new pn(ln.getMessage("PARAM_FORMAT",["geometryWkt"])))}),!e.routeGeometry))return}if(e.hasOwnProperty("routeInstructions")){var x,S=o.legs;if(Array.isArray(S)&&S.length)for(x=0;x<S.length;x++)s.push(S[x]);if(s.length)for(x=0;x<s.length;x++)a.push(s[x].steps);if(a.length)for(x=0;x<a.length;x++)c=c.concat(a[x]);c.forEach(function(P){e.routeInstructions.push(new VG),e.routeInstructions[e.routeInstructions.length-1].duration=P.durationSeconds,e.routeInstructions[e.routeInstructions.length-1].distance="m"===n.distanceUnit?P.distanceMeters:P.distance,e.routeInstructions[e.routeInstructions.length-1].code=P.navInstruction;for(var R=[],F=0;F<P.points.length;F++){var D=P.points[F].split(",");D&&R.push(D)}switch(e.routeInstructions[e.routeInstructions.length-1].geometry=0!==R.length?{coordinates:R,type:"LineString"}:null,"Valeur non renseign\xe9e"===P.name&&(P.name=""),P.navInstruction){case"F":e.routeInstructions[e.routeInstructions.length-1].instruction=P.name?"Tout droit "+P.name:"Continuer tout droit ";break;case"B":e.routeInstructions[e.routeInstructions.length-1].instruction="Demi-tour "+P.name;break;case"L":e.routeInstructions[e.routeInstructions.length-1].instruction="Tourner \xe0 gauche "+P.name;break;case"R":e.routeInstructions[e.routeInstructions.length-1].instruction="Tourner \xe0 droite "+P.name;break;case"BL":e.routeInstructions[e.routeInstructions.length-1].instruction="Tourner tr\xe8s \xe0 gauche "+P.name;break;case"BR":e.routeInstructions[e.routeInstructions.length-1].instruction="Tourner tr\xe8s \xe0 droite "+P.name;break;case"FL":e.routeInstructions[e.routeInstructions.length-1].instruction="Tourner l\xe9g\xe8rement \xe0 gauche "+P.name;break;case"FR":e.routeInstructions[e.routeInstructions.length-1].instruction="Tourner l\xe9g\xe8rement \xe0 droite "+P.name;break;case"round_about_entry":e.routeInstructions[e.routeInstructions.length-1].instruction="Entr\xe9e rond-point "+P.name;break;case"round_about_exit":e.routeInstructions[e.routeInstructions.length-1].instruction="Sortie rond-point "+P.name;break;case null:e.routeInstructions[e.routeInstructions.length-1].instruction="Prendre tout droit "+P.name;break;default:e.routeInstructions[e.routeInstructions.length-1].instruction="?"+P.navInstruction+"? "+P.name}})}}if(!e)return void n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_ANALYSE","json")));break;default:return void n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_FORMAT","json","xml")))}if(e&&e.exceptionReport)return void n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_EXCEPTION_2")))}n.onSuccess.call(n.scope,e)}else n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_EMPTY")))};function kE(n){if(!(this instanceof kE))throw new TypeError(ln.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",qc.apply(this,arguments),this.logger=Xr_getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!n.startPoint)throw new Error(ln.getMessage("PARAM_MISSING","startPoint"));if(null===n.startPoint.x)throw new Error(ln.getMessage("PARAM_MISSING","startPoint.x"));if(null===n.startPoint.y)throw new Error(ln.getMessage("PARAM_MISSING","startPoint.y"));if(!n.endPoint)throw new Error(ln.getMessage("PARAM_MISSING","endPoint"));if(null===n.endPoint.x)throw new Error(ln.getMessage("PARAM_MISSING","endPoint.x"));if(null===n.endPoint.y)throw new Error(ln.getMessage("PARAM_MISSING","endPoint.y"));if(this.options.api="string"==typeof n.api?n.api.toUpperCase():"REST",this.options.outputFormat="string"==typeof n.outputFormat?n.outputFormat.toLowerCase():"json",this.options.startPoint=n.startPoint,this.options.endPoint=n.endPoint,this.options.viaPoints=n.viaPoints||null,this.options.exclusions=n.exclusions||null,this.options.routePreference=n.routePreference||"fastest",this.options.graph=n.graph||"Voiture",this.options.geometryInInstructions=n.geometryInInstructions||!1,this.options.provideBbox=n.provideBbox||!0,this.options.distanceUnit=n.distanceUnit||"km",this.options.expectedStartTime=null,this.options.srs=n.srs||"EPSG:4326",this.options.api="REST",this.logger.warn("Surcharge option 'api' : REST (readers OLS non impl\xe9ment\xe9s)"),"XHR"===this.options.protocol&&(this.options.httpMethod="GET",this.logger.trace("Surcharge option 'HttpMethod' : "+this.options.httpMethod)),!this.options.serverUrl){var t=ME.Route.url(this.options.apiKey),e=null;switch(this.options.api){case"OLS":e=t.ols;break;case"REST":var r="route-"+this.options.outputFormat;e=t[r];break;default:throw new Error(ln.getMessage("PARAM_UNKNOWN","api"))}if(!e)throw new Error("Url by default not found !");this.options.serverUrl=e,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}var i=this.options.serverUrl.lastIndexOf(".");if(-1!==i){var o=this.options.serverUrl.substring(i+1);if(o&&o.length<5)switch(this.logger.trace("Serveur Extension URL : "+o),o.toLowerCase()){case"json":case"xml":this.options.outputFormat=o.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}(kE.prototype=Object.create(qc.prototype,{})).constructor=kE,kE.prototype.buildRequest=function(n,t){this.request=LH_build({api:this.options.api,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,exclusions:this.options.exclusions,distanceUnit:this.options.distanceUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs}),this.request?t.call(this,this.request):n.call(this,new pn(ln.getMessage("SERVICE_REQUEST_BUILD")))},kE.prototype.analyzeResponse=function(n,t){this.response?BH_build({distanceUnit:this.options.distanceUnit,response:this.response,outputFormat:this.options.outputFormat,api:this.options.api,rawResponse:this.options.rawResponse,onError:n,onSuccess:t,scope:this}):n.call(this,new pn(ln.getMessage("SERVICE_RESPONSE_EMPTY")))};const jH=kE;function sS(n){if(!(this instanceof sS))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");switch(this.logger=Xr_getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=n||{},this.id=this.options.id,this.location=this.options.position,this.srs=this.options.srs,this.graphName=this.options.graph,this.profileId=this.options.profileId||null,this.profileName=this.options.profileName||null,this.exclusions=this.options.exclusions,this.reverse=this.options.reverse,this.smoothing=this.options.smoothing,this.holes=this.options.holes,this.options.method){case"time":this.method="time",this.time=this.options.time;break;case"distance":this.method="distance",this.distance=this.options.distance;break;default:this.logger.warn("Par defaut, on calcule un isochrone !"),this.method="time"}}sS.CLASSNAME="ProcessIsoCurveParam",(sS.prototype={constructor:sS,getLocation:function(){return this.location.x+","+this.location.y},getExclusions:function(){return this.exclusions.join(";")}}).getParams=function(){var n=[];return n.push({k:"location",v:this.getLocation()}),n.push({k:"smoothing",v:this.smoothing}),n.push({k:"holes",v:this.holes}),n.push({k:"reverse",v:this.reverse}),n.push({k:"method",v:this.method}),this.time&&n.push({k:"time",v:this.time}),this.distance&&n.push({k:"distance",v:this.distance}),n.push({k:"graphName",v:this.graphName}),this.exclusions&&n.push({k:"exclusions",v:this.getExclusions()}),this.srs&&n.push({k:"srs",v:this.srs}),n};const UH=sS;function tL(n){if(this.logger=Xr_getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof tL))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!n)throw new Error(ln.getMessage("PARAM_EMPTY","options"));this.settings=n,this.mode=this.settings.httpMethod||"GET"}tL.prototype={requestString:null,constructor:tL,template:{container:'<?xml version="1.0" encoding="UTF-8"?>\n<isochroneRequest>\n__ID__\t<location>\n\t\t<x>__X__</x>\n\t\t<y>__Y__</y>\n\t</location>\n\t<srs>__SRS__</srs>\n\t<graphName>__GRAPHNAME__</graphName>\n__PROFIL____EXCLUSIONS__\t<method>__METHOD__</method>\n__TIME____DISTANCE__\t<reverse>__REVERSE__</reverse>\n\t<smoothing>__SMOOTHING__</smoothing>\n\t<holes>__HOLES__</holes>\n</isochroneRequest>',id:"\t<id>__IDVALUE__</id>\n",profil:"\t<profileId>__PROFILID__</profileId>\n\t<profileName>__PROFILNAME__</profileName>\n",exclusions:{container:"\t<exclusions>\n__EXCLUSIONFEATURE__\n\t</exclusions>\n",feature:"\t\t<exclusion>__EXCLUSIONVALUE__</exclusion>"},time:"\t<time>__TIMEVALUE__</time>\n",distance:"\t<distance>__DISTANCEVALUE__</distance>\n"},processRequestString:function(){var n="",t=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var r=new UH(this.settings).getParams();for(t=0;t<r.length;t++){var i=r[t];n&&(n+="&"),n+=i.k+"="+i.v}break;case"POST":if(this.logger.trace("Process POST Request"),n=(n=(n=(n=(n=(n=(n=(n=(n=(n=this.template.container).replace(/__ID__/g,"")).replace(/__PROFIL__/g,"")).replace(/__X__/g,this.settings.position.x)).replace(/__Y__/g,this.settings.position.y)).replace(/__GRAPHNAME__/g,this.settings.graph)).replace(/__SRS__/g,this.settings.srs)).replace(/__SMOOTHING__/g,this.settings.smoothing)).replace(/__HOLES__/g,this.settings.holes)).replace(/__REVERSE__/g,this.settings.reverse),this.settings.exclusions){var o=this.template.exclusions.container,s=[];for(t=0;t<this.settings.exclusions.length;t++){var a=this.template.exclusions.feature;a=a.replace(/__EXCLUSIONVALUE__/,this.settings.exclusions[t]),s.push(a)}o=o.replace(/__EXCLUSIONFEATURE__/,s.join("\n")),n=n.replace(/__EXCLUSIONS__/g,o)}if(n=n.replace(/__EXCLUSIONS__/g,""),this.settings.distance){var c=this.template.distance;c=c.replace(/__DISTANCEVALUE__/g,this.settings.distance),n=(n=n.replace(/__DISTANCE__/g,c)).replace(/__METHOD__/g,"distance")}if(n=n.replace(/__DISTANCE__/g,""),this.settings.time){var h=this.template.time;h=h.replace(/__TIMEVALUE__/g,this.settings.time),n=(n=n.replace(/__TIME__/g,h)).replace(/__METHOD__/g,"time")}n=n.replace(/__TIME__/g,"");break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(n),this.requestString=n,this.requestString}};const VH=tL;function nL(){if(!(this instanceof nL))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}nL.prototype={constructor:nL};const HG=nL;var Ch={};function NE(n){var t,e="";return n.hasChildNodes()&&(t=n.firstChild)&&3===t.nodeType&&(e=t.nodeValue),e}Ch.READERS={isochronResult:function(n){var t=new HG;if(n.hasChildNodes())for(var r,e=n.childNodes,i=0;i<e.length;i++)Ch.READERS[(r=e[i]).nodeName]&&Ch.READERS[r.nodeName](r,t);if("error"===t.status){var o=ln.getMessage("SERVICE_RESPONSE_EXCEPTION",t.message);throw new pn({message:o,type:pn.TYPE_SRVERR})}return t},message:function(n,t){t&&(t.message=NE(n))},status:function(n,t){var e=NE(n);("ERROR"===e||"error"===e)&&t&&(t.status="error")},id:function(n,t){t&&(t.id=NE(n))},location:function(n,t){var e=NE(n);t&&t.location&&(t.location.x=parseFloat(e.split(",")[0]),t.location.y=parseFloat(e.split(",")[1]))},srs:function(n,t){t&&(t.srs=NE(n))},distance:function(n,t){t&&(t.distance=parseFloat(NE(n)))},time:function(n,t){t&&(t.time=parseFloat(NE(n)))},wktGeometry:function(n,t){if(t){var e=n.innerHTML;t.hasOwnProperty("geometry")&&QD.toJson(e,function(o){t.geometry=o},function(){var o=ln.getMessage("PARAM_FORMAT",["wktGeometry"]);throw new Error(o)})}},serviceResult:function(n){var t={};if(n.hasChildNodes())for(var r,e=n.childNodes,i=0;i<e.length;i++)Ch.READERS[(r=e[i]).nodeName]&&Ch.READERS[r.nodeName](r,t);return t},ExceptionReport:function(n){var t={};if(n.hasChildNodes())for(var r,e=n.childNodes,i=0;i<e.length;i++)"Exception"===(r=e[i]).nodeName&&(t.exceptionReport=Ch.READERS.Exception(r));return t},Exception:function(n){var t={},e=n.getAttribute("exceptionCode");e&&(t.exceptionCode=e);var r=n.firstChild;return r&&3===r.nodeType&&(t.exception=r.nodeValue),t}},Ch.read=function(n){var t;if("isochronResult"===n.nodeName||"isochroneResult"===n.nodeName||"IsochroneResult"===n.nodeName)return Ch.READERS.isochronResult(n);if("ExceptionReport"===n.nodeName)return Ch.READERS[n.nodeName](n);if(Ch.READERS[n.nodeName]){if("error"===(t=Ch.READERS[n.nodeName](n)).status){var e=ln.getMessage("SERVICE_RESPONSE_EXCEPTION",t.message);throw new pn({message:e,type:pn.TYPE_SRVERR})}return t}throw new pn({message:ln.getMessage("SERVICE_RESPONSE_ANALYSE",n.nodeName),type:pn.TYPE_UNKERR})};const zH=Ch,WH_build=function(n){var t=Xr_getLogger("ProcessIsoCurveResponseFactory");t.trace(["ProcessIsoCurveResponseFactory::build()"]);var e=null;if(n.response){if(n.rawResponse)t.trace("analyze response : raw"),e=n.response;else{switch(n.outputFormat){case"xml":t.trace("analyze response : xml");try{var r=new tS({reader:zH});if("string"==typeof n.response?r.setXMLString(n.response):r.setXMLDoc(n.response),!(e=r.parse()))throw new Error(ln.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(p){var i=p.message;return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_EXCEPTION",i+="\n (raw response service : '"+n.response+"')"),status:200,type:pn.TYPE_SRVERR}))}break;case"json":t.trace("analyze response : json");var o=null;if(!(o="string"==typeof n.response?JSON.parse(n.response):n.response)||"OK"!==o.status&&"ok"!==o.status){if(o&&("ERROR"===o.status||"error"===o.status)){var h=o.message;return void n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_EXCEPTION",h+="\n (raw response service : '"+o+"')")))}}else{if((e=new HG).time=o.time,e.distance=o.distance,e.message=o.message,e.id=o.id,e.srs=o.srs,e.hasOwnProperty("geometry")&&(QD.toJson(o.wktGeometry,function(p){e.geometry=p},function(){n.onError.call(n.scope,new pn({message:ln.getMessage("PARAM_FORMAT","wktGeometry")}))}),!e.geometry))return void n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_ANALYSE",n.response)));var c=o.location.split(",");e.location&&(e.location.x=c[0],e.location.y=c[1])}break;default:return void n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_FORMAT","json","xml")))}if(e&&e.exceptionReport)return void n.onError.call(n.scope,new pn({message:ln.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:pn.TYPE_SRVERR,status:200}))}n.onSuccess.call(n.scope,e)}else n.onError.call(n.scope,new pn(ln.getMessage("SERVICE_RESPONSE_EMPTY")))};function FE(n){if(!(this instanceof FE))throw new TypeError(ln.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",qc.apply(this,arguments),this.logger=Xr_getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!n.position)throw new Error(ln.getMessage("PARAM_MISSING","position"));if(null===n.position.x)throw new Error(ln.getMessage("PARAM_MISSING","position.x"));if(null===n.position.y)throw new Error(ln.getMessage("PARAM_MISSING","position.y"));if(!n.time&&!n.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!n.time&&n.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),n.time&&!n.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.exclusions=n.exclusions||null,this.options.graph=n.graph||"Voiture",this.options.reverse=n.reverse||!1,this.options.smoothing=n.smoothing||!1,this.options.holes=n.holes||!1,this.options.srs=n.srs||"EPSG:4326",this.options.outputFormat="string"==typeof n.outputFormat?n.outputFormat.toLowerCase():"json",!this.options.serverUrl){var t=ME.ProcessIsoCurve.url(this.options.apiKey),e=t["iso-"+this.options.outputFormat];if(!e)throw new Error("Url by default not found !");this.options.serverUrl=e,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}var r=this.options.serverUrl.lastIndexOf(".");if(-1!==r){var i=this.options.serverUrl.substring(r+1);if(i&&i.length<5)switch(this.logger.trace("Serveur Extension URL : "+i),i.toLowerCase()){case"json":case"xml":this.options.outputFormat=i.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}(FE.prototype=Object.create(qc.prototype,{})).constructor=FE,FE.prototype.buildRequest=function(n,t){try{var e=new VH(this.options);if(!e.processRequestString())throw new Error(ln.getMessage("SERVICE_REQUEST_BUILD"));this.request=e.requestString}catch(r){return void n.call(this,new pn(r.message))}t.call(this,this.request)},FE.prototype.analyzeResponse=function(n,t){this.response?WH_build({response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:t,onError:n,scope:this}):n.call(this,new pn(ln.getMessage("SERVICE_RESPONSE_EMPTY")))};const YH=FE,XH={getConfig:function(n){new J9(n).call()},getAltitude:function(n){new W9(n).call()},geocode:function(n){new fH(n).call()},reverseGeocode:function(n){new bH(n).call()},autoComplete:function(n){new SH(n).call()},route:function(n){new jH(n).call()},isoCurve:function(n){new YH(n).call()}},ZH=DG.hT;var Bi={};Bi.servicesVersion=DG.i8,Bi.servicesDate=ZH,Bi.Protocols={},Bi.Protocols.XHR=aj,Bi.Services=XH,Bi.Services.DefaultUrl=ME,Bi.Services.AltiResponse=kG,Bi.Services.Alti={},Bi.Services.Alti.Elevation=bD,Bi.Services.AutoCompleteResponse=Ij,Bi.Services.AutoComplete={},Bi.Services.AutoComplete.SuggestedLocation=Aj,Bi.Services.GetConfigResponse=dj,Bi.Services.Config={},Bi.Services.Config.Constraint=Mv,Bi.Services.Config.Format=hj,Bi.Services.Config.Layer=fj,Bi.Services.Config.Legend=pj,Bi.Services.Config.Metadata=gj,Bi.Services.Config.Originator=mj,Bi.Services.Config.Service=NG,Bi.Services.Config.Style=vj,Bi.Services.Config.Territory=yj,Bi.Services.Config.Thematic=FG,Bi.Services.Config.TileMatrix=Ej,Bi.Services.Config.TileMatrixLimit=bj,Bi.Services.Config.TileMatrixSet=_j,Bi.Services.GeocodeResponse=jG,Bi.Services.Geocode={},Bi.Services.Geocode.GeocodedLocation=GP,Bi.Services.Geocode.DirectGeocodedLocation=Tj,Bi.Services.Geocode.ReverseGeocodedLocation=Pj,Bi.Services.IsoCurveResponse=HG,Bi.Services.RouteResponse=UG,Bi.Services.Route={},Bi.Services.Route.RouteInstruction=VG,Bi.Error=pn,Bi.Helper=Up;const aa=Bi,Ki_getLogger=function(n){return"__PRODUCTION__".match(/true/)?Iv.disableAll():Iv.enableAll(),Iv.getLogger(n||"default")},Oj_proxifyUrl=function(n,t){var e=Ki_getLogger("proxifyUrl");if(!t||!t.hasOwnProperty("proxyUrl")||null===t.proxyUrl||0===t.proxyUrl.trim().length)return n;if(t.noProxyDomains&&Array.isArray(t.noProxyDomains)&&t.noProxyDomains.length>0)for(var r in t.noProxyDomains)if(e.trace("[ProxyUtils] proxifyUrl : analyzing "+t.noProxyDomains[r]),-1!==n.indexOf(t.noProxyDomains[r]))return e.info("[ProxyUtils] proxifyUrl : "+n+" found in noProxyDomains list ("+t.noProxyDomains[r]+")."),n;return t.proxyUrl+encodeURIComponent(n)};var aS=Ki_getLogger("GfiUtils"),WG={getLayerFormat:function(n){var t="function"==typeof n.getType?n.getType():null,e=n.getSource();if(t){if("VECTOR"===t||"VECTOR_TILE"===t)return"vector";if("TILE"===t)return e.tileGrid?"wmts":"wms";if("IMAGE"===t)return"wms"}else{if(e instanceof HO||e instanceof hn)return"wms";if(e instanceof d)return"wmts";if(e instanceof bu||e instanceof wE)return"vector"}return"unknown"},displayInfo:function(n,t,e,r,i){if(aS.trace("[GfiUtils] : displayInfo..."),r||(r="text/html"),null!==e){var o=null,a=e;a=(a=a.replace(/\n/g,"")).replace(/(>)\s*(<)/g,"$1$2");var c="undefined"!=typeof window?window:null;if("object"==typeof exports&&null===window)o=(new(0,ee(284).a)).parseFromString(a,r);else if(c.DOMParser)o=(new c.DOMParser).parseFromString(a,r);else{if(!c.ActiveXObject)return aS.log("Incompatible environment for DOM Parser !"),!1;(o=new c.ActiveXObject("Microsoft.XMLDOM")).async=!1,o.loadXML(a)}var p=o.getElementsByTagName("body");if(p&&1===p.length&&!p[0].hasChildNodes())return!1;var m=document.createElement("div");m.className="gp-feature-info-div";var E=document.createElement("input");E.type="button",E.className="gp-styling-button closer",E.onclick=function(){return n.featuresOverlay&&(n.removeOverlay(n.featuresOverlay),n.featuresOverlay=null),!1};var S=document.createElement("div");return S.className="gp-features-content-div",S.innerHTML=e,m.appendChild(S),m.appendChild(E),n.featuresOverlay&&(n.removeOverlay(n.featuresOverlay),n.featuresOverlay=null),n.featuresOverlay=new Eu({element:m,autoPan:i.autoPan,autoPanAnimation:i.autoPanAnimation,autoPanMargin:i.autoPanMargin,positioning:"bottom-center",insertFirst:!1,stopEvent:!0}),n.addOverlay(n.featuresOverlay),n.featuresOverlay.setPosition(t),n.featuresOverlay.render(),!0}},features2html:function(n,t){var e=document.createElement("div");return t.forEach(function(r){var i=r.getProperties();if(i.hasOwnProperty("name")){var o=document.createElement("div");o.className="gp-att-name-div",o.insertAdjacentHTML("afterbegin",i.name),e.appendChild(o)}if(i.hasOwnProperty("description")){var s=document.createElement("div");s.className="gp-att-description-div",s.insertAdjacentHTML("afterbegin",i.description),e.appendChild(s)}var a=null,c=!1,h=null,p=null,m=null;for(a in i)if("geometry"!==a&&"value"!==a&&"name"!==a&&"description"!==a&&"styleUrl"!==a&&("extensionsNode_"!==a||void 0!==i[a])){c||((h=document.createElement("div")).className="gp-att-others-div",p=document.createElement("ul"),c=!0),m=document.createElement("li");var E=document.createElement("span");E.className="gp-attname-others-span",E.appendChild(document.createTextNode(a+" : ")),m.appendChild(E),m.appendChild(document.createTextNode(i[a])),p.appendChild(m)}p&&(h.appendChild(p),e.appendChild(h))},n),e.hasChildNodes()||(e=null),e},layerGetFeatureAtCoordinates:function(n,t,e){var r=n.getPixelFromCoordinate(e);return n.hasFeatureAtPixel(r,function(i){return i===t})},displayVectorFeatureInfo:function(n,t,e,r){var i=n.getPixelFromCoordinate(t),o=[];if(n.forEachFeatureAtPixel(i,function(a,c){(!e||e.indexOf(c)>-1)&&o.push(a)}),0===o.length)return!1;var s=this.features2html(n,o);return null!==s&&(this.displayInfo(n,t,s.innerHTML,"text/html",r),!0)},displayFeatureInfo:function(n,t,e,r,i){for(var o={},s=0;s<e.length;s++){var a=e[s],c=a.obj.getZIndex();o[c]||(o[c]=[]),o[c].push(a)}var h=[],p=Object.keys(o);p.sort(function(le,ie){return ie-le});for(var E=0;E<p.length;E++)for(var S=p[E],x=0;x<o[S].length;++x){var P=o[S][x].obj,R=o[S][x].infoFormat||"text/html",F=!0;if(P.minResolution&&P.minResolution>n.getResolution()&&(F=!1),F&&P.maxResolution&&P.maxResolution<n.getResolution()&&(F=!1),P.getVisible()&&F){var D=this.getLayerFormat(P);if("vector"===D){this.layerGetFeatureAtCoordinates(n,P,t)&&h.push({format:D,scope:this,coordinate:t});continue}if("wms"!==D&&"wmts"!==D){aS.log("[ERROR] DisplayFeatureInfo - layer format '"+D+"' not allowed");continue}var G,j=n.getView().getResolution();G="wmts"===D?P.getSource().getFeatureInfoUrl.call(P.getSource(),t,j,n.getView().getProjection(),{INFOFORMAT:R}):P.getSource().getFeatureInfoUrl.call(P.getSource(),t,j,n.getView().getProjection(),{INFO_FORMAT:R}),h.push({format:R,url:Oj_proxifyUrl(G,r),scope:this,coordinate:t})}}var X=null,$=this;!function(le,ie,Fe){if(0!==le.length){var Ce=0;ie(le[0],function $e(ot){Ce++,ot||Ce===le.length?aS.trace("Finish sync to GFI !"):ie(le[Ce],$e)})}}(h,function(le,ie){if("vector"===le.format){if(!X){X=[];for(var Fe=0;Fe<p.length;Fe++)for(var Ce=p[Fe],$e=0;$e<o[Ce].length;++$e)X.push(o[Ce][$e].obj)}ie(le.scope.displayVectorFeatureInfo(n,le.coordinate,X,i))}else aa.Protocols.XHR.call({url:le.url,method:"GET",scope:le.scope,onResponse:function(ot){var st=!1;(0===ot.trim().length||-1!==ot.indexOf("java.lang.NullPointerException")||-1!==ot.indexOf("not queryable"))&&(st=!0);var dt=!st&&$.displayInfo(n,le.coordinate,ot,"text/html",i);ie(dt)},onFailure:function(ot){aS.log(ot),ie(!1)}})})},getPosition:function(n,t){if(n.coordinate)return n.coordinate;var e=[0,0];if(n.offsetX||n.offsetY)e[0]=n.offsetX,e[1]=n.offsetY;else if("touch"===n.pointerType){var r=n.pointers[0];e[0]=r.pageX,e[1]=r.pageY}return t.getCoordinateFromPixel(e)},onDisplayFeatureInfo:function(n,t){if(t.isActive()){aS.trace(n);var e=t.getMap();if("contextmenu"===n.type||"dblclick"===n.type)n.preventDefault();else if("singleclick"===n.type)for(var r=e.getInteractions().getArray(),i=0;i<r.length;i++)if(r[i].getActive()&&(r[i]instanceof pf||r[i]instanceof RG||r[i]instanceof wh))return;var o={};t._proxyUrl&&(o.proxyUrl=t._proxyUrl),t._noProxyDomains&&(o.noProxyDomains=t._noProxyDomains);var s={};t._autoPan&&(s.autoPan=t._autoPan),t._autoPanAnimation&&(s.autoPanAnimation=t._autoPanAnimation),t._autoPanMargin&&(s.autoPanMargin=t._autoPanMargin);for(var a=[],c=0;c<t._layers.length;++c)if((t._layers[c].event?t._layers[c].event:t._defaultEvent)===n.type){var p=a.push(t._layers[c])-1;a[p].infoFormat||(a[p].infoFormat=t._defaultInfoFormat)}var m=this.getPosition(n,e);this.displayFeatureInfo(e,m,a,o,s)}}};const rL=WG;window.ol&&(window.ol.gp?window.ol.gp.GfiUtils=WG:window.ol.gp={GfiUtils:WG});const YG=function(){function n(){this.dataProjection=null,this.defaultFeatureProjection=null}return n.prototype.getReadOptions=function(t,e){var r;if(e){var i=e.dataProjection?Ar(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()===Ip.TILE_PIXELS&&(i=Ar(i)).setWorldExtent(e.extent),r={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(r)},n.prototype.adaptOptions=function(t){return qa({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},n.prototype.getType=function(){return Ir()},n.prototype.readFeature=function(t,e){return Ir()},n.prototype.readFeatures=function(t,e){return Ir()},n.prototype.readGeometry=function(t,e){return Ir()},n.prototype.readProjection=function(t){return Ir()},n.prototype.writeFeature=function(t,e){return Ir()},n.prototype.writeFeatures=function(t,e){return Ir()},n.prototype.writeGeometry=function(t,e){return Ir()},n}();function mf(n,t,e){var o,r=e?Ar(e.featureProjection):null,i=e?Ar(e.dataProjection):null;if(o=r&&i&&!hf(r,i)?(t?n.clone():n).transform(t?r:i,t?i:r):n,t&&e&&void 0!==e.decimals){var s=Math.pow(10,e.decimals);o===n&&(o=n.clone()),o.applyTransform(function(c){for(var h=0,p=c.length;h<p;++h)c[h]=Math.round(c[h]*s)/s;return c})}return o}var iL="http://www.w3.org/2001/XMLSchema-instance";function GE(n,t){return lS().createElementNS(n,t)}function Vp(n,t){return Dj(n,t,[]).join("")}function Dj(n,t,e){if(n.nodeType==Node.CDATA_SECTION_NODE||n.nodeType==Node.TEXT_NODE)e.push(t?String(n.nodeValue).replace(/(\r\n|\r|\n)/g,""):n.nodeValue);else{var r=void 0;for(r=n.firstChild;r;r=r.nextSibling)Dj(r,t,e)}return e}function Lv(n){return"documentElement"in n}function kv(n){return(new DOMParser).parseFromString(n,"application/xml")}function Lj(n,t){return function(e,r){var i=n.call(void 0!==t?t:this,e,r);void 0!==i&&Qo(r[r.length-1],i)}}function ic(n,t){return function(e,r){var i=n.call(void 0!==t?t:this,e,r);void 0!==i&&r[r.length-1].push(i)}}function oL(n,t){return function(e,r){var i=n.call(void 0!==t?t:this,e,r);void 0!==i&&(r[r.length-1]=i)}}function Ds(n,t,e){return function(r,i){var o=n.call(void 0!==e?e:this,r,i);if(void 0!==o){var s=i[i.length-1],a=void 0!==t?t:r.localName,c=void 0;a in s?c=s[a]:s[a]=c=[],c.push(o)}}}function ut(n,t,e){return function(r,i){var o=n.call(void 0!==e?e:this,r,i);void 0!==o&&(i[i.length-1][void 0!==t?t:r.localName]=o)}}function wn(n,t){return function(e,r,i){n.call(void 0!==t?t:this,e,r,i),i[i.length-1].node.appendChild(e)}}function kj(n,t){var e,r;return function(i,o,s){if(void 0===e){e={};var a={};a[i.localName]=n,e[i.namespaceURI]=a,r=vf(i.localName)}Nj(e,r,o,s)}}function vf(n,t){var e=n;return function(r,i,o){var c=e;return void 0===c&&(c=o),GE(void 0!==t?t:i[i.length-1].node.namespaceURI,c)}}var Cu=vf();function Xc(n,t){for(var e=t.length,r=new Array(e),i=0;i<e;++i)r[i]=n[t[i]];return r}function Kt(n,t,e){var i,o,r=void 0!==e?e:{};for(i=0,o=n.length;i<o;++i)r[n[i]]=t;return r}function Nv(n,t,e,r){var i;for(i=t.firstElementChild;i;i=i.nextElementSibling){var o=n[i.namespaceURI];if(void 0!==o){var s=o[i.localName];void 0!==s&&s.call(r,i,e)}}}function jn(n,t,e,r,i){return r.push(n),Nv(t,e,r,i),r.pop()}function Nj(n,t,e,r,i,o){for(var a,c,s=(void 0!==i?i:e).length,h=0;h<s;++h)void 0!==(a=e[h])&&void 0!==(c=t.call(void 0!==o?o:this,a,r,void 0!==i?i[h]:void 0))&&n[c.namespaceURI][c.localName].call(o,c,a,r)}function Cs(n,t,e,r,i,o,s){return i.push(n),Nj(t,e,r,i,o,s),i.pop()}var sL=void 0,aL=void 0;function lS(){return void 0===aL&&"undefined"!=typeof document&&(aL=document.implementation.createDocument("","",null)),aL}var tW=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Fj=function(n){function t(){var e=n.call(this)||this;return e.xmlSerializer_=(void 0===sL&&"undefined"!=typeof XMLSerializer&&(sL=new XMLSerializer),sL),e}return tW(t,n),t.prototype.getType=function(){return"xml"},t.prototype.readFeature=function(e,r){if(e){if("string"==typeof e){var i=kv(e);return this.readFeatureFromDocument(i,r)}return Lv(e)?this.readFeatureFromDocument(e,r):this.readFeatureFromNode(e,r)}return null},t.prototype.readFeatureFromDocument=function(e,r){var i=this.readFeaturesFromDocument(e,r);return i.length>0?i[0]:null},t.prototype.readFeatureFromNode=function(e,r){return null},t.prototype.readFeatures=function(e,r){if(e){if("string"==typeof e){var i=kv(e);return this.readFeaturesFromDocument(i,r)}return Lv(e)?this.readFeaturesFromDocument(e,r):this.readFeaturesFromNode(e,r)}return[]},t.prototype.readFeaturesFromDocument=function(e,r){for(var i=[],o=e.firstChild;o;o=o.nextSibling)o.nodeType==Node.ELEMENT_NODE&&Qo(i,this.readFeaturesFromNode(o,r));return i},t.prototype.readFeaturesFromNode=function(e,r){return Ir()},t.prototype.readGeometry=function(e,r){if(e){if("string"==typeof e){var i=kv(e);return this.readGeometryFromDocument(i,r)}return Lv(e)?this.readGeometryFromDocument(e,r):this.readGeometryFromNode(e,r)}return null},t.prototype.readGeometryFromDocument=function(e,r){return null},t.prototype.readGeometryFromNode=function(e,r){return null},t.prototype.readProjection=function(e){if(e){if("string"==typeof e){var r=kv(e);return this.readProjectionFromDocument(r)}return Lv(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}return null},t.prototype.readProjectionFromDocument=function(e){return this.dataProjection},t.prototype.readProjectionFromNode=function(e){return this.dataProjection},t.prototype.writeFeature=function(e,r){var i=this.writeFeatureNode(e,r);return this.xmlSerializer_.serializeToString(i)},t.prototype.writeFeatureNode=function(e,r){return null},t.prototype.writeFeatures=function(e,r){var i=this.writeFeaturesNode(e,r);return this.xmlSerializer_.serializeToString(i)},t.prototype.writeFeaturesNode=function(e,r){return null},t.prototype.writeGeometry=function(e,r){var i=this.writeGeometryNode(e,r);return this.xmlSerializer_.serializeToString(i)},t.prototype.writeGeometryNode=function(e,r){return null},t}(YG);function Fv(n){return BE(Vp(n,!1))}function BE(n){var t=/^\s*(true|1)|(false|0)\s*$/.exec(n);if(t)return void 0!==t[1]||!1}function qG(n){var t=Vp(n,!1),e=Date.parse(t);return isNaN(e)?void 0:e/1e3}function Co(n){return wm(Vp(n,!1))}function wm(n){var t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(n);if(t)return parseFloat(t[1])}function oc(n){return lL(Vp(n,!1))}function lL(n){var t=/^\s*(\d+)\s*$/.exec(n);if(t)return parseInt(t[1],10)}function fn(n){return Vp(n,!1).trim()}function uS(n,t){$o(n,t?"1":"0")}function Kc(n,t){var e=t.toPrecision();n.appendChild(lS().createTextNode(e))}function uL(n,t){var e=t.toString();n.appendChild(lS().createTextNode(e))}function $o(n,t){n.appendChild(lS().createTextNode(t))}var oW=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function Gj(n){for(var t=[],e=0,r=n.length;e<r;++e)t.push(n[e].clone());return t}const jE=function(n){function t(e){var r=n.call(this)||this;return r.geometries_=e||null,r.changeEventsKeys_=[],r.listenGeometriesChange_(),r}return oW(t,n),t.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(ya),this.changeEventsKeys_.length=0},t.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var e=0,r=this.geometries_.length;e<r;++e)this.changeEventsKeys_.push(Fl(this.geometries_[e],"change",this.changed,this))},t.prototype.clone=function(){var e=new t(null);return e.setGeometries(this.geometries_),e},t.prototype.closestPointXY=function(e,r,i,o){if(o<im(this.getExtent(),e,r))return o;for(var s=this.geometries_,a=0,c=s.length;a<c;++a)o=s[a].closestPointXY(e,r,i,o);return o},t.prototype.containsXY=function(e,r){for(var i=this.geometries_,o=0,s=i.length;o<s;++o)if(i[o].containsXY(e,r))return!0;return!1},t.prototype.computeExtent=function(e){om(e);for(var r=this.geometries_,i=0,o=r.length;i<o;++i)tO(e,r[i].getExtent());return e},t.prototype.getGeometries=function(){return Gj(this.geometries_)},t.prototype.getGeometriesArray=function(){return this.geometries_},t.prototype.getGeometriesArrayRecursive=function(){for(var e=[],r=this.geometries_,i=0,o=r.length;i<o;++i)r[i].getType()===this.getType()?e=e.concat(r[i].getGeometriesArrayRecursive()):e.push(r[i]);return e},t.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var r=[],i=this.geometries_,o=!1,s=0,a=i.length;s<a;++s){var c=i[s],h=c.getSimplifiedGeometry(e);r.push(h),h!==c&&(o=!0)}if(o){var p=new t(null);return p.setGeometriesArray(r),p}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},t.prototype.getType=function(){return"GeometryCollection"},t.prototype.intersectsExtent=function(e){for(var r=this.geometries_,i=0,o=r.length;i<o;++i)if(r[i].intersectsExtent(e))return!0;return!1},t.prototype.isEmpty=function(){return 0===this.geometries_.length},t.prototype.rotate=function(e,r){for(var i=this.geometries_,o=0,s=i.length;o<s;++o)i[o].rotate(e,r);this.changed()},t.prototype.scale=function(e,r,i){var o=i;o||(o=xp(this.getExtent()));for(var s=this.geometries_,a=0,c=s.length;a<c;++a)s[a].scale(e,r,o);this.changed()},t.prototype.setGeometries=function(e){this.setGeometriesArray(Gj(e))},t.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},t.prototype.applyTransform=function(e){for(var r=this.geometries_,i=0,o=r.length;i<o;++i)r[i].applyTransform(e);this.changed()},t.prototype.translate=function(e,r){for(var i=this.geometries_,o=0,s=i.length;o<s;++o)i[o].translate(e,r);this.changed()},t.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),n.prototype.disposeInternal.call(this)},t}(yB),UE=function(){function n(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new ro({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return n.prototype.clone=function(){return new n({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},n.prototype.getOverflow=function(){return this.overflow_},n.prototype.getFont=function(){return this.font_},n.prototype.getMaxAngle=function(){return this.maxAngle_},n.prototype.getPlacement=function(){return this.placement_},n.prototype.getOffsetX=function(){return this.offsetX_},n.prototype.getOffsetY=function(){return this.offsetY_},n.prototype.getFill=function(){return this.fill_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getStroke=function(){return this.stroke_},n.prototype.getText=function(){return this.text_},n.prototype.getTextAlign=function(){return this.textAlign_},n.prototype.getTextBaseline=function(){return this.textBaseline_},n.prototype.getBackgroundFill=function(){return this.backgroundFill_},n.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},n.prototype.getPadding=function(){return this.padding_},n.prototype.setOverflow=function(t){this.overflow_=t},n.prototype.setFont=function(t){this.font_=t},n.prototype.setMaxAngle=function(t){this.maxAngle_=t},n.prototype.setOffsetX=function(t){this.offsetX_=t},n.prototype.setOffsetY=function(t){this.offsetY_=t},n.prototype.setPlacement=function(t){this.placement_=t},n.prototype.setRotateWithView=function(t){this.rotateWithView_=t},n.prototype.setFill=function(t){this.fill_=t},n.prototype.setRotation=function(t){this.rotation_=t},n.prototype.setScale=function(t){this.scale_=t},n.prototype.setStroke=function(t){this.stroke_=t},n.prototype.setText=function(t){this.text_=t},n.prototype.setTextAlign=function(t){this.textAlign_=t},n.prototype.setTextBaseline=function(t){this.textBaseline_=t},n.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},n.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},n.prototype.setPadding=function(t){this.padding_=t},n}();var cS,XG,KG,ZG,cL,VP,JG,QG,$G,pL,uW=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Cm=["http://www.google.com/kml/ext/2.2"],mr=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Bj={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},dW=Kt(mr,{ExtendedData:Qj,Region:$j,MultiGeometry:ut(Kj,"geometry"),LineString:ut(qj,"geometry"),LinearRing:ut(Xj,"geometry"),Point:ut(Zj,"geometry"),Polygon:ut(Jj,"geometry"),Style:ut(n3),StyleMap:function(n,t){var e=Hj.call(this,n,t);if(e){var r=t[t.length-1];Array.isArray(e)?r.Style=e:"string"==typeof e?r.styleUrl=e:qi(!1,38)}},address:ut(fn),description:ut(fn),name:ut(fn),open:ut(Fv),phoneNumber:ut(fn),styleUrl:ut(mL),visibility:ut(Fv)},Kt(Cm,{MultiTrack:ut(function(n,t){var e=jn([],OW,n,t);if(e)return new JC(e)},"geometry"),Track:ut(Yj,"geometry")})),hW=Kt(mr,{ExtendedData:Qj,Region:$j,Link:function(n,t){Nv(fW,n,t)},address:ut(fn),description:ut(fn),name:ut(fn),open:ut(Fv),phoneNumber:ut(fn),visibility:ut(Fv)}),fW=Kt(mr,{href:ut(mL)}),jj=Kt(mr,{LatLonAltBox:function(n,t){var e=jn({},ZW,n,t);if(e){var r=t[t.length-1],i=[parseFloat(e.west),parseFloat(e.south),parseFloat(e.east),parseFloat(e.north)];r.extent=i,r.altitudeMode=e.altitudeMode,r.minAltitude=parseFloat(e.minAltitude),r.maxAltitude=parseFloat(e.maxAltitude)}},Lod:function(n,t){var e=jn({},QW,n,t);if(e){var r=t[t.length-1];r.minLodPixels=parseFloat(e.minLodPixels),r.maxLodPixels=parseFloat(e.maxLodPixels),r.minFadeExtent=parseFloat(e.minFadeExtent),r.maxFadeExtent=parseFloat(e.maxFadeExtent)}}}),pW=Kt(mr,["Document","Placemark"]),gW=Kt(mr,{Document:wn(function(n,t,e){Cs({node:n},cY,dY,t,e,void 0,this)}),Placemark:wn(o8)}),UP=null,dL=null,hL=null,Gv=null,e3=null,fL=null,vW=function(n){function t(e){var r=n.call(this)||this,i=e||{};return fL||(UP=new ro({color:cS=[255,255,255,1]}),dL=new wu({anchor:XG=[20,2],anchorOrigin:"bottom-left",anchorXUnits:KG="pixels",anchorYUnits:ZG="pixels",crossOrigin:"anonymous",rotation:0,scale:JG=.5,size:cL=[64,64],src:VP="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"}),QG="NO_IMAGE",hL=new Gi({color:cS,width:1}),$G=new Gi({color:[51,51,51,1],width:2}),Gv=new UE({font:"bold 16px Helvetica",fill:UP,stroke:$G,scale:.8}),e3=new br({fill:UP,image:dL,text:Gv,stroke:hL,zIndex:0}),fL=[e3]),r.dataProjection=Ar("EPSG:4326"),r.defaultStyle_=i.defaultStyle?i.defaultStyle:fL,r.extractStyles_=void 0===i.extractStyles||i.extractStyles,r.writeStyles_=void 0===i.writeStyles||i.writeStyles,r.sharedStyles_={},r.showPointNames_=void 0===i.showPointNames||i.showPointNames,r.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",r}return uW(t,n),t.prototype.readDocumentOrFolder_=function(e,r){var o=jn([],Kt(mr,{Document:Lj(this.readDocumentOrFolder_,this),Folder:Lj(this.readDocumentOrFolder_,this),Placemark:ic(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),e,r,this);if(o)return o},t.prototype.readPlacemark_=function(e,r){var i=jn({geometry:null},dW,e,r,this);if(i){var o=new jd,s=e.getAttribute("id");null!==s&&o.setId(s);var c=i.geometry;if(c&&mf(c,!1,r[0]),o.setGeometry(c),delete i.geometry,this.extractStyles_){var m=function(n,t,e,r,i){return function(o,s){var a=i,c="",h=[];if(a){var p=o.getGeometry();if(p){var m=p.getType();a="GeometryCollection"===m?(h=p.getGeometriesArrayRecursive().filter(function(P){var R=P.getType();return"Point"===R||"MultiPoint"===R})).length>0:"Point"===m||"MultiPoint"===m}}a&&(c=o.get("name"),(a=a&&!!c)&&c.search(/&[^&]+;/)>-1&&(pL||(pL=document.createElement("textarea")),pL.innerHTML=c,c=pL.value));var E=e;if(n?E=n:t&&(E=Uj(t,e,r)),a){var S=function(n,t){var e=[0,0],r="start",i=n.getImage();if(i){var o=i.getImageSize();if(null===o&&(o=cL),2==o.length){var s=i.getScale();e[0]=s*o[0]/2,e[1]=-s*o[1]/2,r="left"}}var a=n.getText();return a?((a=a.clone()).setFont(a.getFont()||Gv.getFont()),a.setScale(a.getScale()||Gv.getScale()),a.setFill(a.getFill()||Gv.getFill()),a.setStroke(a.getStroke()||$G)):a=Gv.clone(),a.setText(t),a.setOffsetX(e[0]),a.setOffsetY(e[1]),a.setTextAlign(r),new br({image:i,text:a})}(E[0],c);return h.length>0?(S.setGeometry(new jE(h)),[S,new br({geometry:E[0].getGeometry(),image:null,fill:E[0].getFill(),stroke:E[0].getStroke(),text:null})].concat(E.slice(1))):S}return E}}(i.Style,i.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);o.setStyle(m)}return delete i.Style,o.setProperties(i,!0),o}},t.prototype.readSharedStyle_=function(e,r){var i=e.getAttribute("id");if(null!==i){var o=n3.call(this,e,r);if(o){var s=void 0,a=e.baseURI;(!a||"about:blank"==a)&&(a=window.location.href),s=a?new URL("#"+i,a).href:"#"+i,this.sharedStyles_[s]=o}}},t.prototype.readSharedStyleMap_=function(e,r){var i=e.getAttribute("id");if(null!==i){var o=Hj.call(this,e,r);if(o){var s,a=e.baseURI;(!a||"about:blank"==a)&&(a=window.location.href),s=a?new URL("#"+i,a).href:"#"+i,this.sharedStyles_[s]=o}}},t.prototype.readFeatureFromNode=function(e,r){return Ku(mr,e.namespaceURI)&&this.readPlacemark_(e,[this.getReadOptions(e,r)])||null},t.prototype.readFeaturesFromNode=function(e,r){if(!Ku(mr,e.namespaceURI))return[];var i,o=e.localName;if("Document"==o||"Folder"==o)return(i=this.readDocumentOrFolder_(e,[this.getReadOptions(e,r)]))||[];if("Placemark"==o){var s=this.readPlacemark_(e,[this.getReadOptions(e,r)]);return s?[s]:[]}if("kml"==o){i=[];for(var a=e.firstElementChild;a;a=a.nextElementSibling){var c=this.readFeaturesFromNode(a,r);c&&Qo(i,c)}return i}return[]},t.prototype.readName=function(e){if(e){if("string"==typeof e){var r=kv(e);return this.readNameFromDocument(r)}return Lv(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}},t.prototype.readNameFromDocument=function(e){for(var r=e.firstChild;r;r=r.nextSibling)if(r.nodeType==Node.ELEMENT_NODE){var i=this.readNameFromNode(r);if(i)return i}},t.prototype.readNameFromNode=function(e){for(var r=e.firstElementChild;r;r=r.nextElementSibling)if(Ku(mr,r.namespaceURI)&&"name"==r.localName)return fn(r);for(r=e.firstElementChild;r;r=r.nextElementSibling){var i=r.localName;if(Ku(mr,r.namespaceURI)&&("Document"==i||"Folder"==i||"Placemark"==i||"kml"==i)){var o=this.readNameFromNode(r);if(o)return o}}},t.prototype.readNetworkLinks=function(e){var r=[];if("string"==typeof e){var i=kv(e);Qo(r,this.readNetworkLinksFromDocument(i))}else Lv(e)?Qo(r,this.readNetworkLinksFromDocument(e)):Qo(r,this.readNetworkLinksFromNode(e));return r},t.prototype.readNetworkLinksFromDocument=function(e){for(var r=[],i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&Qo(r,this.readNetworkLinksFromNode(i));return r},t.prototype.readNetworkLinksFromNode=function(e){for(var r=[],i=e.firstElementChild;i;i=i.nextElementSibling)if(Ku(mr,i.namespaceURI)&&"NetworkLink"==i.localName){var o=jn({},hW,i,[]);r.push(o)}for(i=e.firstElementChild;i;i=i.nextElementSibling){var s=i.localName;Ku(mr,i.namespaceURI)&&("Document"==s||"Folder"==s||"kml"==s)&&Qo(r,this.readNetworkLinksFromNode(i))}return r},t.prototype.readRegion=function(e){var r=[];if("string"==typeof e){var i=kv(e);Qo(r,this.readRegionFromDocument(i))}else Lv(e)?Qo(r,this.readRegionFromDocument(e)):Qo(r,this.readRegionFromNode(e));return r},t.prototype.readRegionFromDocument=function(e){for(var r=[],i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&Qo(r,this.readRegionFromNode(i));return r},t.prototype.readRegionFromNode=function(e){for(var r=[],i=e.firstElementChild;i;i=i.nextElementSibling)if(Ku(mr,i.namespaceURI)&&"Region"==i.localName){var o=jn({},jj,i,[]);r.push(o)}for(i=e.firstElementChild;i;i=i.nextElementSibling){var s=i.localName;Ku(mr,i.namespaceURI)&&("Document"==s||"Folder"==s||"kml"==s)&&Qo(r,this.readRegionFromNode(i))}return r},t.prototype.writeFeaturesNode=function(e,r){r=this.adaptOptions(r);var i=GE(mr[4],"kml"),o="http://www.w3.org/2000/xmlns/";i.setAttributeNS(o,"xmlns:gx",Cm[0]),i.setAttributeNS(o,"xmlns:xsi",iL),i.setAttributeNS(iL,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var s={node:i},a={};e.length>1?a.Document=e:1==e.length&&(a.Placemark=e[0]);var c=pW[i.namespaceURI],h=Xc(a,c);return Cs(s,gW,Cu,h,[r],c,this),i},t}(Fj);function Uj(n,t,e){return Array.isArray(n)?n:"string"==typeof n?(!(n in e)&&"#"+n in e&&(n="#"+n),Uj(e[n],t,e)):t}function gL(n){var t=Vp(n,!1),e=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t);if(e){var r=e[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function Vj(n){for(var i,t=Vp(n,!1),e=[],r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;i=r.exec(t);){var o=parseFloat(i[1]),s=parseFloat(i[2]),a=i[3]?parseFloat(i[3]):0;e.push(o,s,a),t=t.substr(i[0].length)}if(""===t)return e}function mL(n){var t=Vp(n,!1).trim(),e=n.baseURI;return(!e||"about:blank"==e)&&(e=window.location.href),e?new URL(t,e).href:t}function zj(n){return Co(n)}var bW=Kt(mr,{Pair:function(n,t){var e=jn({},HW,n,t,this);if(e){var r=e.key;if(r&&"normal"==r){var i=e.styleUrl;i&&(t[t.length-1]=i);var o=e.Style;o&&(t[t.length-1]=o)}}}});function Hj(n,t){return jn(void 0,bW,n,t,this)}var wW=Kt(mr,{Icon:ut(function(n,t){return jn({},kW,n,t)||null}),color:ut(gL),heading:ut(Co),hotSpot:ut(function(n){var r,t=n.getAttribute("xunits"),e=n.getAttribute("yunits");return r="insetPixels"!==t?"insetPixels"!==e?"bottom-left":"top-left":"insetPixels"!==e?"bottom-right":"top-right",{x:parseFloat(n.getAttribute("x")),xunits:Bj[t],y:parseFloat(n.getAttribute("y")),yunits:Bj[e],origin:r}}),scale:ut(zj)}),SW=Kt(mr,{color:ut(gL),scale:ut(zj)}),TW=Kt(mr,{color:ut(gL),width:ut(Co)}),IW=Kt(mr,{color:ut(gL),fill:ut(Fv),outline:ut(Fv)}),MW=Kt(mr,{coordinates:oL(Vj)});function Wj(n,t){return jn(null,MW,n,t)}var OW=Kt(Cm,{Track:ic(Yj)}),LW=Kt(mr,{when:function(n,t){var r=t[t.length-1].whens,i=Vp(n,!1),o=Date.parse(i);r.push(isNaN(o)?0:o)}},Kt(Cm,{coord:function(n,t){var r=t[t.length-1].flatCoordinates,i=Vp(n,!1),s=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(s){var a=parseFloat(s[1]),c=parseFloat(s[2]),h=parseFloat(s[3]);r.push(a,c,h,0)}else r.push(0,0,0,0)}}));function Yj(n,t){var e=jn({flatCoordinates:[],whens:[]},LW,n,t);if(e){for(var r=e.flatCoordinates,i=e.whens,o=0,s=Math.min(r.length,i.length);o<s;++o)r[4*o+3]=i[o];return new bh(r,"XYZM")}}var kW=Kt(mr,{href:ut(mL)},Kt(Cm,{x:ut(Co),y:ut(Co),w:ut(Co),h:ut(Co)})),FW=Kt(mr,{coordinates:oL(Vj)});function t3(n,t){return jn(null,FW,n,t)}var vL=Kt(mr,{extrude:ut(Fv),tessellate:ut(Fv),altitudeMode:ut(fn)});function qj(n,t){var e=jn({},vL,n,t),r=t3(n,t);if(r){var i=new bh(r,"XYZ");return i.setProperties(e,!0),i}}function Xj(n,t){var e=jn({},vL,n,t),r=t3(n,t);if(r){var i=new Yc(r,"XYZ",[r.length]);return i.setProperties(e,!0),i}}var GW=Kt(mr,{LineString:ic(qj),LinearRing:ic(Xj),MultiGeometry:ic(Kj),Point:ic(Zj),Polygon:ic(Jj)});function Kj(n,t){var e=jn([],GW,n,t);if(!e)return null;if(0===e.length)return new jE(e);for(var r,i=!0,o=e[0].getType(),a=1,c=e.length;a<c;++a)if(e[a].getType()!=o){i=!1;break}if(i){var h=void 0,p=void 0;if("Point"==o){var m=e[0];for(h=m.getLayout(),p=m.getFlatCoordinates(),a=1,c=e.length;a<c;++a)Qo(p,e[a].getFlatCoordinates());r3(r=new AP(p,h),e)}else"LineString"==o?r3(r=new JC(e),e):"Polygon"==o?r3(r=new dD(e),e):"GeometryCollection"==o?r=new jE(e):qi(!1,37)}else r=new jE(e);return r}function Zj(n,t){var e=jn({},vL,n,t),r=t3(n,t);if(r){var i=new nc(r,"XYZ");return i.setProperties(e,!0),i}}var BW=Kt(mr,{innerBoundaryIs:function(n,t){var e=jn(void 0,eY,n,t);e&&t[t.length-1].push(e)},outerBoundaryIs:function(n,t){var e=jn(void 0,nY,n,t);e&&(t[t.length-1][0]=e)}});function Jj(n,t){var e=jn({},vL,n,t),r=jn([null],BW,n,t);if(r&&r[0]){for(var i=r[0],o=[i.length],s=1,a=r.length;s<a;++s)Qo(i,r[s]),o.push(i.length);var c=new Yc(i,"XYZ",o);return c.setProperties(e,!0),c}}var jW=Kt(mr,{IconStyle:function(n,t){var e=jn({},wW,n,t);if(e){var s,r=t[t.length-1],i="Icon"in e?e.Icon:{},o=!("Icon"in e)||Object.keys(i).length>0,a=i.href;a?s=a:o&&(s=VP);var c,h,p,m="bottom-left",E=e.hotSpot;E?(c=[E.x,E.y],h=E.xunits,p=E.yunits,m=E.origin):s===VP?(c=XG,h=KG,p=ZG):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(s)&&(c=[.5,0],h="fraction",p="fraction");var S,x=i.x,P=i.y;void 0!==x&&void 0!==P&&(S=[x,P]);var R,F=i.w,D=i.h;void 0!==F&&void 0!==D&&(R=[F,D]);var j,G=e.heading;void 0!==G&&(j=hv(G));var X=e.scale;if(o){s==VP&&(R=cL,void 0===X&&(X=JG));var $=new wu({anchor:c,anchorOrigin:m,anchorXUnits:h,anchorYUnits:p,crossOrigin:this.crossOrigin_,offset:S,offsetOrigin:"bottom-left",rotation:j,scale:X,size:R,src:s,color:e.color});r.imageStyle=$}else r.imageStyle=QG}},LabelStyle:function(n,t){var e=jn({},SW,n,t);if(e){var r=t[t.length-1],i=new UE({fill:new ro({color:"color"in e?e.color:cS}),scale:e.scale});r.textStyle=i}},LineStyle:function(n,t){var e=jn({},TW,n,t);if(e){var r=t[t.length-1],i=new Gi({color:"color"in e?e.color:cS,width:"width"in e?e.width:1});r.strokeStyle=i}},PolyStyle:function(n,t){var e=jn({},IW,n,t);if(e){var r=t[t.length-1],i=new ro({color:"color"in e?e.color:cS});r.fillStyle=i;var o=e.fill;void 0!==o&&(r.fill=o);var s=e.outline;void 0!==s&&(r.outline=s)}}});function n3(n,t){var e=jn({},jW,n,t,this);if(!e)return null;var o,r="fillStyle"in e?e.fillStyle:UP,i=e.fill;void 0!==i&&!i&&(r=null),"imageStyle"in e?e.imageStyle!=QG&&(o=e.imageStyle):o=dL;var s="textStyle"in e?e.textStyle:Gv,a="strokeStyle"in e?e.strokeStyle:hL,c=e.outline;return void 0===c||c?[new br({fill:r,image:o,stroke:a,text:s,zIndex:void 0})]:[new br({geometry:function(h){var p=h.getGeometry(),m=p.getType();return"GeometryCollection"===m?new jE(p.getGeometriesArrayRecursive().filter(function(E){var S=E.getType();return"Polygon"!==S&&"MultiPolygon"!==S})):"Polygon"!==m&&"MultiPolygon"!==m?p:void 0},fill:r,image:o,stroke:a,text:s,zIndex:void 0}),new br({geometry:function(h){var p=h.getGeometry(),m=p.getType();return"GeometryCollection"===m?new jE(p.getGeometriesArrayRecursive().filter(function(E){var S=E.getType();return"Polygon"===S||"MultiPolygon"===S})):"Polygon"===m||"MultiPolygon"===m?p:void 0},fill:r,stroke:null,zIndex:void 0})]}function r3(n,t){var s,a,c,e=t.length,r=new Array(t.length),i=new Array(t.length),o=new Array(t.length);s=!1,a=!1,c=!1;for(var h=0;h<e;++h){var p=t[h];r[h]=p.get("extrude"),i[h]=p.get("tessellate"),o[h]=p.get("altitudeMode"),s=s||void 0!==r[h],a=a||void 0!==i[h],c=c||o[h]}s&&n.set("extrude",r),a&&n.set("tessellate",i),c&&n.set("altitudeMode",o)}var UW=Kt(mr,{displayName:ut(fn),value:ut(fn)}),zW=Kt(mr,{Data:function(n,t){var e=n.getAttribute("name");Nv(UW,n,t);var r=t[t.length-1];e&&r.displayName?r[e]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:null!==e?r[e]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value},SchemaData:function(n,t){Nv(qW,n,t)}});function Qj(n,t){Nv(zW,n,t)}function $j(n,t){Nv(jj,n,t)}var HW=Kt(mr,{Style:ut(n3),key:ut(fn),styleUrl:ut(mL)}),qW=Kt(mr,{SimpleData:function(n,t){var e=n.getAttribute("name");if(null!==e){var r=fn(n);t[t.length-1][e]=r}}}),ZW=Kt(mr,{altitudeMode:ut(fn),minAltitude:ut(Co),maxAltitude:ut(Co),north:ut(Co),south:ut(Co),east:ut(Co),west:ut(Co)}),QW=Kt(mr,{minLodPixels:ut(Co),maxLodPixels:ut(Co),minFadeExtent:ut(Co),maxFadeExtent:ut(Co)}),eY=Kt(mr,{LinearRing:oL(Wj)}),nY=Kt(mr,{LinearRing:oL(Wj)});function yL(n,t){for(var e=sG(t),i=[255*(4==e.length?e[3]:1),e[2],e[1],e[0]],o=0;o<4;++o){var s=Math.floor(i[o]).toString(16);i[o]=1==s.length?"0"+s:s}$o(n,i.join(""))}var _L=Kt(mr,{Data:wn(function(n,t,e){n.setAttribute("name",t.name);var r={node:n},i=t.value;"object"==typeof i?(null!==i&&i.displayName&&Cs(r,_L,Cu,[i.displayName],e,["displayName"]),null!==i&&i.value&&Cs(r,_L,Cu,[i.value],e,["value"])):Cs(r,_L,Cu,[i],e,["value"])}),value:wn(function(n,t){$o(n,t)}),displayName:wn(function(n,t){!function(n,t){n.appendChild(lS().createCDATASection(t))}(n,t)})}),cY=Kt(mr,{Placemark:wn(o8)}),dY=function(n,t,e){return GE(t[t.length-1].node.namespaceURI,"Placemark")},fY=vf("Data"),e8=Kt(mr,["href"],Kt(Cm,["x","y","w","h"])),t8=Kt(mr,{href:wn($o)},Kt(Cm,{x:wn(Kc),y:wn(Kc),w:wn(Kc),h:wn(Kc)})),gY=function(n,t,e){return GE(Cm[0],"gx:"+e)},vY=Kt(mr,["scale","heading","Icon","color","hotSpot"]),yY=Kt(mr,{Icon:wn(function(n,t,e){var r={node:n},o=e8[e[e.length-1].node.namespaceURI],s=Xc(t,o);Cs(r,t8,Cu,s,e,o),s=Xc(t,o=e8[Cm[0]]),Cs(r,t8,gY,s,e,o)}),color:wn(yL),heading:wn(Kc),hotSpot:wn(function(n,t){n.setAttribute("x",String(t.x)),n.setAttribute("y",String(t.y)),n.setAttribute("xunits",t.xunits),n.setAttribute("yunits",t.yunits)}),scale:wn(l8)}),EY=Kt(mr,["color","scale"]),bY=Kt(mr,{color:wn(yL),scale:wn(l8)}),CY=Kt(mr,["color","width"]),SY=Kt(mr,{color:wn(yL),width:wn(Kc)}),TY={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},n8=function(n,t,e){if(n)return GE(t[t.length-1].node.namespaceURI,TY[n.getType()])},PY=vf("Point"),IY=vf("LineString"),AY=vf("LinearRing"),MY=vf("Polygon"),RY=Kt(mr,{LineString:wn(dS),Point:wn(dS),Polygon:wn(a8),GeometryCollection:wn(r8)});function r8(n,t,e){var s,r={node:n},i=t.getType(),o=[];"GeometryCollection"===i?(t.getGeometriesArrayRecursive().forEach(function(a){var c=a.getType();"MultiPoint"===c?o=o.concat(a.getPoints()):"MultiLineString"===c?o=o.concat(a.getLineStrings()):"MultiPolygon"===c?o=o.concat(a.getPolygons()):"Point"===c||"LineString"===c||"Polygon"===c?o.push(a):qi(!1,39)}),s=n8):"MultiPoint"===i?(o=t.getPoints(),s=PY):"MultiLineString"===i?(o=t.getLineStrings(),s=IY):"MultiPolygon"===i?(o=t.getPolygons(),s=MY):qi(!1,39),Cs(r,RY,s,o,e)}var OY=Kt(mr,{LinearRing:wn(dS)});function i8(n,t,e){Cs({node:n},OY,AY,[t],e)}var i3=Kt(mr,{ExtendedData:wn(function(n,t,e){for(var r={node:n},i=t.names,o=t.values,s=i.length,a=0;a<s;a++)Cs(r,_L,fY,[{name:i[a],value:o[a]}],e)}),MultiGeometry:wn(r8),LineString:wn(dS),LinearRing:wn(dS),Point:wn(dS),Polygon:wn(a8),Style:wn(function(n,t,e){var a,r={node:n},i={};if(t.pointStyles.length){var o=t.pointStyles[0].getText();o&&(i.LabelStyle=o);var s=t.pointStyles[0].getImage();s&&"function"==typeof s.getSrc&&(i.IconStyle=s)}(t.lineStyles.length&&(a=t.lineStyles[0].getStroke())&&(i.LineStyle=a),t.polyStyles.length)&&((a=t.polyStyles[0].getStroke())&&!i.LineStyle&&(i.LineStyle=a),i.PolyStyle=t.polyStyles[0]);var h=VY[e[e.length-1].node.namespaceURI],p=Xc(i,h);Cs(r,zY,Cu,p,e,h)}),address:wn($o),description:wn($o),name:wn($o),open:wn(uS),phoneNumber:wn($o),styleUrl:wn($o),visibility:wn(uS)}),DY=Kt(mr,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),LY=vf("ExtendedData");function o8(n,t,e){var r={node:n};t.getId()&&n.setAttribute("id",t.getId());var i=t.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[t.getGeometryName()]=1;var s=Object.keys(i||{}).sort().filter(function(X){return!o[X]}),a=t.getStyleFunction();if(a){var c=a(t,0);if(c){var h=Array.isArray(c)?c:[c],p=h;if(t.getGeometry()&&(p=h.filter(function(X){var J=X.getGeometryFunction()(t);if(J){var $=J.getType();return"GeometryCollection"===$?J.getGeometriesArrayRecursive().filter(function(le){var ie=le.getType();return"Point"===ie||"MultiPoint"===ie}).length:"Point"===$||"MultiPoint"===$}})),this.writeStyles_){var m=h,E=h;t.getGeometry()&&(m=h.filter(function(X){var J=X.getGeometryFunction()(t);if(J){var $=J.getType();return"GeometryCollection"===$?J.getGeometriesArrayRecursive().filter(function(le){var ie=le.getType();return"LineString"===ie||"MultiLineString"===ie}).length:"LineString"===$||"MultiLineString"===$}}),E=h.filter(function(X){var J=X.getGeometryFunction()(t);if(J){var $=J.getType();return"GeometryCollection"===$?J.getGeometriesArrayRecursive().filter(function(le){var ie=le.getType();return"Polygon"===ie||"MultiPolygon"===ie}).length:"Polygon"===$||"MultiPolygon"===$}})),i.Style={pointStyles:p,lineStyles:m,polyStyles:E}}if(p.length&&void 0===i.name){var S=p[0].getText();S&&(i.name=S.getText())}}}var P=DY[e[e.length-1].node.namespaceURI],R=Xc(i,P);if(Cs(r,i3,Cu,R,e,P),s.length>0){var F=Xc(i,s);Cs(r,i3,LY,[{names:s,values:F}],e)}var j=e[0],G=t.getGeometry();G&&(G=mf(G,!0,j)),Cs(r,i3,n8,[G],e)}var kY=Kt(mr,["extrude","tessellate","altitudeMode","coordinates"]),NY=Kt(mr,{extrude:wn(uS),tessellate:wn(uS),altitudeMode:wn($o),coordinates:wn(function(n,t,e){var s,r=e[e.length-1],i=r.layout,o=r.stride;"XY"==i||"XYM"==i?s=2:"XYZ"==i||"XYZM"==i?s=3:qi(!1,34);var a=t.length,c="";if(a>0){c+=t[0];for(var h=1;h<s;++h)c+=","+t[h];for(var p=o;p<a;p+=o)for(c+=" "+t[p],h=1;h<s;++h)c+=","+t[p+h]}$o(n,c)})});function dS(n,t,e){var r=t.getFlatCoordinates(),i={node:n};i.layout=t.getLayout(),i.stride=t.getStride();var o=t.getProperties();o.coordinates=r;var a=kY[e[e.length-1].node.namespaceURI],c=Xc(o,a);Cs(i,NY,Cu,c,e,a)}var FY=Kt(mr,["color","fill","outline"]),s8=Kt(mr,{outerBoundaryIs:wn(i8),innerBoundaryIs:wn(i8)}),GY=vf("innerBoundaryIs"),BY=vf("outerBoundaryIs");function a8(n,t,e){var r=t.getLinearRings(),i=r.shift(),o={node:n};Cs(o,s8,GY,r,e),Cs(o,s8,BY,[i],e)}var jY=Kt(mr,{color:wn(yL),fill:wn(uS),outline:wn(uS)});function l8(n,t){Kc(n,Math.round(1e6*t)/1e6)}var VY=Kt(mr,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),zY=Kt(mr,{IconStyle:wn(function(n,t,e){var r={node:n},i={},o=t.getSrc(),s=t.getSize(),a=t.getImageSize(),c={href:o};if(s){c.w=s[0],c.h=s[1];var h=t.getAnchor(),p=t.getOrigin();p&&a&&0!==p[0]&&p[1]!==s[1]&&(c.x=p[0],c.y=a[1]-(p[1]+s[1])),!h||h[0]===s[0]/2&&h[1]===s[1]/2||(i.hotSpot={x:h[0],xunits:"pixels",y:s[1]-h[1],yunits:"pixels"})}i.Icon=c;var E=t.getScale();1!==E&&(i.scale=E);var S=t.getRotation();0!==S&&(i.heading=S);var x=t.getColor();x&&(i.color=x);var R=vY[e[e.length-1].node.namespaceURI],F=Xc(i,R);Cs(r,yY,Cu,F,e,R)}),LabelStyle:wn(function(n,t,e){var r={node:n},i={},o=t.getFill();o&&(i.color=o.getColor());var s=t.getScale();s&&1!==s&&(i.scale=s);var c=EY[e[e.length-1].node.namespaceURI],h=Xc(i,c);Cs(r,bY,Cu,h,e,c)}),LineStyle:wn(function(n,t,e){var r={node:n},i={color:t.getColor(),width:Number(t.getWidth())||1},s=CY[e[e.length-1].node.namespaceURI],a=Xc(i,s);Cs(r,SY,Cu,a,e,s)}),PolyStyle:wn(function(n,t,e){var r={node:n},i=t.getFill(),o=t.getStroke(),s={color:i?i.getColor():void 0,fill:!!i&&void 0,outline:!!o&&void 0},c=FY[e[e.length-1].node.namespaceURI],h=Xc(s,c);Cs(r,jY,Cu,h,e,c)})});const YY=vW,vr={detectSupport:function(){var n=!0,t=window.navigator.userAgent.toLowerCase();return(-1!==t.indexOf("iphone")||-1!==t.indexOf("ipod")||-1!==t.indexOf("ipad")||-1!==t.indexOf("android")||-1!==t.indexOf("mobile")||-1!==t.indexOf("blackberry")||-1!==t.indexOf("tablet")||-1!==t.indexOf("phone")||-1!==t.indexOf("touch"))&&(n=!1),(-1!==t.indexOf("msie")||-1!==t.indexOf("trident"))&&(n=!0),n},assign:function(n,t){for(var e in n=n||{},t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},mergeParams:function(n,t,e){if(n&&t)for(var r in void 0===e&&(e=!0),t)t.hasOwnProperty(r)&&("object"==typeof t[r]?n.hasOwnProperty(r)?this.mergeParams(n[r],t[r],e):n[r]=t[r]:n.hasOwnProperty(r)?e&&(n[r]=t[r]):n[r]=t[r])}};var il=Ki_getLogger("extended KML format"),u8=function(n){function t(s){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");n.call(this,s),this.options=s||{}}function r(s){var a=null,h="undefined"!=typeof window?window:null;return"object"==typeof exports&&null===window?a=(new(0,ee(284).a)).parseFromString(s,"text/xml"):h.DOMParser?a=(new h.DOMParser).parseFromString(s,"text/xml"):h.ActiveXObject?((a=new h.ActiveXObject("Microsoft.XMLDOM")).async=!1,a.loadXML(s)):il.log("Incompatible environment for DOM Parser !"),il.trace(a),a}function o(s,a,c){var p=s.documentElement.childNodes,m=p;1===p.length&&"Document"===p[0].nodeName&&(m=p[0].childNodes);for(var E={},S=-1,x=0;x<m.length;x++){var P=m[x];switch(P.nodeName){case"Style":var R=P.attributes[0];R&&"id"===R.nodeName&&(E[R.nodeValue]=P);break;case"Placemark":S++;for(var j=P.childNodes,G=!1,X=null,J=null,$=P,le=0;le<j.length;le++)switch(j[le].nodeName){case"Point":G=!0;break;case"Style":X=j[le].childNodes;break;case"styleUrl":var ie=j[le].textContent.slice(1);E[ie]&&(X=E[ie].childNodes);break;case"ExtendedData":J=j[le].childNodes;break;case"name":$=null}if(J){il.log("ExtendedData :",J);var Fe=c.extendedData;Fe&&"function"==typeof Fe&&Fe(a[S],J)}if($){il.log("Name :",$);var Ce=c.nameData;Ce&&"function"==typeof Ce&&Ce(a[S],$)}if(G&&X&&X.length){for(var $e=null,ot=null,st=0;st<X.length;st++)switch(X[st].nodeName){case"LabelStyle":$e=X[st];break;case"IconStyle":ot=X[st]}var dt=a[S].getProperties().name,kt=a[S].getProperties().description;if(il.trace(dt||kt),!ot&&$e){var Zt=c.labelStyle;Zt&&"function"==typeof Zt&&Zt(a[S],$e)}else if(ot&&!$e){var gt=c.iconStyle;gt&&"function"==typeof gt&&gt(a[S],ot)}else if(ot&&$e){var Re=c.iconLabelStyle;Re&&"function"==typeof Re&&Re(a[S],ot,$e)}}break;default:il.trace("tag is not processing !")}}}return n&&(t.__proto__=n),(t.prototype=Object.create(n.prototype,{})).constructor=t,t.prototype.writeFeatures=function(s,a){return il.log("overload : ol.format.KML.writeFeatures"),this._writeExtendStylesFeatures(s,a)},t.prototype._writeExtendStylesFeatures=function(s,a){var c=n.prototype.writeFeatures.call(this,s,a),h=r(c);if(null===h)return c;var p=function(R,F){if(il.trace("label with style :",F),R&&R.getProperties().name&&R.getStyle()instanceof br){var G=R.getStyle().getText().getStroke();if(!G)return;var X=j(G.getColor())||j("#FFFFFF"),J=G.getWidth()||"0";if(F&&0===F.getElementsByTagName("LabelStyleSimpleExtensionGroup").length){var ie=h.createElement("LabelStyleSimpleExtensionGroup");ie.setAttribute("fontFamily","Sans"),ie.setAttribute("haloColor",X),ie.setAttribute("haloRadius",J),ie.setAttribute("haloOpacity","1"),F.appendChild(ie)}}function j(Fe){var Ce=Fe.toString(16);"#"===Ce.charAt(0)&&(Ce=Ce.slice(1));var $e=1,ot=$e=($e=parseInt(255*$e,10)).toString(16);return ot+=Ce.substr(4,2),ot+=Ce.substr(2,2),(ot+=Ce.substr(0,2)).toLowerCase()}},m=function(R,F){if(il.trace("marker with style (hotspot):",F),R&&R.getStyle()instanceof br){var D=R.getStyle().getImage();if(!D)return;var j=0,G=0,$=D.getSize(),le=D.getAnchor();if(le.length&&(j=le[0],G=(G=le[1])===$[1]?0:$[1]-G),F&&0===F.getElementsByTagName("hotSpot").length){var ie=h.createElement("hotSpot");ie.setAttribute("x",j),ie.setAttribute("y",G),ie.setAttribute("xunits","pixels"),ie.setAttribute("yunits","pixels"),F.appendChild(ie)}}};o(h,s,{labelStyle:p,iconStyle:m,iconLabelStyle:function(R,F,D){il.trace("write an icon with a label"),m(R,F),p(R,D)},nameData:function(R,F){for(var D=0;D<F.length;D++)if("name"===F[D].nodeName)return;var G=R.getProperties().name;if(G){var X=h.createElement("name");X.innerHTML=G,F.appendChild(X)}}});var x=function(s){var c=(new XMLSerializer).serializeToString(s);return il.trace(c),c}(h);x||(x=c);var P=function(s){for(var p="",m=(s=s.replace(/(>)\s*(<)(\/*)/g,"$1\n$2$3").replace(/ *(.*) +\n/g,"$1\n").replace(/(<.+>)(.+\n)/g,"$1\n$2")).split("\n"),E=0,S="other",x={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},P=0;P<m.length;P++){var R=m[P],F=Boolean(R.match(/<.+\/>/)),D=Boolean(R.match(/<\/.+>/)),j=Boolean(R.match(/<[^!].*>/)),G=F?"single":D?"closing":j?"opening":"other",X=S+"->"+G;S=G;var J="";E+=x[X];for(var $=0;$<E;$++)J+="\t";"opening->closing"===X?p=p.substr(0,p.length-1)+R+"\n":p+=J+R+"\n"}return il.trace(p),p}(x);return""===P&&(P=c),P},t.prototype.readFeatures=function(s,a){il.log("overload : ol.format.KML.readFeatures");var c=this._readExtendStylesFeatures(s,a);return il.trace("Styles \xe9tendus",c),c},t.prototype._readExtendStylesFeatures=function(s,a){var h,c=n.prototype.readFeatures.call(this,s,a);if(null===(h=r(("string"==typeof s?s:s.documentElement.outerHTML).replace(/\n/g,"").replace(/(>)\s*(<)/g,"$1$2"))))return c;var m=function(P,R){if(il.trace("label with style :",R),P){for(var D=P.getProperties().name||"---",j=F("ff000000"),G="#FFFFFF",X=0,le=!1,ie=R.childNodes,Fe=0;Fe<ie.length;Fe++)switch(ie[Fe].nodeName){case"scale":case"colorMode":break;case"color":j=F(ie[Fe].textContent);break;case"LabelStyleSimpleExtensionGroup":le=!0;for(var Ce=ie[Fe].attributes,$e=0;$e<Ce.length;$e++)switch(Ce[$e].nodeName){case"fontFamily":break;case"haloColor":G=F(Ce[$e].nodeValue);break;case"haloRadius":X=parseInt(Ce[$e].nodeValue,10)}}le?P.setStyle(new br({image:new wu({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",size:[51,38],anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),text:new UE({font:"16px Sans",textAlign:"left",text:D,fill:new ro({color:j}),stroke:new Gi({color:G,width:X})})})):il.trace("it's not a Label Style Simple Extension Group !")}function F(ot){var st="";st+=ot.substr(6,2),st+=ot.substr(4,2),st+=ot.substr(2,2);for(var dt=parseInt(st,16).toString(16),kt="",Qe=dt.length||0,Zt=0;Zt<6-Qe;Zt++)kt+="0";return(dt="#"+kt+dt).toString(16)}},E=function(P,R){il.trace("hotspot :",R);for(var F=null,D=null,j=!1,G=51,X=38,J=!1,$=25.5,le="pixels",ie=38,Fe="pixels",Ce=R.childNodes,$e=0;$e<Ce.length;$e++)switch(Ce[$e].nodeName){case"Icon":for(var ot=Ce[$e].childNodes,st=0;st<ot.length;st++)switch(ot[st].nodeName){case"href":F=ot[st].textContent;break;case"gx:w":j=!0,G=parseFloat(ot[st].textContent);break;case"gx:h":j=!0,X=parseFloat(ot[st].textContent)}break;case"hotSpot":J=!0;for(var dt=Ce[$e].attributes,kt=0;kt<dt.length;kt++)switch(dt[kt].nodeName){case"x":$=parseFloat(dt[kt].nodeValue);break;case"y":ie=parseFloat(dt[kt].nodeValue);break;case"yunits":le=dt[kt].nodeValue;break;case"xunits":Fe=dt[kt].nodeValue}break;case"scale":D=parseFloat(Ce[$e].textContent)}var Qe={src:F,crossOrigin:"anonymous",scale:D||1};j&&vr.mergeParams(Qe,{size:[G,X]}),J&&vr.mergeParams(Qe,{anchor:[$,ie],anchorOrigin:"bottom-left",anchorXUnits:le||"pixels",anchorYUnits:Fe||"pixels"});var Zt=P.getStyleFunction();if(Zt){var gt=Zt(P,0);if(gt&&0!==gt.length){var Re=1===gt.length?gt[0]:gt[gt.length-1];P.setStyle(new br({image:new wu(Qe),text:Re.getText()}))}}};return o(h,c,{labelStyle:this.options.showPointNames?m:null,iconStyle:E,iconLabelStyle:this.options.showPointNames?function(P,R,F){il.trace("display icon and label"),m(P,F),E(P,R)}:E,extendedData:function(P,R){if(il.trace("extendData :",R),P){for(var F=P.getProperties().name||"",D=P.getProperties().description||"",j=null,G=0;G<R.length;G++){var X=R[G],J=X.attributes[0],$=X.childNodes;if("name"===J.nodeName)switch(J.nodeValue){case"label":F=X.textContent;break;case"title":case"attributetitle":for(var le=0;le<$.length;le++)"value"===$[le].nodeName&&(j=$[le].textContent)}}j&&(D=D?j+" : "+D:j),P.setProperties({name:F,description:D})}}}),c},t}(YY);const EL=u8;window.ol&&window.ol.format&&(window.ol.format.KMLExtended=u8);var c8=function(n){function t(e){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");n.call(this,e)}return n&&(t.__proto__=n),(t.prototype=Object.create(n.prototype,{})).constructor=t,t.prototype.getFeatureInfoUrl=function(e,r,i,o){var G,X,J,$,ie,Fe,Ce,$e,s=this.option&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,a=this.tileGrid,c=this.tileGrid.getTileCoordForCoordAndResolution(e,r),p=a.getTileCoordExtent(c),m=(J=i,$=[0,0,0],ie=(G=c)[1],Fe=G[2],Ce=(X=a).getTileCoordExtent(G),null!=($e=J.getExtent())&&J.isGlobal()&&(ie%=Math.ceil(Os($e)/Os(Ce)),$[0]=G[0],$[1]=ie,$[2]=G[2],Ce=X.getTileCoordExtent($,[1/0,1/0,-1/0,-1/0])),oa(Ce,$e)?[G[0],ie,Fe]:null);if(!(a.getResolutions().length<=c[0])){var E=a.getResolution(c[0]),S=a.getMatrixIds()[c[0]],x={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:m[1],TILEROW:m[2],TILEMATRIX:S,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};vr.assign(x,o);var P=Math.floor((e[0]-p[0])/(E/s)),R=Math.floor((p[3]-e[1])/(E/s)),F=a.getTileSize(c[0]);return P=Math.min(P,(F[0]|F)-1),R=Math.max(R,0),x.I=P,x.J=R,aa.Helper.normalyzeUrl(this.urls[0],x)}},t}(d);const d8=c8;window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=c8);var XY=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const f8=function(n){function t(e){var r=n.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return r.matrixIds_=e.matrixIds,r}return XY(t,n),t.prototype.getMatrixId=function(e){return this.matrixIds_[e]},t.prototype.getMatrixIds=function(){return this.matrixIds_},t}(OC);var p8=Ki_getLogger("config");const Ul={configuration:null,isConfigLoaded:function(){var n="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{};return!(!n.Gp||!n.Gp.Config||0===Object.keys(n.Gp.Config).length||(this.configuration=n.Gp.Config,0))},getLayerId:function(n,t){var e=null;if(this.configuration){var r=this.configuration.layers;for(var i in r)if(r.hasOwnProperty(i)){var o=i.split("$");if(n===o[0]&&o[1]){var s=o[1].split(":");if(o[1].split(";")[1]===t){e=i;break}if(s[2]===t){e=i;break}}}}return e||p8.error("ERROR layer id (layer name: "+n+" / service: "+t+") was not found !?"),e},getLayerParams:function(n,t,e){var r={};if(this.configuration){var i=this.getLayerId(n,t);if(i){var o=this.configuration.layers[i],s=o.apiKeys[0];if(e&&e!==s)return void p8.error("ERROR different keys ("+e+" !== "+s+") !?");r.key=e=e||s,r.url=o.getServerUrl(e),r.version=o.getServiceParams().version,r.styles=o.getDefaultStyle(),r.format=o.getDefaultFormat(),r.projection=o.getDefaultProjection(),r.minScale=o.getMinScaleDenominator(),r.maxScale=o.getMaxScaleDenominator(),r.extent=o.getBBOX(),r.legends=o.getLegends(),r.metadata=o.getMetadata(),r.originators=o.getOriginators(),r.title=o.getTitle(),r.description=o.getDescription(),r.quicklookUrl=o.getQuicklookUrl(),o.wmtsOptions&&(r.tileMatrixSetLimits=o.wmtsOptions.tileMatrixSetLimits);var a=o.getTMSID();if(a){r.TMSLink=a;var c=this.configuration.getTMSConf(a);r.matrixOrigin=c.getTopLeftCorner(),r.nativeResolutions=c.nativeResolutions,r.matrixIds=c.matrixIds,r.tileMatrices=c.tileMatrices}}}return r},getServiceParams:function(n,t,e){var r={};if(this.configuration){var i=this.getLayerId(n,t);if(i){var o=this.configuration.layers[i],s=o.apiKeys[0];if(e&&e!==s)return;r.key=e=e||s,r.url=o.getServerUrl(e),r.version=o.getServiceParams().version,r.extent=o.getBBOX(),r.title=o.getTitle(),r.description=o.getDescription()}}return r},getResolutions:function(){var n=[];return this.configuration&&(n=this.configuration.generalOptions.wgs84Resolutions),n},getTileMatrix:function(n){var t={};return this.configuration&&n&&(t=this.configuration.tileMatrixSets[n.toUpperCase()]),t},getGlobalConstraints:function(n){var t={};if(n){var e=this.configuration.layers[n];t.projection=e.getDefaultProjection(),t.minScale=e.getMinScaleDenominator(),t.maxScale=e.getMaxScaleDenominator(),t.extent=e.getBBOX()}return t}},g8={getZoomLevelFromScaleDenominator:function(n,t){var e={};switch(t){case"EPSG:2154":e={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:e={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424}}var r=28e-5*n;for(var i in e)if(e.hasOwnProperty(i)&&e[i]<=r)return parseInt(i,10);return 0},getAttributions:function(n){var t=n.zoom,e=[];if(null!=n.originators&&n.visibility)for(var r,i=0,o=n.originators.length;i<o;i++){r=!0;for(var s=n.originators[i],a=n.originators[i].constraints||[],c=0,h=a.length;c<h;c++){var p=a[c];r=!0;var m=this.getZoomLevelFromScaleDenominator(p.maxScaleDenominator,n.crs),E=this.getZoomLevelFromScaleDenominator(p.minScaleDenominator,n.crs)||21;m&&m>t&&(r=!1),r&&E&&E<t&&(r=!1);var S=p.bbox;if(r&&S){r=!1;var x=n.extent;if(x&&this.intersects(x,[S.top,S.left,S.bottom,S.right])){r=!0;break}}}if(r){var R=s.logo,F=s.url,D=s.name?s.name:"",j=s.attribution,G=document.createElement("div");G.className="gp-control-attribution";var X=null;(X=document.createElement("a")).className="gp-control-attribution-link",X.target="_blank",G.appendChild(X),F&&(X.href=F);var $=null;R?($=document.createElement("img"),X?($.className="gp-control-attribution-image",X.appendChild($)):($.className="",G.appendChild($)),$.src=R,$.title=j||D,$.style.height="30px",$.style.width="30px"):X.textContent=D||j||F||"",e.push(G.innerHTML+" ")}}return e},intersects:function(n,t){return n[1]<=t[3]&&t[1]<=n[3]&&n[2]<=t[0]&&t[2]<=n[0]}};var JY=Ki_getLogger("sourcewmts"),m8=function(n){function t(e){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof e.layer)throw new Error("ERROR WRONG TYPE : layer");if(void 0===e.ssl&&(e.ssl=!0),!Ul.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var r=Ul.getLayerId(e.layer,"WMTS");if(!r||!Ul.configuration.getLayerConf(r))return JY.log("[source WMTS] ERROR : "+e.layer+" cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key."),new n({});var i=Ul.getLayerParams(e.layer,"WMTS",e.apiKey),o=!1===e.ssl?"http://":"https://";this._originators=i.originators,this._legends=i.legends,this._metadata=i.metadata;var s={url:aa.Helper.normalyzeUrl(i.url.replace(/(http|https):\/\//,o),{"gp-ol-ext":wp.olExtVersion||wp.i8},!1),version:i.version,style:i.styles,format:i.format,projection:i.projection,maxZoom:g8.getZoomLevelFromScaleDenominator(i.minScale),layer:e.layer,matrixSet:i.TMSLink,tileGrid:new f8({resolutions:i.nativeResolutions,matrixIds:i.matrixIds,origin:[i.matrixOrigin.x,i.matrixOrigin.y]})};vr.mergeParams(s,e.olParams),n.call(this,s),this._originators=i.originators,this._legends=i.legends,this._metadata=i.metadata,this._description=i.description,this._title=i.title,this._quicklookUrl=i.quicklookUrl}return n&&(t.__proto__=n),(t.prototype=Object.create(n.prototype,{})).constructor=t,t}(d8);const v8=m8;window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=m8);var QY=Ki_getLogger("sourcewms"),y8=function(n){function t(e){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof e.layer)throw new Error("ERROR WRONG TYPE : layer");if(void 0===e.ssl&&(e.ssl=!0),!Ul.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var r=Ul.getLayerId(e.layer,"WMS");if(!r||!Ul.configuration.getLayerConf(r))return QY.log("[source WMS] ERROR : "+e.layer+" cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key."),new n({});var i=Ul.getLayerParams(e.layer,"WMS",e.apiKey),s={url:aa.Helper.normalyzeUrl(i.url.replace(/(http|https):\/\//,!1===e.ssl?"http://":"https://"),{"gp-ol-ext":wp.olExtVersion||wp.i8},!1),params:{SERVICE:"WMS",LAYERS:e.layer,VERSION:i.version,STYLES:i.styles,FORMAT:i.format}};vr.mergeParams(s,e.olParams),n.call(this,s),this._originators=i.originators,this._legends=i.legends,this._metadata=i.metadata,this._title=i.title,this._description=i.description,this._quicklookUrl=i.quicklookUrl}return n&&(t.__proto__=n),(t.prototype=Object.create(n.prototype,{})).constructor=t,t}(HO);const _8=y8;window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=y8);var $Y=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const tq=function(n){function t(e){var r=this,i=e||{},o=qa({},i);return delete o.preload,delete o.useInterimTilesOnError,(r=n.call(this,o)||this).setPreload(void 0!==i.preload?i.preload:0),r.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),r}return $Y(t,n),t.prototype.getPreload=function(){return this.get("preload")},t.prototype.setPreload=function(e){this.set("preload",e)},t.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},t.prototype.setUseInterimTilesOnError=function(e){this.set("useInterimTilesOnError",e)},t}(LB);var nq=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const b8=function(n){function t(e){var r=n.call(this,e)||this;return r.extentChanged=!0,r.renderedExtent_=null,r.renderedProjection=null,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=[1/0,1/0,-1/0,-1/0],r.tmpTileRange_=new rP(0,0,0,0),r}return nq(t,n),t.prototype.isDrawableTile=function(e){var r=this.getLayer(),i=e.getState(),o=r.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!o},t.prototype.getTile=function(e,r,i,o){var s=o.pixelRatio,a=o.viewState.projection,c=this.getLayer(),p=c.getSource().getTile(e,r,i,s,a);return 3==p.getState()&&(c.getUseInterimTilesOnError()?c.getPreload()>0&&(this.newTiles_=!0):p.setState(2)),this.isDrawableTile(p)||(p=p.getInterimTile()),p},t.prototype.loadedTileCallback=function(e,r,i){return!!this.isDrawableTile(i)&&n.prototype.loadedTileCallback.call(this,e,r,i)},t.prototype.prepareFrame=function(e){return!!this.getLayer().getSource()},t.prototype.renderFrame=function(e,r){var i=e.layerStatesArray[e.layerIndex],o=e.viewState,s=o.projection,a=o.resolution,c=o.center,h=o.rotation,p=e.pixelRatio,m=this.getLayer(),E=m.getSource(),S=E.getRevision(),x=E.getTileGridForProjection(s),P=x.getZForResolution(a,E.zDirection),R=x.getResolution(P),F=e.extent,D=i.extent&&eP(i.extent);D&&(F=Tp(F,eP(i.extent)));var j=E.getTilePixelRatio(p),G=Math.round(e.size[0]*j),X=Math.round(e.size[1]*j);if(h){var J=Math.round(Math.sqrt(G*G+X*X));G=J,X=J}var $=R*G/2/j,le=R*X/2/j,ie=[c[0]-$,c[1]-le,c[0]+$,c[1]+le],Fe=x.getTileRangeForExtentAndZ(F,P),Ce={};Ce[P]={};var $e=this.createLoadedTileFinder(E,s,Ce),ot=this.tmpExtent,st=this.tmpTileRange_;this.newTiles_=!1;for(var dt=Fe.minX;dt<=Fe.maxX;++dt)for(var kt=Fe.minY;kt<=Fe.maxY;++kt){var Qe=this.getTile(P,dt,kt,e);if(this.isDrawableTile(Qe)){var Zt=Lr(this);if(2==Qe.getState()){Ce[P][Qe.tileCoord.toString()]=Qe;var gt=Qe.inTransition(Zt);!this.newTiles_&&(gt||-1===this.renderedTiles.indexOf(Qe))&&(this.newTiles_=!0)}if(1===Qe.getAlpha(Zt,e.time))continue}var Re=x.getTileCoordChildTileRange(Qe.tileCoord,st,ot),Xe=!1;Re&&(Xe=$e(P+1,Re)),Xe||x.forEachTileCoordParentTileRange(Qe.tileCoord,$e,st,ot)}var Oe=R/a;Fp(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/j,1/j,h,-G/2,-X/2);var qt=function(n){return NT?KO(n):(eD||(eD=Ju(1,1).canvas),eD.style.transform=KO(n),eD.style.transform)}(this.pixelTransform);this.useContainer(r,qt,i.opacity);var Pt=this.context,$t=Pt.canvas;uG(this.inversePixelTransform,this.pixelTransform),Fp(this.tempTransform_,G/2,X/2,Oe,Oe,0,-G/2,-X/2),$t.width!=G||$t.height!=X?($t.width=G,$t.height=X):this.containerReused||Pt.clearRect(0,0,G,X),D&&this.clipUnrotated(Pt,e,D),this.preRender(Pt,e),this.renderedTiles.length=0;var Pn,ft,Mn,dn=Object.keys(Ce).map(Number);dn.sort(sf),1!==i.opacity||this.containerReused&&!E.getOpaque(e.viewState.projection)?(Pn=[],ft=[]):dn=dn.reverse();for(var $n=dn.length-1;$n>=0;--$n){var kn=dn[$n],ai=E.getTilePixelSize(kn,p,s),Mr=x.getResolution(kn)/R,Ui=ai[0]*Mr*Oe,Wr=ai[1]*Mr*Oe,Ns=x.getTileCoordForCoordAndZ(lf(ie),kn),Nt=x.getTileCoordExtent(Ns),So=Ra(this.tempTransform_,[j*(Nt[0]-ie[0])/R,j*(ie[3]-Nt[3])/R]),os=j*E.getGutterForProjection(s),ts=Ce[kn];for(var $i in ts){var Ss=(Qe=ts[$i]).tileCoord,Xn=So[0]-(Ns[1]-Ss[1])*Ui,mo=Math.round(Xn+Ui),Uo=So[1]-(Ns[2]-Ss[2])*Wr,zs=Math.round(Uo+Wr),co=mo-(dt=Math.round(Xn)),Kn=zs-(kt=Math.round(Uo)),ps=P===kn;if(!(gt=ps&&1!==Qe.getAlpha(Lr(this),e.time)))if(Pn){Pt.save(),Mn=[dt,kt,dt+co,kt,dt+co,kt+Kn,dt,kt+Kn];for(var vo=0,Vr=Pn.length;vo<Vr;++vo)if(P!==kn&&kn<ft[vo]){var li=Pn[vo];Pt.beginPath(),Pt.moveTo(Mn[0],Mn[1]),Pt.lineTo(Mn[2],Mn[3]),Pt.lineTo(Mn[4],Mn[5]),Pt.lineTo(Mn[6],Mn[7]),Pt.moveTo(li[6],li[7]),Pt.lineTo(li[4],li[5]),Pt.lineTo(li[2],li[3]),Pt.lineTo(li[0],li[1]),Pt.clip()}Pn.push(Mn),ft.push(kn)}else Pt.clearRect(dt,kt,co,Kn);this.drawTileImage(Qe,e,dt,kt,co,Kn,os,ps,i.opacity),Pn&&!gt&&Pt.restore(),this.renderedTiles.push(Qe),this.updateUsedTiles(e.usedTiles,E,Qe)}}return this.renderedRevision=S,this.renderedResolution=R,this.extentChanged=!this.renderedExtent_||!Sp(this.renderedExtent_,ie),this.renderedExtent_=ie,this.renderedPixelRatio=p,this.renderedProjection=s,this.manageTilePyramid(e,E,x,p,s,F,P,m.getPreload()),this.scheduleExpireCache(e,E),this.postRender(Pt,e),i.extent&&Pt.restore(),qt!==$t.style.transform&&($t.style.transform=qt),this.container},t.prototype.drawTileImage=function(e,r,i,o,s,a,c,h,p){var m=this.getTileImage(e);if(m){var E=Lr(this),S=h?e.getAlpha(E,r.time):1,x=p*S,P=x!==this.context.globalAlpha;P&&(this.context.save(),this.context.globalAlpha=x),this.context.drawImage(m,c,c,m.width-2*c,m.height-2*c,i,o,s,a),P&&this.context.restore(),1!==S?r.animate=!0:h&&e.endTransition(E)}},t.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},t.prototype.getTileImage=function(e){return e.getImage()},t.prototype.scheduleExpireCache=function(e,r){if(r.canExpireCache()){var i=function(o,s,a){var c=Lr(o);c in a.usedTiles&&o.expireCache(a.viewState.projection,a.usedTiles[c])}.bind(null,r);e.postRenderFunctions.push(i)}},t.prototype.updateUsedTiles=function(e,r,i){var o=Lr(r);o in e||(e[o]={}),e[o][i.getKey()]=!0},t.prototype.manageTilePyramid=function(e,r,i,o,s,a,c,h,p){var m=Lr(r);m in e.wantedTiles||(e.wantedTiles[m]={});var P,R,F,D,j,G,E=e.wantedTiles[m],S=e.tileQueue;for(G=i.getMinZoom();G<=c;++G)for(R=i.getTileRangeForExtentAndZ(a,G,R),F=i.getResolution(G),D=R.minX;D<=R.maxX;++D)for(j=R.minY;j<=R.maxY;++j)c-G<=h?(0==(P=r.getTile(G,D,j,o,s)).getState()&&(E[P.getKey()]=!0,S.isKeyQueued(P.getKey())||S.enqueue([P,m,i.getTileCoordCenter(P.tileCoord),F])),void 0!==p&&p(P)):r.useTile(G,D,j,s)},t}(HB);var rq=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const bL=function(n){function t(e){return n.call(this,e)||this}return rq(t,n),t.prototype.createRenderer=function(){return new b8(this)},t}(tq);var w8=function(n){function t(e){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof e.layer)throw new Error("ERROR WRONG TYPE : layer");if(void 0===e.ssl&&(e.ssl=!0),!Ul.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var r;e.olParams&&e.olParams.sourceParams&&(r=e.olParams.sourceParams);var i=new v8({layer:e.layer,ssl:e.ssl,apiKey:e.apiKey,olParams:r}),o={source:i};if(void 0!==i.getLayer()){var c,s=Ul.getLayerId(e.layer,"WMTS"),a=Ul.getGlobalConstraints(s);a&&a.projection&&("string"==typeof a.projection&&(c=Ar(a.projection)),c&&c.getUnits()&&("m"===c.getUnits()?(o.minResolution=28e-5*(a.minScale-1),o.maxResolution=28e-5*(a.maxScale+1)):"degrees"===c.getUnits()&&(o.minResolution=28e-5*(a.minScale-1)*180/(6378137*Math.PI),o.maxResolution=28e-5*(a.maxScale+1)*180/(6378137*Math.PI))))}vr.mergeParams(o,e.olParams),n.call(this,o)}return n&&(t.__proto__=n),(t.prototype=Object.create(n.prototype,{})).constructor=t,t}(bL);const oq=w8;window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=w8);var C8=function(n){function t(e){if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof e.layer)throw new Error("ERROR WRONG TYPE : layer");if(void 0===e.ssl&&(e.ssl=!0),!Ul.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var r;e.olParams&&e.olParams.sourceParams&&(r=e.olParams.sourceParams);var i=new _8({layer:e.layer,ssl:e.ssl,apiKey:e.apiKey,olParams:r}),o={source:i};if(void 0!==i.getParams().LAYERS){var h,s=Ul.getLayerId(e.layer,"WMS"),a=Ul.getGlobalConstraints(s);r&&r.projection&&(o.extent=kd([a.extent.left,a.extent.bottom,a.extent.right,a.extent.top],"EPSG:4326",r.projection),"string"==typeof r.projection?h=Ar(r.projection):"object"==typeof r.projection&&r.projection.getCode()&&(h=Ar(r.projection.getCode())),h&&h.getUnits()&&("m"===h.getUnits()?(o.minResolution=28e-5*(a.minScale-1),o.maxResolution=28e-5*(a.maxScale+1)):"degrees"===h.getUnits()&&(o.minResolution=28e-5*(a.minScale-1)*180/(6378137*Math.PI),o.maxResolution=28e-5*(a.maxScale+1)*180/(6378137*Math.PI))))}vr.mergeParams(o,e.olParams),n.call(this,o)}return n&&(t.__proto__=n),(t.prototype=Object.create(n.prototype,{})).constructor=t,t}(bL);const sq=C8;window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=C8);var aq=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Su=function(n){function t(e){var r=n.call(this)||this;return r.element=e.element?e.element:null,r.target_=null,r.map_=null,r.listenerKeys=[],r.render_=e.render?e.render:Cp,e.target&&r.setTarget(e.target),r}return aq(t,n),t.prototype.disposeInternal=function(){FT(this.element),n.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(e){this.map_&&FT(this.element);for(var r=0,i=this.listenerKeys.length;r<i;++r)ya(this.listenerKeys[r]);this.listenerKeys.length=0,this.map_=e,this.map_&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Cp&&this.listenerKeys.push(Fl(e,"postrender",this.render,this)),e.render())},t.prototype.render=function(e){this.render_.call(this,e)},t.prototype.setTarget=function(e){this.target_="string"==typeof e?document.getElementById(e):e},t}(mh),ni={generate:function(){var n=Math.floor(Date.now());return function(){return n++}}(),name:function(n){var e=n.lastIndexOf("-");return-1===e?n:n.substring(0,e)},index:function(n){var t=null,e=this.name(n),r=e.lastIndexOf("_");return-1!==r&&(t=e.substring(r+1)),t},uuid:function(n){var t=null,e=n.lastIndexOf("-");return-1!==e&&(t=parseInt(n.substring(e+1),10)),t}};var cq=ee(8459),dq=ee.n(cq);const fq={_createDraggableElement:function(n,t){dq().create(n,{handle:".GPlayerName",draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(e){t._onDragAndDropLayerClick(e)}})},_addUID:function(n){return this._uid?n+"-"+this._uid:n},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPlayerSwitcher"),n.className="GPwidget",n},_createMainLayersShowElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowLayersList"),n.type="checkbox",n},_createMainLayersElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPlayersList"),n.className="GPpanel",n},_createMainPictoElement:function(){var n=this,t=document.createElement("label");t.id=this._addUID("GPshowLayersListPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowLayersList"),t.title="Afficher/masquer le gestionnaire de couches";var e=document.createElement("span");e.id=this._addUID("GPshowLayersListOpen"),e.className="GPshowAdvancedToolOpen",e.addEventListener("click",function(){if(document.getElementById(n._addUID("GPshowLayersList")).checked){for(var i=document.getElementsByClassName("GPlayerInfoOpened"),o=0;o<i.length;o++)i[o].className="GPlayerInfo";document.getElementById(n._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}}),t.appendChild(e);var r=document.createElement("span");return r.addEventListener("click",function(){if(document.getElementById(n._addUID("GPshowLayersList")).checked){for(var i=document.getElementsByClassName("GPlayerInfoOpened"),o=0;o<i.length;o++)i[o].className="GPlayerInfo";document.getElementById(n._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}}),r.id=n._addUID("GPshowLayersListClose"),t.appendChild(r),t},_createMainInfoElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPlayerInfoPanel"),n.className="GPpanel GPlayerInfoPanelClosed",n},_createContainerLayerElement:function(n){var t=document.createElement("div");t.id=this._addUID("GPlayerSwitcher_ID_"+n.id),t.className="GPlayerSwitcher_layer draggable-layer",t.appendChild(this._createBasicToolElement(n));for(var e=this._createAdvancedToolShowElement(n),r=0;r<e.length;r++)t.appendChild(e[r]);return t.appendChild(this._createAdvancedToolElement(n)),t},_createBasicToolElement:function(n){var t=document.createElement("div");t.id=this._addUID("GPbasicTools_ID_"+n.id),t.className="GPlayerBasicTools",t.appendChild(this._createBasicToolNameElement(n));for(var e=this._createBasicToolVisibilityElement(n),r=0;r<e.length;r++)t.appendChild(e[r]);return t},_createBasicToolNameElement:function(n){var t=document.createElement("span");return t.id=this._addUID("GPname_ID_"+n.id),t.className="GPlayerName",t.title=n.description||n.title,t.innerHTML=n.title,t},_createBasicToolVisibilityElement:function(n){var t=[],e=void 0===n.visibility||n.visibility,r=this._addUID("GPvisibility_ID_"+n.id),i=document.createElement("input");i.id=r,i.type="checkbox",i.checked=e;var o=document.createElement("label");o.htmlFor=r,o.id=this._addUID("GPvisibilityPicto_ID_"+n.id),o.className="GPlayerVisibility",o.title="Afficher/masquer la couche";var s=this;return i.addEventListener?i.addEventListener("click",function(a){s._onVisibilityLayerClick(a)}):i.attachEvent&&i.attachEvent("onclick",function(a){s._onVisibilityLayerClick(a)}),t.push(i),t.push(o),t},_createAdvancedToolShowElement:function(n){var t=[],e=document.createElement("label");e.id=this._addUID("GPshowAdvancedToolsPicto_ID_"+n.id),e.htmlFor=this._addUID("GPshowAdvancedTools_ID_"+n.id),e.title="Plus d'outils",e.className="GPshowMoreOptions GPshowLayerAdvancedTools";var r=document.createElement("input");return r.type="checkbox",r.id=this._addUID("GPshowAdvancedTools_ID_"+n.id),t.push(r),t.push(e),t},_createAdvancedToolElement:function(n){var t=document.createElement("div");if(t.id=this._addUID("GPadvancedTools_ID_"+n.id),t.className="GPlayerAdvancedTools",t.appendChild(this._createAdvancedToolDeleteElement(n)),n.title&&n.description&&t.appendChild(this._createAdvancedToolInformationElement(n)),"feature"!==n.type)for(var e=this._createAdvancedToolOpacityElement(n),r=0;r<e.length;r++)t.appendChild(e[r]);return t},_createAdvancedToolDeleteElement:function(n){var t=document.createElement("div");t.id=this._addUID("GPremove_ID_"+n.id),t.className="GPlayerRemove",t.title="Supprimer la couche",t.layerId=n.id;var e=this;return t.addEventListener?t.addEventListener("click",function(r){e._onDropLayerClick(r)}):t.attachEvent&&t.attachEvent("onclick",function(r){e._onDropLayerClick(r)}),t},_createAdvancedToolInformationElement:function(n){var t=document.createElement("div");t.id=this._addUID("GPinfo_ID_"+n.id),t.className="GPlayerInfo",t.title="Informations/l\xe9gende",t.layerId=n.id;var e=this;return t.addEventListener?t.addEventListener("click",function(r){e._onOpenLayerInfoClick(r)}):t.attachEvent&&t.attachEvent("onclick",function(r){e._onOpenLayerInfoClick(r)}),t},_createAdvancedToolOpacityElement:function(n){var t=[],e=document.createElement("div");e.id=this._addUID("GPopacity_ID_"+n.id),e.className="GPlayerOpacity",e.title="Opacit\xe9";var r=void 0!==n.opacity?n.opacity:1;r=Math.round(100*r);var i=document.createElement("input");i.id=this._addUID("GPopacityValueDiv_ID_"+n.id),i.type="range",i.value=r;var o=this;i.addEventListener?i.addEventListener("change",function(c){o._onChangeLayerOpacity(c)}):i.attachEvent&&i.attachEvent("onchange",function(c){o._onChangeLayerOpacity(c)}),i.addEventListener?i.addEventListener("input",function(c){o._onChangeLayerOpacity(c)}):i.attachEvent&&i.attachEvent("oninput",function(c){o._onChangeLayerOpacity(c)}),e.appendChild(i);var s=document.createElement("div");s.id=this._addUID("GPopacityValueDiv_ID_"+n.id),s.className="GPlayerOpacityValue";var a=document.createElement("span");return a.id=this._addUID("GPopacityValue_ID_"+n.id),a.innerHTML=r+"%",s.appendChild(a),t.push(e),t.push(s),t},_createContainerLayerInfoElement:function(n){var t=document.createElement("div");t.id=this._addUID("GPlayerInfoContent");var e=document.createElement("div");if(e.id=this._addUID("GPlayerInfoTitle"),e.innerHTML=n.title,t.appendChild(e),n.quicklookUrl){var r=document.createElement("div");r.id=this._addUID("GPlayerInfoQuicklook"),r.title="Afficher un aper\xe7u de la couche";var i=document.createElement("a");i.href=n.quicklookUrl,i.appendChild(r),t.appendChild(i)}var o=document.createElement("div");o.id=this._addUID("GPlayerInfoClose"),o.title="Fermer la fen\xeatre";var s=this,a=function(){document.getElementById(s._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed";for(var Fe=document.getElementsByClassName("GPlayerInfoOpened"),Ce=0;Ce<Fe.length;Ce++)Fe[Ce].className="GPlayerInfo"};o.addEventListener?o.addEventListener("click",a):o.attachEvent&&o.attachEvent("onclick",a),t.appendChild(o);var c=document.createElement("div");if(c.id=this._addUID("GPlayerInfoDescription"),c.innerHTML=n.description,t.appendChild(c),n.metadata){var h=document.createElement("div");h.id=this._addUID("GPlayerInfoMetadata");var p=document.createElement("div");p.className="GPlayerInfoSubtitle",p.innerHTML="M\xe9tadonn\xe9es",h.appendChild(p);for(var m=0;m<n.metadata.length;m++){var E=n.metadata[m].url,S=document.createElement("div");S.className="GPlayerInfoLink";var x=document.createElement("a");x.href=E,x.innerHTML=E,S.appendChild(x),h.appendChild(S)}0!==n.metadata.length&&t.appendChild(h)}if(n.legends){var P=document.createElement("div");P.id=this._addUID("GPlayerInfoLegend");var R=document.createElement("div");R.className="GPlayerInfoSubtitle",R.innerHTML="L\xe9gende",P.appendChild(R);for(var F={},D=n.maxScaleDenominator||56e7,j=0;j<n.legends.length;j++){var G=n.legends[j].minScaleDenominator;if(G){var X=G.toString();G=Math.round(parseInt(X.substring(0,3),10)/10)*Math.pow(10,X.length-2)}else G=270;F[G]=n.legends[j]}for(var J in F)if(F.hasOwnProperty(J)){var $=F[J].url;if("string"==typeof $&&-1===$.toLowerCase().indexOf("nolegend.jpg")){var le=document.createElement("div");le.className="GPlayerInfoLink",D=F[J].maxScaleDenominator||D;var ie=document.createElement("a");ie.href=$,ie.innerHTML="Du 1/"+J+" au 1/"+D,le.appendChild(ie),P.appendChild(le)}else delete F[J]}0!==Object.keys(F).length&&t.appendChild(P)}return t}};var VE=Ki_getLogger("layerswitcher"),S8=function(n){function t(e){var r=(e=e||{}).options||{},i=e.layers||[];if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(i))throw new Error("ERROR WRONG_TYPE : layers should be an array");if("object"!=typeof r)throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize(r,i);var o=this._container=this._initContainer(r);n.call(this,{element:o,target:r.target,render:r.render})}return n&&(t.__proto__=n),t.prototype=Object.create(n.prototype,{}),vr.assign(t.prototype,fq),t.prototype.constructor=t,t.prototype.setMap=function(e){if(e)this._addMapLayers(e),this._listeners.onMoveListener=e.on("moveend",()=>this._onMapMoveEnd(e)),this._listeners.onAddListener=e.getLayers().on("add",i=>{var s,o=i.element;o.hasOwnProperty("gpLayerId")?s=o.gpLayerId:(o.gpLayerId=s=this._layerId,this._layerId++),this._layers[s]||this.addLayer(o)}),this._listeners.onRemoveListener=e.getLayers().on("remove",i=>{var o=i.element;this._layers[o.gpLayerId]&&this.removeLayer(o)});else{Aa(this._listeners.onMoveListener),Aa(this._listeners.onAddListener),Aa(this._listeners.onRemoveListener);for(var r=this._layersOrder.length-1;r>=0;r--)this._layersOrder[r].layer.setZIndex(0)}n.prototype.setMap.call(this,e)},t.prototype.addLayer=function(e,r){var i=this.getMap();if(r=r||{},e){var o=e.gpLayerId;if(void 0!==o){var s=!1;if(i.getLayers().forEach(F=>{F.gpLayerId===o&&(s=!0)}),s)if(this._layers[o]){for(var S in r)r.hasOwnProperty(S)&&(this._layers[o][S]=r[S]);if(r.title){var x=document.getElementById(this._addUID("GPname_ID_"+o));x&&(x.innerHTML=r.title,x.title=r.description||r.title)}var P=document.getElementById(this._addUID("GPinfo_ID_"+o));if(!document.getElementById(this._addUID("GPinfo_ID_"+o))&&r.description){var R=document.getElementById(this._addUID("GPadvancedTools_ID_"+o));R&&R.appendChild(this._createAdvancedToolInformationElement({id:o}))}P&&"GPlayerInfoOpened"===P.className&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",P.className="GPlayerInfo")}else{var a=this.getLayerInfo(e)||{},c=e.getOpacity(),h=e.getVisible(),p=this.isInRange(e,i),m={layer:e,id:o,opacity:null!=c?c:1,visibility:null==h||h,inRange:null==p||p,title:null!=r.title?r.title:a._title||o,description:r.description||a._description||null,legends:r.legends||a._legends||[],metadata:r.metadata||a._metadata||[],quicklookUrl:r.quicklookUrl||a._quicklookUrl||null};this._layers[o]=m;var E=this._createLayerDiv(m);this._layers[o].div=E,e.getZIndex&&0!==e.getZIndex()&&void 0!==e.getZIndex()||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(m),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(E,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",F=>this._updateLayerOpacity(F)),this._listeners.updateLayerVisibility=e.on("change:visible",F=>this._updateLayerVisibility(F)),null==this._layers[o].onZIndexChangeEvent&&(this._layers[o].onZIndexChangeEvent=e.on("change:zIndex",()=>this._updateLayersOrder()))}else VE.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )")}else VE.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e)}else VE.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter")},t.prototype.removeLayer=function(e){if(e){Aa(this._listeners.updateLayerOpacity),Aa(this._listeners.updateLayerVisibility),VE.trace(e);var r=e.gpLayerId,i=document.getElementById(this._addUID("GPlayersList")),o=document.getElementById(this._addUID("GPinfo_ID_"+r));o&&"GPlayerInfoOpened"===o.className&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",o.className="GPlayerInfo");var s=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+r));s&&i.removeChild(s);var a=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(a,1),this._lastZIndex--;for(var c=this._layersOrder,h=0;h<c.length;h++)c[h].layer.setZIndex(this._lastZIndex-h);delete this._layers[r]}},t.prototype.setCollapsed=function(e){if(void 0!==e){var r=!document.getElementById(this._addUID("GPshowLayersList")).checked;if(!(e&&r||!e&&!r)){if(!r){for(var i=document.getElementsByClassName("GPlayerInfoOpened"),o=0;o<i.length;o++)i[o].className="GPlayerInfo";document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}document.getElementById(this._addUID("GPshowLayersList")).checked=!e}}else VE.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter")},t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setRemovable=function(e,r){if(e){var i=e.gpLayerId;if(null==i)return void VE.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");var o=document.getElementById(this._addUID("GPremove_ID_"+i));o&&(!1===r?o.style.display="none":!0===r&&(o.style.display="block"))}},t.prototype._initialize=function(e,r){this._uid=ni.generate(),this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=void 0===e.collapsed||e.collapsed,this._layerListContainer=null,this._listeners={};for(var i=0;i<r.length;i++){var o=r[i].layer;if(o){var s;o.hasOwnProperty("gpLayerId")?s=o.gpLayerId:(o.gpLayerId=s=this._layerId,this._layerId++);var a=r[i].config||{},c=o.getOpacity(),h=o.getVisible();this._layers[s]={layer:o,id:s,opacity:null!=c?c:1,visibility:null==h||h,title:null!=a.title?a.title:s,description:a.description||null,legends:a.legends||[],metadata:a.metadata||[],quicklookUrl:a.quicklookUrl||null}}}},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),r=this._createMainLayersShowElement();e.appendChild(r),this.collapsed?this.collapsed=!0:(r.checked="checked",this.collapsed=!1);var i=this,o=function(h){this.collapsed=!h.target.checked,this.dispatchEvent("change:collapsed")};r.addEventListener("click",function(h){o.call(i,h)});var s=this._layerListContainer=this._createMainLayersElement();e.appendChild(s),this._createDraggableElement(s,this);var a=this._createMainPictoElement();e.appendChild(a);var c=this._createMainInfoElement();return e.appendChild(c),e},t.prototype._addMapLayers=function(e){for(var r in this._layersIndex={},e.getLayers().forEach(h=>{var p;h.hasOwnProperty("gpLayerId")?p=h.gpLayerId:(h.gpLayerId=p=this._layerId,this._layerId++);var m=this.getLayerInfo(h)||{};if(this._layers[p])this._layers[p].opacity=h.getOpacity(),this._layers[p].visibility=h.getVisible(),this._layers[p].inRange=this.isInRange(h,e);else{var E=h.getOpacity(),S=h.getVisible(),x=this.isInRange(h,e);this._layers[p]={layer:h,id:p,opacity:null!=E?E:1,visibility:null==S||S,inRange:null==x||x,title:m._title||p,description:m._description||null,legends:m._legends||[],metadata:m._metadata||[],quicklookUrl:m._quicklookUrl||null}}if(this._listeners.updateLayerOpacity=h.on("change:opacity",F=>this._updateLayerOpacity(F)),this._listeners._updateLayerVisibility=h.on("change:visible",F=>this._updateLayerVisibility(F)),void 0!==h.getZIndex){var R=h.getZIndex()||0;(!this._layersIndex[R]||!Array.isArray(this._layersIndex[R]))&&(this._layersIndex[R]=[]),this._layersIndex[R].push(this._layers[p])}}),this._layersIndex)if(this._layersIndex.hasOwnProperty(r))for(var i=this._layersIndex[r],o=0;o<i.length;o++)this._layersOrder.unshift(i[o]),this._lastZIndex++,i[o].layer.setZIndex(this._lastZIndex),null==this._layers[i[o].layer.gpLayerId].onZIndexChangeEvent&&(this._layers[i[o].layer.gpLayerId].onZIndexChangeEvent=i[o].layer.on("change:zIndex",()=>this._updateLayersOrder()));for(var s=0;s<this._layersOrder.length;s++){var a=this._layersOrder[s],c=this._createLayerDiv(a);this._layerListContainer.appendChild(c),this._layers[a.id].div=c}},t.prototype._createLayerDiv=function(e){(e.legends&&0!==e.legends.length||e.metadata&&0!==e.metadata.length||e.quicklookUrl)&&(e.displayInformationElement=!0);var s=this._createContainerLayerElement(e);return e.inRange||s.classList.add("outOfRange"),s},t.prototype._onChangeLayerOpacity=function(e){var i=ni.index(e.target.id),o=this._layers[i].layer,s=e.target.value;document.getElementById(this._addUID("GPopacityValue_ID_"+i)).innerHTML=s+"%",o.setOpacity(s/100)},t.prototype._updateLayerOpacity=function(e){var r=e.target.getOpacity();r>1&&(r=1),r<0&&(r=0);var i=e.target.gpLayerId,o=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+i));o&&(o.value=Math.round(100*r));var s=document.getElementById(this._addUID("GPopacityValue_ID_"+i));s&&(s.innerHTML=Math.round(100*r)+"%")},t.prototype._onVisibilityLayerClick=function(e){var i=ni.index(e.target.id);this._layers[i].layer.setVisible(e.target.checked)},t.prototype._updateLayerVisibility=function(e){var r=e.target.getVisible(),o=document.getElementById(this._addUID("GPvisibility_ID_"+e.target.gpLayerId));o&&(o.checked=r)},t.prototype._updateLayersOrder=function(){var e=this.getMap();if(e){var r,i;for(var o in this._layersIndex={},e.getLayers().forEach(p=>{Aa(this._layers[i=p.gpLayerId].onZIndexChangeEvent),this._layers[i].onZIndexChangeEvent=null,r=null,void 0!==p.getZIndex&&(r=p.getZIndex(),(!this._layersIndex[r]||!Array.isArray(this._layersIndex[r]))&&(this._layersIndex[r]=[]),this._layersIndex[r].push(this._layers[i]))}),this._lastZIndex=0,this._layersOrder=[],this._layersIndex)if(this._layersIndex.hasOwnProperty(o))for(var s=this._layersIndex[o],a=0;a<s.length;a++)this._layersOrder.unshift(s[a]),this._lastZIndex++,null==this._layers[s[a].layer.gpLayerId].onZIndexChangeEvent&&(this._layers[s[a].layer.gpLayerId].onZIndexChangeEvent=s[a].layer.on("change:zIndex",()=>this._updateLayersOrder()));if(this._layerListContainer){for(;this._layerListContainer.firstChild;)this._layerListContainer.removeChild(this._layerListContainer.firstChild);for(var c=0;c<this._layersOrder.length;c++)this._layerListContainer.appendChild(this._layersOrder[c].div)}else VE.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}},t.prototype._onOpenLayerInfoClick=function(e){var s,a,r=e.target.id,i=ni.index(r),o=this._layers[i];if("GPlayerInfoOpened"===(r=document.getElementById(e.target.id)).className)return void 0!==r.classList&&(r.classList.remove("GPlayerInfoOpened"),r.classList.add("GPlayerInfo")),void 0!==(s=document.getElementById(this._addUID("GPlayerInfoPanel"))).classList&&(s.classList.remove("GPpanel"),s.classList.remove("GPlayerInfoPanelOpened"),s.classList.add("GPlayerInfoPanelClosed")),a=document.getElementById(this._addUID("GPlayerInfoContent")),void s.removeChild(a);for(var c=document.getElementsByClassName("GPlayerInfoOpened"),h=0;h<c.length;h++)c[h].className="GPlayerInfo";void 0!==r.classList&&(r.classList.remove("GPlayerInfo"),r.classList.add("GPlayerInfoOpened")),void 0!==(s=document.getElementById(this._addUID("GPlayerInfoPanel"))).classList&&(s.classList.add("GPpanel"),s.classList.remove("GPlayerInfoPanelClosed"),s.classList.add("GPlayerInfoPanelOpened")),(a=document.getElementById(this._addUID("GPlayerInfoContent")))&&s.removeChild(a);var p={title:o.title,description:o.description,quicklookUrl:o.quicklookUrl,metadata:o.metadata,legends:o.legends},m=o.layer.getMaxResolution();p._maxScaleDenominator=m===1/0?56e7:Math.round(m/28e-5);var E=this._createContainerLayerInfoElement(p);s.appendChild(E)},t.prototype._onDropLayerClick=function(e){var i=ni.index(e.target.id),o=this._layers[i].layer;this.getMap().getLayers().remove(o)},t.prototype._onDragAndDropLayerClick=function(){var e=this.getMap(),r=document.querySelectorAll("div.GPlayerSwitcher_layer"),i=r.length;this._layersOrder=[];for(var o=0;o<r.length;o++){var a=ni.index(r[o].id),c=this._layers[a].layer;Aa(this._layers[a].onZIndexChangeEvent),this._layers[a].onZIndexChangeEvent=null,c.setZIndex&&(c.setZIndex(i),this._layersOrder.push(this._layers[a]),i--),null==this._layers[a].onZIndexChangeEvent&&(this._layers[a].onZIndexChangeEvent=c.on("change:zIndex",()=>this._updateLayersOrder()))}e.updateSize()},t.prototype._onMapMoveEnd=function(e){e.getLayers().forEach(r=>{var i=r.gpLayerId;if(this._layers[i]){var o=this._layers[i];this.isInRange(r,e)&&!o.inRange?(o.inRange=!0,document.getElementById(this._addUID("GPlayerSwitcher_ID_"+i)).classList.remove("outOfRange")):!this.isInRange(r,e)&&o.inRange&&(o.inRange=!1,document.getElementById(this._addUID("GPlayerSwitcher_ID_"+i)).classList.add("outOfRange"))}})},t.prototype.getLayerDOMId=function(e){var r=null;return this.getMap().getLayers().forEach(i=>{i===e&&(r=i.hasOwnProperty("gpLayerId")?i.gpLayerId:null)}),null!==r?this._addUID("GPlayerSwitcher_ID_"+r):null},t.prototype.isInRange=function(e,r){if(r){var i=r.getView().getResolution();if(i>e.getMaxResolution()||i<e.getMinResolution())return!1;var o=r.getView().calculateExtent(r.getSize()),s=e.getExtent();return!(s&&!oa(o,s))}},t.prototype.getLayerInfo=function(e){var r={};if(void 0!==e.getSource){var i=e.getSource();i&&(r._title=i._title||"",r._description=i._description||"",r._quicklookUrl=i._quicklookUrl||"",r._metadata=i._metadata||[],r._legends=i._legends||[])}return r},t}(Su);const Sm=S8;window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=S8);const gq={_addUID:function(n){return this._uid?n+"-"+this._uid:n},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPgetFeatureInfo"),n.className="GPwidget",n},_createActivateGetFeatureInfoElement:function(n){var t=this,e=document.createElement("input");return e.id=this._addUID("GPactivateGetFeatureInfo"),e.type="checkbox",e.checked=n,e.addEventListener("change",function(r){t.onActivateGetFeatureInfoElementChange(r)}),e},_createMainPictoElement:function(){var t=document.createElement("label");t.id=this._addUID("GPgetFeatureInfoPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPactivateGetFeatureInfo"),t.title="activer/desactiver l'interrogation des couches";var e=document.createElement("span");e.id=this._addUID("GPgetFeatureInfoActivate"),e.className="GPshowAdvancedToolOpen",t.appendChild(e);var r=document.createElement("span");return r.id=this._addUID("GPgetFeatureInfoDeactivate"),t.appendChild(r),t}};var Oa=Ki_getLogger("getfeatureinfo"),x8=function(n){function t(e){var r=(e=e||{}).options||{},i=e.layers||[];if(!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(i))throw new Error("ERROR WRONG_TYPE : layers should be an array");if("object"!=typeof r)throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize(r,i);var o=this._container=this._initContainer(r);n.call(this,{element:o,target:r.target,render:r.render})}return n&&(t.__proto__=n),t.prototype=Object.create(n.prototype,{}),vr.assign(t.prototype,gq),t.prototype.constructor=t,t.prototype._initialize=function(e,r){if(this._uid=ni.generate(),this._events={dblclick:!1,singleclick:!1,contextmenu:!1},this._eventsHandler={},void 0===e.auto||"boolean"==typeof e.auto)if(this._auto=e.auto||!1,void 0===e.active||"boolean"==typeof e.active)if(this._active=void 0===e.active||e.active,e.defaultEvent&&"string"!=typeof e.defaultEvent)Oa.log("[ERROR] GetFeatureInfo:_initialize - defaultEvent parameter should be a string");else if(this._defaultEvent=e.defaultEvent||"singleclick",this._isValidEvent(this._defaultEvent))if(e.defaultInfoFormat&&"string"!=typeof e.defaultInfoFormat)Oa.log("[ERROR] GetFeatureInfo:_initialize - defaultInfoFormat parameter should be a string");else if(this._defaultInfoFormat=e.defaultInfoFormat||"text/html",e.cursorStyle&&"string"!=typeof e.cursorStyle)Oa.log("[ERROR] GetFeatureInfo:_initialize - cursorStyle parameter should be a string");else{if(this._cursorStyle=e.cursorStyle||"pointer",e.proxyUrl){if("string"!=typeof e.proxyUrl)return void Oa.log("[ERROR] GetFeatureInfo:_initialize - proxyUrl parameter should be a string");this._proxyUrl=e.proxyUrl}if(e.noProxyDomains){if(!Array.isArray(e.noProxyDomains))return void Oa.log("[ERROR] GetFeatureInfo:_initialize - noProxyDomains parameter should be a array");this._noProxyDomains=e.noProxyDomains}if(void 0===e.autoPan||"boolean"==typeof e.autoPan){if(this._autoPan=void 0===e.autoPan||e.autoPan,e.autoPanAnimation){if(e.autoPanAnimation.duration&&"number"!=typeof e.autoPanAnimation.duration)return void Oa.log("[ERROR] GetFeatureInfo:_initialize - autoPanAnimation parameter is invalid : duration should be a number.");if(e.autoPanAnimation.easing&&"function"!=typeof e.autoPanAnimation.easing)return void Oa.log("[ERROR] GetFeatureInfo:_initialize - autoPanAnimation parameter is invalid : easing should be a ol.easing function or a custom function.");this._autoPanAnimation=e.autoPanAnimation}if(e.autoPanMargin){if("number"!=typeof e.autoPanMargin)return void Oa.log("[ERROR] GetFeatureInfo:_initialize - autoPanMargin parameter should be a number");this._autoPanMargin=e.autoPanMargin}Array.isArray(r)?(this._setLayers(r),this._activateGetFeatureInfoContainer=null):Oa.log("[ERROR] GetFeatureInfo:_initialize - layers parameter should be an array")}else Oa.log("[ERROR] GetFeatureInfo:_initialize - autoPan parameter should be a boolean")}else Oa.log("[ERROR] GetFeatureInfo:_initialize - _defaultEvent '"+this._defaultEvent+"' is not a valid event");else Oa.log("[ERROR] GetFeatureInfo:_initialize - active parameter should be a boolean");else Oa.log("[ERROR] GetFeatureInfo:_initialize - auto parameter should be a boolean")},t.prototype.setMap=function(e){if(e){if(this._updateEvents(e),this._cursorStyle&&this._active&&this._activateCursor(!0,e),e.getLayers().on("remove",i=>{for(var o=0;o<this._layers.length;++o)if(this._layers[o].obj===i.element){this._layers.splice(o,1);break}this._updateEvents(e)}),this._auto){var r=!1;e.getLayers().forEach(i=>{var o=rL.getLayerFormat(i);!this._hasLayer(i)&&"vector"===o&&(this._layers.push({obj:i}),r=!0)}),r&&this._updateEvents(e),e.getLayers().on("add",i=>{"vector"===rL.getLayerFormat(i.element)&&this._layers.push({obj:i.element}),this._updateEvents(e)})}}else this._clearEvents(),this._activateCursor(!1);n.prototype.setMap.call(this,e)},t.prototype.getLayers=function(){return this._layers},t.prototype.setDefaultEvent=function(e){"string"==typeof e?e&&this._isValidEvent(e)?(this._defaultEvent=e,this._updateEvents()):Oa.log("[ERROR] GetFeatureInfo:setDefaultEvent - event '"+e+"' is not allowed."):Oa.log("[ERROR] GetFeatureInfo:setDefaultEvent - eventName parameter should be a string")},t.prototype.setCursorStyle=function(e){"string"==typeof e?(this._active&&(!this._cursorStyle&&e?this._activateCursor(!0):this._cursorStyle&&!e&&this._activateCursor(!1)),this._cursorStyle=e):Oa.log("[ERROR] GetFeatureInfo:setCursorStyle - cursorStyle parameter should be a string")},t.prototype.setActive=function(e){this._setActive(e);var r=document.getElementById(this._addUID("GPactivateGetFeatureInfo"));r&&(r.checked=e)},t.prototype._setActive=function(e){"boolean"==typeof e?this._active!==e&&(this._active=e,this._cursorStyle&&this._activateCursor(e)):Oa.log("[ERROR] GetFeatureInfo:_setActive - active parameter should be a boolean")},t.prototype.isActive=function(){return this._active},t.prototype.setHidden=function(e){this.element.style.visibility=e?"hidden":""},t.prototype.isHidden=function(){return"hidden"===this.element.style.visibility},t.prototype.setLayers=function(e){this._setLayers(e),this._updateEvents()},t.prototype._isValidEvent=function(e){return Object.keys(this._events).indexOf(e)>-1},t.prototype._activateEvent=function(e,r){var i=this,o=function(s){rL.onDisplayFeatureInfo(s,i)};"contextmenu"===e?r.getViewport().addEventListener(e,o):r.on(e,o),this._eventsHandler[e]=o,this._events[e]=!0},t.prototype._deactivateEvent=function(e,r){"contextmenu"===e?r.getViewport().removeEventListener(e,this._eventsHandler[e]):r.un(e,this._eventsHandler[e]),delete this._eventsHandler[e],this._events[e]=!1},t.prototype._updateEvents=function(e){e||(e=this.getMap());for(var r=[],i=0;i<this._layers.length;++i){var o=this._layers[i].event?this._layers[i].event:this._defaultEvent;r.indexOf(o)<0&&r.push(o)}for(var s in this._events)!this._events[s]&&r.indexOf(s)>=0?this._activateEvent(s,e):this._events[s]&&r.indexOf(s)<0&&this._deactivateEvent(s,e)},t.prototype._clearEvents=function(){var e=this.getMap();for(var r in this._events)this._events[r]&&this._deactivateEvent(r,e)},t.prototype._hasLayer=function(e){for(var r=0;r<this._layers.length;++r)if(this._layers[r].obj===e)return!0;return!1},t.prototype._activateCursor=function(e,r){if(r||(r=this.getMap()),e){if(this._eventsHandler.hasOwnProperty("pointermove"))return void Oa.log("[ERROR] _activateCursor - inconsistent state: pointermove event handler already registered");var i=this,o=function(s){var a=r.forEachFeatureAtPixel(s.pixel,(c,h)=>{for(var p=i.getLayers(),m=0;m<p.length;++m)if(p[m].obj===h)return!0});r.getTargetElement().style.cursor=a?i._cursorStyle:""};this._eventsHandler.pointermove=o,r.on("pointermove",o)}else this._eventsHandler.hasOwnProperty("pointermove")&&(r.un("pointermove",this._eventsHandler.pointermove),delete this._eventsHandler.pointermove),r.getTargetElement().style.cursor=""},t.prototype._setLayers=function(e){if(e&&Array.isArray(e)){this._layers=[];for(var r=0;r<e.length;++r){var i=this._layers.push({})-1;e[r].event&&(this._isValidEvent(e[r].event)?this._layers[i].event=e[r].event:Oa.log("[ERROR] GetFeatureInfo:setLayers - layer event '"+this._layers[r].event+"' is not allowed.")),e[r].infoFormat&&(this._layers[i].infoFormat=e[r].infoFormat),this._layers[i].obj=e[r].obj}}else Oa.log("[ERROR] GetFeatureInfo:setLayers - gfiLayers parameter should be a array")},t.prototype.onActivateGetFeatureInfoElementChange=function(e){this._setActive(e.target.checked)},t.prototype._initContainer=function(e){var r=this._createMainContainerElement(),i=this._activateGetFeatureInfoContainer=this._createActivateGetFeatureInfoElement(this.isActive());r.appendChild(i);var o=this._createMainPictoElement();if(r.appendChild(o),void 0!==e.hidden){if("boolean"!=typeof e.hidden)return void Oa.log("[ERROR] GetFeatureInfo:_initContainer - hidden parameter should be a boolean");e.hidden&&(r.style.visibility="hidden")}return r},t}(Su);const mq=x8;window.ol&&window.ol.control&&(window.ol.control.GetFeatureInfo=x8);const Ls={lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARDSURBVFiF3ZndaxxVGMZ/Z/YjX00Nadpo1qrFBgu56D9QbAtiLoRC7ywSNK1NURRREBKRFlSwFBW0gnSrJXY1CmISgyjFiyYSFC9ajE3MmpjdjWlMUtNos9lN9mteLzbRuCbZmTMTBB+Yi51znvd5n3nPnjnnjBIR/i/wuh4xpCpI0ojiENAA1AE1wCzwKzCE0EM5l2iShJvSyrXKnFVb8dOK4hmg3AIjifAmaU7ztMy7kYI7Zs6rQwjvka+AXcyiOMZx6XGahuE0AEHVitCFnhGAGoQugqrVaSrOKpNP4FWnSaxCGy1yWpesbyY/tLpwo7p/w0RxWHfI6Zk5q7ZSwhj6Q2sjzJLiXp1JQe+p+mllc4wA1CzHtw37lQmpCha5gbXpVxdJythh9z1kvzJJGrFixPBmOXixl+Z4mONmguZ4mIMXezG8WQsq5cs6tmDfTP7NXiSqN0vTzBD1TQfwbdmDUhX4tuyhvukATTNDlgxZ0SmUtUsgv0TZGPsv9FNSvXfNtpLqvey/0O+KTgF0zNQV7XHP4dsdtVvVKYCOmeqiPbwVOx21W9UpgI6ZWNEe2cSEo3arOgWwb0YYLp5G17Sjdqs6BdCZzYqL9B3dR2puYM221NwAfUf3uaJTAB0zaye5GmbWS6i2gdFQL5mFMCIJMgthRkO9hGobMLPFN4VWdAoptlcAQeUDRoG77YrZwDhQT4tk7JDsV6ZFMggv2+bZwyt2jYDuQnOa94GIFrc4IkzRrkPUM3NKsijatLjF0copsbJ++xec7TTPqw6EI/oB/glT+PC+13Y/aSQNv/Is+tNer09lMn7DMHwAYppp8fvTIpISkVQsFrslqww4M9OuqkgzANzl1MhCyrjZGAycm573pK1yFCyi5FoWvo/FYlPOT2fOqftRXMbB9lkEs+3zbe2f/FD5i3YMj2p3vn8/IV8DZ5yE+Gqkot+JEQCPada5dRhxEriiQ5ya90w+272916F+KpnJDLhjpkUy5HgESNqhZU2Vfr5ne+dSFtOBeso06J6cnEy6d0z0hPwEPGeH8sGVykvfjpfe1NZUci2+mHg7Go2G8z/d/goQVJ9B8S1veMYffujduo/thl+ZwUzDuBqJRGZWt7n/FcDH46lFNVLilar1uiTTxsJTnTssH/QpJVlMNQa5wbGJiWERya3Vz30zzfLb3OveY3dU5j5dp4e80Xdbd3TOu/H/yyAtpjnqgeGS8crRQRks+v5xf5gtY/KM/6NAVebhwvv90bLvHu2o/XId2pJSMmIaxo/RaHRMxN6yZtPM0K5K/7hl/FxVZgZWbs0mPDceeKcuGE95/kpSKUmaImHDNIfHrl+PiIj2zOb+MFvBY7IUOVl2ZG9g6bJH4ckJuRe/2NYZT3myKIkrGM4pNRyLjY+LW09URDb1+uaF0pfm3zJ+7zhRGdq1c9eDuwOBOzdLa/OG2X+APwE8DU64Y/5gfAAAAABJRU5ErkJggg==",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQ+SURBVFiF3ZlLaFxlGIaf/5zJpJNpaoxpYieoCxULEYK7Lqp0IWQhFLooKNKEtNIULxWlQoJgQQWLFMEg0lQMuXgD0dRSkNJFgoy0IrYNSTpj08xMmoxNYhLUyUwyt/O5mFbjmGTOLS58d3O+y/u95/vnvx0lIvxf4HE9Y7PyU0ETwl6gAQgANcA88AswhuIsKc7TJ0k3qZVrnTmqtpGhHeFloMJERArF+3g5Qaf84UYJ7og5rPai+JhCB6xiHuEQp+Ws0zI0pwloU+0oBrAnBKAGxQBtqt1pKc46UyjgHadFrEIHXXLCbrB9MYWhNYAb3f0bBsI+u0POnpijahtpJrA/tDbCPOU8aGdSsPdWM7SzOUIAam7ntwzrnWlWfnzMYW76tYsUy9RaXYesd6aCJswI0Tw5WvuG6EyEOWUk6UyEae0bQvPkTLEUeCzBupjCyl4iqyfHydkxdh3YQ/nWnSjlp3zrTnYd2MPJ2TFTgszwFNNaDaCwRdkYLd1B/NWNa9r81Y20dAdd4SmCHTGBkh6P7bvXkd0sTxHsiKku6eH13+fIbpanCHbExEp6ZJJTjuxmeYpgXYwiVNLnysCMI7tZniLYmc1Kk/Qe3E1ycXhNW3JxmN6Du13hKYIdMWsXuRpGzsOxugYu9Q+RXgojkiS9FOZS/xDH6howcqUPhWZ4imB9B9CmyoBx4AGrZBYwCTxMl2StBFnvTJdkUbxlOc4a3rYqBOxuNHfQC0RsxZZGhAA9dgLtiTkuOYQOW7Gl0c5xMbN/+xecnTQPq89QPGM/wT9hCJ8+MvjQ81pK8yp92ZvxeMpUNuvVNK0MQAwjI15vRkTSIpKOxWK/yyoBzsS0qiq8DAP3OxWylNMWmoL1XTMresZsjIJllIzk4GosFrvl/HbmiHoCYRAHx2cBo2Pknp4v45U3befQVY/z8/sp+Q5410mKC7P+oBMhALphBNy6jHgDxU92Am+t6PFXhrcPOeRPp7LZYXfEdEkWjWeBlJWwnKEyr41s/3rFwHDAnjY0zsTj8ZR710Qfys/Aq1ZCPrlZef7iwpYF25xKRhLLyQ+i0Wi48NPtrwBt6hsofeQNJ7zhp74PfGE1/Z0ZzNC0y5FIZHa1zf2vAFmeS2vqerkuVeu5pPLa0otXa01f9CklOQw1AfnRiampkIjk1/JzX0y3/LrY7Dm0w5f/ah0Pee/GXWeiSc/G/y+NjBjGuA6h8snK8VEZLbn+uD/MbiPe7P283pd9uvh5cMH3Q8uPdd+uE7ailFw3NO1aNBqdELG2rdk0MbSqLb8p7UZVmVF/59F8Wp97Mhg4ncjqfxWplKQMkbBmGKGJ6emIiNie2TZPDHB5v+/xxrtXBnWFnhfyL1yp/ejCXMUMShIKQnmlQrFYbFJcKmJTxQBc3O9789FtmZfOzfjPvT5S068bmWvj09PTm8G16WL+S/wJLybNu1V6htkAAAAASUVORK5CYII=",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQxSURBVFiF3ZldaBxVFMd/d2ayTRtjQpo2mlilWBEMshoj+FAERZIHIdA3iw+V1icRREFIQAKNgsUHQfBFwZI2WgWxqYUiVTDBBj9ILC5Nu2tjdjemsR+mSZNNNvsxO8eHTTRuk+zMnQmCf9iHnXvO+Z//nDvn3rmjRIT/C6zAI4ZVFRbtKDpQNCM0AvXANIo/EC4inMbmLBFZDJJaBVaZJ9Sd2HQCrwDbXHikgfewOMKPMh9ECsGIeVx1IHxEsQJeMY3iEMNy2m8aht8AtKpOhH70hADUI/TTqjr9puKvMsUE3vabxCp0MSJHdJ31xRSnVj9BVPcfOCj26U45PTHFh30c/am1EaaxuF+nKejd1WLX2gwhAPXL8T3De2XCqooKbuCu/eoiTZ6dXtch75WxaMeNENOyOXx8kHOpGMPOIudSMQ4fH8S0bBcs25Z5PMF7ZVpVL3BgQxvTsvn6+kVq6sK3jc3NRGhraKZgl9t9HGNEXvCSmvfKKJrL2nQfHVpTCEBNXZjuo0OB8JTAu5jiXmtjPL3vLl/jbnlKoNPN6spaVFbt8jXulqcEOmKSZS0yi5O+xt3ylEBHTLSsxbf913yNu+UpgU4DKE/Sc3AvczORNcfmZiL0HNwbCE8JvItxWDvJ1SjYFm0NzZzpG2RpIYbIIksLMc70Dbpsy+54SqCzzlQAY8B9Xsk8YAJ4gBHJe3HyXpkRyaN407OfN7zlVQjobjTv4BgQ1/ItjzjV9Oo46okZEBuhS8u3PDoZEDf7t9vg903zBLBfP8C/4cAnD87teclIGyFlLoVyllWh8vmQYRgVAOI4OQmFciKSFZFsMpmck1UC/Il5VNViEgHu9StkQYyb7bNNH1wrmDm3PgqWUHLBhl+SyeRV/6czLepJDAbw8fos4HTNb+/9PFv9u3YMU/X6f38/L98B7/gJ8U2uasiPEADTcRqDOozoBn7WcbzqmFOvpnYM+uTPpvP5SDBiimvP8xRPKV3DFpV7fX7HyYyD44M96xicmpqaSgd3TDQsv6J4zYvLx5nqsz/kK29qcyq5kFpafD+RSMSKf4P+CvCY+hJFRzmzmB2KPTvb+JnX8CsdzDGM8/F4/PrqseC/AggvZlGXtyipXc8kLcbCy6mdrg/6lBIbR41DYXR8cjIqIoW17IIXc17+nHnEOnS3VfhiHQt5d7HmVMK2Nn6+DHLiOGMmRLdMVI+NymjZ9Sf4abaMqZbQp01G/rnS60P5rT8duNXw1TpuGaXksmMYlxKJxLiIt23NponhKVV5a874rdZwmlYuTTvmjWdmGj9Mifl3kkpJ2hGJGY4THb9yJS4i2p0t+Gm2ggHJxMNb94eNzIAJZgEKbyxsP5kS00ZJSkG0oFQ0mZyYkKDuqIhs6u/7hyt75luM2RMPVfft3rW7bU9T0z2bxbV50+w/wF8f81R5OpwBhwAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASxSURBVFiF3ZhdbBRVGIafc2Z2210hbeWnpcQVUC8kwBUJXJBIgwkgBEPEC1GMxhgE4gUJJsYERMWI3orYaiqgrYSWH/mvMaQLciE1RAKUkrLbbhMobQ20/LT7N3OOF0CC0O7szGwv9L3c73u/93vnnD3zzYH/EUTBKx6sHUvQWgR6GTAdmASMA26A6AYuofUhQnYTVevuFlK6cGaObC9DGh8i9PtAKA/GEIKvSRZtZfnbA4VooTBmjlWvQFADPOmBfRN4l8Xv7ffbhvTF1lpwrHoTgga8GeE+by9NNRvR2tfDNfyQmVv5MYJP8L/CAqgidtai/sgpP0W84d7WavBV43Eo0CtYvOaAF7K3Rg7sKKU4Hcf71sqFfmz1DEvX9rslevvPFKc/YnSMAJRhyA+8EN2vzMHasQSzveR3/HrFEMV2udv3kOlaJmgtIg8jYcMcqpu1oGXJhMi0oJQVGaV6Dvd1day62DwnaWWd+GHSciGwz01rHraZXuaUETbMoe6qVR3Ly6fMD0oZAYJBKSOvVEyd3z3/jVjIDCSddYSjzqPwYEY875RRN2tBS4kZnDFcrNQMztw144UzjjKa6W4787IylU4ZSyZEpuWKv1w+dWohdB6Fl9NsnFNCUMqKnHGRO34PYnz+Ld2DFzN3nBIySvXkjGt1PQ+d23l3dB9ezPQ6JRzu6+rIFT/Q25lwVNHkfCDDwYuZFqeEVReb5wxYmQvDxfqz6QtvnW+e69yZcNR5jOKWgKbZKSVpZUOV0bpnG3vi0YxWXUAmo1XXnp54tLL5p+dSyi52FlJRt625nwCavxlDyrgKlLjm5o9byPBkFr456IbkfmWq1t1FsMM1zx1q3RoBr4OmpT4F+jxxndGHrbZ4IXozs3RtP0Ks98R1ghDrvYz/4PfD6ti39Qix0leNh6H07siaL9ZJKYuKtA6lhSgKaC0sWwYATENlLSmVECIZTKcHZ167NtAI9gO6PzO/1ZRg6XPAFF91AJnKDES21NaYN26l8uVoLWyhSZhS/345kUj4/+Q9XjMPdBR/9wl6Qn3TjyWnzyW88i3Y5e92BmDx6tPAV35KjDnXftqHEQBhKDXZvxmA4p5NCJzH+mFg3rxzvXzn0ZN+5BUoW8p4YcxUbbZQ4nXyGEIfhrDt7MS6o/tEOm07Z48ArTPCMPYnEomewpgBeGl1HMQGN5SSk381hdsSNzwqag1tRbZdHY/HL8JoXJwfr24AXnVKK7rae/mpz3fs8aCQ1FqfxzTPxuPxf7243V9oOMESa4XOvqgDZtlIKTKVHpz4w6Ej+ZbUWlgIHdNStkYikbZoNGoNl1f4lQGM3V8us0tLfhmhvh6/98Tu0hN/XslVQ2uRlahOIWWrMozLsVgs7aQ7KmYAAnVb67PjSh+bDsKtHX9Ubmv4dQRaEiE6JLQHwuG21tbWjBvNwm+z+8hmU+/Iu8l5akwo8uA34/bg3+W1B088nKdhCK2vmFJemjV7dqyxsdHzyTZqKwMQ2r55bmpK+SktRABb2ZO+2//9E+djvcAthIgZ0P5aZ+eVzaAKoTeqZgCKt238LP10xYaxZy7tq/j5+E5Ms629vb0b0KOt/Z/GP4jqqfL5oxVsAAAAAElFTkSuQmCC",defaultOffset:[-25.5,-38]},zp_check=function(n){var t=Ki_getLogger("checkrightmanagement");if(n){var e=n.key,r=n.resources||[],i=n.services||[];if(0!==r.length)if(0!==i.length){var o={};if(!e){if(!Ul.isConfigLoaded())return void t.warn("WARNING : The 'apiKey' parameter is missing, and the contract key configuration has not been loaded, so impossible to check yours rights !");e=Object.keys(Ul.configuration.generalOptions.apiKeys)[0],t.log(e)}if(e){if(Ul.isConfigLoaded()){for(var m=0;m<r.length;m++)for(var E=r[m],S=0;S<i.length;S++){var x=i[S],P=Ul.getServiceParams(E,x,e);P&&0!==Object.keys(P).length?(o[x]||(o[x]=[]),o[x].push(E)):t.warn("WARNING : The contract key configuration has no rights to load this geoportal resource ("+E+") for this service ("+x+") ")}return 0===Object.keys(o).length?void t.warn("WARNING : The contract key configuration has been loaded, and the 'apiKey' parameter has been set, but, there is a problem on the mapping between the contract and the key !"):(o.key=e,t.log("right management checked",o),o)}t.warn("WARNING : the contract key configuration has not been loaded, so be carefull !");for(var s={},a=0;a<i.length;a++){var c=i[a];s[c]=[];for(var h=0;h<r.length;h++)s[c].push(r[h])}return s.key=e,t.log("right management not checked",s),s}}else t.error("WARNING : no parameter 'services' specified !");else t.error("WARNING : no parameter 'resources' specified !")}else t.error("WARNING : no parameter specified !")},T8_advancedSearchFiltersByDefault={PositionOfInterest:[{name:"importance",title:"Importance"},{name:"nature",title:"Nature"},{name:"territory",title:"Territoire"},{name:"insee",title:"Code INSEE"},{name:"municipality",title:"Ville"},{name:"department",title:"D\xe9partement"}],StreetAddress:[{name:"territory",title:"Territoire"},{name:"insee",title:"Code INSEE"},{name:"municipality",title:"Ville"},{name:"department",title:"D\xe9partement"}],CadastralParcel:[{name:"department",title:"D\xe9partement",description:"Num\xe9ro du d\xe9partement (ex: 01, 94)"},{name:"commune",title:"Code commune (INSEE)",description:"Code commune (INSEE) : 3 chiffres (ex: 067)"},{name:"absorbedCity",title:"Commune absorb\xe9e",description:"Commune absorb\xe9e : 3 chiffres (ex: 000, 001)"},{name:"section",title:"Section",description:"Section : 2 caract\xe8res (ex: AA, 0D)"},{name:"number",title:"Num\xe9ro",description:"Num\xe9ro de la parcelle : 4 chiffres (ex: 0041, 0250)"}],Administratif:[{name:"prefecture",title:"Pr\xe9fecture"},{name:"inseeRegion",title:"Code r\xe9gion (INSEE)"},{name:"inseeDepartment",title:"Code d\xe9partement (INSEE)"},{name:"municipality",title:"Ville"}]},T8_zoomToResultsByDefault=function(n){var t=15,e=n.service,r=n.fields,i=n.type,o={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return"SuggestedLocation"===e&&"PositionOfInterest"===i&&(t=o[r.classification]),"DirectGeocodedLocation"===e&&"PositionOfInterest"===i&&(t=o[r.importance]||14),"StreetAddress"===i&&(t=17),"CadastralParcel"===i&&(t=17),"Administratif"===i&&(t=12),t},Eq={_addUID:function(n){return this._uid?n+"-"+this._uid:n},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPsearchEngine"),n.className="GPwidget",n},_createShowSearchEngineElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowSearchEngine"),n.type="checkbox",n},_createShowSearchEnginePictoElement:function(){var n=this,t=document.createElement("label");t.id=this._addUID("GPshowSearchEnginePicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowSearchEngine"),t.title="Afficher/masquer la recherche par lieux",t.addEventListener("click",function(){document.getElementById(n._addUID("GPautoCompleteList")).style.display="none",document.getElementById(n._addUID("GPgeocodeResultsList")).style.display="none";var r=document.getElementById(n._addUID("GPshowAdvancedSearch"));r&&(r.style.display=null,document.getElementById(n._addUID("GPadvancedSearchPanel")).style.display="none"),document.querySelector("#GPsearchInput-"+n._uid+" input").disabled=!1,n.onShowSearchEngineClick()});var e=document.createElement("span");return e.id=this._addUID("GPshowSearchEngineOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createSearchInputElement:function(n){var t=this,e=document.createElement("form");e.id=this._addUID("GPsearchInput"),e.addEventListener("submit",function(o){return o.preventDefault(),document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="block",document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",t.onGeocodingSearchSubmit(o),!1});var r=document.createElement("input");r.id=this._addUID("GPsearchInputText"),r.type="text",r.placeholder=n,r.autocomplete="off",r.addEventListener("keyup",function(o){var s=o.which||o.keyCode;13===s||10===s||38===s||40===s||(document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(t._addUID("GPautoCompleteList")).style.display=r.value.length>2?"block":"none",t.onAutoCompleteSearchText(o))}),r.addEventListener("keydown",function(o){var s=o.which||o.keyCode,a=document.getElementById(t._addUID("GPautocompleteResults"));if(a){var c=a.getElementsByClassName("GPautoCompleteProposal current"),h=a.getElementsByClassName("GPautoCompleteProposal"),p=h.length;if(p){var m=null;if(!c.length)return(m=h[0]).className="GPautoCompleteProposal current",m.style.color="#000000",void(m.style["background-color"]="#CEDBEF");m=c[0];var E=parseInt(ni.index(m.id),10),S=E===p-1?h[0]:h[E+1],x=0===E?h[p-1]:h[E-1];switch(m.style["background-color"]="",m.style.color="",x.style["background-color"]="",x.style.color="",S.style["background-color"]="",S.style.color="",s){case 38:m.className="GPautoCompleteProposal",x.className="GPautoCompleteProposal current",x.style.color="#000000",x.style["background-color"]="#CEDBEF";break;case 40:m.className="GPautoCompleteProposal",S.className="GPautoCompleteProposal current",S.style.color="#000000",S.style["background-color"]="#CEDBEF";break;case 13:o.preventDefault(),m.click(o)}m.focus()}}}),e.appendChild(r);var i=document.createElement("div");return i.id=this._addUID("GPsearchInputReset"),i.addEventListener("click",function(){document.getElementById(t._addUID("GPsearchInputText")).value="",document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",t.onSearchResetClick()}),e.appendChild(i),e},_createShowAdvancedSearchElement:function(){var n=this,t=document.createElement("div");t.id=this._addUID("GPshowAdvancedSearch"),t.className="GPshowAdvancedToolPicto",t.title="Ouvrir la recherche avanc\xe9e",t.addEventListener("click",function(){document.querySelector("#GPsearchInput-"+n._uid+" input").disabled=!0,document.getElementById(n._addUID("GPautoCompleteList")).style.display="none",document.getElementById(n._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(n._addUID("GPshowAdvancedSearch")).style.display="none",document.getElementById(n._addUID("GPadvancedSearchPanel")).style.display="inline-block"});var e=document.createElement("span");return e.id=this._addUID("GPshowAdvancedSearchOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createAdvancedSearchPanelElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPadvancedSearchPanel"),n.className="GPpanel",n.style.display="none",n},_createGeocodeResultsElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPgeocodeResultsList"),n.className="GPpanel",n.style.display="none",n.appendChild(this._createGeocodeResultsHeaderElement()),n},_createAutoCompleteElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPautoCompleteList"),n.className="GPautoCompleteList",n.style.display="none",n},_createAutoCompleteListElement:function(){var n=this,t=document.createElement("div");return t.id=this._addUID("GPautocompleteResults"),t.addEventListener?t.addEventListener("click",function(e){n.onAutoCompletedResultsItemClick(e),document.getElementById(n._addUID("GPautoCompleteList")).style.display="none"},!1):t.attachEvent&&t.attachEvent("onclick",function(e){n.onAutoCompletedResultsItemClick(e),document.getElementById(n._addUID("GPautoCompleteList")).style.display="none"}),t},_createAutoCompletedLocationElement:function(n,t){var e=document.getElementById(this._addUID("GPautocompleteResults")),r=document.createElement("div");r.id=this._addUID("AutoCompletedLocation_"+t),r.className="GPautoCompleteProposal",r.innerHTML=n.fullText,r.addEventListener?r.addEventListener("click",function(i){e.click(i)},!1):r.attachEvent&&r.attachEvent("onclick",function(i){e.click(i)}),e.appendChild(r)},_createAdvancedSearchPanelHeaderElement:function(){var n=this,t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML="Recherche avanc\xe9e",t.appendChild(e);var r=document.createElement("div");return r.id=this._addUID("GPadvancedSearchClose"),r.className="GPpanelClose",r.title="Fermer la recherche avanc\xe9e",r.addEventListener?r.addEventListener("click",function(){document.querySelector("#GPsearchInput-"+n._uid+" input").disabled=!1,document.getElementById(n._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(n._addUID("GPshowAdvancedSearch")).style.display="inline-block",document.getElementById(n._addUID("GPadvancedSearchPanel")).style.display="none"},!1):r.attachEvent&&r.attachEvent("onclick",function(){document.querySelector("#GPsearchInput-"+n._uid+" input").disabled=!1,document.getElementById(n._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(n._addUID("GPshowAdvancedSearch")).style.display="inline-block",document.getElementById(n._addUID("GPadvancedSearchPanel")).style.display="none"}),t.appendChild(r),t},_createAdvancedSearchPanelFormElement:function(n){var t=this,e=document.createElement("form");e.id=this._addUID("GPadvancedSearchForm"),e.addEventListener("submit",function(s){s.preventDefault();for(var a=[],h=document.querySelectorAll("#GPadvancedSearchFilters-"+t._uid+" > div > div > input"),p=0;p<h.length;p++){var m=h[p];a.push({key:m.name,value:m.value})}return t.onGeocodingAdvancedSearchSubmit(s,a),document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="block",!1});var r=document.createElement("div");r.className="GPflexInput";var i=document.createElement("label");i.className="GPadvancedSearchCodeLabel",i.innerHTML="Recherche par",r.appendChild(i);var o=this._createAdvancedSearchFormCodeElement(n);return r.appendChild(o),e.appendChild(r),e},_createAdvancedSearchFormCodeElement:function(n){var t=this,e=document.createElement("select");e.id=this._addUID("GPadvancedSearchCode"),e.className="GPadvancedSearchCode",e.addEventListener("change",function(o){t.onGeocodingAdvancedSearchCodeChange(o)},!1),n||(n=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"},{id:"Administratif",title:"Administratif"}]);for(var r=0;r<n.length;r++){var i=document.createElement("option");i.value=n[r].id,i.text=n[r].title,e.appendChild(i)}return e},_createAdvancedSearchFormInputElement:function(){var n=document.createElement("input");return n.type="submit",n.id=this._addUID("GPadvancedSearchSubmit"),n.className="GPinputSubmit",n.value="Chercher",n},_createAdvancedSearchFormFiltersElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPadvancedSearchFilters"),n},_createAdvancedSearchFiltersTableElement:function(n,t){var e=document.createElement("div");return e.id=this._addUID(n),t||(e.style.display="none"),e},_createAdvancedSearchFiltersAttributElement:function(n){var t=null,e=n.name,r=n.title,i=n.description,o=n.code,s=n.value,a=document.createElement("div");a.className="GPflexInput";var c=document.createElement("label");c.className="GPadvancedSearchFilterLabel",c.htmlFor=e,c.title=i||r,c.innerHTML=r,a.appendChild(c);var h=document.createElement("input");return h.id=e,h.className="GPadvancedSearchFilterInput",h.type="text",h.name=e,s&&(h.value=s),a.appendChild(h),(t=document.getElementById(this._addUID(o)))?t.appendChild(a):t=a,t},_createGeocodeResultsHeaderElement:function(){var n=this,t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML="R\xe9sultats de la recherche",t.appendChild(e);var r=document.createElement("div");return r.id=this._addUID("GPgeocodeResultsClose"),r.className="GPpanelClose",r.title="Fermer la fen\xeatre de r\xe9sultats",r.addEventListener?r.addEventListener("click",function(){document.getElementById(n._addUID("GPgeocodeResultsList")).style.display="none"},!1):r.attachEvent&&r.attachEvent("onclick",function(){document.getElementById(n._addUID("GPgeocodeResultsList")).style.display="none"}),t.appendChild(r),t},_createGeocodeResultsListElement:function(){var n=this,t=document.createElement("div");return t.id=this._addUID("GPgeocodeResults"),t.addEventListener?t.addEventListener("click",function(e){e.ctrlKey||(document.getElementById(n._addUID("GPgeocodeResultsList")).style.display="none"),n.onGeocodedResultsItemClick(e)},!1):t.attachEvent&&t.attachEvent("onclick",function(e){e.ctrlKey||(document.getElementById(n._addUID("GPgeocodeResultsList")).style.display="none"),n.onGeocodedResultsItemClick(e)}),t},_createGeocodedLocationElement:function(n,t){var e=document.getElementById(this._addUID("GPgeocodeResults")),r=document.createElement("div");if(r.id=this._addUID("GeocodedLocation_"+t),r.className="GPautoCompleteProposal","string"==typeof n)r.innerHTML=n;else{var i=n.placeAttributes;r.innerHTML=i.freeform?i.freeform:i.postalCode?i.postalCode+" "+i.commune:i.cadastralParcel?i.cadastralParcel:"..."}e.appendChild(r)}};var wi=Ki_getLogger("searchengine"),P8=function(n){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(e),this._container=this._initContainer(),this._containerElement=null,e.element&&e.element.appendChild&&(e.element.appendChild(this._container),this._containerElement=e.element),n.call(this,{element:this._containerElement||this._container,target:e.target,render:e.render})}return n&&(t.__proto__=n),t.prototype=Object.create(n.prototype,{}),vr.assign(t.prototype,Eq),t.prototype.constructor=t,t.prototype.setMap=function(e){e||this._clearResults(),n.prototype.setMap.call(this,e)},t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineInput.click(),this.collapsed=e):wi.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter")},t.prototype.initialize=function(e){this._checkInputOptions(e),this.options={collapsed:!0,zoomTo:"",resources:{geocode:[],autocomplete:[]},displayAdvancedSearch:!0,advancedSearch:{},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{},triggerGeocode:!1,triggerDelay:1e3},displayMarker:!0,markerStyle:"lightOrange",placeholder:"Rechercher un lieu, une adresse"},vr.mergeParams(this.options,e),0===this.options.resources.geocode.length&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),0===this.options.resources.autocomplete.length&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.collapsed=this.options.collapsed,this._uid=ni.generate(),this._showSearchEngineInput=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._suggestedContainer=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._marker=null;var r=this.options.markerStyle;this._markerUrl=-1===Object.keys(Ls).indexOf(r)?Ls.lightOrange:Ls[r],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._servicesRightManagement={},this._noRightManagement=!1,this._checkRightsManagement(),this._triggerHandler=null},t.prototype._checkInputOptions=function(e){var r;if(e.resources)if("object"==typeof e.resources){var i=e.resources.geocode;if(i)if(Array.isArray(i)){var o=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(r=0;r<i.length;r++)-1===o.indexOf(i[r])&&wi.log("[SearchEngine] options.resources.geocode : "+i[r]+" is not a resource for geocode")}else wi.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),i=null;var s=e.resources.autocomplete;if(s)if(Array.isArray(s)){var a=["StreetAddress","PositionOfInterest"];for(r=0;r<s.length;r++)-1===a.indexOf(s[r])&&wi.log("[SearchEngine] options.resources.autocomplete : "+s[r]+" is not a resource for autocomplete")}else wi.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),s=null}else wi.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null},t.prototype._initAdvancedSearchCodes=function(){for(var e=this.options.resources.geocode,r=0;r<e.length;r++)switch(e[r]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break;case"Administratif":this._advancedSearchCodes.push({id:"Administratif",title:"Administratif"})}0===this._advancedSearchCodes.length&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"}]),wi.log("advancedSearchCodes",this._advancedSearchCodes)},t.prototype._initAdvancedSearchFilters=function(){this._advancedSearchFilters=T8_advancedSearchFiltersByDefault,vr.assign(this._advancedSearchFilters,this.options.advancedSearch),wi.log("advancedSearchFilters",this._advancedSearchFilters)},t.prototype._initPopupDiv=function(){var e=this,r=document.createElement("div");r.className="gp-feature-info-div";var i=document.createElement("input");return i.type="button",i.className="gp-styling-button closer",i.onclick=function(){return null!=e._popupOverlay&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",r.appendChild(this._popupContent),r.appendChild(i),r},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),r=this._showSearchEngineInput=this._createShowSearchEngineElement();e.appendChild(r),this.options.collapsed||(r.checked=!0);var i=this._createShowSearchEnginePictoElement();e.appendChild(i);var o=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder),s=this;if(o.addEventListener?o.addEventListener("click",function(){s.onAutoCompleteInputClick()}):o.attachEvent&&o.attachEvent("onclick",function(){s.onAutoCompleteInputClick()}),e.appendChild(o),this.options.displayAdvancedSearch){var a=this._createShowAdvancedSearchElement();e.appendChild(a);var c=this._createAdvancedSearchPanelElement(),h=this._createAdvancedSearchPanelHeaderElement(),p=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),m=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var E=this._createAdvancedSearchFormInputElement();p.appendChild(m),p.appendChild(E),c.appendChild(h),c.appendChild(p),e.appendChild(c)}var S=this._autocompleteContainer=this._createAutoCompleteElement(),x=this._suggestedContainer=this._createAutoCompleteListElement();S.appendChild(x),e.appendChild(S);var P=this._createGeocodeResultsElement(),R=this._geocodedContainer=this._createGeocodeResultsListElement();return P.appendChild(R),e.appendChild(P),e},t.prototype._setFilter=function(e){for(var r=this._filterContainer,i=!1,o=0;o<this._advancedSearchCodes.length;o++)if(this._advancedSearchCodes[o].id===e){i=!0;break}if(i){for(this._currentGeocodingCode=e;r.firstChild;)r.removeChild(r.firstChild);var s=this._advancedSearchFilters[e];if(s&&0!==s.length){for(var a=this._createAdvancedSearchFiltersTableElement(e,!0),c=0;c<s.length;c++){var h=this._createAdvancedSearchFiltersAttributElement(s[c]);a.appendChild(h)}return r.appendChild(a),r}}else for(;r.firstChild;)r.removeChild(r.firstChild)},t.prototype._checkRightsManagement=function(){var e=[],i=null;(!(e=(i=this.options.autocompleteOptions.filterOptions)?i.type:[])||0===e.length)&&(e=this.options.resources.autocomplete),(!e||0===e.length)&&(e=["StreetAddress","PositionOfInterest"]);var o=zp_check({key:this.options.autocompleteOptions.apiKey||this.options.apiKey,resources:e,services:["AutoCompletion"]});wi.log("rightManagementAutoComplete",o),(!(e=(i=this.options.geocodeOptions.filterOptions)?i.type:[])||0===e.length)&&(e=this.options.resources.geocode),(!e||0===e.length)&&(e=["StreetAddress","PositionOfInterest"]);var s=zp_check({key:this.options.geocodeOptions.apiKey||this.options.apiKey,resources:e,services:["Geocode"]});wi.log("rightManagementGeocode",s),o||s?(this.options.apiKey||(this.options.apiKey=s?s.key:o.key),o&&(this._servicesRightManagement.AutoCompletion=o.AutoCompletion),s&&(this._servicesRightManagement.Geocode=s.Geocode)):this._noRightManagement=!0},t.prototype._requestAutoComplete=function(e){if(e&&("object"!=typeof e||0!==Object.keys(e).length)&&e.text){wi.log(e);var r={};vr.assign(r,this.options.autocompleteOptions.serviceOptions),vr.assign(r,e);var i=this.options.resources.autocomplete;i&&Array.isArray(i)&&(r.filterOptions||(r.filterOptions={}),r.filterOptions.type||(r.filterOptions.type=i)),r.apiKey=r.apiKey||this.options.apiKey,"boolean"!=typeof r.ssl&&(r.ssl="boolean"!=typeof this.options.ssl||this.options.ssl),wi.log(r),aa.Services.autoComplete(r)}},t.prototype._fillAutoCompletedLocationListContainer=function(e){if(e&&0!==e.length){var r=this._suggestedContainer;if(r.childElementCount)for(;r.firstChild;)r.removeChild(r.firstChild);this._displaySuggestedLocation();for(var i=0;i<e.length;i++)this._createAutoCompletedLocationElement(e[i],i)}},t.prototype._requestGeocoding=function(e){if(e&&("object"!=typeof e||0!==Object.keys(e).length)&&e.location){wi.log(e);var r={returnFreeForm:!0};vr.assign(r,this.options.geocodeOptions.serviceOptions),vr.assign(r,e);var i=this.options.resources.geocode;i&&Array.isArray(i)&&(r.filterOptions||(r.filterOptions={}),r.filterOptions.type||(r.filterOptions.type=i)),r.apiKey=r.apiKey||this.options.apiKey,"boolean"!=typeof r.ssl&&(r.ssl="boolean"!=typeof this.options.ssl||this.options.ssl),wi.log(r),aa.Services.geocode(r)}},t.prototype._fillGeocodedLocationListContainer=function(e){if(e&&0!==e.length){var r=this._geocodedContainer;if(r.childElementCount)for(;r.firstChild;)r.removeChild(r.firstChild);for(var i=0;i<e.length;i++)wi.log(e[i]),this._createGeocodedLocationElement(e[i],i);this._geocodedLocations=e}else this._clearGeocodedLocation()},t.prototype._setLabel=function(e){document.getElementById("GPsearchInputText-"+this._uid).value=e},t.prototype._setPosition=function(e,r){var i=this.getMap().getView();i.setCenter(e),i.setZoom(r)},t.prototype._setMarker=function(e,r){var i=this.getMap(),o=this;if(null!=this._marker&&(i.removeOverlay(this._marker),this._marker=null),e){var s=document.createElement("img");s.src=this._markerUrl,s.addEventListener?s.addEventListener("click",function(){o._onResultMarkerSelect(r)}):s.attachEvent&&s.attachEvent("onclick",function(){o._onResultMarkerSelect(r)}),this._marker=new Eu({position:e,offset:[-25.5,-38],element:s,stopEvent:!1}),i.addOverlay(this._marker)}},t.prototype._getZoom=function(e){var r=this.getMap(),i=this.options.zoomTo,o=null;if("function"==typeof i&&(wi.trace("zoom function"),o=i.call(this,e)),"number"==typeof i&&(wi.trace("zoom level"),o=i),"string"==typeof i)if("auto"===i)wi.trace("zoom auto"),o=T8_zoomToResultsByDefault(e);else{wi.trace("zoom level parsing");var s=parseInt(i,10);isNaN(s)||(wi.trace("zoom parsing"),o=s)}Number.isInteger=Number.isInteger||function(h){return"number"==typeof h&&isFinite(h)&&Math.floor(h)===h},(!o||""===o||!Number.isInteger(o))&&(wi.trace("zoom not found, current zoom..."),o=r.getView().getZoom());var a=r.minZoom,c=r.maxZoom;return o<a&&(wi.trace("zoom level min..."),o=a),o>c&&(wi.trace("zoom level max..."),o=c),wi.trace("zoom",o),o},t.prototype._onResultMarkerSelect=function(e){var r=this.getMap(),i="";if(e.attributes){i="<ul>";var o=e.attributes;for(var s in o)o.hasOwnProperty(s)&&"bbox"!==s&&(i+="<li>",i+='<span class="gp-attname-others-span">'+s.toUpperCase()+" : </span>",i+=o[s],i+=" </li>");i+=" </ul>"}else i=e.label;this._popupContent.innerHTML=i,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new Eu({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),r.addOverlay(this._popupOverlay))},t.prototype.onShowSearchEngineClick=function(){this.collapsed=this._showSearchEngineInput.checked,this.dispatchEvent("change:collapsed")},t.prototype.onSearchResetClick=function(){this._clearResults()},t.prototype.onAutoCompleteInputClick=function(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()},t.prototype.onAutoCompleteSearchText=function(e){var r=e.target.value;if(r){if(this._noRightManagement)return void wi.log("no rights for this service !");if(this._currentGeocodingLocation=r,r.length<3)return void this._clearSuggestedLocation();var i=this.options.autocompleteOptions.triggerGeocode,o=this.options.autocompleteOptions.triggerDelay,s=this;this._requestAutoComplete({text:r,onSuccess:function(c){if(wi.log("request from AutoComplete",c),c){s._suggestedLocations=c.suggestedLocations,s._locationsToBeDisplayed=[];for(var h=0;h<s._suggestedLocations.length;h++){var p=s._suggestedLocations[h];p.position&&0===p.position.x&&0===p.position.y&&p.fullText?s._getGeocodeCoordinatesFromFullText(p,h):s._locationsToBeDisplayed.push(p)}s._fillAutoCompletedLocationListContainer(s._locationsToBeDisplayed),s._triggerHandler&&(clearTimeout(s._triggerHandler),s._triggerHandler=null,wi.warn("Cancel a geocode request !"))}},onFailure:function(c){s._clearSuggestedLocation(),wi.log(c.message),"No suggestion matching the search"===c.message&&i&&(s._triggerHandler&&(clearTimeout(s._triggerHandler),wi.warn("Cancel the last geocode request !")),s._triggerHandler=setTimeout(function(){wi.warn("Launch a geocode request (code postal) !"),s._requestGeocoding({location:r,returnFreeForm:!0,onSuccess:function(h){if(wi.log("request from Geocoding",h),h){s._locationsToBeDisplayed=[];for(var p=h.locations,m=0;m<p.length;m++){var E=p[m];E.fullText=E.placeAttributes.freeform,E.position={x:E.position.y,y:E.position.x},s._locationsToBeDisplayed.push(E)}s._fillAutoCompletedLocationListContainer(p)}},onFailure:function(h){wi.log(h.message)}})},o))}});var a=this.getMap();a.on("click",this._hideSuggestedLocation,this),a.on("pointerdrag",this._hideSuggestedLocation,this)}},t.prototype._getGeocodeCoordinatesFromFullText=function(e,r){var i=this;aa.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,location:e.fullText,filterOptions:{type:e.type},onSuccess:function(o){wi.log("request from Geocoding (coordinates null)",o),o.locations&&0!==o.locations.length&&o.locations[0].position&&i._suggestedLocations&&i._suggestedLocations[r]&&(i._suggestedLocations[r].position={x:o.locations[0].position.y,y:o.locations[0].position.x},i._locationsToBeDisplayed.unshift(i._suggestedLocations[r]),i._fillAutoCompletedLocationListContainer(i._locationsToBeDisplayed))},onFailure:function(){i._suggestedLocations&&i._suggestedLocations[r]&&i._createAutoCompletedLocationElement(i._suggestedLocations[r],r)}})},t.prototype.onAutoCompletedResultsItemClick=function(e){var r=ni.index(e.target.id);if(wi.log(r),wi.log(this._locationsToBeDisplayed[r]),r){var i=[this._locationsToBeDisplayed[r].position.x,this._locationsToBeDisplayed[r].position.y],o={service:"SuggestedLocation",type:this._locationsToBeDisplayed[r].type,fields:this._locationsToBeDisplayed[r]},s=this._locationsToBeDisplayed[r].fullText;this._setLabel(s),o.label=s;var c=this.getMap().getView().getProjection().getCode();"EPSG:4326"!==c&&(i=Qi(i,"EPSG:4326",c));var h=this._getZoom(o);this._setPosition(i,h),this._displayMarker&&this._setMarker(i,o)}},t.prototype.onGeocodingSearchSubmit=function(e){var r=e.target[0].value;if(r){if(this._noRightManagement)return void wi.log("no rights for this service !");this._currentGeocodingLocation=r;var i=this;this._requestGeocoding({location:r,onSuccess:function(o){wi.log("request from Geocoding",o),o&&i._fillGeocodedLocationListContainer(o.locations)},onFailure:function(o){i._clearGeocodedLocation(),wi.log(o.message)}})}},t.prototype.onGeocodedResultsItemClick=function(e){var r=ni.index(e.target.id);if(r){var a,i=[this._geocodedLocations[r].position.y,this._geocodedLocations[r].position.x],o=this._geocodedLocations[r].placeAttributes,s={service:"DirectGeocodedLocation",type:this._geocodedLocations[r].type,fields:this._geocodedLocations[r]};o.freeform?a=o.freeform:o.postalCode?(a=o.postalCode+" "+o.commune,s.attributes=o):o.cadastralParcel?(a=o.cadastralParcel,s.attributes=o):a="...",this._setLabel(a),s.label=a;var h=this.getMap().getView().getProjection().getCode();"EPSG:4326"!==h&&(i=Qi(i,"EPSG:4326",h));var p=this._getZoom(s);this._setPosition(i,p),this._displayMarker&&this._setMarker(i,s)}},t.prototype.onGeocodingAdvancedSearchCodeChange=function(e){wi.log(e);var i=e.target.options[e.target.selectedIndex].value;!i||this._setFilter(i)},t.prototype.onGeocodingAdvancedSearchSubmit=function(e,r){if(wi.log(r),r&&0!==r.length){var i,s,o={};o.type=[this._currentGeocodingCode];for(var a=0;a<r.length;a++)o[(s=r[a]).key]=s.value;"CadastralParcel"===this._currentGeocodingCode?(i=this._getCadastralParcelRequestParams(o),o={type:[this._currentGeocodingCode]}):i=this._currentGeocodingLocation;var c=this;this._requestGeocoding({location:i,filterOptions:o,onSuccess:function(h){wi.log(h),h&&c._fillGeocodedLocationListContainer(h.locations)},onFailure:function(h){c._clearGeocodedLocation(),wi.log(h.message)}})}},t.prototype._getCadastralParcelRequestParams=function(e){var i,r="",o=e.department;r=o?2===(i=o.length)?o:1===i?"0"+o:o.substring(0,2):"__";var s=e.commune;r+=s?3===(i=s.length)?s:2===i?"_"+s:1===i?"__"+s:s.substring(0,3):"___";var a=e.insee;a&&5===a.length&&(r=a);var c=e.absorbedCity;c?3===(i=c.length)?r+=c:i<3?2===i?r+="_"+c:1===i&&(r+="__"+c):r+=c.substring(0,3):r+="___";var h=e.section;r+=h?2===(i=h.length)?h:1===i?"_"+h:h.substring(0,2):"__";var p=e.number;return r+=p?4===(i=p.length)?p:3===i?"_"+p:2===i?"__"+p:1===i?"___"+p:p.substring(0,4):"___",wi.log("location : "+r),r},t.prototype._clearResults=function(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),null!=this._popupOverlay&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)},t.prototype._clearSuggestedLocation=function(){if(this._suggestedLocations=[],this._suggestedContainer)for(;this._suggestedContainer.firstChild;)this._suggestedContainer.removeChild(this._suggestedContainer.firstChild)},t.prototype._hideSuggestedLocation=function(){this._autocompleteContainer&&(this._autocompleteContainer.style.display="none")},t.prototype._displaySuggestedLocation=function(){this._autocompleteContainer&&(this._autocompleteContainer.style.display="block")},t.prototype._clearGeocodedLocation=function(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)},t}(Su);const bq=P8;window.ol&&window.ol.control&&(window.ol.control.SearchEngine=P8);const Hp={modulo:function(n,t){var e=n%t;return e*t<0?e+t:e},decimalToDMS:function(n,t,e){var r=this.modulo(n+180,360)-180,i=Math.abs(3600*r),s=Math.pow(10,e||0),a=Math.floor(i/3600),c=Math.floor((i-3600*a)/60),h=i-3600*a-60*c;return(h=Math.ceil(h*s)/s)>=60&&(h=0,c+=1),c>=60&&(c=0,a+=1),{d:a,m:c,s:h,direction:t.charAt(r<0?1:0)}},toInteger:function(n,t){var r=parseInt(n,t||10);return!isNaN(r)&&isFinite(r)?r:null},isInteger:function(n){if(isNaN(n))return!1;var t=parseFloat(n);return(0|t)===t},toFloat:function(n){var t=parseFloat(n);return!isNaN(t)&&isFinite(t)?t:null}};var o3=Ki_getLogger("draggable");const jv_dragElement=function(n,t,e){var r,i,o=!1,s={x:0,y:0};function a(p){(p=p||window.event).preventDefault(),o=!0,p._pageX=p._pageX||p.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),p._pageY=p._pageY||p.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop),s.x=p._pageX-n.offsetLeft,s.y=p._pageY-n.offsetTop,document.addEventListener("mouseup",c,!0),document.addEventListener("mousemove",h,!0)}function c(){o=!1,document.removeEventListener("mouseup",c,!0),document.removeEventListener("mousemove",h,!0)}function h(p){if(p=p||window.event,o){p._pageX=p._pageX||p.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),p._pageY=p._pageY||p.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);var m=n.parentElement.offsetLeft,E=n.parentElement.offsetTop;o3.trace("parent offset",m,E),r=p._pageX-s.x<0-m?0-m:p._pageX-s.x+n.clientWidth>document.body.clientWidth?document.body.clientWidth-n.clientWidth:p._pageX-s.x,o3.trace("left/right constraint",r),i=p._pageY-s.y<0-E?0-E:p._pageY-s.y+n.clientHeight>document.body.clientHeight?document.body.clientHeight-n.clientHeight:p._pageY-s.y,o3.trace("top/bottom constraint",i),n.style.top=i+"px",n.style.left=r+"px"}}t?t.addEventListener("mousedown",a,!0):n.addEventListener("mousedown",a,!0)};var A8=.0066943799901413165,zP=484813681109536e-20,Cn=Math.PI/2,Un=1e-10,xu=.017453292519943295,Wp=57.29577951308232,rs=Math.PI/4,a3=2*Math.PI,Da=3.14159265359,Zc={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const Mq={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var M8=/[\s_\-\/\(\)]/g;function Uv(n,t){if(n[t])return n[t];for(var o,e=Object.keys(n),r=t.toLowerCase().replace(M8,""),i=-1;++i<e.length;)if((o=e[i]).toLowerCase().replace(M8,"")===r)return n[o]}function l3(n){var r,i,o,t={},e=n.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,c){var h=c.split("=");return h.push(!0),a[h[0].toLowerCase()]=h[1],a},{}),s={proj:"projName",datum:"datumCode",rf:function(a){t.rf=parseFloat(a)},lat_0:function(a){t.lat0=a*xu},lat_1:function(a){t.lat1=a*xu},lat_2:function(a){t.lat2=a*xu},lat_ts:function(a){t.lat_ts=a*xu},lon_0:function(a){t.long0=a*xu},lon_1:function(a){t.long1=a*xu},lon_2:function(a){t.long2=a*xu},alpha:function(a){t.alpha=parseFloat(a)*xu},lonc:function(a){t.longc=a*xu},x_0:function(a){t.x0=parseFloat(a)},y_0:function(a){t.y0=parseFloat(a)},k_0:function(a){t.k0=parseFloat(a)},k:function(a){t.k0=parseFloat(a)},a:function(a){t.a=parseFloat(a)},b:function(a){t.b=parseFloat(a)},r_a:function(){t.R_A=!0},zone:function(a){t.zone=parseInt(a,10)},south:function(){t.utmSouth=!0},towgs84:function(a){t.datum_params=a.split(",").map(function(c){return parseFloat(c)})},to_meter:function(a){t.to_meter=parseFloat(a)},units:function(a){t.units=a;var c=Uv(Mq,a);c&&(t.to_meter=c.to_meter)},from_greenwich:function(a){t.from_greenwich=a*xu},pm:function(a){var c=Uv(Zc,a);t.from_greenwich=(c||parseFloat(a))*xu},nadgrids:function(a){"@null"===a?t.datumCode="none":t.nadgrids=a},axis:function(a){var c="ewnsud";3===a.length&&-1!==c.indexOf(a.substr(0,1))&&-1!==c.indexOf(a.substr(1,1))&&-1!==c.indexOf(a.substr(2,1))&&(t.axis=a)},approx:function(){t.approx=!0}};for(r in e)i=e[r],r in s?"function"==typeof(o=s[r])?o(i):t[o]=i:t[r]=i;return"string"==typeof t.datumCode&&"WGS84"!==t.datumCode&&(t.datumCode=t.datumCode.toLowerCase()),t}var Oq=/\s/,Dq=/[A-Za-z]/,Lq=/[A-Za-z84]/,SL=/[,\]]/,L8=/[\d\.E\-\+]/;function xm(n){if("string"!=typeof n)throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function k8(n,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var i=e.reduce(function(o,s){return hS(s,o),o},t?{}:n);t&&(n[t]=i)}function hS(n,t){if(Array.isArray(n)){var e=n.shift();if("PARAMETER"===e&&(e=n.shift()),1===n.length)return Array.isArray(n[0])?(t[e]={},void hS(n[0],t[e])):void(t[e]=n[0]);if(n.length)if("TOWGS84"!==e){if("AXIS"===e)return e in t||(t[e]=[]),void t[e].push(n);var r;switch(Array.isArray(e)||(t[e]={}),e){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[e]={name:n[0].toLowerCase(),convert:n[1]},void(3===n.length&&hS(n[2],t[e]));case"SPHEROID":case"ELLIPSOID":return t[e]={name:n[0],a:n[1],rf:n[2]},void(4===n.length&&hS(n[3],t[e]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return n[0]=["name",n[0]],void k8(t,e,n);default:for(r=-1;++r<n.length;)if(!Array.isArray(n[r]))return hS(n,t[e]);return k8(t,e,n)}}else t[e]=n;else t[e]=!0}else t[n]=!0}function Tm(n){return.017453292519943295*n}function N8(n){var t=function(n){return new xm(n).output()}(n),e=t.shift(),r=t.shift();t.unshift(["name",r]),t.unshift(["type",e]);var i={};return hS(t,i),function(n){if("GEOGCS"===n.type?n.projName="longlat":"LOCAL_CS"===n.type?(n.projName="identity",n.local=!0):n.projName="object"==typeof n.PROJECTION?Object.keys(n.PROJECTION)[0]:n.PROJECTION,n.AXIS){for(var t="",e=0,r=n.AXIS.length;e<r;++e){var i=[n.AXIS[e][0].toLowerCase(),n.AXIS[e][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?t+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?t+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?t+="e":(-1!==i[0].indexOf("west")||("x"===i[0]||"lon"===i[0])&&"west"===i[1])&&(t+="w")}2===t.length&&(t+="u"),3===t.length&&(n.axis=t)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),"metre"===n.units&&(n.units="meter"),n.UNIT.convert&&("GEOGCS"===n.type?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var o=n.GEOGCS;function s(h){return h*(n.to_meter||1)}"GEOGCS"===n.type&&(o=n),o&&(n.datumCode=o.DATUM?o.DATUM.name.toLowerCase():o.name.toLowerCase(),"d_"===n.datumCode.slice(0,2)&&(n.datumCode=n.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===n.datumCode||"new_zealand_1949"===n.datumCode)&&(n.datumCode="nzgd49"),("wgs_1984"===n.datumCode||"world_geodetic_system_1984"===n.datumCode)&&("Mercator_Auxiliary_Sphere"===n.PROJECTION&&(n.sphere=!0),n.datumCode="wgs84"),"_ferro"===n.datumCode.slice(-6)&&(n.datumCode=n.datumCode.slice(0,-6)),"_jakarta"===n.datumCode.slice(-8)&&(n.datumCode=n.datumCode.slice(0,-8)),~n.datumCode.indexOf("belge")&&(n.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(n.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===n.ellps.toLowerCase().slice(0,13)&&(n.ellps="intl"),n.a=o.DATUM.SPHEROID.a,n.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(n.datum_params=o.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),"ch1903+"===n.datumCode&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Tm],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Tm],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",Tm],["lat0","latitude_of_origin",Tm],["lat0","standard_parallel_1",Tm],["lat1","standard_parallel_1",Tm],["lat2","standard_parallel_2",Tm],["azimuth","Azimuth"],["alpha","azimuth",Tm],["srsCode","name"]].forEach(function(h){return function(n,t){var e=t[0],r=t[1];!(e in n)&&r in n&&(n[e]=n[r],3===t.length&&(n[e]=t[2](n[e])))}(n,h)}),!n.long0&&n.longc&&("Albers_Conic_Equal_Area"===n.projName||"Lambert_Azimuthal_Equal_Area"===n.projName)&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&("Stereographic_South_Pole"===n.projName||"Polar Stereographic (variant B)"===n.projName)&&(n.lat0=Tm(n.lat1>0?90:-90),n.lat_ts=n.lat1)}(i),i}function Sh(n){var t=this;if(2===arguments.length){var e=arguments[1];Sh[n]="string"==typeof e?"+"===e.charAt(0)?l3(arguments[1]):N8(arguments[1]):e}else if(1===arguments.length){if(Array.isArray(n))return n.map(function(r){Array.isArray(r)?Sh.apply(t,r):Sh(r)});if("string"==typeof n){if(n in Sh)return Sh[n]}else"EPSG"in n?Sh["EPSG:"+n.EPSG]=n:"ESRI"in n?Sh["ESRI:"+n.ESRI]=n:"IAU2000"in n?Sh["IAU2000:"+n.IAU2000]=n:console.log(n);return}}xm.prototype.readCharicter=function(){var n=this.text[this.place++];if(4!==this.state)for(;Oq.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case 1:return this.neutral(n);case 2:return this.keyword(n);case 4:return this.quoted(n);case 5:return this.afterquote(n);case 3:return this.number(n);case-1:return}},xm.prototype.afterquote=function(n){if('"'===n)return this.word+='"',void(this.state=4);if(SL.test(n))return this.word=this.word.trim(),void this.afterItem(n);throw new Error("havn't handled \""+n+'" in afterquote yet, index '+this.place)},xm.prototype.afterItem=function(n){return","===n?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===n?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},xm.prototype.number=function(n){if(!L8.test(n)){if(SL.test(n))return this.word=parseFloat(this.word),void this.afterItem(n);throw new Error("havn't handled \""+n+'" in number yet, index '+this.place)}this.word+=n},xm.prototype.quoted=function(n){'"'!==n?this.word+=n:this.state=5},xm.prototype.keyword=function(n){if(Lq.test(n))this.word+=n;else{if("["===n){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=1)}if(!SL.test(n))throw new Error("havn't handled \""+n+'" in keyword yet, index '+this.place);this.afterItem(n)}},xm.prototype.neutral=function(n){if(Dq.test(n))return this.word=n,void(this.state=2);if('"'===n)return this.word="",void(this.state=4);if(L8.test(n))return this.word=n,void(this.state=3);if(!SL.test(n))throw new Error("havn't handled \""+n+'" in neutral yet, index '+this.place);this.afterItem(n)},xm.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)},function(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}(Sh);const xL=Sh;var Uq=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],zq=["3857","900913","3785","102113"];function F8(n,t){var e,r;if(n=n||{},!t)return n;for(r in t)void 0!==(e=t[r])&&(n[r]=e);return n}function Yp(n,t,e){var r=n*t;return e/Math.sqrt(1-r*r)}function WP(n){return n<0?-1:1}function Hn(n){return Math.abs(n)<=Da?n:n-WP(n)*a3}function yf(n,t,e){var r=n*e;return r=Math.pow((1-r)/(1+r),.5*n),Math.tan(.5*(Cn-t))/r}function YP(n,t){for(var r,i,e=.5*n,o=Cn-2*Math.atan(t),s=0;s<=15;s++)if(r=n*Math.sin(o),o+=i=Cn-2*Math.atan(t*Math.pow((1-r)/(1+r),e))-o,Math.abs(i)<=1e-10)return o;return-9999}function G8(n){return n}var nX=[{init:function(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):Yp(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function(n){var r,i,t=n.x,e=n.y;if(e*Wp>90&&e*Wp<-90&&t*Wp>180&&t*Wp<-180)return null;if(Math.abs(Math.abs(e)-Cn)<=Un)return null;if(this.sphere)r=this.x0+this.a*this.k0*Hn(t-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(rs+.5*e));else{var o=Math.sin(e),s=yf(this.e,e,o);r=this.x0+this.a*this.k0*Hn(t-this.long0),i=this.y0-this.a*this.k0*Math.log(s)}return n.x=r,n.y=i,n},inverse:function(n){var r,i,t=n.x-this.x0,e=n.y-this.y0;if(this.sphere)i=Cn-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var o=Math.exp(-e/(this.a*this.k0));if(-9999===(i=YP(this.e,o)))return null}return r=Hn(this.long0+t/(this.a*this.k0)),n.x=r,n.y=i,n},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:G8,inverse:G8,names:["longlat","identity"]}],TL={},PL=[];function B8(n,t){var e=PL.length;return n.names?(PL[e]=n,n.names.forEach(function(r){TL[r.toLowerCase()]=e}),this):(console.log(t),!0)}const oX={start:function(){nX.forEach(B8)},add:B8,get:function(n){if(!n)return!1;var t=n.toLowerCase();return void 0!==TL[t]&&PL[TL[t]]?PL[TL[t]]:void 0}};var fi={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},sX=fi.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};fi.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Vl={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var j8={};function fX(n){if(0===n.length)return null;var t="@"===n[0];return t&&(n=n.slice(1)),"null"===n?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:n,mandatory:!t,grid:j8[n]||null,isNull:!1}}function fS(n){return n/3600*Math.PI/180}function c3(n,t,e){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(t,e)))}function vX(n){return n.map(function(t){return[fS(t.longitudeShift),fS(t.latitudeShift)]})}function yX(n,t,e){return{name:c3(n,t+8,t+16).trim(),parent:c3(n,t+24,t+24+8).trim(),lowerLatitude:n.getFloat64(t+72,e),upperLatitude:n.getFloat64(t+88,e),lowerLongitude:n.getFloat64(t+104,e),upperLongitude:n.getFloat64(t+120,e),latitudeInterval:n.getFloat64(t+136,e),longitudeInterval:n.getFloat64(t+152,e),gridNodeCount:n.getInt32(t+168,e)}}function _X(n,t,e,r){for(var i=t+176,s=[],a=0;a<e.gridNodeCount;a++){var c={latitudeShift:n.getFloat32(i+16*a,r),longitudeShift:n.getFloat32(i+16*a+4,r),latitudeAccuracy:n.getFloat32(i+16*a+8,r),longitudeAccuracy:n.getFloat32(i+16*a+12,r)};s.push(c)}return s}function pS(n,t){if(!(this instanceof pS))return new pS(n);t=t||function(h){if(h)throw h};var e=function(n){if(!function(n){return"string"==typeof n}(n))return n;if(function(n){return n in xL}(n))return xL[n];if(function(n){return Uq.some(function(t){return n.indexOf(t)>-1})}(n)){var t=N8(n);if(function(n){var t=Uv(n,"authority");if(t){var e=Uv(t,"epsg");return e&&zq.indexOf(e)>-1}}(t))return xL["EPSG:3857"];var e=function(n){var t=Uv(n,"extension");if(t)return Uv(t,"proj4")}(t);return e?l3(e):t}return function(n){return"+"===n[0]}(n)?l3(n):void 0}(n);if("object"==typeof e){var r=pS.projections.get(e.projName);if(r){if(e.datumCode&&"none"!==e.datumCode){var i=Uv(Vl,e.datumCode);i&&(e.datum_params=i.towgs84?i.towgs84.split(","):null,e.ellps=i.ellipse,e.datumName=i.datumName?i.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84";var o=function(n,t,e,r,i){if(!n){var o=Uv(fi,r);o||(o=sX),n=o.a,t=o.b,e=o.rf}return e&&!t&&(t=(1-1/e)*n),(0===e||Math.abs(n-t)<Un)&&(i=!0,t=n),{a:n,b:t,rf:e,sphere:i}}(e.a,e.b,e.rf,e.ellps,e.sphere),s=function(n,t,e,r){var i=n*n,o=t*t,s=(i-o)/i,a=0;return r?(i=(n*=1-s*(.16666666666666666+s*(.04722222222222222+.022156084656084655*s)))*n,s=0):a=Math.sqrt(s),{es:s,e:a,ep2:(i-o)/o}}(o.a,o.b,0,e.R_A),a=function(n){return void 0===n?null:n.split(",").map(fX)}(e.nadgrids),c=e.datum||function(n,t,e,r,i,o,s){var a={};return a.datum_type=void 0===n||"none"===n?5:4,t&&(a.datum_params=t.map(parseFloat),(0!==a.datum_params[0]||0!==a.datum_params[1]||0!==a.datum_params[2])&&(a.datum_type=1),a.datum_params.length>3&&(0!==a.datum_params[3]||0!==a.datum_params[4]||0!==a.datum_params[5]||0!==a.datum_params[6])&&(a.datum_type=2,a.datum_params[3]*=zP,a.datum_params[4]*=zP,a.datum_params[5]*=zP,a.datum_params[6]=a.datum_params[6]/1e6+1)),s&&(a.datum_type=3,a.grids=s),a.a=e,a.b=r,a.es=i,a.ep2=o,a}(e.datumCode,e.datum_params,o.a,o.b,s.es,s.ep2,a);F8(this,e),F8(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=c,this.init(),t(null,this)}else t(n)}else t(n)}(pS.projections=oX).start();const qP=pS;function U8(n,t,e){var s,a,h,r=n.x,i=n.y,o=n.z?n.z:0;if(i<-Cn&&i>-1.001*Cn)i=-Cn;else if(i>Cn&&i<1.001*Cn)i=Cn;else{if(i<-Cn)return{x:-1/0,y:-1/0,z:n.z};if(i>Cn)return{x:1/0,y:1/0,z:n.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(i),h=Math.cos(i),{x:((s=e/Math.sqrt(1-t*(a*a)))+o)*h*Math.cos(r),y:(s+o)*h*Math.sin(r),z:(s*(1-t)+o)*a}}function V8(n,t,e,r){var a,c,h,p,m,E,S,x,P,R,F,D,j,$,ie,G=n.x,X=n.y,J=n.z?n.z:0;if(a=Math.sqrt(G*G+X*X),c=Math.sqrt(G*G+X*X+J*J),a/e<1e-12){if($=0,c/e<1e-12)return ie=-r,{x:n.x,y:n.y,z:n.z}}else $=Math.atan2(X,G);h=J/c,x=(p=a/c)*(1-t)*(m=1/Math.sqrt(1-t*(2-t)*p*p)),P=h*m,j=0;do{j++,E=t*(S=e/Math.sqrt(1-t*P*P))/(S+(ie=a*x+J*P-S*(1-t*P*P))),D=(F=h*(m=1/Math.sqrt(1-E*(2-E)*p*p)))*x-(R=p*(1-E)*m)*P,x=R,P=F}while(D*D>1e-24&&j<30);return{x:$,y:Math.atan(F/Math.abs(R)),z:ie}}function IL(n){return 1===n||2===n}function z8(n,t,e){if(null===n.grids||0===n.grids.length)return console.log("Grid shift grids not found"),-1;for(var r={x:-e.x,y:e.y},i={x:Number.NaN,y:Number.NaN},s=[],a=0;a<n.grids.length;a++){var c=n.grids[a];if(s.push(c.name),c.isNull){i=r;break}if(null!==c.grid){var h=c.grid.subgrids[0],p=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4;if(!(h.ll[1]-p>r.y||h.ll[0]-p>r.x||h.ll[1]+(h.lim[1]-1)*h.del[1]+p<r.y||h.ll[0]+(h.lim[0]-1)*h.del[0]+p<r.x||(i=SX(r,t,h),isNaN(i.x))))break}else if(c.mandatory)return console.log("Unable to find mandatory grid '"+c.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Wp+" "+r.y*Wp+" tried: '"+s+"'"),-1):(e.x=-i.x,e.y=i.y,0)}function SX(n,t,e){var r={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return r;var i={x:n.x,y:n.y};i.x-=e.ll[0],i.y-=e.ll[1],i.x=Hn(i.x-Math.PI)+Math.PI;var o=H8(i,e);if(t){if(isNaN(o.x))return r;o.x=i.x-o.x,o.y=i.y-o.y;var c,h,s=9;do{if(h=H8(o,e),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o.x+=(c={x:i.x-(h.x+o.x),y:i.y-(h.y+o.y)}).x,o.y+=c.y}while(s--&&Math.abs(c.x)>1e-12&&Math.abs(c.y)>1e-12);if(s<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=Hn(o.x+e.ll[0]),r.y=o.y+e.ll[1]}else isNaN(o.x)||(r.x=n.x+o.x,r.y=n.y+o.y);return r}function H8(n,t){var s,e={x:n.x/t.del[0],y:n.y/t.del[1]},r_x=Math.floor(e.x),r_y=Math.floor(e.y),i_x=e.x-1*r_x,i_y=e.y-1*r_y,o={x:Number.NaN,y:Number.NaN};if(r_x<0||r_x>=t.lim[0]||r_y<0||r_y>=t.lim[1])return o;var a_x=t.cvs[s=r_y*t.lim[0]+r_x][0],a_y=t.cvs[s][1];s++;var c_x=t.cvs[s][0],c_y=t.cvs[s][1],h_x=t.cvs[s+=t.lim[0]][0],h_y=t.cvs[s][1];s--;var p_y=t.cvs[s][1],m=i_x*i_y,E=i_x*(1-i_y),S=(1-i_x)*(1-i_y),x=(1-i_x)*i_y;return o.x=S*a_x+E*c_x+x*t.cvs[s][0]+m*h_x,o.y=S*a_y+E*c_y+x*p_y+m*h_y,o}function W8(n,t,e){var s,a,c,r=e.x,i=e.y,o=e.z||0,h={};for(c=0;c<3;c++)if(!t||2!==c||void 0!==e.z)switch(0===c?(s=r,a=-1!=="ew".indexOf(n.axis[c])?"x":"y"):1===c?(s=i,a=-1!=="ns".indexOf(n.axis[c])?"y":"x"):(s=o,a="z"),n.axis[c]){case"e":h[a]=s;break;case"w":h[a]=-s;break;case"n":h[a]=s;break;case"s":h[a]=-s;break;case"u":void 0!==e[a]&&(h.z=s);break;case"d":void 0!==e[a]&&(h.z=-s);break;default:return null}return h}function Y8(n){var t={x:n[0],y:n[1]};return n.length>2&&(t.z=n[2]),n.length>3&&(t.m=n[3]),t}function q8(n){if("function"==typeof Number.isFinite){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof n||n!=n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function AL(n,t,e){var r;if(Array.isArray(e)&&(e=Y8(e)),function(n){q8(n.x),q8(n.y)}(e),n.datum&&t.datum&&function(n,t){return(1===n.datum.datum_type||2===n.datum.datum_type)&&"WGS84"!==t.datumCode||(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==n.datumCode}(n,t)&&(e=AL(n,r=new qP("WGS84"),e),n=r),"enu"!==n.axis&&(e=W8(n,!1,e)),"longlat"===n.projName)e={x:e.x*xu,y:e.y*xu,z:e.z||0};else if(n.to_meter&&(e={x:e.x*n.to_meter,y:e.y*n.to_meter,z:e.z||0}),!(e=n.inverse(e)))return;if(n.from_greenwich&&(e.x+=n.from_greenwich),e=function(n,t,e){if(function(n,t){return!(n.datum_type!==t.datum_type||n.a!==t.a||Math.abs(n.es-t.es)>5e-11)&&(1===n.datum_type?n.datum_params[0]===t.datum_params[0]&&n.datum_params[1]===t.datum_params[1]&&n.datum_params[2]===t.datum_params[2]:2!==n.datum_type||n.datum_params[0]===t.datum_params[0]&&n.datum_params[1]===t.datum_params[1]&&n.datum_params[2]===t.datum_params[2]&&n.datum_params[3]===t.datum_params[3]&&n.datum_params[4]===t.datum_params[4]&&n.datum_params[5]===t.datum_params[5]&&n.datum_params[6]===t.datum_params[6])}(n,t)||5===n.datum_type||5===t.datum_type)return e;var r=n.a,i=n.es;if(3===n.datum_type){if(0!==z8(n,!1,e))return;r=6378137,i=A8}var s=t.a,a=t.b,c=t.es;return 3===t.datum_type&&(s=6378137,a=6356752.314,c=A8),i!==c||r!==s||IL(n.datum_type)||IL(t.datum_type)?(e=U8(e,i,r),IL(n.datum_type)&&(e=function(n,t,e){if(1===t)return{x:n.x+e[0],y:n.y+e[1],z:n.z+e[2]};if(2===t){var s=e[3],a=e[4],c=e[5],h=e[6];return{x:h*(n.x-c*n.y+a*n.z)+e[0],y:h*(c*n.x+n.y-s*n.z)+e[1],z:h*(-a*n.x+s*n.y+n.z)+e[2]}}}(e,n.datum_type,n.datum_params)),IL(t.datum_type)&&(e=function(n,t,e){if(1===t)return{x:n.x-e[0],y:n.y-e[1],z:n.z-e[2]};if(2===t){var s=e[3],a=e[4],c=e[5],h=e[6],p=(n.x-e[0])/h,m=(n.y-e[1])/h,E=(n.z-e[2])/h;return{x:p+c*m-a*E,y:-c*p+m+s*E,z:a*p-s*m+E}}}(e,t.datum_type,t.datum_params)),e=V8(e,c,s,a),3!==t.datum_type||0===z8(t,!0,e)?e:void 0):e}(n.datum,t.datum,e))return t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),"longlat"===t.projName?e={x:e.x*Wp,y:e.y*Wp,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),"enu"!==t.axis?W8(t,!0,e):e}var X8=qP("WGS84");function h3(n,t,e){var r,i,o;return Array.isArray(e)?(r=AL(n,t,e)||{x:NaN,y:NaN},e.length>2?void 0!==n.name&&"geocent"===n.name||void 0!==t.name&&"geocent"===t.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(e.splice(3)):[r.x,r.y,e[2]].concat(e.splice(3)):[r.x,r.y].concat(e.splice(2)):[r.x,r.y]):(i=AL(n,t,e),2===(o=Object.keys(e)).length||o.forEach(function(s){if(void 0!==n.name&&"geocent"===n.name||void 0!==t.name&&"geocent"===t.name){if("x"===s||"y"===s||"z"===s)return}else if("x"===s||"y"===s)return;i[s]=e[s]}),i)}function K8(n){return n instanceof qP?n:n.oProj?n.oProj:qP(n)}const Vd=function(n,t,e){n=K8(n);var i,r=!1;return void 0===t?(t=n,n=X8,r=!0):(void 0!==t.x||Array.isArray(t))&&(e=t,t=n,n=X8,r=!0),t=K8(t),e?h3(n,t,e):(i={forward:function(o){return h3(n,t,o)},inverse:function(o){return h3(t,n,o)}},r&&(i.oProj=t),i)};const IX={forward:$8,inverse:function(n){var t=p3(r6(n.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]},toPoint:e6};function $8(n,t){return t=t||5,function(n,t){var e="00000"+n.easting,r="00000"+n.northing;return n.zoneNumber+n.zoneLetter+function(n,t,e){var r=n6(e);return function(n,t,e){var r=e-1,i="AJSAJS".charCodeAt(r),o="AFAFAF".charCodeAt(r),s=i+n-1,a=o+t,c=!1;return s>90&&(s=s-90+65-1,c=!0),(73===s||i<73&&s>73||(s>73||i<73)&&c)&&s++,(79===s||i<79&&s>79||(s>79||i<79)&&c)&&73==++s&&s++,s>90&&(s=s-90+65-1),a>86?(a=a-86+65-1,c=!0):c=!1,(73===a||o<73&&a>73||(a>73||o<73)&&c)&&a++,(79===a||o<79&&a>79||(a>79||o<79)&&c)&&73==++a&&a++,a>86&&(a=a-86+65-1),String.fromCharCode(s)+String.fromCharCode(a)}(Math.floor(n/1e5),Math.floor(t/1e5)%20,r)}(n.easting,n.northing,n.zoneNumber)+e.substr(e.length-5,t)+r.substr(r.length-5,t)}(function(n){var a,c,h,p,m,P,R,t=n.lat,e=n.lon,r=6378137,i=.00669438,o=.9996,S=f3(t),x=f3(e);R=Math.floor((e+180)/6)+1,180===e&&(R=60),t>=56&&t<64&&e>=3&&e<12&&(R=32),t>=72&&t<84&&(e>=0&&e<9?R=31:e>=9&&e<21?R=33:e>=21&&e<33?R=35:e>=33&&e<42&&(R=37)),P=f3(6*(R-1)-180+3),a=i/(1-i),c=r/Math.sqrt(1-i*Math.sin(S)*Math.sin(S)),h=Math.tan(S)*Math.tan(S),p=a*Math.cos(S)*Math.cos(S);var F=o*c*((m=Math.cos(S)*(x-P))+(1-h+p)*m*m*m/6+(5-18*h+h*h+72*p-58*a)*m*m*m*m*m/120)+5e5,D=o*(r*(.9983242984503243*S-.002514607064228144*Math.sin(2*S)+2639046602129982e-21*Math.sin(4*S)-35*i*i*i/3072*Math.sin(6*S))+c*Math.tan(S)*(m*m/2+(5-h+9*p+4*p*p)*m*m*m*m/24+(61-58*h+h*h+600*p-330*a)*m*m*m*m*m*m/720));return t<0&&(D+=1e7),{northing:Math.round(D),easting:Math.round(F),zoneNumber:R,zoneLetter:RX(t)}}({lat:n[1],lon:n[0]}),t)}function e6(n){var t=p3(r6(n.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function f3(n){return n*(Math.PI/180)}function t6(n){return n/Math.PI*180}function p3(n){var t=n.northing,e=n.easting,r=n.zoneLetter,i=n.zoneNumber;if(i<0||i>60)return null;var c,p,m,E,S,x,R,F,D,o=.9996,s=6378137,a=.00669438,h=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),j=e-5e5,G=t;r<"N"&&(G-=1e7),R=6*(i-1)-180+3,c=a/(1-a),D=(F=G/o/6367449.145945056)+(3*h/2-27*h*h*h/32)*Math.sin(2*F)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*F)+151*h*h*h/96*Math.sin(6*F),p=s/Math.sqrt(1-a*Math.sin(D)*Math.sin(D)),m=Math.tan(D)*Math.tan(D),E=c*Math.cos(D)*Math.cos(D),S=s*(1-a)/Math.pow(1-a*Math.sin(D)*Math.sin(D),1.5),x=j/(p*o);var X=D-p*Math.tan(D)/S*(x*x/2-(5+3*m+10*E-4*E*E-9*c)*x*x*x*x/24+(61+90*m+298*E+45*m*m-252*c-3*E*E)*x*x*x*x*x*x/720);X=t6(X);var $,J=(x-(1+2*m+E)*x*x*x/6+(5-2*E+28*m-3*E*E+8*c+24*m*m)*x*x*x*x*x/120)/Math.cos(D);if(J=R+t6(J),n.accuracy){var le=p3({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});$={top:le.lat,right:le.lon,bottom:X,left:J}}else $={lat:X,lon:J};return $}function RX(n){var t="Z";return 84>=n&&n>=72?t="X":72>n&&n>=64?t="W":64>n&&n>=56?t="V":56>n&&n>=48?t="U":48>n&&n>=40?t="T":40>n&&n>=32?t="S":32>n&&n>=24?t="R":24>n&&n>=16?t="Q":16>n&&n>=8?t="P":8>n&&n>=0?t="N":0>n&&n>=-8?t="M":-8>n&&n>=-16?t="L":-16>n&&n>=-24?t="K":-24>n&&n>=-32?t="J":-32>n&&n>=-40?t="H":-40>n&&n>=-48?t="G":-48>n&&n>=-56?t="F":-56>n&&n>=-64?t="E":-64>n&&n>=-72?t="D":-72>n&&n>=-80&&(t="C"),t}function n6(n){var t=n%6;return 0===t&&(t=6),t}function r6(n){if(n&&0===n.length)throw"MGRSPoint coverting from nothing";for(var i,t=n.length,e=null,r="",o=0;!/[A-Z]/.test(i=n.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+n;r+=i,o++}var s=parseInt(r,10);if(0===o||o+3>t)throw"MGRSPoint bad conversion from: "+n;var a=n.charAt(o++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+n;e=n.substring(o,o+=2);for(var c=n6(s),h=function(n,t){for(var e="AJSAJS".charCodeAt(t-1),r=1e5,i=!1;e!==n.charCodeAt(0);){if(73==++e&&e++,79===e&&e++,e>90){if(i)throw"Bad character: "+n;e=65,i=!0}r+=1e5}return r}(e.charAt(0),c),p=function(n,t){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var e="AFAFAF".charCodeAt(t-1),r=0,i=!1;e!==n.charCodeAt(0);){if(73==++e&&e++,79===e&&e++,e>86){if(i)throw"Bad character: "+n;e=65,i=!0}r+=1e5}return r}(e.charAt(1),c);p<FX(a);)p+=2e6;var m=t-o;if(m%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+n;var P,R,F,E=m/2,S=0,x=0;return E>0&&(P=1e5/Math.pow(10,E),R=n.substring(o,o+E),S=parseFloat(R)*P,F=n.substring(o+E),x=parseFloat(F)*P),{easting:S+h,northing:x+p,zoneLetter:a,zoneNumber:s,accuracy:P}}function FX(n){var t;switch(n){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+n}function mS(n,t,e){if(!(this instanceof mS))return new mS(n,t,e);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if("object"==typeof n)this.x=n.x,this.y=n.y,this.z=n.z||0;else if("string"==typeof n&&void 0===t){var r=n.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=n,this.y=t,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}mS.fromMGRS=function(n){return new mS(e6(n))},mS.prototype.toMGRS=function(n){return $8([this.x,this.y],n)};const GX=mS;var o6=.01953125,s6=.01068115234375;function a6(n){var t=[];t[0]=1-n*(.25+n*(.046875+n*(o6+n*s6))),t[1]=n*(.75-n*(.046875+n*(o6+n*s6)));var e=n*n;return t[2]=e*(.46875-n*(.013020833333333334+.007120768229166667*n)),t[3]=(e*=n)*(.3645833333333333-.005696614583333333*n),t[4]=e*n*.3076171875,t}function ML(n,t,e,r){return r[0]*n-(e*=t)*(r[1]+(t*=t)*(r[2]+t*(r[3]+t*r[4])))}function l6(n,t,e){for(var r=1/(1-t),i=n,o=20;o;--o){var s=Math.sin(i),a=1-t*s*s;if(i-=a=(ML(i,s,Math.cos(i),e)-n)*(a*Math.sqrt(a))*r,Math.abs(a)<Un)return i}return i}const RL={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=a6(this.es),this.ml0=ML(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(n){var i,o,s,e=n.y,r=Hn(n.x-this.long0),a=Math.sin(e),c=Math.cos(e);if(this.es){var p=c*r,m=Math.pow(p,2),E=this.ep2*Math.pow(c,2),S=Math.pow(E,2),x=Math.abs(c)>Un?Math.tan(e):0,P=Math.pow(x,2),R=Math.pow(P,2);i=1-this.es*Math.pow(a,2),p/=Math.sqrt(i);var F=ML(e,a,c,this.en);o=this.a*(this.k0*p*(1+m/6*(1-P+E+m/20*(5-18*P+R+14*E-58*P*E+m/42*(61+179*R-R*P-479*P)))))+this.x0,s=this.a*(this.k0*(F-this.ml0+a*r*p/2*(1+m/12*(5-P+9*E+4*S+m/30*(61+R-58*P+270*E-330*P*E+m/56*(1385+543*R-R*P-3111*P))))))+this.y0}else{var h=c*Math.sin(r);if(Math.abs(Math.abs(h)-1)<Un)return 93;if(o=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,s=c*Math.cos(r)/Math.sqrt(1-Math.pow(h,2)),(h=Math.abs(s))>=1){if(h-1>Un)return 93;s=0}else s=Math.acos(s);e<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return n.x=o,n.y=s,n},inverse:function(n){var t,e,r,i,o=1/this.a*(n.x-this.x0),s=1/this.a*(n.y-this.y0);if(this.es)if(e=l6(t=this.ml0+s/this.k0,this.es,this.en),Math.abs(e)<Cn){var m=Math.sin(e),E=Math.cos(e),S=Math.abs(E)>Un?Math.tan(e):0,x=this.ep2*Math.pow(E,2),P=Math.pow(x,2),R=Math.pow(S,2),F=Math.pow(R,2);t=1-this.es*Math.pow(m,2);var D=o*Math.sqrt(t)/this.k0,j=Math.pow(D,2);r=e-(t*=S)*j/(1-this.es)*.5*(1-j/12*(5+3*R-9*x*R+x-4*P-j/30*(61+90*R-252*x*R+45*F+46*x-j/56*(1385+3633*R+4095*F+1574*F*R)))),i=Hn(this.long0+D*(1-j/6*(1+2*R+x-j/20*(5+28*R+24*F+8*x*R+6*x-j/42*(61+662*R+1320*F+720*F*R))))/E)}else r=Cn*WP(s),i=0;else{var a=Math.exp(o/this.k0),c=.5*(a-1/a),p=Math.cos(this.lat0+s/this.k0);t=Math.sqrt((1-Math.pow(p,2))/(1+Math.pow(c,2))),r=Math.asin(t),s<0&&(r=-r),i=0===c&&0===p?0:Hn(Math.atan2(c,p)+this.long0)}return n.x=i,n.y=r,n},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function u6(n){var t=Math.exp(n);return(t-1/t)/2}function OL(n,t){n=Math.abs(n),t=Math.abs(t);var e=Math.max(n,t),r=Math.min(n,t)/(e||1);return e*Math.sqrt(1+Math.pow(r,2))}function g3(n,t){for(var s,e=2*Math.cos(2*t),r=n.length-1,i=n[r],o=0;--r>=0;)s=e*i-o+n[r],o=i,i=s;return t+s*Math.sin(2*t)}function c6(n,t,e){for(var x,P,r=Math.sin(t),i=Math.cos(t),o=u6(e),s=function(n){var t=Math.exp(n);return(t+1/t)/2}(e),a=2*i*s,c=-2*r*o,h=n.length-1,p=n[h],m=0,E=0,S=0;--h>=0;)x=E,P=m,p=a*(E=p)-x-c*(m=S)+n[h],S=c*E-P+a*m;return[(a=r*s)*p-(c=i*o)*S,a*S+c*p]}const DL={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(RL.init.apply(this),this.forward=RL.forward,this.inverse=RL.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),t=n/(2-n),e=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),this.cgb[1]=(e*=t)*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=e*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),this.cgb[2]=(e*=t)*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=e*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),this.cgb[3]=(e*=t)*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=e*(1237/630+t*(t*(-24832/14175)-2.4)),this.cgb[4]=(e*=t)*(4174/315+t*(-144838/6237)),this.cbg[4]=e*(-734/315+t*(109598/31185)),this.cgb[5]=(e*=t)*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=e*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=e*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),this.utg[2]=(e*=t)*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=e*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),this.utg[3]=(e*=t)*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=e*(49561/161280+t*(-179/168+t*(6601661/7257600))),this.utg[4]=(e*=t)*(-4583/161280+t*(108847/3991680)),this.gtu[4]=e*(34729/80640+t*(-3418889/1995840)),this.utg[5]=(e*=t)*(-20648693/638668800),this.gtu[5]=.6650675310896665*e;var r=g3(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(n,t){for(var s,e=2*Math.cos(t),r=n.length-1,i=n[r],o=0;--r>=0;)s=e*i-o+n[r],o=i,i=s;return Math.sin(t)*s}(this.gtu,2*r))},forward:function(n){var t=Hn(n.x-this.long0),e=n.y;e=g3(this.cbg,e);var r=Math.sin(e),i=Math.cos(e),o=Math.sin(t),s=Math.cos(t);e=Math.atan2(r,s*i),t=Math.atan2(o*i,OL(r,i*s)),t=function(n){var t=Math.abs(n);return t=function(n){var t=1+n,e=t-1;return 0===e?n:n*Math.log(t)/e}(t*(1+t/(OL(1,t)+1))),n<0?-t:t}(Math.tan(t));var c,h,a=c6(this.gtu,2*e,2*t);return e+=a[0],t+=a[1],Math.abs(t)<=2.623395162778?(c=this.a*(this.Qn*t)+this.x0,h=this.a*(this.Qn*e+this.Zb)+this.y0):(c=1/0,h=1/0),n.x=c,n.y=h,n},inverse:function(n){var r,i,t=1/this.a*(n.x-this.x0),e=1/this.a*(n.y-this.y0);if(e=(e-this.Zb)/this.Qn,t/=this.Qn,Math.abs(t)<=2.623395162778){var o=c6(this.utg,2*e,2*t);e+=o[0],t+=o[1],t=Math.atan(u6(t));var s=Math.sin(e),a=Math.cos(e),c=Math.sin(t),h=Math.cos(t);e=Math.atan2(s*h,OL(c,h*a)),r=Hn((t=Math.atan2(c,h*a))+this.long0),i=g3(this.cgb,e)}else r=1/0,i=1/0;return n.x=r,n.y=i,n},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},dK={init:function(){var n=function(n,t){if(void 0===n){if((n=Math.floor(30*(Hn(t)+Math.PI)/Math.PI)+1)<0)return 0;if(n>60)return 60}return n}(this.zone,this.long0);if(void 0===n)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*xu,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,DL.init.apply(this),this.forward=DL.forward,this.inverse=DL.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function m3(n,t){return Math.pow((1-n)/(1+n),t)}const v3={init:function(){var n=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+rs)/(Math.pow(Math.tan(.5*this.lat0+rs),this.C)*m3(this.e*n,this.ratexp))},forward:function(n){var t=n.x,e=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+rs),this.C)*m3(this.e*Math.sin(e),this.ratexp))-Cn,n.x=this.C*t,n},inverse:function(n){for(var e=n.x/this.C,r=n.y,i=Math.pow(Math.tan(.5*r+rs)/this.K,1/this.C),o=20;o>0&&(r=2*Math.atan(i*m3(this.e*Math.sin(n.y),-.5*this.e))-Cn,!(Math.abs(r-n.y)<1e-14));--o)n.y=r;return o?(n.x=e,n.y=r,n):null},names:["gauss"]},bK={init:function(){v3.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(n){var t,e,r,i;return n.x=Hn(n.x-this.long0),v3.forward.apply(this,[n]),t=Math.sin(n.y),e=Math.cos(n.y),r=Math.cos(n.x),n.x=(i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*e*r))*e*Math.sin(n.x),n.y=i*(this.cosc0*t-this.sinc0*e*r),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n},inverse:function(n){var t,e,r,i,o;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,o=Math.sqrt(n.x*n.x+n.y*n.y)){var s=2*Math.atan2(o,this.R2);t=Math.sin(s),e=Math.cos(s),i=Math.asin(e*this.sinc0+n.y*t*this.cosc0/o),r=Math.atan2(n.x*t,o*this.cosc0*e-n.y*this.sinc0*t)}else i=this.phic0,r=0;return n.x=r,n.y=i,v3.inverse.apply(this,[n]),n.x=Hn(n.x+this.long0),n},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},PK={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Un&&(this.k0=.5*(1+WP(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Un&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Un&&(this.k0=.5*this.cons*Yp(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/yf(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Yp(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Cn,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(n){var o,s,a,c,h,p,t=n.x,e=n.y,r=Math.sin(e),i=Math.cos(e),m=Hn(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Un&&Math.abs(e+this.lat0)<=Un?(n.x=NaN,n.y=NaN,n):this.sphere?(o=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(m)),n.x=this.a*o*i*Math.sin(m)+this.x0,n.y=this.a*o*(this.coslat0*r-this.sinlat0*i*Math.cos(m))+this.y0,n):(s=2*Math.atan(this.ssfn_(e,r,this.e))-Cn,c=Math.cos(s),a=Math.sin(s),Math.abs(this.coslat0)<=Un?(h=yf(this.e,e*this.con,this.con*r),n.x=this.x0+(p=2*this.a*this.k0*h/this.cons)*Math.sin(t-this.long0),n.y=this.y0-this.con*p*Math.cos(t-this.long0),n):(Math.abs(this.sinlat0)<Un?(o=2*this.a*this.k0/(1+c*Math.cos(m)),n.y=o*a):(o=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*c*Math.cos(m))),n.y=o*(this.cosX0*a-this.sinX0*c*Math.cos(m))+this.y0),n.x=o*c*Math.sin(m)+this.x0,n))},inverse:function(n){n.x-=this.x0,n.y-=this.y0;var t,e,i,o,s=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var a=2*Math.atan(s/(2*this.a*this.k0));return t=this.long0,e=this.lat0,s<=Un?(n.x=t,n.y=e,n):(e=Math.asin(Math.cos(a)*this.sinlat0+n.y*Math.sin(a)*this.coslat0/s),t=Math.abs(this.coslat0)<Un?Hn(this.lat0>0?this.long0+Math.atan2(n.x,-1*n.y):this.long0+Math.atan2(n.x,n.y)):Hn(this.long0+Math.atan2(n.x*Math.sin(a),s*this.coslat0*Math.cos(a)-n.y*this.sinlat0*Math.sin(a))),n.x=t,n.y=e,n)}if(Math.abs(this.coslat0)<=Un){if(s<=Un)return e=this.lat0,n.x=t=this.long0,n.y=e,n;n.x*=this.con,n.y*=this.con,e=this.con*YP(this.e,s*this.cons/(2*this.a*this.k0)),t=this.con*Hn(this.con*this.long0+Math.atan2(n.x,-1*n.y))}else i=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,s<=Un?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+n.y*Math.sin(i)*this.cosX0/s),t=Hn(this.long0+Math.atan2(n.x*Math.sin(i),s*this.cosX0*Math.cos(i)-n.y*this.sinX0*Math.sin(i)))),e=-1*YP(this.e,Math.tan(.5*(Cn+o)));return n.x=t,n.y=e,n},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(n,t,e){return t*=e,Math.tan(.5*(Cn+n))*Math.pow((1-t)/(1+t),.5*e)}},OK={init:function(){var n=this.lat0;this.lambda0=this.long0;var t=Math.sin(n),e=this.a,i=1/this.rf,o=2*i-Math.pow(i,2),s=this.e=Math.sqrt(o);this.R=this.k0*e*Math.sqrt(1-o)/(1-o*Math.pow(t,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),c=Math.log(Math.tan(Math.PI/4+n/2)),h=Math.log((1+s*t)/(1-s*t));this.K=a-this.alpha*c+this.alpha*s/2*h},forward:function(n){var t=Math.log(Math.tan(Math.PI/4-n.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),i=2*(Math.atan(Math.exp(-this.alpha*(t+e)+this.K))-Math.PI/4),o=this.alpha*(n.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return n.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,n.x=this.R*s+this.x0,n},inverse:function(n){for(var r=(n.x-this.x0)/this.R,i=2*(Math.atan(Math.exp((n.y-this.y0)/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),s=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+s/this.alpha,c=0,h=o,p=-1e3,m=0;Math.abs(h-p)>1e-7;){if(++m>20)return;c=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),p=h,h=2*Math.atan(Math.exp(c))-Math.PI/2}return n.x=a,n.y=h,n},names:["somerc"]},FK={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var n=Math.sin(this.lat0),t=Math.cos(this.lat0),e=this.e*n;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-e*e);var o,s,r=yf(this.e,this.lat0,n),i=this.bl/t*Math.sqrt((1-this.es)/(1-e*e));if(i*i<1&&(i=1),isNaN(this.longc)){var a=yf(this.e,this.lat1,Math.sin(this.lat1)),c=yf(this.e,this.lat2,Math.sin(this.lat2));this.el=this.lat0>=0?(i+Math.sqrt(i*i-1))*Math.pow(r,this.bl):(i-Math.sqrt(i*i-1))*Math.pow(r,this.bl);var h=Math.pow(a,this.bl),p=Math.pow(c,this.bl);s=.5*((o=this.el/h)-1/o);var m=(this.el*this.el-p*h)/(this.el*this.el+p*h),E=(p-h)/(p+h),S=Hn(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(m*Math.tan(.5*this.bl*S)/E)/this.bl,this.long0=Hn(this.long0);var x=Hn(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*x)/s),this.alpha=Math.asin(i*Math.sin(this.gamma0))}else o=this.lat0>=0?i+Math.sqrt(i*i-1):i-Math.sqrt(i*i-1),this.el=o*Math.pow(r,this.bl),s=.5*(o-1/o),this.gamma0=Math.asin(Math.sin(this.alpha)/i),this.long0=this.longc-Math.asin(s*Math.tan(this.gamma0))/this.bl;this.uc=this.no_off?0:this.lat0>=0?this.al/this.bl*Math.atan2(Math.sqrt(i*i-1),Math.cos(this.alpha)):-1*this.al/this.bl*Math.atan2(Math.sqrt(i*i-1),Math.cos(this.alpha))},forward:function(n){var i,o,s,e=n.y,r=Hn(n.x-this.long0);if(Math.abs(Math.abs(e)-Cn)<=Un)s=e>0?-1:1,o=this.al/this.bl*Math.log(Math.tan(rs+s*this.gamma0*.5)),i=-1*s*Cn*this.al/this.bl;else{var a=yf(this.e,e,Math.sin(e)),c=this.el/Math.pow(a,this.bl),h=.5*(c-1/c),p=.5*(c+1/c),m=Math.sin(this.bl*r),E=(h*Math.sin(this.gamma0)-m*Math.cos(this.gamma0))/p;o=Math.abs(Math.abs(E)-1)<=Un?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-E)/(1+E))/this.bl,i=Math.abs(Math.cos(this.bl*r))<=Un?this.al*this.bl*r:this.al*Math.atan2(h*Math.cos(this.gamma0)+m*Math.sin(this.gamma0),Math.cos(this.bl*r))/this.bl}return this.no_rot?(n.x=this.x0+i,n.y=this.y0+o):(i-=this.uc,n.x=this.x0+o*Math.cos(this.alpha)+i*Math.sin(this.alpha),n.y=this.y0+i*Math.cos(this.alpha)-o*Math.sin(this.alpha)),n},inverse:function(n){var t,e;this.no_rot?(e=n.y-this.y0,t=n.x-this.x0):(e=(n.x-this.x0)*Math.cos(this.alpha)-(n.y-this.y0)*Math.sin(this.alpha),t=(n.y-this.y0)*Math.cos(this.alpha)+(n.x-this.x0)*Math.sin(this.alpha),t+=this.uc);var r=Math.exp(-1*this.bl*e/this.al),i=.5*(r-1/r),o=.5*(r+1/r),s=Math.sin(this.bl*t/this.al),a=(s*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/o,c=Math.pow(this.el/Math.sqrt((1+a)/(1-a)),1/this.bl);return Math.abs(a-1)<Un?(n.x=this.long0,n.y=Cn):Math.abs(a+1)<Un?(n.x=this.long0,n.y=-1*Cn):(n.y=YP(this.e,c),n.x=Hn(this.long0-Math.atan2(i*Math.cos(this.gamma0)-s*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)),n},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},VK={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Un)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var t=Math.sin(this.lat1),e=Math.cos(this.lat1),r=Yp(this.e,t,e),i=yf(this.e,this.lat1,t),o=Math.sin(this.lat2),s=Math.cos(this.lat2),a=Yp(this.e,o,s),c=yf(this.e,this.lat2,o),h=yf(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>Un?Math.log(r/a)/Math.log(i/c):t,isNaN(this.ns)&&(this.ns=t),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(n){var t=n.x,e=n.y;Math.abs(2*Math.abs(e)-Math.PI)<=Un&&(e=WP(e)*(Cn-2*Un));var i,o,r=Math.abs(Math.abs(e)-Cn);if(r>Un)i=yf(this.e,e,Math.sin(e)),o=this.a*this.f0*Math.pow(i,this.ns);else{if((r=e*this.ns)<=0)return null;o=0}var s=this.ns*Hn(t-this.long0);return n.x=this.k0*(o*Math.sin(s))+this.x0,n.y=this.k0*(this.rh-o*Math.cos(s))+this.y0,n},inverse:function(n){var t,e,r,i,o,s=(n.x-this.x0)/this.k0,a=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(s*s+a*a),e=1):(t=-Math.sqrt(s*s+a*a),e=-1);var c=0;if(0!==t&&(c=Math.atan2(e*s,e*a)),0!==t||this.ns>0){if(e=1/this.ns,r=Math.pow(t/(this.a*this.f0),e),-9999===(i=YP(this.e,r)))return null}else i=-Cn;return o=Hn(c/this.ns+this.long0),n.x=o,n.y=i,n},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},qK={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(n){var t,e,r,i,o,s,a,h=n.y,p=Hn(n.x-this.long0);return t=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/t)-this.s45),r=-p*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(r)),o=Math.asin(Math.cos(e)*Math.sin(r)/Math.cos(i)),s=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),n.y=a*Math.cos(s)/1,n.x=a*Math.sin(s)/1,this.czech||(n.y*=-1,n.x*=-1),n},inverse:function(n){var t,e,r,i,s,a,c,h=n.x;n.x=n.y,n.y=h,this.czech||(n.y*=-1,n.x*=-1),s=Math.sqrt(n.x*n.x+n.y*n.y),i=Math.atan2(n.y,n.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),e=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(t)),n.x=this.long0-e/this.alfa,a=t,c=0;var p=0;do{n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-n.y)<1e-10&&(c=1),a=n.y,p+=1}while(0===c&&p<15);return p>=15?null:n},names:["Krovak","krovak"]};function sc(n,t,e,r,i){return n*i-t*Math.sin(2*i)+e*Math.sin(4*i)-r*Math.sin(6*i)}function ZP(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function JP(n){return.375*n*(1+.25*n*(1+.46875*n))}function QP(n){return.05859375*n*n*(1+.75*n)}function $P(n){return n*n*n*(35/3072)}function vS(n,t,e){var r=t*e;return n/Math.sqrt(1-r*r)}function yS(n){return Math.abs(n)<Cn?n:n-WP(n)*Math.PI}function LL(n,t,e,r,i){var o,s;o=n/t;for(var a=0;a<15;a++)if(o+=s=(n-(t*o-e*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(t-2*e*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(s)<=1e-10)return o;return NaN}const QK={init:function(){this.sphere||(this.e0=ZP(this.es),this.e1=JP(this.es),this.e2=QP(this.es),this.e3=$P(this.es),this.ml0=this.a*sc(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(n){var t,e,r=n.x,i=n.y;if(r=Hn(r-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(i)*Math.sin(r)),e=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),s=Math.cos(i),a=vS(this.a,this.e,o),c=Math.tan(i)*Math.tan(i),h=r*Math.cos(i),p=h*h,m=this.es*s*s/(1-this.es);t=a*h*(1-p*c*(1/6-(8-c+8*m)*p/120)),e=this.a*sc(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+a*o/s*p*(.5+(5-c+6*m)*p/24)}return n.x=t+this.x0,n.y=e+this.y0,n},inverse:function(n){n.x-=this.x0,n.y-=this.y0;var r,i,t=n.x/this.a,e=n.y/this.a;if(this.sphere){var o=e+this.lat0;r=Math.asin(Math.sin(o)*Math.cos(t)),i=Math.atan2(Math.tan(t),Math.cos(o))}else{var a=LL(this.ml0/this.a+e,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Cn)<=Un)return n.x=this.long0,n.y=Cn,e<0&&(n.y*=-1),n;var c=vS(this.a,this.e,Math.sin(a)),h=c*c*c/this.a/this.a*(1-this.es),p=Math.pow(Math.tan(a),2),m=t*this.a/c,E=m*m;r=a-c*Math.tan(a)/h*m*m*(.5-(1+3*p)*m*m/24),i=m*(1-E*(p/3+(1+3*p)*p*E/15))/Math.cos(a)}return n.x=Hn(i+this.long0),n.y=yS(r),n},names:["Cassini","Cassini_Soldner","cass"]};function Vv(n,t){var e;return n>1e-7?(1-n*n)*(t/(1-(e=n*t)*e)-.5/n*Math.log((1-e)/(1+e))):2*t}const gZ={init:function(){var t,n=Math.abs(this.lat0);if(this.mode=Math.abs(n-Cn)<Un?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(n)<Un?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=Vv(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(n){var t,e=[];return e[0]=.3333333333333333*n,e[0]+=.17222222222222222*(t=n*n),e[1]=.06388888888888888*t,e[0]+=.10257936507936508*(t*=n),e[1]+=.0664021164021164*t,e[2]=.016415012942191543*t,e}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Vv(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(n){var t,e,r,i,o,s,a,c,h,p,m=n.x,E=n.y;if(m=Hn(m-this.long0),this.sphere){if(o=Math.sin(E),p=Math.cos(E),r=Math.cos(m),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((e=this.mode===this.EQUIT?1+p*r:1+this.sinph0*o+this.cosph0*p*r)<=Un)return null;t=(e=Math.sqrt(2/e))*p*Math.sin(m),e*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*p*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(E+this.lat0)<Un)return null;e=rs-.5*E,t=(e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)))*Math.sin(m),e*=r}}else{switch(a=0,c=0,h=0,r=Math.cos(m),i=Math.sin(m),o=Math.sin(E),s=Vv(this.e,o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=s/this.qp,c=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:h=1+this.sinb1*a+this.cosb1*c*r;break;case this.EQUIT:h=1+c*r;break;case this.N_POLE:h=Cn+E,s=this.qp-s;break;case this.S_POLE:h=E-Cn,s=this.qp+s}if(Math.abs(h)<Un)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),e=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*a-this.sinb1*c*r):(h=Math.sqrt(2/(1+c*r)))*a*this.ymf,t=this.xmf*h*c*i;break;case this.N_POLE:case this.S_POLE:s>=0?(t=(h=Math.sqrt(s))*i,e=r*(this.mode===this.S_POLE?h:-h)):t=e=0}}return n.x=this.a*t+this.x0,n.y=this.a*e+this.y0,n},inverse:function(n){n.x-=this.x0,n.y-=this.y0;var r,i,o,s,a,c,h,t=n.x/this.a,e=n.y/this.a;if(this.sphere){var m,p=0,E=0;if((i=.5*(m=Math.sqrt(t*t+e*e)))>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(E=Math.sin(i),p=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(m)<=Un?0:Math.asin(e*E/m),t*=E,e=p*m;break;case this.OBLIQ:i=Math.abs(m)<=Un?this.lat0:Math.asin(p*this.sinph0+e*E*this.cosph0/m),t*=E*this.cosph0,e=(p-Math.sin(i)*this.sinph0)*m;break;case this.N_POLE:e=-e,i=Cn-i;break;case this.S_POLE:i-=Cn}r=0!==e||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(t,e):0}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,e*=this.dd,(c=Math.sqrt(t*t+e*e))<Un)return n.x=this.long0,n.y=this.lat0,n;s=2*Math.asin(.5*c/this.rq),o=Math.cos(s),t*=s=Math.sin(s),this.mode===this.OBLIQ?(a=this.qp*(h=o*this.sinb1+e*s*this.cosb1/c),e=c*this.cosb1*o-e*this.sinb1*s):(a=this.qp*(h=e*s/c),e=c*o)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),!(a=t*t+e*e))return n.x=this.long0,n.y=this.lat0,n;h=1-a/this.qp,this.mode===this.S_POLE&&(h=-h)}r=Math.atan2(t,e),i=function(n,t){var e=n+n;return n+t[0]*Math.sin(e)+t[1]*Math.sin(e+e)+t[2]*Math.sin(e+e+e)}(Math.asin(h),this.apa)}return n.x=Hn(this.long0+r),n.y=i,n},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function zv(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}const bZ={init:function(){Math.abs(this.lat1+this.lat2)<Un||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Yp(this.e3,this.sin_po,this.cos_po),this.qs1=Vv(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Yp(this.e3,this.sin_po,this.cos_po),this.qs2=Vv(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Vv(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>Un?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(n){var t=n.x,e=n.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var r=Vv(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*Hn(t-this.long0),s=i*Math.sin(o)+this.x0,a=this.rh-i*Math.cos(o)+this.y0;return n.x=s,n.y=a,n},inverse:function(n){var t,r,i,o,s;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),r=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),r=-1),i=0,0!==t&&(i=Math.atan2(r*n.x,r*n.y)),r=t*this.ns0/this.a,s=this.sphere?Math.asin((this.c-r*r)/(2*this.ns0)):this.phi1z(this.e3,(this.c-r*r)/this.ns0),o=Hn(i/this.ns0+this.long0),n.x=o,n.y=s,n},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(n,t){var e,i,o,s,a=zv(.5*t);if(n<Un)return a;for(var c=n*n,h=1;h<=25;h++)if(a+=s=.5*(o=1-(i=n*(e=Math.sin(a)))*i)*o/Math.cos(a)*(t/(1-c)-e/o+.5/n*Math.log((1-i)/(1+i))),Math.abs(s)<=1e-7)return a;return null}},TZ={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(n){var t,e,r,i,s,a,c,p=n.y;return r=Hn(n.x-this.long0),t=Math.sin(p),e=Math.cos(p),i=Math.cos(r),(s=this.sin_p14*t+this.cos_p14*e*i)>0||Math.abs(s)<=Un?(a=this.x0+1*this.a*e*Math.sin(r)/s,c=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*e*i)/s):(a=this.x0+this.infinity_dist*e*Math.sin(r),c=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*e*i)),n.x=a,n.y=c,n},inverse:function(n){var t,e,r,i,o,s;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(t=Math.sqrt(n.x*n.x+n.y*n.y))?(i=Math.atan2(t,this.rc),e=Math.sin(i),s=zv((r=Math.cos(i))*this.sin_p14+n.y*e*this.cos_p14/t),o=Math.atan2(n.x*e,t*this.cos_p14*r-n.y*this.sin_p14*e),o=Hn(this.long0+o)):(s=this.phic0,o=0),n.x=o,n.y=s,n},names:["gnom"]},OZ={init:function(){this.sphere||(this.k0=Yp(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(n){var r,i,e=n.y,o=Hn(n.x-this.long0);if(this.sphere)r=this.x0+this.a*o*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var s=Vv(this.e,Math.sin(e));r=this.x0+this.a*this.k0*o,i=this.y0+this.a*s*.5/this.k0}return n.x=r,n.y=i,n},inverse:function(n){var t,e;return n.x-=this.x0,n.y-=this.y0,this.sphere?(t=Hn(this.long0+n.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(e=function(n,t){var e=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(t)-e)<1e-6)return t<0?-1*Cn:Cn;for(var i,o,s,a,r=Math.asin(.5*t),c=0;c<30;c++)if(o=Math.sin(r),s=Math.cos(r),a=n*o,r+=i=Math.pow(1-a*a,2)/(2*s)*(t/(1-n*n)-o/(1-a*a)+.5/n*Math.log((1-a)/(1+a))),Math.abs(i)<=1e-10)return r;return NaN}(this.e,2*n.y*this.k0/this.a),t=Hn(this.long0+n.x/(this.a*this.k0))),n.x=t,n.y=e,n},names:["cea"]},FZ={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(n){var e=n.y,r=Hn(n.x-this.long0),i=yS(e-this.lat0);return n.x=this.x0+this.a*r*this.rc,n.y=this.y0+this.a*i,n},inverse:function(n){var e=n.y;return n.x=Hn(this.long0+(n.x-this.x0)/(this.a*this.rc)),n.y=yS(this.lat0+(e-this.y0)/this.a),n},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},VZ={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ZP(this.es),this.e1=JP(this.es),this.e2=QP(this.es),this.e3=$P(this.es),this.ml0=this.a*sc(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(n){var r,i,o,e=n.y,s=Hn(n.x-this.long0);if(o=s*Math.sin(e),this.sphere)Math.abs(e)<=Un?(r=this.a*s,i=-1*this.a*this.lat0):(r=this.a*Math.sin(o)/Math.tan(e),i=this.a*(yS(e-this.lat0)+(1-Math.cos(o))/Math.tan(e)));else if(Math.abs(e)<=Un)r=this.a*s,i=-1*this.ml0;else{var a=vS(this.a,this.e,Math.sin(e))/Math.tan(e);r=a*Math.sin(o),i=this.a*sc(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+a*(1-Math.cos(o))}return n.x=r+this.x0,n.y=i+this.y0,n},inverse:function(n){var t,e,r,i,o,s,a,c,h;if(r=n.x-this.x0,i=n.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=Un)t=Hn(r/this.a+this.long0),e=0;else{var p;for(a=r*r/this.a/this.a+(s=this.lat0+i/this.a)*s,c=s,o=20;o;--o)if(c+=h=-1*(s*(c*(p=Math.tan(c))+1)-c-.5*(c*c+a)*p)/((c-s)/p-1),Math.abs(h)<=Un){e=c;break}t=Hn(this.long0+Math.asin(r*Math.tan(c)/this.a)/Math.sin(e))}else if(Math.abs(i+this.ml0)<=Un)e=0,t=Hn(this.long0+r/this.a);else{var m,E,S,x,P;for(a=r*r/this.a/this.a+(s=(this.ml0+i)/this.a)*s,c=s,o=20;o;--o)if(P=this.e*Math.sin(c),m=Math.sqrt(1-P*P)*Math.tan(c),E=this.a*sc(this.e0,this.e1,this.e2,this.e3,c),S=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),c-=h=(s*(m*(x=E/this.a)+1)-x-.5*m*(x*x+a))/(this.es*Math.sin(2*c)*(x*x+a-2*s*x)/(4*m)+(s-x)*(m*S-2/Math.sin(2*c))-S),Math.abs(h)<=Un){e=c;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),t=Hn(this.long0+Math.asin(r*m/this.a)/Math.sin(e))}return n.x=t,n.y=e,n},names:["Polyconic","poly"]},qZ={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(n){var t,s=(n.y-this.lat0)/zP*1e-5,a=n.x-this.long0,c=1,h=0;for(t=1;t<=10;t++)h+=this.A[t]*(c*=s);var P,p=h,m=a,E=1,S=0,R=0,F=0;for(t=1;t<=6;t++)P=S*p+E*m,R=R+this.B_re[t]*(E=E*p-S*m)-this.B_im[t]*(S=P),F=F+this.B_im[t]*E+this.B_re[t]*S;return n.x=F*this.a+this.x0,n.y=R*this.a+this.y0,n},inverse:function(n){var t,m,s=(n.y-this.y0)/this.a,a=(n.x-this.x0)/this.a,c=1,h=0,E=0,S=0;for(t=1;t<=6;t++)m=h*s+c*a,E=E+this.C_re[t]*(c=c*s-h*a)-this.C_im[t]*(h=m),S=S+this.C_im[t]*c+this.C_re[t]*h;for(var x=0;x<this.iterations;x++){var D,P=E,R=S,j=s,G=a;for(t=2;t<=6;t++)D=R*E+P*S,j+=(t-1)*(this.B_re[t]*(P=P*E-R*S)-this.B_im[t]*(R=D)),G+=(t-1)*(this.B_im[t]*P+this.B_re[t]*R);P=1,R=0;var X=this.B_re[1],J=this.B_im[1];for(t=2;t<=6;t++)D=R*E+P*S,X+=t*(this.B_re[t]*(P=P*E-R*S)-this.B_im[t]*(R=D)),J+=t*(this.B_im[t]*P+this.B_re[t]*R);var $=X*X+J*J;E=(j*X+G*J)/$,S=(G*X-j*J)/$}var le=E,ie=S,Fe=1,Ce=0;for(t=1;t<=9;t++)Ce+=this.D[t]*(Fe*=le);var $e=this.lat0+Ce*zP*1e5;return n.x=this.long0+ie,n.y=$e,n},names:["New_Zealand_Map_Grid","nzmg"]},QZ={init:function(){},forward:function(n){var e=n.y,r=Hn(n.x-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return n.x=i,n.y=o,n},inverse:function(n){n.x-=this.x0,n.y-=this.y0;var t=Hn(this.long0+n.x/this.a),e=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=t,n.y=e,n},names:["Miller_Cylindrical","mill"]},iJ={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=a6(this.es)},forward:function(n){var t,e,r=n.x,i=n.y;if(r=Hn(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),s=20;s;--s){var a=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=a,Math.abs(a)<Un)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;t=this.a*this.C_x*r*(this.m+Math.cos(i)),e=this.a*this.C_y*i}else{var c=Math.sin(i),h=Math.cos(i);e=this.a*ML(i,c,h,this.en),t=this.a*r*h/Math.sqrt(1-this.es*c*c)}return n.x=t,n.y=e,n},inverse:function(n){var t,r,i;return n.x-=this.x0,r=n.x/this.a,n.y-=this.y0,t=n.y/this.a,this.sphere?(t/=this.C_y,r/=this.C_x*(this.m+Math.cos(t)),this.m?t=zv((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=zv(Math.sin(t)/this.n)),r=Hn(r+this.long0),t=yS(t)):(t=l6(n.y/this.a,this.es,this.en),(i=Math.abs(t))<Cn?(i=Math.sin(t),r=Hn(this.long0+n.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(t)))):i-Un<Cn&&(r=this.long0)),n.x=r,n.y=t,n},names:["Sinusoidal","sinu"]},uJ={init:function(){},forward:function(n){for(var e=n.y,r=Hn(n.x-this.long0),i=e,o=Math.PI*Math.sin(e);;){var s=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=s,Math.abs(s)<Un)break}i/=2,Math.PI/2-Math.abs(e)<Un&&(r=0);var a=.900316316158*this.a*r*Math.cos(i)+this.x0,c=1.4142135623731*this.a*Math.sin(i)+this.y0;return n.x=a,n.y=c,n},inverse:function(n){var t,e;n.x-=this.x0,n.y-=this.y0,e=n.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),t=Math.asin(e);var r=Hn(this.long0+n.x/(.900316316158*this.a*Math.cos(t)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),e=(2*t+Math.sin(2*t))/Math.PI,Math.abs(e)>1&&(e=1);var i=Math.asin(e);return n.x=r,n.y=i,n},names:["Mollweide","moll"]},pJ={init:function(){Math.abs(this.lat1+this.lat2)<Un||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ZP(this.es),this.e1=JP(this.es),this.e2=QP(this.es),this.e3=$P(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Yp(this.e,this.sinphi,this.cosphi),this.ml1=sc(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Un?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Yp(this.e,this.sinphi,this.cosphi),this.ml2=sc(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=sc(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(n){var r,t=n.x,e=n.y;if(this.sphere)r=this.a*(this.g-e);else{var i=sc(this.e0,this.e1,this.e2,this.e3,e);r=this.a*(this.g-i)}var o=this.ns*Hn(t-this.long0),s=this.x0+r*Math.sin(o),a=this.y0+this.rh-r*Math.cos(o);return n.x=s,n.y=a,n},inverse:function(n){var t,e,r,i;n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),t=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),t=-1);var o=0;return 0!==e&&(o=Math.atan2(t*n.x,t*n.y)),this.sphere?(i=Hn(this.long0+o/this.ns),r=yS(this.g-e/this.a),n.x=i,n.y=r,n):(r=LL(this.g-e/this.a,this.e0,this.e1,this.e2,this.e3),i=Hn(this.long0+o/this.ns),n.x=i,n.y=r,n)},names:["Equidistant_Conic","eqdc"]},_J={init:function(){this.R=this.a},forward:function(n){var i,o,e=n.y,r=Hn(n.x-this.long0);Math.abs(e)<=Un&&(i=this.x0+this.R*r,o=this.y0);var s=zv(2*Math.abs(e/Math.PI));(Math.abs(r)<=Un||Math.abs(Math.abs(e)-Cn)<=Un)&&(i=this.x0,o=e>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/r-r/Math.PI),c=a*a,h=Math.sin(s),p=Math.cos(s),m=p/(h+p-1),S=m*(2/h-1),x=S*S,P=Math.PI*this.R*(a*(m-x)+Math.sqrt(c*(m-x)*(m-x)-(x+c)*(m*m-x)))/(x+c);r<0&&(P=-P),i=this.x0+P;var R=c+m;return P=Math.PI*this.R*(S*R-a*Math.sqrt((x+c)*(c+1)-R*R))/(x+c),o=e>=0?this.y0+P:this.y0-P,n.x=i,n.y=o,n},inverse:function(n){var t,e,r,i,o,s,a,c,h,p,m,E;return n.x-=this.x0,n.y-=this.y0,m=Math.PI*this.R,o=(r=n.x/m)*r+(i=n.y/m)*i,m=3*(i*i/(c=-2*(s=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(a=s-2*i*i+r*r)*a*a/c/c/c-9*s*a/c/c)/27)/(h=(s-a*a/3/c)/c)/(p=2*Math.sqrt(-h/3)),Math.abs(m)>1&&(m=m>=0?1:-1),E=Math.acos(m)/3,e=n.y>=0?(-p*Math.cos(E+Math.PI/3)-a/3/c)*Math.PI:-(-p*Math.cos(E+Math.PI/3)-a/3/c)*Math.PI,t=Math.abs(r)<Un?this.long0:Hn(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),n.x=t,n.y=e,n},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},SJ={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(n){var s,a,c,h,p,m,E,S,x,P,R,F,D,j,G,X,J,$,le,ie,Fe,Ce,t=n.x,e=n.y,r=Math.sin(n.y),i=Math.cos(n.y),o=Hn(t-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Un?(n.x=this.x0+this.a*(Cn-e)*Math.sin(o),n.y=this.y0-this.a*(Cn-e)*Math.cos(o),n):Math.abs(this.sin_p12+1)<=Un?(n.x=this.x0+this.a*(Cn+e)*Math.sin(o),n.y=this.y0+this.a*(Cn+e)*Math.cos(o),n):($=this.sin_p12*r+this.cos_p12*i*Math.cos(o),J=(X=Math.acos($))?X/Math.sin(X):1,n.x=this.x0+this.a*J*i*Math.sin(o),n.y=this.y0+this.a*J*(this.cos_p12*r-this.sin_p12*i*Math.cos(o)),n):(s=ZP(this.es),a=JP(this.es),c=QP(this.es),h=$P(this.es),Math.abs(this.sin_p12-1)<=Un?(p=this.a*sc(s,a,c,h,Cn),m=this.a*sc(s,a,c,h,e),n.x=this.x0+(p-m)*Math.sin(o),n.y=this.y0-(p-m)*Math.cos(o),n):Math.abs(this.sin_p12+1)<=Un?(p=this.a*sc(s,a,c,h,Cn),m=this.a*sc(s,a,c,h,e),n.x=this.x0+(p+m)*Math.sin(o),n.y=this.y0+(p+m)*Math.cos(o),n):(E=r/i,S=vS(this.a,this.e,this.sin_p12),x=vS(this.a,this.e,r),P=Math.atan((1-this.es)*E+this.es*S*this.sin_p12/(x*i)),le=0===(R=Math.atan2(Math.sin(o),this.cos_p12*Math.tan(P)-this.sin_p12*Math.cos(o)))?Math.asin(this.cos_p12*Math.sin(P)-this.sin_p12*Math.cos(P)):Math.abs(Math.abs(R)-Math.PI)<=Un?-Math.asin(this.cos_p12*Math.sin(P)-this.sin_p12*Math.cos(P)):Math.asin(Math.sin(o)*Math.cos(P)/Math.sin(R)),F=this.e*this.sin_p12/Math.sqrt(1-this.es),D=this.e*this.cos_p12*Math.cos(R)/Math.sqrt(1-this.es),n.x=this.x0+(X=S*le*(1-(ie=le*le)*(G=D*D)*(1-G)/6+(Fe=ie*le)/8*(j=F*D)*(1-2*G)+(Ce=Fe*le)/120*(G*(4-7*G)-3*F*F*(1-7*G))-Ce*le/48*j))*Math.sin(R),n.y=this.y0+X*Math.cos(R),n))},inverse:function(n){var t,e,r,i,o,s,a,c,h,p,m,E,x,P,R,F,D,j,G,X,J,$,le;return n.x-=this.x0,n.y-=this.y0,this.sphere?(t=Math.sqrt(n.x*n.x+n.y*n.y))>2*Cn*this.a?void 0:(e=t/this.a,r=Math.sin(e),i=Math.cos(e),o=this.long0,Math.abs(t)<=Un?s=this.lat0:(s=zv(i*this.sin_p12+n.y*r*this.cos_p12/t),a=Math.abs(this.lat0)-Cn,o=Math.abs(a)<=Un?Hn(this.lat0>=0?this.long0+Math.atan2(n.x,-n.y):this.long0-Math.atan2(-n.x,n.y)):Hn(this.long0+Math.atan2(n.x*r,t*this.cos_p12*i-n.y*this.sin_p12*r))),n.x=o,n.y=s,n):(c=ZP(this.es),h=JP(this.es),p=QP(this.es),m=$P(this.es),Math.abs(this.sin_p12-1)<=Un?(s=LL(((E=this.a*sc(c,h,p,m,Cn))-(t=Math.sqrt(n.x*n.x+n.y*n.y)))/this.a,c,h,p,m),o=Hn(this.long0+Math.atan2(n.x,-1*n.y)),n.x=o,n.y=s,n):Math.abs(this.sin_p12+1)<=Un?(E=this.a*sc(c,h,p,m,Cn),s=LL(((t=Math.sqrt(n.x*n.x+n.y*n.y))-E)/this.a,c,h,p,m),o=Hn(this.long0+Math.atan2(n.x,n.y)),n.x=o,n.y=s,n):(t=Math.sqrt(n.x*n.x+n.y*n.y),R=Math.atan2(n.x,n.y),x=vS(this.a,this.e,this.sin_p12),F=Math.cos(R),G=3*this.es*(1-(j=-(D=this.e*this.cos_p12*F)*D/(1-this.es)))*this.sin_p12*this.cos_p12*F/(1-this.es),$=1-j*(J=(X=t/x)-j*(1+j)*Math.pow(X,3)/6-G*(1+3*j)*Math.pow(X,4)/24)*J/2-X*J*J*J/6,P=Math.asin(this.sin_p12*Math.cos(J)+this.cos_p12*Math.sin(J)*F),o=Hn(this.long0+Math.asin(Math.sin(R)*Math.sin(J)/Math.cos(P))),le=Math.sin(P),s=Math.atan2((le-this.es*$*this.sin_p12)*Math.tan(P),le*(1-this.es)),n.x=o,n.y=s,n))},names:["Azimuthal_Equidistant","aeqd"]},AJ={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(n){var t,e,r,i,s,a,c,p=n.y;return r=Hn(n.x-this.long0),t=Math.sin(p),e=Math.cos(p),i=Math.cos(r),((s=this.sin_p14*t+this.cos_p14*e*i)>0||Math.abs(s)<=Un)&&(a=1*this.a*e*Math.sin(r),c=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*e*i)),n.x=a,n.y=c,n},inverse:function(n){var t,e,r,i,o,s,a;return n.x-=this.x0,n.y-=this.y0,e=zv((t=Math.sqrt(n.x*n.x+n.y*n.y))/this.a),r=Math.sin(e),i=Math.cos(e),s=this.long0,Math.abs(t)<=Un?(a=this.lat0,n.x=s,n.y=a,n):(a=zv(i*this.sin_p14+n.y*r*this.cos_p14/t),o=Math.abs(this.lat0)-Cn,Math.abs(o)<=Un?(s=Hn(this.lat0>=0?this.long0+Math.atan2(n.x,-n.y):this.long0-Math.atan2(-n.x,n.y)),n.x=s,n.y=a,n):(s=Hn(this.long0+Math.atan2(n.x*r,t*this.cos_p14*i-n.y*this.sin_p14*r)),n.x=s,n.y=a,n))},names:["ortho"]};function kL(n,t,e,r){var i;return n<Un?(r.value=1,i=0):(i=Math.atan2(t,e),Math.abs(i)<=rs?r.value=1:i>rs&&i<=Cn+rs?(r.value=2,i-=Cn):i>Cn+rs||i<=-(Cn+rs)?(r.value=3,i=i>=0?i-Da:i+Da):(r.value=4,i+=Cn)),i}function _S(n,t){var e=n+t;return e<-Da?e+=a3:e>+Da&&(e-=a3),e}const LJ={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=Cn-rs/2?5:this.lat0<=-(Cn-rs/2)?6:Math.abs(this.long0)<=rs?1:Math.abs(this.long0)<=Cn+rs?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(n){var e,r,i,o,s,a,t={x:0,y:0},c={value:0};if(n.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(n.y)):n.y,r=n.x,5===this.face)o=Cn-e,r>=rs&&r<=Cn+rs?(c.value=1,i=r-Cn):r>Cn+rs||r<=-(Cn+rs)?(c.value=2,i=r>0?r-Da:r+Da):r>-(Cn+rs)&&r<=-rs?(c.value=3,i=r+Cn):(c.value=4,i=r);else if(6===this.face)o=Cn+e,r>=rs&&r<=Cn+rs?(c.value=1,i=-r+Cn):r<rs&&r>=-rs?(c.value=2,i=-r):r<-rs&&r>=-(Cn+rs)?(c.value=3,i=-r-Cn):(c.value=4,i=r>0?-r+Da:-r-Da);else{var h,p,m,E,S,x;2===this.face?r=_S(r,+Cn):3===this.face?r=_S(r,+Da):4===this.face&&(r=_S(r,-Cn)),E=Math.sin(e),S=Math.cos(e),x=Math.sin(r),h=S*Math.cos(r),p=S*x,m=E,1===this.face?i=kL(o=Math.acos(h),m,p,c):2===this.face?i=kL(o=Math.acos(p),m,-h,c):3===this.face?i=kL(o=Math.acos(-h),m,-p,c):4===this.face?i=kL(o=Math.acos(-p),m,h,c):(o=i=0,c.value=1)}return a=Math.atan(12/Da*(i+Math.acos(Math.sin(i)*Math.cos(rs))-Cn)),s=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(i))))),2===c.value?a+=Cn:3===c.value?a+=Da:4===c.value&&(a+=1.5*Da),t.x=s*Math.cos(a),t.y=s*Math.sin(a),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,n.x=t.x,n.y=t.y,n},inverse:function(n){var e,r,i,o,s,a,c,h,p,P,R,F,t={lam:0,phi:0},m={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,r=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),e=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?m.value=1:n.y>=0&&n.y>=Math.abs(n.x)?(m.value=2,e-=Cn):n.x<0&&-n.x>=Math.abs(n.y)?(m.value=3,e=e<0?e+Da:e-Da):(m.value=4,e+=Cn),p=Da/12*Math.tan(e),s=Math.sin(p)/(Math.cos(p)-1/Math.sqrt(2)),a=Math.atan(s),(c=1-(i=Math.cos(e))*i*(o=Math.tan(r))*o*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?c=-1:c>1&&(c=1),5===this.face)h=Math.acos(c),t.phi=Cn-h,t.lam=1===m.value?a+Cn:2===m.value?a<0?a+Da:a-Da:3===m.value?a-Cn:a;else if(6===this.face)h=Math.acos(c),t.phi=h-Cn,t.lam=1===m.value?-a+Cn:2===m.value?-a:3===m.value?-a-Cn:a<0?-a-Da:-a+Da;else{var E,S,x;p=(E=c)*E,S=(p+=(x=p>=1?0:Math.sqrt(1-p)*Math.sin(a))*x)>=1?0:Math.sqrt(1-p),2===m.value?(p=S,S=-x,x=p):3===m.value?(S=-S,x=-x):4===m.value&&(p=S,S=x,x=-p),2===this.face?(p=E,E=-S,S=p):3===this.face?(E=-E,S=-S):4===this.face&&(p=E,E=S,S=-p),t.phi=Math.acos(-x)-Cn,t.lam=Math.atan2(S,E),2===this.face?t.lam=_S(t.lam,-Cn):3===this.face?t.lam=_S(t.lam,-Da):4===this.face&&(t.lam=_S(t.lam,+Cn))}return 0!==this.es&&(P=t.phi<0?1:0,R=Math.tan(t.phi),F=this.b/Math.sqrt(R*R+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-F*F)/(this.one_minus_f*F)),P&&(t.phi=-t.phi)),t.lam+=this.long0,n.x=t.lam,n.y=t.phi,n},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var y3=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],eI=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],NL=function(n,t){return n[0]+t*(n[1]+t*(n[2]+t*n[3]))};const VJ={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(n){var t=Hn(n.x-this.long0),e=Math.abs(n.y),r=Math.floor(11.459155902616464*e);r<0?r=0:r>=18&&(r=17);var i={x:NL(y3[r],e=Wp*(e-.08726646259971647*r))*t,y:NL(eI[r],e)};return n.y<0&&(i.y=-i.y),i.x=i.x*this.a*.8487+this.x0,i.y=i.y*this.a*1.3523+this.y0,i},inverse:function(n){var t={x:(n.x-this.x0)/(.8487*this.a),y:Math.abs(n.y-this.y0)/(1.3523*this.a)};if(t.y>=1)t.x/=y3[18][0],t.y=n.y<0?-Cn:Cn;else{var e=Math.floor(18*t.y);for(e<0?e=0:e>=18&&(e=17);;)if(eI[e][0]>t.y)--e;else{if(!(eI[e+1][0]<=t.y))break;++e}var r=eI[e],i=5*(t.y-r[0])/(eI[e+1][0]-r[0]);i=function(n,t,e,r){for(var i=t;r;--r){var o=n(i);if(i-=o,Math.abs(o)<1e-10)break}return i}(function(o){return(NL(r,o)-t.y)/function(n,t){return n[1]+t*(2*n[2]+3*t*n[3])}(r,o)},i,0,100),t.x/=NL(y3[e],i),t.y=(5*e+i)*xu,n.y<0&&(t.y=-t.y)}return t.x=Hn(t.x+this.long0),t},names:["Robinson","robin"]},qJ={init:function(){this.name="geocent"},forward:function(n){return U8(n,this.es,this.a)},inverse:function(n){return V8(n,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var tI={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const QJ={init:function(){if(Object.keys(tI).forEach(function(e){if(void 0===this[e])this[e]=tI[e].def;else{if(tI[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);tI[e].num&&(this[e]=parseFloat(this[e]))}tI[e].degrees&&(this[e]=this[e]*xu)}.bind(this)),Math.abs(Math.abs(this.lat0)-Cn)<Un?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<Un?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(n),this.sw=Math.sin(n)},forward:function(n){n.x-=this.long0;var i,o,s,a,t=Math.sin(n.y),e=Math.cos(n.y),r=Math.cos(n.x);switch(this.mode){case 3:o=this.sinph0*t+this.cosph0*e*r;break;case 2:o=e*r;break;case 1:o=-t;break;case 0:o=t}switch(i=(o=this.pn1/(this.p-o))*e*Math.sin(n.x),this.mode){case 3:o*=this.cosph0*t-this.sinph0*e*r;break;case 2:o*=t;break;case 0:o*=-e*r;break;case 1:o*=e*r}return i=(i*this.cg-o*this.sg)*this.cw*(a=1/((s=o*this.cg+i*this.sg)*this.sw*this.h1+this.cw)),o=s*a,n.x=i*this.a,n.y=o*this.a,n},inverse:function(n){n.x/=this.a,n.y/=this.a;var e,r,i,t={x:n.x,y:n.y};n.x=(e=this.pn1*n.x*(i=1/(this.pn1-n.y*this.sw)))*this.cg+(r=this.pn1*n.y*this.cw*i)*this.sg,n.y=r*this.cg-e*this.sg;var o=OL(n.x,n.y);if(Math.abs(o)<Un)t.x=0,t.y=n.y;else{var s,a;switch(a=1-o*o*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/o+o/this.pn1),s=Math.sqrt(1-a*a),this.mode){case 3:t.y=Math.asin(s*this.sinph0+n.y*a*this.cosph0/o),n.y=(s-this.sinph0*Math.sin(t.y))*o,n.x*=a*this.cosph0;break;case 2:t.y=Math.asin(n.y*a/o),n.y=s*o,n.x*=a;break;case 0:t.y=Math.asin(s),n.y=-n.y;break;case 1:t.y=-Math.asin(s)}t.x=Math.atan2(n.x,n.y)}return n.x=t.x+this.long0,n.y=t.y,n},names:["Tilted_Perspective","tpers"]};Vd.defaultDatum="WGS84",Vd.Proj=qP,Vd.WGS84=new Vd.Proj("WGS84"),Vd.Point=GX,Vd.toPoint=Y8,Vd.defs=xL,Vd.nadgrid=function(n,t){var e=new DataView(t),r=function(n){var t=n.getInt32(8,!1);return 11!==t&&(11!==(t=n.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(e),i=function(n,t){return{nFields:n.getInt32(8,t),nSubgridFields:n.getInt32(24,t),nSubgrids:n.getInt32(40,t),shiftType:c3(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,t),fromSemiMinorAxis:n.getFloat64(136,t),toSemiMajorAxis:n.getFloat64(152,t),toSemiMinorAxis:n.getFloat64(168,t)}}(e,r);i.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o=function(n,t,e){for(var i=[],o=0;o<t.nSubgrids;o++){var s=yX(n,176,e),a=_X(n,176,s,e),c=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),h=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);i.push({ll:[fS(s.lowerLongitude),fS(s.lowerLatitude)],del:[fS(s.longitudeInterval),fS(s.latitudeInterval)],lim:[c,h],count:s.gridNodeCount,cvs:vX(a)})}return i}(e,i,r),s={header:i,subgrids:o};return j8[n]=s,s},Vd.transform=AL,Vd.mgrs=IX,Vd.version="__VERSION__",function(n){n.Proj.projections.add(RL),n.Proj.projections.add(DL),n.Proj.projections.add(dK),n.Proj.projections.add(bK),n.Proj.projections.add(PK),n.Proj.projections.add(OK),n.Proj.projections.add(FK),n.Proj.projections.add(VK),n.Proj.projections.add(qK),n.Proj.projections.add(QK),n.Proj.projections.add(gZ),n.Proj.projections.add(bZ),n.Proj.projections.add(TZ),n.Proj.projections.add(OZ),n.Proj.projections.add(FZ),n.Proj.projections.add(VZ),n.Proj.projections.add(qZ),n.Proj.projections.add(QZ),n.Proj.projections.add(iJ),n.Proj.projections.add(uJ),n.Proj.projections.add(pJ),n.Proj.projections.add(_J),n.Proj.projections.add(SJ),n.Proj.projections.add(AJ),n.Proj.projections.add(LJ),n.Proj.projections.add(VJ),n.Proj.projections.add(qJ),n.Proj.projections.add(QJ)}(Vd);const Pm=Vd;var eQ=Ki_getLogger("CRS");function WE(n){const t=Object.keys(n.defs);eQ.trace("proj. codes :",t);const e=t.length;let r,i;for(r=0;r<e;++r){const o=t[r];if(!Ar(o)){const s=n.defs(o);CO(new AC({code:o,axisOrientation:s.axis,metersPerUnit:s.to_meter,units:s.units}))}}for(r=0;r<e;++r){const o=t[r],s=Ar(o);for(i=0;i<e;++i){const a=t[i],c=Ar(a);if(!DF(o,a))if(n.defs[o]===n.defs[a])xO([s,c]);else{const h=n(o,a);GF(s,c,h.forward,h.inverse)}}}}var ac={isLoaded:!1,get:function(n){if(""!==n&&null!=n){var t=n.split(":");if(2===t.length){var e=t[0],r=t[1];if(this.hasOwnProperty(e)&&this[e].hasOwnProperty(r))return this[e][r]}}},exist:function(n){if(""===n||null==n)return!1;var t=n.split(":");if(2!==t.length)return!1;var e=t[0],r=t[1];return!(!this.hasOwnProperty(e)||!this[e].hasOwnProperty(r))},load:function(n){if(!this.isLoaded){for(var t=["IGNF","EPSG","CRS"],e=0;e<t.length;e++){var r=t[e],i=this[r];for(var o in i)if(i.hasOwnProperty(o)){var s=r+":"+o;n.defs(s,this.get(s))}}this.isLoaded=!0}},loadByDefault:function(n){var t={EPSG:{2154:ac.EPSG[2154],27571:ac.EPSG[27571],27572:ac.EPSG[27572],27573:ac.EPSG[27573],27574:ac.EPSG[27574]},CRS:{84:ac.CRS[84]},IGNF:{LAMB93:ac.IGNF.LAMB93,LAMBE:ac.IGNF.LAMBE,LAMB1:ac.IGNF.LAMB1,LAMB2:ac.IGNF.LAMB2,LAMB3:ac.IGNF.LAMB3,LAMB4:ac.IGNF.LAMB4,RGF93G:ac.IGNF.RGF93G,WGS84G:ac.IGNF.WGS84G}};for(var e in t)if(t.hasOwnProperty(e)){var r=t[e];for(var i in r)r.hasOwnProperty(i)&&n.defs(e+":"+i,r[i])}},loadByName:function(n,t){if(!this.exist(t))return!1;try{n.defs(t,this.get(t))}catch(e){return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}};const bS=ac;var YE=Ki_getLogger("CRS");const FL={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(YE.trace("Loading custom definitions projections"),!bS.isLoaded){bS.load(Pm);try{WE(Pm),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=WE,window.ol.proj.proj4.register(Pm))}catch(n){YE.error(n)}}},loadByDefault:function(){if(YE.trace("Loading custom definitions projections by default"),!bS.isLoaded){bS.loadByDefault(Pm);try{WE(Pm),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=WE,window.ol.proj.proj4.register(Pm))}catch(n){YE.error(n)}}},loadByName:function(n){if(YE.trace("Loading a custom definition projection : ",n),!bS.isLoaded){bS.loadByName(Pm,n);try{WE(Pm),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=WE,window.ol.proj.proj4.register(Pm))}catch(t){YE.error(t)}}},overload:function(){for(var n in YE.trace("Loading projections aera (extent)"),this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(n)){var t=this.projectionsExtent[n],e=Ar(n),r=yv("EPSG:4326",e),i=VT([t.bottom,t.right,t.top,t.left],r);e.setExtent(i),CO(e),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(e)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=WE);const rQ={_addUID:function(n){return this._uid?n+"-"+this._uid:n},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPmousePosition"),n.className="GPwidget",n},_createShowMousePositionElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowMousePosition"),n.type="checkbox",n},_createShowMousePositionPictoElement:function(n){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowMousePositionPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowMousePosition"),e.title="Afficher les coordonn\xe9es du curseur",e.addEventListener("click",function(i){var o="";!document.getElementById(t._addUID("GPshowMousePosition")).checked&&!n&&(o="GPmapCenterVisible"),document.getElementById("GPmapCenter").className=o,t.onShowMousePositionClick(i)});var r=document.createElement("span");return r.id=this._addUID("GPshowMousePositionOpen"),r.className="GPshowAdvancedToolOpen",e.appendChild(r),e},_createMousePositionPanelElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPmousePositionPanel"),n.className="GPpanel",n},_createMapCenter:function(){var n=document.createElement("div");return n.id="GPmapCenter",n.className="",n},_createMousePositionPanelHeaderElement:function(){var n=document.createElement("div");n.className="GPpanelHeader";var t=document.createElement("div");t.className="GPpanelTitle",t.innerHTML="Coordonn\xe9es",n.appendChild(t);var e=document.createElement("div");e.id="GPmousePositionPanelClose",e.className="GPpanelClose",e.title="Fermer le panneau";var r=this;return e.addEventListener?e.addEventListener("click",function(){document.getElementById(r._addUID("GPshowMousePositionPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(r._addUID("GPshowMousePositionPicto")).click()}),n.appendChild(e),n},_createMousePositionPanelBasicElement:function(n,t,e,r){n=void 0===n||n,t=void 0===t||t,e=void 0!==e&&e;var i=document.createElement("div");return i.id=this._addUID("GPmousePositionBasicPanel"),i.appendChild(this._createMousePositionPanelBasicCoordinateElement(t,e,r)),i.appendChild(this._createMousePositionPanelEditToolsElement(e)),i.appendChild(this._createMousePositionPanelBasicAltitudeElement(n)),i},_createCoordinateElement:function(n,t){var e=this;if(-1===["Lon","Lat"].indexOf(n))return[];var r=[],i=document.createElement("input");i.id=this._addUID("GPmousePosition"+n),i.title=!0===t?"Cliquer pour saisir des coordonn\xe9es":"",i.readOnly=!0,t&&(i.addEventListener("click",function(){e.onMousePositionEditModeClick(!0)}),i.addEventListener("change",function(s){this.classList.remove("error"),e.validateExtentCoordinate(n,this.value,s)?this.classList.remove("error"):this.classList.add("error")})),r.push(i);var o=document.createElement("span");return o.className="GPmousePositionUnits",r.push(o),r},_createDMSCoordinateElement:function(n,t){if(-1===["Lon","Lat"].indexOf(n))return[];var e=this,r=[],i=document.createElement("input");i.id=this._addUID("GPmousePosition"+n+"Degrees"),i.className="GPSexagesimal",i.setAttribute("name","degrees"),i.title=!0===t?"Cliquer pour saisir des coordonn\xe9es":"",i.readOnly=!0,i.dataset.min=0,i.dataset.max="Lon"===n?180:90,t&&(i.addEventListener("click",function(){e.onMousePositionEditModeClick(!0)}),i.addEventListener("change",function(){this.classList.remove("error"),e._checkDMSDegrees(n,this)?this.classList.remove("error"):this.classList.add("error")})),r.push(i);var o=document.createElement("span");o.className="GPmousePositionSexagesimalLabel",o.innerHTML="\xb0",r.push(o);var s=document.createElement("input");s.id=this._addUID("GPmousePosition"+n+"Minutes"),s.className="GPSexagesimal",s.setAttribute("name","minutes"),s.title=!0===t?"Cliquer pour saisir des coordonn\xe9es":"",s.readOnly=!0,s.dataset.min=0,s.dataset.max=59,t&&(s.addEventListener("click",function(){e.onMousePositionEditModeClick(!0)}),s.addEventListener("change",function(){this.classList.remove("error"),e._checkDMSElement(this)?this.classList.remove("error"):this.classList.add("error")})),r.push(s);var a=document.createElement("span");a.className="GPmousePositionSexagesimalLabel",a.innerHTML="'",r.push(a);var c=document.createElement("input");c.id=this._addUID("GPmousePosition"+n+"Seconds"),c.className="GPSexagesimalsec",c.setAttribute("name","seconds"),c.title=!0===t?"Cliquer pour saisir des coordonn\xe9es":"",c.readOnly=!0,c.dataset.min=0,c.dataset.max=59,t&&(c.addEventListener("click",function(){e.onMousePositionEditModeClick(!0)}),c.addEventListener("change",function(){this.classList.remove("error"),e._checkDMSElement(this,!0)?this.classList.remove("error"):this.classList.add("error")})),r.push(c);var h=document.createElement("span");h.className="GPmousePositionSexagesimalLabel",h.innerHTML="''",r.push(h);var p=document.createElement("select");p.id=this._addUID("GPmousePosition"+n+"Direction"),p.className="GPmousePositionDirection",p.setAttribute("name","direction"),p.disabled=!0;var m=document.createElement("option");m.value="Lon"===n?"E":"N",m.innerHTML="Lon"===n?"E":"N",p.appendChild(m);var E=document.createElement("option");return E.value="Lon"===n?"O":"S",E.innerHTML="Lon"===n?"O":"S",p.appendChild(E),r.push(p),r},_createMousePositionPanelBasicCoordinateElement:function(n,t,e){var r=document.createElement("div");r.id=this._addUID("GPmousePositionCoordinate"),r.style.display=n?"block":"none";var i=document.createElement("div"),o=document.createElement("span");o.className="GPmousePositionLabel",o.id=this._addUID("GPmousePositionLatLabel"),o.innerHTML="Latitude : ",i.appendChild(o);var a,s=document.createElement("span");s.id=this._addUID("GPmousePositionLatCoordinate"),a="DMS"===e?this._createDMSCoordinateElement("Lat",t):this._createCoordinateElement("Lat",t);for(var c=0;c<a.length;c++)s.appendChild(a[c]);i.appendChild(s),r.appendChild(i);var h=document.createElement("div"),p=document.createElement("span");p.className="GPmousePositionLabel",p.id=this._addUID("GPmousePositionLonLabel"),p.innerHTML="Longitude : ",h.appendChild(p);var E,m=document.createElement("span");m.id=this._addUID("GPmousePositionLonCoordinate"),E="DMS"===e?this._createDMSCoordinateElement("Lon",t):this._createCoordinateElement("Lon",t);for(var S=0;S<E.length;S++)m.appendChild(E[S]);return h.appendChild(m),r.appendChild(h),r},_createMousePositionPanelBasicAltitudeElement:function(n){var t=document.createElement("div");t.id=this._addUID("GPmousePositionAltitude"),t.style.display=n?"block":"none";var e=document.createElement("span");e.className="GPmousePositionLabel",e.innerHTML="Altitude : ",t.appendChild(e);var r=document.createElement("span");r.className="GPmousePositionCoords",r.id=this._addUID("GPmousePositionAlt"),r.innerHTML="...",t.appendChild(r);var i=document.createElement("span");return i.className="GPmousePositionAltitudeUnits",i.innerHTML="m",t.appendChild(i),t},_createMousePositionPanelEditToolsElement:function(n){var t=this,e=document.createElement("div");e.className="GPmousePositionPanelEditTools",e.id=this._addUID("GPmousePositionPanelEditTools"),n||(e.style.display="none");var r=document.createElement("span");r.className="GPmousePositionEditTool",r.id=this._addUID("GPmousePositionLocate"),r.title=!0===n?"Cliquer pour saisir des coordonn\xe9es":"",n&&r.addEventListener("click",function(){t.onMousePositionEditModeLocateClick()}),e.appendChild(r);var i=document.createElement("span");return i.className="GPmousePositionEditTool",i.id=this._addUID("GPmousePositionCloseEdit"),i.title="Quitter la saisie des coordonn\xe9es",i.style.display="none",n&&i.addEventListener("click",function(){t.onMousePositionEditModeClick(!1)}),e.appendChild(i),e},_createShowMousePositionSettingsElement:function(n){var t=[],e=this,r=document.createElement("input");r.type="checkbox",r.id=this._addUID("GPshowMousePositionSettings");var i=document.createElement("label");return i.id=this._addUID("GPshowMousePositionSettingsPicto"),i.htmlFor=this._addUID("GPshowMousePositionSettings"),i.title="R\xe9glages",i.className="GPshowMoreOptionsImage GPshowMoreOptions GPshowMousePositionSettingsPicto",i.style.display=n?"block":"none",i.addEventListener?i.addEventListener("click",function(o){"function"==typeof e.onShowMousePositionSettingsClick&&e.onShowMousePositionSettingsClick(o)},!1):i.attachEvent&&i.attachEvent("onclick",function(o){"function"==typeof e.onShowMousePositionSettingsClick&&e.onShowMousePositionSettingsClick(o)}),t.push(r),t.push(i),t},_createMousePositionSettingsElement:function(n){var t=document.createElement("div");t.id=this._addUID("GPmousePositionSettings"),t.style.display=void 0===n||n?"block":"none";var e=document.createElement("span");return e.className="GPmousePositionSettingsLabel",e.innerHTML="Syst\xe8me de r\xe9f\xe9rence",t.appendChild(e),t},_createMousePositionSettingsSystemsElement:function(n){var t=this,e=document.createElement("select");e.id=this._addUID("GPmousePositionProjectionSystem"),e.className="GPinputSelect GPmousePositionSettingsSelect",e.addEventListener("change",function(s){t.onMousePositionProjectionSystemChange(s)}),e.addEventListener("mouseover",function(s){"OPTION"!==s.target.nodeName&&t.onMousePositionProjectionSystemMouseOver(s)});for(var r=0;r<n.length;r++){var i=n[r],o=document.createElement("option");o.value=i.code,o.text=i.label||r,e.appendChild(o)}return e},_createMousePositionSettingsUnitsElement:function(n){var t=this,e=document.createElement("select");e.id=this._addUID("GPmousePositionProjectionUnits"),e.className="GPinputSelect GPmousePositionSettingsSelect",e.addEventListener("change",function(s){t.onMousePositionProjectionUnitsChange(s)});for(var r=0;r<n.length;r++){var i=n[r],o=document.createElement("option");o.value=i.code?i.code:r,o.text=i.label||r,e.appendChild(o)}return e},_resetLabelElements:function(n){document.getElementById(this._addUID("GPmousePositionLatLabel")).innerHTML="Geographical"===n?"Latitude :":"X :",document.getElementById(this._addUID("GPmousePositionLonLabel")).innerHTML="Geographical"===n?"Longitude :":"Y :"},_resetUnitElements:function(n){var t="";("M"===n||"KM"===n)&&(t=n.toLowerCase());for(var e=document.getElementsByClassName("GPmousePositionUnits"),r=0;r<e.length;r++)e[r].innerHTML=t},_resetCoordinateElements:function(n,t,e){for(var r=document.getElementById(this._addUID("GPmousePositionLatCoordinate"));r.firstChild;)r.removeChild(r.firstChild);var i,a;i="DMS"===e?this._createDMSCoordinateElement("Lat",n):this._createCoordinateElement("Lat",n);for(var o=0;o<i.length;o++)r.appendChild(i[o]);for(var s=document.getElementById(this._addUID("GPmousePositionLonCoordinate"));s.firstChild;)s.removeChild(s.firstChild);a="DMS"===e?this._createDMSCoordinateElement("Lon",n):this._createCoordinateElement("Lon",n);for(var c=0;c<a.length;c++)s.appendChild(a[c])},_setEditMode:function(n){document.getElementById(this._addUID("GPmousePositionLocate")).title=n?"Aller \xe0 la position ...":"Cliquer pour saisir des coordonn\xe9es",document.getElementById(this._addUID("GPmousePositionCloseEdit")).style.display=n?"inline-block":"none";for(var r="div[id^="+this._addUID("GPmousePositionCoordinate")+"]",i=document.querySelectorAll(r+" input"),o=0;o<i.length;o++)i[o].readOnly=!n,n&&(i[o].value="",i[o].classList.remove("error"));for(var s=document.querySelectorAll(r+" select"),a=0;a<s.length;a++)s[a].disabled=!n},_checkDMSElement:function(n,t){var e=void 0!==t,r=n.value;if(e&&(r=r.replace(",",".")),isNaN(r))return!1;var i=parseFloat(r);if(!e&&(0|i)!==i)return!1;var o=Number(n.dataset.min),s=Number(n.dataset.max);return i>=o&&i<=s},_checkDMSDegrees:function(n,t){if(isNaN(t.value))return!1;var e=parseFloat(t.value);if((0|e)!==e)return!1;var r=Number(t.dataset.min),i=Number(t.dataset.max);if(e<r||e>i)return!1;var o=document.getElementById(this._addUID("GPmousePosition"+n+"Minutes")),s=document.getElementById(this._addUID("GPmousePosition"+n+"Seconds"));return e>=i?(o.dataset.max=0,s.dataset.max=0):(o.dataset.max=59,s.dataset.max=59.9999),!0},GPdisplayCoords:function(n){if(n){var t=document.getElementById(this._addUID("GPmousePositionLonLabel")),e=document.getElementById(this._addUID("GPmousePositionLatLabel"));if(n.x||n.y?(e.innerHTML="X : ",t.innerHTML="Y : "):n.e||n.n?(e.innerHTML="E : ",t.innerHTML="N : "):(e.innerHTML="Latitude : ",t.innerHTML="Longitude : "),"object"==typeof n.lat&&"object"==typeof n.lng){var r={lng:"Lon",lat:"Lat"},i=["Degrees","Minutes","Seconds"];for(var o in r)for(var s=0;s<i.length;++s){var c=document.getElementById(this._addUID("GPmousePosition"+r[o]+i[s])),h=i[s].charAt(0).toLowerCase();c.value=n[o][h]}document.getElementById(this._addUID("GPmousePositionLonDirection")).value=n.lng.direction,document.getElementById(this._addUID("GPmousePositionLatDirection")).value=n.lat.direction}else{var p=document.getElementById(this._addUID("GPmousePositionLat")),m=document.getElementById(this._addUID("GPmousePositionLon"));p.value=n.x||n.lat||n.e||"0",m.value=n.y||n.lng||n.lon||n.n||"0";for(var E=void 0===n.unit?"":n.unit,S=document.getElementsByClassName("GPmousePositionUnits"),x=0;x<S.length;++x)S[x].innerHTML=E}}},GPdisplayElevation:function(n,t,e,r){var o,i=this;t||(t=500),clearTimeout(o),document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="...",null==e&&(e=-99999),null==r&&(r=99980);var s=e+r,a=e-r;n&&document.getElementById(this._addUID("GPmousePositionAltitude"))&&(o=setTimeout(function(){i.onRequestAltitude(n,function(c){a<c&&c<s?i.GPresetElevation():document.getElementById(i._addUID("GPmousePositionAlt")).innerHTML=c})},t))},GPresetElevation:function(){document.getElementById(this._addUID("GPmousePositionAltitude"))&&(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="---")}};var Ja=Ki_getLogger("GeoportalMousePosition"),g6=function(n){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(e);var r=this._container=this._initContainer(e);n.call(this,{element:r,target:e.target,render:e.render})}return n&&(t.__proto__=n),t.prototype=Object.create(n.prototype,{}),vr.assign(t.prototype,rQ),t.prototype.constructor=t,t.prototype.setMap=function(e){var r=this;if(e){var i=this._createMapCenter();if(e.getViewport().appendChild(i),!this.collapsed&&!this._isDesktop&&(i.className="GPmapCenterVisible"),this.draggable&&jv_dragElement(this._panelMousePositionContainer,this._panelHeaderMousePositionContainer,e.getTargetElement()),this.collapsed||(this.listenerKey=this._isDesktop?e.on("pointermove",a=>{this.onMouseMove(a)}):e.on("moveend",a=>this.onMapMove(a))),this.options.editCoordinates){var o=document.createElement("img");o.id=this._addUID("GPmousePositionMarker"),o.src=this._markerUrl,o.title="Cliquer pour supprimer",o.addEventListener("click",function(){r._markerOverlay.setPosition(void 0)}),this._markerOverlay=new Eu({offset:this._markerOffset,element:o,stopEvent:!1}),e.addOverlay(this._markerOverlay)}}else Aa(this.listenerKey);n.prototype.setMap.call(this,e),null===e||this.collapsed||(document.getElementById("GPshowMousePosition-"+this._uid).checked="checked",this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1))},t.prototype.addSystem=function(e){if("object"==typeof e)if(e.crs)if(e.label||(Ja.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(Ja.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),FL.loadByName(e.crs),Ar(e.crs)){for(var r=0;r<this._projectionSystems.length;r++){var i=this._projectionSystems[r];e.crs===i.crs&&Ja.info("crs '{}' already configured",i.crs)}e.code=this._projectionSystems.length,this._projectionSystems.push(e);var o=document.getElementById("GPmousePositionProjectionSystem-"+this._uid);if(o){var s=document.createElement("option");s.value=e.code,s.text=e.label,o.appendChild(s)}}else Ja.error("crs '{}' not available into proj4 definitions !",e.crs);else Ja.error("crs not defined !");else Ja.log("[ERROR] MousePosition:addSystem - system parameter should be an object")},t.prototype.addSystems=function(e){if(e){if(!Array.isArray(e))return void Ja.log("[ERROR] MousePosition:addSystems - systems parameter should be an array");for(var r=0;r<e.length;r++)this.addSystem(e[r])}},t.prototype.removeSystem=function(e){if(e&&"string"==typeof e){for(var r=document.getElementById("GPmousePositionProjectionSystem-"+this._uid),i=null,o=0;o<this._projectionSystems.length;o++){var s=this._projectionSystems[o];if(e===s.crs){i=s.code,this._projectionSystems.splice(o,1);break}}if(null!=i){for(var a=[],c=0;c<this._projectionSystems.length;c++)a[Number(this._projectionSystems[c].code)]=c,this._projectionSystems[c].code=c;for(var h=null,p=0;p<r.childNodes.length;p++)i!==r.childNodes[c].value?r.childNodes[c].value=a[Number(r.childNodes[c].value)]:h=p;null!=h&&r.removeChild(r.childNodes[h]),this._currentProjectionSystems.code===Number(i)&&(r.childNodes[0].setAttribute("selected","selected"),this._setCurrentSystem(r.childNodes[0].value))}else Ja.log("[WARN] MousePosition:removeSystem - system not found")}else Ja.log("[ERROR] MousePosition:removeSystem - systemCode parameter should be a string")},t.prototype.setUnits=function(e){!e||!Array.isArray(e)||(this.options.units=e,this._projectionUnits=[],this._initProjectionUnits(),this._currentProjectionType&&this._setTypeUnitsPanel(this._currentProjectionType))},t.prototype.setAltitudeOptions=function(e){if(e&&"object"==typeof e&&(this.options.altitude.triggerDelay=e.triggerDelay,this.options.altitude.responseDelay=e.responseDelay,e.serviceOptions))for(var r in e.serviceOptions)e.serviceOptions.hasOwnProperty(r)&&(this.options.altitude.serviceOptions[r]=e.serviceOptions[r])},t.prototype.displayAltitude=function(e){void 0!==e&&(void 0===this._noRightManagement&&this._checkRightsManagement(),this.options.displayAltitude=e,this._setElevationPanel(e))},t.prototype.displayCoordinates=function(e){void 0!==e&&(this.options.displayCoordinates=e,this._setCoordinatesPanel(e),this._setSettingsPanel(e))},t.prototype.setCollapsed=function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(this._isDesktop||(document.getElementById("GPmapCenter").className=e?"":"GPmapCenterVisible"),this.onShowMousePositionClick(),this._showMousePositionContainer.checked=!e):Ja.log("[ERROR] MousePosition:setCollapsed - missing collapsed parameter")},t.prototype._initialize=function(e){if(this.options=e=e||{},this.options.collapsed=void 0===e.collapsed||e.collapsed,this.collapsed=this.options.collapsed,this.options.draggable=void 0!==e.draggable&&e.draggable,this.draggable=this.options.draggable,this._markerOverlay=null,this._markerUrl=null,this._markerOffset=[0,0],this._hideMarker=!1,this._initMarker(e.positionMarker),this.options.units=e.units||[],this.options.displayAltitude=void 0===e.displayAltitude||e.displayAltitude,this.options.displayCoordinates=void 0===e.displayCoordinates||e.displayCoordinates,this.options.editCoordinates=!!this.options.displayCoordinates&&void 0!==e.editCoordinates&&e.editCoordinates,this.editing=!1,this.options.systems=e.systems||[],e.altitude){var r=e.altitude;this.options.altitude={triggerDelay:void 0!==r.triggerDelay?r.triggerDelay:200,responseDelay:void 0!==r.responseDelay?r.responseDelay:500,serviceOptions:r.serviceOptions||{},noDataValue:void 0!==r.noDataValue?r.noDataValue:-99999,noDataValueTolerance:void 0!==r.noDataValueTolerance?r.noDataValueTolerance:9e4}}else this.options.altitude={triggerDelay:200,responseDelay:500,serviceOptions:{}};this._uid=ni.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=vr.detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showMousePositionContainer=null,this._panelMousePositionContainer=null,this._panelHeaderMousePositionContainer=null,!this.options.displayAltitude&&!this.options.displayCoordinates&&(this.options.displayCoordinates=!0),this.options.displayAltitude&&this._checkRightsManagement(),this.listenerKey=null},t.prototype._initMarker=function(e){if(this.options.editCoordinates){if(!e)return this._markerUrl=Ls.lightOrange,void(this._markerOffset=Ls.defaultOffset);this._hideMarker=void 0!==e.hide&&e.hide,e.offset?Array.isArray(e.offset)&&2===e.offset.length?this._markerOffset=e.offset:(Ja.log("positionMarker.offset should be an array. e.g. : [0,0]"),this._markerOffset=Ls.defaultOffset):this._markerOffset=Ls.defaultOffset;var r=e.url;this._markerUrl=r?r.match(/^[a-zA-Z]+$/)?void 0!==Ls[r]?Ls[r]:Ls.lightOrange:r:Ls.lightOrange}},t.prototype._initProjectionSystems=function(){for(var e=[{label:"G\xe9ographique",crs:Ar("EPSG:4326").getCode(),type:"Geographical"},{label:"Web Mercator",crs:Ar("EPSG:3857").getCode(),type:"Metric"},{label:"Lambert 93",crs:Ar("EPSG:2154").getCode(),type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II \xe9tendu",crs:Ar("EPSG:27572").getCode(),type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],r=this.options.systems,i=0;i<r.length;i++)this.addSystem(r[i]);if(0===this._projectionSystems.length)for(var s=0;s<e.length;s++)this.addSystem(e[s])},t.prototype._initProjectionUnits=function(){var e={Geographical:[{code:"DEC",label:"degr\xe9s d\xe9cimaux",format:this._displayDEC},{code:"DMS",label:"degr\xe9s sexag\xe9simaux",format:this._displayDMS},{code:"RAD",label:"radians",format:this._displayRAD},{code:"GON",label:"grades",format:this._displayGON}],Metric:[{code:"M",label:"m\xe8tres",format:this._displayMeter},{code:"KM",label:"kilom\xe8tres",format:this._displayKMeter}]},r=this.options.units;for(var i in e)if(e.hasOwnProperty(i)){for(var o=!1,s=0;s<e[i].length;s++)for(var a=e[i][s],c=0;c<r.length;c++)a.code===r[c]&&(o=!0,this._projectionUnits[i]||(this._projectionUnits[i]=[]),this._projectionUnits[i].push(a));o||(this._projectionUnits[i]=e[i])}"object"==typeof this._projectionUnits&&0===Object.keys(this._projectionUnits).length&&(this._projectionUnits=e)},t.prototype._getCurrentProjectionInformation=function(){for(var e=[this._currentProjectionSystems.label,"en"],r=this._projectionUnits[this._currentProjectionType],i=0;i<r.length;++i)if(r[i].code===this._currentProjectionUnits){e.push(r[i].label);break}return e.join(" ")},t.prototype._checkRightsManagement=function(){var e=zp_check({key:this.options.apiKey,resources:["SERVICE_CALCUL_ALTIMETRIQUE_RSC"],services:["Elevation"]});e?this.options.apiKey||(this.options.apiKey=e.key):this._noRightManagement=!0},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),r=this._showMousePositionContainer=this._createShowMousePositionElement();e.appendChild(r);var i=this._createShowMousePositionPictoElement(this._isDesktop);e.appendChild(i);var o=this._panelMousePositionContainer=this._createMousePositionPanelElement(),s=this._panelHeaderMousePositionContainer=this._createMousePositionPanelHeaderElement();o.appendChild(s);var a=this._createMousePositionPanelBasicElement(this.options.displayAltitude,this.options.displayCoordinates,this.options.editCoordinates,this._currentProjectionUnits);o.appendChild(a);for(var c=this._createShowMousePositionSettingsElement(this.options.displayCoordinates),h=0;h<c.length;h++)o.appendChild(c[h]);var p=this._createMousePositionSettingsElement(),m=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),E=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);return p.appendChild(m),p.appendChild(E),o.appendChild(p),e.appendChild(o),e},t.prototype._setElevationPanel=function(e){e?this._noRightManagement?document.getElementById("GPmousePositionAlt-"+this._uid).innerHTML="No rights!":document.getElementById("GPmousePositionAltitude-"+this._uid).style.display="":document.getElementById("GPmousePositionAltitude-"+this._uid).style.display="none"},t.prototype._setCoordinatesPanel=function(e){document.getElementById("GPmousePositionCoordinate-"+this._uid).style.display=e?"":"none"},t.prototype._setSettingsPanel=function(e){var r=document.getElementById("GPshowMousePositionSettingsPicto-"+this._uid),i=document.getElementById("GPmousePositionSettings-"+this._uid);e?(r.style.display="",i.style.display=""):(r.style.display="none",i.style.display="none")},t.prototype._setTypeUnitsPanel=function(e){for(var r=this._projectionUnitsContainer;r.firstChild;)r.removeChild(r.firstChild);for(var i=this._projectionUnits[e],o=0;o<i.length;o++){var s=i[o],a=document.createElement("option");a.value=s.code?s.code:o,a.text=s.label||o,r.appendChild(a)}var c=this._projectionUnits[e][0].code;("DMS"===this._currentProjectionUnits||"DMS"===c)&&(this._resetCoordinateElements(this.options.editCoordinates,e,c),this._setEditMode(this.editing)),this._currentProjectionType=e,this._resetLabelElements(e),this._resetUnitElements(c),this._currentProjectionUnits=c},t.prototype._displayDEC=function(e){var r={};return r.lat=e[1].toFixed(6),r.lng=e[0].toFixed(6),r.unit="\xb0",r},t.prototype._displayDMS=function(e){return{lng:Hp.decimalToDMS(e[0],"EO",2),lat:Hp.decimalToDMS(e[1],"NS",2),unit:"DMS"}},t.prototype._displayRAD=function(e){var r={},i=.017453292519943295;return r.lng=e[0]*i,r.lng=r.lng.toFixed(8),r.lat=e[1]*i,r.lat=r.lat.toFixed(8),r.unit="rad",r},t.prototype._displayGON=function(e){var r={},i=1.1111111111111112;return r.lng=e[0]*i,r.lng=r.lng.toFixed(8),r.lat=e[1]*i,r.lat=r.lat.toFixed(8),r.unit="gon",r},t.prototype._displayMeter=function(e){var r={};return r.x=e[0].toFixed(2),r.y=e[1].toFixed(2),r.unit="m",r},t.prototype._displayKMeter=function(e){var r={};return r.x=(e[0]/1e3).toFixed(2),r.y=(e[1]/1e3).toFixed(2),r.unit="km",r},t.prototype._setCoordinate=function(e,r){var i={},o=this._currentProjectionSystems.crs;if(o){e=Qi(e,r,o);for(var a=null,c=this._projectionUnits[this._currentProjectionSystems.type],h=0;h<c.length;h++)if(c[h].code===this._currentProjectionUnits){a=c[h].format;break}a&&"function"==typeof a?!(i=a(e))||0===Object.keys(i).length||this.GPdisplayCoords(i):Ja.log("WARNING : coordinates format function not found")}else Ja.log("ERROR : system crs not found")},t.prototype._setElevation=function(e){this.GPdisplayElevation(e,this.options.altitude.responseDelay,this.options.altitude.noDataValue,this.options.altitude.noDataValueTolerance)},t.prototype.onMoveStopped=function(e,r){var i=Qi(e,r,"EPSG:4326");this._setElevation(i)},t.prototype.onMouseMove=function(e){var r=this,i=e.coordinate;if(e.map&&e.map.getView()){var o=e.map.getView().getProjection();this._setCoordinate(i,o),clearTimeout(this._timer),this._timer=setTimeout(function(){r.onMoveStopped(i,o)},this.options.altitude.triggerDelay)}},t.prototype.onMapMove=function(){var e=this,r=this.getMap();if(r&&r.getView()){var i=r.getView(),o=i.getCenter(),s=i.getProjection();this._setCoordinate(o,s),clearTimeout(this._timer),this._timer=setTimeout(function(){e.onMoveStopped(o,s)},this.options.altitude.triggerDelay)}},t.prototype.onRequestAltitude=function(e,r){if(e&&0!==Object.keys(e).length&&this.options.displayAltitude){if(this._noRightManagement)return Ja.log("[WARNING] contract key configuration has no rights to load geoportal elevation "),void(document.getElementById("GPmousePositionAlt-"+this._uid).innerHTML="No rights!");var i=this.options.altitude.serviceOptions||{},o=i.protocol||"XHR",s=i.timeOut||0;"JSONP"===o&&0===s&&(s=15e3);var E,m,c=[{lon:e[0],lat:e[1]}],p=i.rawResponse||!1;m=p?function(P){Ja.log("alti service raw response : ",P)}:function(P){P&&Object.keys(P).length&&r.call(this,P.elevations[0].z)},E=function(P){Ja.log("[getAltitude] ERROR : "+P.message)};var S=i.apiKey||this.options.apiKey;"boolean"!=typeof i.ssl&&(i.ssl="boolean"!=typeof this.options.ssl||this.options.ssl),aa.Services.getAltitude({apiKey:S,protocol:o,ssl:i.ssl,timeOut:s,scope:this,rawResponse:p,onSuccess:m,onFailure:E,zonly:!0,positions:c})}},t.prototype.onShowMousePositionClick=function(){var e=this.getMap();this.collapsed=this._showMousePositionContainer.checked,this.dispatchEvent("change:collapsed"),this._showMousePositionContainer.checked?Aa(this.listenerKey):this.editing||(this._isDesktop?this.listenerKey=e.on("pointermove",r=>{this.onMouseMove(r)}):(this.listenerKey=e.on("moveend",r=>this.onMapMove(r)),this.onMapMove())),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)},t.prototype.onShowMousePositionSettingsClick=function(e){if(!this.draggable){this._panelMousePositionContainer.style.transition="top 0.5s ease-out 0s",this._panelMousePositionContainer.style.transitionProperty="top",this._panelMousePositionContainer.style.transitionDuration="0.5s",this._panelMousePositionContainer.style.transitionTimingFunction="ease-out",this._panelMousePositionContainer.style.transitionDelay="0s";var i=this._panelMousePositionContainer.offsetTop;this._panelMousePositionContainer.style.top=document.getElementById(e.target.htmlFor).checked?i- -95+"px":i+-95+"px"}},t.prototype.onMousePositionEditModeClick=function(e){if(this.options.editCoordinates&&this.editing!==e){this.editing=e,this._setEditMode(this.editing);var r=this.getMap();this._isDesktop?this.editing?Aa(this.listenerKey):(this.listenerKey=r.on("pointermove",i=>{this.onMouseMove(i)}),this.onMapMove()):this.editing?Aa(this.listenerKey):(this.listenerKey=r.on("moveend",i=>this.onMapMove(i)),this.onMapMove()),!this.editing&&this._markerOverlay&&this._markerOverlay.setPosition(void 0)}},t.prototype.getCoordinate=function(e){var r=document.getElementById(this._addUID("GPmousePosition"+e+"Degrees")),i=r.value;if(!i||(i=i.replace(",","."),!Hp.isInteger(i)))return null;var o=Hp.toInteger(i);if(o<Number(r.dataset.min)||o>Number(r.dataset.max))return null;var s=document.getElementById(this._addUID("GPmousePosition"+e+"Direction")).value,a=document.getElementById(this._addUID("GPmousePosition"+e+"Minutes")),c=a.value;if(c&&(c=c.replace(",","."),Hp.isInteger(c))){var h=Hp.toInteger(c);h>=Number(a.dataset.min)&&h<=Number(a.dataset.max)&&(o+=h/60)}var p=document.getElementById(this._addUID("GPmousePosition"+e+"Seconds")),m=p.value;if(m){m=m.replace(",",".");var E=Hp.toFloat(m);E&&E>=Number(p.dataset.min)&&E<=Number(p.dataset.max)&&(o+=E/3600)}return("O"===s||"S"===s)&&(o=-o),o},t.prototype.locateDMSCoordinates=function(){var e=[this.getCoordinate("Lon"),this.getCoordinate("Lat")];if(null!==e[0]&&null!==e[1]){var r=this._currentProjectionSystems.crs;if(!r)return void Ja.log("ERROR : system crs not found");var i=this.getMap().getView(),o=Qi(e,r,i.getProjection());i.setCenter(o),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(o)}},t.prototype.locateCoordinates=function(){var e=document.getElementById(this._addUID("GPmousePositionLon")).value;if(e=e.replace(",","."),null!==(e=Hp.toFloat(e))){var r=document.getElementById(this._addUID("GPmousePositionLat")).value;if(r=r.replace(",","."),null!==(r=Hp.toFloat(r))){var o,i=this._currentProjectionSystems.crs;if(!i)return void Ja.log("ERROR : system crs not found");var s=Qi(o="Geographical"===this._currentProjectionSystems.type?[this.convert(e),this.convert(r)]:[this.convert(r),this.convert(e)],this._currentProjectionSystems.crs,"EPSG:4326"),a=this._currentProjectionSystems.geoBBox;if(a){var c=[a.left,a.bottom,a.right,a.top];if(s[0]<c[0]||s[0]>c[2]||s[1]<c[1]||s[1]>c[3])return}var h=this.getMap().getView(),p=Qi(o,i,h.getProjection());h.setCenter(p),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(p)}}},t.prototype.onMousePositionEditModeLocateClick=function(){if(this.options.editCoordinates){if(!this.editing)return void this.onMousePositionEditModeClick(!0);"DMS"===this._currentProjectionUnits?this.locateDMSCoordinates():this.locateCoordinates()}},t.prototype.onMousePositionProjectionSystemChange=function(e){this._setCurrentSystem(e.target.options[e.target.selectedIndex].value)},t.prototype._setCurrentSystem=function(e){for(var r=null,i=0;i<this._projectionSystems.length;++i)if(this._projectionSystems[i].code===Number(e)){r=this._projectionSystems[i].type;break}r?(this._currentProjectionSystems=this._projectionSystems[Number(e)],r!==this._currentProjectionType&&this._setTypeUnitsPanel(r),this._isDesktop||this.onMapMove()):Ja.log("system not found in projection systems container")},t.prototype.onMousePositionProjectionSystemMouseOver=function(e){Ja.trace(e);var r=this.getMap();if(r&&r.getView()){var i=r.getView(),o=i.getProjection(),s=i.calculateExtent(r.getSize());s=kd(s,o,"EPSG:4326");var a=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));a.innerHTML="";for(var c=0;c<this._projectionSystems.length;c++){var h=this._projectionSystems[c],p=null;if(h.geoBBox&&(s[0]>h.geoBBox.right||s[1]>h.geoBBox.top||s[2]<h.geoBBox.left||s[3]<h.geoBBox.bottom))h===this._currentProjectionSystems&&((p=document.createElement("option")).value=h.code,p.text=h.label||c,p.setAttribute("selected","selected"),p.setAttribute("disabled","disabled"),a.appendChild(p));else{var m=document.createElement("option");m.value=h.code,m.text=h.label||c,h===this._currentProjectionSystems&&m.setAttribute("selected","selected"),a.appendChild(m)}}}},t.prototype.onMousePositionProjectionUnitsChange=function(e){var o=this._currentProjectionUnits;this._currentProjectionUnits=e.target.options[e.target.selectedIndex].value,this._resetLabelElements(this._currentProjectionType),this._resetUnitElements(this._currentProjectionUnits),("DMS"===o||"DMS"===this._currentProjectionUnits)&&(this._resetCoordinateElements(this.options.editCoordinates,this._currentProjectionType,this._currentProjectionUnits),this._setEditMode(this.editing)),this._isDesktop||this.onMapMove()},t.prototype.convert=function(e){var r;return"M"===this._currentProjectionUnits||"DEC"===this._currentProjectionUnits?r=e:"KM"===this._currentProjectionUnits?r=1e3*e:"RAD"===this._currentProjectionUnits?r=(e*(180/Math.PI).toFixed(20)).toFixed(20):"GON"===this._currentProjectionUnits&&(r=(e*.9.toFixed(20)).toFixed(20)),r},t.prototype.validateExtentCoordinate=function(e,r){if(-1===["Lon","Lat"].indexOf(e))return!1;var i=r.replace(",",".");if(null===(i=Hp.toFloat(i)))return!1;i=this.convert(i);var o=this._currentProjectionSystems.geoBBox;if(void 0===o)return!0;var s=[o.left,o.bottom,o.right,o.top];return s=kd(s,"EPSG:4326",this._currentProjectionSystems.crs),!("Lat"===e&&(i<s[0]||i>s[2])||"Lon"===e&&(i<s[1]||i>s[3]))},t}(Su);const iQ=g6;window.ol&&window.ol.control&&(window.ol.control.GeoportalMousePosition=g6);var oQ=Ki_getLogger("interactions");const GL={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(n,t){oQ.trace("unset()");var e={};vr.mergeParams(e,this._options),vr.mergeParams(e,t);for(var r=n.getInteractions().getArray(),i=0;i<r.length;i++)if(r[i].getActive()&&(r[i]instanceof wh||r[i]instanceof pf||r[i]instanceof RG)){var o=r[i].getProperties(),s=o.name;if(void 0!==s&&this._extensions.indexOf(s)>-1){if(e.current&&e.current===s)continue;r[i].setActive(!1);var a=o.source;if(void 0!==a&&a instanceof Su)for(var c in e)if(e.hasOwnProperty(c)){if("current"===c)continue;if("function"==typeof a[c]){var h=Array.isArray(e[c])?e[c]:[e[c]];a[c].apply(a,h)}}}}}},lc_rgbaToHex=function(n){function t(p){if(p>255)throw new Error("'"+p+"'' is greater than 255(0xff);");return("0"+Number(p).toString(16)).slice(-2)}var r=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/.exec(n);if(!r)throw new Error("Invalid format: "+n);var o=r[2],s=r[3],a=r[4],c=[t(r[1]),t(o),t(s)],h={};return h.hex="#"+c.join(""),a&&(h.opacity=parseFloat(a)),h},lc_hexToRgba=function(n,t){if(!n)throw new Error("Invalid format");n=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(o,s,a,c){return s+s+a+a+c+c});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return(r=r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null)?"rgba("+r.r+", "+r.g+", "+r.b+", "+t+")":null};var lQ=Ki_getLogger("DrawingDOM");const cQ={_addUID:function(n){return this._uid?n+"-"+this._uid:n},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPdrawing"),n.className="GPwidget",n},_createShowDrawingElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowDrawing"),n.className="GPshowDrawing",n.type="checkbox",n},_createShowDrawingPictoElement:function(){var n=this,t=document.createElement("label");t.id=this._addUID("GPshowDrawingPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowDrawing"),t.title=this.options.labels.control,t.addEventListener?t.addEventListener("click",function(r){n.onShowDrawingClick(r)}):t.attachEvent&&t.attachEvent("onclick",function(r){n.onShowDrawingClick(r)});var e=document.createElement("span");return e.id=this._addUID("GPshowDrawingOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createDrawingPanelElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPdrawingPanel"),n.className="GPpanel",n},_createDrawingPanelHeaderElement:function(){var n=document.createElement("div");n.className="GPpanelHeader";var t=document.createElement("div");t.className="GPpanelTitle",t.innerHTML=this.options.controlLabel||"Annoter la carte",n.appendChild(t);var e=document.createElement("div");e.id=this._addUID("GPdrawingPanelClose"),e.className="GPpanelClose",e.title="Fermer le panneau";var r=this;return e.addEventListener?e.addEventListener("click",function(){document.getElementById(r._addUID("GPshowDrawingPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(r._addUID("GPshowDrawingPicto")).click()}),n.appendChild(e),n},_createDrawingToolsSections:function(){var n=[];return this.dtOptions={},this.options.tools.points&&(this.dtOptions.points={label:this.options.labels.points,active:!1,panel:"draw",id:"point"}),this.options.tools.lines&&(this.dtOptions.lines={label:this.options.labels.lines,active:!1,panel:"draw",id:"line"}),this.options.tools.polygons&&(this.dtOptions.polygons={label:this.options.labels.polygons,active:!1,panel:"draw",id:"polygon"}),this.options.tools.holes&&(this.dtOptions.holes={label:this.options.labels.holes,active:!1,panel:"draw",id:"holes"}),this.options.tools.text&&(this.dtOptions.text={label:this.options.labels.text,active:!1,panel:"draw",id:"text"}),this.options.tools.edit&&(this.dtOptions.edit={label:this.options.labels.edit,active:!1,panel:"edit",id:"edit"}),this.options.tools.display&&(this.dtOptions.display={label:this.options.labels.display,active:!1,panel:"edit",id:"display"}),this.options.tools.tooltip&&(this.dtOptions.tooltip={label:this.options.labels.tooltip,active:!1,panel:"edit",id:"tooltip"}),this.options.tools.remove&&(this.dtOptions.remove={label:this.options.labels.remove,active:!1,panel:"edit",id:"remove"}),(this.dtOptions.points||this.dtOptions.lines||this.dtOptions.polygons||this.dtOptions.text)&&n.push(this._createDrawingToolSection(this.options.labels.creatingTools,"draw")),(this.dtOptions.edit||this.dtOptions.display||this.dtOptions.tooltip||this.dtOptions.remove)&&n.push(this._createDrawingToolSection(this.options.labels.editingTools,"edit")),this.options.tools.export&&n.push(this._createSavingSection(this.options.labels.export,this.options.labels.exportTitle)),n},_createDrawingToolSection:function(n,t){var e=document.createElement("div");e.className="drawing-tool-section";var r=document.createElement("p");r.className="drawing-tool-section-title",r.innerHTML=n,e.appendChild(r);var i=document.createElement("ul");i.className="drawing-tools-flex-display";var o=this;function s(h){o._handleDOMToolClick(h,this.id,o),o._handleToolClick(h,this.id,o)}for(var a in this.dtOptions)if(this.dtOptions[a].panel===t){var c=document.createElement("li");c.className="drawing-tool",c.id=this._addUID("drawing-tool-"+this.dtOptions[a].id),c.title=this.dtOptions[a].label,c.addEventListener("click",s),i.appendChild(c)}return e.appendChild(i),e},_createSavingSection:function(n,t){var e=document.createElement("div");e.className="drawing-tool-section drawing-tools-flex-display";var r=document.createElement("button");r.title=t,r.className="tool-form-submit drawing-button",r.id=this._addUID("drawing-export"),r.type="button",r.textContent=n;var i=this;return r.onclick=function(){i.onExportFeatureClick()},e.appendChild(r),e},_createMarkersChooser:function(n){var t=document.createElement("li");t.className=n.className;for(var e=0;e<this.options.markersList.length;e++){var r=document.createElement("input");r.type="radio",r.name="marker",r.id=this._addUID("marker-"+e),r.value=this.options.markersList[e].src,r.className="marker-input-radio",n.defaultValue===r.value&&(r.checked=!0),t.appendChild(r);var i=document.createElement("label");i.className="marker-label",i.setAttribute("for",r.id);var o=document.createElement("img");o.src=r.value,i.appendChild(o),t.appendChild(i)}return t},_createStylingElement:function(n){var t=document.createElement("li");t.className=n.className;var e=document.createTextNode(n.label);t.appendChild(e);var r=document.createElement("input");try{r.type=n.type}catch(i){r.type="text"}return r.id=n.id,r.value=n.defaultValue,n.title&&(r.title=n.title),void 0!==n.min&&(r.min=n.min),void 0!==n.max&&(r.max=n.max),void 0!==n.step&&(r.step=n.step),t.appendChild(r),t},_createStylingDiv:function(n){var t=document.createElement("div");t.className="gp-styling-div";var e=document.createElement("ul"),r=null;switch(n.geomType.toLowerCase()){case"point":r=this._createMarkersChooser({className:"gp-styling-option",defaultValue:n.initValues.markerSrc}),e.appendChild(r);break;case"text":r=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:n.initValues.fillColor}),e.appendChild(r),r=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:n.initValues.strokeColor}),e.appendChild(r);break;case"line":r=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:n.initValues.strokeColor}),e.appendChild(r),r=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 \xe0 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:n.initValues.strokeWidth}),e.appendChild(r);break;case"polygon":r=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:n.initValues.strokeColor}),e.appendChild(r),r=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 \xe0 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:n.initValues.strokeWidth}),e.appendChild(r),r=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:n.initValues.fillColor}),e.appendChild(r),r=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.fillOpacity,title:"0 (transparent) \xe0 100% (opaque)",id:this._addUID("fillOpacity"),min:0,max:10,step:1,defaultValue:10*n.initValues.fillOpacity}),e.appendChild(r);break;default:lQ.log("Unhandled geometry type for styling.")}t.appendChild(e);var i=document.createElement("input");i.type="button",i.className="gp-styling-button",i.value=this.options.labels.applyToObject,i.onclick=function(){n.applyFunc.call(this,"apply")},t.appendChild(i);var o=document.createElement("input");o.type="button",o.value=this.options.labels.setAsDefault,o.className="gp-styling-button",o.onclick=function(){n.applyFunc.call(this,"default")},t.appendChild(o);var s=document.createElement("input");return s.type="button",s.className="gp-styling-button closer",s.onclick=function(){n.applyFunc.call(this,"cancel")},t.appendChild(s),t},_createLabelDiv:function(n){var t=document.createElement("div");t.className="gp-label-div";var e=null;if("Text"===n.geomType?((e=document.createElement("input")).type="text",e.className="gp-input-label-style"):((e=document.createElement("textArea")).rows=2,e.cols=40,e.className="gp-textarea-att-label-style"),n.text&&(e.value=n.text),e.autocomplete="off",e.placeholder=n.placeholder,e.id=n.inputId,t.appendChild(e),e.onblur=function(){n.applyFunc.call(this,e.value,!0)},e.onkeyup=function(s){"Text"===n.geomType&&13===s.keyCode&&n.applyFunc.call(this,e.value,!0),27===s.keyCode&&n.applyFunc.call(this,e.value,!1)},n.measure&&"Text"!==n.geomType){var r=document.createElement("input");r.type="text",r.readonly=!0,r.className="gp-input-measure-style",r.value=n.measure,t.appendChild(r)}if("Text"!==n.geomType){var i=document.createElement("input");i.type="button",i.className="gp-styling-button",i.value=this.options.labels.saveDescription,i.onclick=function(){n.applyFunc.call(this,e.value,!0)},t.appendChild(i);var o=document.createElement("input");o.type="button",o.className="gp-styling-button closer",o.onclick=function(){n.applyFunc.call(this,e.value,!1)},t.appendChild(o)}return t},_handleDOMToolClick:function(n,t,e){for(var r in e.dtOptions){var i=e._addUID("drawing-tool-"+e.dtOptions[r].id),o=document.getElementById(i);i===t?(o.className=e.dtOptions[r].active?"drawing-tool":"drawing-tool drawing-tool-active",e.dtOptions[r].active=!e.dtOptions[r].active):(o.className="drawing-tool",e.dtOptions[r].active=!1)}}};var Qc=Ki_getLogger("Drawing"),m6=function(n){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(e);var r=this._container=this._initContainer();n.call(this,{element:r,target:e.target,render:e.render})}return n&&(t.__proto__=n),t.DefaultTools={points:!0,lines:!0,polygons:!0,holes:!1,text:!0,remove:!0,display:!0,tooltip:!0,edit:!0,export:!0,measure:!1},t.DefaultLabels={control:"Annoter la carte",creatingTools:"Outils de cr\xe9ation",points:"Placer des points",lines:"Dessiner des lignes",polygons:"Dessiner des polygones",holes:"Cr\xe9er des trous sur un polygone",text:"Ecrire sur la carte",editingTools:"Outils d'\xe9dition",edit:"Editer les trac\xe9s",display:"Modifier l'apparence des objets",tooltip:"Modifier les textes / infos-bulles",remove:"Supprimer des objets",export:"Exporter",exportTitle:"Exporter en KML",applyToObject:"Appliquer \xe0 l'objet",saveDescription:"Enregistrer",setAsDefault:"D\xe9finir par d\xe9faut",strokeColor:"Couleur du trait : ",strokeWidth:"Epaisseur du trait : ",fillColor:"Couleur de remplissage : ",fillOpacity:"Opacit\xe9 du remplissage : "},t.DefaultStyles={textFillColor:"#000000",textStrokeColor:"#FFFFFF",textIcon1x1:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",anchor:[0,0]},polyFillColor:"#ffffff",polyFillOpacity:.4,polyStrokeColor:"#ffcc33",polyStrokeWidth:4,strokeColor:"#ffcc33",strokeWidth:4},t.DefaultCursorStyle={radius:6,strokeColor:"#FFF",strokeWidth:1,fillColor:"rgba(0, 153, 255, 1)"},(t.prototype=Object.create(n.prototype,{})).assign=function(e){for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r])},t.prototype.assign(cQ),t.prototype.constructor=t,t.prototype.setMap=function(e){n.prototype.setMap.call(this,e),this.getMap()&&this.eventKey&&Aa(this.eventKey),null!=e&&(this.draggable&&jv_dragElement(this._drawingPanel,this._drawingPanelHeader,e.getTargetElement()),this.collapsed||(document.getElementById(this._addUID("GPshowDrawing")).checked="checked"),this.layer&&this.setLayer(this.layer),this.eventKey=this.getMap().getLayers().on("remove",i=>{i.element===this.layer&&(this.layer=null,this.interactionCurrent&&(this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=null))}))},t.prototype.exportFeatures=function(){var e=null;if(null==n.prototype.getMap.call(this))return Qc.log("Impossible to export : control isn't attached to any map."),e;if(!this.layer)return Qc.log("Impossible to export : no layer is hosting features."),e;if(!this.layer.getSource()||!this.layer.getSource().getFeatures()||!this.layer.getSource().getFeatures().length)return Qc.log("Impossible to export : no features found."),e;var r=this.layer.getSource().getProjection();return r=r||this.getMap().getView().getProjection(),new EL({writeStyles:!0}).writeFeatures(this.layer.getSource().getFeatures(),{dataProjection:"EPSG:4326",featureProjection:r})},t.prototype.setCollapsed=function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(this.onShowDrawingClick(),this._showDrawingContainer.checked=!e):Qc.error("[ERROR] Drawing:setCollapsed - missing collapsed parameter")},t.prototype.setExportName=function(e){this._exportName=e},t.prototype.getExportName=function(){return this._exportName},t.prototype._getsMarkersOptionsFromSrc=function(e){for(var r=null,i=0;i<this.options.markersList.length;i++)if(this.options.markersList[i].src===e)return this.options.markersList[i];return r},t.prototype._getIconStyleOptions=function(e){var r={};return Object.keys(e).forEach(i=>{switch(i){case"src":case"size":case"anchor":case"anchorOrigin":case"anchorXUnits":case"anchorYUnits":r[i]=e[i]}}),r},t.prototype._initialize=function(e){this._uid=ni.generate(),this._exportName="Croquis",this._exportFormat=".kml",this.options=e=e||{},this.options.layerDescription||(this.options.layerDescription={title:"Croquis",description:"Mon croquis"}),this.options.tools||(this.options.tools={}),Object.keys(t.DefaultTools).forEach(r=>{this.options.tools.hasOwnProperty(r)||(this.options.tools[r]=t.DefaultTools[r])}),this.options.cursorStyle||(this.options.cursorStyle={}),Object.keys(t.DefaultCursorStyle).forEach(r=>{this.options.cursorStyle.hasOwnProperty(r)||(this.options.cursorStyle[r]=t.DefaultCursorStyle[r])}),this.options.collapsed=void 0===e.collapsed||e.collapsed,this.collapsed=this.options.collapsed,this.options.draggable=void 0!==e.draggable&&e.draggable,this.draggable=this.options.draggable,this.options.markersList=e.markersList||[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARfSURBVFiF3ZhfbBRVGMV/d2Z3212tbSkCbuNaqzaRiL6QyAMPjSFoYqgx4oOiRmMFUzQG479o2lQ0QXk1EhYFgmlD2mIRkYhRwqLEaA2GiKWV7rZLQ0sLwbZId7t/Zq4PFK1125m5s/vCedz7nXO+M9/N3jsD1xFEvgXlTkrI8hBQBywFbgEqgEvAMHAayZcYHBYbuZJP77yFkdsoR+ct4GXAb4OSQPARXj4QzzGejx7yEkZuZy2CMLBAgf4nkhfEi3S67UNzQ5YSIXfQhKAdtSAACxDsk2EapXT3cF2FYQdNSN7F/YQFsJkw77gVUcL01mp3o5EDJoK1Yj37VchKjcjdlJEmhvrWmg9jGNwhGhhzSlTbZmnepjBBAMrReF2F6Hgy0+fIKPb+flWRIMtip+eQ88lcPRCtg3gCCVZ3RqhPDbJepqlPDbJ6XwSvP2nDJYCXB522prLN6iwrPIEETw33U/VoLZovBPjQfCGqHqtl3XDUZiBrn1lQCXO3ZcUDLV34Su/JueYrW0btnp8tNSRLnTamEiZoWRF6uHre9dseuT0vPrOgEqbCWtW3xNX6VSy02c+/sk4JwF+WFWZ6xGL9vA2fyzb7+QcqYUYtKwYP9s+7PrA/bsNn/geSA87DSLosa44+fT/p8VM511Jjp4g8u8KGk7XPLKhM5qhlRSbppzV4JwMdEcz0WSCNmT5LrC1CS/AujKliSw1BxGljzm8AH3MjHs4BpU65DjCBn0rxDJNOSI4nM33F2O2U58yEnU6DgOpF02AzcEGJa40LZHlfhagUZvp6vkmFawObVK7/4PLFSoZpBZ50ozEThsne6i2hjZqmFRVJ6U8JUeSVUmQNzQvg0c1MVtNMIUTSl0pNLhsaGu8A4xrfbZhS4CRQ5SoFcCWtja/5NBg+N+GZsu0vhSEkcY8mf+iNx+OuX3llmJVABNCVNUA2fl3xWdvJkriqRBb2uPugAYgNHEey1Y3Gt3/ccNxFEAChm2al6zAAjNAEWF/rc1Ev6+ffOLTwmBt7E0xD02J5CSOayQLrsHMJnYGMITJvHrr588mUMKyr54CUaaHrnfF4fCQ/kwHEBmLAa044rb+WHP4xXnxJ0VJK6CkyjO2xWOx3KMSH8zDtwONWdb2jvt41u4JtChZJKeVveDwnYrHYfw5uj4KYFRpSWbGqyCPL5ypIpMTkKwcWfWVXUEqRRcio1LTuUCjUE4lEsrnq8j4ZgKEP9bpgmfHFHPpyy3fle3f9Uto3n4aUIqNhDghN6zZ1vTcajaasfAsSBmBwq7f11tLM/24Hx2L+n+rbF38zBy2JEP0anPEGAj3d3d1pJ56F2GYAGInM82M+bWW53wxd++3ipH7x1QMLj8ysk5BAyj6Ppp2+d/nyaEdHh/I/W8EmA3Ci2b/iviVT3+tCerMmxkudiz450hcYBSYQIqrDmScGBvqawSxkH3lDV2Pxe6ltItnWcFNLTXX1qpqamkoK/BCvC/wNB+l5MdQKNHsAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS7SURBVFiF3VhNTFxVFP7OfTNvOjMtM9AoJSSYEEVMCv6kJi5NoCa1TRqNxDTaFhcWNSmxaaxNQ0w3mqgLdGeRhKFYXVC7qDU2BhVt/YdqEQRhRgYTKD8VZqAMzM+7xwVCcIR58+6b2fRb3nO+853v3fvuu+8CtxEo1wX5pTu2IpasBfEeSFSCUAygCMAsgEkAQyD6DClXF3VMLeZSO2dmuN7vB+MYiBsAbDEn8BIIZ6BrzdQyF81FDzkxw8/594P5HQCFCvQ5QDRSYO4Tu30IO2QGiA/5XgVzAGpGsMKTZ/mw7wTbfLi2yFzvOwngpJ0aaXidAtG3VcnKZv5dWgE7Nf5fFBJCHqK2hUsqdKVG+EihDwn5K9SXViZEAHqAApGIVaLaO5Pg48iPEQDwg2WjCtHyzKx8RxJBZLP9qoJ5CdJ9t9XvkPWZiSVrkY0R3b2MxnM9aJ2Ooi3iRut0FEc/6IHuiZtyidwQ8RqrrVk3Q7zHNEd3L6N5eAYP7q2BppcB0KHpZXhoXw2aB6eyM8SPW23NuhnGvaY5L7T2w7Nt54Yxj68KDS19WSiZ66RBZQPYYZpRvfuejPH7H8scX0FJlv2sQcVMkWmGpmc2bBbPVicNKsvslmmOkZg0id/IQmkhy47WoLABYNo05/rnIxnjv1wOmtbgLHTSoDIz10xzzhypQiz624axWLQPLQ3V5kLUa7U1la35G9OcRMyFY/cV49qlLhiJMQAJGIkx9FzswsuVO5BccpnryKuWW7NK4IPFXmjLgwAKrHItYB66t5JaJmJWSJZnhjqmFiFxzirPIjqsGgFUD5qC3gRjRolrBsYMQEr/NEpmKBCJgHBKhWteHKdUjv8rVBvgw773QaizU2M9DMb58q98rwghXC5md5zI5WSmlCGcAODQZDIlhCSiJT0eX6waH490AsYq356ZZ4oK4DSuAihT4UuGYIaQILGQ4vknen2BibhYzlqfySBG2CH4ylA4HLb9y8v1BY8A9CkAzVwcZDA0BgkG0+oFBjP49Ij3o48n9b9U20gB7bZuZwCAAvM/gPndTDmSIZKS9CRDNwCHBIv1NzFdfzu/t2EEAEiTstS2GQDA2PwbAHrSh9ebSDewihtxMdn0h/dbO/ISkIYQoZyYoW6kYOD59YdQg8mRYjgleFONpKRk07D34qJBxmY5pmBOkKZdCIfDk7mZGQDUER0FUROwaoQdZpd6H07oXT/OOWYVJZmBQZdhvBcKhfqBfFyc1xcEEpKeNjMytOgYfqp32wUFiSVm7oPD0RsKhf5zsnYoFMsMyccTUtvtFHL7ZimxFC2eGPJezrYkM6VAHGQhBsrKyga7u7tTG+XlfGYAIFxXuLfEzZ288fvCb4U858+Ou0KZajBTUkCOkhADUtOGgsGg6SVIXswAQKiuqK3UbRxIH78yq//8Yr/3i01oSyD6UwDDTo9ncGBgIGFFM29mRh/FFm+J/3qBk+9aHbsZFzf39WwN3DK0tWXCQAzMIw4hfq/etSvY2dmpvLPlzQwA/PTk9od3eowvhWCnZEodHfC2fz3rnAEQBVFQA4YPjI6OnAZkPvvIGb7bX/Ta/LP+SEftne0V5eW1FRUVpcjzQ7wt8A+9at5zXMB2DQAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAP0SURBVFiF3ZnLbxtVFIe/e8eOPU5DapI2whEWyiILJGDTBQuWSGTTSkVlQRGs2MGSh4RoQWLB4x/gpVIViNokJUV0U4RQXKgQr0ookCYkdjONSJtQJTGltjO2Zw6LJlEbkszLTgQ/6Ww859xzPt97556Zgf+RVKMHFGgD+oADwP3APUAHsABcBS4BXwDnFNxsdP6GSCAt8LZAWUB8WEngLYHdO137HRI4JLDgE2K9LQg8vtMMCCiBowJuSJBVcwWOSBOWfRCY1yJCrLdXdwrkUANmZL05Age3G2R3hD3iZYsC6TB16ZA8rwB3h4z1Uhp4MUxg4A23co7MA2aYhD5VBrqCnkNhZqYPPyCpVJnh4Ry2PYNIFdue4fTpHKZZ8ZEjBTwWorZgEvjEc92nUiUpFn+VjbS0NCqm6edgPbEdMD97FjI8PLIhyKoGB0d8wPy0HTBXPQux7Stbwti25QNmNmhtYW4ANtCytZNUPXxslEp4pKoq8PK5Q2FuAH97elSrcx7Xr/nIc8NnPWsKAzPv6XH27OUtr585Y/nIs/Uf0ggJHPdc76ZZlqWl0Q33y+LiqCSTFR975th2wDzjqy0xzbIMDo6IbVsiYottW3Lq1IhPEBF4ejtgdgkUm9SXrVpRoDVobYH3zEqLcTxoXEAdU1Bqco5bkluPyPNNmpV5Cdk1RwE63CSYw2FrivSYKtBPhOTr5cDJnmz2Oa11IiFi2kol4iKq7ug4QMxwa3WtXaVUpcW2Sw/MzhaHwFmNjwrTDvwC3BeJAripdXF/JvP+H7HYsu/8ohwlWDEt305YlhX5BYLAI0AOMCKMIUc6Oj4eaGuzwg5RhxNhnzTXpOAC8E6UMb5qbb0QAQRAGa7bHRlmRUeBH8IEzhnGtZc6O89HSe6C62hdaAiMgjrwFH6a0NtUU6r28p49n5WUcry9N5FIVRnGsGVZc42aGRQUgBeCxPS3tZ37LplcCJlSBMYTjvNeoVD4baWGxkpgEHjCy2+ipWVifyYzECJFRURGicUuFgqFP2+/0AyYTlupyYTIpqd4WanSwe7udy/HYr5aFhFVR0letB7LZrPjuVyuvpFfU97tzhrGgYzjfL7J+PJmOn3yo/b2qa3GEFE1jTuttB5zDWMin8/bXnmb9qJ6Jh7vv7dW+1d3cN40v3+2q+vLTcIqKHVZw2Q8lRofGxurBsnZNJhpSLZr/XvadbOrv103jOt9mcwHNwxjbZkIlBGZiml96cF9+/JDQ0Oh72xN/YRw0TQffmh5+RtDJF4H5/m9ez/8OpWaB/5CqbwBk09OT0+9Dm4z62iYfkwm37CVqgzsuuvT3p6eR3t7e7vZye8w/xX9A0ynxee2hlfFAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASKSURBVFiF3ZhdbBRVHMV/9+5uPwikFExEiCtWbSKCCEsCiU1EJIEXeMIHxZgYPzBUYzB+RUPlwwTl1UhYFIiGhrQVFCMRAoQFidGaEgIuVLrbLgSkhWBb2N3uzs7M3weBILadnZndF87j3P8553/m3ty5c+Eugiq1oDy5dRw5czGKpQjTgPuAicBV4C+E02j5gSFrn4o3pkvpXbIwMmNTLaHAByjeBKqLoGRBfY4V+lSdeGmgFD2UJIzM2bwMUVFgggf634i8qo6/vttvH9oPWRAlkS1NiGrFWxCACSj1rUSiqwXx9XJ9hWH2liaQtfifYQWsIxL9yK+IJ9xYWq1+NIaBjahl6vhr33khe2pEntg+noCRxPvSGg39GNZD6tTKfrdEb8ssaHxIeYIA1FKh3/VCdD0zN74jfRS3/XpFlpx5r9vvUNC1Tc5cTDFBqoJZ1i9opyFcR0hPomD3cvR8N02H55IvOPHHUB1aBOxy05r7ZaZY6lhTFcyy74Vunp46n5AOAxWEdJhnps5n//IElaEhRw0pwucOuA8jPOpYs35BO2Mrpg87NrZiBmvn/+aooWSa29a8bACTHSsawnWjjj/1wIOOGlKEzx3wEmaiY0VIT/I1/i/uKbKfW/AS5rpjRcHudRi/VITPtSL7uQUvYfocK46e7x51PNaTKsJn9BcyDDyEkXbHkqbDc0kbp4Ydu54/xcexec42OPvcAS9b82HHmnyhmkXND3OwJ0bBPgcYFOxzHEjGWLTjEQyryrkzFXPfmkvIY1+MpSp4Aahxy3WBQQrVU9TJFzNuSK5nRsUb0yi2u+W5dNnqNgh4PWjmrXXAZU9cZ1zGMD/xQvQU5sbxfJUXbhFY5eX4Dz5/rCQSbQae96NxOyzsnXVXNjRqrSsrRarzSlWGRJRp6RBAMGAXTK1tpdRQRT6fmXHx4kAbWDf5fsPUACeAqb5SAGkxBpYMfBW9YA/mivYXZSkhFdTyc2cqlfL9yyuRaAMQAwKeNUBWZ376piV3IuVVwoSv/V1oAKpjxTGQjX40Dhh/HvMRBEAFbHuK7zAAjOttApyP9cOg17526b303iN+7G2wLa2TJQmjYmtMYDnFHEJvQwGr8H5m766M5C3n6hEgYqhAYHcqleotzcwAqmNFEuEdN5zm3PF9vxipqx4tReBMpWVtTiaTf0A5Ls4j0VbgWae6TrOvc8ngthYPFkMicpJgsCOZTP7nw+3+QsMZK/NiLqxUwdqRCrJ2PvNWes+PxQqKKBMlCdE6Hg6Hz8RiMXO4upLPDMDFWZ8tnazHfz+CvmzIHNy5Lfd712gaIqqgsXuU1nE7EOhMJBJ5J9+yhAE4P2tj8/265n+ngyNG8tdXrrfuH4E2hFLdGs6Gxow5E4/HDTee5VhmAFj92Zf7J1Q01Krq8M1nV+zMlbfTew7dXieQRaQrqPXpx+fMSbS1tXne2co2MwAds9fMm6kmHQ2gQia29ca13V8eKnT1AYMolQjA2ed6errWgF3OPkqG9pmr1+cjm4ZapjfuqK+rW1hfXz+FMr/EuwL/AGOdsbn1H7gQAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATNSURBVFiF3VhZTFxlFP7Of+8Mi12Eot2Sia36IIJCIWmT0lhSK30wfaoaNcampBhrfGhSl5hIW9HE5VFTpWilNpUI0hrTh1YwjJSkthFEcABhBoZ0YekCFGa72/FBSLAF7jY86Pc453znO9/9//nvuT/wPwIlu2DLns1Lo3J8hwDtZHA2gNUAVgC4SYRrzNxFJH6UpNjZ4iOBqWRqJ83MmVdzM7y6520CvQ4gzQIlSoxPJVX/sLi6fTwZPSTFTOMrhbuYuRJApgP6LRDv3V7ZdsptH8INmQH6aW9BOTPXwpkRAMgE0/eNZQXvssuHK7khF5VtOEhEh+F+hQlAcX/hGu1E61CzmyKOML21at3UmAMGM+96qqrttBOyo0aadufdq3mlEJxvrXlBwFhcUh58+vPOMbtcR/8ZzSu/g0UwAgAMZHgN7xtOuLZXpmXP5qUxOT4Ca8evU0RlOb7S7ntItq8S30EWjEje1GhOacWlrNyi9SR5VrGuDo92NPd3HSvfqCsJM366pqaVAKi305vtbSZAO81yJG9qdMsnZ/vvyyveSpLHB8BLkse3Mn/b1i0fnQtK3pSYuRKb6tzdm10QP2KWklNacUlOXZIzV0xOX5KbvfvwRXMdyrbbmm0zzFhjlpOVW7R+ofj9eU+ss6BkqnMnnJxmK8wSSPKschOfRpbljqbhxMykWQLr6rBJfMiCzm3LHU3DiZkRs4TRjub+BeO/+8MWdBZ8IHPBthkiXDLL6TpWvlGLTnXOFVOjk52B6oObzJXYVOdO2D8AQE1mObqSSDv/VslDI62NftbVQQAK6+rgyG8N/vNvljxsqEqqqQ4Lv93ebE8ATfseXaJpqVcALLfLtYEJI6auLTnREbFDsr0y/4wY9LVdnh0w4yu7RgCHg2ZCSrwHYNQJ1wJGFVl53wnRkZnp8Xy/E64F7Hcy/gMuP6waygpOAnjBTY3Z0Bk1ZeeuvyaESElhTksQpXiYSdOFBwBkyVA1IQwiinkTiUju1avjdYA+w3drZjkB7Qw84NIH4hqPV1wYr7wVM+JWOcykEyMsCz7fEw6HXX/yNpQVFAHww819AoNP9kS+abkcDzutoAHHXd3OAMD2o60tTPjYTY3260qLCyMAQJJhrHVtBgA8q5eWAzAf6+fAeNwYqu6c+sWNvgEYuhChpJgpPuTXBPAiLAyhs6Ez1ONdkfqEzrp59jxgVkiSToXD4eGkmAGAbUdbQ0R8wA7Hfzl+tueGctOhJDPQnaLrX4RCoT+BRbg4bywrqGXgGbO8K5NazwcXJr5zIBFj5g7IcmsoFPrXi9v2hYYZJGBfzOAnPYIy5stJaEbky86pM1ZrMpMG4iALEfD5fN1+v1+bKy/pKwMAtS/n78xIET/MU5/r/4rUNA7G+xaqwUyqgDFAQgQMSeoJBoMJM91FMQMANS/ln8xKE3dNB4Ebyq+ftU2em4cWA1G/AHo96endgUBAsaOZ9G02g7g0VhpRMovu8ZJv5rcJxbh+rHPq59l5DETB3CcL0fVYYWGwrq7O8cm2aCsDAFXPbdjkW0bNguDRDehV7ber/rihjgCYAFFQAnqfHxjoOwQYydBbVDMAcOTZxyvWLZMPXBxS6r/tjlRDlrt7e3uvAeDF1v5P42/pFun0pc2xBwAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARrSURBVFiF3ZhNbFRVFMd/985H26m1VEoL0zj0Ayqi6IZElpiQ2MSgIeJCDZGFuEEXJH4bG9QN6spoImiMIaExbREEYoIxhgEb1CZNjFg6lHnTacNHW8QW7Mx0pjPvuKDVprR9X1MX/Jfvnv/5n/89N++d++AOgip2QolRQZAWhCeA9cAqYDlwHbiCcB7NcTKcVA8wUUztopmRQarI8wbwMlBmg5IGPkGzTzUwXowaimJGEmxHOADc44L+F7BLNXHEax3aC1kEJQatCB24M8I077DEeUfE2+Z6MkOCVuBdvHdYoXgPg7e9JXGJ6aPV4SXHPDARtqs1HHVDdlWIDLAMEwP3R2sxjOGnSa1mzCnR3TET3mJpjABUkedVN0THnZEYFQQYwd7r1y3STFLr9DvkvDNBWrBjRIfS1B6J0pAdolFyNGSHqD0cRZVlbKiEKOUxp6U5N3Pry26RNZRm9ZUE5ds2o4IRIIgKRih/ajOrr8RtGVI2dObKOiUA91tGrDjUjap8cH7FZRuoOfirZQ5hvdPC3JgJW0aEHm9cfP3JBsscYkNnDtyYWW4ZoYIrPa0DKKptVzQN52YUf1vGSG548YDcVRtKN+0V9B/cvABGLGPSJxKLrqeOJm0oWWzI7XBzzLotI0Z3PII5fm7eNXPsHKM7NxVFZw7cdOaUdUymjMHwGlKdUSQ3COSQ3CCp9iiD4bXIZKllDkXUaWnOJ4Be7qKUS0ClU64D3KCcOrWSlBOS485MjxhfOeU5xJdOjYDbqfnWFTkG1LjhW2AUP+v+t6l5WmiPG64N7HFjBDxerMSgDXjWS47ZKBT4unFLZLfWuqREpCyrVElAROULOgDg95lTea1NpVQmmM2mNly+PN4JhRm+VzOVwG9AvScXwERaj2/dFT5wadg/aVtfVEEJSb+Wn2LJZNLTPwDVxA1gB7N2xw1EkH37q445MQKglPjQ0pSH5+vr6+u9/dAAVBNdwIdecvzQVd7V/l1F0ksZPtOs82wGgCFaAeuxfh4MX/Ndfe2D6tNe5E0wC1obRTGjHiWPyXNgYwidhakpNfX6Ryu+SWWU+2MqklM+35FkMjlcnM4Aai0GwitOOG0nKk6e7Sm97lJSBPpKCoX9hmH8AUvx49ygA3jaKi5mBGNbXwy3u5DIiMjv+P09hmGMzl4ovpkLVGcLqr+kRKoWikmnVWrb7rrPEkN+WyOLiMqjJC5a90Yikb5oNJqfL87vtuiFoO7jz8s/653hmsK3zL9Z8vHBZcesjIioKY05oLTuNf2+WDwezwIkEgtflYremRkMdQXa7l01ddt0cLq77JcX3qz9fgFaBqUSGvoDoVBfb29vzonmkpkZOEVpZaW+UFVpRmaeXRvzXWvZGf785oTv32MikEbkol/r8w9t3Bjv7Ox0/WZbMjMAPcfLNj28bvKMzyeBfIHCS3trvvjxbGgEuIFScR/0PzMwcHEvmEtZR9HQfaz0/WxMZdo/vftQc2Pjlubm5jqWeBPvCPwD/KOH+jnO5aMAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASxSURBVFiF3ZhdbBRVGIafc2Z2210hbeWnpcQVUC8kwBUJXJBIgwkgBEPEC1GMxhgE4gUJJsYERMWI3orYaiqgrYSWH/mvMaQLciE1RAKUkrLbbhMobQ20/LT7N3OOF0CC0O7szGwv9L3c73u/93vnnD3zzYH/EUTBKx6sHUvQWgR6GTAdmASMA26A6AYuofUhQnYTVevuFlK6cGaObC9DGh8i9PtAKA/GEIKvSRZtZfnbA4VooTBmjlWvQFADPOmBfRN4l8Xv7ffbhvTF1lpwrHoTgga8GeE+by9NNRvR2tfDNfyQmVv5MYJP8L/CAqgidtai/sgpP0W84d7WavBV43Eo0CtYvOaAF7K3Rg7sKKU4Hcf71sqFfmz1DEvX9rslevvPFKc/YnSMAJRhyA+8EN2vzMHasQSzveR3/HrFEMV2udv3kOlaJmgtIg8jYcMcqpu1oGXJhMi0oJQVGaV6Dvd1day62DwnaWWd+GHSciGwz01rHraZXuaUETbMoe6qVR3Ly6fMD0oZAYJBKSOvVEyd3z3/jVjIDCSddYSjzqPwYEY875RRN2tBS4kZnDFcrNQMztw144UzjjKa6W4787IylU4ZSyZEpuWKv1w+dWohdB6Fl9NsnFNCUMqKnHGRO34PYnz+Ld2DFzN3nBIySvXkjGt1PQ+d23l3dB9ezPQ6JRzu6+rIFT/Q25lwVNHkfCDDwYuZFqeEVReb5wxYmQvDxfqz6QtvnW+e69yZcNR5jOKWgKbZKSVpZUOV0bpnG3vi0YxWXUAmo1XXnp54tLL5p+dSyi52FlJRt625nwCavxlDyrgKlLjm5o9byPBkFr456IbkfmWq1t1FsMM1zx1q3RoBr4OmpT4F+jxxndGHrbZ4IXozs3RtP0Ks98R1ghDrvYz/4PfD6ti39Qix0leNh6H07siaL9ZJKYuKtA6lhSgKaC0sWwYATENlLSmVECIZTKcHZ167NtAI9gO6PzO/1ZRg6XPAFF91AJnKDES21NaYN26l8uVoLWyhSZhS/345kUj4/+Q9XjMPdBR/9wl6Qn3TjyWnzyW88i3Y5e92BmDx6tPAV35KjDnXftqHEQBhKDXZvxmA4p5NCJzH+mFg3rxzvXzn0ZN+5BUoW8p4YcxUbbZQ4nXyGEIfhrDt7MS6o/tEOm07Z48ArTPCMPYnEomewpgBeGl1HMQGN5SSk381hdsSNzwqag1tRbZdHY/HL8JoXJwfr24AXnVKK7rae/mpz3fs8aCQ1FqfxzTPxuPxf7243V9oOMESa4XOvqgDZtlIKTKVHpz4w6Ej+ZbUWlgIHdNStkYikbZoNGoNl1f4lQGM3V8us0tLfhmhvh6/98Tu0hN/XslVQ2uRlahOIWWrMozLsVgs7aQ7KmYAAnVb67PjSh+bDsKtHX9Ubmv4dQRaEiE6JLQHwuG21tbWjBvNwm+z+8hmU+/Iu8l5akwo8uA34/bg3+W1B088nKdhCK2vmFJemjV7dqyxsdHzyTZqKwMQ2r55bmpK+SktRABb2ZO+2//9E+djvcAthIgZ0P5aZ+eVzaAKoTeqZgCKt238LP10xYaxZy7tq/j5+E5Ms629vb0b0KOt/Z/GP4jqqfL5oxVsAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS8SURBVFiF3VhdTBxVGD3f3Rl2oRAstZXaBGxpoxaxhSVpE0ha0ib0qU/1QX009UHjQ5Oa+BO3pdTEn0QffNDGGH+SprGUqlUTSGtcKfGHBELALYTuwGJsSyEVKLuz87Mzny80sQjMzp3lQc/j3O+c8525N3fuXOB/BCq0YNNoU5lRZBwipsMM3glgM4ANAO4AuMnM14QQl7LZbFeiNpEupHfBwtRN1q1Xc+orBHoJQHEeFB3AB45w3hrcOjhXiB4KEqZxvPEIM58BUCFB/4vBRwdqBi4G7UMEYjMoqkVjzHweckEAoIJAF6LJ6BvgYC83UJiG8YYYgDYEn2EC4VRUi74eTEQSi0vrfBCNZeAy85GB7QNfyZClGtk9sfuBkBvSIL+0VsOspVg1w9XDs36JUstMYeU1rE0QAFhflCt6WYboe2aaRpvKDNW4jfy2X1nohmE85Pc7pPh1MYqMQ2DvIBER0ds3tvc1lzRvU0mttNme6tF7xmPTsT0mm178kuJIcSuATj+9+V5mxHTYqyYiInpXddd4y7qW/SqpVQCKVFKrDqw7sL+7ujsZpnDWS4OJPX2WwncYBj/uVdO+sb2vlEqfWG6sVJTWtW1q+81Lg5h2+u1NZgN42KuguaR522rj+0r2bfXSYGZPn6WQCbPBq0AltTLIOACA8KCPngDIhCEseJXYbE+tOg77Vh5Od/PuaRH+wzBue5X06D3jq43HM/FUHk6rvpDlILPM+rwKYtOxPWk3Pbzc2IK7MHxi+sReLw0Ge/oshczW/KNXjclmcetk6/YrmStxm+1JAJbN9uTlzOV462TrDoutiGdjJOK+e/NLqE3UlkYikT8BlPvl+sC8vc7eMlQ5lPFD8j0zidpEmkCf+uX5xCd+gwCSB01TMU8BmJbh5oFpS7FOyxClwiwez4/JcPPAMZnjPxDwxyqqRc8CeCaIxn1wcG7m4MyLQohwmLnYJAqrzJRzhAoASsi1c0K4RJQtMs1M3Y0bcx2Ac48eNEw5gEEAjwQKAYB1nksfnTvjTrlG3hwmhxgpRfDV0VQqFfiXN6pFmwHEAYSkRRisv5/5wv7eSMkq5IDPg93OAOiv6e8F8E4QDbvX6g0QBAAo5LpbAocBgLI/ymIAPI/1y4Fn3FvZt9M/BfF3AdcRQitImHhLPAcXzwLeh9D7YMPW3810cpYd7+IVwGxRKHQxlUpNFSQMAPTv6NeY+bgfjvmt0ZXrt+5IWjIDI2HH+UjTtN+BNbg4j2rR8wCe8qpztdzowvPzX0pYZJl5CIrSr2nafR9u3xcansjhBXb4IIVp/UolrLuZ9On0d/lKMlMOxEkWIlFVVTUSj8dzy9UVfGYAoP6X+sNik/h6BX02PsycMy8Y11fTYCZbwJ0gIRJuKDSaTCZNL981CQMA9b31Z8Vm8a/Tgd1n/aq/utC9Ai0LonEBjKklJSOJRMLy41n4ZbaIWXv2uYr5imYqp6p7z9xZdyb7ZvqHf9YxoIP5uiLEtScbG5MdHR3SO9uazQwANFxq2EuPUQ9CUOHA0U/e/dj+2b4NYB5EyRAw9vTExPWTgFsIvzUNAwC7vtnVrjyqHLeuWJ3me5nPoCgjY2NjNwHwWnv/p/E3iQfm3w9KV7kAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATaSURBVFiF3VhbbBRVGP7+M9NddtmyvcYKSbGoAYn4REJNIGmRpMREfMEH5YEYY6ptfCCBxEgEvMR4eeCBtBYa1EIIsbVAFAIIsis0og1GpJbWdrdsiUBLuXQp3e3MzpzfB23Cpe3pzGwf9Huc83/f939z5nLOAf5HoGwL7m4ryjWssdVgWkPEi5npURAKwbgJ4CoYF5n4WyBwrLZy6G42vbMWpv5MOJ9s+TYz3gIQUDtzCkw7DGgfb6gcHs5GD1kJUxcJrSWinWAUuOjgFkt+vXbl3QNe+xBeyMyg+lOhLQRqdhUEABgFRPTN59HQu8zebq7mhVxSEdoKovfgfYYJoMpzCZ91pMk87UHEHeoiobUEavai8RAYkgTWvlkxctAN3VUj2yN5eX6y464fralxG7p4vGZF8rZToqt3xs/2OzMUBADykZGb3BAdz8zutqJcI2MMYjqfX7cgTjEHHnH6H9Kd+hjW2GqAlEF0PZhataixfX5h1QJBvhLJ5kD/jaN9J7url1l2amo+U1BwugpAq5PenD9mTGtUJboeTK0v7+0rK3qhQpCvFIBPkK+0rPjFivXP/hnTtWBaaSPUPg/CzTvzlKpg1aLGdp+e+/REYz49vGTlooZfVBrMWOy0MTdh5qoK5hdWLZhqvKzo+TKVBpHa50E4D0MoVIqSr8TL+L8omnZP47pOCWCMqEokmwOK8WvT8LnjoCsA7mZmUFXSf+No31TjfTeOJKbhNOUNmQiOwxCjXVVzsrt6mWklOyYaMzLDHae63ihXaTCpfR6E4zCSKaKqsexUoOnswifiQ4eiks1+AKZksz82dDDadHbhk7ZMz1I3RlGnvTleAdRFikOEsb8AhJ1yHSA5agbnbaoaHHVCcjwz/ywx+EunPEcg7HYaBHC7OdO190G47oqrAuE6NPGhG6qrMDUrkrchaYMbrhKSNrhZ/gMeN1b10dA+ML3iReNe2JL3f/ZqQa0Qwu9nDhhE/hxmsmyRAwC6JjOWEJKI0j7DGF1y5cpwC2CP8z2F2XkiP2zr1nkAj3mLAZhpMbx3a3hnckiMTZfDTDYxErrgM92JRMLzlrcukrucgCi8nCcw+MSe2Xs6orMSbhUsoMnT6QwA1FaOtIHxqReN2G/+Ng9BAIA0Ked5DgMA12lkCwDlsn4ijNyia8d3zf7Ri78EpC1EPCthtlXC0qRYB6gXofc1YSNz/Is5rYZBtrp6EjCbpGkHEonEQFbCAED1c8k4GBudcM6fmnXscqd+06UlM9Dlt+2GeDz+BzADB+f1kTnNAL+kqhu6rHfv3Rr+2oVFmpkvQNd/jcfj9/24HR9oqKCBawyTVuk+zp+sxhyj0cMNocPT1WQmC8QxFqKztLS0KxqNWhPVZX1mAOCT1rw1uQX2oUn0+fT+4P5z3wd6p9JgpoyAvERCdEpN647FYobKd0bCAMBHzeF9ecXyodVB4kLOzwe2zzk+CS0Noj4B9OQEg12dnZ2mE8+sP2bjMEeTr6UD4eWBkCwdvzZ6Rwwd2TX7h3vrGEiBuVcX4uIzS5fGWlpaXH/ZZmxmAGBzY0H53AXWaRKcI23Y3+0INcZ/9w8CSIIopgE9L1+61LsNkNnwm9EwALB5V8EHJWWZjV0/BVpPNoW+gq539fT0XAXAM+39n8bfE7XcWzV66JYAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAR4SURBVFiF3ZhbbBRVGMd/58x2u7vQbmtvssSNAjaRiE8k8oAPBowkVTAGTVAJJMYXiTGYNFxisHiJ7ZMPQiIxxhRLCG1tjSBRubiAJEhiNDaFSlu6baRQELsI7e7sZY4PlKT2sjNzZvvC/3HO9//+33++M2e+GbiPIAqesYkSLNYgWAssBRYAFcBNYBjFBSTfkuR7GrhTSOnCmfmYcgTbgbeAoAPGOIJP8dPIVhKFKKEwZppYj2If8IAG+x8Eb7CNDq9lGJ7YCkGQXcBeIKSZJQi8zDNYHOMMu/XL8WYmxHvAbrx3WABPc5YsxzntJYke7m6tVk85psNCsZ4ddOqQ9Qr5hDJM+tF7RuwwimIxOxh1S5Racml2MjdGAMqBeh2i+840UYJiBGfHry7GSVHj9j3kvjMWa3BgJOQPjXe82BEz680htU2lzXpzqP2F9ljQF0w6UAlRzLNuS3PfmUa+Al7LW4k/ND68Zfhy2B9+fOpawkx0RfZEliSzSbsbsp/tbHJTms4z85hdQMtzLednMgJQVly2rLmu+RcHOkvdFqZjJmIXULe4blG+9XW16x4phM5U6JipsAvwS/+DXtYnUOm4ognomLltF5C20tds1q860PnXcUUT0DEzYhdwuPfw5XzrnZc647Yqgrw3ZCbomDlvF7DxyMYnE2aia6a10dRo1+bvNq+wVVH2OlOhY+Ynu4BkNhmM7Iksaetpi6Wt9CCQTlvpwUM9h2KRvZFHU9lUwFZFEHNbmPv3TAPzCfAXEHbNdY5bGCyknjE3JPeduTtifOma5w5fuDUCuoOm4n3guhbXHtdRfKhD1DNzdzzfqsW1x1ad8R+8flg1cgB4xVOOybA4GP0sukVKWVysVNAUorhIKZHNySIAn2FlslJaQoik3zTHll25kmiD3D26VzNh4HfgYU95AJmRiWhrZJ/vti/llKOUyAlF3CfVmZ54PO79k7eRlUAMb/8TVNWpiv3hiyVxXX4Wmr390AA4zhCrCCB4SjfF/IF5P1eeK//NQxVCWNYNvQNgKkx2AU7G+mnw3TGu1pysPOVF3gIrJ2V/Ycw0kEXyKg6G0MkQlshUn6r6WmREzj56FiiVFobREY/Hr3nfZvdwjFFWcRPB804pZV2lR8PdJXmH0jxQCnoCuVzrn4ODgzA3P85bUbxkF1b8t7/nofbIIQ2FpFLqD3y+X/v7+//34vZpJMsPgzeFKVYrQ5XPFiIzYqz6ZPURpymVElmE6lNSdkej0YuxWCw7U1zhOwMY7xprc/Nz38ySX1WeLT9Y1hXuzZdDKZGRWANCym7LMHr6+vpMO905MQNQtLPoQKY0M206CA0Fz0WO1vwwCy2JEJclXCoKhS52d3en3WgWfptNIOPPvC5TcqUVsKL3rhnjxo2aE5UnJscpGEepXp+UF55Yvryvra1N+2Sbs84ABN8JrkhVpU4roYqwyC34sfrzefHQCHALIfoMuLRhYKC3Aay5rKNgCLwd+EB8JJKlm0pbahctWl1bW7uQOb6J9wX+A8zucxGCTS9IAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARZSURBVFiF3ZhbbFRVFIa/vedSZkTbClJow1irNpGIvpDIAw+NIYghqTHig6JGIoLSGEK8xEhoKpKovBoJg1aCaVNpsYhIRINh1D5oDYaIvUhn2qGhNwi2RabtXM7ZPrQk0Ns5Z5+ZF/7Hs9e//vXvtXP2OgduI4isZ1S1d0JmPVAJrACWAYuAq0A/0A7qWzBOIaquZ1M6e2bU/kLwvAu8AQRsMMZAfAK+jxCbR7JRQnbMqAMbQYSBuzXY/4J6FfFas9sypCu2UgJ1sBpEI3pGmOSJo6jwbpRytbnuzHCwGtT7uO+wAPZAeJfbJHqYPFqNrnLMhAliI2LrMR2yXiHqUAGkYugfrfkwDMb9iO3DTomaxyz1HrkxAlAI8m0dovPOTN4jQ9h7/epiDDJFTu8hjc5k1mPDSBDvWDPrIkm29Cq2ppJs6T3KukgA37gNkSD4nnBamc4xq7SuxDvWzwvdT1Na4UeGAL8fGXqG0op+NkVtGrLUmQ4dMw9ZBdTxeGs+/odnWyvAv/IwFb9by6gVTgvTMVNsFbCBUNl8609x733Z0JkOHTOLrAL8yKVu1qew2HZFU9Ax859VQApz0GJ9wIbONdsVTUHHzJBVwAl6u+dbP0ZP3IbOvBsyGzTMqFariBc589gIqfOzrQ2TPP8ykdU2hCx1pkOnM2esAsZJB4qpf6CJnkgK8yKQSmFePEIsUkzdgxMYC6xlRMRpYRoTwKcLwXsJyHfMtY9RCJQgXko4ITnvzOSIccgxz5lIrVMjoD1oGnuAy3pcS1yGzF4dop6ZyfF8pxbXGjt1xn9w+2GlwvXA865y3AzDbAiVfVglpczLUyqQFCLPp5TIGNIH4PWY6YyUphBi3J9MJlb29Y00gXGD7tZMPnAOKHWVB5DXUyOhJz8Pey+NTtiWV8IQirhXql874/G4+09eFV4DRACPfg7UPbu+/zK/4VxcN0MGDrv8oQGIbS2g9rlJsfDHf1pcGAEQHtMscW8GgMFqwMZYPxPegWsDRW+e/NmNugmmIWUsO2ZETQbYhI0h9BZa2kgveefk1yKRNKyj54BSKeHxNMfj8cEsdQYQ22LAW04o+XV/ngq2xK9qKioFHXmGcSAWi/0NOflxHm4EnrUKy2sf6ly+4YsjGgrjSqm/8HrPxmKxWy5ur0YyK2wXycxalectnCtAJpKJJTuOf2c3oVIig1BRJWVbKBTqiEQimdnist8ZwNP3caVRXPDNHPnV4r2nGwpq/+iaL4dSIi0xe4SUbabH0xmNRpNWujkxA+Dr3VefXp4/YzoIRmK/FW9u/GEO2jhCdEu44AsGO9ra2lJONHNxzABIG2OvyGH/GrMwELrxzHMlcaVox/Gfbo5TMIZSXV4p2x9ZtSra1NSk/WbLWWcAAmdrVk88uvQX5RE+Mqax7PXmz+443TUEjCJE1AMXnuvp6aoBM5d1ZA0LWnd/IJL7x+/6qqquvKxsbXl5eQk53sTbAv8DzFJ5Mvw8/r8AAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQLSURBVFiF3ZnPT1xVHMU/983QYcbqlNZoCmEkqCxMtJsm+gfQ2KaJqaYurDHaZeO2dmH8lZg06qZLtYY0RhqkKFrd1KYJE2VhqiQG5YftDAwEShFpARmGN8y84wIxhQLvx8xA0pPczbzv955z7u97B+4hmLLXKN0PHASeA54A9gJ7gGngBtAPfAdcwpj5svOXBVIN0odIC0jyULJIHyDt2m7pqyEdRZr2aGJtmUZ6YbstgGSQ3kFyAhpZKQ7S20jlH/Y+zLxboom15a3tMnK0DD2ythSRnt9qI7tKmCNu5RZSTRBZVkA7bwK7A+a6oQZ4I0ii/wm3vI9MAtEghB6xADzsdx8K0jMH8WAkBgudkLRhVJC3YfQrSEYh54EjBjwbQJtPSF+4jfuYlJ2Rftc6uC31Rr1trJ9vhZlf3YR0Sl3rGVnBBanLg5lftsLMDTchtjSymRlbyngwM+5XWpAFwAZ2bBoCeZcY20DEhSmPMW4xqxBkAfjHLSAPN12+T3jgmfOs6D8EMTPpFvA9DG32/RvIeODZtEHKA+mc23iPSgu3pd715sstqbdaynmYMy1+pQXpmS63gBxEa+GxDkjmYQTI52GkHZK18PgiVHvgSfoVFmQB2AmMAXHfud4xC9RhTNZPkv+eWT5inPOd5w8tfo0Ex/IVebJCp+bJoKfmUgwdq5CZY0EllXZNlc4DgcnvQrHYlmhsfN2yrEhEitrGRKokUyhaVQDhkLNUsCzHGJPbYdvZJ8fHZzqguJJeqpk48BvQUFI9gDU/P5M4dOjT8NjYond6UzQiE7b002Amkwl6OVuGMbPAK9zROoEgac/p0xf9GFmmVwhLjxbg1YaGhobSzCzX2A18VEoVOy9f7o63tWVKURFynLryPO1IYaAbeNpvanhiYuKRAwdaTDYbuHcdcBw4W3rPABhTAF7GwyF0VdrS0tJDp059XYoRpLwJhTozmczN8pgBMCYNnPSTEm9tvRTr7p4OyCjBQKRY/CSdTv8BlXk4vwC86BYW6e8frD98uD0AQ05SL+FwTzqd/uvOD5Uw86Cx7WuKRDbcxa1sNlt35MjHkVTK05FFMgWMUrKsvkQiMZBMJgvrxYWDat4QxvxtjY+/Vqyt/Zb1G0u7z5y56GZEMksWzrCxrD4nHBpMpVI2wNDQxlelij1UV42Onl+qr7/rdBBLJn+uPX78hw3SchgzZMG1qlhsoK+vL++Hs3Kv7sPD1VY8/qdTU5NY+Sk0NTWVaG4+G5qb+3+YCBaQroctq/+p/ftTHR0dgVe2iv6FEO3peWZx374fFQpVUSgU95448dl9V65MArMYkwrBtZeGh6+/B04ldZQN1Vevvm9sO/fAl+2tTY2NzU1NTXVUuBHvCfwLna16k1MlopgAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATaSURBVFiF3VhdbBRVFP7Ondlddvqz/aERARtFMUos4YFIH3iAxESICfCABtqkCRiJtjGRBBODivhH1PigEovFGKhJXWktpdgQfDCugEFrCEhbitvdditSKIhtge52d3bu8YE2AWx7d2a2D/o97jnf+c43996Zsxf4H4GyXXD25ta8MSOxiiWvAWERCPeCUQzCNYAGwHyOGIf90I5erX3mZja1s2Ym8EJDYZq0V0D8IgB/BpQ4gN0ez9h7wx9tGs5GD1kxk1sdXM+EOgBFDuh/E9NzN2s3HHTbh3BHZzJqvt7BhEY4MwIARUz8jVEdfB1gVw9Xc0M2qh95gwhvwv0KExFWeh7vTJu/Nh9zXMQpcXxrNbqpMQmkBNYnPt3Y4oTsqJGCl/YVmOasKJxvrekwpEv54MieyiG7REdnxjR92zEzRgCgMC3Ey06Itldm9ubWvIQ/PojMXr9OETdYu8fud0i3qzJmJFaB1UZyvHp8b1V5++qyuQu8mpiTsuTlIx0DvVvqTy6Lm5aKbyRE+kkAzXZ6s73NWPIaVU6OV4+Hd63tXbtk/gqvJkoBeL2aKF23ZP6K8LvrIoZHSyh1AKXO3bB/ZgQ9qkrZW1XeHpjleWyyWIHhKaurKv9FqcO0yHZrdgkAz1VlrC6bu2C6+FOL5z2QgZBS527YN8MoVqV4NTHHTXwcszPuaRxOXs03VAkpS15WxC9loHM9447G4WSbDaoyjnQM9E4X//bMhZhShjDtA5kMDsxQuypjS/3JZcNxs2Oy2HA81fF8Q3u5Uoah1LkbDs4M/aBKiZuW/+FXDz3UcvpCKGXJfgCplCX7m0/1hxa+1rowkbJmZaAUstua7QmgpLoxN07WnwACdrk2MDLqN+fhw6pROyTbK3NrxKB9dnn2wF/YNQI4HDR1ab0F4IoTbga4okt+xwnRkZmRPZVDIGx1wlWCsNXJ+H+L6gI5NcEGABVuatwBtoLFbdtrhBA+H7M/SeTzMFPaEh4A0DVppoWQRJTwJpOjZRcvDjcB1gTdlZnCLY2BlMc6A+B+dy4AkU4Olxz7uE4khsYy5TCTRYyYLvj4+Vgs5vovb171V8slUQhu7hMYHOhs+dL4oz3mtEIaqHd5OwPcqK04AeADNzX8g10nXBgBANKknOfaDACMlszZAUA91k8CbWzkUuBs049u9CUgLSGiWTGDnSvTuqBKgJVD6O0gaZmB35qbyUxa6uwpwJwiTTsYi8UuZ8cMgJHdG6JMYpsdjr//5FHfXz3XHEoyA90+y/osGo12AjNwcZ5TE2wE8LQqz3v90vni458ccCCRYOaz0PVT0Wj0jg+37QsNFYTJ1axZT7DQC6fOSY7mnw62ZVqTmdIgjrAQXaWlpd2hUCg9WV7WVwYA8jbXrpH+wkNT1Of8c23BnL6feqarwUymgOwjIbqkpp2PRCJJle6MmAGA/E21DZZR+K/pwHf195+L2vd/NwUtAaJeAYQ9htHd1dWVsqOZ9W02gevsfzY3NbqcvTmlE7+J5M2rgdMHvr89j4E4mHt0Ic4tXro00tTU5PjNNmMrAwBFle+XpwLzjzEJD6RlFZ1q+Nx3pXsQwAiIIhoQ3tjX17MTkNnQm1EzAFBQsettM3DfNv/FM81FnS37oevd4XB4AADPtPZ/Gv8AkvXQkIP4nXQAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASpSURBVFiF3ZhbbBRlFMd/3ze7bXdp0yKlQI2NIqZlK8YHjDxgFEIikVhKAibeooH4otFIosFLgvdEn9QQHojxAkoIFChRMWBCXC5GxRgb6sJSWrrlDgXbUrrbndmZ44Mlwdru7MxsH/T/ON/5n//5z5n55swH/yOoomesb6rAMBaDNAExYAYwBbiC4hxwFORrKNlDouVaMaWLZ2bOksk44VeA5xEiBTDSiFpHqbxP267+YpRQHDONS5cjagNwkw/2n2j1DH+07gxahhGQr2hcthZhPRD1mSOC8Ag1DQ69yYNBiglmJtb8BvAWwTusgAVUN+S4nDzgN4l/M41Ll4NaTzHfO8UDVNe3c/l40h/dD+5ursKkC3/viBv6MKzbad/d55WofclZ8hoTYwRgMnb4ZT9E752pb6ogpC8WuP36RRoVnub1O+S9M4axuBAj0bLS9M6P18SzbdtPSaLVzLZtP7X9ozXxSKQkU4BKFKwHvZbmvTOx5i+BJ/JWUlaaPrf/s5OV5dE7R6/1Dw611y5YOSuTMfPfEKU2kWh9yktp3jujmO0W8tUHLx4eywhAVcWkORvfe+EXVx1HYl5L825GqHULWXL/PTPzrS9dOO82Vx3lrjMafnazKW4BJWFjepD1EVQXXNEI/JgZdAswLfuCy/r5AnSuFlzRCPyYuegW8E3815P51lv3/ZQqQCfvDRkLfswcdgt48tUP7+0fHGofa61v4Fr706+vm1cMndHwsQHID24hmYwZqV2wclbL3h/jpmX3AKZp2T1b9xyK1y5cdcfwsFnmrkPca2nevzONK8rBOoNQ6ZlbKBQDGOmbOfL9kBea9878PWJ87pnnBcKnXo2A30FTW28Dl3xx3XEJw3rXD9GfmfbdfShZ7YvrBiWr/Yz/EPTHKta8GXgsUI4bIc6WuqG257TWpaUikaxSpWERlbN1GCBkOFZOa0cplSnJZofmnD3b3wL2dXowMzNXVFJmtQG3BsoDaJz+uuHkhpBjDhfKEVG2ElIhLQeTqVQq+C9v47L5IHEkyHmCyFTrzKZK60rKb4IcbAx6OgO9yVNMbSgD7vObotweOFRtnv89QBVKOU6vvw1gNGr61wLuY/0YCIl5fpp5en8QeQccW+uu4piJx3NoHqeAIfRGKLBqzNM7lNi2e/Q4EDGVYexMpVIXgj9m13Ep2UdNwxXg4UIpVVbvd5W5y3mH0jwQgWSZbW873tPTAxNxcB5r3gascAsrdTLJW4aPb/WhkBGRI4RCv3V1df3jwx3ykSw/cvazKqQWCXryeCFa7KEaq+fbQlOKqBxKOkXrRF1d3bF4PJ4bK674nQGM+iVNthHeNU5+qTbPbqnK9Z7Il0NEWRqnW2mdcAwj2dnZmXXTnRAzAOHYQ5stSv41HURzgz/Xml17x6FlUOqkho5wNHoskUiYXjSL/5iNwEqnV+mInu+oUN31a4bkeqdlU/tuvIUCaUROhLQ+etfcuZ0tLS2+d7YJ6wxAZPaiecO6/IAIYUTsGWb3J5PsqxeBAZTqNKDj0e7uE2+CUwy9CTUDUFa/6J2sEX2pwurfMd0+8wWh0LGOjo5zgEy09n8afwEcs7T5cvn0GwAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS2SURBVFiF3VhbTBxVGP7+szPscmkq1FZqE2pvUYvYwpK0SUla0ib0iaf6oD6a+qDxoUlNvMTthZp4ifHBB22M8ZI0jVCqVk0gbeOKxAsJpAG3ENiBxdiWSypQdmd3Znbm9wGaCAKzc2b3Qb/HOf/3ff835+TMmQP8j0D5FjxwYGhdJlN0lIibmbEbwGYAGwDcBXCbmW8KIa6k0+mOWKw6mU/vvIWpqRkvV9XsK0R4CUBxDhQdwAe2Ld66cWPbbD56yEuY+vrRY8x8HkCFBP0vZhzv69tx2W8fwh+dKRzWIszcCrkgAFBBhEvhcPwNgH29XF9h6upGIwDOwP8ME0Bnw2HtdZ8iclhcWq1+NFaAw8zH+vp2fiVDlmpk796xBwIBR4P80loLM6ap7BgY2DrjlSi1zBSFX0NhggBAeVFR9mUZoueZWfiOqJPIbfuVhZ7JZB7y+h1SvLpkMkVHAXYNEgoJvaVlY09DQ8l2VaVKy+KJri59NBKZ2mcYrvyS4uJQE4B2L715XmZE3OxWEwoJvaNj62hjY+khVaUqAEWqSlWHD5ce6uzcGg8GKe2mwUyuPsvhOQwzHneraWnZ2FNWRk+sNFZWJmrOnNn0m5sGEe/22pvMBvCwW0FDQ8n2tcYPHizZ5qbBzK4+yyETZoNbgapSpZ/xBdCDube0AIkwNO9WYVk8sfY47uRgdC/nlhYhEYYn3Sq6uvTRtcaj0VQiB6M1X8hKkFlmPW4FkcjUvmTSGVhpbH7eGTh1amq/mwazu89yyGzNP7jVGAYXNzWN77x2LRW1LB4HYFoWj1+9moo2NY3vMk0OuTYmKOq5N6+E6upYWSgU+hPAeq9cD5izrNIt/f2VKS8kzzMTi1UnifCpV55HfOI1CCB50DQM5SyAKRluDpgyTeWcDFEqzOLx/IQMNweckDn+Az5/rMJh7QKAZ/xoLIV9cXr6yItCiGCQudggCqrMlLWFCgBKwLGyQjhElC4yjFTNrVuzbYB9n+03zHoANwA84isDAGZ9Njl7/LzjTGRy55BNjIQi+KehRCLh+5c3HNYaAEQBBORVmPXU+19Yme8TsgJZ4HOftzNAb++ObgDv+NGwzO5uH0EAgAKOs8V3GABYt+6PCADXY/1KYGf6Tjr59o9+/B3AsYXQ8hImGm3MAs6zAFwPoUthWXrq3XbmtO1euwqYTQoELicSiYm8hAGA3t5dGjOf9MIxMt92ZM3eu5KWzMBg0LY/0jTtd6AAF+fhsNYK4Cm3OierDc3PPf+lhEWamfuhKL2api35cHu+0HBH9gVm+whRsHy1Cnb0VDJ57rtcFZkpC+I4CxGrqqoajEaj2ZXq8j4zAFBb+0uzEJu+XkWfM6kPLxqZSyNraTCTJeCMkRAxJxAYisfjhptvQcIAQG1t9wUhNv/rdGCZPb/q8692rkJLg2hUAMNqSclgLBYzvXgWYJktYGbGeq6iYq6BaH3V/WeOMzOdTr55/Z91DOhgHlGEuPlkfX28ra1Nemcr2MwAQF3dlf1Ej3UBARWwbf3e6Y8t6+dJAHMgigeA4afHxkZOA04+/AoaBgD27PmmRVEePWka19sN/b3PoCiDw8PDtwFwob3/0/gbh/Lm30zcQi4AAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASdSURBVFiF3ZhbbBRVHMZ/58xeSgNCqRegsamt1EhEXwjw4AMmJGpAEhNoVOItxgdFQ1C5qqQiKiVRHtQIGuKDXNItFJGSoFFYpIltExIj9EK7WxbTUi7BFqHbTndm/r60CWDp7MxsX/ge9/y/7/t/55ydOXPgDoLKtWDVQZnkDPGUgiUIs4DpQCFwBTgv0KLhpwE4UlmhrufSO2dhPtstBSrEOhRvAxOyoKSV4stIiC2rnlV9ueghJ2GqYrJUYAcw1Qf9H6V4fe0yVRu0Dx2ELCJqS0w2CsTwFwRgqgj7qqrlQxEJNLmBwmzdx0bgI4KvsBLFpqp9vB9IxC9xeGvFgmiMAkdg6foKdcAP2Vcj2w7IFDNDEv9bayz0Soay9ctVr1eir202lGED4xMEoIAQq/0QPa9M1UGZJCYXye7x6xfpQbjP63so5NVl+IXoGiQSIr14Lk1l0ynVmmmOw4WOHjrrGpln2a78/KjwJLDfS2+et5mCJW41kRDpFYvpnFnEAq0pBiJaU/xQEQveeoZEyGAgFz63wvt/RnjYrWTxXJoiYR4ZbSwaZvaiuTS6+ihmeW3NzwNghltB2XRKxxovn8EDufC5FX7CFLqKaqYFGR/G3Vl3NKLrlQBccytwHC6MOS70ZOHzb9YdDcNPmItuBR09dI413t5Nyk1DMfaEjAY/YZrcCuoamWdmODXa2OAQpw43Md9NQ5S7z63wHkZxzK3Espnw1SEebOsi7jicA4Ych3NtXcS/rmOmZZPnaiPEvbfmEZUxmZgHXcBkr1wPuGoMUrT6JdXvheR5ZSor1HWE773yPGKn1yDg86ApFpuAS364WeCSZNjsh+grzPDxfJUfbhZY5ef4DwE/rLbEZDfwQhCNG+HY9t7ta0tXaK2jUZEJplLRsIiybB0GCBlOxtLaUUoNREyzf3Z3d18N2CP8oGEmA38CJYFSABnzel/tF0/vuNbbNZgtR0TZSkiFtJxoS6VSge4A1lWoq8CL3DA7/iDScPjTg16CACglBlrKLHi5pKSkJFAYgHUVql6ErUE0Uqd/qT/TsDcVQEIZjlMUOAyAeS8bIYtj/Sjo7+vpOV797vEg/g44ttbJnISpfEJZ2mE5WRxCb2rCzmSO16zZnzH7/W9TkSFlGLWpVOpCTsIArHlOJQXe88Jp+WPXkfMd9Vd8WopAa9S2tyeTydMwHhfnMYkJLHOru9LT0nZg26JqHxYDIvIXodDJZDJ504vb84WGGwyLN00xFxrhaMHtaiyzv//onpV12WqKKAslCdG6ubi4uDUej1uj1eV8ZQA++LZ7ycQpM368jb40HNq89/SJnR1jaYiojMY5q7RudgyjLZFImG6+4xIGYMM3f+++q/D+/50Ous7EG47sfPXn29AGUKpTQ3s4P7+1ubl5yItnzrfZCCJ59muD6d7H8/ILikd+S1+7fPnYnpW/3VgnkEakI6R1y6Nz5iRqamp8P9nGbWUA3vn85Px7ih77XWkj7NiWffSHN75Ltfx6EbiKUgkD2p8/e7ajEpzx7CNnWLm16eNP9pgDr6yu3lVeWrqwvLy8iHGexDsC/wHqq7fSQTg4DwAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARmSURBVFiF3ZhfbBRVFMZ/d2Z3y1aatoCAbVyxahON6AuJPPDQGIIakhojPihqJCIoxBDinxgJTUUSlVcjYTENYNo0UCiKRKrRdFUetJGEWAuE7rZLA+VPg22Fbdk/M8cHtkmtbWfmzu4L3+Pc833nfPfczD0zcAdBFVqwCSnLwdNAPfAIcA8wH7gODAJnBI5Z0LEZdbOQuQtmZjdSacIHwNtA2AVlTMHnQfh0HWqkEDUUxMweZI2CKDBPg/63wBtvotr91mH4IQui9iINCg6hZwRgnoLDUWS7IL4215eZvdAg8BH+O6yAHVHY5ldEC/mjdciPxjSwFazZgDqqQ9YqZB9SkYEE+kdrNgxb8MAm1LBXotYxy8CHFMcIQKUB7+kQPXcmf49cxd3rVxdjOVjk9R7y3Jn8hehoJFDK2Kp2YuvTDGwQMuvTDKw6TCwYZtxFmtIgPOW1Np1jVu8UEChl7OVB+pY8R50RIgKEjBCRJc9Tt3aQuEtDjnmmQsfMw04BTzbTFSrn0enWQhUsrTvA704acnsU8gQdM1VOAZHV1My2ft+z3F+IPFOhY2a+o2iIxX7W81jguqIJXa8E4IZTgJ3hisP6ZRd5/nFdUR46Zq46BQx8S99s6/1HSbrIM+uGTAfPZgS6nGI6X+GJzAjd062lh+mOvcZyF6kc80yFTmc6nQKy44Rbqniwv42YneECkLEzXEgcJNZcxUPWLeY4aSiIeS3M8wTwBTI3ABeBcq9cDxgNQ/WrqJQXkufO5EeMfV55XqCgyasR0Bw0LdgBXNPhusC1HOzUIWqZyY/nW3W4LrBVZ/wHnx9WUaQFeMmPxmTYWK2fRGo2G4ZRUiISTitVEhRROcsIAgRMO5szDFspNR5Kp1NLL10aaQNrgu/XTDlwGljiywWQMW6O7K96JjoauHjLLUdEWUpIBgz59VwymfT9yRtFVnD7NWrqq4h0zN/2VXdZa1JXIAcHfP3QANiIOimwy49G710/nPRhBECZtl3t2wzAFWgA57F+OtwwL18+seCdn/3kt8G2DCNREDONqBywFhdD6GRYKpv97u73j6RVynKOngEiGWWa7clk8kpBzABsRCWAd71wTpc1dwzMOXldM6UInC2xrD2JROIvKMKP8yhyCHjBKW4odObc/qrVBzVSjIvInwQCpxKJxH8u7oCGmBM25VR6ZUBKKmcKyKhU6puFW467FRRROZTExTB6IpHI2VgslpsuruCdAfjMvFRfYVV9PYO+dFbubP2jvKl3Ng0RlTWw+5Vh9NimeS4ej6ed8hbFDMCu4EBLefbe/00HfeHYb0cWrft+Bto4SvUZcD5YWnq2p6cn4yVnMY4ZAGNZ6/WQMbwibFdGJp6lzKGh4wu2/DQ5TmAMkd6AYZx5bNmyeFtbm/abrWidAWgMn1q++NbjvygxgzY569jCt77sLf3xKjCKUnETzr/Y39/bCHYx6ygYts/p+ni3So9vnnuwubamZmVtbW01Rd7EOwL/Ai1BeTIkgAbWAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQMSURBVFiF3ZnLT1xlGIef78zAMFgCeGscLCGoLEy0myb6B9SIMTXW1IU1Rk3cGF16SYy3xMRUN8aVWkMaY0lDUbS6qbcwKjGmSmKwXKQzMBAoINICMgxnLufnoqWhCJzLzEDSX/Ju5rzved/nu39n4BqSKfULhWqAVuAh4E7gFuAGYA44DwwAXwGnDWap1PlLIqF6oXeEloXkwdJCR4Tqdrr2qyR0SGjOI8R6mxN6ZKcZEDJCrws5AUFWzRF6Tajkw94PzBtFQqy3V3cK5FAJemS9FYQObjdIXRFzxM0uCNUHqcsKyPMKcH3AWDfVAy8GCfQ94S7vIzNANEhCj1oGdvvdh4L0TCteQKpZpos4NuOILDbjfEacKBkPOaqB+wPU5k9Cn7qO+2qlNa8/tZEuqk9RTxvrJ9sB87trIV3q3hBkVSfV7QHmt+2AOe9aiK2xLWFspTzATPqtLcgCYAOVLk5ZFx8bQ8QlVdZg3HyuUpAF4F9XjyzTLs+nPORZ9FjPFQWBmXH1+JqRLZ9/QcpDnq0bpBQSOuY63qNa1kX1bThfLqhPVcp4mDNtfmsL0jPdrh4ZosS4nU7iZBkDsmQZo4M4Me5ghSoPeeJ+CwuyAOwCJoBav7E+tAA0GEzaT5Dvnrl8xDjmN86n2vyCBJYuXZFnynRqngl6ai4G6HCZYA4Hramoa6pQOxA4+XoVKJxobmx+zrKsSESK2sZEKiSTL1gVAOGQk8tblmOMyVTadvquycn5TiisxhcLUwv8ATQVRQEsWUvzB2IPfDQRnljxnF+mYEQqbOnnoVQqFfRyBoDBLABPsKZ1gkhIR+rfPuUHBMAYhbB0Wx6ebGpqaioKBsBgeoB3i3nHd9d929NRcyJVTBkhx2koyacdoTDQA9zjN3Y6NDXVeut9bWmTDty7DjgOHC26ZwAMJg88jpdD6BrlTC738k0vfV4MCFLWhEJdqVRquiQwAAaTBF7wE9Nec/z0L1U9cwFTSjAYKRQ+TCaTZy/VUGIJnQQedfMbqhwYOhB7sCNAioykPsLh3mQy+ffaB+WAudE29nBEkU138WWTTh9sePiDkXDC05FFMnmMErKs/sbGxsF4PJ7fyC8ctOjNZDD/TFqTT8UKsS/ZuLH0ft17p9xAJJOzcEaNZfU74dBQIpGwAUZGNr8qle1D9XjFePue3J7/nQ5+jMZ/fWb3099sEpbBmBELhiuqqwf7+/uzfnKWDWaU0apaq/aveqe+cfW32dDsbGts/9HF0OKVYSJYRjoXtqyBu/ftS3R2dgZe2cr6F0JvtPfevSt7fwopVJEnX3j+5mc//qH6+xlgAWMSIRh+bHT03JvglLOOkulM1Zm3bGNnOnZ1HG9pbt7f0tLSQJkb8ZrQf5kyepAtajIBAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASoSURBVFiF3VhNbFRVFP7OffMY6EjnvYGMrW2atmijRNyUBJcsTGRFQkJTKwpuXBliSDQxGolVEo0rjAuBhLCRGFuL4AoXTauWaBtNTHHoD/NHImXoOH2vY9+Uzvs5blpSoO37m7rgW777feec794zb867wGMEqnXAYrG4XQhxgIgOAtgNoBHADgAlADMAbjDzD7ZtX00mkwu1zF0zM7quq47jvAfgOIBtHiQVAF8S0Weqquq1qKEmZkql0mEiOgsgEUA+R0Rvqqp6KWwdIoyYmUnTtJNE1IdgRgAgwczfaZr2ITOH2txQZnRdP8nMvQh/wsTMH+u6/kGoIEGFy63VFybGGnCI6LCqqt8HEQcqRNM0hZkzCN5aG4YXQuxSFEXzKwzUZsz8PjbHCACojuO8G0To+2SKxeJ2SZLuwtvrNygqlmU96fd/KOI3ixDiADwYIaJKLBYbk2W5HUADgIJpmlnDMPYxs5u+TpKklwEM+KrND3m5yIMeOJV4PJ6VZXk/gBYAWwC0yLK8Px6Pp4losRZ5HkaQ38xzboRYLDZGRM+vtUZEe2Kx2KhbDGbe7bewIGaeciMst9ZG621uMYjINc/DCGJmhwdOQ8h1ANjpgfMAgpj51wOn4LJ+x0OMsgfOAwhi5q4bwTTNrMt63kMetw15BL7NMPOYG2f59Xt9Hf31SqXyolsMInLN8zB8mxFCDLlxmHnb/Pz806ZpDgO4BaAK4JZpmsPlcvkZx3G2ekg17Lc23xPA7OzsE5FI5G8Acb9aH5ivVqtNDQ0Nhh+R75NJJpMLzHzBr84PiOi8XyNAwKlZ13XVtu1JIkoG0W8EZp6VJOnZ/21qVhRFI6ITQbRuIKITQYwAIT+s5ubmLgJ4NUyM1bBt+5vOzs63hBDRKPO2JaKozEyWLWQAiEiOaQnhENHilqUlY8/t23o/YK/ow5qJA/gTQGsoFwAMw9CPdHefnZmZuedVw0w2MfIRwb9M5vP5UHcAiURiHsDrWLU7QcDM/MXp01f8GAEAIpYgeJcFHGttbW0NZQYAEonECIDPw8T4aWho5PLAQD5ECJIcp6kmlxHMHNE0bQTAPr/au4XCnVe6us4bhhH4dB3AcYBzoU8GAIjIEkIcgbch9D4syzJ7e3sHwhgBc5Uk6VI+ny/UxAwAKIqSAfCOH01/X9/V30dHSwFTMgMTUds+k8lk/gI24eJc07Q+Zu5y401PTU2+1tPzbYAUi8w8jkjkj0wmM7t6oeZmyuXyTsMwpqPRqLpuNZWKcezo0a/y2aynkYWZLBCnWYhUS0vLxPDwsLUWz/ftjBvq6+v/SaVSbzQ2Nl7G2pvF586cueJmhJlMASdHQqSciDSZTqeXACCbXf9TqeYns4Lx8fGLzc3Nj0wHv1679tvbx4//uI5sEURZAUzLdXUTqVSq6ifnppnJ5XJbmXlKUZSWlWelUqnYdejQuYWFhfttwkAFzDcjQtx4Ye/edH9/f+A3W83bbAVtbW33hoaGuuvr638WQsiWZdmfnjo1sGxkHkRpCZjuyeVufgQ4ADCVy21WObXB4ODgJ4VCYfHC+Qtfd7S3v9TR0dGETeyIxwb/Abxf6DIUZxAeAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS9SURBVFiF3VhNbFRVFP7Ond9OlBnApihJM1N0EqltQzoJLFxAQiKrruhCjXFh3GhcEGowGomiJEhYUJtUiTFCGEJsBX9CU2pQqzZB6WtLOgw0MNN5TUSggtNp6Tw6fe8dNyWp0Pa9d9/Mhm8593zfOd+9J/educAjBCq34MDAwOPBYHAHM7cQ0UYATwJYC+AOgL+J6LJpmj+EQqGz9fX1d8uZu2xmRkdHV8/Pz7/DzG8BqLJBKQLo8Hg8BzZt2jRVjhrKYmZwcHAnER0BsEaC/i8Rvd7c3HzabR3CDZmZSVGUvUTUBTkjALCGmb9RFOV9Zna1ua7MDA8P7wXwIdyfMAHYNzQ09J5bESkstFaXG40lYBLRzubm5m9lyFKFjIyMRAzDyEK+tVZC3u/3b2hsbMw7JUq1ma7r76IyRgBgdalUeluG6PhkFr4jt2Dv+pVFsaqqqsbpd8jrNEswGNwBG0aEEMVYLHYhHA7XEdE6Zr5ZKBTGc7ncZtM0rfihYrH4AoBTTmpz3GbM3GIpKkSxqalpPBKJbCWiWgB+IqqNRCJbGxoaMkIIzUqDiCzzPJTXKYGInrWKicViF4QQzy215vV6G6LR6J9WGsy80WltMhfAU1YB4XC4bqX1SCQSs9IgIss8D0LGzFobhaxzs76AJ2xXtAAZMzNWAcx802L9ho0807YrWoCMmVtWAYVCYXyl9ampKdVGnhU3ZCnImLlgFZDL5Tbrup5aak3X9ZSqqlusNIjIMs+DkLmaf7GKMU2zKpVKPZ3P5/uZeQJAiZkn8vl8fyqVesY0zaANjX6ntTmeANLp9GOapv0FIOyU6wAFn8+3vqmpadYJyfHJ1NfX32Xmr5zyHOJLp0YAyUEzEAjsAzApw7WBSb/f/7EMUcrMwni+S4ZrA7tkxn/A5R8rRVFOAHjJjcZiGIZxsrW19U0hRCDAXDVHFPAxk24IHwB4Pea8LoRJRJp/bm624fr1qW7AuM93ayYM4CKAqCsXADRNm9qze/eRycnJe3Y5zGQQQ/UK/n1MVVVXbwCJRKIA4BUs2h0ZMDMfP3bseydGAICIPRC8QQdejUajUVdmACCRSAwAOOhGQxkcHPj53DnVhQR5THO9azMAMDMzsxeA5Vi/FO7cvn2js6PjVzf5TcA0hMiWxcy2bdt0AC/DxhC6GLquz3/W2XlK0zT5NmUukcdzWlXVm2UxAwCJRCJLRG1OOD/29Z29NDp6RzIlM3AlYBifZ7PZS0AFHs4VRekC0GoVN6GqY3va2r6WSKEx8yi83qFsNvu/D7fjBw0beKNUKm33+/2rlwu4p2mz7e3tZ+wKMpMO4gwLka6trb3S39+vLxVX9pMBgN7e3pbq6urvltHn40ePnuw5c+baShrMNC9g5kiItOnxjGUymTmrvBUxAwA9PT0nampqHpoOLo6M/HFg//6+ZWgaiMYFcNUXCl1Jp9MlJzkr0WYAgFAo9Nr09PTzq1atqr3/W6FQ+OfTw4d/WhzHQBHM17xCXG5MJDLd3d3SN1vFTgYAksnklng8/psQwqfrunH40KEvFEW5BaAAoowHuPpiLnftA8CsZB1lQzKZ/Oj8+fPawU8OJuN1ddvj8fh6VHgTHwn8B/S71Ufd4vUbAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATTSURBVFiF3VhPTBRXHP7e2xmBTYwgDXVdQ6m2hxrsyaweeoCkSXtQExOZ0JLSQ9NLmx5MbGya1P49NCRoQg9UG1MTA5RZEbegsYemVE1gMU1JBRZhF9dkccHGAkUXZmfe/HooJJTCzs6b5dB+yV7m/b7v9/veezvvNw/4H4EVWjASiWzNZrOvAjhCRHsBBACUA3gE4AGAUQDfA7iuadrjQuYumJm2trYyRVE+YIy9B6AkD0qGMfaVoihfHj16dK4QNRTEjK7rxwCcBbBdgv4HY+zturq6y17r4F7IRMR0XT8FQIecEQDYTkSXOjs7PyIiT5Pr80Kurq7+GMCn8L7CjDFWG4vFrHA4fENaRJa4vLV0LxrrwAZwTNO0bhmyVCHd3d2lpmkmIL+1cmHWNM09DQ0Ns26JUv8Z0zQ/xOYYAYAyRVHelyG6XplIJLLVMIwZ5Pf6lUUGwNNuzyHFbZblA9HRiKIomVAoNBgIBHZzznfYtj2dTqcno9HoASGEE99PRK8A6HJTm8w2O+IUoChK5tChQ5PBYLCGc14JYAvnvDIYDNYcPnw47vP5FguRZy1cmyGiF5xiQqHQoKqq1euNqaq6LxQKRZ00GGN73dYmszI7nQICgcDunAI7dz5biDxrIWOm3FGU8x1expfxVN4Vrei6JQBYcAqwbXs61zgRpfPI82feFS1DxsyMU0A6nZ7MNT41NZXMI0/OCVkPMmYGnQKi0egB0zTvrDeWzWbvDA4OHnTSYIw55lkL12YYYz85xQghSnp6ep5LpVJ9tm3fB5C1bft+KpXq6+3tfV4IUeykQUR9bmtzfWgS0WUALQC25YoTQpT09/fXrHr0zPIvH8wvLS25/r5xvTKapj0mom/d8lzifGNj4xO3JKlG07KszwA8lOHmgYemaX4hQ5Qys9yeH5fh5oHjMu0/4PHDStf1NgCve9FYDSFEx8mTJ9/lnBcVEZUYjBWpRMwSXAUAxWebFuc2Y2xxi2E82Tc1NRcGxArfq5ltAIYAVHlyAcAwjLmW06fPzs7OLuXLIWKCEZIKp5tjyWTS04WGpmnzAN7AqtmRBF27ejXixggAMEY+cNpjAW9WVVVVeTIDAJqm3SKiJi8ao8PDt24PDCQ9SDCfbQc9mwGAioqKUwAc2/r1MD83lw53dv7sJb8N2ILzREHM1NbWWrZtNyCPJnQ1hBDmpXC4yzAM+W1KlGU+3+VkMjldEDMAUF9fnwBwwg0n2t9/PTEx8UgyJREQKxLi60QiMQxswsW5rus6gDqnuOl0eqzlzJlOiRSLRPQbFOWXRCLxj4PbdW/mBMuy3iGil1VVLdsoJmsYTzra23vz1SRiFhjFifORysrKWF9fn7VeXMFXBgDOnTt3pLS09MoG+nStp6fj1s2bE7k0iJjJYd9jnI/YPt9YPB43nPJuihkAaG1tbSsvL/9XdzB+9+7AhfPnf9iAtgjGJjkwrvr9sZGRkaybnAXfZisoLi5+K5PJvOT3+ytXni0sLPz+XXv7j6vjCMiAaELhfPTF/fvj4XBY+s22aSsDAM3NzQeDweANzrkqhBAdFy9+Mzo6OgNgHozFfcD4a/fuTXzy94W5Z2yqGQBoamr6fNeuXSeGfh3qutJ16QIUJTY+Pv4AAG127v80/gIGr+iWe+FGsAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAToSURBVFiF3VhdbFNlGH7ec05/F6IUE9GLIYgXXYpXJBBZE0xM9EausIl6ObzBGSHRdnEJ1p+RhnBBNF4YY/xJFigNaIwxLpFYB2WwMWCW0bG1W7eEdUBwQ0fb7fy83nQJjK3nnO90F/okvTnf+7zP+/Q75/ve7wP+R6BGJ4xGo+skSXqFmfcAaAHwFIANAO4CmCai64Zh/OT3+3+Nx+PzjdRumJmOjo71zNwB4B0APguUMjN/vri4mDh27NhcI2poiJloNLqXiL4EEBCg/8XMbx05cuS00zpkh3yKxWKHiOgLAH7BHD4iiuzatcvIZDJnnRTjyEw0Gv2QiD6C8xkmInqxtbVVy2QyvcJJRIm1V+ukkxwrwCCivYlE4gcRslAhBw4ceNzj8RQg9o2YYZaInk0kErN2iZKImtvt/gBrYwQA1gN4X4Roe2ai0eg6IroFa8uvKMo+n+9Ju/uQYleltiGaGnG73eVIJNIfDAa3yLK8Udf1mVwuN55MJneoqmrG91er1ZcBnLJVm51gAKjt7HXhdrvLnZ2d46FQaLcsy80A3LIsN4dCod2dnZ15l8tVaYTOcoh8M0GzgEgk0u/xeEIrjXm93m2RSOSiBZ0Wu4WJmHnaLCAYDG6pN97S0rK5ETrLIWJmg1mALMsbnYzX8ITlimoQMfOPWYCu6zMm4yULOn9brqgGETO3zAJyudx4vfFr164VzXIwc90/ZCWImOk3C0gmkzuq1Wp2pbFyuZxNpVI7zXIQkanOcoiY+d0sQFVVX1dX19ZsNpvWdX0SwKKu65NDQ0Ppw4cPP6dpmtcsBzOn7RZme9P0+XynK5XKZwAeqxenqqqvu7t79wOPNtV+VnDPMAzb5xvbM1NrMb6xy7OJr48ePXrfLkmo0SSijwHcFuFawG0i+lSEKGSm1p4fFOFawEGR9h9weLCKxWLdAN5wkuNBMPPxEydOvC1JksfD7Fsg8riYSdMlFwAosqFqkmQQUcW9sHB/282bcylAX+LbXgCWYT+AFwA84zAPVFWdO9PTM+WWpHcBQCeCAoCJICsMAGAQZGaAGZrLhcubNutbGUVF4rMjxWLR8ZE3Fou1AkjDwX0CM/OVwcHvJwqFomgKDfjO6e0MMpnMVDgc9gIIi+YoTU+fyw4NXXFQBpFh3BFaAJbD6/UeAmClrX8ElXK5dOnixT+c6BuAoUtSoSFm4vG4ZhjGm7DQhD5UhGGoAwMDp1RV1c2jVwHzIsny6WKxOOP4NVvC+fPnZ8Ph8F0Ar1rlFPL5X8bHxuo2pXXADIx4df3kjcnJSWANLs5jsdhJAK+Zxd2bmxv5racnKSBRYeY/oSiDhULhoY3b6dL8CDRN209EL8myvH7VGFW9f6Gv72erOZlJA3GeJWm4ubk5l06ntZXiGj4zANDe3r6nqanpx1Xyc/bq1eOjN26M1cvBTKoEY4IkadiQ5ZF8Pr9gprsmZgCgvb29u6mp6ZHuYKZUupDp7e1ZhVYB0bgEjLr8/tzw8PCiHc2Gv2ZLmJ+fb1MUpdXj8TQvPatWq3f6+/rOPBjHQBnMY4okXX9++/Z8KpUSXtnWbGYAYN++fTsDgUAvEbkMw9AvnDv3ValUugXgHojyMjD6+sTEWBwwGqG3pmYAoK2t7ZNAIPDe1OTUqSuXBr6FouRGR0enAfBaa/+n8S8PPeWMetb8+wAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATISURBVFiF3VhNbBtFGH0z3vXGbqpSikQBKSIOHKgop0quYtMadSsqVfRCoQo9IjiAuAXJ4lB+D0Q5Ig4VQvxIVZREKQhRRNoiNi2VcBECUaUNjmM7VRPHcdP81HGc/ZmPSyKVNMnuzjoHeEfPe9/73s54dnaA/xFYowsmEont0Wj0iBDiGGNsD4BHAOwCMANgEsB1IvrOcZwfDcOoNtK7YWGOHj260zTNNBG9BSDiQVID8Ilt2x8bhjHXiB4aEubQoUPHGWOnATwoIb8D4LWLFy+eDdpHKKCeHT58+BSATwFEJWtEALzc2toqCoXC5SDNBAqj6/q7AN5H8BlmjLHnYrGYnc/nL0kXkRWuLK2+IDXWgWCMHb9w4cI3MmKpRlKp1AOKooxB7j/ihllN09rOnTs361fIZdwURXkHWxMEAHaapvm2jND3zCQSie2RSKQMb9uvLGq2bT/s9z2k+HWJRqNHiMg1iKZptXQ6fTUej8dUVd1tWdZUJpPJd3V1xev1ups+qijK8wAG/PTme5kJIY65cTRNq/X29uaTyWRKVdUWAGFVVVuSyWSqp6cn19TUtOTBytVnLXyHYYw95cZJp9NXt23b9vR6Y83NzXs7OzszHqz2+O1NZgN41I0Qj8djm423t7e3NsJnLWTC7HIjqKq6O8j4Ch7y3NEKZMLcdSNYljXlMl7y4LPguaMVyIQpuxEymUx+s/ErV64UPfhs+kDWg+8wRHTVjdPV1RWvVqvX1hurVqvXuru793uwcvVZC5nd7Gc3Tr1ej3R0dDwxNDRkWJY1DsC0LGvcMAzjxIkTT5qm2eTBx/Ddm19BKpVqVhTlFoAdfrU+MM85f+z8+fOLfkS+Z2bliPGFX50fMMY+9xsEkDxoapr2AYBpGa0HTIfD4Y9khFIfZ6Ojo/VYLDYJ4EUZvQteHxwc/E1GGOjDStf1MwBeCVJjDXqy2eybnHNNI4osM6apRMx2uAoASkhYNueCMbYUXl5e3DsxMdcPOKvioGF2ENGfjLHHg2UAhBBzpVu3TlumWfeqIWIOIxQVTpdHisVi4E9eXdeTAAwEuE8gIpqpVL6uLiwUZUvYwFdBb2eQz+dvtrW1NQF4VrbGUq32y+zMzB8B2mBMiIrUbrYWlmWdAuDlWH8fbMsqzUxPDwXxF4BwOB9rSBjDMGwhxEl4OITeCyKyKpXKgOM4jjt7wyImC4XOFovFqcDLbBWFQmE2FovNAHjBq+buwsIP1fn5TQ+lm4AIGGlynL6/x8fHgS24ONd1vQ/AS248yzRHJm7e7JWwWCKiv6Aov4+Njf3rxe37QsMNtm2/wTnXOec7N+KQEIvlcvl7rzWJmA1GOeJ8uKWl5YZhGPZ6vIbPDAAcOHDgWDgc/naD+jR7+3bP/Nzc6GY1iJjFIQqM82ERCo3kcrllN98tCQMABw8ePKOq6n2ng6Va7dfy5OTgBrIlMJbnQFaNRm8MDw+bfjwbvsxWwRh71XGcZCgUaln9zXGcynSp9NO9PAJqIBpVOL/+zL59uf7+fumdbctmBgASicT+SCRyCYBKRE6lVPqsVquVAcyDsVwIyHYUCqPvAaIRflsaBgCSyeSHmqZ1Lt5dHLhze/pLKMqNbDY7CYC22vs/jX8A/Nff8x41WYEAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAPjSURBVFiF3ZlNbxtVFIafe2cceyZxEitfqiMs1EUWSLDqggXskOiGSqCyoAj+AH8BChISAv5ABahCBaoGJziISAhWMR8LECBQUNo0cZpJpLQNVWMDTZxre+ayMIGQOp7J2DMFXuls5p57zvver7lzBv5HEBHETAMngVPAA8AxYAi4DVwHLgOfAJ8BdyLI3xVkgDeAHUAHsG3gdWDwXpBth9M0Rz6IiIN2G3gqfsp3QwBnAY9wQvbMA14immUfGC/TmYiD9mK89P/GaTqfkYPmAk/GKQKamzbsHvGzLZqHSWx4MwIR++21uISkCX78hrVtoO+oxGQIMScBy8/Jtu2dQqFQVEqta61rSqn16enpomVZ1QA5bODxENyOjPfxGVnbtrcrlcrPugXK5fK8ZVlBZvZCHGK+9yNSKBTmWgnZQz6fnwsg5rs4xFz3I6KUWmsnRinlBBCzcVRiYd64Cuhp56C1rvn4KCFE0idPDfDz+QfCHAC/+znUarWbPu03AuT5LTCjPxFGzKafw+zs7LV27TMzM06APG0HpFt4F5/1blnWTrlcnm+1X7a2tuZTqVTVLwZwPg4xzwcgoi3L2snn83NKKae555UzOTk5F1CIBp6LQ0wfUAlIKKxVgN6jEguzZ+7QXGpR4jzNK00syNA8CKKYlU1ivjUDnOkC8VZ2JiyhTj9TL3aSvAUu5XK5F6SUyaTWlhIimdBaNFyZADANr96Q0hNCVHuU2n5wY6My1fygAzoXMwD8BNzfYRyklJVcNvuWaZq7QftoLVyhcUypv1p0HKcbBYRHgCJgdBBDjwwNvTeQTjth+zfgQicE9rAOpIBHwwbo6+39ejiT+bEDDkJ43q0wR3MrnAW+DdPRNIwbY8PDX3SS3APPlXKlW2IawLMEuITuhxCiPjoy8pEQwvX3PgRa14RhFBzHudmNZbaHMs2KzRNBOwz29386kE63vZS2gdawmHLd/NW1tTWIpoKYB572c0r29Czel81+GCJ+VWs9j2n+sLKy8sv+hijEDAshlrTWh77FpRDb4+Pj55KmGejKorVoIHRJS7mQy+WuFIvFRiu/SGq7hmGccl3340Pi6+FM5tLgwMByuxhai7rEWxVSLniGsVgqlZRf3sgK1YlE4mK9Xr/rdmBb1jfZsbHPD+lWRYhrEpYStn1lYWGhdpScUVbdU1LKq57n5fYeGIZxK5fNvm0Yxl/LRMMOWi+bUl5+6MSJ0tTUVOiTLdJfCJZlPby7u/ul1joBuMdGR9/pte1N4FeEKBmw9Mzq6vIrzQL8vx+pVOpVIUS1v6//g4njxx+bmJgY5x7/h/lP4A+AJ7grnrOyCgAAAABJRU5ErkJggg==",anchor:[.5,1]}],this.options.labels||(this.options.labels={}),Object.keys(t.DefaultLabels).forEach(r=>{this.options.labels.hasOwnProperty(r)||(this.options.labels[r]=t.DefaultLabels[r])}),this.options.defaultStyles||(this.options.defaultStyles={}),Object.keys(t.DefaultStyles).forEach(r=>{if(e.defaultStyles.hasOwnProperty(r)){if("polyFillOpacity"===r&&(e.defaultStyles[r]<0||e.defaultStyles[r]>1))return Qc.log("Wrong value ("+e.defaultStyles[r]+") for defaultStyles.polyFillOpactity. Must be between 0 and 1"),void(this.options.defaultStyles[r]=t.DefaultStyles[r]);if("strokeWidth"===r||"polyStrokeWidth"===r){var i=parseInt(e.defaultStyles[r],10);if(isNaN(i)||i<0)return Qc.log("Wrong value ("+e.defaultStyles[r]+") for defaultStyles.strokeWidth. Must be a positive interger value."),void(this.options.defaultStyles[r]=t.DefaultStyles[r]);this.options.defaultStyles[r]=i}}else this.options.defaultStyles[r]=t.DefaultStyles[r]}),this.interactionCurrent=null,this.interactionSelectEdit=null,this.stylingOvl=null,this.popupOvl=null,this.layer=null,this.options.layer&&this.options.layer instanceof rc&&(this.layer=this.options.layer),this._isDesktop=this._detectSupport(),this.options.popup||(this.options.popup={display:!0,apply:null})},t.prototype._createEmptyLayer=function(){var e=new hm,r=new rc({source:new bu({features:e})});r.gpResultLayerId="drawing",this.setLayer(r)},t.prototype.setLayer=function(e){if(e)if(e instanceof rc){var r=this.getMap().getLayers();if(r){var i=!1;r.forEach(o=>{o===e&&(Qc.trace("layer already in map. Not adding."),i=!0)}),i||this.getMap().addLayer(e),e.getSource().getFeatures().forEach(o=>{var s=o.getStyleFunction();if(s){var a=s(o,0);a&&0!==a.length&&o.setStyle(a[0])}}),this.layer=e,this.getMap().getControls().forEach(o=>{if(o instanceof Sm){var s=this.layer.gpLayerId;o._layers[s].title===s&&o.addLayer(this.layer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}}else Qc.log("no valid layer given for hosting drawn features.");else this.layer=null},t.prototype._detectSupport=function(){var e=!0,r=window.navigator.userAgent.toLowerCase();return(-1!==r.indexOf("iphone")||-1!==r.indexOf("ipod")||-1!==r.indexOf("ipad")||-1!==r.indexOf("android")||-1!==r.indexOf("mobile")||-1!==r.indexOf("blackberry")||-1!==r.indexOf("tablet")||-1!==r.indexOf("phone")||-1!==r.indexOf("touch"))&&(e=!1),(-1!==r.indexOf("msie")||-1!==r.indexOf("trident"))&&(e=!0),e},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),r=this._showDrawingContainer=this._createShowDrawingElement();e.appendChild(r);var i=this._createShowDrawingPictoElement();e.appendChild(i);var o=this._drawingPanel=this._createDrawingPanelElement(),s=this._drawingPanelHeader=this._createDrawingPanelHeaderElement();o.appendChild(s);for(var a=this._createDrawingToolsSections(),c=0;c<a.length;c++)o.appendChild(a[c]);return e.appendChild(o),e},t.prototype._drawEndFeature=function(e,r){var i=null;switch(r){case"Point":i=new br({image:new wu(this._getIconStyleOptions(this.options.markersList[0]))});break;case"LineString":i=new br({stroke:new Gi({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})});break;case"Polygon":i=new br({fill:new ro({color:lc_hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)}),stroke:new Gi({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth})})}if(e.setStyle(i),this._updateMeasure(e,r),this.options.popup.display){var o=this,s=function(m,E){if(o.getMap().removeOverlay(o.popupOvl),o.popupOvl=null,E&&m&&m.trim().length>0){var S=m.replace(/\n/g,"<br>");e.setProperties({description:S})}},a=null,c=!0,h=this.options.popup.function;h&&"function"==typeof h&&(a=h.call(o,{feature:e,geomType:r,closeFunc:function(){s(null,!1)},saveFunc:function(m){s(m,!0)}}))&&(c=!1,a.tabIndex=-1,a.onblur=function(){o.getMap().removeOverlay(o.popupOvl),o.popupOvl=null}),c&&(a=this._createLabelDiv({applyFunc:s,inputId:this._addUID("att-input"),placeholder:"Saisir une description...",measure:this.options.tools.measure?e.getProperties().measure:null,geomType:r})),this.popupOvl&&(this.getMap().removeOverlay(this.popupOvl),this.popupOvl=null),this.popupOvl=new Eu({element:a,positioning:"top-center"}),this.getMap().addOverlay(this.popupOvl);var p=e.getGeometry().getExtent();this.popupOvl.setPosition([(p[0]+p[2])/2,(p[1]+p[3])/2]),document.getElementById(this._addUID("att-input"))&&document.getElementById(this._addUID("att-input")).focus()}},t.prototype._createRemoveInteraction=function(){var e=new pf({layers:[this.layer],style:!1});return e.on("select",r=>{!r||!r.selected||0===r.selected.length||(this.layer.getSource().removeFeature(r.selected[0]),this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createRemoveInteraction(),this.getMap().addInteraction(this.interactionCurrent))}),e},t.prototype._createStylingInteraction=function(){var e=new pf({layers:[this.layer],style:!1});return e.on("select",r=>{if(this.stylingOvl&&this.getMap().removeOverlay(this.stylingOvl),r&&r.selected&&0!==r.selected.length){var i=null,o=null,s=null,a=null,c={};if(r.selected[0].getGeometry()instanceof nc){var h=r.selected[0].getProperties().name;r.selected[0].getStyle().getText()&&h?(a="Text",r.selected[0].getStyle().getText().getStroke()&&r.selected[0].getStyle().getText().getStroke().getColor()&&(i=r.selected[0].getStyle().getText().getStroke().getColor(),Array.isArray(i)?(i="rgba("+i.join()+")",o=lc_rgbaToHex(i),c.strokeColor=o.hex,c.strokeOpacity=o.opacity):c.strokeColor=i),r.selected[0].getStyle().getText().getFill()&&r.selected[0].getStyle().getText().getFill().getColor()&&(i=r.selected[0].getStyle().getText().getFill().getColor(),Array.isArray(i)?(i="rgba("+i.join()+")",o=lc_rgbaToHex(i),c.fillColor=o.hex,c.fillOpacity=o.opacity):c.fillColor=i),c.strokeColor=c.hasOwnProperty("strokeColor")?c.strokeColor:this.options.defaultStyles.textStrokeColor,c.fillColor=c.hasOwnProperty("fillColor")?c.fillColor:this.options.defaultStyles.textFillColor):r.selected[0].getStyle()&&r.selected[0].getStyle().getImage()&&(a="Point",c.markerSrc=r.selected[0].getStyle().getImage().getSrc()?r.selected[0].getStyle().getImage().getSrc():this.options.markersList[0].src)}else r.selected[0].getGeometry()instanceof bh?(a="Line",r.selected[0].getStyle()&&r.selected[0].getStyle().getStroke()&&(r.selected[0].getStyle().getStroke().getWidth()&&(c.strokeWidth=r.selected[0].getStyle().getStroke().getWidth()),r.selected[0].getStyle().getStroke().getColor()&&(i=r.selected[0].getStyle().getStroke().getColor(),Array.isArray(i)?(i="rgba("+i.join()+")",o=lc_rgbaToHex(i),c.strokeColor=o.hex,c.fillOpacity=o.opacity):c.strokeColor=i)),c.strokeWidth=c.hasOwnProperty("strokeWidth")?c.strokeWidth:this.options.defaultStyles.strokeWidth,c.strokeColor=c.hasOwnProperty("strokeColor")?c.strokeColor:this.options.defaultStyles.strokeColor):r.selected[0].getGeometry()instanceof Yc&&(a="Polygon",r.selected[0].getStyle()&&r.selected[0].getStyle().getStroke()&&(r.selected[0].getStyle().getStroke().getWidth()&&(c.strokeWidth=r.selected[0].getStyle().getStroke().getWidth()),r.selected[0].getStyle().getStroke().getColor()&&(i=r.selected[0].getStyle().getStroke().getColor(),Array.isArray(i)?(i="rgba("+i.join()+")",o=lc_rgbaToHex(i),c.strokeColor=o.hex,c.strokeOpacity=o.opacity):c.strokeColor=i)),r.selected[0].getStyle()&&r.selected[0].getStyle().getFill()&&r.selected[0].getStyle().getFill().getColor()&&(i=r.selected[0].getStyle().getFill().getColor(),Array.isArray(i)&&(i="rgba("+i.join()+")"),o=lc_rgbaToHex(i),c.fillColor=o.hex,c.fillOpacity=o.opacity),c.strokeWidth=c.hasOwnProperty("strokeWidth")?c.strokeWidth:this.options.defaultStyles.polyStrokeWidth,c.strokeColor=c.hasOwnProperty("strokeColor")?c.strokeColor:this.options.defaultStyles.polyStrokeColor,c.fillColor=c.hasOwnProperty("fillColor")?c.fillColor:this.options.defaultStyles.polyFillColor,c.fillOpacity=c.hasOwnProperty("fillOpacity")?c.fillOpacity:this.options.defaultStyles.polyFillOpacity);if(!a)return void Qc.log("Unhandled geometry type for styling.");var p=this,E=this._createStylingDiv({geomType:a,initValues:c,applyFunc:function(S){if("cancel"!==S){var x="apply"!==S,P=document.getElementById(p._addUID("fillColor")),R=document.getElementById(p._addUID("fillOpacity")),F=document.getElementById(p._addUID("strokeColor")),D=document.getElementById(p._addUID("strokeWidth"));switch(a.toLowerCase()){case"text":x?(p.options.defaultStyles.textStrokeColor=F.value,p.options.defaultStyles.textFillColor=P.value):r.selected[0].setStyle(new br({text:new UE({font:"16px sans",textAlign:"left",text:r.selected[0].getStyle().getText().getText(),fill:new ro({color:P.value}),stroke:new Gi({color:F.value,width:3})})}));break;case"point":var j=p._getsMarkersOptionsFromSrc(document.querySelector("input[name='marker']:checked").value);if(x){if(p.options.markersList.length>1){var G=p.options.markersList.findIndex(function(J){return J===j});G>0&&(p.options.markersList.splice(G,1),p.options.markersList.splice(0,0,j))}}else r.selected[0].setStyle(new br({image:new wu(p._getIconStyleOptions(j))}));break;case"line":x?(p.options.defaultStyles.strokeColor=F.value,p.options.defaultStyles.strokeWidth=parseInt(D.value,10)):r.selected[0].setStyle(new br({stroke:new Gi({width:parseInt(D.value,10),color:F.value})}));break;case"polygon":var X=parseInt(R.value,10)/10;x?(p.options.defaultStyles.polyStrokeColor=F.value,p.options.defaultStyles.polyFillColor=P.value,p.options.defaultStyles.polyFillOpacity=X,p.options.defaultStyles.polyStrokeWidth=parseInt(D.value,10)):r.selected[0].setStyle(new br({stroke:new Gi({width:parseInt(D.value,10),color:F.value}),fill:new ro({color:lc_hexToRgba(P.value,X)})}))}x||p.getMap().removeOverlay(s)}else p.getMap().removeOverlay(s)}});s=new Eu({element:E,positioning:"top-center"}),this.getMap().addOverlay(s),s.setPosition(r.mapBrowserEvent.coordinate),this.stylingOvl=s,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createStylingInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e},t.prototype._createLabelInteraction=function(){var e=new pf({layers:[this.layer],style:!1});return e.on("select",r=>{if(this.labelOvl&&this.getMap().removeOverlay(this.labelOvl),r&&r.selected&&0!==r.selected.length){var i=null,o=null,s=null,a=null;if(r.selected[0].getGeometry()instanceof nc){var c=r.selected[0].getProperties().name;r.selected[0].getStyle()&&r.selected[0].getStyle().getText()&&c?o="Text":r.selected[0].getStyle()&&r.selected[0].getStyle().getImage()&&(o="Point")}else r.selected[0].getGeometry()instanceof bh?o="Line":r.selected[0].getGeometry()instanceof Yc&&(o="Polygon");if(!o)return void Qc.log("Unhandled geometry type for styling.");if("Text"===o)s=r.selected[0].getStyle().getText().getText();else{var h=r.selected[0].getProperties();h&&h.hasOwnProperty("description")&&(s=h.description),h&&h.hasOwnProperty("measure")&&(a=h.measure)}var p=this,E=this._createLabelDiv({applyFunc:function(S,x){if(p.getMap().removeOverlay(i),x){var P=r.selected[0];if("Text"===o){var R=P.getStyle();return R.getText().setText(S),P.setProperties({name:S}),void P.setStyle(R)}var F=S.replace(/\n/g,"<br>");P.setProperties({description:F})}},inputId:this._addUID("label-input"),placeholder:"Text"===o?"Saisir un label...":"Saisir une description...",text:s,measure:this.options.tools.measure?a:null,geomType:o});i=new Eu({element:E,positioning:"top-center"}),this.getMap().addOverlay(i),i.setPosition(r.mapBrowserEvent.coordinate),document.getElementById(this._addUID("label-input")).focus(),this.labelOvl=i,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createLabelInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e},t.prototype._updateMeasure=function(e,r){Qc.log(e);var i=null,o=this.getMap().getView().getProjection();function s(J,$){$=$||2;var le=Math.pow(10,$);return Math.round(J*le)/le}var a=r||e.getProperties().type;switch(a){case"Point":var h=Qi(e.getGeometry().getCoordinates(),o,"EPSG:4326");i="lon : ",i+=s(h[0],4)+"\xb0",i+=" / ",i+="lat : ",i+=s(h[1],4)+"\xb0";break;case"LineString":for(var p=0,m=e.getGeometry().getCoordinates(),E=0,S=m.length-1;E<S;++E)p+=cm(Qi(m[E],o,"EPSG:4326"),Qi(m[E+1],o,"EPSG:4326"));i=p>1e3?s(p/1e3,3)+" km":s(p,3)+" m";break;case"Polygon":var R=0,F=e.getGeometry().clone(),D=F.getLinearRing(0).getCoordinates();R=Math.abs(sa(new Yc([D])));var j=F.getLinearRings();if(j.length>1)for(var G=1;G<j.length;G++){var X=j[G].getCoordinates();R-=Math.abs(sa(new Yc([X])))}i=R>1e6?s(R/1e6,3)+" km^2":s(R,2)+" m^2"}e.setProperties({measure:i,type:a})},t.prototype._handleToolClick=function(e,r,i){var o=i.getMap();if(o){switch(GL.unset(o,{current:"Drawing"}),i.interactionCurrent&&(o.removeInteraction(i.interactionCurrent),i.interactionCurrent=null),i.interactionSelectEdit&&(o.removeInteraction(i.interactionSelectEdit),i.interactionSelectEdit=null),i.popupOvl&&(i.getMap().removeOverlay(i.popupOvl),i.popupOvl=null),this.layer||this._createEmptyLayer(),r){case this._addUID("drawing-tool-point"):i.dtOptions.points.active&&(i.interactionCurrent=new wh({stopClick:!0,features:i.layer.getSource().getFeaturesCollection(),style:new br({image:new wu(this._getIconStyleOptions(this.options.markersList[0]))}),type:"Point"}),i.interactionCurrent.on("drawend",function(s){i._drawEndFeature(s.feature,"Point")},i));break;case this._addUID("drawing-tool-line"):i.dtOptions.lines.active&&(i.interactionCurrent=new wh({stopClick:!0,features:i.layer.getSource().getFeaturesCollection(),style:new br({image:new Bd({radius:this.options.cursorStyle.radius,stroke:new Gi({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new ro({color:this.options.cursorStyle.fillColor})}),stroke:new Gi({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})}),type:"LineString"}),i.interactionCurrent.on("drawend",function(s){i._drawEndFeature(s.feature,"LineString")},i));break;case this._addUID("drawing-tool-polygon"):i.dtOptions.polygons.active&&(i.interactionCurrent=new wh({stopClick:!0,features:i.layer.getSource().getFeaturesCollection(),style:new br({image:new Bd({radius:this.options.cursorStyle.radius,stroke:new Gi({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new ro({color:this.options.cursorStyle.fillColor})}),stroke:new Gi({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new ro({color:lc_hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),i.interactionCurrent.on("drawend",function(s){i._drawEndFeature(s.feature,"Polygon")},i));break;case this._addUID("drawing-tool-holes"):i.dtOptions.holes.active&&(i.interactionSelectEdit=new pf({stopClick:!0,condition:Lp,layers:[this.layer]}),i.interactionSelectEdit.setProperties({name:"Drawing",source:i}),o.addInteraction(i.interactionSelectEdit),i.interactionCurrent=new wh({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new br({image:new Bd({radius:this.options.cursorStyle.radius,stroke:new Gi({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new ro({color:this.options.cursorStyle.fillColor})}),stroke:new Gi({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new ro({color:lc_hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),i.interactionCurrent.on("drawstart",function(s){},i),i.interactionCurrent.on("drawend",function(s){var a=i.interactionSelectEdit.getFeatures();if(a.getLength()){for(var c=a.item(0),h=s.feature.getGeometry().getCoordinates()[0],p=!0,m=0;m<h.length;m++)if(!c.getGeometry().intersectsCoordinate(h[m])){p=!1;break}if(!p)return;c.getGeometry().appendLinearRing(new EG(h)),s.feature=c,i._drawEndFeature(s.feature,"Polygon")}},i));break;case this._addUID("drawing-tool-text"):i.dtOptions.text.active&&(i.interactionCurrent=new wh({stopClick:!0,features:i.layer.getSource().getFeaturesCollection(),style:new br({image:new Bd({radius:this.options.cursorStyle.radius,stroke:new Gi({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new ro({color:this.options.cursorStyle.fillColor})})}),type:"Point"}),i.interactionCurrent.on("drawend",s=>{var a=null,h=this._createLabelDiv({applyFunc:function(p,m){i.getMap().removeOverlay(a),m?(s.feature.setProperties({name:p}),s.feature.setStyle(new br({image:new wu(i._getIconStyleOptions(i.options.defaultStyles.textIcon1x1)),text:new UE({textAlign:"left",font:"16px sans",text:p,fill:new ro({color:i.options.defaultStyles.textFillColor}),stroke:new Gi({color:i.options.defaultStyles.textStrokeColor,width:3})})}))):i.layer.getSource().removeFeature(s.feature)},inputId:i._addUID("label-input"),geomType:"Text",placeholder:"Saisir un label..."});a=new Eu({element:h,positioning:"top-center"}),i.getMap().addOverlay(a),a.setPosition(s.feature.getGeometry().getCoordinates()),document.getElementById(this._addUID("label-input")).focus()}));break;case this._addUID("drawing-tool-edit"):i.dtOptions.edit.active&&(i.interactionSelectEdit=new pf({condition:kp,layers:[this.layer]}),i.interactionSelectEdit.setProperties({name:"Drawing",source:i}),o.addInteraction(i.interactionSelectEdit),i.interactionCurrent=new RG({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new br({image:new Bd({radius:this.options.cursorStyle.radius,stroke:new Gi({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new ro({color:this.options.cursorStyle.fillColor})})})}),i.interactionCurrent.on("modifyend",s=>{var a=s.features.item(0);i._updateMeasure(a)}));break;case this._addUID("drawing-tool-display"):i.dtOptions.display.active&&(i.interactionCurrent=this._createStylingInteraction());break;case this._addUID("drawing-tool-tooltip"):i.dtOptions.tooltip.active&&(i.interactionCurrent=this._createLabelInteraction());break;case this._addUID("drawing-tool-remove"):i.dtOptions.remove.active&&(i.interactionCurrent=i._createRemoveInteraction());break;default:Qc.trace("unhandled tool type")}i.interactionCurrent&&(i.interactionCurrent.setProperties({name:"Drawing",source:this}),o.addInteraction(i.interactionCurrent)),Qc.log("interactions",o.getInteractions())}else Qc.trace("Drawing control not attached to any map.")},t.prototype.onShowDrawingClick=function(){var e=this.getMap();for(var r in GL.unset(e),this.collapsed=this._showDrawingContainer.checked,this.dispatchEvent("change:collapsed"),this.dtOptions)if(this.dtOptions.hasOwnProperty(r)&&this.dtOptions[r].active){var i=this._addUID("drawing-tool-"+this.dtOptions[r].id);document.getElementById(i).className="drawing-tool",this.dtOptions[r].active=!1}},t.prototype.onExportFeatureClick=function(){var e=this.exportFeatures();if(e){var r=document.createElement("a");if(r.setAttribute("href","data:application/vnd.google-earth.kml+xml;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",this.getExportName()+".kml"),document.createEvent){var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),r.dispatchEvent(o)}else r.click()}},t}(Su);const dQ=m6;window.ol&&window.ol.control&&(window.ol.control.Drawing=m6);var hQ=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function BL(n){return"string"==typeof n?JSON.parse(n)||null:null!==n?n:null}const pQ=function(n){function t(){return n.call(this)||this}return hQ(t,n),t.prototype.getType=function(){return"json"},t.prototype.readFeature=function(e,r){return this.readFeatureFromObject(BL(e),this.getReadOptions(e,r))},t.prototype.readFeatures=function(e,r){return this.readFeaturesFromObject(BL(e),this.getReadOptions(e,r))},t.prototype.readFeatureFromObject=function(e,r){return Ir()},t.prototype.readFeaturesFromObject=function(e,r){return Ir()},t.prototype.readGeometry=function(e,r){return this.readGeometryFromObject(BL(e),this.getReadOptions(e,r))},t.prototype.readGeometryFromObject=function(e,r){return Ir()},t.prototype.readProjection=function(e){return this.readProjectionFromObject(BL(e))},t.prototype.readProjectionFromObject=function(e){return Ir()},t.prototype.writeFeature=function(e,r){return JSON.stringify(this.writeFeatureObject(e,r))},t.prototype.writeFeatureObject=function(e,r){return Ir()},t.prototype.writeFeatures=function(e,r){return JSON.stringify(this.writeFeaturesObject(e,r))},t.prototype.writeFeaturesObject=function(e,r){return Ir()},t.prototype.writeGeometry=function(e,r){return JSON.stringify(this.writeGeometryObject(e,r))},t.prototype.writeGeometryObject=function(e,r){return Ir()},t}(YG);var gQ=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function _3(n,t){if(!n)return null;var e;switch(n.type){case"Point":e=function(n){return new nc(n.coordinates)}(n);break;case"LineString":e=function(n){return new bh(n.coordinates)}(n);break;case"Polygon":e=function(n){return new Yc(n.coordinates)}(n);break;case"MultiPoint":e=function(n){return new AP(n.coordinates)}(n);break;case"MultiLineString":e=function(n){return new JC(n.coordinates)}(n);break;case"MultiPolygon":e=function(n){return new dD(n.coordinates)}(n);break;case"GeometryCollection":e=function(n,t){var e=n.geometries.map(function(r){return _3(r,undefined)});return new jE(e)}(n);break;default:throw new Error("Unsupported GeoJSON type: "+n.type)}return mf(e,!1,t)}function E3(n,t){var r,e=(n=mf(n,!0,t)).getType();switch(e){case"Point":r=function(n,t){return{type:"Point",coordinates:n.getCoordinates()}}(n);break;case"LineString":r=function(n,t){return{type:"LineString",coordinates:n.getCoordinates()}}(n);break;case"Polygon":r=function(n,t){var e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(e)}}(n,t);break;case"MultiPoint":r=function(n,t){return{type:"MultiPoint",coordinates:n.getCoordinates()}}(n);break;case"MultiLineString":r=function(n,t){return{type:"MultiLineString",coordinates:n.getCoordinates()}}(n);break;case"MultiPolygon":r=function(n,t){var e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(e)}}(n,t);break;case"GeometryCollection":r=function(n,t){return{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){var i=qa({},t);return delete i.featureProjection,E3(r,i)})}}(n,t);break;case"Circle":r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+e)}return r}const qE=function(n){function t(e){var r=this,i=e||{};return(r=n.call(this)||this).dataProjection=Ar(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(r.defaultFeatureProjection=Ar(i.featureProjection)),r.geometryName_=i.geometryName,r.extractGeometryName_=i.extractGeometryName,r}return gQ(t,n),t.prototype.readFeatureFromObject=function(e,r){var i,o=_3((i="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null}).geometry,r),s=new jd;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(o),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s},t.prototype.readFeaturesFromObject=function(e,r){var o=null;if("FeatureCollection"===e.type){o=[];for(var a=e.features,c=0,h=a.length;c<h;++c)o.push(this.readFeatureFromObject(a[c],r))}else o=[this.readFeatureFromObject(e,r)];return o},t.prototype.readGeometryFromObject=function(e,r){return _3(e,r)},t.prototype.readProjectionFromObject=function(e){var i,r=e.crs;return r?"name"==r.type?i=Ar(r.properties.name):"EPSG"===r.type?i=Ar("EPSG:"+r.properties.code):qi(!1,36):i=this.dataProjection,i},t.prototype.writeFeatureObject=function(e,r){r=this.adaptOptions(r);var i={type:"Feature",geometry:null,properties:null},o=e.getId();void 0!==o&&(i.id=o);var s=e.getGeometry();s&&(i.geometry=E3(s,r));var a=e.getProperties();return delete a[e.getGeometryName()],uE(a)||(i.properties=a),i},t.prototype.writeFeaturesObject=function(e,r){r=this.adaptOptions(r);for(var i=[],o=0,s=e.length;o<s;++o)i.push(this.writeFeatureObject(e[o],r));return{type:"FeatureCollection",features:i}},t.prototype.writeGeometryObject=function(e,r){return E3(e,this.adaptOptions(r))},t}(pQ);var b3=Ki_getLogger("LocationSelectorDOM");const OQ={_addUID:function(n){return this._uid?n+"-"+this._uid:n},_createMainContainerElement:function(){var n=document.createElement("div");return n.className=this._addUID("GPlocationPoint"),n.className+=" GPwidget",n},_createLocationPointElement:function(n,t){var e=document.createElement("div");return e.id=this._addUID("GPlocationPoint_"+n),e.className=t?"GPflexInput GPlocationStageFlexInput":"GPflexInput GPlocationStageFlexInputHidden",e.style.cssText="",e},_createLocationPointLabelElement:function(n,t){var e=this,r=document.createElement("label");return r.id=this._addUID("GPlocationOriginLabel_"+n),r.htmlFor="GPlocationOrigin_"+n,r.innerHTML=t,r.addEventListener("click",function(i){for(var o=ni.index(this.id),s=document.getElementsByClassName(e._addUID("GPlocationPoint")),a=0;a<s.length;a++){var h=ni.index(s[a].childNodes[0].id);document.getElementById(e._addUID("GPlocationPoint_"+h)).style.cssText=""}document.getElementById(e._addUID("GPlocationOriginCoords_"+o)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+o)).value="",document.getElementById(e._addUID("GPlocationPoint_"+o)).style.cssText="",document.getElementById(e._addUID("GPlocationOriginPointer_"+o)).checked=!1,document.getElementById(e._addUID("GPlocationOrigin_"+o)).className="GPlocationOriginVisible",document.getElementById(e._addUID("GPlocationOriginCoords_"+o)).className="GPlocationOriginHidden",document.getElementById(e._addUID("GPlocationStageRemove_"+o))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+o)).className="GPlocationStageRemove"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className=""),e.onLocationClearPointClick(i)}),r},_createLocationAutoCompleteteInputElement:function(n){var t=this,e=document.createElement("input");return e.id=this._addUID("GPlocationOrigin_"+n),e.className="GPlocationOriginVisible",e.type="text",e.placeholder="Saisir une adresse",e.autocomplete="off",e.addEventListener("keyup",function(r){var i=r.which||r.keyCode;if(13!==i&&10!==i&&38!==i&&40!==i){var o=ni.index(this.id);document.getElementById(t._addUID("GPlocationOrigin_"+o)).value.length>2?document.getElementById(t._addUID("GPlocationAutoCompleteList_"+o)).style.display="block":document.getElementById(t._addUID("GPlocationAutoCompleteList_"+o)).style.display="none",t.onAutoCompleteSearchText(r)}}),e.addEventListener("keydown",function(r){var i=r.which||r.keyCode,o=document.getElementById(t._addUID("GPlocationAutoCompleteList_"+n));if(o){var s=o.getElementsByClassName("GPautoCompleteProposal current"),a=o.getElementsByClassName("GPautoCompleteProposal"),c=a.length;if(c){var h=null;if(!s.length)return(h=a[0]).className="GPautoCompleteProposal current",h.style.color="#000000",void(h.style["background-color"]="#CEDBEF");h=s[0];var p=parseInt(ni.index(h.id),10),m=p===c-1?a[0]:a[p+1],E=0===p?a[c-1]:a[p-1];switch(h.style["background-color"]="",h.style.color="",E.style["background-color"]="",E.style.color="",m.style["background-color"]="",m.style.color="",i){case 38:b3.log("arrow up"),h.className="GPautoCompleteProposal",E.className="GPautoCompleteProposal current",E.style.color="#000000",E.style["background-color"]="#CEDBEF";break;case 40:b3.log("arrow down"),h.className="GPautoCompleteProposal",m.className="GPautoCompleteProposal current",m.style.color="#000000",m.style["background-color"]="#CEDBEF";break;case 13:b3.log("enter"),h.click(r)}h.focus()}}}),e},_createLocationCoordinateInputElement:function(n){var t=this,e=document.createElement("input");return e.id=this._addUID("GPlocationOriginCoords_"+n),e.className="GPlocationOriginHidden",e.type="text",e.disabled=!1,e.addEventListener("click",function(){var r=ni.index(this.id);document.getElementById(t._addUID("GPlocationOriginLabel_"+r)).click()}),e},_createLocationPointerShowInputElement:function(n){var t=document.createElement("input");return t.id=this._addUID("GPlocationOriginPointer_"+n),t.type="checkbox",t},_createLocationPointerInputElement:function(n){var t=this,e=document.createElement("label");return e.id=this._addUID("GPlocationOriginPointerImg_"+n),e.htmlFor="GPlocationOriginPointer_"+n,e.className="GPlocationOriginPointerImg",e.title="Pointer un lieu sur la carte",e.addEventListener("click",function(r){r.preventDefault(),r.stopPropagation();var s,c,i=ni.index(this.id),o=document.getElementsByClassName(t._addUID("GPlocationPoint"));for(s=0;s<o.length;s++)i!==(c=ni.index(o[s].childNodes[0].id))&&(document.getElementById(t._addUID("GPlocationOriginPointer_"+c)).checked=!1,"Pointer un lieu sur la carte"===document.getElementById(t._addUID("GPlocationOriginCoords_"+c)).value&&(document.getElementById(t._addUID("GPlocationOriginCoords_"+c)).value="",document.getElementById(t._addUID("GPlocationOrigin_"+c)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+c)).className="GPlocationOriginHidden"));if(document.getElementById(t._addUID("GPlocationOriginPointer_"+i)).checked){for(document.getElementById(t._addUID("GPlocationOriginCoords_"+i)).value="",s=0;s<o.length;s++)c=ni.index(o[s].childNodes[0].id),document.getElementById(t._addUID("GPlocationPoint_"+c)).style.cssText="";document.getElementById(t._addUID("GPlocationStageRemove_"+i))&&(document.getElementById(t._addUID("GPlocationStageRemove_"+i)).className="GPlocationStageRemove"),document.getElementById(t._addUID("GPlocationStageAdd"))&&(document.getElementById(t._addUID("GPlocationStageAdd")).className=""),document.getElementById(t._addUID("GPlocationOriginPointer_"+i)).checked=!1,document.getElementById(t._addUID("GPlocationOrigin_"+i)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+i)).className="GPlocationOriginHidden"}else{for(document.getElementById(t._addUID("GPlocationOriginCoords_"+i)).value="Pointer un lieu sur la carte",s=0;s<o.length;s++)i===(c=ni.index(o[s].childNodes[0].id))?document.getElementById(t._addUID("GPlocationPoint_"+c)).style.cssText="":document.getElementById(t._addUID("GPlocationPoint_"+c)).style.display="none";document.getElementById(t._addUID("GPlocationStageRemove_"+i))&&(document.getElementById(t._addUID("GPlocationStageRemove_"+i)).className="GPlocationOriginHidden"),document.getElementById(t._addUID("GPlocationStageAdd"))&&(document.getElementById(t._addUID("GPlocationStageAdd")).className="GPlocationOriginHidden"),document.getElementById(t._addUID("GPlocationOriginPointer_"+i)).checked=!0,document.getElementById(t._addUID("GPlocationOrigin_"+i)).className="GPlocationOriginHidden",document.getElementById(t._addUID("GPlocationOriginCoords_"+i)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+i)).disabled=!0}t.onActivateMapPointClick(r)}),e},_createLocationRemovePointElement:function(n){var t=this,e=document.createElement("div");return e.id=this._addUID("GPlocationStageRemove_"+n),e.className="GPlocationStageRemove",e.title="Supprimer l'\xe9tape",e.addEventListener("click",function(r){var i=document.getElementsByClassName(t._addUID("GPlocationPoint")),a=i[i.length-1].childNodes[0].id,c=ni.index(i[0].childNodes[0].id),h=ni.index(a);if(n!==c&&n!==h){var p=ni.index(this.id);document.getElementById(t._addUID("GPlocationPoint_"+p)).className="GPflexInput GPlocationStageFlexInputHidden",document.getElementById(t._addUID("GPlocationOrigin_"+p)).value="",document.getElementById(t._addUID("GPlocationOrigin_"+p)).className="GPlocationOriginVisible",document.getElementById(t._addUID("GPlocationOriginCoords_"+p)).value="",document.getElementById(t._addUID("GPlocationOriginCoords_"+p)).className="GPlocationOriginHidden",document.getElementById(t._addUID("GPlocationStageAdd")).style.display="",t.onLocationRemovePointClick(r)}}),e},_createLocationAddPointElement:function(){var n=this,t=document.createElement("div");return t.id=this._addUID("GPlocationStageAdd"),t.title="Ajouter une \xe9tape",t.addEventListener("click",function(e){for(var r=1,i=0,o=document.getElementsByClassName(n._addUID("GPlocationPoint")),s=1;s<o.length-1;s++){var c=ni.index(o[s].childNodes[0].id);document.getElementById(n._addUID("GPlocationPoint_"+c))&&("GPflexInput GPlocationStageFlexInputHidden"===document.getElementById(n._addUID("GPlocationPoint_"+c)).className?1===r&&(r=c):i++)}r<o.length&&(document.getElementById(n._addUID("GPlocationPoint_"+r)).className="GPflexInput GPlocationStageFlexInput"),4===i&&(document.getElementById(n._addUID("GPlocationStageAdd")).style.display="none"),n.onLocationAddPointClick(e)}),t},_createLocationAutoCompleteResultElement:function(n){var t=this,e=document.createElement("div");return e.id=this._addUID("GPlocationAutoCompleteList_"+n),e.className="GPadvancedAutoCompleteList",e.addEventListener?e.addEventListener("click",function(r){t.onAutoCompletedResultsItemClick(r),document.getElementById(t._addUID("GPlocationAutoCompleteList_"+n)).style.display="none"},!1):e.attachEvent&&e.attachEvent("onclick",function(r){t.onAutoCompletedResultsItemClick(r),document.getElementById(t._addUID("GPlocationAutoCompleteList_"+n)).style.display="none"}),e},_createLocationAutoCompletedLocationElement:function(n,t,e){var r=document.getElementById(this._addUID("GPlocationAutoCompleteList_"+n)),i=document.createElement("div");i.id=this._addUID("AutoCompletedLocation_"+e),i.className="GPautoCompleteProposal",i.innerHTML=t.fullText,r.appendChild(i)},GPdisplayCoordinate:function(n){for(var t=document.getElementsByClassName(this._addUID("GPlocationPoint")),e=0;e<t.length;e++){var r=t[e].childNodes[0].id,i=ni.index(r);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+i)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+i)).value=n,document.getElementById(this._addUID("GPlocationOriginCoords_"+i)).disabled=!1;for(var o=0;o<t.length;o++){var s=ni.index(r=t[o].childNodes[0].id);document.getElementById(this._addUID("GPlocationPoint_"+s)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+s))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+s)).className="GPlocationStageRemove")}return document.getElementById(this._addUID("GPlocationOriginPointer_"+i)).checked=!1,void(document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className=""))}}}};var Hv=Ki_getLogger("locationselector"),v6=function(n){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(e),this._container=this._initContainer(),e.element&&e.element.appendChild&&(e.element.appendChild(this._container),this._container=e.element),n.call(this,{element:this._container,target:e.target,render:e.render})}return n&&(t.__proto__=n),t.prototype=Object.create(n.prototype,{}),vr.assign(t.prototype,OQ),t.prototype.constructor=t,t.prototype.initialize=function(e){this.options={tag:{id:1,groupId:null,label:">",display:!0,addOption:!1,removeOption:!1},displayInfo:!0,autocompleteOptions:{}},vr.mergeParams(this.options,e),this._uid=this.options.tag.groupId||ni.generate(),this._map=null,this._inputsContainer=null,this._inputLabelContainer=null,this._inputAutoCompleteContainer=null,this._inputShowPointerContainer=null,this._inputShowPointer=null,this._inputCoordinateContainer=null,this._addPointElement=null,this._removePointElement=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedLocations=[],this._currentLocation=null,this._initMarker(),this._resources={},this._noRightManagement=!1,this._checkRightsManagement(),this.listenerKey=null},t.prototype._initMarker=function(){if(this._marker=null,this._markerUrl="",this._markerOffset=[0,0],this.options.tag.markerOpts&&this.options.tag.markerOpts.url){this._markerUrl=this.options.tag.markerOpts.url;var e=this.options.tag.markerOpts.offset;e&&(Array.isArray(e)&&2===e.length?this._markerOffset=e:Hv.log("markerOpts.offset should be an array. e.g. : [0,0]"))}else this._markerUrl=Ls.lightOrange,this._markerOffset=Ls.defaultOffset},t.prototype.getCoordinate=function(){return this._coordinate},t.prototype.setCoordinate=function(e){var i=this.getMap().getView().getProjection();this._setCoordinate(e,i),this._setMarker([e[0],e[1]],null,!1)},t.prototype.clear=function(){this._clearResults(),this._inputLabelContainer.click()},t.prototype._checkRightsManagement=function(){var e=this.options.autocompleteOptions.filterOptions,r=e?e.type:[];(!r||0===r.length)&&(r=["PositionOfInterest","StreetAddress"]);var i=zp_check({key:this.options.apiKey,resources:r,services:["AutoCompletion"]});i?(this.options.apiKey||(this.options.apiKey=i.key),vr.assign(this._resources,i)):this._noRightManagement=!0},t.prototype._initContainer=function(){var e=this.options.tag.id,r=this._createMainContainerElement(),i=this._inputsContainer=this._createLocationPointElement(e,this.options.tag.display);r.appendChild(i);var o=this._inputLabelContainer=this._createLocationPointLabelElement(e,this.options.tag.label);i.appendChild(o);var s=this._inputAutoCompleteContainer=this._createLocationAutoCompleteteInputElement(e);s.addEventListener?s.addEventListener("click",()=>this.onAutoCompleteInputClick()):s.attachEvent&&s.attachEvent("onclick",()=>this.onAutoCompleteInputClick()),i.appendChild(s);var a=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(e);i.appendChild(a);var c=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(e);i.appendChild(c);var h=this._inputShowPointer=this._createLocationPointerInputElement(e);if(i.appendChild(h),this.options.tag.addOption){var p=this._addPointElement=this._createLocationAddPointElement();i.appendChild(p)}if(this.options.tag.removeOption){var m=this._removePointElement=this._createLocationRemovePointElement(e);i.appendChild(m)}var E=this._suggestedContainer=this._createLocationAutoCompleteResultElement(e);return r.appendChild(E),r},t.prototype.onAutoCompleteInputClick=function(){this._inputAutoCompleteContainer&&this._inputAutoCompleteContainer.value.length>2&&this._displaySuggestedLocation()},t.prototype.onAutoCompleteSearchText=function(e){var r=e.target.value;if(r){if(this._noRightManagement)return void Hv.log("no rights for this service !?");if(this._currentLocation=r,r.length<3)return void this._clearSuggestedLocation();var i=this;this._requestAutoComplete({text:r,maximumResponses:5,onSuccess:function(s){s&&i._fillAutoCompletedLocationListContainer(s.suggestedLocations)},onFailure:function(s){i._clearSuggestedLocation(),Hv.log(s.message)}});var o=this.getMap();o.on("click",()=>this._hideSuggestedLocation()),o.on("pointerdrag",()=>this._hideSuggestedLocation())}},t.prototype.onAutoCompletedResultsItemClick=function(e){var r=ni.index(e.target.id);if(r){var i=[this._suggestedLocations[r].position.x,this._suggestedLocations[r].position.y];this._coordinate=i;var o={type:this._suggestedLocations[r].type,fields:this._suggestedLocations[r]};this._setLabel(this._suggestedLocations[r].fullText);var c=this.getMap().getView().getProjection().getCode();"EPSG:4326"!==c&&(i=Qi(i,"EPSG:4326",c)),this._setPosition(i),this._setMarker(i,o,this.options.displayInfo)}},t.prototype.onActivateMapPointClick=function(){var e=this.getMap();this._inputShowPointerContainer.checked?(this._clearResults(),this.listenerKey=e.on("click",r=>this.onMouseMapClick(r)),this._setCursor("crosshair")):(Aa(this.listenerKey),this._setCursor())},t.prototype.onLocationClearPointClick=function(){this._setCursor(),this._clearResults()},t.prototype.onLocationRemovePointClick=function(){this._setCursor(),this._clearResults()},t.prototype.onLocationAddPointClick=function(e){Hv.log("onRouteAddPointClick",e)},t.prototype.onMouseMapClick=function(e){var r=e.coordinate;if(e.map&&e.map.getView()){var i=e.map.getView().getProjection();this._setCoordinate(r,i),this._setMarker([r[0],r[1]],null,!1),this.onActivateMapPointClick(e)}},t.prototype._setLabel=function(e){this._inputAutoCompleteContainer.value=e},t.prototype._setCursor=function(e){this.getMap().getTargetElement().style.cursor=e||null},t.prototype._setCoordinate=function(e,r){this._coordinate=Qi(e,r,"EPSG:4326");var i=this._coordinate[0].toFixed(4),o=this._coordinate[1].toFixed(4);this.GPdisplayCoordinate(o+" / "+i)},t.prototype._setPosition=function(e){this.getMap().getView().setCenter(e)},t.prototype._setMarker=function(e,r,i){var o=this.getMap();if(null!=this._marker&&(o.removeOverlay(this._marker),this._marker=null),e){var s=document.createElement("img");s.src=this._markerUrl,this._marker=new Eu({position:e,offset:this._markerOffset,element:s,stopEvent:!1}),o.addOverlay(this._marker),i&&Hv.log("marker information : ",r)}},t.prototype._clearResults=function(){this._currentLocation=null,this._coordinate=null,this._hideSuggestedLocation(),this._clearSuggestedLocation(),this._setMarker(),Aa(this.listenerKey)},t.prototype._clearSuggestedLocation=function(){if(this._suggestedLocations=[],this._suggestedContainer)for(;this._suggestedContainer.firstChild;)this._suggestedContainer.removeChild(this._suggestedContainer.firstChild)},t.prototype._hideSuggestedLocation=function(){this._suggestedContainer&&(this._suggestedContainer.style.display="none")},t.prototype._displaySuggestedLocation=function(){this._suggestedContainer&&(this._suggestedContainer.style.display="block")},t.prototype._requestAutoComplete=function(e){if(Hv.log("_requestAutoComplete()",e),e&&0!==Object.keys(e).length&&e.text){Hv.log(e);var r={};vr.assign(r,this.options.autocompleteOptions),vr.assign(r,e);var i=this._resources.AutoCompletion||null;i&&Array.isArray(i)&&(r.filterOptions||(r.filterOptions={}),r.filterOptions.type=i),r.apiKey=r.apiKey||this.options.apiKey,"boolean"!=typeof r.ssl&&(r.ssl="boolean"!=typeof this.options.ssl||this.options.ssl),Hv.log(r),aa.Services.autoComplete(r)}},t.prototype._fillAutoCompletedLocationListContainer=function(e){if(e&&0!==e.length){var r=this._suggestedContainer;if(r.childElementCount)for(;r.firstChild;)r.removeChild(r.firstChild);for(var i=0;i<e.length;i++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,e[i],i);this._suggestedLocations=e}},t}(Su);const nI=v6;window.ol&&window.ol.control&&(window.ol.control.LocationSelector=v6);var DQ=Ki_getLogger("RouteDOM");const kQ={_addUID:function(n){return this._uid?n+"-"+this._uid:n},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GProute"),n.className="GPwidget",n},_createShowRouteElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowRoute"),n.type="checkbox",n},_createShowRoutePictoElement:function(){var n=this,t=document.createElement("label");t.id=this._addUID("GPshowRoutePicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowRoute"),t.title="Ouvrir le calcul d'itin\xe9raire",t.addEventListener?t.addEventListener("click",function(r){n.onShowRoutePanelClick(r)}):t.attachEvent&&t.attachEvent("onclick",function(r){n.onShowRoutePanelClick(r)});var e=document.createElement("span");return e.id=this._addUID("GPshowRouteOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createRoutePanelElement:function(){var n=document.createElement("div");return n.id=this._addUID("GProutePanel"),n.className="GPpanel",n},_createRoutePanelHeaderElement:function(){var n=this,t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML="Calcul d'itin\xe9raire",t.appendChild(e);var r=document.createElement("div");return r.id=this._addUID("GProutePanelClose"),r.className="GPpanelClose",r.title="Masquer le panneau",r.addEventListener?r.addEventListener("click",function(){document.getElementById(n._addUID("GPshowRoutePicto")).click()},!1):r.attachEvent&&r.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowRoutePicto")).click()}),t.appendChild(r),t},_createRoutePanelFormElement:function(){var n=this,t=document.createElement("form");return t.id=this._addUID("GProuteForm"),t.setAttribute("onkeypress","return event.keyCode != 13;"),t.addEventListener("submit",function(e){DQ.log(e),e.preventDefault();var c,r=document.getElementsByClassName(n._addUID("GPlocationPoint")),o=r[r.length-1].childNodes[0].id,s=ni.index(r[0].childNodes[0].id),a=ni.index(o);if(""===document.getElementById(n._addUID("GPlocationOrigin_"+s)).value&&""===document.getElementById(n._addUID("GPlocationOriginCoords_"+s)).value||""===document.getElementById(n._addUID("GPlocationOrigin_"+a)).value&&""===document.getElementById(n._addUID("GPlocationOriginCoords_"+a)).value)return!1;document.getElementById(n._addUID("GProuteResultsStages")).innerHTML="";for(var h=0;h<r.length;h++)if(c=ni.index(r[h].childNodes[0].id),"GPflexInput GPlocationStageFlexInput"===document.getElementById(n._addUID("GPlocationPoint_"+c)).className){var m=document.createElement("div");m.className="GProuteResultsStages";var E=document.createElement("div");E.className="GProuteResultStageLabel",E.innerHTML=document.getElementById(n._addUID("GPlocationOriginLabel_"+c)).innerHTML+" :",m.appendChild(E);var S=document.createElement("div");S.className="GProuteResultStageValue";var x=document.getElementById(n._addUID("GPlocationOriginCoords_"+c)),P=x.value;S.innerHTML=null!==P&&""!==P&&"GPlocationOriginVisible"===x.className?P:document.getElementById(n._addUID("GPlocationOrigin_"+c)).value,m.appendChild(S),""!==S.innerHTML&&document.getElementById(n._addUID("GProuteResultsStages")).appendChild(m)}var F=null;if(document.getElementById(n._addUID("GProuteComputationSelect"))){var D=document.getElementById(n._addUID("GProuteResultsComputationSelect"));D.selectedIndex=document.getElementById(n._addUID("GProuteComputationSelect")).selectedIndex,F=D.options[D.selectedIndex].value}var j=null;document.getElementById(n._addUID("GProuteTransportCar"))&&document.getElementById(n._addUID("GProuteTransportCar")).checked&&(j=document.getElementById(n._addUID("GProuteTransportCar")).value),document.getElementById(n._addUID("GProuteTransportPedestrian"))&&document.getElementById(n._addUID("GProuteTransportPedestrian")).checked&&(j=document.getElementById(n._addUID("GProuteTransportPedestrian")).value);for(var G=[],X=document.getElementsByClassName("GProuteExclusionsOption"),J=0;J<X.length;J++){c=X[J].htmlFor;var $=document.getElementById(c);$.checked||G.push($.value)}return n.onRouteComputationSubmit({computation:F,transport:j,exclusions:G}),!1}),t},_createRoutePanelResultsElement:function(){var n=document.createElement("div");n.id=this._addUID("GProuteResultsPanel"),n.className="GProuteComponentHidden",n.appendChild(this._createRouteResultsStagesElement()),n.appendChild(this._createRouteResultsElement());var t=document.createElement("div");t.className="GPfakeBorder GPfakeBorderLeft",n.appendChild(t),n.appendChild(this._createRouteShowResultsDetailsElement());var e=document.createElement("label");e.htmlFor=this._addUID("GProuteResultsShowDetails"),e.innerHTML="Afficher le d\xe9tail",n.appendChild(e);var r=document.createElement("label");r.htmlFor=this._addUID("GProuteResultsShowDetails"),r.innerHTML="Masquer le d\xe9tail",n.appendChild(r);var i=document.createElement("div");return i.className="GPfakeBorder",n.appendChild(i),n.appendChild(this._createRouteResultsDetailsElement()),n},_createRouteWaitingElement:function(){var n=document.createElement("div");n.id=this._addUID("GProuteCalcWaitingContainer"),n.className="GProuteCalcWaitingContainerHidden";var t=document.createElement("p");return t.className="GProuteCalcWaiting",t.innerHTML="Calcul en cours...",n.appendChild(t),n},_createRouteResultsStagesElement:function(){var n=document.createElement("div");return n.id=this._addUID("GProuteResultsStages"),n},_createRouteResultsElement:function(){var n=this,t=document.createElement("div");t.id=this._addUID("GProuteResults");var e=document.createElement("div");e.id=this._addUID("GProuteResultsValues"),t.appendChild(e);var r=document.createElement("div");r.id=this._addUID("GProuteResultsMode");var i=document.createElement("select");i.id=this._addUID("GProuteResultsComputationSelect"),i.className="GPinputSelect",i.addEventListener("change",function(h){n.onRouteModeComputationChangeAndRun(h)});for(var o=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],s=0;s<o.length;s++){var a=document.createElement("option");a.value=o[s].code,a.text=o[s].label,i.appendChild(a)}r.appendChild(i),t.appendChild(r);var c=document.createElement("div");return c.id=this._addUID("GProuteResultsNew"),c.title="Modifier le calcul",c.addEventListener("click",function(h){document.getElementById(n._addUID("GProuteResultsPanel")).className="GProuteComponentHidden",document.getElementById(n._addUID("GProuteForm")).className="",n.onShowRouteResultsNewClick(h)}),t.appendChild(c),t},_addRouteResultsValuesElement:function(n,t,e){var r=document.getElementById(this._addUID("GProuteResultsValues"));if(r.childElementCount)for(;r.firstChild;)r.removeChild(r.firstChild);var i=document.createElement("div");i.className="GProuteResultsValue";var o=document.createElement("label");o.className="GProuteResultsValueLabel",o.innerHTML="Distance :",i.appendChild(o);var s=0;if(parseInt(n/1e3,10)){var c=Math.round(n);s=(c/=1e3)+" km"}else s=Math.round(n)+" m";var h=document.createElement("div");h.id=this._addUID("GProuteResultsValueDist"),h.innerHTML=s,i.appendChild(h),r.appendChild(i);var p=document.createElement("div");p.className="GProuteResultsValue";var m=document.createElement("label");m.className="GProuteResultsValueLabel",m.innerHTML="Dur\xe9e :",p.appendChild(m);var E=document.createElement("div");return E.id=this._addUID("GProuteResultsValueDist"),E.innerHTML=e(t),p.appendChild(E),r.appendChild(p),r},_createRouteShowResultsDetailsElement:function(){var n=document.createElement("input");return n.id=this._addUID("GProuteResultsShowDetails"),n.type="checkbox",n},_createRouteResultsDetailsElement:function(){var n=document.createElement("div");return n.id=this._addUID("GProuteResultsDetails"),n},_addRouteResultsDetailsElement:function(n,t){var e=this,r=document.getElementById(this._addUID("GProuteResultsDetails"));if(r.childElementCount)for(;r.firstChild;)r.removeChild(r.firstChild);for(var i=0,o=0,s=0;s<n.length;s++){var a=s+1,c=n[s],h=document.createElement("div");h.className="GProuteResultsDetailsNumber",h.innerHTML=a+".",r.appendChild(h),o+=parseFloat(c.duration),i+=parseFloat(c.distance);var p=0;if(parseInt(i/1e3,10)){var E=Math.round(i);p=(E/=1e3)+" km"}else p=Math.round(i)+" m";var S=document.createElement("div");S.className="GProuteResultsDetailsInstruction",S.id=this._addUID("GProuteResultsDetailsInstruction_"+a),S.title="distance : "+p+" / temps : "+t(o),S.innerHTML=c.instruction,S.addEventListener("mouseover",function(x){e.onRouteResultsDetailsMouseOver(x)}),S.addEventListener("mouseout",function(x){e.onRouteResultsDetailsMouseOut(x)}),S.addEventListener("click",function(x){"function"==typeof e.onRouteResultsDetailsClick&&e.onRouteResultsDetailsClick(x)}),r.appendChild(S)}return r},_createRoutePanelFormPointElement:function(n,t,e){var r=this,i=document.createElement("div");i.id="GProutePoint"+n,i.className=e?"GPflexInput GProuteStageFlexInput":"GPflexInput GProuteStageFlexInputHidden";var o=document.createElement("label");o.id="GProuteOriginLabel"+n,o.htmlFor="GProuteOrigin"+n,o.innerHTML=t,o.addEventListener("click",function(){var p=this.id.charAt(this.id.length-1);document.getElementById("GProuteOriginCoords"+p).value="";for(var m=1;m<8;m++)document.getElementById("GProutePoint"+m).style.display="flex";document.getElementById("GProuteForm").className="",document.getElementById("GProuteOriginPointer"+p).checked=!1,document.getElementById("GProuteOrigin"+p).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+p).className="GProuteOriginHidden"}),i.appendChild(o);var s=document.createElement("input");s.id="GProuteOrigin"+n,s.className="GProuteOriginVisible",s.type="text",s.placeholder="Saisir une adresse",s.addEventListener("keyup",function(p){var m=p.which||p.keyCode;if(13!==m&&10!==m){var E=this.id.charAt(this.id.length-1);document.getElementById("GProuteOrigin"+E).value.length>2?document.getElementById("GProuteAutoCompleteList"+E).style.display="block":document.getElementById("GProuteAutoCompleteList"+E).style.display="none",r.onAutoCompleteSearchText(p)}}),s.addEventListener("blur",function(){var p=this.id.charAt(this.id.length-1);document.getElementById("GProuteAutoCompleteList"+p).style.display="none"}),i.appendChild(s);var a=document.createElement("input");a.id="GProuteOriginCoords"+n,a.className="GProuteOriginHidden",a.type="text",a.disabled=!0,i.appendChild(a);var c=document.createElement("input");c.id="GProuteOriginPointer"+n,c.type="checkbox",i.appendChild(c);var h=document.createElement("label");return h.id="GProuteOriginPointerImg"+n,h.htmlFor="GProuteOriginPointer"+n,h.className="GProuteOriginPointerImg",h.title="Pointer un lieu sur la carte",h.addEventListener("click",function(p){p.preventDefault(),p.stopPropagation();var E,m=this.id.charAt(this.id.length-1);for(E=1;E<8;E++)m!==E&&(document.getElementById("GProuteOriginPointer"+E).checked=!1,"Pointer un lieu sur la carte"===document.getElementById("GProuteOriginCoords"+E).value&&(document.getElementById("GProuteOriginCoords"+E).value="",document.getElementById("GProuteOrigin"+E).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+E).className="GProuteOriginHidden"));if(document.getElementById("GProuteOriginPointer"+m).checked){for(document.getElementById("GProuteOriginCoords"+m).value="",E=1;E<8;E++)document.getElementById("GProutePoint"+E).style.display="flex";document.getElementById("GProuteForm").className="",document.getElementById("GProuteOriginPointer"+m).checked=!1,document.getElementById("GProuteOrigin"+m).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+m).className="GProuteOriginHidden"}else{for(document.getElementById("GProuteOriginCoords"+m).value="Pointer un lieu sur la carte",E=1;E<8;E++)document.getElementById("GProutePoint"+E).style.display=m===E?"flex":"none";document.getElementById("GProuteForm").className="GProuteFormMini",document.getElementById("GProuteOriginPointer"+m).checked=!0,document.getElementById("GProuteOrigin"+m).className="GProuteOriginHidden",document.getElementById("GProuteOriginCoords"+m).className="GProuteOriginVisible"}r.onRouteMapPointClick(p)}),i.appendChild(h),i},_createRoutePanelFormRemoveStageElement:function(n){var t=this,e=document.createElement("div");return e.id="GProuteStageRemove"+n,e.className="GProuteStageRemove",e.title="Supprimer l'\xe9tape",1!==n&&7!==n&&e.addEventListener("click",function(r){var i=this.id.charAt(this.id.length-1);document.getElementById("GProutePoint"+i).className="GPflexInput GProuteStageFlexInputHidden",document.getElementById("GProuteOrigin"+i).value="",document.getElementById("GProuteOrigin"+i).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+i).value="",document.getElementById("GProuteOriginCoords"+i).className="GProuteOriginHidden",document.getElementById("GProuteStageAdd").style.display="",t.onRouteRemovePointClick(r)}),e},_createRoutePanelFormAddStageElement:function(){var n=this,t=document.createElement("div");return t.id="GProuteStageAdd",t.title="Ajouter une \xe9tape",t.addEventListener("click",function(e){for(var r=1,i=0,o=2;o<7;o++)"GPflexInput GProuteStageFlexInputHidden"===document.getElementById("GProutePoint"+o).className?1===r&&(r=o):i++;r<7&&(document.getElementById("GProutePoint"+r).className="GPflexInput GProuteStageFlexInput"),4===i&&(document.getElementById("GProuteStageAdd").style.display="none"),n.onRouteAddPointClick(e)}),t},_createRoutePanelFormAutoCompleteListElement:function(n){var t=this,e=document.createElement("div");return e.id="GProuteAutoCompleteList"+n,e.className="GPadvancedAutoCompleteList",e.addEventListener?e.addEventListener("click",function(r){t.onAutoCompletedResultsItemClick(r),document.getElementById("GProuteAutoCompleteList"+n).style.display="none"},!1):e.attachEvent&&e.attachEvent("onclick",function(r){t.onAutoCompletedResultsItemClick(r),document.getElementById("GProuteAutoCompleteList"+n).style.display="none"}),e},_createRouteAutoCompletedLocationElement:function(n,t,e){var r=document.getElementById("GProuteAutoCompleteList"+t),i=document.createElement("div");i.id="AutoCompletedLocation"+e,i.className="GPautoCompleteProposal",i.innerHTML=n.fullText,r.appendChild(i)},_createRoutePanelFormModeChoiceElement:function(){var n=document.createElement("div");return n.id=this._addUID("GProuteModeChoice"),n},_createRoutePanelFormModeChoiceTransportElement:function(n){var t=this,e=document.createElement("div");e.id=this._addUID("GProuteTransportChoice");var r=document.createElement("span");r.className="GProuteModeLabel",r.innerHTML="Mode de transport",e.appendChild(r);for(var i=0;i<n.length;i++){var o=n[i];if("Voiture"===o){var s=document.createElement("input");s.id=this._addUID("GProuteTransportCar"),s.type="radio",s.name="GProuteTransport",s.value="Voiture",0===i&&(s.checked=!0),s.addEventListener?s.addEventListener("change",function(p){t.onRouteModeTransportChange(p)}):s.attachEvent&&s.attachEvent("onchange",function(p){t.onRouteModeTransportChange(p)}),e.appendChild(s);var a=document.createElement("label");a.className="GProuteTransportImg",a.htmlFor=this._addUID("GProuteTransportCar"),a.title="Voiture",e.appendChild(a)}if("Pieton"===o){var c=document.createElement("input");c.id=this._addUID("GProuteTransportPedestrian"),c.type="radio",c.name="GProuteTransport",c.value="Pieton",0===i&&(c.checked=!0),c.addEventListener?c.addEventListener("change",function(p){t.onRouteModeTransportChange(p)}):c.attachEvent&&c.attachEvent("onchange",function(p){t.onRouteModeTransportChange(p)}),e.appendChild(c);var h=document.createElement("label");h.className="GProuteTransportImg",h.htmlFor=this._addUID("GProuteTransportPedestrian"),h.title="Pi\xe9ton",e.appendChild(h)}}return e},_createRoutePanelFormModeChoiceComputeElement:function(){var n=this,t=document.createElement("div");t.id=this._addUID("GProuteComputationChoice");var e=document.createElement("span");e.className="GProuteModeLabel",e.innerHTML="Mode de calcul",t.appendChild(e);var r=document.createElement("select");r.id=this._addUID("GProuteComputationSelect"),r.className="GPinputSelect",r.addEventListener("change",function(a){n.onRouteModeComputationChange(a)});for(var i=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],o=0;o<i.length;o++){var s=document.createElement("option");s.value=i[o].code,s.text=i[o].label,r.appendChild(s)}return t.appendChild(r),t},_createShowRouteExclusionsElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowRouteExclusions"),n.type="checkbox",n},_createShowRouteExclusionsPictoElement:function(){var n=this,t=document.createElement("label");return t.id=this._addUID("GPshowRouteExclusionsPicto"),t.className="GPshowMoreOptionsImage GPshowMoreOptions GPshowRouteExclusionsPicto",t.htmlFor=this._addUID("GPshowRouteExclusions"),t.title="Exclusions",t.addEventListener?t.addEventListener("click",function(e){n.onShowRouteExclusionsClick(e)}):t.attachEvent&&t.attachEvent("onclick",function(e){n.onShowRouteExclusionsClick(e)}),t},_createRoutePanelFormExclusionsElement:function(){var n=document.createElement("div");n.id=this._addUID("GProuteExclusions");var t=document.createElement("span");return t.className="GProuteExclusionsLabel",t.innerHTML="Passages autoris\xe9s",n.appendChild(t),n},_createRoutePanelFormExclusionOptionsElement:function(n){var t=this,e=document.createElement("div");for(var r in e.className="GProuteExclusionsOptions",n)if(n.hasOwnProperty(r)){var i=n[r];switch(r){case"toll":var o=document.createElement("input");o.id=this._addUID("GProuteExclusionsToll"),o.type="checkbox",o.value="Toll",o.checked=!i,o.addEventListener?o.addEventListener("change",function(m){t.onRouteExclusionsChange(m)}):o.attachEvent&&o.attachEvent("onchange",function(m){t.onRouteExclusionsChange(m)}),e.appendChild(o);var s=document.createElement("label");s.className="GProuteExclusionsOption",s.htmlFor=this._addUID("GProuteExclusionsToll"),s.innerHTML="P\xe9ages",e.appendChild(s);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GProuteExclusionsTunnel"),a.type="checkbox",a.value="Tunnel",a.checked=!i,a.addEventListener?a.addEventListener("change",function(m){t.onRouteExclusionsChange(m)}):a.attachEvent&&a.attachEvent("onchange",function(m){t.onRouteExclusionsChange(m)}),e.appendChild(a);var c=document.createElement("label");c.className="GProuteExclusionsOption",c.htmlFor=this._addUID("GProuteExclusionsTunnel"),c.innerHTML="Tunnels",e.appendChild(c);break;case"bridge":var h=document.createElement("input");h.id=this._addUID("GProuteExclusionsBridge"),h.type="checkbox",h.value="Bridge",h.checked=!i,h.addEventListener?h.addEventListener("change",function(m){t.onRouteExclusionsChange(m)}):h.attachEvent&&h.attachEvent("onchange",function(m){t.onRouteExclusionsChange(m)}),e.appendChild(h);var p=document.createElement("label");p.className="GProuteExclusionsOption",p.htmlFor=this._addUID("GProuteExclusionsBridge"),p.innerHTML="Ponts",e.appendChild(p)}}return e},_createRouteSubmitFormElement:function(){var n=document.createElement("input");return n.id=this._addUID("GProuteSubmit"),n.className="GPinputSubmit",n.type="submit",n.value="Calculer",n},_createRouteFormResetElement:function(){var n=this,t=document.createElement("div");return t.id=this._addUID("GProuteReset"),t.title="R\xe9initialiser les param\xe8tres",t.addEventListener("click",function(e){n.onRouteResetClick(e)}),t}};var sl=Ki_getLogger("route"),y6=function(n){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(e),this._container=this._createMainContainerElement(),this._containerElement=null,e.element&&e.element.appendChild&&(e.element.appendChild(this._container),this._containerElement=e.element),n.call(this,{element:this._containerElement||this._container,target:e.target,render:e.render})}return n&&(t.__proto__=n),t.prototype=Object.create(n.prototype,{}),vr.assign(t.prototype,kQ),t.prototype.constructor=t,t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GProutePanelClose-"+this._uid).click():document.getElementById("GPshowRoute-"+this._uid).click(),this.collapsed=e):sl.log("[ERROR] Route:setCollapsed - missing collapsed parameter")},t.prototype.getLayer=function(){return this._geojsonSections},t.prototype.setMap=function(e){e&&(this._container=this._initContainer(e),this.draggable&&jv_dragElement(this._panelRouteContainer,this._panelHeaderRouteContainer,e.getTargetElement())),n.prototype.setMap.call(this,e)},t.prototype.initialize=function(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},routeOptions:{},autocompleteOptions:{},layerDescription:{title:"Itin\xe9raire",description:"Itin\xe9raire bas\xe9 sur un graphe"}},vr.assign(this.options,e),this.options.markersOpts=vr.assign({departure:{url:Ls.red,offset:Ls.defaultOffset},stages:{url:Ls.lightOrange,offset:Ls.defaultOffset},arrival:{url:Ls.darkOrange,offset:Ls.defaultOffset}},e.markersOpts),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=ni.generate(),this._panelRouteContainer=null,this._panelHeaderRouteContainer=null,this._waitingContainer=null,this._formRouteContainer=null,this._resultsRouteContainer=null,this._showRouteExclusionsElement=null,this._currentPoints=[],this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._waiting=!1,this._timer=null,this._geojsonRoute=null,this._geojsonSections=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._resultsSelectInteraction=null,this._resultsHoverInteraction=null,this._defaultFeatureStyle=new br({stroke:new Gi({color:"rgba(0,183,152,0.9)",width:12})}),this._selectedFeatureStyle=new br({stroke:new Gi({color:"rgba(255,102,0,0.9)",width:12})}),this._currentRouteInformations=null,this._resources={},this._noRightManagement=!1,this._checkRightsManagement(),this.listenerKey=null},t.prototype._checkInputOptions=function(e){if(e.graphs)if(Array.isArray(e.graphs)&&e.graphs.length)for(var r=0;r<e.graphs.length;r++)"string"==typeof e.graphs[r]?("pieton"===e.graphs[r].toLowerCase()&&(e.graphs[r]="Pieton"),"voiture"===e.graphs[r].toLowerCase()&&(e.graphs[r]="Voiture")):(sl.log("[ol.control.Route] ERROR : parameter 'graphs' elements should be of type 'string'"),e.graphs[r]=null);else sl.warn("'graphs' parameter should be an array"),e.graphs=null;"true"===e.collapsed&&(e.collapsed=!0),"false"===e.collapsed&&(e.collapsed=!1)},t.prototype._checkRightsManagement=function(){var e=null,r=[];(!(r=(e=this.options.routeOptions.filterOptions)?e.type:[])||0===r.length)&&(r=["Voiture","Pieton"]);var o=zp_check({key:this.options.routeOptions.apiKey||this.options.apiKey,resources:r,services:["Itineraire"]});sl.log("rightManagementRoute",o),(!(r=(e=this.options.autocompleteOptions.filterOptions)?e.type:[])||0===r.length)&&(r=["PositionOfInterest","StreetAddress"]);var s=zp_check({key:this.options.autocompleteOptions.apiKey||this.options.apiKey,resources:r,services:["AutoCompletion"]});sl.log("rightManagementAutoComplete",s),!o&&!s&&(this._noRightManagement=!0),s&&(this._resources.AutoCompletion={},this._resources.AutoCompletion.resources=s.AutoCompletion,this._resources.AutoCompletion.key=s.key),o&&(this._resources.Itineraire={},this._resources.Itineraire.resources=o.Itineraire,this._resources.Itineraire.key=o.key)},t.prototype._initContainer=function(e){var r=this._container,i=this._showRouteContainer=this._createShowRouteElement();r.appendChild(i),this.collapsed||(i.checked=!0);var o=this._createShowRoutePictoElement();r.appendChild(o);var s=this._panelRouteContainer=this._createRoutePanelElement(),a=this._panelHeaderRouteContainer=this._createRoutePanelHeaderElement();s.appendChild(a);for(var c=this._formRouteContainer=this._createRoutePanelFormElement(),h=this._createRoutePanelFormPointsElement(e),p=0;p<h.length;p++)c.appendChild(h[p]);var m=this._createRoutePanelFormModeChoiceElement();m.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs)),m.appendChild(this._createRoutePanelFormModeChoiceComputeElement()),c.appendChild(m),c.appendChild(this._createShowRouteExclusionsElement()),this._showRouteExclusionsElement=this._createShowRouteExclusionsPictoElement(),c.appendChild(this._showRouteExclusionsElement);var E=this._createRoutePanelFormExclusionsElement();E.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions)),c.appendChild(E);var S=this._createRouteFormResetElement();c.appendChild(S);var x=this._createRouteSubmitFormElement();c.appendChild(x),s.appendChild(c);var P=this._resultsRouteContainer=this._createRoutePanelResultsElement();s.appendChild(P);var R=this._waitingContainer=this._createRouteWaitingElement();return s.appendChild(R),r.appendChild(s),r.addEventListener&&r.addEventListener("click",F=>this._hideRouteSuggestedLocations(F)),r},t.prototype._initTransport=function(){this._currentTransport="Voiture";var e=this.options.graphs;(!e||0===e.length)&&(this.options.graphs=["Voiture","Pieton"]),Array.isArray(e)&&e.length&&("Voiture"===e[0]||"Pieton"===e[0])&&(this._currentTransport=e[0]);var r=this.options.routeOptions;r.graph&&(this._currentTransport=r.graph)},t.prototype._initComputation=function(){this._currentComputation="fastest";var e=this.options.routeOptions;e.routePreference&&(this._currentComputation=e.routePreference)},t.prototype._initExclusions=function(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||"object"==typeof e&&0===Object.keys(e).length)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&"object"==typeof e&&Object.keys(e).length)for(var r in e)e.hasOwnProperty(r)&&e[r]&&this._currentExclusions.push(r);var i=this.options.routeOptions;Array.isArray(i.exclusions)&&(this._currentExclusions=i.exclusions)},t.prototype._initPopupDiv=function(){var e=this,r=document.createElement("div");r.className="gp-feature-info-div";var i=document.createElement("input");return i.type="button",i.className="gp-styling-button closer",i.onclick=function(){return null!=e._popupOverlay&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",r.appendChild(this._popupContent),r.appendChild(i),r},t.prototype._createRoutePanelFormPointsElement=function(e){var r=[],i=1,o=new nI({apiKey:this.options.apiKey||null,tag:{id:i,groupId:this._uid,markerOpts:this.options.markersOpts.departure,label:"D\xe9part",display:!0},autocompleteOptions:this.options.autocompleteOptions||null});for(o.setMap(e),this._addFormPointsEventListeners(o),r.push(o._container),this._currentPoints.push(o),i=2;i<7;i++){var s=new nI({apiKey:this.options.apiKey||null,tag:{id:i,groupId:this._uid,label:"Etape",markerOpts:this.options.markersOpts.stages,display:!1,removeOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});s.setMap(e),this._addFormPointsEventListeners(s),r.push(s._container),this._currentPoints.push(s)}var a=new nI({apiKey:this.options.apiKey||null,tag:{id:i,groupId:this._uid,markerOpts:this.options.markersOpts.arrival,label:"Arriv\xe9e",display:!0,addOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});return a.setMap(e),this._addFormPointsEventListeners(a),r.push(a._container),this._currentPoints.push(a),r},t.prototype._addFormPointsEventListeners=function(e){!e||(e._inputLabelContainer.addEventListener?(e._inputLabelContainer.addEventListener("click",r=>this.onRouteOriginLabelClick(r)),e._inputShowPointer.addEventListener("click",r=>this.onRouteOriginPointerClick(r,e)),e._removePointElement&&e._removePointElement.addEventListener("click",r=>{sl.trace("click on _removePointElement",r)}),e._addPointElement&&e._addPointElement.addEventListener("click",r=>{sl.trace("click on _addPointElement",r)})):e._inputLabelContainer.attachEvent&&(e._inputLabelContainer.attachEvent("onclick",r=>this.onRouteOriginLabelClick(r)),e._inputShowPointer.attachEvent("onclick",r=>this.onRouteOriginPointerClick(r,e)),e._removePointElement&&e._removePointElement.attachEvent("onclick",r=>{}),e._addPointElement&&e._addPointElement.attachEvent("onclick",r=>{})))},t.prototype.onRouteComputationSubmit=function(e){sl.log("onRouteComputationSubmit",e);var i,r=this._currentPoints;if(r[0]&&r[0].getCoordinate){var o=r[0].getCoordinate();sl.log("start",i={x:o[0],y:o[1]})}var s,a=r[r.length-1];if(a&&a.getCoordinate){var c=a.getCoordinate();sl.log("end",s={x:c[0],y:c[1]})}for(var h=[],p=1;p<r.length-1;p++)if(r[p]&&r[p].getCoordinate){var m=r[p].getCoordinate();if(m){var E={x:m[0],y:m[1]};sl.log("step",E),h.push(E)}}if(!this._noRightManagement){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;var S=this.options.routeOptions,x=S.protocol||"XHR",P=S.timeOut||0;"JSONP"===x&&0===P&&(P=15e3);var R=this;this._requestRouting({startPoint:i,endPoint:s,viaPoints:h,graph:S.graph||this._currentTransport,routePreference:S.routePreference||this._currentComputation,exclusions:S.exclusions||this._currentExclusions,geometryInInstructions:!0,distanceUnit:"m",timeOut:P,protocol:x,onSuccess:function(F){sl.log(F),F&&R._fillRouteResultsDetails(F)},onFailure:function(F){R._hideWaitingContainer(),R._clearRouteResultsDetails(),sl.log(F.message)}})}},t.prototype.onRouteOriginLabelClick=function(){this._formRouteContainer.className="",Aa(this.listenerKey),this.dispatchEvent("route:drawend")},t.prototype.onRouteOriginPointerClick=function(e,r){var i=this.getMap();r._inputShowPointerContainer.checked?(this._formRouteContainer.className="GProuteFormMini",this.listenerKey=i.on("click",()=>{"GProuteFormMini"===this._formRouteContainer.className&&(this._formRouteContainer.className=""),Aa(this.listenerKey),this.dispatchEvent("route:drawend")}),this.dispatchEvent("route:drawstart")):(this._formRouteContainer.className="",Aa(this.listenerKey),this.dispatchEvent("route:drawend"))},t.prototype.onShowRoutePanelClick=function(e){!this._geojsonSections&&!this._waiting&&this._clear(),this.collapsed=document.getElementById("GPshowRoute-"+this._uid).checked,this.dispatchEvent("change:collapsed")},t.prototype.onRouteModeComputationChange=function(e){var i=e.target.options[e.target.selectedIndex].value;!i||(sl.log(i),this._currentComputation=i)},t.prototype.onRouteModeComputationChangeAndRun=function(e){this.onRouteModeComputationChange(e),this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.onRouteComputationSubmit({computation:this._currentComputation,transport:this._currentTransport,exclusions:this._currentExclusions})},t.prototype.onRouteModeTransportChange=function(e){var r=e.target.value;!r||(this._currentTransport=r)},t.prototype.onShowRouteExclusionsClick=function(e){sl.log("onShowRouteExclusionsClick",e)},t.prototype.onRouteExclusionsChange=function(e){var r=e.target.value,i=e.target.checked;if(r&&"string"==typeof r){r=r.toLowerCase();for(var o=!1,s=null,a=0;a<this._currentExclusions.length;a++)this._currentExclusions[a]===r&&(s=a,o=!0);!o&&!i&&this._currentExclusions.push(r),o&&i&&this._currentExclusions.splice(s,1)}},t.prototype.onRouteResetClick=function(){for(var e=this._currentPoints,r=0;r<e.length;r++)e[r].clear();this._clear(),this._clearRouteInputOptions()},t.prototype.onShowRouteResultsNewClick=function(){this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry()},t.prototype.onRouteResultsDetailsMouseOver=function(e){var r=e.target.id,i=r.substring(r.indexOf("_")+1);e.target.classList&&e.target.classList.add("GProuteResultsDetailsInstructionHighlight"),this._geojsonSections&&this._geojsonSections.getSource().getFeatureById(parseInt(i,10)).setStyle(this._selectedFeatureStyle)},t.prototype.onRouteResultsDetailsMouseOut=function(e){var r=e.target.id,i=r.substring(r.indexOf("_")+1);e.target.classList&&e.target.classList.remove("GProuteResultsDetailsInstructionHighlight"),this._geojsonSections&&this._geojsonSections.getSource().getFeatureById(parseInt(i,10)).setStyle(null)},t.prototype._requestRouting=function(e){if(e&&("object"!=typeof e||0!==Object.keys(e).length)&&e.startPoint&&e.endPoint&&!this._noRightManagement&&this._resources.Itineraire){var r=this._resources.Itineraire.resources;if(r&&("object"!=typeof r||0!==Object.keys(r).length)){for(var i=this._resources.Itineraire.key,o=!1,s=0;s<r.length;s++)r[s]===e.graph&&(o=!0);if(!o)return void sl.log("no rights for this service !?");e.apiKey=this.options.routeOptions.apiKey||this.options.apiKey||i,"boolean"!=typeof e.ssl&&(e.ssl="boolean"!=typeof this.options.ssl||this.options.ssl),sl.log(e),this._displayWaitingContainer(),aa.Services.route(e)}}},t.prototype._fillRouteResultsDetails=function(e){var r=e.totalDistance,i=e.totalTime,o=this._simplifiedInstructions(e.routeInstructions);o&&this._fillRouteResultsDetailsContainer(r,i,o);var s=e.routeGeometry;s&&this._fillRouteResultsDetailsGeometry(s,this._defaultFeatureStyle),o&&o[0].geometry&&this._fillRouteResultsDetailsFeatureGeometry(o,this._defaultFeatureStyle);var a=e.bbox;if(a){var c=this.getMap(),h=[a.left,a.bottom,a.right,a.top],p=c.getView().getProjection().getCode();"EPSG:4326"!==p&&(h=kd(h,"EPSG:4326",p)),c.getView().fit(h,c.getSize())}this._currentRouteInformations=e,this._formRouteContainer.className="GProuteComponentHidden",this._hideWaitingContainer(),this._resultsRouteContainer.className=""},t.prototype._fillRouteResultsDetailsContainer=function(e,r,i){this._resultsRouteValuesContainer=this._addRouteResultsValuesElement(e,r,this._convertSecondsToTime),this._resultsRouteDetailsContainer=this._addRouteResultsDetailsElement(i,this._convertSecondsToTime)},t.prototype._fillRouteResultsDetailsGeometry=function(e,r){this._clearRouteResultsGeometry();var i=this.getMap();if(e){var o={type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e},a=new qE({defaultDataProjection:"EPSG:4326"}).readFeatures(o,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this._geojsonRoute=new rc({source:new bu({features:a}),style:r}),i.addLayer(this._geojsonRoute)}},t.prototype._fillRouteResultsDetailsFeatureGeometry=function(e,r){this._clearRouteResultsFeatureGeometry();for(var i=this.getMap(),o={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[]},s=0;s<e.length;s++){for(var a=e[s],c=s+1,h=a.geometry.coordinates,p=0;p<h.length;p++)"string"==typeof h[p][0]&&(h[p][0]=parseFloat(h[p][0]),h[p][1]=parseFloat(h[p][1]));o.features.push({type:"Feature",geometry:a.geometry,properties:{popupContent:"("+c+") distance : "+this._convertDistance(a.distance)+" / temps : "+this._convertSecondsToTime(a.duration)},id:c})}sl.log(o);var x,m=new qE({defaultDataProjection:"EPSG:4326"}),E=this.getMap().getView().getProjection().getCode(),S=m.readFeatures(o,{dataProjection:"EPSG:4326",featureProjection:E});this._geojsonSections=new rc({source:new bu({features:S}),style:r,opacity:.9}),"Pieton"===this._currentTransport?(x="pi\xe9ton",this._geojsonSections.gpResultLayerId="Pieton$OGC:OPENLS;Itineraire"):(x="voiture",this._geojsonSections.gpResultLayerId="Voiture$OGC:OPENLS;Itineraire"),i.addLayer(this._geojsonSections),i.getControls().forEach(P=>{if(P instanceof Sm){var R=this._geojsonSections.gpLayerId;P._layers[R].title===R&&P.addLayer(this._geojsonSections,{title:this.options.layerDescription.title+" ("+x+")",description:this.options.layerDescription.description})}},this),this._resultsHoverInteraction=new pf({condition:Lp,layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsHoverInteraction.on("select",P=>this._onResultsFeatureMouseOver(P)),i.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new pf({layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsSelectInteraction.on("select",P=>this._onResultsFeatureSelect(P)),i.addInteraction(this._resultsSelectInteraction)},t.prototype._onResultsFeatureMouseOver=function(e){if(0!==e.selected.length){var i=document.getElementById("GProuteResultsDetailsInstruction_"+e.selected[0].getId()+"-"+this._uid);i&&i.classList&&i.classList.add("GProuteResultsDetailsInstructionHighlight")}if(0!==e.deselected.length){var s=document.getElementById("GProuteResultsDetailsInstruction_"+e.deselected[0].getId()+"-"+this._uid);s&&s.classList&&s.classList.remove("GProuteResultsDetailsInstructionHighlight")}},t.prototype._onResultsFeatureSelect=function(e){var r=this.getMap();0!==e.selected.length?(this._popupContent.innerHTML=e.selected[0].getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Eu({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),r.addOverlay(this._popupOverlay))):null!=this._popupOverlay&&this._popupOverlay.setPosition(void 0)},t.prototype._clear=function(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null,this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry();for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations()},t.prototype._clearRouteInputOptions=function(){var e;this._initTransport(),this._initComputation(),this._initExclusions(),"Pieton"===this._currentTransport?(e=document.getElementById("GProuteTransportPedestrian-"+this._uid))&&(e.checked="true"):(e=document.getElementById("GProuteTransportCar-"+this._uid))&&(e.checked="true");var r=document.getElementById("GProuteComputationSelect-"+this._uid);r&&(r.value=this._currentComputation);var i=document.getElementById("GProuteExclusionsToll-"+this._uid);i&&(i.checked=-1===this._currentExclusions.indexOf("toll"));var o=document.getElementById("GProuteExclusionsTunnel-"+this._uid);o&&(o.checked=-1===this._currentExclusions.indexOf("tunnel"));var s=document.getElementById("GProuteExclusionsBridge-"+this._uid);s&&(s.checked=-1===this._currentExclusions.indexOf("bridge"))},t.prototype._removeRouteStepLocations=function(){var e=document.querySelectorAll('div[id^="GPlocationPoint"]');if(0!==e.length){for(var r=[],i=0;i<e.length;i++)-1!==e[i].id.indexOf(this._uid)&&r.push(e[i]);for(var o=1;o<r.length-1;o++){var s=r[o].classList;if(0!==s.length)for(var a=0;a<s.length;a++)"GPlocationStageFlexInput"===s[a]&&document.getElementById(this._addUID("GPlocationStageRemove_"+(o+1))).click()}}},t.prototype._clearRouteResultsDetails=function(){if(this._currentRouteInformations=null,this._resultsRouteDetailsContainer){var e=this._resultsRouteDetailsContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild)}if(this._resultsRouteValuesContainer){var r=this._resultsRouteValuesContainer;if(r.childElementCount)for(;r.firstChild;)r.removeChild(r.firstChild)}},t.prototype._clearRouteResultsGeometry=function(){var e=this.getMap();null!=this._geojsonRoute&&(e.removeLayer(this._geojsonRoute),this._geojsonRoute=null)},t.prototype._clearRouteResultsFeatureGeometry=function(){var e=this.getMap();null!=this._geojsonSections&&(e.removeLayer(this._geojsonSections),this._geojsonSections=null),null!=this._popupOverlay&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),null!=this._resultsSelectInteraction&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),null!=this._resultsHoverInteraction&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)},t.prototype._hideRouteSuggestedLocations=function(e){if(e.target&&e.target.id&&-1!==e.target.id.indexOf("GPlocationOrigin_"))for(var r=parseInt(e.target.id.split("_")[1][0],10)-1,i=0;i<this._currentPoints.length;i++)i!==parseInt(r,10)&&this._currentPoints[i]._hideSuggestedLocation();else for(var o=0;o<this._currentPoints.length;o++)this._currentPoints[o]._hideSuggestedLocation()},t.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GProuteCalcWaitingContainerVisible",this._waiting=!0;var e=this.options.routeOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var r=this;this._timer=setTimeout(function(){!0===r._waiting?r._hideWaitingContainer():r._timer&&clearTimeout(r._timer)},16e3)}},t.prototype._hideWaitingContainer=function(){if(this._waiting){this._waitingContainer.className="GProuteCalcWaitingContainerHidden",this._waiting=!1;var e=this.options.routeOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}},t.prototype._simplifiedInstructions=function(e){var r=[],i=e[0];1===e.length&&r.push(i);for(var o=1;o<e.length;o++){var s=e[o];if(s.instruction===i.instruction){i.distance=(parseFloat(s.distance)+parseFloat(i.distance)).toString(),i.duration=(parseFloat(s.duration)+parseFloat(i.duration)).toString();for(var a=1;a<s.geometry.coordinates.length;a++)i.geometry.coordinates.push(s.geometry.coordinates[a])}else r.push(i),i=s,o===e.length-1&&(r.push(s),i=null)}return sl.log(r),r},t.prototype._convertSecondsToTime=function(e){var r="";e=Math.round(e);var i=Math.floor(e/3600);return i&&(r=i+"h "),r+(Math.floor(e%3600/60)+" min")},t.prototype._convertDistance=function(e){var i=parseInt(e/1e3,10);return i?i+" km":parseInt(e,10)+" m"},t}(Su);const NQ=y6;window.ol&&window.ol.control&&(window.ol.control.Route=y6);const GQ={_addUID:function(n){return this._uid?n+"-"+this._uid:n},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPisochron"),n.className="GPwidget",n},_createShowIsoElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowIsochron"),n.type="checkbox",n},_createShowIsoPictoElement:function(){var n=this,t=document.createElement("label");t.id=this._addUID("GPshowIsochronPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowIsochron"),t.title="Calculer une isochrone",t.addEventListener?t.addEventListener("click",function(r){n.onShowIsoPanelClick(r)}):t.attachEvent&&t.attachEvent("onclick",function(r){n.onShowIsoPanelClick(r)});var e=document.createElement("span");return e.id=this._addUID("GPshowIsochronOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createIsoPanelElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPisochronPanel"),n.className="GPpanel",n},_createIsoPanelHeaderElement:function(){var n=this,t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML="Calcul d'isochrone",t.appendChild(e);var r=document.createElement("div");return r.id=this._addUID("GPisochronPanelClose"),r.className="GPpanelClose",r.title="Fermer le panneau",r.addEventListener?r.addEventListener("click",function(){document.getElementById(n._addUID("GPshowIsochronPicto")).click()},!1):r.attachEvent&&r.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowIsochronPicto")).click()}),t.appendChild(r),t},_createIsoPanelFormElement:function(){var n=this,t=document.createElement("form");return t.id=this._addUID("GPisochronForm"),t.addEventListener("submit",function(e){return e.preventDefault(),n.onIsoComputationSubmit(e),!1}),t},_createIsoWaitingElement:function(){var n=document.createElement("div");n.id=this._addUID("GPisochronCalcWaitingContainer"),n.className="GPisochronCalcWaitingContainerHidden";var t=document.createElement("p");return t.className="GPisochronCalcWaiting",t.innerHTML="Calcul en cours...",n.appendChild(t),n},_createIsoPanelFormTypeChoiceElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPisochronChoice"),n},_createIsoPanelFormTypeChoiceChronElement:function(n){var t=this,e=document.createElement("div");e.className="GPisochronChoiceAlt";var r=document.createElement("input");r.id=this._addUID("GPisochronChoiceAltChron"),r.name="GPisochronChoiceMode",r.type="radio",r.checked=!!n,r.addEventListener?r.addEventListener("change",function(s){document.getElementById(t._addUID("GPisochronValueChron")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueDist")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange(s)},!1):r.attachEvent&&r.attachEvent("onchange",function(){document.getElementById(t._addUID("GPisochronValueChron")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueDist")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange()}),r.value="isochron",e.appendChild(r);var i=document.createElement("label");i.className="GPisochronChoiceAltImg",i.htmlFor=this._addUID("GPisochronChoiceAltChron"),e.appendChild(i);var o=document.createElement("span");return o.id=this._addUID("GPisochronChoiceAltChronTxt"),o.innerHTML="isochrone",o.addEventListener?o.addEventListener("click",function(){document.getElementById(t._addUID("GPisochronChoiceAltChron")).click()},!1):o.attachEvent&&o.attachEvent("onclick",function(){document.getElementById(t._addUID("GPisochronChoiceAltChron")).click()}),e.appendChild(o),e},_createIsoPanelFormTypeChoiceDistElement:function(n){var t=this,e=document.createElement("div");e.className="GPisochronChoiceAlt";var r=document.createElement("input");r.id=this._addUID("GPisochronChoiceAltDist"),r.name="GPisochronChoiceMode",r.type="radio",r.checked=!!n,r.addEventListener?r.addEventListener("change",function(s){document.getElementById(t._addUID("GPisochronValueDist")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueChron")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange(s)},!1):r.attachEvent&&r.attachEvent("onchange",function(){document.getElementById(t._addUID("GPisochronValueDist")).className="GPflexInput",document.getElementById(t._addUID("GPisochronValueChron")).className="GPisochronValueHidden",t.onIsoTypeChoiceChange()}),r.value="isodistance",e.appendChild(r);var i=document.createElement("label");i.className="GPisochronChoiceAltImg",i.htmlFor=this._addUID("GPisochronChoiceAltDist"),e.appendChild(i);var o=document.createElement("span");return o.id=this._addUID("GPisochronChoiceAltDistTxt"),o.innerHTML="isodistance",o.addEventListener?o.addEventListener("click",function(){document.getElementById(t._addUID("GPisochronChoiceAltDist")).click()},!1):o.attachEvent&&o.attachEvent("onclick",function(){document.getElementById(t._addUID("GPisochronChoiceAltDist")).click()}),e.appendChild(o),e},_createIsoPanelFormValueIsochronElement:function(n){var t=this,e=document.createElement("div");e.id=this._addUID("GPisochronValueChron"),e.className=n?"GPflexInput":"GPisochronValueHidden";var r=document.createElement("label");r.id=this._addUID("GPisochronValueChronLabel"),r.htmlFor=this._addUID("GPisochronValueChronInput"),r.innerHTML="Temps",e.appendChild(r);var i=document.createElement("input");i.id=this._addUID("GPisochronValueChronInput1"),i.min="0",i.step="1",i.value="0",i.type="number",i.addEventListener?i.addEventListener("change",function(c){"function"==typeof t.onIsoValueChronTimeMinuteChange&&t.onIsoValueChronTimeHourChange(c)}):i.attachEvent&&i.attachEvent("onchange",function(c){"function"==typeof t.onIsoValueChronTimeMinuteChange&&t.onIsoValueChronTimeHourChange(c)}),e.appendChild(i);var o=document.createElement("label");o.innerHTML="h",e.appendChild(o);var s=document.createElement("input");s.id=this._addUID("GPisochronValueChronInput2"),s.min="0",s.max="59",s.step="1",s.value="0",s.type="number",s.addEventListener?s.addEventListener("change",function(c){"function"==typeof t.onIsoValueChronTimeMinuteChange&&t.onIsoValueChronTimeMinuteChange(c)}):s.attachEvent&&s.attachEvent("onchange",function(c){"function"==typeof t.onIsoValueChronTimeMinuteChange&&t.onIsoValueChronTimeMinuteChange(c)}),e.appendChild(s);var a=document.createElement("label");return a.innerHTML="min",e.appendChild(a),e},_createIsoPanelFormValueIsodistanceElement:function(n){var t=this,e=document.createElement("div");e.id=this._addUID("GPisochronValueDist"),e.className=n?"GPflexInput":"GPisochronValueHidden";var r=document.createElement("label");r.id=this._addUID("GPisochronValueDistLabel"),r.htmlFor=this._addUID("GPisochronValueDistInput"),r.innerHTML="Distance",e.appendChild(r);var i=document.createElement("input");i.id=this._addUID("GPisochronValueDistInput"),i.min="0",i.step="any",i.value="0",i.type="number",i.addEventListener?i.addEventListener("change",function(s){"function"==typeof t.onIsoValueDistChange&&t.onIsoValueDistChange(s)}):i.attachEvent&&i.attachEvent("onchange",function(s){"function"==typeof t.onIsoValueDistChange&&t.onIsoValueDistChange(s)}),e.appendChild(i);var o=document.createElement("label");return o.innerHTML="km",e.appendChild(o),e},_createIsoPanelFormModeChoiceElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPisochronModeChoice"),n},_createIsoPanelFormModeChoiceTransportElement:function(n){var t=this,e=document.createElement("div");e.id=this._addUID("GPisochronTransportChoice");var r=document.createElement("span");r.className="GPisochronModeLabel",r.innerHTML="Mode de transport",e.appendChild(r);for(var i=0;i<n.length;i++){var o=n[i];if("Voiture"===o){var s=document.createElement("input");s.id=this._addUID("GPisochronTransportCar"),s.type="radio",s.name="GPisochronTransport",0===i&&(s.checked=!0),s.addEventListener?s.addEventListener("change",function(p){t.onIsoModeTransportChange(p)}):s.attachEvent&&s.attachEvent("onchange",function(p){t.onIsoModeTransportChange(p)}),s.value="Voiture",e.appendChild(s);var a=document.createElement("label");a.className="GPisochronTransportImg",a.htmlFor=this._addUID("GPisochronTransportCar"),a.title="Voiture",e.appendChild(a)}if("Pieton"===o){var c=document.createElement("input");c.id=this._addUID("GPisochronTransportPedestrian"),c.type="radio",c.name="GPisochronTransport",0===i&&(c.checked=!0),c.addEventListener?c.addEventListener("change",function(p){t.onIsoModeTransportChange(p)}):c.attachEvent&&c.attachEvent("onchange",function(p){t.onIsoModeTransportChange(p)}),c.value="Pieton",e.appendChild(c);var h=document.createElement("label");h.className="GPisochronTransportImg",h.htmlFor=this._addUID("GPisochronTransportPedestrian"),h.title="Pi\xe9ton",e.appendChild(h)}}return e},_createIsoPanelFormModeChoiceDirectionElement:function(n){var t=this,e=document.createElement("div");e.id=this._addUID("GPisochronDirectionChoice");var r=document.createElement("span");r.className="GPisochronModeLabel",r.innerHTML="Sens de parcours",e.appendChild(r);var i=document.createElement("select");i.id=this._addUID("GPisochronDirectionSelect"),i.className="GPinputSelect",i.addEventListener("change",function(h){t.onIsoModeDirectionChange(h)});for(var o=0;o<n.length;o++){var s=n[o];if("departure"===s.toLowerCase()){var a=document.createElement("option");0===o&&(a.selected="selected"),a.value="departure",a.text="D\xe9part",i.appendChild(a)}if("arrival"===s.toLowerCase()){var c=document.createElement("option");0===o&&(c.selected="selected"),c.value="arrival",c.text="Arriv\xe9e",i.appendChild(c)}}return e.appendChild(i),e},_createShowIsoExclusionsElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowIsoExclusions"),n.type="checkbox",n},_createShowIsoExclusionsPictoElement:function(){var n=document.createElement("label");return n.id=this._addUID("GPshowIsoExclusionsPicto"),n.className="GPshowMoreOptionsImage GPshowMoreOptions GPshowIsoExclusionsPicto",n.htmlFor=this._addUID("GPshowIsoExclusions"),n.title="Exclusions",n.style.top="240px",n},_createIsoPanelFormExclusionsElement:function(){var n=document.createElement("div");n.id=this._addUID("GPisoExclusions");var t=document.createElement("span");return t.className="GPisoExclusionsLabel",t.innerHTML="Passages autoris\xe9s",n.appendChild(t),n},_createIsoPanelFormExclusionOptionsElement:function(n){var t=this,e=document.createElement("div");for(var r in e.className="GPisoExclusionsOptions",n)if(n.hasOwnProperty(r)){var i=n[r];switch(r){case"toll":var o=document.createElement("input");o.id=this._addUID("GPisoExclusionsToll"),o.type="checkbox",o.checked=!i,o.addEventListener?o.addEventListener("change",function(m){t.onIsoExclusionsChange(m)}):o.attachEvent&&o.attachEvent("onchange",function(m){t.onIsoExclusionsChange(m)}),o.value="Toll",e.appendChild(o);var s=document.createElement("label");s.className="GPisoExclusionsOption",s.htmlFor=this._addUID("GPisoExclusionsToll"),s.innerHTML="P\xe9ages",e.appendChild(s);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GPisoExclusionsTunnel"),a.type="checkbox",a.checked=!i,a.addEventListener?a.addEventListener("change",function(m){t.onIsoExclusionsChange(m)}):a.attachEvent&&a.attachEvent("onchange",function(m){t.onIsoExclusionsChange(m)}),a.value="Tunnel",e.appendChild(a);var c=document.createElement("label");c.className="GPisoExclusionsOption",c.htmlFor=this._addUID("GPisoExclusionsTunnel"),c.innerHTML="Tunnels",e.appendChild(c);break;case"bridge":var h=document.createElement("input");h.id=this._addUID("GPisoExclusionsBridge"),h.type="checkbox",h.checked=!i,h.addEventListener?h.addEventListener("change",function(m){t.onIsoExclusionsChange(m)}):h.attachEvent&&h.attachEvent("onchange",function(m){t.onIsoExclusionsChange(m)}),h.value="Bridge",e.appendChild(h);var p=document.createElement("label");p.className="GPisoExclusionsOption",p.htmlFor=this._addUID("GPisoExclusionsBridge"),p.innerHTML="Ponts",e.appendChild(p)}}return e},_createIsoSubmitFormElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPisochronSubmit"),n.className="GPinputSubmit",n.type="submit",n.value="Calculer",n},_createIsoFormResetElement:function(){var n=this,t=document.createElement("div");return t.id=this._addUID("GPisochronReset"),t.title="R\xe9initialiser les param\xe8tres",t.addEventListener("click",function(e){n.onIsoResetClick(e)}),t}};var La=Ki_getLogger("isocurve"),_6=function(n){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(e),this._container=this._createMainContainerElement(),this._containerElement=null,e.element&&e.element.appendChild&&(e.element.appendChild(this._container),this._containerElement=e.element),n.call(this,{element:this._containerElement||this._container,target:e.target,render:e.render})}return n&&(t.__proto__=n),t.prototype=Object.create(n.prototype,{}),vr.assign(t.prototype,GQ),t.prototype.constructor=t,t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPisochronPanelClose-"+this._uid).click():document.getElementById("GPshowIsochronPicto-"+this._uid).click(),this.collapsed=e):La.log("[ERROR] Isocurve:setCollapsed - missing collapsed parameter")},t.prototype.getLayer=function(){return this._geojsonLayer},t.prototype.setMap=function(e){e&&(this._container=this._initContainer(e),this.draggable&&jv_dragElement(this._IsoPanelContainer,this._IsoPanelHeaderContainer,e.getTargetElement())),n.prototype.setMap.call(this,e)},t.prototype.compute=function(e,r,i){if(this._clear(),this._showIsoContainer.checked||this._pictoIsoContainer.click(),this.getMap()){var s={direction:"departure",method:"time",transport:"Voiture",exclusions:[]};vr.assign(s,i),this._originPoint.setCoordinate(e);var a=this._originPoint.getCoordinate();if(document.getElementById("GPlocationOrigin_1-"+this._uid).value=a[0].toFixed(4)+" / "+a[1].toFixed(4),this._currentTransport=s.transport,"Voiture"===s.transport?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentExclusions=s.exclusions,this._currentComputation=s.method,"time"===s.method){var h=r.split(".");this._currentTimeHour=h[0]||0,document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=h[1]||0,document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=r,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection=s.direction,document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex="departure"===s.direction?0:1,this.onIsoComputationSubmit()}},t.prototype.initialize=function(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,methods:["time","distance"],graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],markerOpts:{url:Ls.lightOrange,offset:Ls.defaultOffset},isocurveOptions:{},autocompleteOptions:{},layerDescription:{title:"Isochrone/Isodistance",description:"isochrones/isodistance bas\xe9 sur un graphe"}},vr.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=ni.generate(),this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._currentDirection=null,this._initDirection(),this._originPoint=null,this._showIsoContainer=null,this._pictoIsoContainer=null,this._waitingContainer=null,this._formContainer=null,this._IsoPanelContainer=null,this._IsoPanelHeaderContainer=null,this._currentIsoResults=null,this._geojsonLayer=null,this._waiting=!1,this._timer=null,this._defaultFeatureStyle=new br({fill:new ro({color:"rgba(0, 183, 152, 0.7)"})}),this._resources={},this._noRightManagement=!1,this._checkRightsManagement(),this.listenerKey=null},t.prototype._checkInputOptions=function(e){var r;if(e.methods)if(Array.isArray(e.methods))if(0===e.methods.length)e.methods=null;else for(r=0;r<e.methods.length;r++)"string"!=typeof e.methods[r]&&La.log("[ol.control.Isocurve] ERROR : parameter 'methods' elements should be of type 'string'");else La.warn("'methods' parameter should be an array"),e.methods=null;if(e.graphs)if(Array.isArray(e.graphs))if(0===e.graphs.length)e.graphs=null;else for(r=0;r<e.graphs.length;r++)"string"!=typeof e.graphs[r]?La.log("[ol.control.Isocurve] ERROR : parameter 'graphs' elements should be of type 'string'"):("pieton"===e.graphs[r].toLowerCase()&&(e.graphs[r]="Pieton"),"voiture"===e.graphs[r].toLowerCase()&&(e.graphs[r]="Voiture"));else La.warn("'graphs' parameter should be an array"),e.graphs=null;if(e.directions)if(Array.isArray(e.directions))if(0===e.directions.length)e.directions=null;else for(r=0;r<e.directions.length;r++)"string"!=typeof e.directions[r]&&La.log("[ol.control.Isocurve] ERROR : parameter 'directions' elements should be of type 'string'");else La.warn("'directions' parameter should be an array"),e.directions=null;"true"===e.collapsed&&(e.collapsed=!0),"false"===e.collapsed&&(e.collapsed=!1)},t.prototype._initTransport=function(){this._currentTransport="Voiture";var e=this.options.graphs;(!e||0===e.length)&&(this.options.graphs=["Voiture","Pieton"]),Array.isArray(e)&&e.length&&("Voiture"===e[0]||"Pieton"===e[0])&&(this._currentTransport=e[0]);var r=this.options.isocurveOptions;r.graph&&(this._currentTransport=r.graph)},t.prototype._initComputation=function(){this._currentComputation="time";var e=this.options.methods;(!e||0===e.length)&&(this.options.methods=["time","distance"]),Array.isArray(e)&&e.length&&("time"===e[0]||"distance"===e[0])&&(this._currentComputation=e[0]);var r=this.options.isocurveOptions;r.method&&(this._currentComputation=r.method),r.time&&(this._currentComputation="time"),r.distance&&(this._currentComputation="distance")},t.prototype._initDirection=function(){this._currentDirection="departure";var e=this.options.directions;(!e||0===e.length)&&(this.options.directions=["departure","arrival"]),Array.isArray(e)&&e.length&&("departure"===e[0]||"arrival"===e[0])&&(this._currentDirection=e[0]);var r=this.options.isocurveOptions;r.reverse||(this._currentDirection="departure"),!0===r.reverse&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])},t.prototype._initExclusions=function(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||"object"==typeof e&&0===Object.keys(e).length)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&"object"==typeof e&&Object.keys(e).length)for(var r in e)e.hasOwnProperty(r)&&e.k&&this._currentExclusions.push(r);var i=this.options.isocurveOptions;Array.isArray(i.exclusions)&&(this._currentExclusions=i.exclusions)},t.prototype._checkRightsManagement=function(){var e=null,r=[];(!(r=(e=this.options.isocurveOptions.filterOptions)?e.type:[])||0===r.length)&&(r=["Voiture","Pieton"]);var o=zp_check({key:this.options.isocurveOptions.apiKey||this.options.apiKey,resources:r,services:["Isochrone"]});La.log("rightManagementIsocurve",o),(!(r=(e=this.options.autocompleteOptions.filterOptions)?e.type:[])||0===r.length)&&(r=["PositionOfInterest","StreetAddress"]);var s=zp_check({key:this.options.autocompleteOptions.apiKey||this.options.apiKey,resources:r,services:["AutoCompletion"]});La.log("rightManagementAutoComplete",s),!o&&!s&&(this._noRightManagement=!0),s&&(this._resources.AutoCompletion={},this._resources.AutoCompletion.resources=s.AutoCompletion,this._resources.AutoCompletion.key=s.key),o&&(this._resources.Isocurve={},this._resources.Isocurve.resources=o.Isochrone,this._resources.Isocurve.key=o.key)},t.prototype._initContainer=function(e){var r=this._container,i=this._showIsoContainer=this._createShowIsoElement();r.appendChild(i),this.collapsed||(i.checked=!0);var o=this._pictoIsoContainer=this._createShowIsoPictoElement();r.appendChild(o);var s=this._IsoPanelContainer=this._createIsoPanelElement(),a=this._IsoPanelHeaderContainer=this._createIsoPanelHeaderElement();s.appendChild(a);var c=this._formContainer=this._createIsoPanelFormElement(),h=this._createIsoPanelFormPointElement(e);c.appendChild(h);for(var p=!1,m=!1,E=this._createIsoPanelFormTypeChoiceElement(),S=0;S<this.options.methods.length;S++)"time"===this.options.methods[S]&&E.appendChild(this._createIsoPanelFormTypeChoiceChronElement(p=0===S)),"distance"===this.options.methods[S]&&E.appendChild(this._createIsoPanelFormTypeChoiceDistElement(m=0===S));c.appendChild(E),c.appendChild(this._createIsoPanelFormValueIsochronElement(p)),c.appendChild(this._createIsoPanelFormValueIsodistanceElement(m));var x=this._createIsoPanelFormModeChoiceElement();if(x.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),x.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),c.appendChild(x),this.options.exclusions&&"object"==typeof this.options.exclusions&&0!==Object.keys(this.options.exclusions).length){c.appendChild(this._createShowIsoExclusionsElement()),c.appendChild(this._createShowIsoExclusionsPictoElement());var P=this._createIsoPanelFormExclusionsElement();P.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),c.appendChild(P)}var R=this._createIsoFormResetElement();c.appendChild(R);var F=this._submitContainer=this._createIsoSubmitFormElement();c.appendChild(F),s.appendChild(c);var D=this._waitingContainer=this._createIsoWaitingElement();return s.appendChild(D),r.appendChild(s),r.addEventListener&&r.addEventListener("click",j=>this._hideIsoSuggestedLocations(j)),r},t.prototype._createIsoPanelFormPointElement=function(e){this._originPoint=new nI({apiKey:this.options.apiKey||null,tag:{id:1,groupId:this._uid,markerOpts:this.options.markerOpts,label:"D\xe9part",display:!0},autocompleteOptions:this.options.autocompleteOptions||null}),this._originPoint.setMap(e);var r=this;return document.getElementById("GPlocationOriginPointerImg_1-"+this._uid).onclick=function(){r._clearGeojsonLayer();var i=r.getMap();r._originPoint._inputShowPointerContainer.checked?(r._formContainer.className="GPisochronFormMini",this.listenerKey=i.on("click",()=>{r._formContainer.className="",r.dispatchEvent("isocurve:drawend")})):(r._formContainer.className="",Aa(this.listenerKey)),r.dispatchEvent("isocurve:drawstart")},document.getElementById("GPlocationOriginLabel_1-"+this._uid).onclick=function(){r._clearGeojsonLayer(),r._formContainer.className="",e.un("click",()=>{r._formContainer.className=""}),r.dispatchEvent("isocurve:drawend")},document.getElementById("GPlocationOrigin_1-"+this._uid).onclick=function(){r._clearGeojsonLayer(),r.dispatchEvent("isocurve:drawend")},this._originPoint._container},t.prototype.onIsoComputationSubmit=function(){if(this._originPoint&&this._originPoint.getCoordinate&&this._originPoint.getCoordinate()){var i,o,e=this._originPoint.getCoordinate(),r={x:e[0],y:e[1]};if(La.log("origin : ",r),"time"===this._currentComputation.toLowerCase()){var s=document.getElementById("GPisochronValueChronInput1-"+this._uid),a=parseInt(s.value,10);isNaN&&isNaN(a)&&(a=0);var c=document.getElementById("GPisochronValueChronInput2-"+this._uid),h=parseInt(c.value,10);isNaN&&isNaN(h)&&(h=0),La.log("time : "+(i=3600*a+60*h))}if("distance"===this._currentComputation.toLowerCase()){var p=document.getElementById("GPisochronValueDistInput-"+this._uid);o=1e3*parseFloat(p.value),La.log("distance : "+o)}if(i||o)if(this._noRightManagement)La.log("[Isocurve] no rights for this service");else{var m=this.options.isocurveOptions||{},E=m.protocol||"XHR",S=m.timeOut||0;"JSONP"===E&&0===S&&(S=15e3);var x=this,P={position:r,graph:m.graph||this._currentTransport,exclusions:m.exclusions||this._currentExclusions,method:m.method||this._currentComputation,smoothing:m.smoothing||!0,timeOut:S,protocol:E,onSuccess:function(R){La.log(R),R&&x._drawIsoResults(R)},onFailure:function(R){x._hideWaitingContainer(),La.log(R.message)}};("arrival"===this._currentDirection.toLowerCase()||m.reverse)&&(P.reverse=!0),i&&(P.time=i),o&&(P.distance=o),this._requestIsoCurve(P)}else La.log("[Isocurve] Missing time or distance parameter to submit isocurve request")}else La.log("[Isocurve] Missing position parameter to submit isocurve request")},t.prototype.onShowIsoPanelClick=function(){this.collapsed=this._showIsoContainer.checked,this.dispatchEvent("change:collapsed")},t.prototype.onIsoTypeChoiceChange=function(e){var r=e.target.value;!r||("isodistance"===r&&(this._currentComputation="distance"),"isochron"===r&&(this._currentComputation="time"))},t.prototype.onIsoModeTransportChange=function(e){var r=e.target.value;!r||(this._currentTransport=r)},t.prototype.onIsoModeDirectionChange=function(e){var r=e.target.value;!r||(this._originPoint._inputLabelContainer.innerHTML="arrival"===r.toLowerCase()?"Arriv\xe9e":"D\xe9part",this._currentDirection=r)},t.prototype.onIsoExclusionsChange=function(e){var r=e.target.value,i=e.target.checked;if(r){for(var o=!1,s=null,a=0;a<this._currentExclusions.length;a++)this._currentExclusions[a]===r&&(s=a,o=!0);!o&&!i&&this._currentExclusions.push(r),o&&i&&(this._currentExclusions[s]=null)}},t.prototype.onIsoResetClick=function(){this._clear()},t.prototype._requestIsoCurve=function(e){if(e&&("object"!=typeof e||0!==Object.keys(e).length)&&e.position){if(this._noRightManagement||!this._resources.Isocurve)return void La.log("no rights for this service");var r=this._resources.Isocurve.resources;if(!r||"object"==typeof r&&0===Object.keys(r).length)return void La.log("no rights for this service");for(var i=!1,o=0;o<r.length;o++)r[o]===e.graph&&(i=!0);if(!i)return void La.log("no rights for this service !?");e.apiKey=this.options.isocurveOptions.apiKey||this.options.apiKey||this._resources.Isocurve.key,"boolean"!=typeof e.ssl&&(e.ssl="boolean"!=typeof this.options.ssl||this.options.ssl),La.log(e),this._clearGeojsonLayer(),this._displayWaitingContainer(),aa.Services.isoCurve(e)}},t.prototype._drawIsoResults=function(e){if(this._currentIsoResults=e,this._hideWaitingContainer(),e.geometry){var c,r=this.getMap(),i={type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e.geometry},o=new qE({defaultDataProjection:"EPSG:4326"}),s=r.getView().getProjection().getCode(),a=o.readFeatures(i,{dataProjection:"EPSG:4326",featureProjection:s});if(this._geojsonLayer=new rc({source:new bu({features:a}),style:this._defaultFeatureStyle,opacity:.9}),"Pieton"===this._currentTransport?(c="pi\xe9ton",this._geojsonLayer.gpResultLayerId="Pieton$GEOPORTAIL:GPP:Isocurve"):(c="voiture",this._geojsonLayer.gpResultLayerId="Voiture$GEOPORTAIL:GPP:Isocurve"),r.addLayer(this._geojsonLayer),a[0]&&a[0].getGeometry()&&a[0].getGeometry().getExtent()){var h=a[0].getGeometry().getExtent();r.getView().fit(h,r.getSize())}var p="time"===this._currentComputation?"Isochrone":"Isodistance";r.getControls().forEach(m=>{if(m instanceof Sm){var E=this._geojsonLayer.gpLayerId;m._layers[E].title===E&&m.addLayer(this._geojsonLayer,{title:this.options.layerDescription.title+" ("+p+"/"+c+")",description:this.options.layerDescription.description})}})}},t.prototype._clear=function(){this._clearIsoInputs(),this._originPoint.clear(),this._clearGeojsonLayer(),this._currentIsoResults=null},t.prototype._clearIsoInputs=function(){var e=document.getElementById("GPisochronValueChronInput1-"+this._uid);e&&(e.value="0");var r=document.getElementById("GPisochronValueChronInput2-"+this._uid);r&&(r.value="0");var o,s,i=document.getElementById("GPisochronValueDistInput-"+this._uid);i&&(i.value="0"),this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions(),"Pieton"===this._currentTransport?(o=document.getElementById("GPisochronTransportPedestrian-"+this._uid))&&(o.checked="true"):(o=document.getElementById("GPisochronTransportCar-"+this._uid))&&(o.checked="true"),"distance"===this._currentComputation.toLowerCase()?((s=document.getElementById("GPisochronChoiceAltDist-"+this._uid))&&(s.checked="true"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPflexInput"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPisochronValueHidden")):((s=document.getElementById("GPisochronChoiceAltChron-"+this._uid))&&(s.checked="true"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPflexInput"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPisochronValueHidden"));var a=document.getElementById("GPisochronDirectionSelect-"+this._uid);a&&(a.value=this._currentDirection),this._originPoint._inputLabelContainer.innerHTML="arrival"===this._currentDirection?"Arriv\xe9e":"D\xe9part";var c=document.getElementById("GPisoExclusionsToll-"+this._uid);c&&(c.checked=-1===this._currentExclusions.indexOf("toll"));var h=document.getElementById("GPisoExclusionsTunnel-"+this._uid);h&&(h.checked=-1===this._currentExclusions.indexOf("tunnel"));var p=document.getElementById("GPisoExclusionsBridge-"+this._uid);p&&(p.checked=-1===this._currentExclusions.indexOf("bridge"))},t.prototype._clearGeojsonLayer=function(){var e=this.getMap();this._geojsonLayer&&(e.removeLayer(this._geojsonLayer),this._geojsonLayer=null)},t.prototype._hideIsoSuggestedLocations=function(e){e.target&&e.target.id&&-1!==e.target.id.indexOf("GPlocationOrigin_")||this._originPoint._hideSuggestedLocation()},t.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GPisochronCalcWaitingContainerVisible",this._waiting=!0;var e=this.options.isocurveOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var r=this;this._timer=setTimeout(function(){!0===r._waiting?r._hideWaitingContainer():r._timer&&clearTimeout(r._timer)},16e3)}},t.prototype._hideWaitingContainer=function(){if(this._waiting){this._waitingContainer.className="GPisochronCalcWaitingContainerHidden",this._waiting=!1;var e=this.options.isocurveOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}},t}(Su);const BQ=_6;window.ol&&window.ol.control&&(window.ol.control.Isocurve=_6);const UQ={_addUID:function(n){return this._uid?n+"-"+this._uid:n},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPreverseGeocoding"),n.className="GPwidget",n},_createShowReverseGeocodingElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowReverseGeocoding"),n.type="checkbox",n},_createShowReverseGeocodingPictoElement:function(){var n=this,t=document.createElement("label");t.id=this._addUID("GPshowReverseGeocodingPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowReverseGeocoding"),t.title="Ouvrir la recherche inverse",t.addEventListener?t.addEventListener("click",function(){n.onShowReverseGeocodingClick()}):t.attachEvent&&t.attachEvent("onclick",function(){n.onShowReverseGeocodingClick()});var e=document.createElement("span");return e.id=this._addUID("GPshowReverseGeocodingOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createReverseGeocodingWaitingElement:function(){var n=document.createElement("div");n.id=this._addUID("GPreverseGeocodingCalcWaitingContainer"),n.className="GPreverseGeocodingCalcWaitingContainerHidden";var t=document.createElement("p");return t.className="GPreverseGeocodingCalcWaiting",t.innerHTML="Recherche en cours...",n.appendChild(t),n},_createReverseGeocodingResultsPanelElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPreverseGeocodingResultsPanel"),n.className="GPpanel GPreverseGeocodingComponentHidden",n},_createReverseGeocodingResultsListElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPreverseGeocodingResultsList"),n},_createReverseGeocodingResultElement:function(n,t){var e=this,r=document.getElementById(this._addUID("GPreverseGeocodingResultsList")),i=document.createElement("div");i.id=this._addUID("ReverseGeocodedLocation_"+t),i.className="GPautoCompleteProposal",i.innerHTML=n,i.title=n,i.addEventListener?(i.addEventListener("mouseover",function(o){e.onReverseGeocodingResultMouseOver(o)}),i.addEventListener("mouseout",function(o){e.onReverseGeocodingResultMouseOut(o)}),i.addEventListener("click",function(o){"function"==typeof e.onReverseGeocodingResultClick&&e.onReverseGeocodingResultClick(o)})):i.attachEvent&&(i.attachEvent("onmouseover",function(o){e.onReverseGeocodingResultMouseOver(o)}),i.attachEvent("onmouseout",function(o){e.onReverseGeocodingResultMouseOut(o)}),i.attachEvent("onclick",function(o){"function"==typeof e.onReverseGeocodingResultClick&&e.onReverseGeocodingResultClick(o)})),r.appendChild(i)},_createReverseGeocodingPanelElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPreverseGeocodingPanel"),n.className="GPpanel",n},_createReverseGeocodingPanelHeaderElement:function(){var n=document.createElement("div");return n.className="GPpanelHeader",n},_createReverseGeocodingPanelReturnPictoElement:function(){var n=this,t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingReturnPicto"),t.title="Nouvelle recherche",t.className="GPreverseGeocodingReturnPictoHidden",t.addEventListener?t.addEventListener("click",function(e){document.getElementById(n._addUID("GPreverseGeocodingResultsPanel")).className="GProuteComponentHidden",document.getElementById(n._addUID("GPreverseGeocodingForm")).className="",document.getElementById(n._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(n._addUID("GPreverseGeocodingReturnPicto")).className="GPreverseGeocodingReturnPictoHidden",n.onGPreverseGeocodingReturnPictoClick(e)}):t.attachEvent&&t.attachEvent("onclick",function(e){document.getElementById(n._addUID("GPreverseGeocodingResultsPanel")).className="GProuteComponentHidden",document.getElementById(n._addUID("GPreverseGeocodingForm")).className="",document.getElementById(n._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(n._addUID("GPreverseGeocodingReturnPicto")).className="GPreverseGeocodingReturnPictoHidden",n.onGPreverseGeocodingReturnPictoClick(e)}),t},_createReverseGeocodingPanelTitleElement:function(){var n=document.createElement("div");return n.className="GPpanelTitle",n.id=this._addUID("GPreverseGeocodingHeaderTitle"),n.innerHTML="Recherche inverse",n},_createReverseGeocodingPanelCloseElement:function(){var n=this,t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingPanelClose"),t.className="GPpanelClose",t.title="Fermer le panneau",t.addEventListener?t.addEventListener("click",function(){document.getElementById(n._addUID("GPshowReverseGeocodingPicto")).click()},!1):t.attachEvent&&t.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowReverseGeocodingPicto")).click()}),t},_createReverseGeocodingPanelFormElement:function(){var n=this,t=document.createElement("form");return t.id=this._addUID("GPreverseGeocodingForm"),t.addEventListener?t.addEventListener("submit",function(e){e.preventDefault(),n.onReverseGeocodingSubmit()}):t.attachEvent&&t.attachEvent("onsubmit",function(e){e.preventDefault(),n.onReverseGeocodingSubmit()}),t},_createReverseGeocodingFormModeChoiceGeocodingTypeElement:function(n){var t=this,e=document.createElement("div");e.className="GPflexInput";var r=document.createElement("label");r.className="GPreverseGeocodingCodeLabel",r.innerHTML="Recherche par",r.title="Recherche par",e.appendChild(r);var i=document.createElement("select");i.className="GPreverseGeocodingCode",i.addEventListener?i.addEventListener("change",function(p){t.onReverseGeocodingTypeChange(p)}):i.attachEvent&&i.attachEvent("onchange",function(p){t.onReverseGeocodingTypeChange(p)}),(!n||!Array.isArray(n))&&(n=["StreetAddress","PositionOfInterest","CadastralParcel"]);for(var o=0;o<n.length;o++)switch(n[o]){case"PositionOfInterest":var s=document.createElement("option");s.value="PositionOfInterest",s.text="Lieux/toponymes",i.appendChild(s);break;case"StreetAddress":var a=document.createElement("option");a.value="StreetAddress",a.text="Adresses",i.appendChild(a);break;case"CadastralParcel":var c=document.createElement("option");c.value="CadastralParcel",c.text="Parcelles cadastrales",i.appendChild(c);break;case"Administratif":var h=document.createElement("option");h.value="Administratif",h.text="Unit\xe9s administratives",i.appendChild(h)}return e.appendChild(i),e},_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement:function(n){var t=this,e=document.createElement("div");e.className="GPflexInput";var r=document.createElement("label");r.className="GPreverseGeocodingCodeLabel",r.innerHTML="D\xe9limitation",r.title="D\xe9limitation",e.appendChild(r);var i=document.createElement("select");i.className="GPreverseGeocodingCode",i.addEventListener?i.addEventListener("change",function(h){t.onReverseGeocodingDelimitationChange(h)}):i.attachEvent&&i.attachEvent("onchange",function(h){t.onReverseGeocodingDelimitationChange(h)}),(!n||!Array.isArray(n))&&(n=["Point","Circle","Extent"]);for(var o=0;o<n.length;o++)switch(n[o].toLowerCase()){case"point":var s=document.createElement("option");s.value="point",s.text="Pointer un lieu",i.appendChild(s);break;case"circle":var a=document.createElement("option");a.value="circle",a.text="Dessiner un cercle",i.appendChild(a);break;case"extent":var c=document.createElement("option");c.value="extent",c.text="Dessiner une emprise",i.appendChild(c)}return e.appendChild(i),e},_createReverseGeocodingSubmitFormElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPreverseGeocodingSubmit"),n.className="GPinputSubmit",n.type="submit",n.value="Rechercher",n}};var ks=Ki_getLogger("reversegeocoding"),E6=function(n){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(e),this._container=this._initContainer(),this._containerElement=null,e.element&&e.element.appendChild&&(e.element.appendChild(this._container),this._containerElement=e.element),n.call(this,{element:this._containerElement||this._container,target:e.target,render:e.render})}return n&&(t.__proto__=n),t.prototype=Object.create(n.prototype,{}),vr.assign(t.prototype,UQ),t.prototype.constructor=t,t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPreverseGeocodingPanelClose-"+this._uid).click():document.getElementById("GPshowReverseGeocoding-"+this._uid).click(),this.collapsed=e):ks.log("[ERROR] ReverseGeocode:setCollapsed - missing collapsed parameter")},t.prototype.setMap=function(e){if(e)this._activateMapInteraction(e),this.draggable&&jv_dragElement(this._panelContainer,this._panelHeaderContainer,e.getTargetElement());else{var r=this.getMap();this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(r),null!=this._inputFeaturesLayer&&(r.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)}n.prototype.setMap.call(this,e)},t.prototype.initialize=function(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,resources:["StreetAddress","PositionOfInterest","CadastralParcel"],delimitations:["Point","Circle","Extent"],reverseGeocodeOptions:{},layerDescription:{title:"Saisie (recherche inverse)",description:"Couche de saisie d'une zone de recherche pour la recherche inverse"}},vr.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=ni.generate(),this._servicesRightManagement={},this._noRightManagement=!1,this._checkRightsManagement(),this._currentGeocodingType=null,this._initGeocodingType(),this._currentGeocodingDelimitation=null,this._initGeocodingDelimitation(),this._showReverseGeocodingInput=null,this._panelContainer=null,this._panelHeaderContainer=null,this._panelTitleContainer=null,this._returnPictoContainer=null,this._formContainer=null,this._resultsContainer=null,this._resultsListContainer=null,this._waitingContainer=null,this._inputFeatures=null,this._inputFeaturesSource=null,this._inputFeaturesLayer=null,this._mapInteraction=null,this._requestOptions=null,this._requestPosition=null,this._requestCircleFilter=null,this._requestBboxFilter=null,this._waiting=!1,this._timer=null,this._reverseGeocodingLocations=[],this._reverseGeocodingLocationsMarkers=[],this._resultsDefaultStyle=new br({image:new wu({src:Ls.lightOrange,anchor:[.5,1]})}),this._resultsSelectedStyle=new br({image:new wu({src:Ls.red,anchor:[.5,1]})}),this._resultsHoverInteraction=null,this._resultsSelectInteraction=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null},t.prototype._checkInputOptions=function(e){var r,i;if(e.resources){var o=e.resources;if(Array.isArray(o)){var s=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"],a=[];for(r=0;r<o.length;r++)-1===s.indexOf(o[r])&&(a.push(r),ks.log("[ReverseGeocode] options.resources : "+o[r]+" is not a resource for reverse geocode"));if(0!==a.length)for(i=0;i<a.length;i++)o.splice(a[i],1)}else ks.log("[ReverseGeocode] 'options.resources' parameter should be an array"),o=null}if(e.delimitations){var c=e.delimitations;if(Array.isArray(c)){var h=["Circle","Point","Extent"],p=[];for(r=0;r<c.length;r++)-1===h.indexOf(c[r])&&(p.push(r),ks.log("[ReverseGeocode] options.delimitations : "+c[r]+" is not a delimitation for reverse geocode"));if(0!==p.length)for(i=0;i<p.length;i++)c.splice(p[i],1)}else ks.log("[ReverseGeocode] 'options.delimitations' parameter should be an array"),c=null}},t.prototype._initGeocodingType=function(){this._currentGeocodingType="StreetAddress";var e=this.options.resources;if((!e||0===e.length)&&(this.options.resources=["StreetAddress","PositionOfInterest","CadastralParcel"]),!this._noRightManagement){if(Array.isArray(e)&&e.length){for(var r=[],i=0;i<e.length;i++)this._servicesRightManagement.Geocode.indexOf(e[i])<0&&(r.push(i),ks.log("[ReverseGeocode] no rights for options.resources : "+e[i]));if(0!==r.length)for(var o=0;o<r.length;o++)e.splice(r[o],1);("StreetAddress"===e[0]||"PositionOfInterest"===e[0]||"CadastralParcel"===e[0]||"Administratif"===e[0])&&(this._currentGeocodingType=e[0])}var s=this.options.reverseGeocodeOptions;s.filterOptions&&Array.isArray(s.filterOptions.type)&&0!==s.filterOptions.type.length&&(this._currentGeocodingType=s.filterOptions.type[0])}},t.prototype._initGeocodingDelimitation=function(){this._currentGeocodingDelimitation="Point";var e=this.options.delimitations;if((!e||0===e.length)&&(this.options.delimitations=["Point","Circle","Extent"]),Array.isArray(e)&&e.length){var r=e[0].toLowerCase();("point"===r||"circle"===r||"extent"===r)&&(this._currentGeocodingDelimitation=e[0])}},t.prototype._initPopupDiv=function(){var e=this,r=document.createElement("div");r.className="gp-feature-info-div";var i=document.createElement("input");return i.type="button",i.className="gp-styling-button closer",i.onclick=function(){return null!=e._popupOverlay&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",r.appendChild(this._popupContent),r.appendChild(i),r},t.prototype._checkRightsManagement=function(){var i,e=[];(!(e=(i=this.options.reverseGeocodeOptions.filterOptions)?i.type:[])||0===e.length)&&(e=this.options.resources),(!e||0===e.length)&&(e=["StreetAddress","PositionOfInterest"]);var o=zp_check({key:this.options.reverseGeocodeOptions.apiKey||this.options.apiKey,resources:e,services:["Geocode"]});ks.log("rightManagementGeocode",o),o?(this.options.apiKey||(this.options.apiKey=o.key),this._servicesRightManagement.Geocode=o.Geocode):this._noRightManagement=!0},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),r=this._showReverseGeocodingInput=this._createShowReverseGeocodingElement();e.appendChild(r),this.collapsed||(r.checked=!0);var i=this._createShowReverseGeocodingPictoElement();e.appendChild(i);var o=this._panelContainer=this._createReverseGeocodingPanelElement(),s=this._panelHeaderContainer=this._createReverseGeocodingPanelHeaderElement(),a=this._returnPictoContainer=this._createReverseGeocodingPanelReturnPictoElement();s.appendChild(a);var c=this._panelTitleContainer=this._createReverseGeocodingPanelTitleElement();s.appendChild(c);var h=this._createReverseGeocodingPanelCloseElement();s.appendChild(h),o.appendChild(s);var p=this._formContainer=this._createReverseGeocodingPanelFormElement();p.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources)),p.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));var m=this._createReverseGeocodingSubmitFormElement();p.appendChild(m),o.appendChild(p);var E=this._waitingContainer=this._createReverseGeocodingWaitingElement();o.appendChild(E);var S=this._resultsContainer=this._createReverseGeocodingResultsPanelElement(),x=this._resultsListContainer=this._createReverseGeocodingResultsListElement();return S.appendChild(x),o.appendChild(S),e.appendChild(o),ks.log(e),e},t.prototype._activateMapInteraction=function(e){if(!this.collapsed){switch(null==this._inputFeaturesLayer&&(this._inputFeatures=new hm,this._inputFeaturesSource=new bu({features:this._inputFeatures}),this._inputFeaturesLayer=new rc({source:this._inputFeaturesSource,style:new br({fill:new ro({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Gi({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new wu({src:Ls.turquoiseBlue,anchor:[.5,1]})})}),this._inputFeaturesLayer.gpResultLayerId="reverseGeocoding",e.addLayer(this._inputFeaturesLayer)),this._currentGeocodingDelimitation.toLowerCase()){case"point":this._activatePointInteraction(e);break;case"circle":this._activateCircleInteraction(e);break;case"extent":this._activateBoxInteraction(e)}e.getControls().forEach(i=>{if(i instanceof Sm){var o=this._inputFeaturesLayer.gpLayerId;i._layers[o].title===o&&(i.addLayer(this._inputFeaturesLayer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description}),i.setRemovable(this._inputFeaturesLayer,!1))}})}},t.prototype._activatePointInteraction=function(e){this._mapInteraction=new wh({style:new br({image:new Bd({radius:0,fill:new ro({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Point",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",r=>{ks.log("on drawstart ",r),this._inputFeatures.clear(),this._onDrawStart(r,"point")}),e.addInteraction(this._mapInteraction),this._setCursor("crosshair",e)},t.prototype._activateCircleInteraction=function(e){this._mapInteraction=new wh({style:new br({fill:new ro({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Gi({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new Bd({radius:4,fill:new ro({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Circle",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",r=>{ks.log("on drawstart ",r),this._inputFeatures.clear(),this._onDrawStart(r,"circle")}),this._mapInteraction.on("drawend",r=>{if(ks.log("on drawend",r),r.feature&&r.feature.getGeometry){var i=r.feature.getGeometry().getRadius();this._requestCircleFilter={},this._requestCircleFilter.radius=i,this._requestPosition&&(this._requestCircleFilter.x=this._requestPosition.x,this._requestCircleFilter.y=this._requestPosition.y),ks.log("circle radius : ",i)}}),e.addInteraction(this._mapInteraction)},t.prototype._activateBoxInteraction=function(e){this._mapInteraction=new wh({style:new br({fill:new ro({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Gi({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new Bd({radius:4,fill:new ro({color:"rgba(0, 183, 152, 0.8)"})})}),type:"LineString",source:this._inputFeaturesSource,maxPoints:2,geometryFunction:function(i,o){o||(o=new Yc([]));var s=i[0],a=i[1];return o.setCoordinates([[s,[s[0],a[1]],a,[a[0],s[1]],s]]),o}}),this._mapInteraction.on("drawstart",i=>{ks.log("on drawstart",i),this._inputFeatures.clear()}),this._mapInteraction.on("drawend",i=>{ks.log("on drawend",i),this._onBoxDrawEnd(i)}),e.addInteraction(this._mapInteraction)},t.prototype._removeMapInteraction=function(e){null!=this._mapInteraction&&(e.removeInteraction(this._mapInteraction),this._mapInteraction=null),this._setCursor()},t.prototype._onDrawStart=function(e,r){var i;if(e.feature&&e.feature.getGeometry){var o=e.feature.getGeometry();"point"===r&&(i=o.getCoordinates()),"circle"===r&&(i=o.getCenter())}if(i){var s;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)s=this.options.reverseGeocodeOptions.srs;else{var a=this.getMap();if(!a||!a.getView())return;s=a.getView().getProjection()}var c=Qi(i,s,"EPSG:4326");this._requestPosition={x:c[0],y:c[1]},ks.log("position coordinates : ",this._requestPosition)}},t.prototype._onBoxDrawEnd=function(e){if(e.feature&&e.feature.getGeometry){var s,r=e.feature.getGeometry().getCoordinates()[0],i=r[0],o=r[2];if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)s=this.options.reverseGeocodeOptions.srs;else{var a=this.getMap();if(!a||!a.getView())return;s=a.getView().getProjection()}var c=Qi(i,s,"EPSG:4326"),h=Qi(o,s,"EPSG:4326");this._requestPosition={},this._requestBboxFilter={},c[0]<h[0]?(this._requestBboxFilter.left=c[0],this._requestBboxFilter.right=h[0]):(this._requestBboxFilter.left=h[0],this._requestBboxFilter.right=c[0]),c[1]<h[1]?(this._requestBboxFilter.bottom=c[1],this._requestBboxFilter.top=h[1]):(this._requestBboxFilter.bottom=h[1],this._requestBboxFilter.top=c[1]),this._requestPosition.x=(c[0]+h[0])/2,this._requestPosition.y=(c[1]+h[1])/2,ks.log("bbox filter : ",this._requestBboxFilter),ks.log("center coordinates : ",this._requestPosition)}},t.prototype._setCursor=function(e,r){(r=r||this.getMap())&&(r.getTargetElement().style.cursor=e||null)},t.prototype._reverseGeocodingRequest=function(){var e=this.getMap();this._requestOptions=this._getReverseGeocodingRequestOptions(),this._removeMapInteraction(e),this._displayWaitingContainer(),aa.Services.reverseGeocode(this._requestOptions)},t.prototype._getReverseGeocodingRequestOptions=function(){var e=this.getMap(),r=this.options.reverseGeocodeOptions,i=this;"boolean"!=typeof this.options.ssl&&(this.options.ssl=!0);var o={apiKey:r.apiKey||this.options.apiKey,ssl:this.options.ssl,position:this._requestPosition,filterOptions:{type:[this._currentGeocodingType]},srs:"CRS:84",returnFreeForm:!1,maximumResponses:r.maximumResponses||25,timeOut:r.timeOut||3e4,protocol:r.protocol||"XHR",onSuccess:function(s){s.locations&&(ks.log("reverseGeocode results : ",s.locations),i._displayGeocodedLocations(s.locations))},onFailure:function(s){i._hideWaitingContainer(),i._clearResults(),i._clearInputFeatures(),i._activateMapInteraction(e),ks.log(s.message)}};return"circle"===this._currentGeocodingDelimitation.toLowerCase()&&this._requestCircleFilter&&(this._requestCircleFilter.radius>1e3&&(ks.log("INFO : initial circle radius ("+this._requestCircleFilter.radius+") limited to 1000m."),this._requestCircleFilter.radius=1e3),o.filterOptions.circle=this._requestCircleFilter),"extent"===this._currentGeocodingDelimitation.toLowerCase()&&this._requestBboxFilter&&(o.filterOptions.bbox=this._requestBboxFilter),ks.log("reverseGeocode request options : ",o),o},t.prototype._displayGeocodedLocations=function(e){this._clearResults(),this._reverseGeocodingLocations=e,this._formContainer.className="GPreverseGeocodingComponentHidden",this._hideWaitingContainer(),this._panelTitleContainer.innerHTML="R\xe9sultats de la recherche",this._returnPictoContainer.className="",this._resultsContainer.className="GPpanel",this._fillGeocodedLocationListContainer(e),this._displayGeocodedLocationsOnMap(e)},t.prototype._fillGeocodedLocationListContainer=function(e){for(var r=0;r<e.length;r++){var i=e[r];ks.log(i);var o=this._fillGeocodedLocationDescription(i);0!==o.length&&this._createReverseGeocodingResultElement(o,r)}},t.prototype._fillGeocodedLocationDescription=function(e){if(e&&e.placeAttributes){var r=e.placeAttributes,i="";switch(e.type){case"StreetAddress":r.street&&(i+=r.number?r.number+" ":"",i+=r.street+", "),i+=r.postalCode+" "+r.commune;break;case"PositionOfInterest":"City"===e.matchType&&r.commune?(i+=r.commune,i+=r.postalCode?", "+r.postalCode:""):"D\xe9partement"===e.matchType&&r.municipality?(i+=r.municipality,i+=r.postalCode?", "+r.postalCode:""):"Toponym"===e.matchType&&r.municipality?(i+=r.municipality,i+=r.postalCode?", "+r.postalCode:"",i+=r.commune?" "+r.commune:""):i+=r.municipality?r.municipality:"",i+=r.nature?" ("+r.nature+") ":"";break;case"CadastralParcel":i+=r.cadastralParcel?r.cadastralParcel:"",i+=r.municipality?" ("+r.municipality+")":"";break;case"Administratif":i+=r.municipality?r.municipality:"",r.inseeDepartment?i+="(D\xe9partement)":r.inseeRegion&&(i+="(R\xe9gion)");break;default:i+=r.municipality?r.municipality:""}return i}},t.prototype._displayGeocodedLocationsOnMap=function(e){if(0!==this._reverseGeocodingLocations.length){var r=this.getMap();this._createResultsLayer();for(var i=0;i<e.length;i++)this._addResultFeature(e[i],i);if(this._resultsFeatures.getLength()>1){if(this._resultsFeaturesSource&&this._resultsFeaturesSource.getExtent){var o=this._resultsFeaturesSource.getExtent();r.getView().fit(o,r.getSize())}}else{var a=this._resultsFeatures.item(0).getGeometry().getCoordinates();r.getView().setCenter(a),r.getView().setZoom(17)}this._resultsHoverInteraction=new pf({condition:Lp,layers:[this._resultsFeaturesLayer]}),this._resultsHoverInteraction.on("select",h=>this._onResultsFeatureMouseOver(h)),r.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new pf({layers:[this._resultsFeaturesLayer]}),this._resultsSelectInteraction.on("select",h=>this._onResultsFeatureSelect(h)),r.addInteraction(this._resultsSelectInteraction);var c="";switch(this._currentGeocodingType){case"StreetAddress":c="adresses";break;case"PositionOfInterest":c="toponymes";break;case"CadastralParcel":c="parcelles cadastrales";break;case"Administratif":c="unit\xe9s administratives"}r.getControls().forEach(h=>{if(h instanceof Sm){var p=this._resultsFeaturesLayer.gpLayerId;h._layers[p].title===p&&(h.addLayer(this._resultsFeaturesLayer,{title:"R\xe9sultats de la recherche inverse",description:"R\xe9sultats de la recherche inverse sur les "+c}),h.setRemovable(this._resultsFeaturesLayer,!1))}})}},t.prototype._createResultsLayer=function(){var e=this.getMap();this._resultsFeatures=new hm,this._resultsFeaturesSource=new bu({features:this._resultsFeatures}),this._resultsFeaturesLayer=new rc({source:this._resultsFeaturesSource}),this._resultsFeaturesLayer.gpResultLayerId="reverseGeocodingResults",e.addLayer(this._resultsFeaturesLayer)},t.prototype._addResultFeature=function(e,r){var i=this.getMap(),o=[e.position.x,e.position.y];if(0!==o.length){var a=i.getView().getProjection().getCode();"EPSG:4326"!==a&&(o=Qi(o,"EPSG:4326",a));var c=new jd({geometry:new nc(o)});c.setStyle(this._resultsDefaultStyle),c.setId(r),c.setProperties({popupContent:this._fillPopupContent(e)}),this._resultsFeatures.push(c)}},t.prototype._fillPopupContent=function(e){var r="<ul>",i=e.placeAttributes;for(var o in i)i.hasOwnProperty(o)&&"bbox"!==o&&(r+="<li>",r+='<span class="gp-attname-others-span">'+o.toUpperCase()+" : </span>",r+=i[o],r+=" </li>");return r+" </ul>"},t.prototype._onResultsFeatureMouseOver=function(e){var r;if(0!==e.selected.length){if((r=e.selected[0]).setStyle(this._resultsSelectedStyle),null!=r.getId()){var i=document.getElementById("ReverseGeocodedLocation_"+r.getId()+"-"+this._uid);i&&i.classList&&i.classList.add("GPreverseGeocodedLocationHighlight")}document.getElementById("ReverseGeocodedLocation_"+r.getId()+"-"+this._uid)}if(0!==e.deselected.length){(r=e.deselected[0]).setStyle(this._resultsDefaultStyle);var o=document.getElementById("ReverseGeocodedLocation_"+r.getId()+"-"+this._uid);o&&o.classList&&o.classList.remove("GPreverseGeocodedLocationHighlight")}},t.prototype._onResultsFeatureSelect=function(e){var r=this.getMap();0!==e.selected.length?(this._popupContent.innerHTML=e.selected[0].getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Eu({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),r.addOverlay(this._popupOverlay))):null!=this._popupOverlay&&this._popupOverlay.setPosition(void 0)},t.prototype.onShowReverseGeocodingClick=function(){this.collapsed=this._showReverseGeocodingInput.checked,this.dispatchEvent("change:collapsed");var e=this.getMap();!this._waiting&&!this._reverseGeocodingLocations.length&&(this.collapsed?(this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(e),null!=this._inputFeaturesLayer&&(e.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)):this._activateMapInteraction(e))},t.prototype.onReverseGeocodingTypeChange=function(e){var i=e.target.options[e.target.selectedIndex].value;!i||(ks.log(i),this._currentGeocodingType=i)},t.prototype.onReverseGeocodingDelimitationChange=function(e){var i=e.target.options[e.target.selectedIndex].value;if(i){ks.log(i),this._currentGeocodingDelimitation=i;var o=this.getMap();this._clearInputFeatures(),this._removeMapInteraction(o),this._activateMapInteraction(o)}},t.prototype.onGPreverseGeocodingReturnPictoClick=function(){this._clearResults(),this._clearInputFeatures(),this._activateMapInteraction(this.getMap())},t.prototype.onReverseGeocodingSubmit=function(){this._requestPosition?this._noRightManagement||this._reverseGeocodingRequest():ks.log("missing position")},t.prototype.onReverseGeocodingResultClick=function(e){ks.log("onReverseGeocodingResultClick",e)},t.prototype.onReverseGeocodingResultMouseOver=function(e){var r=e.target.id,i=r.substring(r.indexOf("_")+1);e.target.classList&&e.target.classList.add("GPreverseGeocodedLocationHighlight"),this._resultsFeaturesSource&&this._resultsFeaturesSource.getFeatureById(parseInt(i,10)).setStyle(this._resultsSelectedStyle)},t.prototype.onReverseGeocodingResultMouseOut=function(e){var r=e.target.id,i=r.substring(r.indexOf("_")+1);e.target.classList&&e.target.classList.remove("GPreverseGeocodedLocationHighlight"),this._resultsFeaturesSource&&this._resultsFeaturesSource.getFeatureById(parseInt(i,10)).setStyle(this._resultsDefaultStyle)},t.prototype._clearResults=function(){var e=this.getMap();if(this._reverseGeocodingLocations=[],this._resultsListContainer)for(;this._resultsListContainer.firstChild;)this._resultsListContainer.removeChild(this._resultsListContainer.firstChild);this._resultsFeaturesLayer&&(e.removeLayer(this._resultsFeaturesLayer),this._resultsFeaturesLayer=null),null!=this._popupOverlay&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),null!=this._resultsSelectInteraction&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),null!=this._resultsHoverInteraction&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)},t.prototype._clearInputFeatures=function(){this._inputFeatures&&this._inputFeatures.clear(),this._requestPosition=null,this._requestCircleFilter=null,this._requestBboxFilter=null},t.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GProuteCalcWaitingContainerVisible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){!0===e._waiting?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)},t.prototype._hideWaitingContainer=function(){this._waiting&&(this._waitingContainer.className="GProuteCalcWaitingContainerHidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)},t}(Su);const VQ=E6;window.ol&&window.ol.control&&(window.ol.control.ReverseGeocode=E6);var b6=[1,0,0,1,0,0],wS=function(){function n(t,e,r,i,o){this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=i}return n.prototype.get=function(t){return this.properties_[t]},n.prototype.getExtent=function(){return this.extent_||(this.extent_="Point"===this.type_?dv(this.flatCoordinates_):eO(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},n.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=xp(this.getExtent());this.flatInteriorPoints_=wG(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},n.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=oj(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=PB(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},n.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=cD(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},n.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,i=0,o=r.length;i<o;++i){var s=r[i],a=cD(t,e,s,2,.5);Qo(this.flatMidpoints_,a),e=s}}return this.flatMidpoints_},n.prototype.getId=function(){return this.id_},n.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},n.prototype.getGeometry=function(){return this},n.prototype.getSimplifiedGeometry=function(t){return this},n.prototype.simplifyTransformed=function(t,e){return this},n.prototype.getProperties=function(){return this.properties_},n.prototype.getStride=function(){return 2},n.prototype.getStyleFunction=function(){},n.prototype.getType=function(){return this.type_},n.prototype.transform=function(t,e){var r=(t=Ar(t)).getExtent(),i=t.getWorldExtent(),o=$u(i)/$u(r);Fp(b6,i[0],i[3],o,-o,0,0,0),Sv(this.flatCoordinates_,0,this.flatCoordinates_.length,2,b6,this.flatCoordinates_)},n}();wS.prototype.getEnds=function(){return this.ends_},wS.prototype.getEndss=wS.prototype.getEnds,wS.prototype.getFlatCoordinates=wS.prototype.getOrientedFlatCoordinates;const w3=wS;var zQ=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function WQ(n,t,e){if(3===n){var r={keys:[],values:[],features:[]},i=e.readVarint()+e.pos;e.readFields(YQ,r,i),r.length=r.features.length,r.length&&(t[r.name]=r)}}function YQ(n,t,e){if(15===n)t.version=e.readVarint();else if(1===n)t.name=e.readString();else if(5===n)t.extent=e.readVarint();else if(2===n)t.features.push(e.pos);else if(3===n)t.keys.push(e.readString());else if(4===n){for(var r=null,i=e.readVarint()+e.pos;e.pos<i;)r=1==(n=e.readVarint()>>3)?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null;t.values.push(r)}}function qQ(n,t,e){if(1==n)t.id=e.readVarint();else if(2==n)for(var r=e.readVarint()+e.pos;e.pos<r;){var i=t.layer.keys[e.readVarint()],o=t.layer.values[e.readVarint()];t.properties[i]=o}else 3==n?t.type=e.readVarint():4==n&&(t.geometry=e.pos)}function XQ(n,t,e){n.pos=t.features[e];var r=n.readVarint()+n.pos,i={layer:t,type:0,properties:{}};return n.readFields(qQ,i,r),i}const w6=function(n){function t(e){var r=n.call(this)||this,i=e||{};return r.dataProjection=new AC({code:"",units:Ip.TILE_PIXELS}),r.featureClass_=i.featureClass?i.featureClass:w3,r.geometryName_=i.geometryName,r.layerName_=i.layerName?i.layerName:"layer",r.layers_=i.layers?i.layers:null,r.idProperty_=i.idProperty,r}return zQ(t,n),t.prototype.readRawGeometry_=function(e,r,i,o){e.pos=r.geometry;for(var s=e.readVarint()+e.pos,a=1,c=0,h=0,p=0,m=0,E=0;e.pos<s;){if(!c){var S=e.readVarint();a=7&S,c=S>>3}c--,1===a||2===a?(h+=e.readSVarint(),p+=e.readSVarint(),1===a&&m>E&&(o.push(m),E=m),i.push(h,p),m+=2):7===a?m>E&&(i.push(i[E],i[E+1]),m+=2):qi(!1,59)}m>E&&(o.push(m),E=m)},t.prototype.createFeature_=function(e,r,i){var o=r.type;if(0===o)return null;var s,c,a=r.properties;this.idProperty_?(c=a[this.idProperty_],delete a[this.idProperty_]):c=r.id,a[this.layerName_]=r.layer.name;var h=[],p=[];this.readRawGeometry_(e,r,h,p);var m=function(n,t){var e;return 1===n?e=1===t?"Point":"MultiPoint":2===n?e=1===t?"LineString":"MultiLineString":3===n&&(e="Polygon"),e}(o,p.length);if(this.featureClass_===w3)(s=new this.featureClass_(m,h,p,a,c)).transform(i.dataProjection,i.featureProjection);else{var E=void 0;if("Polygon"==m){for(var S=[],x=0,P=0,R=0,F=p.length;R<F;++R){var D=p[R];CG(h,x,D,2)||(S.push(p.slice(P,R)),P=R),x=D}E=S.length>1?new dD(h,"XY",S):new Yc(h,"XY",p)}else E="Point"===m?new nc(h,"XY"):"LineString"===m?new bh(h,"XY"):"Polygon"===m?new Yc(h,"XY",p):"MultiPoint"===m?new AP(h,"XY"):"MultiLineString"===m?new JC(h,"XY",p):null;s=new(0,this.featureClass_),this.geometryName_&&s.setGeometryName(this.geometryName_);var G=mf(E,!1,i);s.setGeometry(G),s.setId(c),s.setProperties(a,!0)}return s},t.prototype.getType=function(){return"arraybuffer"},t.prototype.readFeatures=function(e,r){var i=this.layers_,o=this.adaptOptions(r),s=Ar(o.dataProjection);s.setWorldExtent(o.extent),o.dataProjection=s;var a=new(Zy())(e),c=a.readFields(WQ,{}),h=[];for(var p in c)if(!i||-1!=i.indexOf(p)){var m=c[p];s.setExtent(m?[0,0,m.extent,m.extent]:null);for(var S=0,x=m.length;S<x;++S){var P=XQ(a,m,S);h.push(this.createFeature_(a,P,o))}}return h},t.prototype.readProjection=function(e){return this.dataProjection},t.prototype.setLayers=function(e){this.layers_=e},t}(YG);var ZQ=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qa=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],QQ={rte:C6,trk:S6,wpt:x6},$Q=Kt(Qa,{rte:ic(C6),trk:ic(S6),wpt:ic(x6)}),e$=Kt(Qa,{text:ut(fn,"linkText"),type:ut(fn,"linkType")}),t$=Kt(Qa,{rte:wn(function(n,t,e){var r=e[0],i=t.getProperties(),o={node:n};o.properties=i;var s=t.getGeometry();if("LineString"==s.getType()){var a=mf(s,!0,r);o.geometryLayout=a.getLayout(),i.rtept=a.getCoordinates()}var h=d$[e[e.length-1].node.namespaceURI],p=Xc(i,h);Cs(o,h$,Cu,p,e,h)}),trk:wn(function(n,t,e){var r=e[0],i=t.getProperties(),o={node:n};o.properties=i;var s=t.getGeometry();if("MultiLineString"==s.getType()){var a=mf(s,!0,r);i.trkseg=a.getLineStrings()}var h=p$[e[e.length-1].node.namespaceURI],p=Xc(i,h);Cs(o,g$,Cu,p,e,h)}),wpt:wn(function(n,t,e){var r=e[0],i=e[e.length-1];i.properties=t.getProperties();var o=t.getGeometry();if("Point"==o.getType()){var s=mf(o,!0,r);i.geometryLayout=s.getLayout(),I3(n,s.getCoordinates(),e)}})}),n$=function(n){function t(e){var r=n.call(this)||this,i=e||{};return r.dataProjection=Ar("EPSG:4326"),r.readExtensions_=i.readExtensions,r}return ZQ(t,n),t.prototype.handleReadExtensions_=function(e){e||(e=[]);for(var r=0,i=e.length;r<i;++r){var o=e[r];if(this.readExtensions_){var s=o.get("extensionsNode_")||null;this.readExtensions_(o,s)}o.set("extensionsNode_",void 0)}},t.prototype.readFeatureFromNode=function(e,r){if(!Ku(Qa,e.namespaceURI))return null;var i=QQ[e.localName];if(!i)return null;var o=i(e,[this.getReadOptions(e,r)]);return o?(this.handleReadExtensions_([o]),o):null},t.prototype.readFeaturesFromNode=function(e,r){if(!Ku(Qa,e.namespaceURI))return[];if("gpx"==e.localName){var i=jn([],$Q,e,[this.getReadOptions(e,r)]);return i?(this.handleReadExtensions_(i),i):[]}return[]},t.prototype.writeFeaturesNode=function(e,r){r=this.adaptOptions(r);var i=GE("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",iL),i.setAttributeNS(iL,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),Cs({node:i},t$,b$,e,[r]),i},t}(Fj),r$=Kt(Qa,{name:ut(fn),cmt:ut(fn),desc:ut(fn),src:ut(fn),link:x3,number:ut(oc),extensions:T3,type:ut(fn),rtept:function(n,t){var e=jn({},i$,n,t);if(e){var r=t[t.length-1];C3(r.flatCoordinates,r.layoutOptions,n,e)}}}),i$=Kt(Qa,{ele:ut(Co),time:ut(qG)}),o$=Kt(Qa,{name:ut(fn),cmt:ut(fn),desc:ut(fn),src:ut(fn),link:x3,number:ut(oc),type:ut(fn),extensions:T3,trkseg:function(n,t){var e=t[t.length-1];Nv(s$,n,t),e.ends.push(e.flatCoordinates.length)}}),s$=Kt(Qa,{trkpt:function(n,t){var e=jn({},a$,n,t);if(e){var r=t[t.length-1];C3(r.flatCoordinates,r.layoutOptions,n,e)}}}),a$=Kt(Qa,{ele:ut(Co),time:ut(qG)}),l$=Kt(Qa,{ele:ut(Co),time:ut(qG),magvar:ut(Co),geoidheight:ut(Co),name:ut(fn),cmt:ut(fn),desc:ut(fn),src:ut(fn),link:x3,sym:ut(fn),type:ut(fn),fix:ut(fn),sat:ut(oc),hdop:ut(Co),vdop:ut(Co),pdop:ut(Co),ageofdgpsdata:ut(Co),dgpsid:ut(oc),extensions:T3}),u$=["text","type"],c$=Kt(Qa,{text:wn($o),type:wn($o)}),d$=Kt(Qa,["name","cmt","desc","src","link","number","type","rtept"]),h$=Kt(Qa,{name:wn($o),cmt:wn($o),desc:wn($o),src:wn($o),link:wn(P3),number:wn(uL),type:wn($o),rtept:kj(wn(I3))}),f$=Kt(Qa,["ele","time"]),p$=Kt(Qa,["name","cmt","desc","src","link","number","type","trkseg"]),g$=Kt(Qa,{name:wn($o),cmt:wn($o),desc:wn($o),src:wn($o),link:wn(P3),number:wn(uL),type:wn($o),trkseg:kj(wn(function(n,t,e){var r={node:n};r.geometryLayout=t.getLayout(),r.properties={},Cs(r,v$,m$,t.getCoordinates(),e)}))}),m$=vf("trkpt"),v$=Kt(Qa,{trkpt:wn(I3)}),y$=Kt(Qa,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),_$=Kt(Qa,{ele:wn(Kc),time:wn(function(n,t){var e=new Date(1e3*t),r=e.getUTCFullYear()+"-"+UC(e.getUTCMonth()+1,2)+"-"+UC(e.getUTCDate(),2)+"T"+UC(e.getUTCHours(),2)+":"+UC(e.getUTCMinutes(),2)+":"+UC(e.getUTCSeconds(),2)+"Z";n.appendChild(lS().createTextNode(r))}),magvar:wn(Kc),geoidheight:wn(Kc),name:wn($o),cmt:wn($o),desc:wn($o),src:wn($o),link:wn(P3),sym:wn($o),type:wn($o),fix:wn($o),sat:wn(uL),hdop:wn(Kc),vdop:wn(Kc),pdop:wn(Kc),ageofdgpsdata:wn(Kc),dgpsid:wn(uL)}),E$={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function b$(n,t,e){var r=n.getGeometry();if(r){var i=E$[r.getType()];if(i)return GE(t[t.length-1].node.namespaceURI,i)}}function C3(n,t,e,r){return n.push(parseFloat(e.getAttribute("lon")),parseFloat(e.getAttribute("lat"))),"ele"in r?(n.push(r.ele),delete r.ele,t.hasZ=!0):n.push(0),"time"in r?(n.push(r.time),delete r.time,t.hasM=!0):n.push(0),n}function S3(n,t,e){var r="XY",i=2;if(n.hasZ&&n.hasM?(r="XYZM",i=4):n.hasZ?(r="XYZ",i=3):n.hasM&&(r="XYM",i=3),4!==i){for(var o=0,s=t.length/4;o<s;o++)t[o*i]=t[4*o],t[o*i+1]=t[4*o+1],n.hasZ&&(t[o*i+2]=t[4*o+2]),n.hasM&&(t[o*i+2]=t[4*o+3]);if(t.length=t.length/4*i,e)for(o=0,s=e.length;o<s;o++)e[o]=e[o]/4*i}return r}function x3(n,t){var e=t[t.length-1],r=n.getAttribute("href");null!==r&&(e.link=r),Nv(e$,n,t)}function T3(n,t){t[t.length-1].extensionsNode_=n}function C6(n,t){var e=t[0],r=jn({flatCoordinates:[],layoutOptions:{}},r$,n,t);if(r){var i=r.flatCoordinates;delete r.flatCoordinates;var o=r.layoutOptions;delete r.layoutOptions;var s=S3(o,i),a=new bh(i,s);mf(a,!1,e);var c=new jd(a);return c.setProperties(r,!0),c}}function S6(n,t){var e=t[0],r=jn({flatCoordinates:[],ends:[],layoutOptions:{}},o$,n,t);if(r){var i=r.flatCoordinates;delete r.flatCoordinates;var o=r.ends;delete r.ends;var s=r.layoutOptions;delete r.layoutOptions;var a=S3(s,i,o),c=new JC(i,a,o);mf(c,!1,e);var h=new jd(c);return h.setProperties(r,!0),h}}function x6(n,t){var e=t[0],r=jn({},l$,n,t);if(r){var i={},o=C3([],i,n,r),s=S3(i,o),a=new nc(o,s);mf(a,!1,e);var c=new jd(a);return c.setProperties(r,!0),c}}function P3(n,t,e){n.setAttribute("href",t);var i=e[e.length-1].properties;Cs({node:n},c$,Cu,[i.linkText,i.linkType],e,u$)}function I3(n,t,e){var r=e[e.length-1],o=r.node.namespaceURI,s=r.properties;switch(n.setAttributeNS(null,"lat",String(t[1])),n.setAttributeNS(null,"lon",String(t[0])),r.geometryLayout){case"XYZM":0!==t[3]&&(s.time=t[3]);case"XYZ":0!==t[2]&&(s.ele=t[2]);break;case"XYM":0!==t[2]&&(s.time=t[2])}var c="rtept"==n.nodeName?f$[o]:y$[o],h=Xc(s,c);Cs({node:n,properties:s},_$,Cu,h,e,c)}const T6=n$;function CS(n){return n.getAttributeNS("http://www.w3.org/1999/xlink","href")}const A3=function(){function n(){}return n.prototype.read=function(t){if(t){if("string"==typeof t){var e=kv(t);return this.readFromDocument(e)}return Lv(t)?this.readFromDocument(t):this.readFromNode(t)}return null},n.prototype.readFromDocument=function(t){},n.prototype.readFromNode=function(t){},n}();var R$=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),iu=[null,"http://www.opengis.net/wms"],O$=Kt(iu,{Service:ut(function(n,t){return jn({},k$,n,t)}),Capability:ut(function(n,t){return jn({},D$,n,t)})}),D$=Kt(iu,{Request:ut(function(n,t){return jn({},V$,n,t)}),Exception:ut(function(n,t){return jn([],B$,n,t)}),Layer:ut(function(n,t){return jn({},P6,n,t)})}),L$=function(n){function t(){var e=n.call(this)||this;return e.version=void 0,e}return R$(t,n),t.prototype.readFromDocument=function(e){for(var r=e.firstChild;r;r=r.nextSibling)if(r.nodeType==Node.ELEMENT_NODE)return this.readFromNode(r);return null},t.prototype.readFromNode=function(e){return this.version=e.getAttribute("version").trim(),jn({version:this.version},O$,e,[])||null},t}(A3),k$=Kt(iu,{Name:ut(fn),Title:ut(fn),Abstract:ut(fn),KeywordList:ut(A6),OnlineResource:ut(CS),ContactInformation:ut(function(n,t){return jn({},N$,n,t)}),Fees:ut(fn),AccessConstraints:ut(fn),LayerLimit:ut(oc),MaxWidth:ut(oc),MaxHeight:ut(oc)}),N$=Kt(iu,{ContactPersonPrimary:ut(function(n,t){return jn({},F$,n,t)}),ContactPosition:ut(fn),ContactAddress:ut(function(n,t){return jn({},G$,n,t)}),ContactVoiceTelephone:ut(fn),ContactFacsimileTelephone:ut(fn),ContactElectronicMailAddress:ut(fn)}),F$=Kt(iu,{ContactPerson:ut(fn),ContactOrganization:ut(fn)}),G$=Kt(iu,{AddressType:ut(fn),Address:ut(fn),City:ut(fn),StateOrProvince:ut(fn),PostCode:ut(fn),Country:ut(fn)}),B$=Kt(iu,{Format:ic(fn)}),P6=Kt(iu,{Name:ut(fn),Title:ut(fn),Abstract:ut(fn),KeywordList:ut(A6),CRS:Ds(fn),EX_GeographicBoundingBox:ut(function(n,t){var e=jn({},U$,n,t);if(e){var r=e.westBoundLongitude,i=e.southBoundLatitude,o=e.eastBoundLongitude,s=e.northBoundLatitude;if(void 0!==r&&void 0!==i&&void 0!==o&&void 0!==s)return[r,i,o,s]}}),BoundingBox:Ds(function(n,t){var e=[wm(n.getAttribute("minx")),wm(n.getAttribute("miny")),wm(n.getAttribute("maxx")),wm(n.getAttribute("maxy"))],r=[wm(n.getAttribute("resx")),wm(n.getAttribute("resy"))];return{crs:n.getAttribute("CRS"),extent:e,res:r}}),Dimension:Ds(function(n,t){return{name:n.getAttribute("name"),units:n.getAttribute("units"),unitSymbol:n.getAttribute("unitSymbol"),default:n.getAttribute("default"),multipleValues:BE(n.getAttribute("multipleValues")),nearestValue:BE(n.getAttribute("nearestValue")),current:BE(n.getAttribute("current")),values:fn(n)}}),Attribution:ut(function(n,t){return jn({},j$,n,t)}),AuthorityURL:Ds(function(n,t){var e=Im(n,t);if(e)return e.name=n.getAttribute("name"),e}),Identifier:Ds(fn),MetadataURL:Ds(function(n,t){var e=Im(n,t);if(e)return e.type=n.getAttribute("type"),e}),DataURL:Ds(Im),FeatureListURL:Ds(Im),Style:Ds(function(n,t){return jn({},Y$,n,t)}),MinScaleDenominator:ut(Co),MaxScaleDenominator:ut(Co),Layer:Ds(function(n,t){var e=t[t.length-1],r=jn({},P6,n,t);if(r){var i=BE(n.getAttribute("queryable"));void 0===i&&(i=e.queryable),r.queryable=void 0!==i&&i;var o=lL(n.getAttribute("cascaded"));void 0===o&&(o=e.cascaded),r.cascaded=o;var s=BE(n.getAttribute("opaque"));void 0===s&&(s=e.opaque),r.opaque=void 0!==s&&s;var a=BE(n.getAttribute("noSubsets"));void 0===a&&(a=e.noSubsets),r.noSubsets=void 0!==a&&a;var c=wm(n.getAttribute("fixedWidth"));c||(c=e.fixedWidth),r.fixedWidth=c;var h=wm(n.getAttribute("fixedHeight"));return h||(h=e.fixedHeight),r.fixedHeight=h,["Style","CRS","AuthorityURL"].forEach(function(E){E in e&&(r[E]=(r[E]||[]).concat(e[E]))}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(E){E in r||(r[E]=e[E])}),r}})}),j$=Kt(iu,{Title:ut(fn),OnlineResource:ut(CS),LogoURL:ut(I6)}),U$=Kt(iu,{westBoundLongitude:ut(Co),eastBoundLongitude:ut(Co),southBoundLatitude:ut(Co),northBoundLatitude:ut(Co)}),V$=Kt(iu,{GetCapabilities:ut(M3),GetMap:ut(M3),GetFeatureInfo:ut(M3)}),z$=Kt(iu,{Format:Ds(fn),DCPType:Ds(function(n,t){return jn({},H$,n,t)})}),H$=Kt(iu,{HTTP:ut(function(n,t){return jn({},W$,n,t)})}),W$=Kt(iu,{Get:ut(Im),Post:ut(Im)}),Y$=Kt(iu,{Name:ut(fn),Title:ut(fn),Abstract:ut(fn),LegendURL:Ds(I6),StyleSheetURL:ut(Im),StyleURL:ut(Im)}),q$=Kt(iu,{Format:ut(fn),OnlineResource:ut(CS)}),X$=Kt(iu,{Keyword:ic(fn)});function Im(n,t){return jn({},q$,n,t)}function M3(n,t){return jn({},z$,n,t)}function I6(n,t){var e=Im(n,t);if(e){var r=[lL(n.getAttribute("width")),lL(n.getAttribute("height"))];return e.size=r,e}}function A6(n,t){return jn([],X$,n,t)}const fee=L$;var pee=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),$c=[null,"http://www.opengis.net/ows/1.1"],gee=Kt($c,{ServiceIdentification:ut(function(n,t){return jn({},Iee,n,t)}),ServiceProvider:ut(function(n,t){return jn({},Aee,n,t)}),OperationsMetadata:ut(function(n,t){return jn({},See,n,t)})}),mee=function(n){function t(){return n.call(this)||this}return pee(t,n),t.prototype.readFromDocument=function(e){for(var r=e.firstChild;r;r=r.nextSibling)if(r.nodeType==Node.ELEMENT_NODE)return this.readFromNode(r);return null},t.prototype.readFromNode=function(e){return jn({},gee,e,[])||null},t}(A3),vee=Kt($c,{DeliveryPoint:ut(fn),City:ut(fn),AdministrativeArea:ut(fn),PostalCode:ut(fn),Country:ut(fn),ElectronicMailAddress:ut(fn)}),yee=Kt($c,{Value:Ds(function(n,t){return fn(n)})}),_ee=Kt($c,{AllowedValues:ut(function(n,t){return jn({},yee,n,t)})}),Eee=Kt($c,{Phone:ut(function(n,t){return jn({},xee,n,t)}),Address:ut(function(n,t){return jn({},vee,n,t)})}),bee=Kt($c,{HTTP:ut(function(n,t){return jn({},wee,n,t)})}),wee=Kt($c,{Get:Ds(function(n,t){var e=CS(n);if(e)return jn({href:e},Tee,n,t)}),Post:void 0}),Cee=Kt($c,{DCP:ut(function(n,t){return jn({},bee,n,t)})}),See=Kt($c,{Operation:function(n,t){var e=n.getAttribute("name"),r=jn({},Cee,n,t);r&&(t[t.length-1][e]=r)}}),xee=Kt($c,{Voice:ut(fn),Facsimile:ut(fn)}),Tee=Kt($c,{Constraint:Ds(function(n,t){var e=n.getAttribute("name");if(e)return jn({name:e},_ee,n,t)})}),Pee=Kt($c,{IndividualName:ut(fn),PositionName:ut(fn),ContactInfo:ut(function(n,t){return jn({},Eee,n,t)})}),Iee=Kt($c,{Abstract:ut(fn),AccessConstraints:ut(fn),Fees:ut(fn),Title:ut(fn),ServiceTypeVersion:ut(fn),ServiceType:ut(fn)}),Aee=Kt($c,{ProviderName:ut(fn),ProviderSite:ut(CS),ServiceContact:ut(function(n,t){return jn({},Pee,n,t)})});const Hee=mee;var Wee=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),qp=[null,"http://www.opengis.net/wmts/1.0"],SS=[null,"http://www.opengis.net/ows/1.1"],Yee=Kt(qp,{Contents:ut(function(n,t){return jn({},Xee,n,t)})}),qee=function(n){function t(){var e=n.call(this)||this;return e.owsParser_=new Hee,e}return Wee(t,n),t.prototype.readFromDocument=function(e){for(var r=e.firstChild;r;r=r.nextSibling)if(r.nodeType==Node.ELEMENT_NODE)return this.readFromNode(r);return null},t.prototype.readFromNode=function(e){var r=e.getAttribute("version");r&&(r=r.trim());var i=this.owsParser_.readFromNode(e);return i?(i.version=r,(i=jn(i,Yee,e,[]))||null):null},t}(A3),Xee=Kt(qp,{Layer:Ds(function(n,t){return jn({},Kee,n,t)}),TileMatrixSet:Ds(function(n,t){return jn({},nte,n,t)})}),Kee=Kt(qp,{Style:Ds(function(n,t){var e=jn({},Zee,n,t);if(e){var r="true"===n.getAttribute("isDefault");return e.isDefault=r,e}}),Format:Ds(fn),TileMatrixSetLink:Ds(function(n,t){return jn({},Jee,n,t)}),Dimension:Ds(function(n,t){return jn({},ete,n,t)}),ResourceURL:Ds(function(n,t){var e=n.getAttribute("format"),r=n.getAttribute("template"),i=n.getAttribute("resourceType"),o={};return e&&(o.format=e),r&&(o.template=r),i&&(o.resourceType=i),o})},Kt(SS,{Title:ut(fn),Abstract:ut(fn),WGS84BoundingBox:ut(function(n,t){var e=jn([],tte,n,t);if(2==e.length)return Od(e)}),Identifier:ut(fn)})),Zee=Kt(qp,{LegendURL:Ds(function(n,t){var e={};return e.format=n.getAttribute("format"),e.href=CS(n),e})},Kt(SS,{Title:ut(fn),Identifier:ut(fn)})),Jee=Kt(qp,{TileMatrixSet:ut(fn),TileMatrixSetLimits:ut(function(n,t){return jn([],Qee,n,t)})}),Qee=Kt(qp,{TileMatrixLimits:ic(function(n,t){return jn({},$ee,n,t)})}),$ee=Kt(qp,{TileMatrix:ut(fn),MinTileRow:ut(oc),MaxTileRow:ut(oc),MinTileCol:ut(oc),MaxTileCol:ut(oc)}),ete=Kt(qp,{Default:ut(fn),Value:Ds(fn)},Kt(SS,{Identifier:ut(fn)})),tte=Kt(SS,{LowerCorner:ic(R3),UpperCorner:ic(R3)}),nte=Kt(qp,{WellKnownScaleSet:ut(fn),TileMatrix:Ds(function(n,t){return jn({},rte,n,t)})},Kt(SS,{SupportedCRS:ut(fn),Identifier:ut(fn)})),rte=Kt(qp,{TopLeftCorner:ut(R3),ScaleDenominator:ut(Co),TileWidth:ut(oc),TileHeight:ut(oc),MatrixWidth:ut(oc),MatrixHeight:ut(oc)},Kt(SS,{Identifier:ut(fn)}));function R3(n,t){var e=fn(n).split(/\s+/);if(e&&2==e.length){var r=+e[0],i=+e[1];if(!isNaN(r)&&!isNaN(i))return[r,i]}}const mte=qee;var vte=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yte={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},_te={image:["Default"],hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};const bte=function(n){function t(e){var r=n.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.dirty_=!1,r.renderedPixelToCoordinateTransform_=null,r.renderTileImageQueue_={},r.tileListenerKeys_={},r.tmpTransform_=[1,0,0,1,0,0],r}return vte(t,n),t.prototype.prepareTile=function(e,r,i,o){var s,a=Lr(e),c=e.getState();return(2===c&&e.hifi||3===c)&&a in this.tileListenerKeys_&&(ya(this.tileListenerKeys_[a]),delete this.tileListenerKeys_[a]),(2===c||3===c)&&(this.updateExecutorGroup_(e,r,i),this.tileImageNeedsRender_(e,r,i)&&(s=!0,o&&(this.renderTileImageQueue_[a]=e))),s},t.prototype.getTile=function(e,r,i,o){var s=o.pixelRatio,a=o.viewState,c=a.resolution,h=a.projection,p=this.getLayer(),m=p.getSource().getTile(e,r,i,s,h);if(m.getState()<2){m.wantedResolution=c;var E=Lr(m);if(!(E in this.tileListenerKeys_)){var S=Fl(m,"change",this.prepareTile.bind(this,m,s,h,!0));this.tileListenerKeys_[E]=S}}else{var x=o.viewHints;(!(x[0]||x[1])||!m.wantedResolution)&&(m.wantedResolution=c),this.prepareTile(m,s,h,!1)&&"vector"!==p.getRenderMode()&&this.renderTileImage_(m,o)}return n.prototype.getTile.call(this,e,r,i,o)},t.prototype.isDrawableTile=function(e){var r=this.getLayer();return n.prototype.isDrawableTile.call(this,e)&&"vector"===r.getRenderMode()||e.hasContext(r)},t.prototype.getTileImage=function(e){return e.getImage(this.getLayer())},t.prototype.prepareFrame=function(e){var r=this.getLayer().getRevision();return this.renderedLayerRevision_!=r&&(this.renderedTiles.length=0),this.renderedLayerRevision_=r,n.prototype.prepareFrame.call(this,e)},t.prototype.updateExecutorGroup_=function(e,r,i){var o=this.getLayer(),s=o.getRevision(),a=o.getRenderOrder()||null,c=e.wantedResolution,h=e.getReplayState(o);if(h.dirty||h.renderedResolution!==c||h.renderedRevision!=s||h.renderedRenderOrder!=a||h.renderedZ!==e.sourceZ){var p=o.getSource(),m=p.getTileGrid(),S=p.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),x=p.getSourceTiles(r,i,e),P=Lr(o);delete e.hitDetectionImageData[P],e.executorGroups[P]=[];for(var R=function(G,X){var J=x[G];if(2!=J.getState())return"continue";var le=m.getTileCoordExtent(J.tileCoord),ie=Tp(S,le),Fe=Sp(le,ie)?null:vh(ie,o.getRenderBuffer()*c,F.tmpExtent);h.dirty=!1;var Ce=new UB(0,ie,c,r,o.getDeclutter()),$e=YB(c,r),ot=function(Xe){var Oe,qt=Xe.getStyleFunction()||o.getStyleFunction();if(qt&&(Oe=qt(Xe,c)),Oe){var Pt=this.renderFeature(Xe,$e,Oe,Ce);this.dirty_=this.dirty_||Pt,h.dirty=h.dirty||Pt}},st=J.getFeatures();a&&a!==h.renderedRenderOrder&&st.sort(a);for(var dt=0,kt=st.length;dt<kt;++dt){var Qe=st[dt];(!Fe||oa(Fe,Qe.getGeometry().getExtent()))&&ot.call(F,Qe)}var Zt=Ce.finish(),gt="vector"!==o.getRenderMode()&&o.getDeclutter()&&1===x.length?null:ie,Re=new zB(gt,c,r,p.getOverlaps(),Zt,o.getRenderBuffer());e.executorGroups[P].push(Re)},F=this,D=0,j=x.length;D<j;++D)R(D);h.renderedRevision=s,h.renderedZ=e.sourceZ,h.renderedRenderOrder=a,h.renderedResolution=c}},t.prototype.forEachFeatureAtCoordinate=function(e,r,i,o,s){var a=r.viewState.resolution,c=r.viewState.rotation;i=null==i?0:i;var P,R,F,h=this.getLayer(),p=h.getDeclutter(),E=h.getSource().getTileGridForProjection(r.viewState.projection),S={},x=this.renderedTiles,D=function(){var j=x[R],X=hE(E.getTileCoordExtent(j.wrappedTileCoord),e);if(!p&&!X)return"continue";for(var J=j.executorGroups[Lr(h)],$=0,le=J.length;$<le;++$)P=P||J[$].forEachFeatureAtCoordinate(e,a,c,i,function(Fe){if(X||s&&-1!==s.indexOf(Fe)){var Ce=Fe.getId();if(void 0===Ce&&(Ce=Lr(Fe)),!(Ce in S))return S[Ce]=!0,o(Fe,h)}},h.getDeclutter()?s:null)};for(R=0,F=x.length;R<F;++R)D();return P},t.prototype.getFeatures=function(e){return new Promise(function(r,i){for(var x,o=this.getLayer(),s=Lr(o),a=o.getSource(),c=this.renderedProjection,h=c.getExtent(),p=this.renderedResolution,m=a.getTileGridForProjection(c),E=Ra(this.renderedPixelToCoordinateTransform_,e.slice()),S=m.getTileCoordForCoordAndResolution(E,p),P=0,R=this.renderedTiles.length;P<R;++P)if(S.toString()===this.renderedTiles[P].tileCoord.toString()){if(2===(x=this.renderedTiles[P]).getState()&&x.hifi){var F=m.getTileCoordExtent(x.tileCoord);a.getWrapX()&&c.canWrapX()&&!eu(h,F)&&pB(E,c);break}x=void 0}if(!x||x.loadingSourceTiles>0)r([]);else{var j=lf(m.getTileCoordExtent(x.wrappedTileCoord)),G=[(E[0]-j[0])/p,(j[1]-E[1])/p],X=x.getSourceTiles().reduce(function(Ce,$e){return Ce.concat($e.getFeatures())},[]),J=x.hitDetectionImageData[s];if(!J&&!this.animatingOrInteracting_){var $=Ld(m.getTileSize(m.getZForResolution(p))),le=[$[0]/2,$[1]/2],ie=this.renderedRotation_;J=JB($,[this.getRenderTransform(m.getTileCoordCenter(x.wrappedTileCoord),p,0,.5,le[0],le[1],0)],X,o.getStyleFunction(),m.getTileCoordExtent(x.wrappedTileCoord),x.getReplayState(o).renderedResolution,ie),x.hitDetectionImageData[s]=J}r(QB(G,X,J))}}.bind(this))},t.prototype.handleFontsChanged=function(){Ia(this.renderTileImageQueue_);var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},t.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},t.prototype.renderFrame=function(e,r){var i=e.viewHints,o=!(i[0]||i[1]);this.renderQueuedTileImages_(o,e),n.prototype.renderFrame.call(this,e,r),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var s=this.getLayer(),a=s.getRenderMode();if("image"===a)return this.container;var c=s.getSource(),h=e.usedTiles[Lr(c)];for(var p in this.renderTileImageQueue_)(!h||!(p in h))&&delete this.renderTileImageQueue_[p];for(var m=this.context,E=s.getDeclutter()?{}:null,S=_te[a],x=e.pixelRatio,P=e.viewState,R=P.center,F=P.resolution,D=P.rotation,j=e.size,G=Math.round(j[0]*x),X=Math.round(j[1]*x),J=this.renderedTiles,$=c.getTileGridForProjection(e.viewState.projection),le=[],ie=[],Fe=J.length-1;Fe>=0;--Fe)for(var Ce=J[Fe],$e=Ce.tileCoord,ot=$.getTileCoordExtent(Ce.wrappedTileCoord),st=$.getTileCoordExtent($e,this.tmpExtent)[0]-ot[0],dt=XO(lG(this.inversePixelTransform.slice(),1/x,1/x),this.getRenderTransform(R,F,D,x,G,X,st)),kt=Ce.executorGroups[Lr(s)],Qe=!1,Zt=0,gt=kt.length;Zt<gt;++Zt){var Re=kt[Zt];if(Re.hasExecutors(S)){var Xe=Ce.tileCoord[0],Oe=void 0;if(!E&&!Qe){Oe=Re.getClipCoords(dt),m.save();for(var qt=0,Pt=le.length;qt<Pt;++qt){var $t=le[qt];Xe<ie[qt]&&(m.beginPath(),m.moveTo(Oe[0],Oe[1]),m.lineTo(Oe[2],Oe[3]),m.lineTo(Oe[4],Oe[5]),m.lineTo(Oe[6],Oe[7]),m.moveTo($t[6],$t[7]),m.lineTo($t[4],$t[5]),m.lineTo($t[2],$t[3]),m.lineTo($t[0],$t[1]),m.clip())}}Re.execute(m,dt,D,o,S,E),!E&&!Qe&&(m.restore(),le.push(Oe),ie.push(Xe),Qe=!0)}}return E&&VB(E,m,D,e.layerStatesArray[e.layerIndex].opacity,o,e.declutterItems),this.container},t.prototype.renderQueuedTileImages_=function(e,r){for(var i in this.renderTileImageQueue_){if(!e&&Date.now()-r.time>8){r.animate=!0;break}var o=this.renderTileImageQueue_[i];delete this.renderTileImageQueue_[i],this.renderTileImage_(o,r)}},t.prototype.renderFeature=function(e,r,i,o){if(!i)return!1;var s=!1;if(Array.isArray(i))for(var a=0,c=i.length;a<c;++a)s=uD(o,e,i[a],r,this.boundHandleStyleImageChange_)||s;else s=uD(o,e,i,r,this.boundHandleStyleImageChange_);return s},t.prototype.tileImageNeedsRender_=function(e,r,i){var o=this.getLayer(),s=e.getReplayState(o),a=o.getRevision();return s.renderedTileResolution!==e.wantedResolution||s.renderedTileRevision!==a||s.renderedTileZ!==e.sourceZ},t.prototype.renderTileImage_=function(e,r){var i=this.getLayer(),o=e.getReplayState(i),s=i.getRevision(),a=e.executorGroups[Lr(i)];o.renderedTileRevision=s,o.renderedTileZ=e.sourceZ;var c=e.wrappedTileCoord,h=c[0],p=i.getSource(),m=r.pixelRatio,S=r.viewState.projection,x=p.getTileGridForProjection(S),P=x.getResolution(e.tileCoord[0]),R=r.pixelRatio/e.wantedResolution*P,F=x.getResolution(h),D=e.getContext(i);m=Math.max(m,R/m);var j=p.getTilePixelSize(h,m,S);D.canvas.width=j[0],D.canvas.height=j[1];var G=m/R;if(1!==G){var X=rB(this.tmpTransform_);lG(X,G,G),D.setTransform.apply(D,X)}var J=x.getTileCoordExtent(c,this.tmpExtent),$=R/F,le=rB(this.tmpTransform_);lG(le,$,-$),function(n,t,e){XO(n,yP(aG,1,0,0,1,t,e))}(le,-J[0],-J[3]);for(var ie=0,Fe=a.length;ie<Fe;++ie)a[ie].execute(D,le,0,!0,yte[i.getRenderMode()]);o.renderedTileResolution=e.wantedResolution},t}(b8);var wte=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const jL=function(n){function t(e){var r=this,i=e||{},o=qa({},i);delete o.preload,delete o.useInterimTilesOnError,r=n.call(this,o)||this;var s=i.renderMode||"hybrid";return qi(null==s||"image"==s||"hybrid"==s||"vector"==s,28),r.renderMode_=s,r.setPreload(i.preload?i.preload:0),r.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),r}return wte(t,n),t.prototype.createRenderer=function(){return new bte(this)},t.prototype.getFeatures=function(e){return n.prototype.getFeatures.call(this,e)},t.prototype.getRenderMode=function(){return this.renderMode_},t.prototype.getPreload=function(){return this.get("preload")},t.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},t.prototype.setPreload=function(e){this.set("preload",e)},t.prototype.setUseInterimTilesOnError=function(e){this.set("useInterimTilesOnError",e)},t}(NB);var xte=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();const Pte=function(n){function t(e){var r=n.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:Ar("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this;if(r.tileJSON_=null,r.tileSize_=e.tileSize,e.url)if(e.jsonp)!function(n,t,e,r){var i=document.createElement("script"),o="olc_"+Lr(t);function s(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(-1==n.indexOf("?")?"?":"&")+"callback="+o;var a=setTimeout(function(){s(),e&&e()},1e4);window[o]=function(c){clearTimeout(a),s(),t(c)},document.getElementsByTagName("head")[0].appendChild(i)}(e.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var i=new XMLHttpRequest;i.addEventListener("load",r.onXHRLoad_.bind(r)),i.addEventListener("error",r.onXHRError_.bind(r)),i.open("GET",e.url),i.send()}else e.tileJSON?r.handleTileJSONResponse(e.tileJSON):qi(!1,51);return r}return xte(t,n),t.prototype.onXHRLoad_=function(e){var r=e.target;if(!r.status||r.status>=200&&r.status<300){var i=void 0;try{i=JSON.parse(r.responseText)}catch(o){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},t.prototype.onXHRError_=function(e){this.handleTileJSONError()},t.prototype.getTileJSON=function(){return this.tileJSON_},t.prototype.handleTileJSONResponse=function(e){var o,r=Ar("EPSG:4326"),i=this.getProjection();if(void 0!==e.bounds){var s=vv(r,i);o=VT(e.bounds,s)}var a=e.minzoom||0,c=e.maxzoom||22,h=_v({extent:EE(i),maxZoom:c,minZoom:a,tileSize:this.tileSize_});if(this.tileGrid=h,this.tileUrlFunction=fO(e.tiles,h),void 0!==e.attribution&&!this.getAttributions()){var p=void 0!==o?o:r.getExtent();this.setAttributions(function(m){return oa(p,m.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")},t.prototype.handleTileJSONError=function(){this.setState("error")},t}(gP);var ou={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90\xb0 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered)."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) \u2014 it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0"},"data-driven styling":{js:"1.2.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0"},"data-driven styling":{js:"1.2.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0"},"data-driven styling":{js:"1.2.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"If `symbol-sort-key` is set, sort based on that. Otherwise sort symbols by their y-position relative to the viewport."},"viewport-y":{doc:"Symbols will be sorted by their y-position relative to the viewport."},source:{doc:"Symbols will be rendered in the same order as the source data with no sorting applied."}},default:"auto",doc:"Controls the order in which overlapping symbols in the same layer are rendered","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols with point placement would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn\u2019t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. The order of elements in an array define priority order for the placement of an orientation variant.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] \u2260 value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] \u2265 value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] \u2264 value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] \u2208 {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] \u2209 {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 \u2227 ... \u2227 fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 \u2228 ... \u2228 fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `\xacf0 \u2227 ... \u2227 \xacfn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0"}}},"index-of":{doc:"Returns the first index at which a given element can be found in an array, or for a string, the first occurrence of the specified value. If a second argument is provided, then the search is started from that position. Returns -1 if the value is not found.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `["get", "building_type"]`). Each label must be either:\n * a single literal value; or\n * an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `["c", "b"]`). The input matches if any of the values in the array matches, similar to the `"in"` operator.\n\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:"Returns `formatted` text containing annotations for use in mixed-format `text-field` entries. For a `text-field` entries of a string type, following option object's properties are supported: If set, the `text-font` value overrides the font specified by the root layout properties. If set, the `font-scale` value specifies a scaling factor relative to the `text-size` specified in the root layout properties. If set, the `text-color` value overrides the color specified by the root paint properties for this layer.",group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0"}}},image:{doc:"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.6.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a boolean, the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns null if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Gets the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Gets the feature properties object.  Note that in some cases, it may be more efficient to use ["get", "property_name"] directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns null if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Gets the feature's geometry type: Point, MultiPoint, LineString, MultiLineString, Polygon, MultiPolygon.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Gets the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Gets the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Zoom","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"heatmap-density":{doc:"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},accumulated:{doc:"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the feature being evaluated is inside the pre-defined geometry boundary, `false` otherwise. The expression has one argument which must be a valid GeoJSON Polygon/Multi-Polygon object. The expression only evaluates on `Point` or `LineString` feature. For `Point` feature, The expression will return false if any point of the feature is on the boundary or outside the boundary. For `LineString` feature, the expression will return false if the line is fully outside the boundary, or the line is partially intersecting the boundary, which means either part of the line is outside of the boundary, or end point of the line lies on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},slice:{doc:"Returns a portion of a string or an array starting from the provided beginning index. If a second argument is provided, then the return portion will run to, but not include, the end index.",group:"String","sdk-support":{"basic functionality":{js:"1.10.0"}}}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0\xb0 (0\xb0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0\xb0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0\xb0, directly above, to 180\xb0, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}}},O3="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function UL(n,t){return n(t={exports:{}},t.exports),t.exports}var gne=UL(function(n,t){!function(e){var r=t&&!t.nodeType&&t,i=n&&!n.nodeType&&n,o="object"==typeof O3&&O3;(o.global===o||o.window===o||o.self===o)&&(e=o);var s,$,a=2147483647,c=36,R=/^xn--/,F=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},X=Math.floor,J=String.fromCharCode;function le(Re){throw RangeError(j[Re])}function ie(Re,Xe){for(var Oe=Re.length,qt=[];Oe--;)qt[Oe]=Xe(Re[Oe]);return qt}function Fe(Re,Xe){var Oe=Re.split("@"),qt="";return Oe.length>1&&(qt=Oe[0]+"@",Re=Oe[1]),qt+ie((Re=Re.replace(D,".")).split("."),Xe).join(".")}function Ce(Re){for(var Pt,$t,Xe=[],Oe=0,qt=Re.length;Oe<qt;)(Pt=Re.charCodeAt(Oe++))>=55296&&Pt<=56319&&Oe<qt?56320==(64512&($t=Re.charCodeAt(Oe++)))?Xe.push(((1023&Pt)<<10)+(1023&$t)+65536):(Xe.push(Pt),Oe--):Xe.push(Pt);return Xe}function $e(Re){return ie(Re,function(Xe){var Oe="";return Xe>65535&&(Oe+=J((Xe-=65536)>>>10&1023|55296),Xe=56320|1023&Xe),Oe+J(Xe)}).join("")}function ot(Re){return Re-48<10?Re-22:Re-65<26?Re-65:Re-97<26?Re-97:c}function st(Re,Xe){return Re+22+75*(Re<26)-((0!=Xe)<<5)}function dt(Re,Xe,Oe){var qt=0;for(Re=Oe?X(Re/700):Re>>1,Re+=X(Re/Xe);Re>455;qt+=c)Re=X(Re/35);return X(qt+36*Re/(Re+38))}function kt(Re){var qt,Pn,ft,Mn,$n,kn,ai,yr,Mr,Ui,Xe=[],Oe=Re.length,Pt=0,$t=128,dn=72;for((Pn=Re.lastIndexOf("-"))<0&&(Pn=0),ft=0;ft<Pn;++ft)Re.charCodeAt(ft)>=128&&le("not-basic"),Xe.push(Re.charCodeAt(ft));for(Mn=Pn>0?Pn+1:0;Mn<Oe;){for($n=Pt,kn=1,ai=c;Mn>=Oe&&le("invalid-input"),((yr=ot(Re.charCodeAt(Mn++)))>=c||yr>X((a-Pt)/kn))&&le("overflow"),Pt+=yr*kn,!(yr<(Mr=ai<=dn?1:ai>=dn+26?26:ai-dn));ai+=c)kn>X(a/(Ui=c-Mr))&&le("overflow"),kn*=Ui;dn=dt(Pt-$n,qt=Xe.length+1,0==$n),X(Pt/qt)>a-$t&&le("overflow"),$t+=X(Pt/qt),Pt%=qt,Xe.splice(Pt++,0,$t)}return $e(Xe)}function Qe(Re){var Xe,Oe,qt,Pt,$t,dn,Pn,ft,Mn,$n,kn,yr,Mr,Ui,Wr,ai=[];for(yr=(Re=Ce(Re)).length,Xe=128,Oe=0,$t=72,dn=0;dn<yr;++dn)(kn=Re[dn])<128&&ai.push(J(kn));for(qt=Pt=ai.length,Pt&&ai.push("-");qt<yr;){for(Pn=a,dn=0;dn<yr;++dn)(kn=Re[dn])>=Xe&&kn<Pn&&(Pn=kn);for(Pn-Xe>X((a-Oe)/(Mr=qt+1))&&le("overflow"),Oe+=(Pn-Xe)*Mr,Xe=Pn,dn=0;dn<yr;++dn)if((kn=Re[dn])<Xe&&++Oe>a&&le("overflow"),kn==Xe){for(ft=Oe,Mn=c;!(ft<($n=Mn<=$t?1:Mn>=$t+26?26:Mn-$t));Mn+=c)ai.push(J(st($n+(Wr=ft-$n)%(Ui=c-$n),0))),ft=X(Wr/Ui);ai.push(J(st(ft,0))),$t=dt(Oe,Mr,qt==Pt),Oe=0,++qt}++Oe,++Xe}return ai.join("")}if(s={version:"1.3.2",ucs2:{decode:Ce,encode:$e},decode:kt,encode:Qe,toASCII:function(Re){return Fe(Re,function(Xe){return F.test(Xe)?"xn--"+Qe(Xe):Xe})},toUnicode:function(Re){return Fe(Re,function(Xe){return R.test(Xe)?kt(Xe.slice(4).toLowerCase()):Xe})}},r&&i)if(n.exports==r)i.exports=s;else for($ in s)s.hasOwnProperty($)&&(r[$]=s[$]);else e.punycode=s}(O3)}),Xp_isString=function(n){return"string"==typeof n},Xp_isObject=function(n){return"object"==typeof n&&null!==n},Xp_isNull=function(n){return null===n};function mne(n,t){return Object.prototype.hasOwnProperty.call(n,t)}var vne=function(n,t,e,r){e=e||"=";var i={};if("string"!=typeof n||0===n.length)return i;var o=/\+/g;n=n.split(t=t||"&");var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=n.length;s>0&&a>s&&(a=s);for(var c=0;c<a;++c){var m,E,S,x,h=n[c].replace(o,"%20"),p=h.indexOf(e);p>=0?(m=h.substr(0,p),E=h.substr(p+1)):(m=h,E=""),S=decodeURIComponent(m),x=decodeURIComponent(E),mne(i,S)?Array.isArray(i[S])?i[S].push(x):i[S]=[i[S],x]:i[S]=x}return i},rI=function(n){switch(typeof n){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}},yne=function(n,t,e,r){return t=t||"&",e=e||"=",null===n&&(n=void 0),"object"==typeof n?Object.keys(n).map(function(i){var o=encodeURIComponent(rI(i))+e;return Array.isArray(n[i])?n[i].map(function(s){return o+encodeURIComponent(rI(s))}).join(t):o+encodeURIComponent(rI(n[i]))}).join(t):r?encodeURIComponent(rI(r))+e+encodeURIComponent(rI(n)):""},XE=UL(function(n,t){t.decode=t.parse=vne,t.encode=t.stringify=yne});function Th(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Sne=/^([a-z0-9.+-]+:)/i,xne=/:[0-9]*$/,Tne=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Ine=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),D3=["'"].concat(Ine),R6=["%","/","?",";","#"].concat(D3),O6=["/","?","#"],D6=/^[+a-z0-9A-Z_-]{0,63}$/,Mne=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Rne={javascript:!0,"javascript:":!0},L3={javascript:!0,"javascript:":!0},xS={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function PS(n){for(var t=[],e=arguments.length-1;e-- >0;)t[e]=arguments[e+1];for(var r=0,i=t;r<i.length;r+=1){var o=i[r];for(var s in o)n[s]=o[s]}return n}Th.prototype.parse=function(n,t,e){if(!Xp_isString(n))throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var r=n.indexOf("?"),i=-1!==r&&r<n.indexOf("#")?"?":"#",o=n.split(i);o[0]=o[0].replace(/\\/g,"/");var a=n=o.join(i);if(a=a.trim(),!e&&1===n.split("#").length){var c=Tne.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],this.query=t?XE.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=Sne.exec(a);if(h){var p=(h=h[0]).toLowerCase();this.protocol=p,a=a.substr(h.length)}if(e||h||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var m="//"===a.substr(0,2);m&&(!h||!L3[h])&&(a=a.substr(2),this.slashes=!0)}if(!L3[h]&&(m||h&&!xS[h])){for(var E=-1,S=0;S<O6.length;S++)-1!==(x=a.indexOf(O6[S]))&&(-1===E||x<E)&&(E=x);var P,R;for(-1!==(R=-1===E?a.lastIndexOf("@"):a.lastIndexOf("@",E))&&(P=a.slice(0,R),a=a.slice(R+1),this.auth=decodeURIComponent(P)),E=-1,S=0;S<R6.length;S++){var x;-1!==(x=a.indexOf(R6[S]))&&(-1===E||x<E)&&(E=x)}-1===E&&(E=a.length),this.host=a.slice(0,E),a=a.slice(E),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var D=this.hostname.split(/\./),j=(S=0,D.length);S<j;S++){var G=D[S];if(G&&!G.match(D6)){for(var X="",J=0,$=G.length;J<$;J++)G.charCodeAt(J)>127?X+="x":X+=G[J];if(!X.match(D6)){var le=D.slice(0,S),ie=D.slice(S+1),Fe=G.match(Mne);Fe&&(le.push(Fe[1]),ie.unshift(Fe[2])),ie.length&&(a="/"+ie.join(".")+a),this.hostname=le.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),F||(this.hostname=gne.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!Rne[p])for(S=0,j=D3.length;S<j;S++){var ot=D3[S];if(-1!==a.indexOf(ot)){var st=encodeURIComponent(ot);st===ot&&(st=escape(ot)),a=a.split(ot).join(st)}}var dt=a.indexOf("#");-1!==dt&&(this.hash=a.substr(dt),a=a.slice(0,dt));var kt=a.indexOf("?");return-1!==kt?(this.search=a.substr(kt),this.query=a.substr(kt+1),t&&(this.query=XE.parse(this.query)),a=a.slice(0,kt)):t&&(this.search="",this.query={}),a&&(this.pathname=a),xS[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},Th.prototype.format=function(){var n=this.auth||"";n&&(n=(n=encodeURIComponent(n)).replace(/%3A/i,":"),n+="@");var t=this.protocol||"",e=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=n+this.host:this.hostname&&(i=n+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&Xp_isObject(this.query)&&Object.keys(this.query).length&&(o=XE.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||xS[t])&&!1!==i?(i="//"+(i||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(e=e.replace(/[?#]/g,function(a){return encodeURIComponent(a)}))+(s=s.replace("#","%23"))+r},Th.prototype.resolve=function(n){return this.resolveObject(function(n,t,e){if(n&&Xp_isObject(n)&&n instanceof Th)return n;var r=new Th;return r.parse(n,t,e),r}(n,!1,!0)).format()},Th.prototype.resolveObject=function(n){if(Xp_isString(n)){var t=new Th;t.parse(n,!1,!0),n=t}for(var e=new Th,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];e[o]=this[o]}if(e.hash=n.hash,""===n.href)return e.href=e.format(),e;if(n.slashes&&!n.protocol){for(var s=Object.keys(n),a=0;a<s.length;a++){var c=s[a];"protocol"!==c&&(e[c]=n[c])}return xS[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(n.protocol&&n.protocol!==e.protocol){if(!xS[n.protocol]){for(var h=Object.keys(n),p=0;p<h.length;p++){var m=h[p];e[m]=n[m]}return e.href=e.format(),e}if(e.protocol=n.protocol,n.host||L3[n.protocol])e.pathname=n.pathname;else{for(var j=(n.pathname||"").split("/");j.length&&!(n.host=j.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),""!==j[0]&&j.unshift(""),j.length<2&&j.unshift(""),e.pathname=j.join("/")}return e.search=n.search,e.query=n.query,e.host=n.host||"",e.auth=n.auth,e.hostname=n.hostname||n.host,e.port=n.port,(e.pathname||e.search)&&(e.path=(e.pathname||"")+(e.search||"")),e.slashes=e.slashes||n.slashes,e.href=e.format(),e}var x=e.pathname&&"/"===e.pathname.charAt(0),P=n.host||n.pathname&&"/"===n.pathname.charAt(0),R=P||x||e.host&&n.pathname,F=R,D=e.pathname&&e.pathname.split("/")||[],G=(j=n.pathname&&n.pathname.split("/")||[],e.protocol&&!xS[e.protocol]);if(G&&(e.hostname="",e.port=null,e.host&&(""===D[0]?D[0]=e.host:D.unshift(e.host)),e.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(""===j[0]?j[0]=n.host:j.unshift(n.host)),n.host=null),R=R&&(""===j[0]||""===D[0])),P)e.host=n.host||""===n.host?n.host:e.host,e.hostname=n.hostname||""===n.hostname?n.hostname:e.hostname,e.search=n.search,e.query=n.query,D=j;else if(j.length)D||(D=[]),D.pop(),D=D.concat(j),e.search=n.search,e.query=n.query;else if(!function(n){return null==n}(n.search))return G&&(e.hostname=e.host=D.shift(),(X=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=X.shift(),e.host=e.hostname=X.shift())),e.search=n.search,e.query=n.query,(!Xp_isNull(e.pathname)||!Xp_isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e;if(!D.length)return e.pathname=null,e.path=e.search?"/"+e.search:null,e.href=e.format(),e;for(var J=D.slice(-1)[0],$=(e.host||n.host||D.length>1)&&("."===J||".."===J)||""===J,le=0,ie=D.length;ie>=0;ie--)"."===(J=D[ie])?D.splice(ie,1):".."===J?(D.splice(ie,1),le++):le&&(D.splice(ie,1),le--);if(!R&&!F)for(;le--;le)D.unshift("..");R&&""!==D[0]&&(!D[0]||"/"!==D[0].charAt(0))&&D.unshift(""),$&&"/"!==D.join("/").substr(-1)&&D.push("");var X,Fe=""===D[0]||D[0]&&"/"===D[0].charAt(0);return G&&(e.hostname=e.host=Fe?"":D.length?D.shift():"",(X=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@"))&&(e.auth=X.shift(),e.host=e.hostname=X.shift())),(R=R||e.host&&D.length)&&!Fe&&D.unshift(""),D.length?e.pathname=D.join("/"):(e.pathname=null,e.path=null),(!Xp_isNull(e.pathname)||!Xp_isNull(e.search))&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=n.auth||e.auth,e.slashes=e.slashes||n.slashes,e.href=e.format(),e},Th.prototype.parseHost=function(){var n=this.host,t=xne.exec(n);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),n=n.substr(0,n.length-t.length)),n&&(this.hostname=n)};var Kp=function(n){function t(e,r){n.call(this,r),this.message=r,this.key=e}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t,t}(Error),sI=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var r=0,i=e;r<i.length;r+=1){var o=i[r];this.bindings[o[0]]=o[1]}};sI.prototype.concat=function(t){return new sI(this,t)},sI.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},sI.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var VL={kind:"null"},An={kind:"number"},ji={kind:"string"},Ii={kind:"boolean"},Am={kind:"color"},IS={kind:"object"},Ai={kind:"value"},zL={kind:"collator"},HL={kind:"formatted"},aI={kind:"resolvedImage"};function Ph(n,t){return{kind:"array",itemType:n,N:t}}function Js(n){if("array"===n.kind){var t=Js(n.itemType);return"number"==typeof n.N?"array<"+t+", "+n.N+">":"value"===n.itemType.kind?"array":"array<"+t+">"}return n.kind}var jne=[VL,An,ji,Ii,Am,HL,IS,Ph(Ai),aI];function lI(n,t){if("error"===t.kind)return null;if("array"===n.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!lI(n.itemType,t.itemType))&&("number"!=typeof n.N||n.N===t.N))return null}else{if(n.kind===t.kind)return null;if("value"===n.kind)for(var e=0,r=jne;e<r.length;e+=1)if(!lI(r[e],t))return null}return"Expected "+Js(n)+" but found "+Js(t)+" instead."}function G3(n,t){return t.some(function(e){return e.kind===n.kind})}function uI(n,t){return t.some(function(e){return"null"===e?null===n:"array"===e?Array.isArray(n):"object"===e?n&&!Array.isArray(n)&&"object"==typeof n:e===typeof n})}var N6=UL(function(n,t){var e={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(h){return(h=Math.round(h))<0?0:h>255?255:h}function o(h){return r("%"===h[h.length-1]?parseFloat(h)/100*255:parseInt(h))}function s(h){return function(h){return h<0?0:h>1?1:h}("%"===h[h.length-1]?parseFloat(h)/100:parseFloat(h))}function a(h,p,m){return m<0?m+=1:m>1&&(m-=1),6*m<1?h+(p-h)*m*6:2*m<1?p:3*m<2?h+(p-h)*(2/3-m)*6:h}try{t.parseCSSColor=function(h){var m,p=h.replace(/ /g,"").toLowerCase();if(p in e)return e[p].slice();if("#"===p[0])return 4===p.length?(m=parseInt(p.substr(1),16))>=0&&m<=4095?[(3840&m)>>4|(3840&m)>>8,240&m|(240&m)>>4,15&m|(15&m)<<4,1]:null:7===p.length&&(m=parseInt(p.substr(1),16))>=0&&m<=16777215?[(16711680&m)>>16,(65280&m)>>8,255&m,1]:null;var E=p.indexOf("("),S=p.indexOf(")");if(-1!==E&&S+1===p.length){var x=p.substr(0,E),P=p.substr(E+1,S-(E+1)).split(","),R=1;switch(x){case"rgba":if(4!==P.length)return null;R=s(P.pop());case"rgb":return 3!==P.length?null:[o(P[0]),o(P[1]),o(P[2]),R];case"hsla":if(4!==P.length)return null;R=s(P.pop());case"hsl":if(3!==P.length)return null;var F=(parseFloat(P[0])%360+360)%360/360,D=s(P[1]),j=s(P[2]),G=j<=.5?j*(D+1):j+D-j*D,X=2*j-G;return[r(255*a(X,G,F+1/3)),r(255*a(X,G,F)),r(255*a(X,G,F-1/3)),R];default:return null}}return null}}catch(h){}}).parseCSSColor,Bo=function(t,e,r,i){void 0===i&&(i=1),this.r=t,this.g=e,this.b=r,this.a=i};Bo.parse=function(t){if(t){if(t instanceof Bo)return t;if("string"==typeof t){var e=N6(t);if(e)return new Bo(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Bo.prototype.toString=function(){var t=this.toArray(),r=t[1],i=t[2],o=t[3];return"rgba("+Math.round(t[0])+","+Math.round(r)+","+Math.round(i)+","+o+")"},Bo.prototype.toArray=function(){var t=this,o=t.a;return 0===o?[0,0,0,0]:[255*t.r/o,255*t.g/o,255*t.b/o,o]},Bo.black=new Bo(0,0,0,1),Bo.white=new Bo(1,1,1,1),Bo.transparent=new Bo(0,0,0,0),Bo.red=new Bo(1,0,0,1);var cI=function(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};cI.prototype.compare=function(t,e){return this.collator.compare(t,e)},cI.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var B3=function(t,e,r,i,o){this.text=t,this.image=e,this.scale=r,this.fontStack=i,this.textColor=o},uc=function(t){this.sections=t};uc.fromString=function(t){return new uc([new B3(t,null,null,null,null)])},uc.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length})},uc.factory=function(t){return t instanceof uc?t:uc.fromString(t)},uc.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text}).join("")},uc.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var i=r[e];if(i.image)t.push(["image",i.image.name]);else{t.push(i.text);var o={};i.fontStack&&(o["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(o["font-scale"]=i.scale),i.textColor&&(o["text-color"]=["rgba"].concat(i.textColor.toArray())),t.push(o)}}return t};var _f=function(t){this.name=t.name,this.available=t.available};function F6(n,t,e,r){return"number"==typeof n&&n>=0&&n<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[n,t,e,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[n,t,e,r]:[n,t,e]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function WL(n){if(null===n)return!0;if("string"==typeof n)return!0;if("boolean"==typeof n)return!0;if("number"==typeof n)return!0;if(n instanceof Bo)return!0;if(n instanceof cI)return!0;if(n instanceof uc)return!0;if(n instanceof _f)return!0;if(Array.isArray(n)){for(var t=0,e=n;t<e.length;t+=1)if(!WL(e[t]))return!1;return!0}if("object"==typeof n){for(var i in n)if(!WL(n[i]))return!1;return!0}return!1}function al(n){if(null===n)return VL;if("string"==typeof n)return ji;if("boolean"==typeof n)return Ii;if("number"==typeof n)return An;if(n instanceof Bo)return Am;if(n instanceof cI)return zL;if(n instanceof uc)return HL;if(n instanceof _f)return aI;if(Array.isArray(n)){for(var e,t=n.length,r=0,i=n;r<i.length;r+=1){var s=al(i[r]);if(e){if(e===s)continue;e=Ai;break}e=s}return Ph(e||Ai,t)}return IS}function dI(n){var t=typeof n;return null===n?"":"string"===t||"number"===t||"boolean"===t?String(n):n instanceof Bo||n instanceof uc||n instanceof _f?n.toString():JSON.stringify(n)}_f.prototype.toString=function(){return this.name},_f.fromString=function(t){return t?new _f({name:t,available:!1}):null},_f.prototype.serialize=function(){return["image",this.name]};var Zp=function(t,e){this.type=t,this.value=e};Zp.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!WL(t[1]))return e.error("invalid value");var r=t[1],i=al(r),o=e.expectedType;return"array"===i.kind&&0===i.N&&o&&"array"===o.kind&&("number"!=typeof o.N||0===o.N)&&(i=o),new Zp(i,r)},Zp.prototype.evaluate=function(){return this.value},Zp.prototype.eachChild=function(){},Zp.prototype.outputDefined=function(){return!0},Zp.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Bo?["rgba"].concat(this.value.toArray()):this.value instanceof uc?this.value.serialize():this.value};var zl=function(t){this.name="ExpressionEvaluationError",this.message=t};zl.prototype.toJSON=function(){return this.message};var j3={string:ji,number:An,boolean:Ii,object:IS},cc=function(t,e){this.type=t,this.args=e};cc.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i,r=1,o=t[0];if("array"===o){var s,c;if(t.length>2){var a=t[1];if("string"!=typeof a||!(a in j3)||"object"===a)return e.error('The item type argument of "array" must be one of string, number, boolean',1);s=j3[a],r++}else s=Ai;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);c=t[2],r++}i=Ph(s,c)}else i=j3[o];for(var h=[];r<t.length;r++){var p=e.parse(t[r],r,Ai);if(!p)return null;h.push(p)}return new cc(i,h)},cc.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var r=this.args[e].evaluate(t);if(!lI(this.type,al(r)))return r;if(e===this.args.length-1)throw new zl("Expected value to be of type "+Js(this.type)+", but found "+Js(al(r))+" instead.")}return null},cc.prototype.eachChild=function(t){this.args.forEach(t)},cc.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},cc.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var r=t.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){e.push(r.kind);var i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map(function(o){return o.serialize()}))};var Yv=function(t){this.type=HL,this.sections=t};Yv.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return e.error("First argument must be an image or text section.");for(var i=[],o=!1,s=1;s<=t.length-1;++s){var a=t[s];if(o&&"object"==typeof a&&!Array.isArray(a)){o=!1;var c=null;if(a["font-scale"]&&!(c=e.parse(a["font-scale"],1,An)))return null;var h=null;if(a["text-font"]&&!(h=e.parse(a["text-font"],1,Ph(ji))))return null;var p=null;if(a["text-color"]&&!(p=e.parse(a["text-color"],1,Am)))return null;var m=i[i.length-1];m.scale=c,m.font=h,m.textColor=p}else{var E=e.parse(t[s],1,Ai);if(!E)return null;var S=E.type.kind;if("string"!==S&&"value"!==S&&"null"!==S&&"resolvedImage"!==S)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,i.push({content:E,scale:null,font:null,textColor:null})}}return new Yv(i)},Yv.prototype.evaluate=function(t){return new uc(this.sections.map(function(r){var i=r.content.evaluate(t);return al(i)===aI?new B3("",i,null,null,null):new B3(dI(i),null,r.scale?r.scale.evaluate(t):null,r.font?r.font.evaluate(t).join(","):null,r.textColor?r.textColor.evaluate(t):null)}))},Yv.prototype.eachChild=function(t){for(var e=0,r=this.sections;e<r.length;e+=1){var i=r[e];t(i.content),i.scale&&t(i.scale),i.font&&t(i.font),i.textColor&&t(i.textColor)}},Yv.prototype.outputDefined=function(){return!1},Yv.prototype.serialize=function(){for(var t=["format"],e=0,r=this.sections;e<r.length;e+=1){var i=r[e];t.push(i.content.serialize());var o={};i.scale&&(o["font-scale"]=i.scale.serialize()),i.font&&(o["text-font"]=i.font.serialize()),i.textColor&&(o["text-color"]=i.textColor.serialize()),t.push(o)}return t};var qv=function(t){this.type=aI,this.input=t};qv.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,ji);return r?new qv(r):e.error("No image name provided.")},qv.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=_f.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r},qv.prototype.eachChild=function(t){t(this.input)},qv.prototype.outputDefined=function(){return!1},qv.prototype.serialize=function(){return["image",this.input.serialize()]};var Vne={"to-boolean":Ii,"to-color":Am,"to-number":An,"to-string":ji},Ih=function(t,e){this.type=t,this.args=e};Ih.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");for(var i=Vne[r],o=[],s=1;s<t.length;s++){var a=e.parse(t[s],s,Ai);if(!a)return null;o.push(a)}return new Ih(i,o)},Ih.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,r,i=0,o=this.args;i<o.length;i+=1){if(r=null,(e=o[i].evaluate(t))instanceof Bo)return e;if("string"==typeof e){var a=t.parseColor(e);if(a)return a}else if(Array.isArray(e)&&!(r=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":F6(e[0],e[1],e[2],e[3])))return new Bo(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new zl(r||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var c=null,h=0,p=this.args;h<p.length;h+=1){if(null===(c=p[h].evaluate(t)))return 0;var E=Number(c);if(!isNaN(E))return E}throw new zl("Could not convert "+JSON.stringify(c)+" to number.")}return"formatted"===this.type.kind?uc.fromString(dI(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?_f.fromString(dI(this.args[0].evaluate(t))):dI(this.args[0].evaluate(t))},Ih.prototype.eachChild=function(t){this.args.forEach(t)},Ih.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Ih.prototype.serialize=function(){if("formatted"===this.type.kind)return new Yv([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new qv(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var zne=["Unknown","Point","LineString","Polygon"],Xv=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Xv.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Xv.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?zne[this.feature.type]:this.feature.type:null},Xv.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Xv.prototype.canonicalID=function(){return this.canonical},Xv.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Xv.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Bo.parse(t)),e};var Pu=function(t,e,r,i){this.name=t,this.type=e,this._evaluate=r,this.args=i};Pu.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Pu.prototype.eachChild=function(t){this.args.forEach(t)},Pu.prototype.outputDefined=function(){return!1},Pu.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},Pu.parse=function(t,e){var r,i=t[0],o=Pu.definitions[i];if(!o)return e.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0);for(var s=Array.isArray(o)?o[0]:o.type,a=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,c=a.filter(function(ot){var st=ot[0];return!Array.isArray(st)||st.length===t.length-1}),h=null,p=0,m=c;p<m.length;p+=1){var E=m[p],S=E[0],x=E[1];h=new Qv(e.registry,e.path,null,e.scope);for(var P=[],R=!1,F=1;F<t.length;F++){var D=t[F],j=Array.isArray(S)?S[F-1]:S.type,G=h.parse(D,1+P.length,j);if(!G){R=!0;break}P.push(G)}if(!R){if(Array.isArray(S)&&S.length!==P.length){h.error("Expected "+S.length+" arguments, but found "+P.length+" instead.");continue}for(var X=0;X<P.length;X++){var J=Array.isArray(S)?S[X]:S.type,$=P[X];h.concat(X+1).checkSubtype(J,$.type)}if(0===h.errors.length)return new Pu(i,s,x,P)}}if(1===c.length)(r=e.errors).push.apply(r,h.errors);else{for(var ie=(c.length?c:a).map(function(ot){return function(n){return Array.isArray(n)?"("+n.map(Js).join(", ")+")":"("+Js(n.type)+"...)"}(ot[0])}).join(" | "),Fe=[],Ce=1;Ce<t.length;Ce++){var $e=e.parse(t[Ce],1+Fe.length);if(!$e)return null;Fe.push(Js($e.type))}e.error("Expected arguments of type "+ie+", but found ("+Fe.join(", ")+") instead.")}return null},Pu.register=function(t,e){for(var r in Pu.definitions=e,e)t[r]=Pu};var Kv=function(t,e,r){this.type=zL,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e};Kv.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");var i=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Ii);if(!i)return null;var o=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Ii);if(!o)return null;var s=null;return r.locale&&!(s=e.parse(r.locale,1,ji))?null:new Kv(i,o,s)},Kv.prototype.evaluate=function(t){return new cI(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},Kv.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},Kv.prototype.outputDefined=function(){return!1},Kv.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Zv=8192;function U3(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.max(n[2],t[0]),n[3]=Math.max(n[3],t[1])}function YL(n,t){return!(n[0]<=t[0]||n[2]>=t[2]||n[1]<=t[1]||n[3]>=t[3])}function qne(n,t){var e=function(n){return(180+n)/360}(n[0]),r=function(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}(n[1]),i=Math.pow(2,t.z);return[Math.round(e*i*Zv),Math.round(r*i*Zv)]}function Xne(n,t,e){var r=n[0]-t[0],i=n[1]-t[1],o=n[0]-e[0],s=n[1]-e[1];return r*s-o*i==0&&r*o<=0&&i*s<=0}function Kne(n,t,e){return t[1]>n[1]!=e[1]>n[1]&&n[0]<(e[0]-t[0])*(n[1]-t[1])/(e[1]-t[1])+t[0]}function V3(n,t){for(var e=!1,r=0,i=t.length;r<i;r++)for(var o=t[r],s=0,a=o.length;s<a-1;s++){if(Xne(n,o[s],o[s+1]))return!1;Kne(n,o[s],o[s+1])&&(e=!e)}return e}function Zne(n,t){for(var e=0;e<t.length;e++)if(V3(n,t[e]))return!0;return!1}function G6(n,t,e,r){var c=r[0]-e[0],h=r[1]-e[1],p=(n[0]-e[0])*h-c*(n[1]-e[1]),m=(t[0]-e[0])*h-c*(t[1]-e[1]);return p>0&&m<0||p<0&&m>0}function Qne(n,t,e,r){return 0!==function(n,t){return n[0]*t[1]-n[1]*t[0]}([r[0]-e[0],r[1]-e[1]],[t[0]-n[0],t[1]-n[1]])&&!(!G6(n,t,e,r)||!G6(e,r,n,t))}function $ne(n,t,e){for(var r=0,i=e;r<i.length;r+=1)for(var o=i[r],s=0;s<o.length-1;++s)if(Qne(n,t,o[s],o[s+1]))return!0;return!1}function B6(n,t){for(var e=0;e<n.length;++e)if(!V3(n[e],t))return!1;for(var r=0;r<n.length-1;++r)if($ne(n[r],n[r+1],t))return!1;return!0}function ere(n,t){for(var e=0;e<t.length;e++)if(B6(n,t[e]))return!0;return!1}function z3(n,t,e){for(var r=[],i=0;i<n.length;i++){for(var o=[],s=0;s<n[i].length;s++){var a=qne(n[i][s],e);U3(t,a),o.push(a)}r.push(o)}return r}function j6(n,t,e){for(var r=[],i=0;i<n.length;i++){var o=z3(n[i],t,e);r.push(o)}return r}function U6(n,t,e,r){if(n[0]<e[0]||n[0]>e[2]){var i=.5*r,o=n[0]-e[0]>i?-r:e[0]-n[0]>i?r:0;0===o&&(o=n[0]-e[2]>i?-r:e[2]-n[0]>i?r:0),n[0]+=o}U3(t,n)}function V6(n,t,e,r){for(var i=Math.pow(2,r.z)*Zv,o=[r.x*Zv,r.y*Zv],s=[],a=0,c=n;a<c.length;a+=1)for(var p=0,m=c[a];p<m.length;p+=1){var E=m[p],S=[E.x+o[0],E.y+o[1]];U6(S,t,e,i),s.push(S)}return s}function z6(n,t,e,r){for(var i=Math.pow(2,r.z)*Zv,o=[r.x*Zv,r.y*Zv],s=[],a=0,c=n;a<c.length;a+=1){for(var p=[],m=0,E=c[a];m<E.length;m+=1){var S=E[m],x=[S.x+o[0],S.y+o[1]];U3(t,x),p.push(x)}s.push(p)}if(t[2]-t[0]<=i/2){!function(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}(t);for(var P=0,R=s;P<R.length;P+=1)for(var D=0,j=R[P];D<j.length;D+=1)U6(j[D],t,e,i)}return s}var Ef=function(t,e){this.type=Ii,this.geojson=t,this.geometries=e};function qL(n){if(n instanceof Pu){if("get"===n.name&&1===n.args.length)return!1;if("feature-state"===n.name)return!1;if("has"===n.name&&1===n.args.length)return!1;if("properties"===n.name||"geometry-type"===n.name||"id"===n.name)return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof Ef)return!1;var t=!0;return n.eachChild(function(e){t&&!qL(e)&&(t=!1)}),t}function hI(n){if(n instanceof Pu&&"feature-state"===n.name)return!1;var t=!0;return n.eachChild(function(e){t&&!hI(e)&&(t=!1)}),t}function XL(n,t){if(n instanceof Pu&&t.indexOf(n.name)>=0)return!1;var e=!0;return n.eachChild(function(r){e&&!XL(r,t)&&(e=!1)}),e}Ef.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(WL(t[1])){var r=t[1];if("FeatureCollection"===r.type)for(var i=0;i<r.features.length;++i){var o=r.features[i].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Ef(r,r.features[i].geometry)}else if("Feature"===r.type){var s=r.geometry.type;if("Polygon"===s||"MultiPolygon"===s)return new Ef(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new Ef(r,r)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ef.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(n,t){var e=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if("Polygon"===t.type){var o=z3(t.coordinates,r,i),s=V6(n.geometry(),e,r,i);if(!YL(e,r))return!1;for(var a=0,c=s;a<c.length;a+=1)if(!V3(c[a],o))return!1}if("MultiPolygon"===t.type){var p=j6(t.coordinates,r,i),m=V6(n.geometry(),e,r,i);if(!YL(e,r))return!1;for(var E=0,S=m;E<S.length;E+=1)if(!Zne(S[E],p))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(n,t){var e=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=n.canonicalID();if("Polygon"===t.type){var o=z3(t.coordinates,r,i),s=z6(n.geometry(),e,r,i);if(!YL(e,r))return!1;for(var a=0,c=s;a<c.length;a+=1)if(!B6(c[a],o))return!1}if("MultiPolygon"===t.type){var p=j6(t.coordinates,r,i),m=z6(n.geometry(),e,r,i);if(!YL(e,r))return!1;for(var E=0,S=m;E<S.length;E+=1)if(!ere(S[E],p))return!1}return!0}(t,this.geometries)}return!1},Ef.prototype.eachChild=function(){},Ef.prototype.outputDefined=function(){return!0},Ef.prototype.serialize=function(){return["within",this.geojson]};var Jv=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Jv.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var r=t[1];return e.scope.has(r)?new Jv(r,e.scope.get(r)):e.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)},Jv.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Jv.prototype.eachChild=function(){},Jv.prototype.outputDefined=function(){return!1},Jv.prototype.serialize=function(){return["var",this.name]};var Qv=function(t,e,r,i,o){void 0===e&&(e=[]),void 0===i&&(i=new sI),void 0===o&&(o=[]),this.registry=t,this.path=e,this.key=e.map(function(s){return"["+s+"]"}).join(""),this.scope=i,this.errors=o,this.expectedType=r};function H3(n){if(n instanceof Jv)return H3(n.boundExpression);if(n instanceof Pu&&"error"===n.name)return!1;if(n instanceof Kv)return!1;if(n instanceof Ef)return!1;var t=n instanceof Ih||n instanceof cc,e=!0;return n.eachChild(function(r){e=t?e&&H3(r):e&&r instanceof Zp}),!!e&&qL(n)&&XL(n,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function KL(n,t){for(var s,e=n.length-1,r=0,i=e,o=0;r<=i;)if((s=n[o=Math.floor((r+i)/2)])<=t){if(o===e||t<n[o+1])return o;r=o+1}else{if(!(s>t))throw new zl("Input is not a number.");i=o-1}return 0}Qv.prototype.parse=function(t,e,r,i,o){return void 0===o&&(o={}),e?this.concat(e,r,i)._parse(t,o):this._parse(t,o)},Qv.prototype._parse=function(t,e){function r(p,m,E){return"assert"===E?new cc(m,[p]):"coerce"===E?new Ih(m,[p]):p}if((null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t)&&(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var i=t[0];if("string"!=typeof i)return this.error("Expression name must be a string, but found "+typeof i+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var o=this.registry[i];if(o){var s=o.parse(t,this);if(!s)return null;if(this.expectedType){var a=this.expectedType,c=s.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==c.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==c.kind&&"string"!==c.kind){if(this.checkSubtype(a,c))return null}else s=r(s,a,e.typeAnnotation||"coerce");else s=r(s,a,e.typeAnnotation||"assert")}if(!(s instanceof Zp)&&"resolvedImage"!==s.type.kind&&H3(s)){var h=new Xv;try{s=new Zp(s.type,s.evaluate(h))}catch(p){return this.error(p.message),null}}return s}return this.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Qv.prototype.concat=function(t,e,r){var i="number"==typeof t?this.path.concat(t):this.path,o=r?this.scope.concat(r):this.scope;return new Qv(this.registry,i,e||null,o,this.errors)},Qv.prototype.error=function(t){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var i=""+this.key+e.map(function(o){return"["+o+"]"}).join("");this.errors.push(new Kp(i,t))},Qv.prototype.checkSubtype=function(t,e){var r=lI(t,e);return r&&this.error(r),r};var $v=function(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var i=0,o=r;i<o.length;i+=1){var s=o[i],c=s[1];this.labels.push(s[0]),this.outputs.push(c)}};$v.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var r=e.parse(t[1],1,An);if(!r)return null;var i=[],o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType);for(var s=1;s<t.length;s+=2){var a=1===s?-1/0:t[s],c=t[s+1],h=s,p=s+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(i.length&&i[i.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',h);var m=e.parse(c,p,o);if(!m)return null;o=o||m.type,i.push([a,m])}return new $v(o,r,i)},$v.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return r[0].evaluate(t);var o=e.length;return i>=e[o-1]?r[o-1].evaluate(t):r[KL(e,i)].evaluate(t)},$v.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},$v.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},$v.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var ire=AS;function AS(n,t,e,r){this.cx=3*n,this.bx=3*(e-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=r,this.p2x=e,this.p2y=r}function zd(n,t,e){return n*(1-e)+t*e}AS.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n},AS.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n},AS.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},AS.prototype.solveCurveX=function(n,t){var e,r,i,o,s;for(void 0===t&&(t=1e-6),i=n,s=0;s<8;s++){if(o=this.sampleCurveX(i)-n,Math.abs(o)<t)return i;var a=this.sampleCurveDerivativeX(i);if(Math.abs(a)<1e-6)break;i-=o/a}if((i=n)<(e=0))return e;if(i>(r=1))return r;for(;e<r;){if(o=this.sampleCurveX(i),Math.abs(o-n)<t)return i;n>o?e=i:r=i,i=.5*(r-e)+e}return i},AS.prototype.solve=function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))};var H6=Object.freeze({__proto__:null,number:zd,color:function(n,t,e){return new Bo(zd(n.r,t.r,e),zd(n.g,t.g,e),zd(n.b,t.b,e),zd(n.a,t.a,e))},array:function(n,t,e){return n.map(function(r,i){return zd(r,t[i],e)})}}),X6=4/29,MS=6/29,K6=3*MS*MS,lre=Math.PI/180,ure=180/Math.PI;function W3(n){return n>.008856451679035631?Math.pow(n,1/3):n/K6+X6}function Y3(n){return n>MS?n*n*n:K6*(n-X6)}function q3(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function X3(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Z6(n){var t=X3(n.r),e=X3(n.g),r=X3(n.b),i=W3((.4124564*t+.3575761*e+.1804375*r)/.95047),o=W3((.2126729*t+.7151522*e+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-W3((.0193339*t+.119192*e+.9503041*r)/1.08883)),alpha:n.a}}function J6(n){var t=(n.l+16)/116,e=isNaN(n.a)?t:t+n.a/500,r=isNaN(n.b)?t:t-n.b/200;return t=1*Y3(t),e=.95047*Y3(e),r=1.08883*Y3(r),new Bo(q3(3.2404542*e-1.5371385*t-.4985314*r),q3(-.969266*e+1.8760108*t+.041556*r),q3(.0556434*e-.2040259*t+1.0572252*r),n.alpha)}function fre(n,t,e){var r=t-n;return n+e*(r>180||r<-180?r-360*Math.round(r/360):r)}var fI={forward:Z6,reverse:J6,interpolate:function(n,t,e){return{l:zd(n.l,t.l,e),a:zd(n.a,t.a,e),b:zd(n.b,t.b,e),alpha:zd(n.alpha,t.alpha,e)}}},pI={forward:function(n){var t=Z6(n),e=t.l,r=t.a,i=t.b,o=Math.atan2(i,r)*ure;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:e,alpha:n.a}},reverse:function(n){var t=n.h*lre,e=n.c;return J6({l:n.l,a:Math.cos(t)*e,b:Math.sin(t)*e,alpha:n.alpha})},interpolate:function(n,t,e){return{h:fre(n.h,t.h,e),c:zd(n.c,t.c,e),l:zd(n.l,t.l,e),alpha:zd(n.alpha,t.alpha,e)}}},Q6=Object.freeze({__proto__:null,lab:fI,hcl:pI}),su=function(t,e,r,i,o){this.type=t,this.operator=e,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(var s=0,a=o;s<a.length;s+=1){var c=a[s],p=c[1];this.labels.push(c[0]),this.outputs.push(p)}};function K3(n,t,e,r){var i=r-e,o=n-e;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}su.interpolationFactor=function(t,e,r,i){var o=0;if("exponential"===t.name)o=K3(e,t.base,r,i);else if("linear"===t.name)o=K3(e,1,r,i);else if("cubic-bezier"===t.name){var s=t.controlPoints;o=new ire(s[0],s[1],s[2],s[3]).solve(K3(e,1,r,i))}return o},su.parse=function(t,e){var r=t[0],i=t[1],o=t[2],s=t.slice(3);if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){var a=i[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:a}}else{if("cubic-bezier"!==i[0])return e.error("Unknown interpolation type "+String(i[0]),1,0);var c=i.slice(1);if(4!==c.length||c.some(function(F){return"number"!=typeof F||F<0||F>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:c}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(o=e.parse(o,2,An)))return null;var h=[],p=null;"interpolate-hcl"===r||"interpolate-lab"===r?p=Am:e.expectedType&&"value"!==e.expectedType.kind&&(p=e.expectedType);for(var m=0;m<s.length;m+=2){var E=s[m],S=s[m+1],x=m+3,P=m+4;if("number"!=typeof E)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',x);if(h.length&&h[h.length-1][0]>=E)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',x);var R=e.parse(S,P,p);if(!R)return null;p=p||R.type,h.push([E,R])}return"number"===p.kind||"color"===p.kind||"array"===p.kind&&"number"===p.itemType.kind&&"number"==typeof p.N?new su(p,r,i,o,h):e.error("Type "+Js(p)+" is not interpolatable.")},su.prototype.evaluate=function(t){var e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=e[0])return r[0].evaluate(t);var o=e.length;if(i>=e[o-1])return r[o-1].evaluate(t);var s=KL(e,i),h=su.interpolationFactor(this.interpolation,i,e[s],e[s+1]),p=r[s].evaluate(t),m=r[s+1].evaluate(t);return"interpolate"===this.operator?H6[this.type.kind.toLowerCase()](p,m,h):"interpolate-hcl"===this.operator?pI.reverse(pI.interpolate(pI.forward(p),pI.forward(m),h)):fI.reverse(fI.interpolate(fI.forward(p),fI.forward(m),h))},su.prototype.eachChild=function(t){t(this.input);for(var e=0,r=this.outputs;e<r.length;e+=1)t(r[e])},su.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},su.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],r=0;r<this.labels.length;r++)e.push(this.labels[r],this.outputs[r].serialize());return e};var Mm=function(t,e){this.type=t,this.args=e};Mm.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var r=null,i=e.expectedType;i&&"value"!==i.kind&&(r=i);for(var o=[],s=0,a=t.slice(1);s<a.length;s+=1){var h=e.parse(a[s],1+o.length,r,void 0,{typeAnnotation:"omit"});if(!h)return null;r=r||h.type,o.push(h)}var p=i&&o.some(function(m){return lI(i,m.type)});return new Mm(p?Ai:r,o)},Mm.prototype.evaluate=function(t){for(var i,e=null,r=0,o=0,s=this.args;o<s.length&&(r++,(e=s[o].evaluate(t))&&e instanceof _f&&!e.available&&(i||(i=e.name),e=null,r===this.args.length&&(e=i)),null===e);o+=1);return e},Mm.prototype.eachChild=function(t){this.args.forEach(t)},Mm.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Mm.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var ey=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};ey.prototype.evaluate=function(t){return this.result.evaluate(t)},ey.prototype.eachChild=function(t){for(var e=0,r=this.bindings;e<r.length;e+=1)t(r[e][1]);t(this.result)},ey.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var r=[],i=1;i<t.length-1;i+=2){var o=t[i];if("string"!=typeof o)return e.error("Expected string, but found "+typeof o+" instead.",i);if(/[^a-zA-Z0-9_]/.test(o))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);var s=e.parse(t[i+1],i+1);if(!s)return null;r.push([o,s])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return a?new ey(r,a):null},ey.prototype.outputDefined=function(){return this.result.outputDefined()},ey.prototype.serialize=function(){for(var t=["let"],e=0,r=this.bindings;e<r.length;e+=1){var i=r[e];t.push(i[0],i[1].serialize())}return t.push(this.result.serialize()),t};var KE=function(t,e,r){this.type=t,this.index=e,this.input=r};KE.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,An),i=e.parse(t[2],2,Ph(e.expectedType||Ai));return r&&i?new KE(i.type.itemType,r,i):null},KE.prototype.evaluate=function(t){var e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new zl("Array index out of bounds: "+e+" < 0.");if(e>=r.length)throw new zl("Array index out of bounds: "+e+" > "+(r.length-1)+".");if(e!==Math.floor(e))throw new zl("Array index must be an integer, but found "+e+" instead.");return r[e]},KE.prototype.eachChild=function(t){t(this.index),t(this.input)},KE.prototype.outputDefined=function(){return!1},KE.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ZE=function(t,e){this.type=Ii,this.needle=t,this.haystack=e};ZE.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,Ai),i=e.parse(t[2],2,Ai);return r&&i?G3(r.type,[Ii,ji,An,VL,Ai])?new ZE(r,i):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Js(r.type)+" instead"):null},ZE.prototype.evaluate=function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!r)return!1;if(!uI(e,["boolean","string","number","null"]))throw new zl("Expected first argument to be of type boolean, string, number or null, but found "+Js(al(e))+" instead.");if(!uI(r,["string","array"]))throw new zl("Expected second argument to be of type array or string, but found "+Js(al(r))+" instead.");return r.indexOf(e)>=0},ZE.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},ZE.prototype.outputDefined=function(){return!0},ZE.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ty=function(t,e,r){this.type=An,this.needle=t,this.haystack=e,this.fromIndex=r};ty.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,Ai),i=e.parse(t[2],2,Ai);if(!r||!i)return null;if(!G3(r.type,[Ii,ji,An,VL,Ai]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+Js(r.type)+" instead");if(4===t.length){var o=e.parse(t[3],3,An);return o?new ty(r,i,o):null}return new ty(r,i)},ty.prototype.evaluate=function(t){var e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!uI(e,["boolean","string","number","null"]))throw new zl("Expected first argument to be of type boolean, string, number or null, but found "+Js(al(e))+" instead.");if(!uI(r,["string","array"]))throw new zl("Expected second argument to be of type array or string, but found "+Js(al(r))+" instead.");if(this.fromIndex){var i=this.fromIndex.evaluate(t);return r.indexOf(e,i)}return r.indexOf(e)},ty.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},ty.prototype.outputDefined=function(){return!1},ty.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var JE=function(t,e,r,i,o,s){this.inputType=t,this.type=e,this.input=r,this.cases=i,this.outputs=o,this.otherwise=s};JE.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var r,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var o={},s=[],a=2;a<t.length-1;a+=2){var c=t[a],h=t[a+1];Array.isArray(c)||(c=[c]);var p=e.concat(a);if(0===c.length)return p.error("Expected at least one branch label.");for(var m=0,E=c;m<E.length;m+=1){var S=E[m];if("number"!=typeof S&&"string"!=typeof S)return p.error("Branch labels must be numbers or strings.");if("number"==typeof S&&Math.abs(S)>Number.MAX_SAFE_INTEGER)return p.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof S&&Math.floor(S)!==S)return p.error("Numeric branch labels must be integer values.");if(r){if(p.checkSubtype(r,al(S)))return null}else r=al(S);if(void 0!==o[String(S)])return p.error("Branch labels must be unique.");o[String(S)]=s.length}var x=e.parse(h,a,i);if(!x)return null;i=i||x.type,s.push(x)}var P=e.parse(t[1],1,Ai);if(!P)return null;var R=e.parse(t[t.length-1],t.length-1,i);return!R||"value"!==P.type.kind&&e.concat(1).checkSubtype(r,P.type)?null:new JE(r,i,P,o,s,R)},JE.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(al(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},JE.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},JE.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})&&this.otherwise.outputDefined()},JE.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],i=[],o={},s=0,a=Object.keys(this.cases).sort();s<a.length;s+=1){var c=a[s];void 0===(h=o[this.cases[c]])?(o[this.cases[c]]=i.length,i.push([this.cases[c],[c]])):i[h][1].push(c)}for(var p=function(P){return"number"===t.inputType.kind?Number(P):P},m=0,E=i;m<E.length;m+=1){var S=E[m],h=S[0],x=S[1];e.push(1===x.length?p(x[0]):x.map(p)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var QE=function(t,e,r){this.type=t,this.branches=e,this.otherwise=r};QE.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i=[],o=1;o<t.length-1;o+=2){var s=e.parse(t[o],o,Ii);if(!s)return null;var a=e.parse(t[o+1],o+1,r);if(!a)return null;i.push([s,a]),r=r||a.type}var c=e.parse(t[t.length-1],t.length-1,r);return c?new QE(r,i,c):null},QE.prototype.evaluate=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var i=r[e],s=i[1];if(i[0].evaluate(t))return s.evaluate(t)}return this.otherwise.evaluate(t)},QE.prototype.eachChild=function(t){for(var e=0,r=this.branches;e<r.length;e+=1){var i=r[e],s=i[1];t(i[0]),t(s)}t(this.otherwise)},QE.prototype.outputDefined=function(){return this.branches.every(function(t){return t[1].outputDefined()})&&this.otherwise.outputDefined()},QE.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var ny=function(t,e,r,i){this.type=t,this.input=e,this.beginIndex=r,this.endIndex=i};function $6(n,t){return"=="===n||"!="===n?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function eU(n,t,e,r){return 0===r.compare(t,e)}function RS(n,t,e){var r="=="!==n&&"!="!==n;return function(){function i(o,s,a){this.type=Ii,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument="value"===o.type.kind||"value"===s.type.kind}return i.parse=function(s,a){if(3!==s.length&&4!==s.length)return a.error("Expected two or three arguments.");var c=s[0],h=a.parse(s[1],1,Ai);if(!h)return null;if(!$6(c,h.type))return a.concat(1).error('"'+c+"\" comparisons are not supported for type '"+Js(h.type)+"'.");var p=a.parse(s[2],2,Ai);if(!p)return null;if(!$6(c,p.type))return a.concat(2).error('"'+c+"\" comparisons are not supported for type '"+Js(p.type)+"'.");if(h.type.kind!==p.type.kind&&"value"!==h.type.kind&&"value"!==p.type.kind)return a.error("Cannot compare types '"+Js(h.type)+"' and '"+Js(p.type)+"'.");r&&("value"===h.type.kind&&"value"!==p.type.kind?h=new cc(p.type,[h]):"value"!==h.type.kind&&"value"===p.type.kind&&(p=new cc(h.type,[p])));var m=null;if(4===s.length){if("string"!==h.type.kind&&"string"!==p.type.kind&&"value"!==h.type.kind&&"value"!==p.type.kind)return a.error("Cannot use collator to compare non-string types.");if(!(m=a.parse(s[3],3,zL)))return null}return new i(h,p,m)},i.prototype.evaluate=function(s){var a=this.lhs.evaluate(s),c=this.rhs.evaluate(s);if(r&&this.hasUntypedArgument){var h=al(a),p=al(c);if(h.kind!==p.kind||"string"!==h.kind&&"number"!==h.kind)throw new zl('Expected arguments for "'+n+'" to be (string, string) or (number, number), but found ('+h.kind+", "+p.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var m=al(a),E=al(c);if("string"!==m.kind||"string"!==E.kind)return t(s,a,c)}return this.collator?e(s,a,c,this.collator.evaluate(s)):t(s,a,c)},i.prototype.eachChild=function(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)},i.prototype.outputDefined=function(){return!0},i.prototype.serialize=function(){var s=[n];return this.eachChild(function(a){s.push(a.serialize())}),s},i}()}ny.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1,Ai),i=e.parse(t[2],2,An);if(!r||!i)return null;if(!G3(r.type,[Ph(Ai),ji,Ai]))return e.error("Expected first argument to be of type array or string, but found "+Js(r.type)+" instead");if(4===t.length){var o=e.parse(t[3],3,An);return o?new ny(r.type,r,i,o):null}return new ny(r.type,r,i)},ny.prototype.evaluate=function(t){var e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);if(!uI(e,["string","array"]))throw new zl("Expected first argument to be of type array or string, but found "+Js(al(e))+" instead.");if(this.endIndex){var i=this.endIndex.evaluate(t);return e.slice(r,i)}return e.slice(r)},ny.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},ny.prototype.outputDefined=function(){return!1},ny.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Tre=RS("==",function(n,t,e){return t===e},eU),Pre=RS("!=",function(n,t,e){return t!==e},function(n,t,e,r){return!eU(0,t,e,r)}),Ire=RS("<",function(n,t,e){return t<e},function(n,t,e,r){return r.compare(t,e)<0}),Are=RS(">",function(n,t,e){return t>e},function(n,t,e,r){return r.compare(t,e)>0}),Mre=RS("<=",function(n,t,e){return t<=e},function(n,t,e,r){return r.compare(t,e)<=0}),Rre=RS(">=",function(n,t,e){return t>=e},function(n,t,e,r){return r.compare(t,e)>=0}),$E=function(t,e,r,i,o){this.type=ji,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=o};$E.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var r=e.parse(t[1],1,An);if(!r)return null;var i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");var o=null;if(i.locale&&!(o=e.parse(i.locale,1,ji)))return null;var s=null;if(i.currency&&!(s=e.parse(i.currency,1,ji)))return null;var a=null;if(i["min-fraction-digits"]&&!(a=e.parse(i["min-fraction-digits"],1,An)))return null;var c=null;return i["max-fraction-digits"]&&!(c=e.parse(i["max-fraction-digits"],1,An))?null:new $E(r,o,s,a,c)},$E.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},$E.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},$E.prototype.outputDefined=function(){return!1},$E.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var eb=function(t){this.type=An,this.input=t};eb.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error("Expected argument of type string or array, but found "+Js(r.type)+" instead."):new eb(r):null},eb.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new zl("Expected value to be of type string or array, but found "+Js(al(e))+" instead.")},eb.prototype.eachChild=function(t){t(this.input)},eb.prototype.outputDefined=function(){return!1},eb.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Z3={"==":Tre,"!=":Pre,">":Are,"<":Ire,">=":Rre,"<=":Mre,array:cc,at:KE,boolean:cc,case:QE,coalesce:Mm,collator:Kv,format:Yv,image:qv,in:ZE,"index-of":ty,interpolate:su,"interpolate-hcl":su,"interpolate-lab":su,length:eb,let:ey,literal:Zp,match:JE,number:cc,"number-format":$E,object:cc,slice:ny,step:$v,string:cc,"to-boolean":Ih,"to-color":Ih,"to-number":Ih,"to-string":Ih,var:Jv,within:Ef};function tU(n,t){var e=t[0],r=t[1],i=t[2],o=t[3];e=e.evaluate(n),r=r.evaluate(n),i=i.evaluate(n);var s=o?o.evaluate(n):1,a=F6(e,r,i,s);if(a)throw new zl(a);return new Bo(e/255*s,r/255*s,i/255*s,s)}function nU(n,t){return n in t}function J3(n,t){var e=t[n];return void 0===e?null:e}function tb(n){return{type:n}}function Q3(n){return{result:"success",value:n}}function OS(n){return{result:"error",value:n}}function ZL(n){return"data-driven"===n["property-type"]||"cross-faded-data-driven"===n["property-type"]}function rU(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function $3(n){return!!n.expression&&n.expression.interpolated}function is(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":null===n?"null":typeof n}function gI(n){return"object"==typeof n&&null!==n&&!Array.isArray(n)}function Dre(n){return n}function e5(n,t){var a,c,h,e="color"===t.type,r=n.stops&&"object"==typeof n.stops[0][0],o=r||!(r||void 0!==n.property),s=n.type||($3(t)?"exponential":"interval");if(e&&((n=PS({},n)).stops&&(n.stops=n.stops.map(function(le){return[le[0],Bo.parse(le[1])]})),n.default=Bo.parse(n.default?n.default:t.default)),n.colorSpace&&"rgb"!==n.colorSpace&&!Q6[n.colorSpace])throw new Error("Unknown color space: "+n.colorSpace);if("exponential"===s)a=iU;else if("interval"===s)a=kre;else if("categorical"===s){a=Lre,c=Object.create(null);for(var p=0,m=n.stops;p<m.length;p+=1){var E=m[p];c[E[0]]=E[1]}h=typeof n.stops[0][0]}else{if("identity"!==s)throw new Error('Unknown function type "'+s+'"');a=Nre}if(r){for(var S={},x=[],P=0;P<n.stops.length;P++){var R=n.stops[P],F=R[0].zoom;void 0===S[F]&&(S[F]={zoom:F,type:n.type,property:n.property,default:n.default,stops:[]},x.push(F)),S[F].stops.push([R[0].value,R[1]])}for(var D=[],j=0,G=x;j<G.length;j+=1){var X=G[j];D.push([S[X].zoom,e5(S[X],t)])}var J={name:"linear"};return{kind:"composite",interpolationType:J,interpolationFactor:su.interpolationFactor.bind(void 0,J),zoomStops:D.map(function(le){return le[0]}),evaluate:function(ie,Fe){var Ce=ie.zoom;return iU({stops:D,base:n.base},t,Ce).evaluate(Ce,Fe)}}}if(o){var $="exponential"===s?{name:"exponential",base:void 0!==n.base?n.base:1}:null;return{kind:"camera",interpolationType:$,interpolationFactor:su.interpolationFactor.bind(void 0,$),zoomStops:n.stops.map(function(le){return le[0]}),evaluate:function(le){return a(n,t,le.zoom,c,h)}}}return{kind:"source",evaluate:function(ie,Fe){var Ce=Fe&&Fe.properties?Fe.properties[n.property]:void 0;return void 0===Ce?mI(n.default,t.default):a(n,t,Ce,c,h)}}}function mI(n,t,e){return void 0!==n?n:void 0!==t?t:void 0!==e?e:void 0}function Lre(n,t,e,r,i){return mI(typeof e===i?r[e]:void 0,n.default,t.default)}function kre(n,t,e){if("number"!==is(e))return mI(n.default,t.default);var r=n.stops.length;if(1===r||e<=n.stops[0][0])return n.stops[0][1];if(e>=n.stops[r-1][0])return n.stops[r-1][1];var i=KL(n.stops.map(function(o){return o[0]}),e);return n.stops[i][1]}function iU(n,t,e){var r=void 0!==n.base?n.base:1;if("number"!==is(e))return mI(n.default,t.default);var i=n.stops.length;if(1===i||e<=n.stops[0][0])return n.stops[0][1];if(e>=n.stops[i-1][0])return n.stops[i-1][1];var o=KL(n.stops.map(function(m){return m[0]}),e),s=function(n,t,e,r){var i=r-e,o=n-e;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(e,r,n.stops[o][0],n.stops[o+1][0]),a=n.stops[o][1],c=n.stops[o+1][1],h=H6[t.type]||Dre;if(n.colorSpace&&"rgb"!==n.colorSpace){var p=Q6[n.colorSpace];h=function(m,E){return p.reverse(p.interpolate(p.forward(m),p.forward(E),s))}}return"function"==typeof a.evaluate?{evaluate:function(){for(var E=[],S=arguments.length;S--;)E[S]=arguments[S];var x=a.evaluate.apply(void 0,E),P=c.evaluate.apply(void 0,E);if(void 0!==x&&void 0!==P)return h(x,P,s)}}:h(a,c,s)}function Nre(n,t,e){return"color"===t.type?e=Bo.parse(e):"formatted"===t.type?e=uc.fromString(e.toString()):"resolvedImage"===t.type?e=_f.fromString(e.toString()):is(e)!==t.type&&("enum"!==t.type||!t.values[e])&&(e=void 0),mI(e,n.default,t.default)}Pu.register(Z3,{error:[{kind:"error"},[ji],function(n,t){throw new zl(t[0].evaluate(n))}],typeof:[ji,[Ai],function(n,t){return Js(al(t[0].evaluate(n)))}],"to-rgba":[Ph(An,4),[Am],function(n,t){return t[0].evaluate(n).toArray()}],rgb:[Am,[An,An,An],tU],rgba:[Am,[An,An,An,An],tU],has:{type:Ii,overloads:[[[ji],function(n,t){return nU(t[0].evaluate(n),n.properties())}],[[ji,IS],function(n,t){var r=t[1];return nU(t[0].evaluate(n),r.evaluate(n))}]]},get:{type:Ai,overloads:[[[ji],function(n,t){return J3(t[0].evaluate(n),n.properties())}],[[ji,IS],function(n,t){var r=t[1];return J3(t[0].evaluate(n),r.evaluate(n))}]]},"feature-state":[Ai,[ji],function(n,t){return J3(t[0].evaluate(n),n.featureState||{})}],properties:[IS,[],function(n){return n.properties()}],"geometry-type":[ji,[],function(n){return n.geometryType()}],id:[Ai,[],function(n){return n.id()}],zoom:[An,[],function(n){return n.globals.zoom}],"heatmap-density":[An,[],function(n){return n.globals.heatmapDensity||0}],"line-progress":[An,[],function(n){return n.globals.lineProgress||0}],accumulated:[Ai,[],function(n){return void 0===n.globals.accumulated?null:n.globals.accumulated}],"+":[An,tb(An),function(n,t){for(var e=0,r=0,i=t;r<i.length;r+=1)e+=i[r].evaluate(n);return e}],"*":[An,tb(An),function(n,t){for(var e=1,r=0,i=t;r<i.length;r+=1)e*=i[r].evaluate(n);return e}],"-":{type:An,overloads:[[[An,An],function(n,t){var r=t[1];return t[0].evaluate(n)-r.evaluate(n)}],[[An],function(n,t){return-t[0].evaluate(n)}]]},"/":[An,[An,An],function(n,t){var r=t[1];return t[0].evaluate(n)/r.evaluate(n)}],"%":[An,[An,An],function(n,t){var r=t[1];return t[0].evaluate(n)%r.evaluate(n)}],ln2:[An,[],function(){return Math.LN2}],pi:[An,[],function(){return Math.PI}],e:[An,[],function(){return Math.E}],"^":[An,[An,An],function(n,t){var r=t[1];return Math.pow(t[0].evaluate(n),r.evaluate(n))}],sqrt:[An,[An],function(n,t){return Math.sqrt(t[0].evaluate(n))}],log10:[An,[An],function(n,t){return Math.log(t[0].evaluate(n))/Math.LN10}],ln:[An,[An],function(n,t){return Math.log(t[0].evaluate(n))}],log2:[An,[An],function(n,t){return Math.log(t[0].evaluate(n))/Math.LN2}],sin:[An,[An],function(n,t){return Math.sin(t[0].evaluate(n))}],cos:[An,[An],function(n,t){return Math.cos(t[0].evaluate(n))}],tan:[An,[An],function(n,t){return Math.tan(t[0].evaluate(n))}],asin:[An,[An],function(n,t){return Math.asin(t[0].evaluate(n))}],acos:[An,[An],function(n,t){return Math.acos(t[0].evaluate(n))}],atan:[An,[An],function(n,t){return Math.atan(t[0].evaluate(n))}],min:[An,tb(An),function(n,t){return Math.min.apply(Math,t.map(function(e){return e.evaluate(n)}))}],max:[An,tb(An),function(n,t){return Math.max.apply(Math,t.map(function(e){return e.evaluate(n)}))}],abs:[An,[An],function(n,t){return Math.abs(t[0].evaluate(n))}],round:[An,[An],function(n,t){var r=t[0].evaluate(n);return r<0?-Math.round(-r):Math.round(r)}],floor:[An,[An],function(n,t){return Math.floor(t[0].evaluate(n))}],ceil:[An,[An],function(n,t){return Math.ceil(t[0].evaluate(n))}],"filter-==":[Ii,[ji,Ai],function(n,t){var e=t[0],r=t[1];return n.properties()[e.value]===r.value}],"filter-id-==":[Ii,[Ai],function(n,t){var e=t[0];return n.id()===e.value}],"filter-type-==":[Ii,[ji],function(n,t){var e=t[0];return n.geometryType()===e.value}],"filter-<":[Ii,[ji,Ai],function(n,t){var e=t[0],r=t[1],i=n.properties()[e.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[Ii,[Ai],function(n,t){var e=t[0],r=n.id(),i=e.value;return typeof r==typeof i&&r<i}],"filter->":[Ii,[ji,Ai],function(n,t){var e=t[0],r=t[1],i=n.properties()[e.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[Ii,[Ai],function(n,t){var e=t[0],r=n.id(),i=e.value;return typeof r==typeof i&&r>i}],"filter-<=":[Ii,[ji,Ai],function(n,t){var e=t[0],r=t[1],i=n.properties()[e.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[Ii,[Ai],function(n,t){var e=t[0],r=n.id(),i=e.value;return typeof r==typeof i&&r<=i}],"filter->=":[Ii,[ji,Ai],function(n,t){var e=t[0],r=t[1],i=n.properties()[e.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[Ii,[Ai],function(n,t){var e=t[0],r=n.id(),i=e.value;return typeof r==typeof i&&r>=i}],"filter-has":[Ii,[Ai],function(n,t){return t[0].value in n.properties()}],"filter-has-id":[Ii,[],function(n){return null!==n.id()&&void 0!==n.id()}],"filter-type-in":[Ii,[Ph(ji)],function(n,t){return t[0].value.indexOf(n.geometryType())>=0}],"filter-id-in":[Ii,[Ph(Ai)],function(n,t){return t[0].value.indexOf(n.id())>=0}],"filter-in-small":[Ii,[ji,Ph(Ai)],function(n,t){var e=t[0];return t[1].value.indexOf(n.properties()[e.value])>=0}],"filter-in-large":[Ii,[ji,Ph(Ai)],function(n,t){var e=t[0],r=t[1];return function(n,t,e,r){for(;e<=r;){var i=e+r>>1;if(t[i]===n)return!0;t[i]>n?r=i-1:e=i+1}return!1}(n.properties()[e.value],r.value,0,r.value.length-1)}],all:{type:Ii,overloads:[[[Ii,Ii],function(n,t){var r=t[1];return t[0].evaluate(n)&&r.evaluate(n)}],[tb(Ii),function(n,t){for(var e=0,r=t;e<r.length;e+=1)if(!r[e].evaluate(n))return!1;return!0}]]},any:{type:Ii,overloads:[[[Ii,Ii],function(n,t){var r=t[1];return t[0].evaluate(n)||r.evaluate(n)}],[tb(Ii),function(n,t){for(var e=0,r=t;e<r.length;e+=1)if(r[e].evaluate(n))return!0;return!1}]]},"!":[Ii,[Ii],function(n,t){return!t[0].evaluate(n)}],"is-supported-script":[Ii,[ji],function(n,t){var r=n.globals&&n.globals.isSupportedScript;return!r||r(t[0].evaluate(n))}],upcase:[ji,[ji],function(n,t){return t[0].evaluate(n).toUpperCase()}],downcase:[ji,[ji],function(n,t){return t[0].evaluate(n).toLowerCase()}],concat:[ji,tb(Ai),function(n,t){return t.map(function(e){return dI(e.evaluate(n))}).join("")}],"resolved-locale":[ji,[zL],function(n,t){return t[0].evaluate(n).resolvedLocale()}]});var JL=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Xv,this._defaultValue=e?function(n){return"color"===n.type&&gI(n.default)?new Bo(0,0,0,0):"color"===n.type?Bo.parse(n.default)||null:void 0===n.default?null:n.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function vI(n){return Array.isArray(n)&&n.length>0&&"string"==typeof n[0]&&n[0]in Z3}function QL(n,t){var e=new Qv(Z3,[],t?function(n){var t={color:Am,string:ji,number:An,enum:ji,boolean:Ii,formatted:HL,resolvedImage:aI};return"array"===n.type?Ph(t[n.value]||Ai,n.length):t[n.type]}(t):void 0),r=e.parse(n,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Q3(new JL(r,t)):OS(e.errors)}JL.prototype.evaluateWithoutErrorHandling=function(t,e,r,i,o,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)},JL.prototype.evaluate=function(t,e,r,i,o,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new zl("Expected value to be one of "+Object.keys(this._enumValues).map(function(c){return JSON.stringify(c)}).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(c){return this._warningHistory[c.message]||(this._warningHistory[c.message]=!0,"undefined"!=typeof console&&console.warn(c.message)),this._defaultValue}};var yI=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!hI(e.expression)};yI.prototype.evaluateWithoutErrorHandling=function(t,e,r,i,o,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,i,o,s)},yI.prototype.evaluate=function(t,e,r,i,o,s){return this._styleExpression.evaluate(t,e,r,i,o,s)};var DS=function(t,e,r,i){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!hI(e.expression),this.interpolationType=i};function t5(n,t){if("error"===(n=QL(n,t)).result)return n;var e=n.value.expression,r=qL(e);if(!r&&!ZL(t))return OS([new Kp("","data expressions not supported")]);var i=XL(e,["zoom"]);if(!i&&!rU(t))return OS([new Kp("","zoom expressions not supported")]);var o=$L(e);return o||i?o instanceof Kp?OS([o]):o instanceof su&&!$3(t)?OS([new Kp("",'"interpolate" expressions cannot be used with this property')]):Q3(o?new DS(r?"camera":"composite",n.value,o.labels,o instanceof su?o.interpolation:void 0):new yI(r?"constant":"source",n.value)):OS([new Kp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}DS.prototype.evaluateWithoutErrorHandling=function(t,e,r,i,o,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,r,i,o,s)},DS.prototype.evaluate=function(t,e,r,i,o,s){return this._styleExpression.evaluate(t,e,r,i,o,s)},DS.prototype.interpolationFactor=function(t,e,r){return this.interpolationType?su.interpolationFactor(this.interpolationType,t,e,r):0};var _I=function(t,e){this._parameters=t,this._specification=e,PS(this,e5(this._parameters,this._specification))};function $L(n){var t=null;if(n instanceof ey)t=$L(n.result);else if(n instanceof Mm)for(var e=0,r=n.args;e<r.length&&!(t=$L(r[e]));e+=1);else(n instanceof $v||n instanceof su)&&n.input instanceof Pu&&"zoom"===n.input.name&&(t=n);return t instanceof Kp||n.eachChild(function(o){var s=$L(o);s instanceof Kp?t=s:!t&&s?t=new Kp("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&s&&t!==s&&(t=new Kp("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function LS(n){return"object"==typeof n?["literal",n]:n}function n5(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function sU(n,t){return void 0!==n?n:void 0!==t?t:void 0}function r5(n,t,e){var r=o5(n,t),i=["get",n.property];if("categorical"===r&&"boolean"==typeof e[0][0]){for(var o=["case"],s=0,a=e;s<a.length;s+=1){var c=a[s];o.push(["==",i,c[0]],c[1])}return o.push(LS(sU(n.default,t.default))),o}if("categorical"===r){for(var h=["match",i],p=0,m=e;p<m.length;p+=1){var E=m[p];kS(h,E[0],E[1],!1)}return h.push(LS(sU(n.default,t.default))),h}if("interval"===r){for(var S=["step",["number",i]],x=0,P=e;x<P.length;x+=1){var R=P[x];kS(S,R[0],R[1],!0)}return i5(S),void 0===n.default?S:["case",["==",["typeof",i],"number"],S,LS(n.default)]}if("exponential"===r){for(var F=void 0!==n.base?n.base:1,D=[n5(n),1===F?["linear"]:["exponential",F],["number",i]],j=0,G=e;j<G.length;j+=1){var X=G[j];kS(D,X[0],X[1],!1)}return void 0===n.default?D:["case",["==",["typeof",i],"number"],D,LS(n.default)]}throw new Error("Unknown property function type "+r)}function i5(n){"step"===n[0]&&3===n.length&&(n.push(0),n.push(n[3]))}function kS(n,t,e,r){n.length>3&&t===n[n.length-2]||(r&&2===n.length||n.push(t),n.push(e))}function o5(n,t){return n.type?n.type:t.expression.interpolated?"exponential":"interval"}function aU(n){for(var t=["concat"],e=/{([^{}]+)}/g,r=0,i=e.exec(n);null!==i;i=e.exec(n)){var o=n.slice(r,e.lastIndex-i[0].length);r=e.lastIndex,o.length>0&&t.push(o),t.push(["get",i[1]])}if(1===t.length)return n;if(r<n.length)t.push(n.slice(r));else if(2===t.length)return["to-string",t[1]];return t}function EI(n){if(!0===n||!1===n)return!0;if(!Array.isArray(n)||0===n.length)return!1;switch(n[0]){case"has":return n.length>=2&&"$id"!==n[1]&&"$type"!==n[1];case"in":return n.length>=3&&("string"!=typeof n[1]||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==n.length||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(var t=0,e=n.slice(1);t<e.length;t+=1){var r=e[t];if(!EI(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}_I.deserialize=function(t){return new _I(t._parameters,t._specification)},_I.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Hre={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Yre(n,t){return n<t?-1:n>t?1:0}function e2(n){if(!n)return!0;var t=n[0];return n.length<=1?"any"!==t:"=="===t?s5(n[1],n[2],"=="):"!="===t?t2(s5(n[1],n[2],"==")):"<"===t||">"===t||"<="===t||">="===t?s5(n[1],n[2],t):"any"===t?function(n){return["any"].concat(n.map(e2))}(n.slice(1)):"all"===t?["all"].concat(n.slice(1).map(e2)):"none"===t?["all"].concat(n.slice(1).map(e2).map(t2)):"in"===t?lU(n[1],n.slice(2)):"!in"===t?t2(lU(n[1],n.slice(2))):"has"===t?uU(n[1]):"!has"!==t||t2(uU(n[1]))}function s5(n,t,e){switch(n){case"$type":return["filter-type-"+e,t];case"$id":return["filter-id-"+e,t];default:return["filter-"+e,n,t]}}function lU(n,t){if(0===t.length)return!1;switch(n){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(e){return typeof e!=typeof t[0]})?["filter-in-large",n,["literal",t.sort(Yre)]]:["filter-in-small",n,["literal",t]]}}function uU(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function t2(n){return["!",n]}var Qre=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function $re(n,t){var e={};for(var r in n)"ref"!==r&&(e[r]=n[r]);return Qre.forEach(function(i){i in t&&(e[i]=t[i])}),e}var Dn=function(t,e,r,i){this.message=(t?t+": ":"")+r,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)},oie=function(t){this.error=t,this.message=t.message;var e=t.message.match(/line (\d+)/);this.line=e?parseInt(e[1],10):0};function mU(n){var e=n.value;return e?[new Dn(n.key,e,"constants have been deprecated as of v8")]:[]}function ka(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function nb(n){if(Array.isArray(n))return n.map(nb);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){var t={};for(var e in n)t[e]=nb(n[e]);return t}return ka(n)}function bf(n){var t=n.key,e=n.value,r=n.valueSpec||{},i=n.objectElementValidators||{},o=n.style,s=n.styleSpec,a=[],c=is(e);if("object"!==c)return[new Dn(t,e,"object expected, "+c+" found")];for(var h in e){var p=h.split(".")[0],m=r[p]||r["*"],E=void 0;if(i[p])E=i[p];else if(r[p])E=wf;else if(i["*"])E=i["*"];else{if(!r["*"]){a.push(new Dn(t,e[h],'unknown property "'+h+'"'));continue}E=wf}a=a.concat(E({key:(t&&t+".")+h,value:e[h],valueSpec:m,style:o,styleSpec:s,object:e,objectKey:h},e))}for(var S in r)i[S]||r[S].required&&void 0===r[S].default&&void 0===e[S]&&a.push(new Dn(t,e,'missing required property "'+S+'"'));return a}function vU(n){var t=n.value,e=n.valueSpec,r=n.style,i=n.styleSpec,o=n.key,s=n.arrayElementValidator||wf;if("array"!==is(t))return[new Dn(o,t,"array expected, "+is(t)+" found")];if(e.length&&t.length!==e.length)return[new Dn(o,t,"array length "+e.length+" expected, length "+t.length+" found")];if(e["min-length"]&&t.length<e["min-length"])return[new Dn(o,t,"array length at least "+e["min-length"]+" expected, length "+t.length+" found")];var a={type:e.value,values:e.values};i.$version<7&&(a.function=e.function),"object"===is(e.value)&&(a=e.value);for(var c=[],h=0;h<t.length;h++)c=c.concat(s({array:t,arrayIndex:h,value:t[h],valueSpec:a,style:r,styleSpec:i,key:o+"["+h+"]"}));return c}function yU(n){var t=n.key,e=n.value,r=n.valueSpec,i=is(e);return"number"===i&&e!=e&&(i="NaN"),"number"!==i?[new Dn(t,e,"number expected, "+i+" found")]:"minimum"in r&&e<r.minimum?[new Dn(t,e,e+" is less than the minimum value "+r.minimum)]:"maximum"in r&&e>r.maximum?[new Dn(t,e,e+" is greater than the maximum value "+r.maximum)]:[]}function _U(n){var r,o,s,t=n.valueSpec,e=ka(n.value.type),i={},a="categorical"!==e&&void 0===n.value.property,c=!a,h="array"===is(n.value.stops)&&"array"===is(n.value.stops[0])&&"object"===is(n.value.stops[0][0]),p=bf({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(P){if("identity"===e)return[new Dn(P.key,P.value,'identity function may not have a "stops" property')];var R=[],F=P.value;return R=R.concat(vU({key:P.key,value:F,valueSpec:P.valueSpec,style:P.style,styleSpec:P.styleSpec,arrayElementValidator:E})),"array"===is(F)&&0===F.length&&R.push(new Dn(P.key,F,"array must have at least one stop")),R},default:function(P){return wf({key:P.key,value:P.value,valueSpec:t,style:P.style,styleSpec:P.styleSpec})}}});return"identity"===e&&a&&p.push(new Dn(n.key,n.value,'missing required property "property"')),"identity"!==e&&!n.value.stops&&p.push(new Dn(n.key,n.value,'missing required property "stops"')),"exponential"===e&&n.valueSpec.expression&&!$3(n.valueSpec)&&p.push(new Dn(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(c&&!ZL(n.valueSpec)?p.push(new Dn(n.key,n.value,"property functions not supported")):a&&!rU(n.valueSpec)&&p.push(new Dn(n.key,n.value,"zoom functions not supported"))),("categorical"===e||h)&&void 0===n.value.property&&p.push(new Dn(n.key,n.value,'"property" property is required')),p;function E(P){var R=[],F=P.value,D=P.key;if("array"!==is(F))return[new Dn(D,F,"array expected, "+is(F)+" found")];if(2!==F.length)return[new Dn(D,F,"array length 2 expected, length "+F.length+" found")];if(h){if("object"!==is(F[0]))return[new Dn(D,F,"object expected, "+is(F[0])+" found")];if(void 0===F[0].zoom)return[new Dn(D,F,"object stop key must have zoom")];if(void 0===F[0].value)return[new Dn(D,F,"object stop key must have value")];if(s&&s>ka(F[0].zoom))return[new Dn(D,F[0].zoom,"stop zoom values must appear in ascending order")];ka(F[0].zoom)!==s&&(s=ka(F[0].zoom),o=void 0,i={}),R=R.concat(bf({key:D+"[0]",value:F[0],valueSpec:{zoom:{}},style:P.style,styleSpec:P.styleSpec,objectElementValidators:{zoom:yU,value:S}}))}else R=R.concat(S({key:D+"[0]",value:F[0],valueSpec:{},style:P.style,styleSpec:P.styleSpec},F));return vI(nb(F[1]))?R.concat([new Dn(D+"[1]",F[1],"expressions are not allowed in function stops.")]):R.concat(wf({key:D+"[1]",value:F[1],valueSpec:t,style:P.style,styleSpec:P.styleSpec}))}function S(P,R){var F=is(P.value),D=ka(P.value),j=null!==P.value?P.value:R;if(r){if(F!==r)return[new Dn(P.key,j,F+" stop domain type must match previous stop domain type "+r)]}else r=F;if("number"!==F&&"string"!==F&&"boolean"!==F)return[new Dn(P.key,j,"stop domain value must be a number, string, or boolean")];if("number"!==F&&"categorical"!==e){var G="number expected, "+F+" found";return ZL(t)&&void 0===e&&(G+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Dn(P.key,j,G)]}return"categorical"!==e||"number"!==F||isFinite(D)&&Math.floor(D)===D?"categorical"!==e&&"number"===F&&void 0!==o&&D<o?[new Dn(P.key,j,"stop domain values must appear in ascending order")]:(o=D,"categorical"===e&&D in i?[new Dn(P.key,j,"stop domain values must be unique")]:(i[D]=!0,[])):[new Dn(P.key,j,"integer expected, found "+D)]}}function NS(n){var t=("property"===n.expressionContext?t5:QL)(nb(n.value),n.valueSpec);if("error"===t.result)return t.value.map(function(r){return new Dn(""+n.key+r.key,n.value,r.message)});var e=t.value.expression||t.value._styleExpression.expression;if("property"===n.expressionContext&&"text-font"===n.propertyKey&&!e.outputDefined())return[new Dn(n.key,n.value,'Invalid data expression for "'+n.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===n.expressionContext&&"layout"===n.propertyType&&!hI(e))return[new Dn(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===n.expressionContext&&!hI(e))return[new Dn(n.key,n.value,'"feature-state" data expressions are not supported with filters.')];if(n.expressionContext&&0===n.expressionContext.indexOf("cluster")){if(!XL(e,["zoom","feature-state"]))return[new Dn(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===n.expressionContext&&!qL(e))return[new Dn(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function o2(n){var t=n.key,e=n.value,r=n.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(ka(e))&&i.push(new Dn(t,e,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(e)+" found")):-1===Object.keys(r.values).indexOf(ka(e))&&i.push(new Dn(t,e,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(e)+" found")),i}function a5(n){return EI(nb(n.value))?NS(PS({},n,{expressionContext:"filter",valueSpec:{value:"boolean"}})):EU(n)}function EU(n){var t=n.value,e=n.key;if("array"!==is(t))return[new Dn(e,t,"array expected, "+is(t)+" found")];var i,r=n.styleSpec,o=[];if(t.length<1)return[new Dn(e,t,"filter array must have at least 1 element")];switch(o=o.concat(o2({key:e+"[0]",value:t[0],valueSpec:r.filter_operator,style:n.style,styleSpec:n.styleSpec})),ka(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===ka(t[1])&&o.push(new Dn(e,t,'"$type" cannot be use with operator "'+t[0]+'"'));case"==":case"!=":3!==t.length&&o.push(new Dn(e,t,'filter array for operator "'+t[0]+'" must have 3 elements'));case"in":case"!in":t.length>=2&&"string"!==(i=is(t[1]))&&o.push(new Dn(e+"[1]",t[1],"string expected, "+i+" found"));for(var s=2;s<t.length;s++)i=is(t[s]),"$type"===ka(t[1])?o=o.concat(o2({key:e+"["+s+"]",value:t[s],valueSpec:r.geometry_type,style:n.style,styleSpec:n.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new Dn(e+"["+s+"]",t[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var a=1;a<t.length;a++)o=o.concat(EU({key:e+"["+a+"]",value:t[a],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":i=is(t[1]),2!==t.length?o.push(new Dn(e,t,'filter array for "'+t[0]+'" operator must have 2 elements')):"string"!==i&&o.push(new Dn(e+"[1]",t[1],"string expected, "+i+" found"))}return o}function bU(n,t){var e=n.key,r=n.style,i=n.styleSpec,o=n.value,s=n.objectKey,a=i[t+"_"+n.layerType];if(!a)return[];var c=s.match(/^(.*)-transition$/);if("paint"===t&&c&&a[c[1]]&&a[c[1]].transition)return wf({key:e,value:o,valueSpec:i.transition,style:r,styleSpec:i});var p,h=n.valueSpec||a[s];if(!h)return[new Dn(e,o,'unknown property "'+s+'"')];if("string"===is(o)&&ZL(h)&&!h.tokens&&(p=/^{([^}]+)}$/.exec(o)))return[new Dn(e,o,'"'+s+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(p[1])+" }`.")];var m=[];return"symbol"===n.layerType&&("text-field"===s&&r&&!r.glyphs&&m.push(new Dn(e,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&gI(nb(o))&&"identity"===ka(o.type)&&m.push(new Dn(e,o,'"text-font" does not support identity functions'))),m.concat(wf({key:n.key,value:o,valueSpec:h,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:s}))}function wU(n){return bU(n,"paint")}function CU(n){return bU(n,"layout")}function SU(n){var t=[],e=n.value,r=n.key,i=n.style,o=n.styleSpec;!e.type&&!e.ref&&t.push(new Dn(r,e,'either "type" or "ref" is required'));var m,s=ka(e.type),a=ka(e.ref);if(e.id)for(var c=ka(e.id),h=0;h<n.arrayIndex;h++){var p=i.layers[h];ka(p.id)===c&&t.push(new Dn(r,e.id,'duplicate layer id "'+e.id+'", previously used at line '+p.id.__line__))}if("ref"in e)["type","source","source-layer","filter","layout"].forEach(function(x){x in e&&t.push(new Dn(r,e[x],'"'+x+'" is prohibited for ref layers'))}),i.layers.forEach(function(x){ka(x.id)===a&&(m=x)}),m?m.ref?t.push(new Dn(r,e.ref,"ref cannot reference another ref layer")):s=ka(m.type):t.push(new Dn(r,e.ref,'ref layer "'+a+'" not found'));else if("background"!==s)if(e.source){var E=i.sources&&i.sources[e.source],S=E&&ka(E.type);E?"vector"===S&&"raster"===s?t.push(new Dn(r,e.source,'layer "'+e.id+'" requires a raster source')):"raster"===S&&"raster"!==s?t.push(new Dn(r,e.source,'layer "'+e.id+'" requires a vector source')):"vector"!==S||e["source-layer"]?"raster-dem"===S&&"hillshade"!==s?t.push(new Dn(r,e.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===s&&e.paint&&e.paint["line-gradient"]&&("geojson"!==S||!E.lineMetrics)&&t.push(new Dn(r,e,'layer "'+e.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new Dn(r,e,'layer "'+e.id+'" must specify a "source-layer"')):t.push(new Dn(r,e.source,'source "'+e.source+'" not found'))}else t.push(new Dn(r,e,'missing required property "source"'));return t=t.concat(bf({key:r,value:e,valueSpec:o.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return wf({key:r+".type",value:e.type,valueSpec:o.layer.type,style:n.style,styleSpec:n.styleSpec,object:e,objectKey:"type"})},filter:a5,layout:function(P){return bf({layer:e,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,objectElementValidators:{"*":function(F){return CU(PS({layerType:s},F))}}})},paint:function(P){return bf({layer:e,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,objectElementValidators:{"*":function(F){return wU(PS({layerType:s},F))}}})}}}))}function FS(n){var t=n.value,e=n.key,r=is(t);return"string"!==r?[new Dn(e,t,"string expected, "+r+" found")]:[]}var xU={promoteId:function(n){var t=n.key,e=n.value;if("string"===is(e))return FS({key:t,value:e});var r=[];for(var i in e)r.push.apply(r,FS({key:t+"."+i,value:e[i]}));return r}};function TU(n){var t=n.value,e=n.key,r=n.styleSpec,i=n.style;if(!t.type)return[new Dn(e,t,'"type" is required')];var s,o=ka(t.type);switch(o){case"vector":case"raster":case"raster-dem":return bf({key:e,value:t,valueSpec:r["source_"+o.replace("-","_")],style:n.style,styleSpec:r,objectElementValidators:xU});case"geojson":if(s=bf({key:e,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:xU}),t.cluster)for(var a in t.clusterProperties){var c=t.clusterProperties[a],h=c[0],m="string"==typeof h?[h,["accumulated"],["get",a]]:h;s.push.apply(s,NS({key:e+"."+a+".map",value:c[1],expressionContext:"cluster-map"})),s.push.apply(s,NS({key:e+"."+a+".reduce",value:m,expressionContext:"cluster-reduce"}))}return s;case"video":return bf({key:e,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return bf({key:e,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new Dn(e,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return o2({key:e+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function PU(n){var t=n.value,e=n.styleSpec,r=e.light,i=n.style,o=[],s=is(t);if(void 0===t)return o;if("object"!==s)return o.concat([new Dn("light",t,"object expected, "+s+" found")]);for(var a in t){var c=a.match(/^(.*)-transition$/);o=o.concat(c&&r[c[1]]&&r[c[1]].transition?wf({key:a,value:t[a],valueSpec:e.transition,style:i,styleSpec:e}):r[a]?wf({key:a,value:t[a],valueSpec:r[a],style:i,styleSpec:e}):[new Dn(a,t[a],'unknown property "'+a+'"')])}return o}var IU={"*":function(){return[]},array:vU,boolean:function(n){var t=n.value,e=n.key,r=is(t);return"boolean"!==r?[new Dn(e,t,"boolean expected, "+r+" found")]:[]},number:yU,color:function(n){var t=n.key,e=n.value,r=is(e);return"string"!==r?[new Dn(t,e,"color expected, "+r+" found")]:null===N6(e)?[new Dn(t,e,'color expected, "'+e+'" found')]:[]},constants:mU,enum:o2,filter:a5,function:_U,layer:SU,object:bf,source:TU,light:PU,string:FS,formatted:function(n){return 0===FS(n).length?[]:NS(n)},resolvedImage:function(n){return 0===FS(n).length?[]:NS(n)}};function wf(n){var t=n.value,e=n.valueSpec,r=n.styleSpec;return e.expression&&gI(ka(t))?_U(n):e.expression&&vI(nb(t))?NS(n):e.type&&IU[e.type]?IU[e.type](n):bf(PS({},n,{valueSpec:e.type?r[e.type]:e}))}function die(n){var t=n.value,e=n.key,r=FS(n);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new Dn(e,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new Dn(e,t,'"glyphs" url must include a "{range}" token'))),r}function ry(n,t){void 0===t&&(t=ou);var e=[];return e=e.concat(wf({key:"",value:n,valueSpec:t.$root,styleSpec:t,style:n,objectElementValidators:{glyphs:die,"*":function(){return[]}}})),n.constants&&(e=e.concat(mU({key:"constants",value:n.constants,style:n,styleSpec:t}))),AU(e)}function AU(n){return[].concat(n).sort(function(t,e){return t.line-e.line})}function GS(n){return function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return AU(n.apply(this,t))}}ry.source=GS(TU),ry.light=GS(PU),ry.layer=GS(SU),ry.filter=GS(a5),ry.paintProperty=GS(wU),ry.layoutProperty=GS(CU);var s2=UL(function(n,t){var e=function(){var r=function(F,D,j,G){for(j=j||{},G=F.length;G--;j[F[G]]=D);return j},i=[1,12],o=[1,13],s=[1,9],a=[1,10],c=[1,11],h=[1,14],p=[1,15],m=[14,18,22,24],E=[18,22],S=[22,24],x={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(D,j,G,X,J,$,le){var ie=$.length-1;switch(J){case 1:this.$=new String(D.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(D),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=$[ie-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=$[ie-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[$[ie-2],$[ie]];break;case 16:this.$={},this.$[$[ie][0]]=$[ie][1];break;case 17:this.$=$[ie-2],$[ie-2][$[ie][0]]=$[ie][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[$[ie]];break;case 21:this.$=$[ie-2],$[ie-2].push($[ie])}},table:[{3:5,4:i,5:6,6:o,7:3,8:s,9:4,10:a,11:c,12:1,13:2,15:7,16:8,17:h,23:p},{1:[3]},{14:[1,16]},r(m,[2,7]),r(m,[2,8]),r(m,[2,9]),r(m,[2,10]),r(m,[2,11]),r(m,[2,12]),r(m,[2,3]),r(m,[2,4]),r(m,[2,5]),r([14,18,21,22,24],[2,1]),r(m,[2,2]),{3:20,4:i,18:[1,17],19:18,20:19},{3:5,4:i,5:6,6:o,7:3,8:s,9:4,10:a,11:c,13:23,15:7,16:8,17:h,23:p,24:[1,21],25:22},{1:[2,6]},r(m,[2,13]),{18:[1,24],22:[1,25]},r(E,[2,16]),{21:[1,26]},r(m,[2,18]),{22:[1,28],24:[1,27]},r(S,[2,20]),r(m,[2,14]),{3:20,4:i,20:29},{3:5,4:i,5:6,6:o,7:3,8:s,9:4,10:a,11:c,13:30,15:7,16:8,17:h,23:p},r(m,[2,19]),{3:5,4:i,5:6,6:o,7:3,8:s,9:4,10:a,11:c,13:31,15:7,16:8,17:h,23:p},r(E,[2,17]),r(E,[2,15]),r(S,[2,21])],defaultActions:{16:[2,6]},parseError:function(D,j){if(!j.recoverable)throw new Error(D);this.trace(D)},parse:function(D){var j=this,G=[0],X=[null],J=[],$=this.table,le="",ie=0,Fe=0,Ce=2,$e=1,ot=J.slice.call(arguments,1),st=Object.create(this.lexer),dt={yy:{}};for(var kt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,kt)&&(dt.yy[kt]=this.yy[kt]);st.setInput(D,dt.yy),dt.yy.lexer=st,dt.yy.parser=this,void 0===st.yylloc&&(st.yylloc={});var Qe=st.yylloc;J.push(Qe);var Zt=st.options&&st.options.ranges;function gt(){var $n;return"number"!=typeof($n=st.lex()||$e)&&($n=j.symbols_[$n]||$n),$n}this.parseError="function"==typeof dt.yy.parseError?dt.yy.parseError:Object.getPrototypeOf(this).parseError;for(var Re,Xe,Oe,qt,$t,dn,ft,Pt={};;){if(this.defaultActions[Xe=G[G.length-1]]?Oe=this.defaultActions[Xe]:(null==Re&&(Re=gt()),Oe=$[Xe]&&$[Xe][Re]),void 0===Oe||!Oe.length||!Oe[0]){var Mn="";for($t in ft=[],$[Xe])this.terminals_[$t]&&$t>Ce&&ft.push("'"+this.terminals_[$t]+"'");Mn=st.showPosition?"Parse error on line "+(ie+1)+":\n"+st.showPosition()+"\nExpecting "+ft.join(", ")+", got '"+(this.terminals_[Re]||Re)+"'":"Parse error on line "+(ie+1)+": Unexpected "+(Re==$e?"end of input":"'"+(this.terminals_[Re]||Re)+"'"),this.parseError(Mn,{text:st.match,token:this.terminals_[Re]||Re,line:st.yylineno,loc:Qe,expected:ft})}if(Oe[0]instanceof Array&&Oe.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Xe+", token: "+Re);switch(Oe[0]){case 1:G.push(Re),X.push(st.yytext),J.push(st.yylloc),G.push(Oe[1]),Re=null,Fe=st.yyleng,le=st.yytext,ie=st.yylineno,Qe=st.yylloc;break;case 2:if(Pt.$=X[X.length-(dn=this.productions_[Oe[1]][1])],Pt._$={first_line:J[J.length-(dn||1)].first_line,last_line:J[J.length-1].last_line,first_column:J[J.length-(dn||1)].first_column,last_column:J[J.length-1].last_column},Zt&&(Pt._$.range=[J[J.length-(dn||1)].range[0],J[J.length-1].range[1]]),void 0!==(qt=this.performAction.apply(Pt,[le,Fe,ie,dt.yy,Oe[1],X,J].concat(ot))))return qt;dn&&(G=G.slice(0,-1*dn*2),X=X.slice(0,-1*dn),J=J.slice(0,-1*dn)),G.push(this.productions_[Oe[1]][0]),X.push(Pt.$),J.push(Pt._$),G.push($[G[G.length-2]][G[G.length-1]]);break;case 3:return!0}}return!0}};function R(){this.yy={}}return x.lexer={EOF:1,parseError:function(j,G){if(!this.yy.parser)throw new Error(j);this.yy.parser.parseError(j,G)},setInput:function(D,j){return this.yy=j||this.yy||{},this._input=D,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var D=this._input[0];return this.yytext+=D,this.yyleng++,this.offset++,this.match+=D,this.matched+=D,D.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),D},unput:function(D){var j=D.length,G=D.split(/(?:\r\n?|\n)/g);this._input=D+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-j),this.offset-=j;var X=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),G.length-1&&(this.yylineno-=G.length-1);var J=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:G?(G.length===X.length?this.yylloc.first_column:0)+X[X.length-G.length].length-G[0].length:this.yylloc.first_column-j},this.options.ranges&&(this.yylloc.range=[J[0],J[0]+this.yyleng-j]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(D){this.unput(this.match.slice(D))},pastInput:function(){var D=this.matched.substr(0,this.matched.length-this.match.length);return(D.length>20?"...":"")+D.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var D=this.match;return D.length<20&&(D+=this._input.substr(0,20-D.length)),(D.substr(0,20)+(D.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var D=this.pastInput(),j=new Array(D.length+1).join("-");return D+this.upcomingInput()+"\n"+j+"^"},test_match:function(D,j){var G,X,J;if(this.options.backtrack_lexer&&(J={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(J.yylloc.range=this.yylloc.range.slice(0))),(X=D[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=X.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:X?X[X.length-1].length-X[X.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+D[0].length},this.yytext+=D[0],this.match+=D[0],this.matches=D,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(D[0].length),this.matched+=D[0],G=this.performAction.call(this,this.yy,this,j,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),G)return G;if(this._backtrack){for(var $ in J)this[$]=J[$];return!1}return!1},next:function(){if(this.done)return this.EOF;var D,j,G,X;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var J=this._currentRules(),$=0;$<J.length;$++)if((G=this._input.match(this.rules[J[$]]))&&(!j||G[0].length>j[0].length)){if(j=G,X=$,this.options.backtrack_lexer){if(!1!==(D=this.test_match(G,J[$])))return D;if(this._backtrack){j=!1;continue}return!1}if(!this.options.flex)break}return j?!1!==(D=this.test_match(j,J[X]))&&D:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(j){this.conditionStack.push(j)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(j){return(j=this.conditionStack.length-1-Math.abs(j||0))>=0?this.conditionStack[j]:"INITIAL"},pushState:function(j){this.begin(j)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(j,G,X,J){switch(X){case 0:break;case 1:return 6;case 2:return G.yytext=G.yytext.substr(1,G.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},R.prototype=x,x.Parser=R,new R}();t.parser=e,t.Parser=e.Parser,t.parse=function(){return e.parse.apply(e,arguments)}});function a2(n,t){void 0===t&&(t=ou);var e=n;try{e=function(n){if(n instanceof String||"string"==typeof n||n instanceof Buffer)try{return s2.parse(n.toString())}catch(t){throw new oie(t)}return n}(e)}catch(r){return[r]}return ry(e,t)}var DU_isExpression=vI,DU_createPropertyExpression=t5,LU_convertFunction=function(n,t){var e=n.stops;if(!e)return function(n,t){var e=["get",n.property];if(void 0===n.default)return"string"===t.type?["string",e]:e;if("enum"===t.type)return["match",e,Object.keys(t.values),e,n.default];var r=["color"===t.type?"to-color":t.type,e,LS(n.default)];return"array"===t.type&&r.splice(1,0,t.value,t.length||null),r}(n,t);var r=e&&"object"==typeof e[0][0],i=r||void 0!==n.property,o=r||!i;return e=e.map(function(s){return!i&&t.tokens&&"string"==typeof s[1]?[s[0],aU(s[1])]:[s[0],LS(s[1])]}),r?function(n,t,e){for(var r={},i={},o=[],s=0;s<e.length;s++){var a=e[s],c=a[0].zoom;void 0===r[c]&&(r[c]={zoom:c,type:n.type,property:n.property,default:n.default},i[c]=[],o.push(c)),i[c].push([a[0].value,a[1]])}if("exponential"===o5({},t)){for(var p=[n5(n),["linear"],["zoom"]],m=0,E=o;m<E.length;m+=1){var S=E[m];kS(p,S,r5(r[S],t,i[S]),!1)}return p}for(var P=["step",["zoom"]],R=0,F=o;R<F.length;R+=1){var D=F[R];kS(P,D,r5(r[D],t,i[D]),!0)}return i5(P),P}(n,t,e):o?function(n,t,e,r){void 0===r&&(r=["zoom"]);var o,i=o5(n,t),s=!1;if("interval"===i)o=["step",r],s=!0;else{if("exponential"!==i)throw new Error('Unknown zoom function type "'+i+'"');var a=void 0!==n.base?n.base:1;o=[n5(n),1===a?["linear"]:["exponential",a],r]}for(var c=0,h=e;c<h.length;c+=1){var p=h[c];kS(o,p[0],p[1],s)}return i5(o),o}(n,t,e):r5(n,t,e)},LU_isFunction=gI;function u5(n){return n*Math.PI/180}a2.parsed=a2,a2.latest=a2;var mie=function(){for(var n=[],t=78271.51696402048;n.length<=24;t/=2)n.push(t);return n}();function c5(n,t){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(n,t);var e=document.createElement("canvas");return e.width=n,e.height=t,e}var d5,yie=Array(256).join("\u200a");function kU(n,t){if(t>=.05){for(var e="",r=n.split("\n"),i=yie.slice(0,Math.round(t/.1)),o=0,s=r.length;o<s;++o)o>0&&(e+="\n"),e+=r[o].split("").join(i);return e}return n}function NU(){return d5||(d5=c5(1,1).getContext("2d")),d5}function rb(n,t){return NU().measureText(n).width+(n.length-1)*t}var h5={};function FU(n,t,e,r){if(-1!==n.indexOf("\n")){for(var i=n.split("\n"),o=[],s=0,a=i.length;s<a;++s)o.push(FU(i[s],t,e,r));return o.join("\n")}var c=e+","+t+","+n+","+r,h=h5[c];if(!h){var p=n.split(" ");if(p.length>1){var m=NU();m.font=t;var S=m.measureText("M").width*e,x="";for(o=[],s=0,a=p.length;s<a;++s){var P=p[s],R=x+(x?" ":"")+P;rb(R,r)<=S?x=R:(x&&o.push(x),x=P)}for(x&&o.push(x),s=0,a=o.length;s<a&&a>1;++s){var F=o[s];if(rb(F,r)<.35*S){var D=s>0?rb(o[s-1],r):1/0,j=s<a-1?rb(o[s+1],r):1/0;o.splice(s,1),a-=1,D<j?(o[s-1]+=" "+F,s-=1):o[s]=F+" "+o[s]}}for(s=0,a=o.length-1;s<a;++s){var G=o[s],X=o[s+1];if(rb(G,r)>.7*S&&rb(X,r)<.6*S){var J=G.split(" "),$=J.pop();rb($,r)<.2*S&&(o[s]=J.join(" "),o[s+1]=$+" "+X),a-=1}}h=o.join("\n")}else h=n;h=kU(h,r),h5[c]=h}return h}cG&&Fl(cG,"clear",function(){h5={}});var d2,p5,_ie=LU_isFunction,Eie=LU_convertFunction,bie=DU_isExpression,wie=DU_createPropertyExpression,Cie={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Sie={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},f5={},u2={zoom:0},c2={};function Ci(n,t,e,r,i){var o=n.id;c2[o]||(c2[o]={});var s=c2[o];if(!s[e]){var a=(n[t]||f5)[e],c=ou[t+"_"+n.type][e];void 0===a&&(a=c.default);var h=bie(a);if(!h&&_ie(a)&&(a=Eie(a,c),h=!0),h){var p=function(n,t){var e=wie(n,t);if("error"===e.result)throw new Error(e.value.map(function(r){return r.key+": "+r.message}).join(", "));return e.value}(a,c);s[e]=p.evaluate.bind(p)}else"color"==c.type&&(a=Bo.parse(a)),s[e]=function(){return a}}return u2.zoom=r,s[e](u2,i)}var h2={};function ib(n,t){if(n){if(0===n.a||0===t)return;var e=n.a;return t=void 0===t?1:t,"rgba("+Math.round(255*n.r/e)+","+Math.round(255*n.g/e)+","+Math.round(255*n.b/e)+","+e*t+")"}return n}var Pie=/^([^]*)\{(.*)\}([^]*)$/;function g5(n,t){var e;do{(e=n.match(Pie))&&(n=e[1]+(t[e[2]]||"")+e[3])}while(e);return n}function Iie(n,t,e,r,i,o,s){if(void 0===r&&(r=mie),"string"==typeof t&&(t=JSON.parse(t)),8!=t.version)throw new Error("glStyle version 8 required.");var a,c;if(o)if("undefined"!=typeof Image){var h=new Image;h.crossOrigin="anonymous",h.onload=function(){a=h,c=[h.width,h.height],n.changed(),h.onload=null},h.src=o}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var p=self;p.postMessage({action:"loadImage",src:o}),p.addEventListener("message",function(st){"imageLoaded"===st.data.action&&st.data.src===o&&(c=[(a=st.data.image).width,a.height])})}for(var x,m=function(n){n=n.slice();for(var t=Object.create(null),e=0;e<n.length;e++)t[n[e].id]=n[e];for(var r=0;r<n.length;r++)"ref"in n[r]&&(n[r]=$re(n[r],t[n[r].ref]));return n}(t.layers),E={},S=[],P=0,R=m.length;P<R;++P){var F=m[P],D=F.id;if("string"==typeof e&&F.source==e||-1!==e.indexOf(D)){var j=F["source-layer"];if(!x){var G=t.sources[x=F.source];if(!G)throw new Error('Source "'+x+'" is not defined');var X=G.type;if("vector"!==X&&"geojson"!==X)throw new Error('Source "'+x+'" is not of type "vector" or "geojson", but "'+X+'"')}var J=E[j];J||(J=E[j]=[]),J.push({layer:F,index:P}),S.push(D)}delete c2[D],delete h2[D]}var $=new Gi,le=new ro,ie={},Fe={},Ce=[],$e=function(ot,st){var dt=ot.getProperties(),kt=E[dt.layer];if(kt){var Qe=r.indexOf(st);-1==Qe&&(Qe=function(n,t){for(var e=0,r=t.length;e<r;++e)if(t[e]<n&&e+1<r){var o=t[e]/t[e+1];return e+Math.log(t[e]/n)/Math.log(o)}return r-1}(st,r));for(var Zt=Cie[ot.getGeometry().getType()],gt={properties:dt,type:Zt},Re=-1,Oe=function($t,dn){var Pn=kt[$t],ft=Pn.layer,$n=ft.layout||f5,kn=ft.paint||f5;if("none"===$n.visibility||"minzoom"in ft&&Qe<ft.minzoom||"maxzoom"in ft&&Qe>=ft.maxzoom)return"continue";var ai=ft.filter;if(!ai||function(n,t,e,r){return n in h2||(h2[n]=function(n){if(null==n)return{filter:function(){return!0},needGeometry:!1};EI(n)||(n=e2(n));var t=QL(n,Hre);if("error"===t.result)throw new Error(t.value.map(function(r){return r.key+": "+r.message}).join(", "));return{filter:function(r,i,o){return t.value.evaluate(r,i,{},o)},needGeometry:Array.isArray(n)&&0!==n.length&&"within"===n[0]}}(t).filter),u2.zoom=r,h2[n](u2,e)}(ft.id,ai,gt,Qe)){ft;var yr=void 0,Mr=void 0,Ui=void 0,Wr=void 0,Ns=void 0,Nt=void 0,So=Pn.index;if(3==Zt&&("fill"==ft.type||"fill-extrusion"==ft.type))if(Mr=Ci(ft,"paint",ft.type+"-opacity",Qe,gt),ft.type+"-pattern"in kn){var os=Ci(ft,"paint",ft.type+"-pattern",Qe,gt);if(os){var ts="string"==typeof os?g5(os,dt):os.toString();if(a&&i&&i[ts]){++Re,(!(Nt=Ce[Re])||!Nt.getFill()||Nt.getStroke()||Nt.getText())&&(Nt=Ce[Re]=new br({fill:new ro})),Ui=Nt.getFill(),Nt.setZIndex(So);var Ss=Fe[$i=ts+"."+Mr];Ss||((Uo=(mo=c5((Xn=i[ts]).width,Xn.height)).getContext("2d")).globalAlpha=Mr,Uo.drawImage(a,Xn.x,Xn.y,Xn.width,Xn.height,0,0,Xn.width,Xn.height),Ss=Uo.createPattern(mo,"repeat"),Fe[$i]=Ss),Ui.setColor(Ss)}}}else(yr=ib(Ci(ft,"paint",ft.type+"-color",Qe,gt),Mr))&&(ft.type+"-outline-color"in kn&&(Ns=ib(Ci(ft,"paint",ft.type+"-outline-color",Qe,gt),Mr)),Ns||(Ns=yr),++Re,(!(Nt=Ce[Re])||!(Nt.getFill()&&Nt.getStroke())||Nt.getText())&&(Nt=Ce[Re]=new br({fill:new ro,stroke:new Gi})),(Ui=Nt.getFill()).setColor(yr),(Wr=Nt.getStroke()).setColor(Ns),Wr.setWidth(1),Nt.setZIndex(So));if(1!=Zt&&"line"==ft.type){yr=!("line-pattern"in kn)&&"line-color"in kn?ib(Ci(ft,"paint","line-color",Qe,gt),Ci(ft,"paint","line-opacity",Qe,gt)):void 0;var zs=Ci(ft,"paint","line-width",Qe,gt);yr&&zs>0&&(++Re,(!(Nt=Ce[Re])||!Nt.getStroke()||Nt.getFill()||Nt.getText())&&(Nt=Ce[Re]=new br({stroke:new Gi})),(Wr=Nt.getStroke()).setLineCap(Ci(ft,"layout","line-cap",Qe,gt)),Wr.setLineJoin(Ci(ft,"layout","line-join",Qe,gt)),Wr.setMiterLimit(Ci(ft,"layout","line-miter-limit",Qe,gt)),Wr.setColor(yr),Wr.setWidth(zs),Wr.setLineDash(kn["line-dasharray"]?Ci(ft,"paint","line-dasharray",Qe,gt).map(function(P5){return P5*zs}):null),Nt.setZIndex(So))}var co=!1,Kn=null,ps=0,vo=void 0,Vr=void 0,li=void 0;if((1==Zt||2==Zt)&&"icon-image"in $n){var Mo=Ci(ft,"layout","icon-image",Qe,gt);if(Mo){vo="string"==typeof Mo?g5(Mo,dt):Mo.toString();var Qs=void 0;if(a&&i&&i[vo]){var xs=Ci(ft,"layout","icon-rotation-alignment",Qe,gt);if(2==Zt){var ss=ot.getGeometry();if(ss.getFlatMidpoint||ss.getFlatMidpoints){var Fa=ss.getExtent();if(Math.sqrt(Math.max(Math.pow((Fa[2]-Fa[0])/st,2),Math.pow((Fa[3]-Fa[1])/st,2)))>150){var as="MultiLineString"===ss.getType()?ss.getFlatMidpoints():ss.getFlatMidpoint();if(p5||(p5=new w3("Point",d2=[NaN,NaN],[],{},null)),Qs=p5,d2[0]=as[0],d2[1]=as[1],"line"===(ua=Ci(ft,"layout","symbol-placement",Qe,gt))&&"map"===xs)for(var gs=ss.getStride(),Si=ss.getFlatCoordinates(),Vo=0,xf=Si.length-gs;Vo<xf;Vo+=gs){var Wl=Si[Vo],Yl=Si[Vo+1],ql=Si[Vo+gs],Ea=Si[Vo+gs+1],Fs=Math.min(Wl,ql),lu=Math.min(Yl,Ea),Au=Math.max(Wl,ql),cl=Math.max(Yl,Ea);if(as[0]>=Fs&&as[0]<=Au&&as[1]>=lu&&as[1]<=cl){ps=Math.atan2(Yl-Ea,ql-Wl);break}}}}}if(2!==Zt||Qs){var ms=Ci(ft,"layout","icon-size",Qe,gt),zo=void 0!==kn["icon-color"]?Ci(ft,"paint","icon-color",Qe,gt):null;if(!zo||0!==zo.a){var $i=vo+"."+ms;if(null!==zo&&($i+="."+zo),!(Vr=ie[$i])){var Xn=i[vo];if(null!==zo){var mo,Uo;(Uo=(mo=c5(Xn.width,Xn.height)).getContext("2d")).drawImage(a,Xn.x,Xn.y,Xn.width,Xn.height,0,0,Xn.width,Xn.height);for(var ls=Uo.getImageData(0,0,mo.width,mo.height),ca=0,oy=ls.data.length;ca<oy;ca+=4){var Gs=zo.a;0!==Gs&&(ls.data[ca]=255*zo.r/Gs,ls.data[ca+1]=255*zo.g/Gs,ls.data[ca+2]=255*zo.b/Gs),ls.data[ca+3]=Gs}Uo.putImageData(ls,0,0),Vr=ie[$i]=new wu({img:mo,imgSize:[mo.width,mo.height],scale:ms/Xn.pixelRatio})}else Vr=ie[$i]=new wu({img:a,imgSize:c,size:[Xn.width,Xn.height],offset:[Xn.x,Xn.y],rotateWithView:"map"===xs,scale:ms/Xn.pixelRatio})}}Vr&&(++Re,(!(Nt=Ce[Re])||!Nt.getImage()||Nt.getFill()||Nt.getStroke())&&(Nt=Ce[Re]=new br),Nt.setGeometry(Qs),Vr.setRotation(ps+u5(Ci(ft,"layout","icon-rotate",Qe,gt))),Vr.setOpacity(Ci(ft,"paint","icon-opacity",Qe,gt)),Vr.setAnchor(Sie[Ci(ft,"layout","icon-anchor",Qe,gt)]),Nt.setImage(Vr),Kn=Nt.getText(),Nt.setText(void 0),Nt.setZIndex(So),co=!0,li=!1)}else li=!0}}}if(1==Zt&&"circle-radius"in kn){++Re,(!(Nt=Ce[Re])||!Nt.getImage()||Nt.getFill()||Nt.getStroke())&&(Nt=Ce[Re]=new br);var Xl=Ci(ft,"paint","circle-radius",Qe,gt),Tf=ib(Ci(ft,"paint","circle-stroke-color",Qe,gt),Ci(ft,"paint","circle-stroke-opacity",Qe,gt)),Dm=ib(Ci(ft,"paint","circle-color",Qe,gt),Ci(ft,"paint","circle-opacity",Qe,gt)),eg=Ci(ft,"paint","circle-stroke-width",Qe,gt),bI=Xl+"."+Tf+"."+Dm+"."+eg;(Vr=ie[bI])||(Vr=ie[bI]=new Bd({radius:Xl,stroke:Tf&&eg>0?new Gi({width:eg,color:Tf}):void 0,fill:Dm?new ro({color:Dm}):void 0})),Nt.setImage(Vr),Kn=Nt.getText(),Nt.setText(void 0),Nt.setGeometry(void 0),Nt.setZIndex(So),co=!0}var dl=void 0;if("text-field"in $n&&(dl=g5(Ci(ft,"layout","text-field",Qe,gt).toString(),dt).trim(),Mr=Ci(ft,"paint","text-opacity",Qe,gt)),dl&&Mr&&!li){co||(++Re,(!(Nt=Ce[Re])||!Nt.getText()||Nt.getFill()||Nt.getStroke())&&(Nt=Ce[Re]=new br),Nt.setImage(void 0),Nt.setGeometry(void 0)),Nt.getText()||Nt.setText(Kn||new UE({padding:[2,2,2,2]})),Kn=Nt.getText();var Wd=Math.round(Ci(ft,"layout","text-size",Qe,gt)),wI=Ci(ft,"layout","text-font",Qe,gt),ab=Ci(ft,"layout","text-line-height",Qe,gt),CI=ek()(s?s(wI):wI,Wd,ab),SI=$n["text-transform"];"uppercase"==SI?dl=dl.toUpperCase():"lowercase"==SI&&(dl=dl.toLowerCase());var x5=Ci(ft,"layout","text-max-width",Qe,gt),xI=Ci(ft,"layout","text-letter-spacing",Qe,gt),TI=2==Zt?kU(dl,xI):FU(dl,CI,x5,xI);Kn.setText(TI),Kn.setFont(CI),Kn.setRotation(u5(Ci(ft,"layout","text-rotate",Qe,gt)));var Lm=Ci(ft,"layout","text-anchor",Qe,gt),ua=co||1==Zt?"point":Ci(ft,"layout","symbol-placement",Qe,gt);Kn.setPlacement(ua);var fc=Ci(ft,"paint","text-halo-width",Qe,gt),PI=Ci(ft,"layout","text-offset",Qe,gt),II=Ci(ft,"paint","text-translate",Qe,gt),lb=0,ub=0;if("point"==ua){var cb="center";-1!==Lm.indexOf("left")?(cb="left",ub=fc):-1!==Lm.indexOf("right")&&(cb="right",ub=-fc),Kn.setTextAlign(cb);var T5=Ci(ft,"layout","text-rotation-alignment",Qe,gt);Kn.setRotateWithView("map"==T5)}else Kn.setMaxAngle(u5(Ci(ft,"layout","text-max-angle",Qe,gt))*dl.length/TI.length),Kn.setTextAlign(),Kn.setRotateWithView(!1);var db="middle";0==Lm.indexOf("bottom")?(db="bottom",lb=-fc-.5*(ab-1)*Wd):0==Lm.indexOf("top")&&(db="top",lb=fc+.5*(ab-1)*Wd),Kn.setTextBaseline(db),Kn.setOffsetX(PI[0]*Wd+ub+II[0]),Kn.setOffsetY(PI[1]*Wd+lb+II[1]),le.setColor(ib(Ci(ft,"paint","text-color",Qe,gt),Mr)),Kn.setFill(le);var AI=ib(Ci(ft,"paint","text-halo-color",Qe,gt),Mr);if(AI){$.setColor(AI);var MI=.5*Wd;$.setWidth((fc*=2)<=MI?fc:MI),Kn.setStroke($)}else Kn.setStroke(void 0);var sy=Ci(ft,"layout","text-padding",Qe,gt),Pf=Kn.getPadding();sy!==Pf[0]&&(Pf[0]=Pf[1]=Pf[2]=Pf[3]=sy),Nt.setZIndex(So)}}},qt=0,Pt=kt.length;qt<Pt;++qt)Oe(qt);if(Re>-1)return Ce.length=Re+1,Ce}};return n.setStyle($e),n.set("mapbox-source",x),n.set("mapbox-layers",S),$e}var f2,Aie=/font-family: ?([^;]*);/,Mie=/("|')/g;function Rie(n){if(!f2){f2={};for(var t=document.styleSheets,e=0,r=t.length;e<r;++e){var i=t[e];try{var o=i.rules||i.cssRules;if(o)for(var s=0,a=o.length;s<a;++s){var c=o[s];if(5==c.type){var h=c.cssText.match(Aie);f2[h[1].replace(Mie,"")]=!0}}}catch(p){}}}return n in f2}var jU={},Oie=SR().getNames();function Die(n){var t=n.toString();if(t in jU)return n;for(var e=n.map(function(h){var p=ek()(h,1).split(" ");return[p.slice(3).join(" ").replace(/"/g,""),p[1]+p[0]]}),r=0,i=e.length;r<i;++r){var o=e[r],s=o[0];if(!Rie(s)&&-1!==Oie.indexOf(s)){var a="https://fonts.googleapis.com/css?family="+s.replace(/ /g,"+")+":"+o[1];if(!document.querySelector('link[href="'+a+'"]')){var c=document.createElement("link");c.href=a,c.rel="stylesheet",document.head.appendChild(c)}}}return jU[t]=!0,n}var UU=/^(.*)(\?.*)$/;function m5(n,t,e){var r=(n=function(n,t){return t&&0===n.indexOf(".")&&(n=t+n),n}(n,t)).match(UU);return r?r[1]+e+(r.length>2?r[2]:""):n+e}function BS(n,t,e,r,i){return new Promise(function(o,s){if("object"!=typeof t&&(t=JSON.parse(t)),8!=t.version)return s(new Error("glStyle version 8 required."));if(!(n instanceof rc||n instanceof jL))return s(new Error("Can only apply to VectorLayer or VectorTileLayer"));var c,h,p;function m(){p||t.sprite&&!c?p?(n.setStyle(p),o()):s(new Error("Something went wrong trying to apply style.")):(p=Iie(n,t,e,i,c,h,Die),n.getStyle()?o():s(new Error("Nothing to show for source ["+e+"]")))}if(t.sprite){var E=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",S=m5(t.sprite,r,E+".json");fetch(S,{credentials:"same-origin"}).then(function(x){return x.ok||""===E?x:(S=m5(t.sprite,r,".json"),fetch(S,{credentials:"same-origin"}))}).then(function(x){if(x.ok)return x.json();s(new Error("Problem fetching sprite from "+S+": "+x.statusText))}).then(function(x){if(void 0===x)return s(new Error("No sprites found."));c=x,h=m5(t.sprite,r,E+".png"),m()}).catch(function(x){s(new Error("Sprites cannot be loaded: "+S+": "+x.message))})}else m()})}new qE;var Bie=ee(113),dc=ee.n(Bie);const Hd_onloaded="editor:onloaded",Hd_layer={onclickvisibility:"editor:layer:onclickvisibility",onclickclone:"editor:layer:onclickclone",onclickremove:"editor:layer:onclickremove"},Hd_legend={onclickedition:"editor:legend:onclickedition",onchangevalue:"editor:legend:onchangevalue"},Hd_group={oncollapse:"editor:group:oncollapse"},Hd_style={oneditjson:"editor:style:oneditjson",scale:{onchangemin:"editor:style:scale:onchangemin",onchangemax:"editor:style:scale:onchangemax"}},Hd_filter={oneditjson:"editor:filter:oneditjson"},Hd_themes={onclickimage:"editor:themes:onclickimage",onclicktitle:"editor:themes:onclicktitle"};var Rm=Ki_getLogger("editor-style");function hc(n){if(Rm.trace("[constructor] Style",n),this.options=n||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof hc))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}hc.prototype.constructor=hc,hc.prototype._initialize=function(){this.id=this.options.id||null,this.options.position||(this.options.position=0);var n={scale:!0,edition:!1};this.options.tools||(this.options.tools=n),vr.mergeParams(this.options.tools,n,!1),this.options.obj||(this.options.obj={paint:{},layout:{}}),this.options.title||(this.options.title="JSON Styles :"),this.container=null,this.name={target:"GPEditorMapBoxStyleTarget",container:"GPEditorMapBoxStyleContainer",containerjson:"GPEditorMapBoxStyleJsonContainer",jsonlabel:"GPEditorMapBoxStyleJsonTitle",jsondisplay:"GPEditorMapBoxStyleJsonDisplay",containertoolsscale:"GPEditorMapBoxStyleToolsScaleContainer",scaletitle:"GPEditorMapBoxStyleScaleTitle",containertoolsminscale:"GPEditorMapBoxStyleToolsScaleMinContainer",scalelabelmin:"GPEditorMapBoxStyleScaleLabelMin",scaleinputmin:"GPEditorMapBoxStyleScaleInputMin",containertoolsmaxscale:"GPEditorMapBoxStyleToolsScaleMaxContainer",scalelabelmax:"GPEditorMapBoxStyleScaleLabelMax",scaleinputmax:"GPEditorMapBoxStyleScaleInputMax",containertoolsedit:"GPEditorMapBoxStyleToolsEditionContainer"}},hc.prototype._initContainer=function(){var n=this,t=!1,e=JSON.parse(JSON.stringify(this.options.obj)),r={};e.paint&&(t=!0,r.paint=e.paint,0===Object.keys(e.paint).length&&Rm.info("tag 'paint' is empty !")),e.layout&&(t=!0,r.layout=e.layout,e.layout.visibility&&delete r.visibility,0===Object.keys(e.layout).length&&Rm.info("tag 'layout' is empty !"));var i=document.createElement("div");i.className=this.name.container;var o=null;if(t){var s=JSON.stringify(r,null,4);o=this._syntaxHighlight(s)}var a=document.createElement("div");a.className=this.name.containerjson;var c=document.createElement("label");c.className=this.name.jsonlabel,c.innerHTML=this.options.title,a.appendChild(c);var h=document.createElement("pre");h.className=this.name.jsondisplay,h.innerHTML=o,h.addEventListener?h.addEventListener("click",function(p){n.options.tools.edition&&n.onEditJsonStyleMapBox(p)}):h.attachEvent&&h.attachEvent("onclick",function(p){n.options.tools.edition&&n.onEditJsonStyleMapBox(p)}),a.appendChild(h),i.appendChild(a),this.options.tools.scale&&i.appendChild(this._createElementToolsScale({min:r.layout?r.layout.minzoom:0,max:r.layout?r.layout.maxzoom:21})),this.options.tools.edition&&i.appendChild(this._createElementToolsEdition()),this.container=i},hc.prototype._createElementToolsScale=function(n){Rm.trace("_createElementToolsScale");var t=this,e=this.options.obj,r=document.createElement("div");r.className=this.name.containertoolsscale;var i=document.createElement("div");i.className=this.name.containertoolsminscale;var o=document.createElement("label");o.className=this.name.scalelabelmin,o.innerHTML="min :",i.appendChild(o);var s=document.createElement("input");s.className=this.name.scaleinputmin,s.type="range",s.value=n.min||0,s.title=n.min||0,s.disabled=!1,s.min=0,s.max=21,s.data=e,s.addEventListener?s.addEventListener("change",function(p){t.onChangeStyleScaleMinMapBox(p)}):s.appendChild&&s.appendChild("onchange",function(p){t.onChangeStyleScaleMinMapBox(p)}),i.appendChild(s),r.appendChild(i);var a=document.createElement("div");a.className=this.name.containertoolsmaxscale;var c=document.createElement("label");c.className=this.name.scalelabelmax,c.innerHTML="max :",a.appendChild(c);var h=document.createElement("input");return h.className=this.name.scaleinputmin,h.type="range",h.value=n.max||21,h.title=n.max||21,h.disabled=!1,h.min=0,h.max=21,h.data=e,h.addEventListener?h.addEventListener("change",function(p){t.onChangeStyleScaleMaxMapBox(p)}):h.appendChild&&h.appendChild("onchange",function(p){t.onChangeStyleScaleMaxMapBox(p)}),a.appendChild(h),r.appendChild(a),r},hc.prototype._createElementToolsEdition=function(){Rm.warn("_createElementToolsEdition, it's not yet implemented !");var n=document.createElement("div");return n.className=this.name.containertoolsedit,n},hc.prototype._syntaxHighlight=function(n){return(n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(t){var e="gp-json-number";return/^"/.test(t)?e=/:$/.test(t)?"gp-json-key":"gp-json-string":/true|false/.test(t)?e="gp-json-boolean":/null/.test(t)&&(e="gp-json-null"),"<span class='"+e+"'>"+t+"</span>"})},hc.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var n=document.createElement("div");n.id=this.name.target,(document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(n)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this},hc.prototype.display=function(n){return Rm.trace("display()",n),void 0!==n&&(this.container.style.display=n?"flex":"none"),"flex"===this.container.style.display},hc.prototype.getContainer=function(){return this.container},hc.prototype.onEditJsonStyleMapBox=function(n){Rm.trace("onEditJsonStyleMapBox",n),n.editorID=this.id,n.data=this.options,dc().dispatch(Hd_style.oneditjson,n)},hc.prototype.onChangeStyleScaleMinMapBox=function(n){Rm.trace("onChangeStyleScaleMinMapBox",n),n.editorID=this.id,n.data=this.options,dc().dispatch(Hd_style.scale.onchangemin,n)},hc.prototype.onChangeStyleScaleMaxMapBox=function(n){Rm.trace("onChangeStyleScaleMaxMapBox",n),n.editorID=this.id,n.data=this.options,dc().dispatch(Hd_style.scale.onchangemax,n)};const y5=hc;var g2=Ki_getLogger("editor-themes");function Cf(n){if(g2.trace("[constructor] Themes",n),this.options=n||{},!(this instanceof Cf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}Cf.prototype.constructor=Cf,Cf.prototype._initialize=function(){this.id=this.options.id||null;var n={thumbnails:!0,button:{visible:!0,type:"radio"}};(!this.options.tools||0===Object.keys(this.options.tools).length)&&(this.options.tools=n),vr.mergeParams(this.options.tools,n,!1),(null==this.options.obj||!this.options.obj)&&(this.options.obj={themesSummary:"",themes:[]}),this.container=null,this.name={target:"GPEditorMapBoxThemeTarget",container:"GPEditorMapBoxThemesContainer",containertheme:"GPEditorMapBoxThemeContainer",containerthemeID:"GPEditorMapBoxThemeContainer_ID_",input:"GPEditorMapBoxThemeInput",inputID:"GPEditorMapBoxThemeInput_ID_",label:"GPEditorMapBoxThemeTitle",labelID:"GPEditorMapBoxThemeTitle_ID_",image:"GPEditorMapBoxThemeImage",imageID:"GPEditorMapBoxThemeImage_ID_",message:"GPEditorMapBoxThemeMessage"}},Cf.prototype._initContainer=function(){var n=this,t=this.options.obj,e=this.id||ni.generate(),r=document.createElement("div");r.className=this.name.container,r.title=t.themesSummary||"";var i=t.themes;if(i)for(var o=0;o<i.length;o++){var s=i[o],a=document.createElement("div");a.id=this.name.containerthemeID+o+"_"+e,a.className=this.name.containertheme,a.tabIndex=o;var c=s.url,h=s.selected||!1;if(c){var p=this.options.tools.button;if(p.visible){var m="checkbox"===p.type?"checkbox":"radio",E=document.createElement("input");E.type=m,E.id=this.name.inputID+o+"_"+e,E.className=this.name.input,E.name=e,E.checked=h,E.data=c,E.addEventListener?E.addEventListener("click",function(R){n.onClickThemeTitleMapBox(R)}):E.attachEvent&&E.attachEvent("onclick",function(R){n.onClickThemeTitleMapBox(R)}),a.appendChild(E)}if(this.options.tools.thumbnails&&s.thumbnail){var S=document.createElement("img");S.id=this.name.imageID+o+"_"+e,S.className=this.name.image,S.src=s.thumbnail,S.alt=s.thumbnail,S.title=s.description||"",S.data=c,S.addEventListener?S.addEventListener("click",function(R){n.onClickThemeImageMapBox(R);var F=R.target.parentElement.childNodes;if(F){var D=F[0];"input"===D.tagName.toLowerCase()&&(D.checked=!D.checked)}}):S.attachEvent&&S.attachEvent("onclick",function(R){n.onClickThemeImageMapBox(R);var F=R.target.parentElement.childNodes;if(F){var D=F[0];"input"===D.tagName.toLowerCase()&&(D.checked=!D.checked)}}),a.appendChild(S)}if(s.name){var x=document.createElement("label");x.id=this.name.labelID+o+"_"+e,this.options.tools.button.visible&&(x.htmlFor=E.id),x.className=this.name.label,x.innerHTML=s.name,x.title=s.description||"",x.data=c,this.options.tools.button.visible||(x.addEventListener?x.addEventListener("click",function(R){n.onClickThemeTitleMapBox(R)}):x.attachEvent&&x.attachEvent("onclick",function(R){n.onClickThemeTitleMapBox(R)})),a.appendChild(x)}}else{var P=document.createElement("label");P.className=this.name.message,P.innerHTML="Th\xe8me non disponible...",a.appendChild(P)}r.appendChild(a)}this.container=r},Cf.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var n=document.createElement("div");n.id=this.name.target,(document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(n)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this},Cf.prototype.display=function(n){return g2.trace("display()",n),void 0!==n&&(this.container.style.display=n?"flex":"none"),"flex"===this.container.style.display},Cf.prototype.getContainer=function(){return this.container},Cf.prototype.onClickThemeImageMapBox=function(n){if(g2.trace("onClickThemeImageMapBox",n),n.editorID=this.id,n.data=this.options,"checkbox"===this.options.tools.button.type)for(var t=n.target.previousSibling.id.substring(n.target.previousSibling.id.lastIndexOf("_")+1),e=document.getElementsByClassName(this.name.input),r=0;r<e.length;r++){var i=e[r];i.id!==n.target.previousSibling.id&&i.id.substring(i.id.lastIndexOf("_")+1)===t&&(i.checked=!1)}dc().dispatch(Hd_themes.onclickimage,n)},Cf.prototype.onClickThemeTitleMapBox=function(n){if(g2.trace("onClickThemeTitleMapBox",n),n.editorID=this.id,n.data=this.options,"checkbox"===this.options.tools.button.type)for(var t=n.target.id.substring(n.target.id.lastIndexOf("_")+1),e=document.getElementsByClassName(this.name.input),r=0;r<e.length;r++){var i=e[r];i.id!==n.target.id&&i.id.substring(i.id.lastIndexOf("_")+1)===t&&(i.checked=!1)}dc().dispatch(Hd_themes.onclicktitle,n)};const XU=Cf;var m2=Ki_getLogger("editor-filter");function Jp(n){if(m2.trace("[constructor] Filter",n),this.options=n||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Jp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}Jp.prototype.constructor=Jp,Jp.prototype._initialize=function(){this.id=this.options.id||null,this.options.position||(this.options.position=0);var n={edition:!1};this.options.tools||(this.options.tools=n),vr.mergeParams(this.options.tools,n,!1),this.options.obj||(this.options.obj={filter:[]}),this.options.title||(this.options.title="JSON Filtres :"),this.container=null,this.name={target:"GPEditorMapBoxFilterTarget",container:"GPEditorMapBoxFilterContainer",containerjson:"GPEditorMapBoxFilterJsonContainer",jsonlabel:"GPEditorMapBoxFilterTitleJson",jsondisplay:"GPEditorMapBoxFilterDisplayJson",containertoolsedit:"GPEditorMapBoxFilterToolsEditionContainer"}},Jp.prototype._initContainer=function(){var n=this,t=!1,e=JSON.parse(JSON.stringify(this.options.obj));e.filter&&(t=!0,0===e.filter.length&&m2.info("tag 'filter' is empty !"));var r=document.createElement("div");r.className=this.name.container;var i=null;t&&(i=JSON.stringify(e.filter,null,4));var o=document.createElement("div");o.className=this.name.containerjson;var s=document.createElement("label");s.className=this.name.jsonlabel,s.innerHTML=this.options.title,o.appendChild(s);var a=document.createElement("pre");if(a.className=this.name.jsondisplay,a.innerHTML=i,a.addEventListener?a.addEventListener("click",function(h){n.options.tools.edition&&n.onEditJsonFilterMapBox(h)}):a.attachEvent&&a.attachEvent("onclick",function(h){n.options.tools.edition&&n.onEditJsonFilterMapBox(h)}),o.appendChild(a),r.appendChild(o),this.options.tools.edition){var c=document.createElement("div");c.className=this.name.containertoolsedit,r.appendChild(c)}this.container=r},Jp.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var n=document.createElement("div");n.id=this.name.target,(document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(n)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this},Jp.prototype.display=function(n){return m2.trace("display()",n),void 0!==n&&(this.container.style.display=n?"flex":"none"),"flex"===this.container.style.display},Jp.prototype.getContainer=function(){return this.container},Jp.prototype.onEditJsonFilterMapBox=function(n){m2.trace("onEditJsonFilterMapBox",n),n.editorID=this.id,n.data=this.options,dc().dispatch(Hd_filter.oneditjson,n)};const _5=Jp;var Sf=Ki_getLogger("editor-legend");function Hl(n){if(Sf.trace("[constructor] Legend",n),this.options=n||{target:null,position:0,sprites:null,obj:null},!(this instanceof Hl))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}Hl.prototype.constructor=Hl,Hl.prototype._initialize=function(){this.id=this.options.id||null,this.options.position||(this.options.position=0),this.options.obj||(this.options.obj={title:"vide...",editable:!0,paint:{"fill-color":"#FFFFFF"}});var n=this.options.obj.editable;this.editable=void 0!==n&&n,this.legendRender={type:"fill",values:{width:1,stroke:"#FFFFFF",color:"#000000",opacity:1,icon:null}},this.container=null,this.rendercontainer=null,this.toolscontainer=null,this.name={target:"GPEditorMapBoxLegendTarget",container:"GPEditorMapBoxLegendContainer",containerlegendrender:"GPEditorMapBoxLegendRenderContainer",legendrender:"GPEditorMapBoxLegendRender",legendeditable:"GPEditorMapBoxLegendEditable",legendtitle:"GPEditorMapBoxLegendTitle",containerlegendtools:"GPEditorMapBoxLegendToolsContainer"},this.labels={"line-color":"Couleur du trait","line-width":"Epaisseur du trait","line-opacity":"Opacit\xe9 du trait","fill-color":"Couleur de remplissage","fill-opacity":"Opacit\xe9 du remplissage"}},Hl.prototype._initContainer=function(){var n=this.options.obj,t=document.createElement("div");t.className=this.name.container;var e=!1,r={};if(n.paint&&n.layout?(e=!0,Object.assign(r,n.paint,n.layout)):n.paint?(e=!0,Object.assign(r,n.paint)):n.layout?(e=!0,Object.assign(r,n.layout)):e=!1,e){var i=Object.keys(r);0===i.length&&Sf.info("tag 'paint' or 'layout' is empty !");for(var o={},s=!1,a=0;a<i.length;a++){var c=i[a];if(/fill-/.test(c)||/line-/.test(c)||/circle-/.test(c)||/background-/.test(c)||/text-/.test(c)||/icon-/.test(c)){s=!0;var h=n.title||"",p=c.split("-")[0];("text"===p||"icon"===p)&&(p="symbol"),this._getValues(p,r)&&t.appendChild(this._createElementIconLegend(o={edit:this.editable,title:h,type:this.legendRender.type,values:this.legendRender.values}));break}}}s||this._getValues("fill",r)&&t.appendChild(this._createElementIconLegend(o={edit:this.editable,title:n.title||"",type:this.legendRender.type,values:this.legendRender.values})),this.toolscontainer=this._createElementEditionLegend(o),t.appendChild(this.toolscontainer),this.container=t},Hl.prototype._getValues=function(n,t){Sf.trace("_getValues():",n,t);var e=null,r=null,i=null,o=null,s=this.legendRender.values.color,a=this.legendRender.values.stroke,c=this.legendRender.values.width,h=this.legendRender.values.opacity,p=null;if("symbol"===n){var m=t["text-field"],E=t["icon-image"];"unknow"==(n=m&&E?"icon":m?"text":E?"icon":"unknow")&&(Sf.warn("_getValues() - Type inconnu :",n,t),n="text")}switch(n){case"line":if(e=t["line-color"],Array.isArray(e)||"object"==typeof e){s=null;break}s=e||s,i=t["line-width"],c=Array.isArray(i)||"object"==typeof i?c:i||c,o=t["line-opacity"],h=Array.isArray(o)||"object"==typeof o?h:o||h;break;case"text":if(e=t["text-color"],Array.isArray(e)||"object"==typeof e){s=null;break}s=e||s;break;case"icon":var S=!1;if(t["icon-image"]&&this.options.sprites&&Object.keys(this.options.sprites).length&&this.options.sprites.json&&this.options.sprites.json[t["icon-image"]]&&(S=!0),S)p=t["icon-image"];else{if(e=t["icon-color"],Array.isArray(e)||"object"==typeof e){s=null;break}s=e||s}break;case"circle":if(e=t["circle-color"],Array.isArray(e)||"object"==typeof e){s=null;break}s=e||s,r=t["circle-stroke-color"],a=Array.isArray(r)||"object"==typeof r?a:r||a,o=t["circle-opacity"],h=Array.isArray(o)||"object"==typeof o?h:o||h,i=t["circle-stroke-width"],c=Array.isArray(i)||"object"==typeof i?c:i||c;break;case"background":if(e=t["background-color"],Array.isArray(e)||"object"==typeof e){s=null;break}s=e||s;break;case"fill":if(e=t["fill-color"],Array.isArray(e)||"object"==typeof e){s=null;break}s=e||s,o=t["fill-opacity"],h=Array.isArray(o)||"object"==typeof o?h:o||h}return this.legendRender={type:n,values:{color:s,stroke:a,width:c,opacity:h,icon:p}},!0},Hl.prototype._setValues=function(n,t){var e=this.rendercontainer;if(!e)return!1;var r=t.color||this.legendRender.values.color,i=t.stroke||this.legendRender.values.stroke,o=t.width||this.legendRender.values.width,s=t.opacity||this.legendRender.values.opacity,a=t.icon||this.legendRender.values.icon,c="",h=null;switch(n){case"text":c="font-size: 5em;font-weight: bold;",e.style.background=(h="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><text x='50' y='50' fill='%color%' fill-opacity='%opacity%'  text-anchor='middle' alignment-baseline='central' style='%style%'> T </text></svg>\")").replace("%color%",0===r.indexOf("rgb")?r:lc_hexToRgba(r,1)).replace("%opacity%",s).replace("%style%",c);break;case"icon":a?(h="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[a].x).replace("%y%",this.options.sprites.json[a].y).replace(/%w%/g,this.options.sprites.json[a].width).replace(/%h%/g,this.options.sprites.json[a].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),e.innerHTML=h):(c="fill: transparent;stroke-width: 10;",e.style.background=(h="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M 50,20 80,82.5 20,82.5 z' stroke='%color%' style='%style%'/></svg>\")").replace("%color%",0===r.indexOf("rgb")?r:lc_hexToRgba(r,1)).replace("%style%",c));break;case"background":e.style["background-color"]=r;break;case"line":e.style.background=(h="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M0 99 L99 0 L100 1 L1 100' stroke='%color%' stroke-width='%width%' stroke-opacity='%opacity%' /></svg>\")").replace("%color%",0===r.indexOf("rgb")?r:lc_hexToRgba(r,1)).replace("%opacity%",s).replace("%width%",10*o);break;case"circle":e.style.background=(h="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' stroke='%stroke%' stroke-width='%width%' stroke-opacity='%opacity%' fill='%color%' fill-opacity='%opacity%' /></svg>\")").replace("%color%",0===r.indexOf("rgb")?r:lc_hexToRgba(r,1)).replace("%opacity%",s).replace("%stroke%",0===i.indexOf("rgb")?i:lc_hexToRgba(i,1)).replace("%width%",10*o);break;case"fill":e.style.background=(h="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><rect x='0' y='0' width='100' height='100' rx='5' ry='5' fill='%color%' fill-opacity='%opacity%' /></svg>\")").replace("%color%",0===r.indexOf("rgb")?r:lc_hexToRgba(r,1)).replace("%opacity%",s);break;default:return!1}return this.legendRender={type:n,values:{color:r,stroke:i,width:o,opacity:s,icon:a}},!0},Hl.prototype._createElementIconLegend=function(n){var t=this,e=document.createElement("div");e.className=this.name.containerlegendrender;var r=this.rendercontainer=document.createElement("div");r.className=this.name.legendrender,n.edit&&(r.className+=" ",r.className+=this.name.legendeditable,r.addEventListener?r.addEventListener("click",function(p){t.onEditionLegendMapBox(p)}):r.attachEvent&&r.attachEvent("onclick",function(p){t.onEditionLegendMapBox(p)}));var i=n.values.color,c=n.type;i?this._setValues(c,{color:i,stroke:n.values.stroke,width:n.values.width,opacity:n.values.opacity})?r.className+=n.edit?" legend-"+c:" legend-"+c+"-not-editable":r.className+=" legend-unknow":r.className+=" legend-not-implemented",e.appendChild(r);var h=document.createElement("span");return h.className=this.name.legendtitle,h.innerHTML=n.title||"",e.appendChild(h),e},Hl.prototype._createElementEditionLegend=function(n){var t=this,e=document.createElement("div");if(e.className=this.name.containerlegendtools,!n.edit)return e;if("line"===n.type){var r=document.createElement("div");r.className="legend-styling-div";var i=document.createElement("label");i.htmlFor="line-color",i.innerHTML=this.labels["line-color"];var o=document.createElement("input");o.className="legend-styling",o.id="line-color",o.title="Selectionner une couleur de trait",o.type="color",o.value=n.values.color,o.addEventListener?o.addEventListener("change",function(D){t._setValues(n.type,{color:D.target.value}),t.onChangeValueLegendMapBox(D)}):o.attachEvent&&o.attachEvent("onchange",function(D){t._setValues(n.type,{color:D.target.value}),t.onChangeValueLegendMapBox(D)}),r.appendChild(i),r.appendChild(o),e.appendChild(r);var s=document.createElement("div");s.className="legend-styling-div";var a=document.createElement("label");a.htmlFor="line-width",a.innerHTML=this.labels["line-width"];var c=document.createElement("input");c.className="legend-styling",c.id="line-width",c.title=n.values.width,c.type="range",c.min="0",c.max="10",c.step="1",c.defaultValue=n.values.width,c.addEventListener?c.addEventListener("change",function(D){Sf.trace(D),D.target.title=D.target.value,t._setValues(n.type,{width:D.target.value}),t.onChangeValueLegendMapBox(D)}):c.attachEvent&&c.attachEvent("onchange",function(D){Sf.trace(D),D.target.title=D.target.value,t._setValues(n.type,{width:D.target.value}),t.onChangeValueLegendMapBox(D)}),s.appendChild(a),s.appendChild(c),e.appendChild(s);var h=document.createElement("div");h.className="legend-styling-div";var p=document.createElement("label");p.htmlFor="line-opacity",p.innerHTML=this.labels["line-opacity"];var m=document.createElement("input");m.className="legend-styling",m.id="line-opacity",m.title=n.values.opacity,m.type="range",m.min="0",m.max="1",m.step="0.1",m.defaultValue=n.values.opacity,m.addEventListener?m.addEventListener("change",function(D){Sf.trace(D),D.target.title=D.target.value,t._setValues(n.type,{opacity:D.target.value}),t.onChangeValueLegendMapBox(D)}):m.attachEvent&&m.attachEvent("onchange",function(D){Sf.trace(D),D.target.title=D.target.value,t._setValues(n.type,{opacity:D.target.value}),t.onChangeValueLegendMapBox(D)}),h.appendChild(p),h.appendChild(m),e.appendChild(h)}if("fill"===n.type){var E=document.createElement("div");E.className="legend-styling-div";var S=document.createElement("label");S.htmlFor="fill-color",S.innerHTML=this.labels["fill-color"];var x=document.createElement("input");x.className="legend-styling",x.id="fill-color",x.title="Selectionner une couleur de remplissage",x.type="color",x.value=n.values.color,x.addEventListener?x.addEventListener("change",function(D){t._setValues(n.type,{color:D.target.value}),t.onChangeValueLegendMapBox(D)}):x.attachEvent&&x.attachEvent("onchange",function(D){t._setValues(n.type,{color:D.target.value}),t.onChangeValueLegendMapBox(D)}),E.appendChild(S),E.appendChild(x),e.appendChild(E);var P=document.createElement("div");P.className="legend-styling-div";var R=document.createElement("label");R.htmlFor="fill-opacity",R.innerHTML=this.labels["fill-opacity"];var F=document.createElement("input");F.className="legend-styling",F.id="fill-opacity",F.title=n.values.opacity,F.type="range",F.min="0",F.max="1",F.step="0.1",F.defaultValue=n.values.opacity,F.addEventListener?F.addEventListener("change",function(D){D.target.title=D.target.value,t._setValues(n.type,{opacity:D.target.value}),t.onChangeValueLegendMapBox(D)}):F.attachEvent&&F.attachEvent("onchange",function(D){D.target.title=D.target.value,t._setValues(n.type,{opacity:D.target.value}),t.onChangeValueLegendMapBox(D)}),P.appendChild(R),P.appendChild(F),e.appendChild(P)}return e},Hl.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var n=document.createElement("div");n.id=this.name.target,(document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(n)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this},Hl.prototype.display=function(n){return Sf.trace("display()",n),void 0!==n&&(this.container.style.display=n?"flex":"none"),"flex"===this.container.style.display},Hl.prototype.isEditable=function(){return this.editable},Hl.prototype.getRenderContainer=function(){return this.rendercontainer},Hl.prototype.getToolsContainer=function(){return this.toolscontainer},Hl.prototype.getContainer=function(){return this.container},Hl.prototype.onEditionLegendMapBox=function(n){Sf.trace("onEditionLegendMapBox",n),n.editorID=this.id,n.data=this.options,dc().dispatch(Hd_legend.onclickedition,n)},Hl.prototype.onChangeValueLegendMapBox=function(n){Sf.trace("onChangeValueLegendMapBox",n),n.editorID=this.id,n.data=this.options,dc().dispatch(Hd_legend.onchangevalue,n)};const E5=Hl;var Iu=Ki_getLogger("editor-layer");function Na(n){if(Iu.trace("[constructor] Layer",n),this.options=n||{},!(this instanceof Na))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}Na.prototype.constructor=Na,Na.prototype._initialize=function(){this.id=this.options.id||null,this.options.position||(this.options.position=0);var n={visibility:!0,icon:{image:!0,anchor:"end"},type:!0,pin:!0,remove:!1,clone:!1};this.options.tools||(this.options.tools=n),vr.mergeParams(this.options.tools,n,!1);var t={id:"",type:"",source:"","source-layer":""};this.options.obj||(this.options.obj=t),vr.mergeParams(this.options.obj,t,!1),this.bSlotLegend=!1,this.oFilter=null,this.oStyle=null,this.oLegend=null,this.container=null,this.DomVisibility=null,this.DomToggle=null,this.name={target:"GPEditorMapBoxLayerTarget",container:"GPEditorMapBoxLayerContainer",containerlegend:"GPEditorMapBoxLayerLegendContainer",containertitle:"GPEditorMapBoxLayerTitleContainer",imagelabelinput:"GPEditorMapBoxLayerImageInput",imagelabel:"GPEditorMapBoxLayerImageLabel",typeimg:"GPEditorMapBoxLayerTypeImage",titleinput:"GPEditorMapBoxLayerTitleInput",titlelabel:"GPEditorMapBoxLayerTitleLabel",containertools:"GPEditorMapBoxToolsContainer",visibilityinput:"GPEditorMapBoxToolsVisibilityInput",visibilitylabel:"GPEditorMapBoxToolsVisibilityLabel",visibilityinputdisable:"GPEditorMapBoxToolsVisibilityInputDisable",visibilitylabeldisable:"GPEditorMapBoxToolsVisibilityLabelDisable"}},Na.prototype._initContainer=function(){var n=this,t=this.options.obj,e=document.createElement("div");e.className=this.name.container;var r=document.createElement("div");if(r.id=this.name.containertitle+"-"+this.options.position,r.className=this.name.containertitle,this.options.tools.pin){var i=document.createElement("input");i.id=this.name.imagelabelinput+"-"+this.options.position,i.className=this.name.imagelabelinput,i.type="checkbox",r.appendChild(i);var o=document.createElement("label");o.className=this.name.imagelabel,o.htmlFor=i.id,o.addEventListener?o.addEventListener("click",function(m){n.onClickLayerMapBox(m)}):o.attachEvent&&o.attachEvent("onclick",function(m){n.onClickLayerMapBox(m)}),r.appendChild(o)}var s=function(){var m=document.createElement("div");if(m.id=this.name.containertools+"-"+this.options.position,m.className=this.name.containertools,this.options.tools.visibility){var E=document.createElement("input");E.id=this.name.visibilityinput+"-"+this.options.position,E.className=this.options.tools.icon.image?this.name.visibilityinput:this.name.visibilityinputdisable,E.type="checkbox",E.checked="checked",E.addEventListener?E.addEventListener("click",function(x){n.onVisibilityLayerMapBox(x)}):E.attachEvent&&E.attachEvent("onclick",function(x){n.onVisibilityLayerMapBox(x)}),m.appendChild(E),this.DomVisibility=E;var S=document.createElement("label");S.htmlFor=this.name.visibilityinput+"-"+this.options.position,S.id=this.name.visibilitylabel+"-"+this.options.position,S.className=this.options.tools.icon.image?this.name.visibilitylabel:this.name.visibilitylabeldisable,S.title="Afficher/masquer la couche",m.appendChild(S),e.appendChild(m)}this.options.tools.clone&&Iu.warn("Dom for tools clone, it's not yet implemented !"),this.options.tools.remove&&Iu.warn("Dom for tools remove, it's not yet implemented !")};if("start"===this.options.tools.icon.anchor&&s.apply(this),this.options.tools.type&&t.type){var a=document.createElement("img");switch(a.className=this.name.typeimg,t.type.toUpperCase()){case"SYMBOL-ICON":a.style["background-position"]="0px 0";break;case"SYMBOL-TEXT":a.style["background-position"]="-194px 0";break;case"SYMBOL":a.style["background-position"]="-84px 0";break;case"LINE":a.style["background-position"]="-28px 0";break;case"FILL":a.style["background-position"]="-56px 0";break;case"BACKGROUND":a.style["background-position"]="-140px 0";break;case"CIRCLE":a.style["background-position"]="-168px 0";break;default:a.style["background-position"]="-112px 0"}r.appendChild(a)}var c=document.createElement("div");c.id=this.name.containerlegend+"-"+this.options.position,c.className=this.name.containerlegend,r.appendChild(c);var h=document.createElement("input");h.id=this.name.titleinput+"-"+this.options.position,h.className=this.name.titleinput,h.type="checkbox",r.appendChild(h);var p=document.createElement("label");p.className=this.name.titlelabel,p.htmlFor=h.id,p.innerHTML=t.id||t["source-layer"]||t.source,p.title=t["source-layer"]||t.source||t.id,p.addEventListener?p.addEventListener("click",function(m){n.onClickLayerMapBox(m)}):p.attachEvent&&p.attachEvent("onclick",function(m){n.onClickLayerMapBox(m)}),r.appendChild(p),this.DomToggle=p,e.appendChild(r),"end"===this.options.tools.icon.anchor&&s.apply(this),this.container=e},Na.prototype.add=function(){if(Iu.trace("add()"),!this.options.target){if(!document.getElementById(this.name.target)){var n=document.createElement("div");n.id=this.name.target,(document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(n)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this},Na.prototype.addStyle=function(n){Iu.trace("addStyle()",n),n&&"object"==typeof n&&n instanceof y5&&(this.oStyle=n,this.oStyle.display(!1))},Na.prototype.addFilter=function(n){Iu.trace("addFilter()",n),n&&"object"==typeof n&&n instanceof _5&&(this.oFilter=n,this.oFilter.display(!1))},Na.prototype.addLegend=function(n){Iu.trace("addLegend()",n),n&&"object"==typeof n&&n instanceof E5&&(this.oLegend=n,this.oLegend.display(!1))},Na.prototype.slotLegend=function(){var n=this.oLegend;if(n){var t=null,e=this.container.childNodes;if(e.length)for(var i=e["start"===this.options.tools.icon.anchor?1:0].childNodes,o=0;o<i.length;o++){var s=i[o];-1!==s.id.indexOf(this.name.containerlegend)&&(t=s)}if(t){var a=n.getRenderContainer();a&&(t.appendChild(a),this.bSlotLegend=!0)}}},Na.prototype.visibility=function(n){if(Iu.trace("visibility()",n),this.options.tools.visibility)return void 0!==n&&(this.DomVisibility.checked=n?"checked":""),this.DomVisibility.checked},Na.prototype.collapse=function(){Iu.trace("collapse()"),this.DomToggle.click()},Na.prototype.visible=function(){Iu.trace("visible()"),this.options.tools.visibility&&this.DomVisibility.click()},Na.prototype.display=function(n){Iu.trace("display()",n);var t=document.getElementById(this.DomToggle.htmlFor).checked;return void 0!==n&&(this.container.style.display=n?"inline-flex":"none",this.oStyle&&this.oStyle.display(n&&t),this.oFilter&&this.oFilter.display(n&&t),this.oLegend&&this.oLegend.display(n&&t)),t},Na.prototype.active=function(n){return Iu.trace("active()",n),void 0!==n&&(this.container.className=n?this.name.container:this.name.container+" disabled"),this.container.className===this.name.container},Na.prototype.getContainer=function(){return this.container},Na.prototype.onClickLayerMapBox=function(n){Iu.trace("onClickLayerMapBox",n);var t=n.target.htmlFor.substring(n.target.htmlFor.indexOf("-")),e=document.getElementById(n.target.htmlFor).checked;n.target.htmlFor===this.name.imagelabelinput+t&&(document.getElementById(this.name.titleinput+t).checked=!e),n.target.htmlFor===this.name.titleinput+t&&document.getElementById(this.name.imagelabelinput+t)&&(document.getElementById(this.name.imagelabelinput+t).checked=!e),this.oStyle&&this.oStyle.display(!e),this.oFilter&&this.oFilter.display(!e),this.oLegend&&this.oLegend.isEditable()&&this.oLegend.display(!e)},Na.prototype.onVisibilityLayerMapBox=function(n){Iu.trace("onVisibilityLayerMapBox",n),n.editorID=this.id,n.data=this.options,dc().dispatch(Hd_layer.onclickvisibility,n)},Na.prototype.onCloneLayerMapBox=function(n){Iu.trace("onCloneLayerMapBox",n),n.editorID=this.id,n.data=this.options,dc().dispatch(Hd_layer.onclickclone,n)},Na.prototype.onRemoveLayerMapBox=function(n){Iu.trace("onRemoveLayerMapBox",n),n.editorID=this.id,n.data=this.options,dc().dispatch(Hd_layer.onclickremove,n)};const KU=Na;var ZU=Ki_getLogger("editor-group");function Qp(n){if(ZU.trace("[constructor] Group",n),this.options=n||{},!(this instanceof Qp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}Qp.prototype.constructor=Qp,Qp.prototype._initialize=function(){this.id=this.options.id||null,this.options.title||(this.options.title="D\xe9tails du groupe..."),void 0===this.options.collapse&&(this.options.collapse=!0),this.container=null,this.name={target:"GPEditorMapBoxGroupTarget",container:"GPEditorMapBoxGroupContainer",details:"GPEditorMapBoxGroupDetails",summary:"GPEditorMapBoxGroupSummary"}},Qp.prototype._initContainer=function(){var n=document.createElement("div");n.className=this.name.container;var t=document.createElement("details");t.className=this.name.details,t.open=!this.options.collapse,n.appendChild(t);var e=document.createElement("summary");e.className=this.name.summary,e.innerHTML=this.options.title,t.appendChild(e),this.container=n},Qp.prototype.add=function(){if(!this.options.target){if(!document.getElementById(this.name.target)){var n=document.createElement("div");n.id=this.name.target,(document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(n)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container)},Qp.prototype.display=function(n){this.container.style.display=n?"flex":"none"},Qp.prototype.getContainer=function(){var n=this.container.childNodes;return n.length?n[0]:this.container},Qp.prototype.onCollapseGroupMapBox=function(n){ZU.trace("onCollapseGroupMapBox",n),n.editorID=this.id,n.data=this.options,dc().dispatch(Hd_group.oncollapse,n)};const JU=Qp;var ll=Ki_getLogger("editor");function ul(n){if(ll.trace("[constructor] Editor",n),this.options=n||{},!(this instanceof ul))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize()}vr.assign(ul.prototype,{_addUID:function(n){return this._uid?n+"-"+this._uid:n}}),ul.prototype.constructor=ul,ul.prototype._initialize=function(){if(this.options.target||ll.info("La 'target' n'est pas renseign\xe9e (options.target)."),this.options.style){this.options.events?this._initEvents():ll.warn("Les 'handlers' ne sont pas renseign\xe9s (options.events) !"),this.options.themes||ll.info("Les 'themes' MapBox ne sont pas renseign\xe9s (options.themes).");var n={themes:!1,layers:!0,style:!1,filter:!1,legend:!1,group:!1,sort:!0,title:!0,type:!0,pin:!0,visibility:!0,icon:{image:!0,anchor:"end"},editable:!0};this.options.tools||(ll.trace("Utilisation des outils MapBox par d\xe9faut (options.tools)."),this.options.tools=n),vr.mergeParams(this.options.tools,n,!1),this.id=this.options.id||ni.generate(),this.layers=[],this.container=null,this.name={target:"GPEditorMapBoxTarget",container:"GPEditorMapBoxContainer",containerID:"GPEditorMapBoxContainer_ID_",containerLayers:"GPEditorMapBoxLayersContainer",titleLayers:"GPEditorMapBoxLayersTitle",titleLayersID:"GPEditorMapBoxLayersTitle_ID_",titleThemes:"GPEditorMapBoxThemesTitle",titleThemesID:"GPEditorMapBoxThemesTitle_ID_",sep:"GPEditorMapBoxSep"},this.mapbox={},this.sprites={}}else ll.error("Le 'style' MapBox n'est pas renseign\xe9 (options.style) !")},ul.prototype._initEvents=function(){var n=this.options.scope||this,t=this.options.events;if(t)for(var e in t)if(t.hasOwnProperty(e)){var r=t[e];r&&(dc().hasEventListener(e,r,n)||dc().addEventListener(e,r,n))}},ul.prototype._initContainer=function(){ll.trace(this.mapbox);var n=document.createElement("div");n.id=this.name.containerID+this.id,n.className=this.name.container;var t=this.options.tools.themes;if(t&&this.options.themes){if(this.options.tools.title){var e=document.createElement("div");e.id=this.name.titleThemesID+this.id,e.className=this.name.titleThemes,e.innerHTML="Liste des 'th\xe8mes'",n.appendChild(e)}new XU({id:this.id,target:n,tools:"object"==typeof t?t:{},obj:this.options.themes}).add()}for(var i in this.mapbox.sources)if(this.mapbox.sources.hasOwnProperty(i)){if(this.options.tools.layers){var o=Object.keys(this.mapbox.sources).length>1?1:0;if(o){var s=document.createElement("hr");s.className=this.name.sep,n.appendChild(s)}if(this.options.tools.title){var a=document.createElement("div");a.id=this.name.titleLayersID+this.id,a.className=this.name.titleLayers,a.innerHTML=o?"Liste des 'couches' ("+i+")":"Liste des 'couches'",n.appendChild(a)}}var c=this.mapbox.layers.slice();c.forEach(function(ie,Fe){var Ce=ie.metadata;Ce?Ce["geoportail:order"]=Fe:ie.metadata={"geoportail:order":Fe}}),this.options.tools.sort&&c.sort(function(ie,Fe){var Ce=null,$e=null;return ie.metadata&&ie.metadata["geoportail:group"]&&Fe.metadata&&Fe.metadata["geoportail:group"]?(Ce=ie.metadata["geoportail:group"],$e=Fe.metadata["geoportail:group"]):(Ce=ie.id,$e=Fe.id),Ce<$e?-1:Ce>$e?1:0}),ll.trace("Layers : ",c);var h={};c.forEach(function(ie){var Fe=ie.metadata;if(Fe&&Fe["geoportail:group"]){var Ce=Fe["geoportail:group"];h[Ce]=h[Ce]?h[Ce]+1:1}else{var $e=ie.id,st=$e.search(/_|-|:|=/),dt=-1!==st?$e.substring(0,st).trim():$e;h[dt]=h[dt]?h[dt]+1:1,Fe?Fe["geoportail:group"]=dt:ie.metadata={"geoportail:group":dt}}}),ll.trace("Groups : ",h);var p=document.createElement("div");p.className=this.name.containerLayers,n.appendChild(p);for(var m=p,E=-1,S=0;S<c.length;S++){var x=c[S];if(E++,x.source===i){if(this.options.tools.group)if(x.metadata){var R=x.metadata["geoportail:group"];if(R)if(h[R]>1){h[R]=-1;var F=new JU({id:this.id,target:p,title:R,collapse:!0});F.add(),m=F.getContainer()}else 1===h[R]&&(m=p);else m=p}else m=p;if(this.options.tools.layers){var D=new KU({id:this.id,target:m,position:E+"_"+this.id,tools:{visibility:this.options.tools.visibility,icon:this.options.tools.icon,type:this.options.tools.type,pin:this.options.tools.pin},obj:{id:x.id,type:x.type,source:x.source,"source-layer":x["source-layer"]}});D.add(),x.layout&&x.layout.visibility&&"none"===x.layout.visibility&&D.visibility(!1),this.layers.push(D)}if(this.options.tools.legend){var j=this.options.tools.editable;void 0===j&&(j=x.editable);var G=new E5({id:this.id,target:m,sprites:this.sprites,obj:{id:x.id,source:x.source,title:x.id,editable:void 0!==j&&j,paint:x.paint,layout:x.layout}});G.add(),G.display(!1),D&&(D.addLegend(G),D.slotLegend())}if(this.options.tools.style){var X=new y5({id:this.id,target:m,position:E+"_"+this.id,obj:{id:x.id,source:x.source,layout:x.layout,paint:x.paint}});X.add(),X.display(!1),D&&D.addStyle(X),x.layout&&x.layout.visibility&&"none"===x.layout.visibility&&D.visibility(!1)}if(this.options.tools.filter){var J=new _5({id:this.id,target:m,position:E+"_"+this.id,obj:{id:x.id,source:x.source,filter:x.Filter}});J.add(),J.display(!1),D&&D.addFilter(J)}}else E>=0&&E--}}if(this.container=n,!this.options.target){if(!document.getElementById(this.name.target)){var $=document.createElement("div");$.id=this.name.target,(document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement).appendChild($)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container),dc().dispatch(Hd_onloaded,this)},ul.prototype._getSprites=function(n){var i,t=this;return n&&n.startsWith("mapbox://")?new Promise((i,o)=>{ll.info("Protocole mapbox:// non g\xe9r\xe9 !"),i(t)}):n?Promise.all([(i=n+".png",fetch(i,{credentials:"same-origin"}).then(function(o){if(o.ok)return o.blob().then(function(s){t.sprites.url=i;var a=new Image;return a.src=i,a.decode().then(function(){t.sprites.size={},t.sprites.size.h=a.height,t.sprites.size.w=a.width})}).catch(s=>{ll.warn("fetch image sprites exception :",s)})}).catch(o=>{ll.warn("fetch sprites exception :",o)})),fetch(n+".json",{credentials:"same-origin"}).then(function(o){if(o.ok)return o.json().then(function(s){t.sprites.json=s}).catch(s=>{ll.warn("fetch json sprites exception :",s)})}).catch(o=>{ll.warn("fetch sprites exception :",o)})]):new Promise((i,o)=>{ll.info("Auncun sprites disponibles !"),i(t)})},ul.prototype.createElement=function(){var n=this;return"object"==typeof this.options.style?(this.mapbox=this.options.style,this.options.tools.legend?this._getSprites(this.mapbox.sprite).then(function(){return n._initContainer(),n}).catch(t=>{ll.warn("fetch sprites exception :",t)}):new Promise((t,e)=>{n._initContainer(),t(n)})):"string"==typeof this.options.style?fetch(this.options.style,{credentials:"same-origin"}).then(t=>t.json().then(e=>{n.mapbox=e}).then(function(){return n.options.tools.legend?n._getSprites(n.mapbox.sprite).then(function(){return n._initContainer(),n}).catch(e=>{ll.warn("fetch sprites exception :",e)}):new Promise((e,r)=>{n._initContainer(),e(n)})}).catch(e=>{ll.error("json exception :",e)})).catch(t=>{ll.error("fetch exception :",t)}):void 0},ul.prototype.display=function(n){this.container.style.display=n?"block":"none"},ul.prototype.getID=function(){return this.id},ul.prototype.getContainer=function(){return this.container},ul.prototype.getStyle=function(){return this.mapbox},ul.prototype.getStyleLayer=function(n){for(var t=null,r=this.getLayer(n).options.obj.id,i=0;i<this.mapbox.layers.length;i++){var o=this.mapbox.layers[i];if(o.id===r){t=o;break}}return t},ul.prototype.getLayerFromStyle=function(n){for(var t=null,e=this.mapbox.layers[n],r=0;r<this.getLayers().length;r++){var i=this.getLayer(r);if(e.id===i.options.obj.id){t=i;break}}return t},ul.prototype.getLayers=function(){return this.layers},ul.prototype.getLayer=function(n){return this.layers[n]};const QU=ul;window.ol&&window.ol.style&&(window.ol.style.Editor=ul);const Hie={_addUID:function(n){return this._uid?n+"-"+this._uid:n},_createLoadingElement:function(){var n=document.createElement("div");return n.id="GPmapLoading",n.className="",n},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPimport"),n.className="GPwidget",n},_createShowImportElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowImport"),n.type="checkbox",n},_createShowImportPictoElement:function(){var n=this,t=document.createElement("label");t.id=this._addUID("GPshowImportPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowImport"),t.title="Ouvrir l'import de couches",t.addEventListener?t.addEventListener("click",function(){n._onShowImportClick()}):t.attachEvent&&t.attachEvent("onclick",function(){n._onShowImportClick()});var e=document.createElement("span");return e.id=this._addUID("GPshowImportOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createImportPanelElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPimportPanel"),n.className="GPpanel",n},_createImportPanelHeaderElement:function(){var n=document.createElement("div");n.className="GPpanelHeader";var t=this._createImportPanelTitleElement();n.appendChild(t);var e=this._createImportPanelCloseElement();return n.appendChild(e),n},_createImportPanelTitleElement:function(){var n=document.createElement("div");return n.className="GPpanelTitle",n.innerHTML="Import de donn\xe9es",n},_createImportPanelCloseElement:function(){var n=this,t=document.createElement("div");return t.id=this._addUID("GPimportPanelClose"),t.className="GPpanelClose",t.title="Fermer le panneau",t.addEventListener?t.addEventListener("click",function(){document.getElementById(n._addUID("GPshowImportPicto")).click()},!1):t.attachEvent&&t.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowImportPicto")).click()}),t},_createImportPanelFormElement:function(){var n=this,t=document.createElement("form");return t.id=this._addUID("GPimportForm"),t.className="map-tool-box",t.addEventListener?t.addEventListener("submit",function(e){e.preventDefault(),n._onImportSubmit()}):t.attachEvent&&t.attachEvent("onsubmit",function(e){e.preventDefault(),n._onImportSubmit()}),t},_createImportTypeLineElement:function(n){var t=this,e=document.createElement("div");e.id=this._addUID("GPimportTypeLine"),e.className="GPimportInputLine";var r=document.createElement("label");r.htmlFor=this._addUID("GPimportType"),r.className="GPimportLabel",r.innerHTML="Type de donn\xe9e",r.title="Type de donn\xe9e",e.appendChild(r);var i=document.createElement("select");i.className="GPimportSelect",i.addEventListener?i.addEventListener("change",function(a){"KML"===this.value||"GPX"===this.value||"GeoJSON"===this.value||"MAPBOX"===this.value?(document.getElementById(t._addUID("GPimportStaticParams")).className="GPimportVisibleParams",document.getElementById(t._addUID("GPimportServiceParams")).className="GPimportHiddenParams"):("WMS"===this.value||"WMTS"===this.value||"WFS"===this.value)&&(document.getElementById(t._addUID("GPimportServiceParams")).className="GPimportVisibleParams",document.getElementById(t._addUID("GPimportStaticParams")).className="GPimportHiddenParams"),t._onImportTypeChange(a)}):i.attachEvent&&i.attachEvent("onchange",function(){"KML"===this.value||"GPX"===this.value||"GeoJSON"===this.value||"MAPBOX"===this.value?(document.getElementById(t._addUID("GPimportStaticParams")).className="GPimportVisibleParams",document.getElementById(t._addUID("GPimportServiceParams")).className="GPimportHiddenParams"):("WMS"===this.value||"WMTS"===this.value||"WFS"===this.value)&&(document.getElementById(t._addUID("GPimportServiceParams")).className="GPimportVisibleParams",document.getElementById(t._addUID("GPimportStaticParams")).className="GPimportHiddenParams"),t._onImportTypeChange()}),i.id=this._addUID("GPimportType"),(!n||!Array.isArray(n))&&(n=["KML","GPX","GeoJSON","MAPBOX","WMS","WMTS","WFS"]);for(var o,s=0;s<n.length;s++)(o=document.createElement("option")).value=n[s],o.text="MAPBOX"===n[s]?"Vecteur tuil\xe9":n[s],i.appendChild(o);return e.appendChild(i),e},_createImportWaitingElement:function(){var n=document.createElement("div");n.id=this._addUID("GPimportWaitingContainer"),n.className="GPimportWaitingContainerHidden";var t=document.createElement("p");return t.className="GPimportWaiting",t.innerHTML="Recherche en cours...",n.appendChild(t),n},_createImportStaticParamsContainer:function(n){var t=document.createElement("div");return t.id=this._addUID("GPimportStaticParams"),t.className="KML"===n||"GPX"===n||"GeoJSON"===n||"MAPBOX"===n?"GPimportVisibleParams":"GPimportHiddenParams",t},_createStaticNameLabel:function(){var n=document.createElement("div");n.className="GPimportInputLine";var t=document.createElement("label");t.className="GPimportLabel",t.htmlFor=this._addUID("GPimportName"),t.innerHTML="Nom",t.title="Nom",n.appendChild(t);var e=document.createElement("input");return e.type="text",e.id=this._addUID("GPimportName"),e.className="GPimportInput",n.appendChild(e),n},_createStaticModeChoiceDiv:function(){var n=document.createElement("div");return n.id=this._addUID("GPimportChoice"),n},_createStaticLocalChoiceDiv:function(){var n=this,t=document.createElement("div");t.className="GPimportChoiceAlt";var e=document.createElement("input");e.type="radio",e.addEventListener?e.addEventListener("change",function(i){document.getElementById(n._addUID("GPimportValueLocal")).className="GPimportInputLine",document.getElementById(n._addUID("GPimportValueUrl")).className="GPimportValueHidden",n._onStaticImportTypeChange(i)}):e.appendChild&&e.appendChild("onchange",function(){document.getElementById(n._addUID("GPimportValueLocal")).className="GPimportInputLine",document.getElementById(n._addUID("GPimportValueUrl")).className="GPimportValueHidden",n._onStaticImportTypeChange()}),e.name="GPimportChoiceMode",e.value="local",e.checked=!0,e.id=this._addUID("GPimportChoiceAltLocal"),t.appendChild(e);var r=document.createElement("label");return r.className="GPimportChoiceAltTxt",r.htmlFor=this._addUID("GPimportChoiceAltLocal"),r.innerHTML="par fichier local",r.title="par fichier local",t.appendChild(r),t},_createStaticUrlChoiceDiv:function(){var n=this,t=document.createElement("div");t.className="GPimportChoiceAlt";var e=document.createElement("input");e.type="radio",e.addEventListener?e.addEventListener("change",function(i){document.getElementById(n._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(n._addUID("GPimportValueLocal")).className="GPimportValueHidden",n._onStaticImportTypeChange(i)}):e.appendChild&&e.appendChild("onchange",function(){document.getElementById(n._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(n._addUID("GPimportValueLocal")).className="GPimportValueHidden",n._onStaticImportTypeChange()}),e.id=this._addUID("GPimportChoiceAltUrl"),e.name="GPimportChoiceMode",e.value="url",e.checked=!1,t.appendChild(e);var r=document.createElement("label");return r.className="GPimportChoiceAltTxt",r.htmlFor=this._addUID("GPimportChoiceAltUrl"),r.innerHTML="par URL",r.title="par URL",t.appendChild(r),t},_createStaticLocalInputDiv:function(){var n=document.createElement("div");return n.id=this._addUID("GPimportValueLocal"),n.className="GPimportInputLine",n},_createStaticLocalInputLabel:function(){var n=document.createElement("label");return n.className="GPimportLabel",n.htmlFor=this._addUID("GPimportFile"),n.innerHTML="Fichier local",n.title="Fichier local",n},_createStaticLocalInput:function(){var n=document.createElement("input");return n.type="file",n.id=this._addUID("GPimportFile"),n.className="GPimportInputFile",n},_createStaticUrlInputDiv:function(){var n=document.createElement("div");return n.id=this._addUID("GPimportValueUrl"),n.className="GPimportValueHidden",n},_createStaticUrlInputLabel:function(){var n=document.createElement("label");return n.className="GPimportLabel",n.htmlFor=this._addUID("GPimportUrl"),n.innerHTML="URL",n.title="URL",n},_createStaticUrlInput:function(){var n=document.createElement("input");return n.type="text",n.id=this._addUID("GPimportUrl"),n.className="GPimportInput",n},_createServiceParamsContainer:function(n){var t=document.createElement("div");return t.id=this._addUID("GPimportServiceParams"),t.className="WMS"===n||"WMTS"===n||"WFS"===n?"GPimportVisibleParams":"GPimportHiddenParams",t},_createServiceUrlDiv:function(){var n=document.createElement("div");return n.className="GPimportInputLine",n},_createServiceUrlInputLabel:function(){var n=document.createElement("label");return n.className="GPimportLabel",n.htmlFor=this._addUID("GPimportServiceUrl"),n.innerHTML="URL du service",n.title="URL du service",n},_createServiceUrlInput:function(){var n=document.createElement("input");return n.type="text",n.id=this._addUID("GPimportServiceUrl"),n.className="GPimportInput",n},_createImportSubmitFormElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPimportSubmit"),n.className="GPinputSubmit tool-form-submit",n.type="submit",n.value="Importer",n},_createImportGetCapPanelElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPimportGetCapPanel"),n.className="GPpanel",n},_createImportGetCapPanelHeaderElement:function(){var n=this,t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML="Couches accessibles",e.title="Couches accessibles",t.appendChild(e);var r=document.createElement("div");return r.addEventListener?r.addEventListener("click",function(){document.getElementById(n._addUID("GPimportGetCapPanel")).style.display="none",document.getElementById(n._addUID("GPimportPanel")).style.display="",n._onGetCapPanelClose()}):r.attachEvent&&r.attachEvent("click",function(){document.getElementById(n._addUID("GPimportGetCapPanel")).style.display="none",document.getElementById(n._addUID("GPimportPanel")).style.display="",n._onGetCapPanelClose()}),r.className="GPpanelClose",r.title="Fermer le panneau",r.id=this._addUID("GPimportGetCapPanelClose"),t.appendChild(r),t},_createImportGetCapResultsContainer:function(){var n=document.createElement("div");return n.className="GPimportGetCapRoot",n.id=this._addUID("GPimportGetCapResults"),n},_addImportGetCapResultListRubrique:function(n,t){var e=document.createElement("ul");return e.className="GPimportGetCapListRubrique",e.title=n,t.appendChild(e),t},_addImportGetCapResultRubrique:function(n,t){var e=document.createElement("li");e.className="GPimportGetCapRubrique";var r=document.createElement("input");r.id="GPimportGetCapRubrique-"+ni.generate(),r.className="GPimportGetCapRubrique",r.type="checkbox",e.appendChild(r);var i=document.createElement("label");return i.className="GPimportGetCapRubriqueTitle",i.htmlFor=r.id,i.innerHTML=n,i.title=n,e.appendChild(i),t.appendChild(e),t},_addImportGetCapResultListLayer:function(n){var t=document.createElement("ul");return t.className="GPimportGetCapListLayer",n.appendChild(t),n},_addImportGetCapResultLayer:function(n,t,e){var r=document.createElement("li");r.className="GPimportGetCapProposal",r.innerHTML=n.content,r.title=n.title,r.id="GPimportGetCapProposal_"+t;var i=this;return r.addEventListener?r.addEventListener("click",function(o){i._onGetCapResponseLayerClick(o)}):r.attachEvent&&r.attachEvent("onclick",function(){i._onGetCapResponseLayerClick()}),e.appendChild(r),e},_createImportMapBoxPanelElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPimportMapBoxPanel"),n.className="GPpanel",n},_createImportMapBoxPanelHeaderElement:function(){var n=this,t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.id=this._addUID("GPimportMapBoxPanelReturnPicto"),e.title="Masquer le panneau",e.className="",e.addEventListener?e.addEventListener("click",function(o){n._onMapBoxReturnPictoClick(o)}):e.attachEvent&&e.attachEvent("onclick",function(o){n._onMapBoxReturnPictoClick(o)}),t.appendChild(e);var r=document.createElement("div");r.className="GPpanelTitle",r.innerHTML="Edition des styles",r.title="Edition des styles",t.appendChild(r);var i=document.createElement("div");return i.addEventListener?i.addEventListener("click",function(){document.getElementById(n._addUID("GPimportMapBoxPanel")).style.display="none",document.getElementById(n._addUID("GPimportPanel")).style.display="",n._onMapBoxPanelClose()}):i.attachEvent&&i.attachEvent("click",function(){document.getElementById(n._addUID("GPimportMapBoxPanel")).style.display="none",document.getElementById(n._addUID("GPimportPanel")).style.display="",n._onMapBoxPanelClose()}),i.className="GPpanelClose",i.title="Fermer le panneau",i.id=this._addUID("GPimportMapBoxPanelClose"),t.appendChild(i),t},_createImportMapBoxResultsContainer:function(){var n=document.createElement("div");return n.className="GPimportMapBoxpRoot",n.id=this._addUID("GPimportMapBoxResults"),n}};var ar=Ki_getLogger("layerimport"),$U=function(n){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(e);var r=this._container=this._initContainer(e);n.call(this,{element:r,target:e.target,render:e.render})}return n&&(t.__proto__=n),t.DefaultStyles={image:new wu({src:Ls.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new Gi({color:"rgba(0,42,80,0.8)",width:4}),fill:new ro({color:"rgba(0, 183, 152, 0.5)"}),text:new UE({font:"16px Sans",textAlign:"left",fill:new ro({color:"rgba(255, 255, 255, 1)"}),stroke:new Gi({color:"rgba(0, 0, 0, 1)",width:2})})},t.prototype=Object.create(n.prototype,{}),vr.assign(t.prototype,Hie),t.prototype.constructor=t,t.prototype.setMap=function(e){e&&(e.getLayers().on("remove",function(r){"layerimport:MapBox"===r.element.gpResultLayerId&&this._mapBoxLayerId&&this._mapBoxLayerId===r.element.id&&this._mapBoxPanel&&this._mapBoxPanel.style.display&&(this.cleanMapBoxResultsList(),this._mapBoxPanel.style.display="none",this._importPanel.style.display="")},this),this.draggable&&(jv_dragElement(this._importPanel,this._importPanelHeader,e.getTargetElement()),jv_dragElement(this._getCapPanel,null,e.getTargetElement()),jv_dragElement(this._mapBoxPanel,null,e.getTargetElement()))),n.prototype.setMap.call(this,e)},t.prototype.getCollapsed=function(){return this.collapsed},t.prototype.setCollapsed=function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPimportPanelClose-"+this._uid).click():document.getElementById("GPshowImport-"+this._uid).click(),this.collapsed=e):ar.error("[ERROR] LayerImport:setCollapsed - missing collapsed parameter")},t.prototype.getStaticImportContent=function(){return this.contentStatic},t.prototype.getServiceImportContent=function(){return this.contentService},t.prototype._initialize=function(e){if(this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,layerTypes:["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"],webServicesOptions:{},vectorStyleOptions:{KML:{extractStyles:!0,showPointNames:!0,defaultStyle:{}},GPX:{defaultStyle:{}},GeoJSON:{defaultStyle:{}},MapBox:{defaultStyle:{},tools:{filter:!1,style:!1}}}},e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.extractStyles&&(this.options.vectorStyleOptions.KML.extractStyles=e.vectorStyleOptions.KML.extractStyles),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.showPointNames&&(this.options.vectorStyleOptions.KML.showPointNames=e.vectorStyleOptions.KML.showPointNames),this.options.vectorStyleOptions.KML.defaultStyle=e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.defaultStyle?e.vectorStyleOptions.KML.defaultStyle:new br({image:t.DefaultStyles.image,stroke:t.DefaultStyles.stroke,fill:t.DefaultStyles.fill,text:t.DefaultStyles.text}),this.options.vectorStyleOptions.GPX.defaultStyle=e.vectorStyleOptions&&e.vectorStyleOptions.GPX&&e.vectorStyleOptions.GPX.defaultStyle?e.vectorStyleOptions.GPX.defaultStyle:new br({image:t.DefaultStyles.image,stroke:t.DefaultStyles.stroke,fill:t.DefaultStyles.fill}),this.options.vectorStyleOptions.GeoJSON.defaultStyle=e.vectorStyleOptions&&e.vectorStyleOptions.GeoJSON&&e.vectorStyleOptions.GeoJSON.defaultStyle?e.vectorStyleOptions.GeoJSON.defaultStyle:new br({image:t.DefaultStyles.image,stroke:t.DefaultStyles.stroke,fill:t.DefaultStyles.fill}),this.options.vectorStyleOptions.MapBox.defaultStyle=e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.defaultStyle?e.vectorStyleOptions.MapBox.defaultStyle:new br({image:t.DefaultStyles.image,stroke:t.DefaultStyles.stroke,fill:t.DefaultStyles.fill,text:t.DefaultStyles.text}),Array.isArray(e.layerTypes)){for(var r=[],i=0;i<e.layerTypes.length;i++)r.push(e.layerTypes[i]);this.options.layerTypes=r}vr.mergeParams(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=ni.generate(),this._waiting=!1,this._timer=null,this._initImportTypes(),this._initDefaultStyles(),this._showImportInput=null,this._importPanel=null,this._importPanelHeader=null,this._formContainer=null,this._staticLocalImportInput=null,this._staticUrlImportInput=null,this._serviceUrlImportInput=null,this._getCapPanel=null,this._getCapResultsListContainer=null,this._mapBoxPanel=null,this._mapBoxResultsListContainer=null,this._waitingContainer=null,this._loadingContainer=null,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMSLayers=[],this._getCapResponseWMTS=null,this._getCapResponseWMTSLayers=[],this.editor=null,this._mapBoxObj=null,this._mapBoxLayerId=null,this.contentStatic=null,this._url=null,this._file=null},t.prototype._checkInputOptions=function(e){if(e.layerTypes){var r=e.layerTypes;if(Array.isArray(r)){for(var i=["KML","GPX","GEOJSON","WMS","WMTS","WFS","MAPBOX"],o=[],s=0;s<r.length;s++)"string"!=typeof r[s]?(o.push(s),ar.warn("[ol.control.LayerImport] 'options.layerTypes' elements should be of type string ("+r[s]+")")):(r[s]=r[s].toUpperCase(),-1===i.indexOf(r[s])&&(o.push(s),ar.log("[ol.control.LayerImport] options.layerTypes : "+r[s]+" is not a supported type")),"GEOJSON"===r[s]&&(r[s]="GeoJSON"),"MAPBOX"===r[s]&&(r[s]="MAPBOX"));if(0!==o.length)for(var a=o.length-1;a>=0;a--)r.splice(o[a],1)}else ar.warn('[ol.control.LayerImport] \'options.layerTypes\' parameter should be an array. Set default values ["KML", "GPX", "GeoJSON", "WMS", "WMTS"]'),e.layerTypes=["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"]}},t.prototype._initDefaultStyles=function(){var e=this.options.vectorStyleOptions.KML.defaultStyle;this._defaultKMLStyle=new br({image:e.image,stroke:e.stroke,fill:e.fill,text:e.text});var r=this.options.vectorStyleOptions.GPX.defaultStyle;this._defaultGPXStyle=new br({image:r.image,stroke:r.stroke,fill:r.fill});var i=this.options.vectorStyleOptions.GeoJSON.defaultStyle;this._defaultGeoJSONStyle=new br({image:i.image,stroke:i.stroke,fill:i.fill});var o=this.options.vectorStyleOptions.MapBox.defaultStyle;this._defaultMapBoxStyle=new br({image:o.image,stroke:o.stroke,fill:o.fill,text:o.text})},t.prototype._initImportTypes=function(){this._currentImportType=this.options.layerTypes[0]||"KML","KML"===this._currentImportType||"GPX"===this._currentImportType||"GeoJSON"===this._currentImportType||"MAPBOX"===this._currentImportType?this._isCurrentImportTypeStatic=!0:("WMS"===this._currentImportType||"WMTS"===this._currentImportType||"WFS"===this._currentImportType)&&(this._isCurrentImportTypeStatic=!1),this._currentStaticImportType="local"},t.prototype._initContainer=function(){var e=this._createMainContainerElement(),r=this._showImportInput=this._createShowImportElement();e.appendChild(r),this.collapsed||(r.checked=!0);var i=this._createShowImportPictoElement();e.appendChild(i);var o=this._importPanel=this._createImportPanelElement(),s=this._importPanelHeader=this._createImportPanelHeaderElement();o.appendChild(s);var a=this._formContainer=this._initInputFormElement();o.appendChild(a),e.appendChild(o);var c=this._getCapPanel=this._createImportGetCapPanelElement(),h=this._createImportGetCapPanelHeaderElement();c.appendChild(h);var p=this._getCapResultsListContainer=this._createImportGetCapResultsContainer();c.appendChild(p),e.appendChild(c);var m=this._mapBoxPanel=this._createImportMapBoxPanelElement(),E=this._createImportMapBoxPanelHeaderElement();m.appendChild(E);var S=this._mapBoxResultsListContainer=this._createImportMapBoxResultsContainer();m.appendChild(S);var x=this._loadingContainer=this._createLoadingElement();m.appendChild(x),e.appendChild(m);var P=this._waitingContainer=this._createImportWaitingElement();return e.appendChild(P),e},t.prototype._initInputFormElement=function(){var e=this._createImportPanelFormElement(),r=this._createImportTypeLineElement(this.options.layerTypes);e.appendChild(r);var i=this._createImportStaticParamsContainer(this.options.layerTypes[0]),o=this._createStaticNameLabel();i.appendChild(o);var s=this._createStaticModeChoiceDiv(),a=this._createStaticLocalChoiceDiv();s.appendChild(a);var c=this._createStaticUrlChoiceDiv();s.appendChild(c),i.appendChild(s);var h=this._createStaticLocalInputDiv();h.appendChild(this._createStaticLocalInputLabel()),this._staticLocalImportInput=this._createStaticLocalInput(),h.appendChild(this._staticLocalImportInput),i.appendChild(h);var p=this._createStaticUrlInputDiv();p.appendChild(this._createStaticUrlInputLabel()),this._staticUrlImportInput=this._createStaticUrlInput(),p.appendChild(this._staticUrlImportInput),i.appendChild(p),e.appendChild(i);var m=this._createServiceParamsContainer(this.options.layerTypes[0]),E=this._createServiceUrlDiv();E.appendChild(this._createServiceUrlInputLabel()),this._serviceUrlImportInput=this._createServiceUrlInput(),E.appendChild(this._serviceUrlImportInput),m.appendChild(E),e.appendChild(m);var S=this._createImportSubmitFormElement();return e.appendChild(S),e},t.prototype._onShowImportClick=function(){this._mapBoxObj&&(this._mapBoxPanel.style.display="block"),this.collapsed=this._showImportInput.checked,this.dispatchEvent("change:collapsed")},t.prototype._onImportTypeChange=function(e){this._currentImportType=e.target.value,"KML"===this._currentImportType||"GPX"===this._currentImportType||"GeoJSON"===this._currentImportType||"MAPBOX"===this._currentImportType?this._isCurrentImportTypeStatic=!0:("WMS"===this._currentImportType||"WMTS"===this._currentImportType||"WFS"===this._currentImportType)&&(this._isCurrentImportTypeStatic=!1)},t.prototype._onStaticImportTypeChange=function(e){this._currentStaticImportType=e.target.value},t.prototype._onGetCapPanelClose=function(){("WMS"===this._currentImportType||"WMTS"===this._currentImportType||"WFS"===this._currentImportType)&&this.cleanGetCapResultsList()},t.prototype._onMapBoxPanelClose=function(){this.cleanMapBoxResultsList(),this._loadingContainer.className=""},t.prototype._onMapBoxReturnPictoClick=function(e){this._mapBoxPanel.style.display="none",this._showImportInput.checked=!1,this._loadingContainer.className=""},t.prototype._onImportSubmit=function(){ar.log("import d'une couche de type : "+this._currentImportType),this.contentStatic=null,this.contentService=null,this._isCurrentImportTypeStatic?this._importStaticLayer():this._importServiceLayers()},t.prototype._importStaticLayer=function(){var e,r=document.getElementById(this._addUID("GPimportName"));r&&ar.log("import layer name : "+(e=r.value||"")),"local"===this._currentStaticImportType?(ar.log("import static layer from local file"),this._importStaticLayerFromLocalFile(e)):"url"===this._currentStaticImportType&&(ar.log("import static layer from url"),this._importStaticLayerFromUrl(e))},t.prototype._importStaticLayerFromUrl=function(e){e=e||"";var r=this._staticUrlImportInput.value;if(ar.log("url : ",r),0!==r.length)if(r.trim&&(r=r.trim()),this._url=r,this.options.webServicesOptions&&(this.options.webServicesOptions.proxyUrl||this.options.webServicesOptions.noProxyDomains)){r=Oj_proxifyUrl(r,this.options.webServicesOptions);var i=this;aa.Protocols.XHR.call({url:r,method:"GET",timeOut:15e3,onResponse:function(o){i._hideWaitingContainer(),i._addFeaturesFromImportStaticLayer(o,e)},onFailure:function(o){i._hideWaitingContainer(),ar.error("[ol.control.LayerImport] KML/GPX/GeoJSON/MapBox request failed : ",o)}})}else ar.error("[ol.control.LayerImport] options.webServicesOptions.proxyUrl parameter is mandatory to request resources on another domain (cross-domain)");else ar.error("[ol.control.LayerImport] url parameter is mandatory")},t.prototype._importStaticLayerFromLocalFile=function(e){var r=this._staticLocalImportInput.files[0];if(r){this._file=r;var i=new FileReader,o=this;i.onerror=function(s){o._hideWaitingContainer(),ar.error("error fileReader : ",s)},i.onprogress=function(){ar.log("onprogress")},i.onloadstart=function(){o._displayWaitingContainer(),ar.log("onloadstart")},i.onabort=function(){o._hideWaitingContainer(),ar.log("onabort")},i.onloadend=function(s){ar.log("onloadend : ",s)},i.onload=function(s){ar.log("fileReader onload - file content : ",s.target.result),o._hideWaitingContainer(),o._addFeaturesFromImportStaticLayer(s.target.result,e)},i.readAsText(r)}else ar.warn("[ol.control.LayerImport] missing file")},t.prototype._addFeaturesFromImportStaticLayer=function(e,r){var i=this.getMap();if(i&&e){var o=null,s=null,a=null,c=null;if(this.contentStatic=e,"MAPBOX"===this._currentImportType){var h=this,p=this._mapBoxObj=JSON.parse(e),m=p.sources,E=Object.keys(m).length>1?1:0;for(var S in m)if(m.hasOwnProperty(S)){var x="",P="",R=null,F=null,D=null,j=null;if(p.metadata)for(var G in p.metadata)if(p.metadata.hasOwnProperty(G)){var X=G.split(":");if("geoportail"===X[0]){var J=X[1];if("title"===J){x=p.metadata[G];continue}if("description"===J){P=p.metadata[G];continue}if("quicklookUrl"===J){R=p.metadata[G];continue}if("legends"===J){F=p.metadata[G];continue}if("metadata"===J){D=p.metadata[G];continue}if("originators"===J){j=p.metadata[G];continue}}}x||(x="Couche MapBox"),P||(P="Couche MapBox"),x=E?x+"("+S+")":x;var $=m[S],le=$.type;if("vector"===le){var ie=$.url,Fe=$.tiles,Ce=p.sprite;if(ie&&0===ie.indexOf("mapbox://")){var $e=this._url;if($e){if(Fe=["a","b","c","d"].map(function(Oe){return"https://"+Oe+".tiles.mapbox.com/v4/"+ie.replace("mapbox://","")+"/{z}/{x}/{y}.vector.pbf?"+$e.split("?")[1]}),0===Ce.indexOf("mapbox://")){var ot=$e.split("?");p.sprite=ot[0]+"/sprite?"+ot[1]}}else ar.warn("Not yet implemented, can't use the local import scheme with a 'mapbox://' in the file.!")}if(Fe)a=new w6,(s=new wE({attributions:$.attribution,format:a,tileGrid:_v({extent:$.bounds,maxZoom:$.maxzoom||22,minZoom:$.minzoom||1,tileSize:$.tileSize||256}),urls:Fe}))._title=x,s._description=P,s._quicklookUrl=R,s._metadata=D,s._legends=F,s._originators=j,s.on("tileloadstart",function(Oe){h._loadingContainer.className="GPmapLoadingVisible"}),s.on("tileloadend",function(Oe){h._loadingContainer.className=""}),s.on("tileloaderror",function(Oe){h._loadingContainer.className=""}),o=new jL({source:s,visible:!1,declutter:!0}),this._mapBoxLayerId=o.id=S,o.gpResultLayerId="layerimport:"+this._currentImportType;else if(ie){a=new w6,o=new jL({visible:!1,declutter:!0}),this._mapBoxLayerId=o.id=S,o.gpResultLayerId="layerimport:"+this._currentImportType;var st=new Pte({url:ie}),dt=st.on("change",function(){if("ready"===st.getState()){for(var Oe=st.getTileJSON(),qt=Array.isArray(Oe.tiles)?Oe.tiles:[Oe.tiles],Pt=0;Pt<qt.length;Pt++){var $t=qt[Pt];0!==$t.indexOf("http")&&(qt[Pt]=ie+$t)}(s=new wE({attributions:st.getAttributions()||Oe.attribution,format:a,tileGrid:_v({extent:$.bounds,maxZoom:Oe.maxzoom||$.maxzoom||22,minZoom:Oe.minzoom||$.minzoom||0,tileSize:Oe.tileSize||$.tileSize||256}),urls:qt}))._title=x,s._description=P,s._quicklookUrl=R,s._metadata=D,s._legends=F,s._originators=j,s.on("tileloadstart",function(dn){h._loadingContainer.className="GPmapLoadingVisible"}),s.on("tileloadend",function(dn){h._loadingContainer.className=""}),o.setSource(s),o.set("mapbox-extension",Oe.vector_layers),Aa(dt)}})}}else{if("geojson"!==le)return void ar.warn("Type MapBox format unknown !");var kt=$.data;a=new qE,(s=new wE({attributions:$.attribution,format:a,url:kt}))._title=x,s._description=P,s._quicklookUrl=R,s._metadata=D,s._legends=F,s._originators=j,o=new jL({source:s,visible:!1,declutter:!0}),this._mapBoxLayerId=o.id=S,o.gpResultLayerId="layerimport:"+this._currentImportType}!function(Oe){var qt=function(){BS(Oe.layer,Oe.styles,Oe.id).then(function(){Oe.layer.setVisible(!0),Oe.layer.setOpacity(1)}).then(function(){var Mn=i.getView().getProjection().getCode();i.getView()&&Oe.styles.center&&Oe.styles.center.length&&i.getView().setCenter(Qi(Oe.styles.center,"EPSG:4326",Mn)),i.getView()&&(Oe.styles.zoom||0===Oe.styles.zoom)&&i.getView().setZoom(Oe.styles.zoom);var $n=Oe.layer.getSource();if(i.getView()&&i.getSize()&&$n.getExtent){var kn=$n.getExtent();kn&&kn[0]!==1/0&&i.getView().fit($n.getExtent(),i.getSize())}}).then(function(){}).catch(function(Mn){ar.error(Mn)})};ar.warn(Oe.layer);var Pt=i.get("mapbox-styles")||{};Pt[Oe.id]=Oe.styles,i.set("mapbox-styles",Pt);for(var $t=[],dn=Oe.styles.layers,Pn=0;Pn<dn.length;Pn++){var ft=dn[Pn];ft.source!==Oe.id||$t.push(ft)}Oe.layer.set("mapbox-styles",$t),i.addLayer(Oe.layer),Oe.layer.getSource()?qt():Oe.layer.once("change:source",qt),i.getControls().forEach(Mn=>{Mn instanceof Sm&&Mn.addLayer(Oe.layer,Oe.options)})}({id:S,styles:p,layer:o,options:{title:r||x,description:P,quicklookUrl:R,metadata:D,legends:F,originators:j}})}this._importPanel.style.display="none",this._mapBoxPanel.style.display="block",this.editor=new QU({target:this._mapBoxResultsListContainer,style:this._mapBoxObj,scope:this,events:{"editor:layer:onclickvisibility":this._onChangeVisibilitySourceMapBox,"editor:style:scale:onchangemin":this._onChangeScaleMinSourceMapBox,"editor:style:scale:onchangemax":this._onChangeScaleMaxSourceMapBox,"editor:legend:onchangevalue":this._onChangeLegendValueSourceMapBox},tools:{themes:!1,layers:!0,style:this.options.vectorStyleOptions.MapBox.tools.style,filter:this.options.vectorStyleOptions.MapBox.tools.filter,legend:!0,group:!1}}),this.editor.createElement()}else{"KML"===this._currentImportType?(a=new EL({showPointNames:this.options.vectorStyleOptions.KML.showPointNames,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}),c=this.options.vectorStyleOptions.KML.defaultStyle):"GPX"===this._currentImportType?(a=new T6,c=this.options.vectorStyleOptions.GPX.defaultStyle):"GeoJSON"===this._currentImportType&&(a=new qE,c=this.options.vectorStyleOptions.GeoJSON.defaultStyle);var Re,Zt=a.readProjection(e),gt=this._getMapProjectionCode();if(Re=a.readFeatures(e,{dataProjection:Zt,featureProjection:gt}),ar.log("loaded features : ",Re),(s=new bu({features:new hm})).addFeatures(Re),ar.trace(s),r?s._title=s._description=r:a.readName&&a.readName(e)?s._title=s._description=a.readName(e):(s._title=s._description="Import "+this._currentImportType,ar.log('[ol.control.LayerImport] set default name "Import '+this._currentImportType+'"')),(o=new rc({source:s,style:c})).gpResultLayerId="layerimport:"+this._currentImportType,i.addLayer(o),i.getView()&&i.getSize()&&s.getExtent){var Xe=s.getExtent();Xe&&Xe[0]!==1/0&&i.getView().fit(s.getExtent(),i.getSize())}}}},t.prototype._addFeaturesFromImportStaticLayerUrl=function(e,r){var o,s,a,i=this.getMap();if(i&&e&&("MAPBOX"===this._currentImportType?ar.trace("Not yet implemented !"):("KML"===this._currentImportType?a=new EL({showPointNames:!0,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}):"GPX"===this._currentImportType?a=new T6:"GeoJSON"===this._currentImportType&&(a=new qE),o=new bu({url:e,format:a}),"GPX"===this._currentImportType&&o.forEachFeature(function(h){null==h.getStyle()&&(ar.log("[ol.control.LayerImport] set default style for GPX feature"),h.setStyle(this.options.vectorStyleOptions.GPX.defaultStyle))}),"GeoJSON"===this._currentImportType&&o.forEachFeature(function(h){null==h.getStyle()&&(ar.log("[ol.control.LayerImport] set default style for GeoJSON feature"),h.setStyle(this.options.vectorStyleOptions.GeoJSON.defaultStyle))}),o._title=o._description=r||"Import "+this._currentImportType,s=new rc({source:o})),s.gpResultLayerId="layerimport:"+this._currentImportType,i.addLayer(s),i.getView()&&i.getSize()&&o.getExtent)){var c=o.getExtent();c&&c[0]!==1/0&&i.getView().fit(o.getExtent(),i.getSize())}},t.prototype._onChangeVisibilitySourceMapBox=function(e){var r=e.target.data.obj,i=e.target.srcElement;this.getMap().getLayers().forEach(s=>{if(s.get("mapbox-source")===r.source){for(var a=this._mapBoxObj.layers,c=0;c<a.length;c++)if(a[c].id===r.id){var h=a[c].layout;h?h.visibility=i.checked?"visible":"none":a[c].layout={visibility:i.checked?"visible":"none"};break}BS(s,this._mapBoxObj,r.source).then(function(){}).catch(function(p){ar.error(p)})}})},t.prototype._onChangeScaleMinSourceMapBox=function(e){var r=e.target.data.obj,i=e.target.srcElement;this.getMap().getLayers().forEach(s=>{if(s.get("mapbox-source")===r.source){for(var a=this._mapBoxObj.layers,c=0;c<a.length;c++)if(a[c].id===r.id){a[c].minzoom=i.value,i.title=i.value;break}BS(s,this._mapBoxObj,r.source).then(function(){}).catch(function(h){ar.error(h)})}})},t.prototype._onChangeScaleMaxSourceMapBox=function(e){var r=e.target.data.obj,i=e.target.srcElement;this.getMap().getLayers().forEach(s=>{if(s.get("mapbox-source")===r.source){for(var a=this._mapBoxObj.layers,c=0;c<a.length;c++)if(a[c].id===r.id){a[c].maxzoom=i.value,i.title=i.value;break}BS(s,this._mapBoxObj,r.source).then(function(){}).catch(function(h){ar.error(h)})}})},t.prototype._onChangeLegendValueSourceMapBox=function(e){var r=e.target.data.obj,i=e.target.srcElement;this.getMap().getLayers().forEach(s=>{if(s.get("mapbox-source")===r.source){for(var a=this._mapBoxObj.layers,c=0;c<a.length;c++)if(a[c].id===r.id){var h=a[c].paint;h&&(h[i.id]=i.value);break}BS(s,this._mapBoxObj,r.source).then(function(){}).catch(function(p){ar.error(p)})}})},t.prototype._importServiceLayers=function(){if("WFS"!==this._currentImportType){this.cleanGetCapResultsList();var e=this._getCapRequestUrl=this._serviceUrlImportInput.value;if(e){ar.log("url : ",e),e.trim&&(e=e.trim());var r=e.indexOf("?");if(r<0?e+="?SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities":r===e.length-1&&(e+="SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities"),this.options.webServicesOptions&&(this.options.webServicesOptions.proxyUrl||this.options.webServicesOptions.noProxyDomains)){var i=this.options.webServicesOptions.proxyUrl,o=this.options.webServicesOptions.noProxyDomains,s=!1;if(o&&Array.isArray(o)&&o.length>0)for(var a in o)ar.log("analyzing "+o[a]),-1!==e.indexOf(o[a])&&(ar.log(e+" found in noProxyDomains list ("+o[a]+")."),s=!0);!1===s&&(e=i+encodeURIComponent(e)),this._displayWaitingContainer();var c=this;aa.Protocols.XHR.call({url:e,method:"GET",timeOut:15e3,onResponse:function(h){c._hideWaitingContainer(),c._displayGetCapResponseLayers(h)},onFailure:function(h){c._hideWaitingContainer(),ar.error("[ol.control.LayerImport] getCapabilities request failed : ",h)}})}else ar.error("[ol.control.LayerImport] options.webServicesOptions.proxyUrl parameter is mandatory to request web service layers (getcapabilities request)")}else ar.error("[ol.control.LayerImport] url parameter is mandatory")}else ar.warn("[ol.control.LayerImport] WFS layer import is not implemented yet")},t.prototype._displayGetCapResponseLayers=function(e){var r,i,s;if(this._getCapResponseWMSLayers=[],this.contentService=e,this._importPanel.style.display="none",this._getCapPanel.style.display="block","WMS"===this._currentImportType){r=new fee;var a=this._getCapResponseWMS=r.read(e);if(ar.log("getCapabilities response : ",a),a&&a.Capability&&a.Capability.Layer){var c=a.Capability.Layer;if(Array.isArray(c))for(var h=0;h<c.length;h++)this._displayGetCapResponseWMSLayer(c[h]);else this._displayGetCapResponseWMSLayer(c)}}else if("WMTS"===this._currentImportType){r=new mte;var p=this._getCapResponseWMTS=r.read(e);if(ar.log("getCapabilities response : ",p),p&&p.Contents&&p.Contents.Layer&&(i=p.Contents.Layer,Array.isArray(i))){this._getCapResponseWMTSLayers=i;for(var m=0;m<i.length;m++)if((s=this._getWMTSLayerProjection(i[m],p))&&"string"==typeof s){if(!Ar(s)&&!Ar(s.toUpperCase())){ar.warn("[ol.control.LayerImport] wmts layer cannot be added to map : unknown projection",i[m]);continue}this._getCapResultsListContainer&&this._addImportGetCapResultLayer({content:i[m].Title,title:i[m].Abstract||i[m].Title},m,this._getCapResultsListContainer)}}}},t.prototype._displayGetCapResponseWMSLayer=function(e,r){if(e){ar.log("[ol.control.LayerImport] _displayGetCapResponseWMSLayer - layerObj : ",e);var o,i=this._getMapProjectionCode();if(r){var a,c,h=["CRS","Style"];for(c=0;c<h.length;c++)if(a=h[c],Array.isArray(r[a])&&0!==r[a].length)if(Array.isArray(e[a])&&0!==e[a].length)for(var p=0;p<r[a].length;p++)-1===e[a].indexOf(r[a][p])&&e[a].push(r[a][p]);else e[a]=r[a];var m=["BoundingBox","EX_GeographicBoundingBox","MaxScaleDenominator","MinScaleDenominator","Attribution","Dimension","queryable","cascaded","opaque","noSubsets","fixedWidth","fixedHeight"];for(c=0;c<m.length;c++)r[a=m[c]]&&!e[a]&&(e[a]=r[a])}else e._isRootLayer=!0,e._container=this._getCapResultsListContainer,e.Title||(e.Title="Liste des couches");if(e.Layer){if(Array.isArray(e.Layer)){e._container=this._addImportGetCapResultListRubrique(e?e.Title:r.Title,e?e._container:r._container).lastChild;for(var x=0;x<e.Layer.length;x++){for(var P=!1,R=e._container.getElementsByClassName("GPimportGetCapRubriqueTitle"),F=0;F<R.length;F++)R[F].title===e.Title&&(P=!0,e.Layer[x]._container=R[F].parentElement);P||(e.Layer[x]._container=this._addImportGetCapResultRubrique(e.Title,e._container).lastChild),this._displayGetCapResponseWMSLayer(e.Layer[x],e)}}}else{var D=this._getCapResponseWMSLayers.length;if(o=this._getWMSLayerProjection(e,i)){e._projection=o;var j=e._container;"ul"===j.localName&&(j=j.lastChild),this._addImportGetCapResultLayer({content:e.Title,title:e.Abstract||e.Title},D,j),this._getCapResponseWMSLayers[D]=e}else ar.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection",e)}}else ar.warn("[ol.control.LayerImport] _displayGetCapResponseWMSLayer : getCapabilities layer object not found")},t.prototype._onGetCapResponseLayerClick=function(e){if(e.target&&e.target.id){var r=parseInt(e.target.id.substr(23),10);if(isNaN(r))return;"WMS"===this._currentImportType?this._addGetCapWMSLayer(this._getCapResponseWMSLayers[r]):"WMTS"===this._currentImportType&&this._addGetCapWMTSLayer(this._getCapResponseWMTSLayers[r])}},t.prototype._addGetCapWMSLayer=function(e){var r=this.getMap();if(r)if(e){var i=this._getMapProjectionCode(),o={},s=this._getWMSLayerGetMapUrl();if(s)o.url=s;else{var a=this._getCapRequestUrl.indexOf("?");o.url=-1!==a?this._getCapRequestUrl.substring(0,a):this._getCapRequestUrl}if(o.params={},e.Name){o.params.LAYERS=e.Name,o.params.SERVICE="WMS",this._getCapResponseWMS.version&&(o.params.VERSION=this._getCapResponseWMS.version);var c=e._projection;if(c){var h;if(c!==i&&(o.projection=c),e.Style&&Array.isArray(e.Style)){var p=e.Style[0];o.params.STYLES=p.Name,p.LegendURL&&Array.isArray(p.LegendURL)&&0!==p.LegendURL.length&&(h=p.LegendURL[0].OnlineResource)}var m=new HO(o);this._getWMSLayerInfoForLayerSwitcher(e,h,m);var E={};E.source=m,this._getWMSLayerMinMaxResolution(e,i,E),this._getWMSLayerExtent(e,i,E);var S=new bL(E);S.gpResultLayerId="layerimport:WMS",e.queryable&&(S.gpGFIparams={queryable:!0},this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format&&Array.isArray(this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)&&(S.gpGFIparams.formats=this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)),r.addLayer(S)}else ar.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection")}else ar.warn("[ol.control.LayerImport] unable to add wms layer : mandatory layer 'name' parameter cannot be found",e)}else ar.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : layerInfo is not defined");else ar.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : map is not defined")},t.prototype._getWMSLayerGetMapUrl=function(){var e;if(this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetMap){var r=this._getCapResponseWMS.Capability.Request.GetMap;if(r.DCPType&&Array.isArray(r.DCPType)&&0!==r.DCPType.length){var i=r.DCPType[0];i&&i.HTTP&&i.HTTP.Get&&(e=i.HTTP.Get.OnlineResource)}}return e},t.prototype._getWMSLayerProjection=function(e,r){var i;if(e&&"object"==typeof e){var o=e.CRS;if(Array.isArray(o))for(var s=0;s<o.length;s++){var a=o[s];if(a===r){i=a;break}if(a&&"string"==typeof a&&(Ar(a)||Ar(a.toUpperCase()))){i=a;break}}return i}ar.warn("missing layer information (from getCapabilities)")},t.prototype._getWMSLayerMinMaxResolution=function(e,r,i){var o=Ar(r).getUnits();if("m"===o)e.MinScaleDenominator&&(i.minResolution=28e-5*e.MinScaleDenominator),e.MaxScaleDenominator&&(i.maxResolution=28e-5*e.MaxScaleDenominator);else if("degrees"===o){var s=28e-5*180/(6378137*Math.PI);e.MinScaleDenominator&&(i.minResolution=e.MinScaleDenominator*s),e.MaxScaleDenominator&&(i.maxResolution=e.MaxScaleDenominator*s)}},t.prototype._getWMSLayerExtent=function(e,r,i){if(e){var o=e.EX_GeographicBoundingBox,s=e.BoundingBox;if(o&&Array.isArray(o))i.extent="EPSG:4326"===r?o:kd(o,"EPSG:4326",r);else if(s&&Array.isArray(s))for(var a,c,h=0;h<s.length;h++)if(c=s[h].extent,a=s[h].crs){if(a===r){i.extent=c;break}if("string"==typeof a){var p=Ar(a)?Ar(a):Ar(a.toUpperCase());if(p){i.extent="degrees"===p.getUnits()&&0===a.toUpperCase().indexOf("EPSG")?kd([c[1],c[0],c[3],c[2]],p,r):kd(c,p,r);break}}}}else ar.warn("[ol.control.LayerImport] _getWMSLayerExtent error : layerInfo is not defined")},t.prototype._getWMSLayerInfoForLayerSwitcher=function(e,r,i){if(e.Title?(i._title=e.Title,i._description=e.Abstract?e.Abstract:e.Title):(i._title=e.Name,i._description=e.Abstract?e.Abstract:e.Name),r&&(i._legends=[{url:r}]),e.MetadataURL&&Array.isArray(e.MetadataURL)){i._metadata=[];for(var o=0;o<e.MetadataURL.length;o++){var s=e.MetadataURL[o].OnlineResource;s&&i._metadata.push({url:s})}}if(e.Attribution){var a=e.Attribution;i._originators={},a.OnlineResource&&(i._originators.url=a.OnlineResource),a.Title&&(i._originators.name=i._originators.attribution=a.Title),a.LogoURL&&a.LogoURL.OnlineResource&&(i._originators.logo=a.LogoURL.OnlineResource)}},t.prototype._addGetCapWMTSLayer=function(e){if(e&&e.Identifier){var r=this.getMap();if(r){var i={};i.layer=e.Identifier,this._getCapResponseWMTS.version&&(i.version=this._getCapResponseWMTS.version);var o=this._getWMTSLayerGetTileUrl();if(o)i.url=o;else{var s=this._getCapRequestUrl.indexOf("?");i.url=-1!==s?this._getCapRequestUrl.substring(0,s):this._getCapRequestUrl}var c,h,E,a=this._getTMSParams(e);if(i.matrixSet=a.tms,i.projection=a.projCode,i.tileGrid=new f8({resolutions:a.resolutions,matrixIds:a.matrixIds,origin:a.origin}),e.Style&&Array.isArray(e.Style))for(var p,m=0;m<e.Style.length&&(c=(p=e.Style[m]).Identifier,!p.isDefault);m++)p.LegendURL&&Array.isArray(p.LegendURL)&&0!==p.LegendURL.length&&(h=p.LegendURL[0].href);null==c&&ar.warn("[ol.control.LayerImport] style information not found in getCapabilities response for layer "+e.Identifier),i.style=c,e.Format&&Array.isArray(e.Format)&&(E=e.Format[0]),null==E&&ar.warn("[ol.control.LayerImport] format information not found in getCapabilities response for layer "+e.Identifier),i.format=E;var S=new d(i);e.Title?(S._title=e.Title,S._description=e.Abstract?e.Abstract:e.Title):(S._title=e.Identifier,S._description=e.Abstract?e.Abstract:e.Identifier),h&&(S._legends=[{url:h}]);var P,x={};x.source=S,x.extent=this._getWMTSLayerExtent(e);try{P=new bL(x)}catch(R){return void ar.warn("[ol.control.LayerImport] an error occured while trying to create ol.layer.Tile from getCapabilities information. error : ",R)}P.gpResultLayerId="layerimport:WMTS",r.addLayer(P)}}else ar.warn("[ol.control.LayerImport] layer information not found in getCapabilities response for layer ")},t.prototype._getWMTSLayerGetTileUrl=function(){var e;if(this._getCapResponseWMTS&&this._getCapResponseWMTS.OperationsMetadata&&this._getCapResponseWMTS.OperationsMetadata.GetTile){var r=this._getCapResponseWMTS.OperationsMetadata.GetTile;r.DCP&&r.DCP.HTTP&&r.DCP.HTTP.Get&&Array.isArray(r.DCP.HTTP.Get)&&0!==r.DCP.HTTP.Get.length&&(e=r.DCP.HTTP.Get[0].href)}return e},t.prototype._getWMTSLayerProjection=function(e,r){var i;if(e&&"object"==typeof e){if(r&&"object"==typeof r){if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink)){var s,o=e.TileMatrixSetLink[0].TileMatrixSet;if(r.Contents&&Array.isArray(r.Contents.TileMatrixSet))for(var a=r.Contents.TileMatrixSet,c=0;c<a.length;c++)if(a[c].Identifier===o&&a[c].TileMatrix){(s=a[c].SupportedCRS)&&"string"==typeof s&&(Ar(s)||Ar(s.toUpperCase()))&&(i=s);break}}return i}ar.warn("missing getCapabilities response")}else ar.warn("missing layer information (from getCapabilities)")},t.prototype._getTMSParams=function(e){var a,c,h,r={},i=[],o=[],s=[];if(this.getMap()){if(!e.TileMatrixSetLink||!Array.isArray(e.TileMatrixSetLink))return;if(a=e.TileMatrixSetLink[0].TileMatrixSet,this._getCapResponseWMTS.Contents&&Array.isArray(this._getCapResponseWMTS.Contents.TileMatrixSet)){for(var m=this._getCapResponseWMTS.Contents.TileMatrixSet,E=0;E<m.length;E++)if(m[E].Identifier===a&&m[E].TileMatrix){var x,P,R,F,D,S=m[E];if(S.SupportedCRS&&(h=Ar(c=S.SupportedCRS)),h&&h.getUnits&&(D=h.getUnits()),Array.isArray(S.TileMatrix))for(var j=0;j<S.TileMatrix.length;j++)null!=(x=S.TileMatrix[j]).Identifier&&(P=parseInt(x.Identifier,10),i.push(P)),R=x.ScaleDenominator,F="degrees"===D?28e-5*R*180/(6378137*Math.PI):28e-5*R,o.push(F),s=x.TopLeftCorner;void 0!==o.sort&&o.sort(function(G,X){return X-G}),void 0!==i.sort&&i.sort(function(G,X){return G-X})}}else ar.warn("[ol.control.LayerImport] TileMatrixSet data not found in getCapabilities response for layer "+e.Identifier);return r.tms=a,r.projCode=c,r.matrixIds=i,r.resolutions=o,r.origin=s,r}},t.prototype._getWMTSLayerExtent=function(e){var r,i=this._getMapProjectionCode();return e.WGS84BoundingBox&&Array.isArray(e.WGS84BoundingBox)&&(r=kd(e.WGS84BoundingBox,"EPSG:4326",i)),r},t.prototype._getMapProjectionCode=function(){var e=this.getMap();if(e&&e.getView&&e.getView().getProjection)return e.getView().getProjection().getCode();ar.warn("unable to get layerimport's map")},t.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GPimportWaitingContainerVisible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){!0===e._waiting?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)},t.prototype._hideWaitingContainer=function(){this._waiting&&(this._waitingContainer.className="GPimportWaitingContainerHidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)},t.prototype.cleanGetCapResultsList=function(){if(this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMTS=null,this._getCapResponseWMSLayers=null,this._getCapResponseWMTSLayers=null,this._getCapResultsListContainer)for(;this._getCapResultsListContainer.firstChild;)this._getCapResultsListContainer.removeChild(this._getCapResultsListContainer.firstChild)},t.prototype.cleanMapBoxResultsList=function(){if(this.editor=null,this._mapBoxObj=null,this._mapBoxResultsListContainer)for(;this._mapBoxResultsListContainer.firstChild;)this._mapBoxResultsListContainer.removeChild(this._mapBoxResultsListContainer.firstChild)},t}(Su);const Wie=$U;window.ol&&window.ol.control&&(window.ol.control.LayerImport=$U);var Yie=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function Xie(n){this.updateElement_(n.frameState)}const Kie=function(n){function t(e){var r=this,i=e||{};(r=n.call(this,{element:document.createElement("div"),render:i.render||Xie,target:i.target})||this).ulElement_=document.createElement("ul"),r.collapsed_=void 0===i.collapsed||i.collapsed,r.overrideCollapsible_=void 0!==i.collapsible,r.collapsible_=void 0===i.collapsible||i.collapsible,r.collapsible_||(r.collapsed_=!1);var o=void 0!==i.className?i.className:"ol-attribution",s=void 0!==i.tipLabel?i.tipLabel:"Attributions",a=void 0!==i.collapseLabel?i.collapseLabel:"\xbb";"string"==typeof a?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=a):r.collapseLabel_=a;var c=void 0!==i.label?i.label:"i";"string"==typeof c?(r.label_=document.createElement("span"),r.label_.textContent=c):r.label_=c;var h=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_,p=document.createElement("button");p.setAttribute("type","button"),p.title=s,p.appendChild(h),p.addEventListener("click",r.handleClick_.bind(r),!1);var E=r.element;return E.className=o+" ol-unselectable ol-control"+(r.collapsed_&&r.collapsible_?" "+lF:"")+(r.collapsible_?"":" ol-uncollapsible"),E.appendChild(r.ulElement_),E.appendChild(p),r.renderedAttributions_=[],r.renderedVisible_=!0,r}return Yie(t,n),t.prototype.collectSourceAttributions_=function(e){for(var r={},i=[],o=e.layerStatesArray,s=0,a=o.length;s<a;++s){var c=o[s];if(Xz(c,e.viewState)){var h=c.layer.getSource();if(h){var p=h.getAttributions();if(p){var m=p(e);if(m)if(!this.overrideCollapsible_&&!1===h.getAttributionsCollapsible()&&this.setCollapsible(!1),Array.isArray(m))for(var E=0,S=m.length;E<S;++E)m[E]in r||(i.push(m[E]),r[m[E]]=!0);else m in r||(i.push(m),r[m]=!0)}}}}return i},t.prototype.updateElement_=function(e){if(e){var r=this.collectSourceAttributions_(e),i=r.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!af(r,this.renderedAttributions_)){hF(this.ulElement_);for(var o=0,s=r.length;o<s;++o){var a=document.createElement("li");a.innerHTML=r[o],this.ulElement_.appendChild(a)}this.renderedAttributions_=r}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},t.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},t.prototype.handleToggle_=function(){this.element.classList.toggle(lF),this.collapsed_?QR(this.collapseLabel_,this.label_):QR(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t}(Su);var b5=Ki_getLogger("geoportalattribution"),eV=function(n){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");e.collapsible=!0,n.call(this,e)}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype,{})).constructor=t,t.prototype.setMap=function(e){if(null!=e){var r=e.getControls();r.forEach(i=>{if(!(i instanceof t)&&i)for(var o=i.element.classList,s=0;s<o.length;s++)if("ol-attribution"===o[s]){r.remove(i);break}}),this._updateAttributions(e),e.on("moveend",()=>{this._updateAttributions(e)}),e.getLayers().on("add",()=>{this._updateAttributions(e)}),e.getLayers().on("remove",()=>{this._updateAttributions(e)})}n.prototype.setMap.call(this,e)},t.prototype._updateAttributions=function(e){for(var r={},i=e.getView(),o=i.calculateExtent(e.getSize()),s=i.getProjection().getCode(),a=kd(o,s,"EPSG:4326"),c=[a[3],a[0],a[1],a[2]],h=i.getZoom(),p=e.getLayers().getArray(),m=0;m<p.length;m++)p[m].getSource?this._updateLayerAttributions(p[m],r,c,s,h):p[m].getLayers&&p[m].getLayers().forEach(S=>{S.getSource?this._updateLayerAttributions(S,r,c,s,h):b5.log("cannot find layer source in layergroup ",p[m])})},t.prototype._updateLayerAttributions=function(e,r,i,o,s){if(e){var a=e.getSource();if(a){r||(r={});var c=[],h=e.getVisible(),p=a._originators;if(void 0!==p&&a.setAttributions(),p&&h){for(var m=g8.getAttributions({extent:i,crs:o,zoom:s,visibility:h,originators:p}),E=0;E<m.length;E++){var S=m[E];r.hasOwnProperty(S)||(c.push(S),r[S]=!0)}0!==c.length&&(a.setAttributions(c),this.dispatchEvent({type:"attributions:update",attributions:c}))}}else b5.trace("source is not yet loaded !")}else b5.trace("layer is null !?")},t}(Kie);const Zie=eV;window.ol&&window.ol.control&&(window.ol.control.GeoportalAttribution=eV);const Qie={_toolboxId:"GPtoolbox-measure-main",_buttonId:"GPtoolbox-measure-button",_widgetId:"GPtoolbox-measure-widget",getToolBoxID:function(n){return n?this._toolboxId+"-"+n:this._toolboxId},getButtonID:function(n){return n?this._buttonId+"-"+n:this._buttonId},getWidgetID:function(n){return n?this._widgetId+"-"+n:this._widgetId},_createToolBoxContainerElement:function(n){var t=document.createElement("div");t.id=this.getToolBoxID(n),t.className="GPshowAdvancedToolPicto";var e=document.createElement("button");e.id=this.getButtonID(n);var r=this;e.addEventListener("click",function(){this.blur();var o=document.getElementById(r.getWidgetID(n));o.style.display="block"===o.style.display?"none":"block"}),t.appendChild(e);var i=document.createElement("div");return i.id=this.getWidgetID(n),i.addEventListener("click",function(){},!1),t.appendChild(i),t}};var v2=Ki_getLogger("toolbox"),tV={_toolbox:{},add:function(n,t){if(v2.trace("ToolBox.add()",t),n){var e="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;e&&(this._toolbox=e.gpShareMeasureToolBox||{});var r=n.getTargetElement(),i=r.ownerDocument,o=r.id;this._toolbox&&0!==Object.keys(this._toolbox).length?this._toolbox[o]||(this._toolbox[o]=ni.generate()):(this._toolbox={},this._toolbox[o]=ni.generate());var s=this._toolbox[o];if(!i.getElementById(this.getToolBoxID(s))){v2.trace("create toolbox !");var a=this._createToolBoxContainerElement(s);a.style.pointerEvents="auto",r.getElementsByClassName("ol-overlaycontainer-stopevent")[0].appendChild(a)}var h=i.getElementById(this.getWidgetID(s));t.setTarget(h),e&&(e.gpShareMeasureToolBox=this._toolbox),v2.trace("add control to toolbox !")}else v2.trace("map doesn't exist !?")}};vr.assign(tV,Qie);const y2=tV;var w5=Ki_getLogger("measures"),iy={DEFAULT_POINTER_STYLE:new Bd({radius:5,stroke:new Gi({color:"#002A50",width:2}),fill:new ro({color:"rgba(255, 155, 0, 0.7)"})}),DEFAULT_DRAW_START_STYLE:new br({fill:new ro({color:"rgba(0, 183, 152, 0.2)"}),stroke:new Gi({color:"#002A50",lineDash:[10,10],width:2})}),DEFAULT_DRAW_FINISH_STYLE:new br({fill:new ro({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Gi({color:"#002A50",width:3})}),tools:{MeasureLength:[],MeasureArea:[],MeasureAzimuth:[]},measureDraw:null,measureSource:null,measureVector:null,sketch:null,measureTooltipElement:null,measureTooltip:null,helpTooltipElement:null,helpTooltip:null,clean:function(){w5.trace("["+this.CLASSNAME+"] deactived tool !"),this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this._showContainer.checked=!1},onPointerMoveHandler:function(n){if(!n.dragging){var t=n.coordinate;if(this.sketch){var e,r=this.sketch.getGeometry();if(e=this.format(r),"LineString"===r.getType())t=r.getLastCoordinate();else{if("Polygon"!==r.getType())return;t=r.getInteriorPoint().getCoordinates()}this.measureTooltipElement.innerHTML=e,this.measureTooltip.setPosition(t)}}},onShowMeasureClick:function(n,t){var e=this.getMap(),r=e.getTargetElement().id,i="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;i&&(this.tools=i.gpShareMeasures||{});var o=this.CLASSNAME;for(var s in this.tools)if(this.tools.hasOwnProperty(s))for(var a=this.tools[s],c=0;c<a.length;c++){var h=a[c];h&&h.active&&s!==o&&h.map===r&&(h.active=!1,null!==h.instance&&h.instance.clean())}if(GL.unset(e,{current:"Measures"}),this._showContainer.checked){this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents();for(var m=0;m<this.tools[o].length;m++)this.tools[o][m].map===r&&(this.tools[o][m].active=!1)}else{this.addMeasureEvents(),this.initMeasureInteraction(),this.addMeasureInteraction(t);for(var p=0;p<this.tools[o].length;p++)this.tools[o][p].map===r&&(this.tools[o][p].active=!0)}},clearMeasureToolTip:function(){var n=this.getMap();if(n)for(var e=n.getTargetElement().getElementsByClassName("ol-overlaycontainer-stopevent"),r=0;r<e.length;r++){for(var i=e[r],o=i.children.length,s=[],a=0;a<o;a++){var c=i.children[a];if(0!==c.children.length){var h=c.children[0];("GPmeasureTooltip GPmeasureTooltip-static"===h.className||"GPmeasureTooltip GPmeasureTooltip-measure"===h.className)&&s.push(c)}}for(var p=0;p<s.length;p++)i.removeChild(s[p])}},clearMeasure:function(){var n=this.getMap();this.measureVector&&(n.removeLayer(this.measureVector),this.measureVector=null),this.measureDraw&&(n.removeInteraction(this.measureDraw),this.measureDraw=null)},createMeasureTooltip:function(n){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-measure",this.measureTooltip=new Eu({element:this.measureTooltipElement,offset:[0,-15],positioning:"bottom-center"}),n.addOverlay(this.measureTooltip)},createHelpTooltip:function(n){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=new Eu({element:this.helpTooltipElement,offset:[15,0],positioning:"center-left"}),n.addOverlay(this.helpTooltip)},createStylingMeasureInteraction:function(n){this.options.styles=n||{},w5.trace("style start",this.options.styles.start);var t={image:iy.DEFAULT_POINTER_STYLE,fill:iy.DEFAULT_DRAW_START_STYLE.getFill(),stroke:iy.DEFAULT_DRAW_START_STYLE.getStroke()};this.options.styles.hasOwnProperty("pointer")&&this.options.styles.pointer instanceof Image&&(t.image=this.options.styles.pointer),this.options.styles.hasOwnProperty("start")&&this.options.styles.start instanceof br&&(null!=this.options.styles.start.getFill()&&(t.fill=this.options.styles.start.getFill()),null!=this.options.styles.start.getStroke()&&(t.stroke=this.options.styles.start.getStroke())),this.options.styles.start=new br(t),w5.trace("style finish",this.options.styles.finish);var e={fill:iy.DEFAULT_DRAW_FINISH_STYLE.getFill(),stroke:iy.DEFAULT_DRAW_FINISH_STYLE.getStroke()};this.options.styles.hasOwnProperty("finish")&&this.options.styles.finish instanceof br&&(null!=this.options.styles.finish.getFill()&&(e.fill=this.options.styles.finish.getFill()),null!=this.options.styles.finish.getStroke()&&(e.stroke=this.options.styles.finish.getStroke())),this.options.styles.finish=new br(e)},addMeasureInteraction:function(n){var t=this.getMap(),e=this;this.measureDraw=new wh({source:this.measureSource,condition:function(r){return!r.originalEvent.ctrlKey||(e.sketch&&this.removeLastPoint(),!1)},type:n,style:this.options.styles.start||iy.DEFAULT_DRAW_START_STYLE}),this.measureDraw.setProperties({name:"Measures",source:this}),t.addInteraction(this.measureDraw),this.createMeasureTooltip(t),this.measureDraw.on("drawstart",r=>{e.sketch=r.feature}),this.measureDraw.on("drawend",()=>{if(e.sketch){var r,i,o=e.sketch.getGeometry();if(r=e.format(o),"LineString"===o.getType())i=o.getLastCoordinate();else{if("Polygon"!==o.getType())return;i=o.getInteriorPoint().getCoordinates()}e.measureTooltipElement.innerHTML=r,e.measureTooltip.setPosition(i)}e.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-static",e.measureTooltip.setOffset([0,-7]),e.sketch=null,e.measureTooltipElement=null,e.createMeasureTooltip(t)})},initMeasureInteraction:function(){var n=this.getMap();this.measureSource=new bu,this.measureVector=new rc({source:this.measureSource,style:this.options.styles.finish||iy.DEFAULT_DRAW_FINISH_STYLE}),this.measureVector.gpResultLayerId="measure",n.addLayer(this.measureVector),n.getControls().forEach(t=>{if(t instanceof Sm){var e=this.measureVector.gpLayerId;t._layers[e].title===e&&t.addLayer(this.measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}};const jS=iy,eoe={_addUID:function(n){return this._uid?n+"-"+this._uid:n},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPelevationPath"),n.className="GPwidget",n},_createShowElevationPathElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowElevationPath"),n.type="checkbox",n},_createShowElevationPathPictoElement:function(){var n=this,t=document.createElement("label");t.id=this._addUID("GPshowElevationPathPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowElevationPath"),t.title="Calculer un profil",t.addEventListener?t.addEventListener("click",function(r){n.onShowElevationPathClick(r)}):t.attachEvent&&t.attachEvent("onclick",function(r){n.onShowElevationPathClick(r)});var e=document.createElement("span");return e.id=this._addUID("GPshowElevationPathOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t},_createElevationPathPanelElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPelevationPathPanel"),n.className="GPpanel",n},_createElevationPathPanelHeaderElement:function(){var n=this,t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.id=this._addUID("GPelevationPathPanelInfo"),e.className="GPpanelInfo",e.title="Informations",e.addEventListener?e.addEventListener("click",function(){n.onOpenElevationPathInfoClick()}):e.attachEvent&&e.attachEvent("onclick",function(){n.onOpenElevationPathInfoClick()}),t.appendChild(e);var r=document.createElement("div");r.className="GPpanelTitle",r.innerHTML="Profil Altim\xe9trique",t.appendChild(r);var i=document.createElement("div");i.id=this._addUID("GPelevationPathPanelReduce"),i.className="GPpanelReduce",i.title="Masquer le panneau",i.addEventListener?i.addEventListener("click",function(){"function"==typeof n.onReduceElevationPathPanelClick&&(document.getElementById(n._addUID("GPshowElevationPath")).checked=!1,n.onReduceElevationPathPanelClick())},!1):i.attachEvent&&i.attachEvent("onclick",function(){"function"==typeof n.onReduceElevationPathPanelClick&&(document.getElementById(n._addUID("GPshowElevationPath")).checked=!1,n.onReduceElevationPathPanelClick())}),t.appendChild(i);var o=document.createElement("div");return o.id=this._addUID("GPelevationPathPanelClose"),o.className="GPpanelClose",o.title="Fermer le panneau",o.addEventListener?o.addEventListener("click",function(){document.getElementById(n._addUID("GPshowElevationPathPicto")).click()},!1):o.attachEvent&&o.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowElevationPathPicto")).click()}),t.appendChild(o),t},_createElevationPathPanelProfilElement:function(){var n=document.createElement("div");return n.id="GPelevationPathProfil",n},_createElevationPathWaitingElement:function(){var n=document.createElement("div");n.id=this._addUID("GPelevationPathCalcWaitingContainer"),n.className="GPelevationPathCalcWaitingContainerHidden";var t=document.createElement("p");return t.className="GPelevationPathCalcWaiting",t.innerHTML="Calcul en cours...",n.appendChild(t),n},_createElevationPathInformationsElement:function(){var n=document.createElement("div");n.id=this._addUID("GPelevationPathInformationsContainer"),n.className="GPelevationPathInformationsContainerHidden";var t=document.createElement("p");return t.className="GPelevationPathInformations",t.innerHTML="Aucune information...",n.appendChild(t),n},_addElevationPathInformationsItem:function(n){var t=document.getElementById(this._addUID("GPelevationPathInformationsContainer"));if(t){var e=document.createElement("p");e.className="GPelevationPathInformations",e.innerHTML=n,t.appendChild(e)}return t}},_2={_getCssProperty:function(n,t){return window.getComputedStyle(n,null).getPropertyValue(t)},_getTextWidth:function(n,t,e=null){var i=(this.canvas||(this.canvas=document.createElement("canvas"))).getContext("2d");return i.font=null===e?`${this._getCssProperty(t,"font-weight")} ${this._getCssProperty(t,"font-size")} ${this._getCssProperty(t,"font-family")}`:e,i.measureText(n).width},_dataZToSvgY:function(n,t,e,r){return t-(n-e)*r-.5},_dataDistToSvgX:function(n,t,e,r){return t-e+n*r},_svgXToDataDist:function(n,t,e,r){return(n+e-t)/r},_arrayBisect:function(n,t){let e;if(0===n.length)return 0;for(e=0;e<n.length;e++)if(t<n[e].dist)return e;return e-1},displayProfileByDefault:function(n,t,e,r){var i=e;if(!t||!n)return;for(;t.firstChild;)t.removeChild(t.firstChild);var s=i.options.displayProfileOptions,a=n.points,c=JSON.parse(JSON.stringify(a));c.sort(function(Si,Vo){return Si.z-Vo.z});var h=c[0].z,p=c[c.length-1].z,m=n.distance;let E="m";const S=document.createElement("div");S.id="profileElevationByDefault",t.appendChild(S);const x=t.clientHeight-25-10,P=t.clientWidth-10-15,R=17,F=this._getTextWidth(Math.round(p).toLocaleString()+",88",t,"400 10 Verdana"),X=this._getTextWidth(Math.round(m).toLocaleString()+",5",t),$=x-17-15,le=P-R-F,ie=document.createElementNS("http://www.w3.org/2000/svg","svg");ie.id="profileElevationByDefaultSvg",ie.setAttribute("style","display: block; margin: auto; overflow: visible; position: absolute; left: 10px;"),ie.setAttribute("viewBox",`0 0 ${t.clientWidth} ${t.clientHeight}`),ie.setAttribute("width","100%"),ie.setAttribute("height","100%");const Fe=Math.floor($/15);let Ce;Ce=p===h?.1:Math.pow(10,Math.ceil(Math.log((p-h)/Fe)/Math.log(10)))/2;let $e=Math.floor(h/Ce)*Ce,ot=Math.ceil(p/Ce)*Ce;ot===p&&(ot+=Ce),$e=Math.round(100*$e)/100,ot=Math.round(100*ot)/100;let st=Math.round((ot-$e)/Ce);st+1>Fe&&(Ce=Math.pow(10,Math.ceil(Math.log((p-h)/Fe)/Math.log(10))),$e=Math.floor(h/Ce)*Ce,ot=Math.ceil(p/Ce)*Ce,ot===p&&(ot+=Ce),$e=Math.round(100*$e)/100,ot=Math.round(100*ot)/100,st=Math.floor((ot-$e)/Ce)),st=Math.max(Math.round(st),1);const dt=document.createElementNS("http://www.w3.org/2000/svg","g");dt.setAttribute("class","profile-z-vertical");const kt=document.createElementNS("http://www.w3.org/2000/svg","g"),Qe=$/st;let gt,Re,Xe,Oe,qt,Pt,Zt=$/(ot-$e);Zt=p===h?$/.2:$/(ot-$e);for(let Si=0;Si<=st;Si++)gt=document.createElementNS("http://www.w3.org/2000/svg","text"),gt.setAttribute("class","profile-z-graduation"),gt.setAttribute("font-family","Verdana"),gt.setAttribute("font-size","10px"),gt.setAttribute("fill","#5E5E5E"),gt.textContent=(Math.round(100*($e+Si*Ce))/100).toLocaleString(),Re=$-Si*Qe,gt.setAttribute("transform",`translate(${R+F-8}, ${Re+5})`),gt.setAttribute("text-anchor","end"),dt.appendChild(gt),Xe=Math.round(Re)-.5,Oe=document.createElementNS("http://www.w3.org/2000/svg","g"),qt=document.createElementNS("http://www.w3.org/2000/svg","path"),qt.setAttribute("cs","100,100"),qt.setAttribute("stroke-width","1"),qt.setAttribute("stroke-opacity",0!==Si?"0.2":"1"),qt.setAttribute("stroke","#000000"),qt.setAttribute("fill","none"),qt.setAttribute("d",`M${R+F},${Xe} L${le+R+F},${Xe}`),Pt=document.createElementNS("http://www.w3.org/2000/svg","path"),Pt.setAttribute("cs","100,100"),Pt.setAttribute("stroke-width","1"),Pt.setAttribute("stroke-opacity","1"),Pt.setAttribute("stroke","#000000"),Pt.setAttribute("fill","none"),Pt.setAttribute("d",`M${R+F},${Xe} L${R+F+5},${Xe}`),Pt.setAttribute("transform","translate(-5, 0)"),Oe.appendChild(Pt),Oe.appendChild(qt),kt.appendChild(Oe);var $t=document.createElementNS("http://www.w3.org/2000/svg","text");$t.setAttribute("class","profile-z-legend"),$t.setAttribute("font-family","Verdana"),$t.setAttribute("font-size","11px"),$t.setAttribute("fill","#5E5E5E"),$t.textContent="Altitude (m)",$t.setAttribute("transform",`translate(9, ${Math.round($/2)}) rotate(-90)`),$t.setAttribute("text-anchor","middle"),dt.appendChild($t),ie.appendChild(dt),ie.appendChild(kt),m>2e3&&(m/=1e3,E="km");const dn=Math.floor(le/X);let Pn=Math.pow(10,Math.ceil(Math.log(m/dn)/Math.log(10)))/2;const ft=m;let Mn=Math.floor(ft/Pn);Mn>dn?(Pn=Math.pow(10,Math.ceil(Math.log(m/dn)/Math.log(10))),Mn=Math.floor(ft/Pn)):Mn<1&&(Pn=Math.pow(10,Math.ceil(Math.log(m/dn)/Math.log(10))-1),Mn=Math.floor(ft/Pn)),Mn=Math.max(Mn,1);const $n=Pn*Mn,kn=document.createElementNS("http://www.w3.org/2000/svg","g");kn.setAttribute("class","profile-x-vertical");const ai=document.createElementNS("http://www.w3.org/2000/svg","g"),yr=le/ft,Ui=Math.round((le-(ft-$n)*yr)/Mn);let Wr,Ns,Nt,So,os,ts;for(let Si=0;Si<=Mn+1;Si++)Wr=document.createElementNS("http://www.w3.org/2000/svg","text"),Wr.setAttribute("class","profile-x-graduation"),Wr.setAttribute("font-family","Verdana"),Wr.setAttribute("font-size","10px"),Wr.setAttribute("fill","#5E5E5E"),Si!==Mn+1&&(Wr.textContent=(Math.round(100*Si*Pn)/100).toLocaleString()),Ns=R+F+Si*Ui,Si===Mn+1&&(Ns=R+F+le),Wr.setAttribute("transform",`translate(${Ns}, ${$+15+5})`),Wr.setAttribute("text-anchor","middle"),kn.appendChild(Wr),Nt=Ns-.5,So=document.createElementNS("http://www.w3.org/2000/svg","g"),os=document.createElementNS("http://www.w3.org/2000/svg","path"),os.setAttribute("cs","100,100"),os.setAttribute("stroke-width","1"),os.setAttribute("stroke-opacity",0!==Si?"0.2":"1"),os.setAttribute("stroke","#000000"),os.setAttribute("fill","none"),os.setAttribute("d",`M${Nt},${$} L${Nt},0`),ts=document.createElementNS("http://www.w3.org/2000/svg","path"),ts.setAttribute("cs","100,100"),ts.setAttribute("stroke-width","1"),ts.setAttribute("stroke-opacity","1"),ts.setAttribute("stroke","#000000"),ts.setAttribute("fill","none"),ts.setAttribute("d",`M${Nt},${$} L${Nt},${$-5}`),ts.setAttribute("transform","translate(0, 5)"),So.appendChild(ts),So.appendChild(os),ai.appendChild(So);var $i=document.createElementNS("http://www.w3.org/2000/svg","text");$i.setAttribute("class","profile-x-legend"),$i.setAttribute("font-family","Verdana"),$i.setAttribute("font-size","11px"),$i.setAttribute("fill","#5E5E5E"),$i.textContent=`Distance (${E})`,$i.setAttribute("transform",`translate(${R+F+le/2}, ${$+15+17+3})`),$i.setAttribute("text-anchor","middle"),kn.appendChild($i),ie.appendChild(kn),ie.appendChild(ai);const Ss=document.createElementNS("http://www.w3.org/2000/svg","g");let Xn=1;"km"===E&&(Xn=1e3);let mo=this._dataDistToSvgX(a[0].dist/Xn,P,le,yr),Uo=this._dataZToSvgY(a[0].z,$,$e,Zt),zs=`M${mo},${Uo}`;for(let Si=1;Si<a.length;Si++)mo=this._dataDistToSvgX(a[Si].dist/Xn,P,le,yr),Uo=this._dataZToSvgY(a[Si].z,$,$e,Zt),zs+=` L${mo},${Uo}`;const co=document.createElementNS("http://www.w3.org/2000/svg","path");co.setAttribute("cs","100,100"),co.setAttribute("stroke-width","1"),co.setAttribute("stroke-opacity","1"),co.setAttribute("stroke","#0B6BA7"),co.setAttribute("fill","none"),co.setAttribute("d",zs),zs+=` L${mo},${$}`,zs+=` L${P-le},${$}`;const Kn=document.createElementNS("http://www.w3.org/2000/svg","path");Kn.setAttribute("cs","100,100"),Kn.setAttribute("stroke-width","1"),Kn.setAttribute("stroke-opacity","0"),Kn.setAttribute("stroke","#000000"),Kn.setAttribute("fill","#00B798"),Kn.setAttribute("fill-opacity","0.4"),Kn.setAttribute("d",zs),Ss.appendChild(co),Ss.appendChild(Kn),ie.appendChild(Ss);const ps=document.createElementNS("http://www.w3.org/2000/svg","g"),vo=document.createElementNS("http://www.w3.org/2000/svg","rect");vo.setAttribute("width",le),vo.setAttribute("height",$),vo.setAttribute("transform",`translate(${P-le},0)`),vo.setAttribute("visibility","hidden"),vo.setAttribute("pointer-events","all");const Vr=JSON.parse(JSON.stringify(a));Vr.sort(function(Si,Vo){return Si.dist-Vo.dist});const li=document.createElementNS("http://www.w3.org/2000/svg","line");li.setAttribute("id","focusLineX"),li.setAttribute("class","focusLine-default"),li.setAttribute("fill","none"),li.setAttribute("stroke","#F90"),li.setAttribute("stroke-width","0.5px"),li.setAttribute("visibility","hidden");const Mo=document.createElementNS("http://www.w3.org/2000/svg","line");Mo.setAttribute("id","focusLineY"),Mo.setAttribute("class","focusLine-default"),Mo.setAttribute("fill","none"),Mo.setAttribute("stroke","#F90"),Mo.setAttribute("stroke-width","0.5px"),Mo.setAttribute("visibility","hidden");const Qs=document.createElementNS("http://www.w3.org/2000/svg","circle");Qs.setAttribute("id","focusCircle"),Qs.setAttribute("r",4),Qs.setAttribute("class","circle-default focusCircle-default"),Qs.setAttribute("fill","#F90"),Qs.setAttribute("visibility","hidden"),ps.appendChild(Qs),ps.appendChild(li),ps.appendChild(Mo);const xs=document.createElementNS("http://www.w3.org/2000/svg","text"),ss=document.createElementNS("http://www.w3.org/2000/svg","tspan"),Fa=document.createElementNS("http://www.w3.org/2000/svg","tspan"),au=document.createElementNS("http://www.w3.org/2000/svg","tspan");xs.setAttribute("style","text-align:center; max-width:220px; font-size:10px; color:#000000; font-family:Verdana; z-index:50;"),xs.style.pointerEvents="none",xs.style.position="fixed",xs.setAttribute("class","tooltipInit"),xs.setAttribute("text-anchor","middle"),S.appendChild(xs),ss.setAttribute("class","altiPathValue"),ss.setAttribute("x","0"),ss.setAttribute("dy","-.7em"),Fa.setAttribute("class","altiPathValue"),Fa.setAttribute("x","0"),Fa.setAttribute("dy","1em"),au.setAttribute("class","altiPathCoords"),au.setAttribute("x","0"),au.setAttribute("dy","1em"),xs.appendChild(ss),s.currentSlope&&xs.appendChild(Fa),xs.appendChild(au);const as=document.createElementNS("http://www.w3.org/2000/svg","g");ps.appendChild(as);const ua=document.createElementNS("http://www.w3.org/2000/svg","path");ua.setAttribute("cs","100,100"),ua.setAttribute("fill","#FFFFFF"),ua.setAttribute("stroke","#CCCCCC"),ua.setAttribute("fill-opacity","0.8"),ua.setAttribute("stroke-width","1"),ua.setAttribute("stroke-opacity","1");const gs=document.createElementNS("http://www.w3.org/2000/svg","path");return gs.setAttribute("cs","100,100"),gs.setAttribute("fill","#FFFFFF"),gs.setAttribute("stroke","#000000"),gs.setAttribute("fill-opacity","0"),gs.setAttribute("stroke-width","1"),gs.setAttribute("stroke-opacity","0.4"),gs.setAttribute("transform","translate(1,1)"),as.appendChild(gs),as.appendChild(ua),as.appendChild(xs),as.setAttribute("class","tooltipInit"),as.style.pointerEvents="none",vo.addEventListener("mouseover",function(){li.setAttribute("visibility","visible"),Mo.setAttribute("visibility","visible"),Qs.setAttribute("visibility","visible"),r.__createProfileMarker(i,a[0]),xs.setAttribute("class","tooltipFadeIn"),as.setAttribute("class","tooltipFadeIn")}),vo.addEventListener("mouseout",function(){li.setAttribute("visibility","hidden"),Mo.setAttribute("visibility","hidden"),Qs.setAttribute("visibility","hidden"),r.__removeProfileMarker(i),xs.setAttribute("class","tooltipFadeOut"),as.setAttribute("class","tooltipFadeOut")}),vo.addEventListener("mousemove",function(Si){const Vo=ie.createSVGPoint();Vo.x=Si.clientX,Vo.y=Si.clientY;const xf=Vo.matrixTransform(ie.getScreenCTM().inverse()),Wl=this._svgXToDataDist(xf.x,P,le,yr)*Xn,Yl=Math.max(1,this._arrayBisect(Vr,Wl)),ql=a[Yl-1],Ea=a[Yl];let Fs=ql;Wl-ql.dist>Ea.dist-Wl&&(Fs=Ea);const lu=this._dataDistToSvgX(Fs.dist/Xn,P,le,yr),Au=this._dataZToSvgY(Fs.z,$,$e,Zt);Qs.setAttribute("cx",lu),Qs.setAttribute("cy",Au),li.setAttribute("x1",lu),li.setAttribute("y1",$),li.setAttribute("x2",lu),li.setAttribute("y2",0),Mo.setAttribute("x1",R+F),Mo.setAttribute("y1",Au),Mo.setAttribute("x2",le+R+F),Mo.setAttribute("y2",Au),r.__updateProfileMarker(i,Fs);const cl=`Altitude : ${Fs.z.toLocaleString()} m`,ms=`Pente : ${Fs.slope} %`,zo=`(lat : ${Fs.lat.toLocaleString()} / lon : ${Fs.lon.toLocaleString()})`;ss.innerHTML=cl,Fa.innerHTML=ms,au.innerHTML=zo;const ls=Math.max(this._getTextWidth(zo,au),this._getTextWidth(cl,ss));let ca;Fs.dist>m*Xn/2?(ca=`M -0.5 -0.5 l -6 6 l 0 16 l -${ls+10} 0 l 0 -44 l ${ls+10} 0 l 0 16 l 6 6`,xs.setAttribute("transform",`translate(${-(ls/2+12)},0)`)):Fs.dist<=m*Xn/2&&(ca=`M -0.5 -0.5 l 6 6 l 0 16 l ${ls+10} 0 l 0 -44 l -${ls+10} 0 l 0 16 l -6 6`,xs.setAttribute("transform",`translate(${ls/2+12},0)`)),ua.setAttribute("d",ca),gs.setAttribute("d",ca),as.setAttribute("transform",`translate(${lu},${Au})`),as.style.transform=`translate(${lu}px,${Au}px)`}.bind(this)),ps.appendChild(vo),ie.appendChild(ps),S.appendChild(ie),t},displayProfileRaw:function(n,t,e,r){if(t){for(;t.firstChild;)t.removeChild(t.firstChild);var i=n&&n.points?n.points:{},o=document.createElement("textarea");return o.id="profilElevationResults",o.rows=10,o.cols=50,o.style.width="100%",o.innerHTML=JSON.stringify(i,void 0,4),o.addEventListener("mouseover",function(s){r.__customRawProfileMouseOverEvent(e,s)}),t.appendChild(o),t}},displayProfileLibD3:function(n,t,e,r){var i=e;if(t&&n){for(;t.firstChild;)t.removeChild(t.firstChild);var o=n.points;if(n.distance>2e3){n.unit="km";for(let J=0;J<o.length;J++)o[J].dist/=1e3}var s=i.options.displayProfileOptions,a={top:20,right:20,bottom:30,left:40},c=t.clientWidth-a.left-a.right,h=t.clientHeight-a.top-a.bottom,p=d3.scale.linear().range([0,c]),m=d3.scale.linear().range([h,0]),E=d3.svg.axis().scale(p).orient("bottom").ticks(5),S=d3.svg.axis().scale(m).orient("left").ticks(5),x=d3.svg.line().interpolate("basis").x(function(J){return p(J.dist)}).y(function(J){return m(J.z)}),P=d3.svg.area().interpolate("basis").x(function(J){return p(J.dist)}).y0(h).y1(function(J){return m(J.z)}),R=d3.select(t).append("svg").attr("width",c+a.left+a.right).attr("height",h+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),F=d3.extent(o,function(J){return J.dist});p.domain(F);var D=[0,d3.max(o,function(J){return J.z})];m.domain(D),R.append("path").datum(o).attr("class","area-d3").attr("d",P),R.append("g").attr("class","x axis-d3").attr("transform","translate(0,"+h+")").call(E).append("text").attr("y",-15).attr("dy",".71em").attr("x",c).text("Distance ("+n.unit+")"),R.append("g").attr("class","y axis-d3").call(S).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").text("Altitude (m)"),R.append("g").attr("class","grid-d3 vertical").attr("transform","translate(0,"+h+")").call(E.orient("bottom").tickSize(-h,0,0).tickFormat("")),R.append("g").attr("class","grid-d3 horizontal").call(S.orient("left").tickSize(-c,0,0).tickFormat("")),R.append("path").datum(o).attr("class","line-d3").attr("d",x),R.selectAll("circle").data(o).enter().append("circle").attr("cx",function(J){return p(J.dist)}).attr("cy",function(J){return m(J.z)}).attr("r",0).attr("class","circle-d3");var j=R.append("g").style("display","none");j.append("line").attr("id","focusLineX").attr("class","focusLine-d3"),j.append("line").attr("id","focusLineY").attr("class","focusLine-d3"),j.append("circle").attr("id","focusCircle").attr("r",4).attr("class","circle-d3 focusCircle-d3");var G=d3.select(t).append("div").attr("class","tooltip-d3").style("opacity",0),X=d3.bisector(function(J){return J.dist}).left;return R.append("rect").attr("class","overlay-d3").attr("width",c).attr("height",h).on("mouseover",function(){j.style("display",null),r.__createProfileMarker(i,o[0])}).on("mouseout",function(){j.style("display","none"),r.__removeProfileMarker(i),G.transition().duration(500).style("opacity",0)}).on("mousemove",function(){var J=d3.mouse(this),$=p.invert(J[0]),le=Math.max(1,X(o,$)),ie=o[le-1],Fe=o[le],Ce=$-ie[0]>Fe[0]-$?Fe:ie,$e=p(Ce.dist),ot=m(Ce.z);j.select("#focusCircle").attr("cx",$e).attr("cy",ot),j.select("#focusLineX").attr("x1",$e).attr("y1",m(D[0])).attr("x2",$e).attr("y2",m(D[1])),j.select("#focusLineY").attr("x1",p(F[0])).attr("y1",ot).attr("x2",p(F[1])).attr("y2",ot),r.__updateProfileMarker(i,Ce),G.transition().duration(200).style("opacity",.9);var st="";st+=" Altitude : "+Ce.z+" m",s.currentSlope&&(st+="<br/> Pente : "+Ce.slope+" %"),G.html(st+="<br/> (Lat : "+Ce.lat+"/ Lon : "+Ce.lon+")").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}),R}},displayProfileLibAmCharts:function(n,t,e,r){var i=e;if(t&&n){var o=n.points,s="<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>";if(i.options.displayProfileOptions.currentSlope&&(s+="<span class='altiPathValue'>Pente : [[slope]] %</span><br/>"),s+="<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>",AmCharts.addInitHandler(function(){}),n.distance>2e3){n.unit="km";for(let E=0;E<o.length;E++)o[E].dist/=1e3}for(let E=0;E<o.length;E++){var c=o[E].dist,h=100;c>100?h=1:c>10&&(h=10),c=Math.round(c*h)/h,o[E].dist=c}var m=AmCharts.makeChart(t,{type:"serial",pathToImages:"http://cdn.amcharts.com/lib/3/images/",categoryField:"dist",autoMarginOffset:0,marginRight:10,marginTop:10,startDuration:0,color:"#5E5E5E",fontSize:8,theme:"light",thousandsSeparator:"",numberFormatter:{precision:-1,decimalSeparator:",",thousandsSeparator:" "},categoryAxis:{color:"#5E5E5E",gridPosition:"start",minHorizontalGap:40,tickPosition:"start",title:"Distance ("+n.unit+")",titleColor:"#5E5E5E",labelOffset:0,startOnAxis:!0},chartCursor:{animationDuration:0,bulletsEnabled:!0,bulletSize:10,categoryBalloonEnabled:!1,cursorColor:"#F90",graphBulletAlpha:1,graphBulletSize:1,zoomable:!1},trendLines:[],graphs:[{balloonColor:"#CCCCCC",balloonText:s,bullet:"round",bulletAlpha:0,bulletBorderColor:"#FFF",bulletBorderThickness:2,bulletColor:"#F90",bulletSize:6,hidden:!1,id:"AmGraph-1",fillAlphas:.4,fillColors:"#C77A04",lineAlpha:1,lineColor:"#C77A04",lineThickness:1,title:"Altitude",valueField:"z"}],guides:[],valueAxes:[{id:"ValueAxis-1",minVerticalGap:20,title:"Altitude (m)"}],balloon:{borderColor:"#CCCCCC",borderThickness:1,fillColor:"#FFFFFF",showBullet:!0},titles:[],allLabels:[],dataProvider:o});return m.addListener("changed",function(E){r.__updateProfileMarker(i,E.chart.dataProvider[E.index])}),m}}};var si=Ki_getLogger("elevationpath"),nV=function(n){function t(e){if(si.trace("ElevationPath()"),e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="ElevationPath",this._uid=ni.generate(),this._showContainer=null,this._pictoContainer=null,this._panelContainer=null,this._profileContainer=null,this._waitingContainer=null,this._infoContainer=null,this._timerHdlr=null,this._drawStyleStart=null,this._drawStyleFinish=null,this._markerStyle=null,this._profile=null,this._data={},this._measureSource=null,this._measureVector=null,this._measureDraw=null,this._lastSketch=null,this._currentSketch=null,this._marker=null,this._noRightManagement=!1,this._initialize(e),this._checkRightsManagement(),this._container=e.element?e.element:this._initializeContainer(),n.call(this,{element:this._container,target:e.target,render:e.render})}return n&&(t.__proto__=n),t.prototype=Object.create(n.prototype,{}),vr.assign(t.prototype,eoe),t.__removeProfileMarker=function(e){var r=e;r._marker&&(r._measureSource.removeFeature(r._marker),r._marker=null)},t.__createProfileMarker=function(e,r){var i=e;i._marker&&(i._measureSource.removeFeature(i._marker),i._marker=null);var s=i.getMap().getView().getProjection(),a=Qi([r.lon,r.lat],"EPSG:4326",s),c=i._measureSource.getFeatures()[0].getGeometry().getClosestPoint(a),h=new nc(c);i._marker=new jd({geometry:h}),si.trace(h),i._marker.setStyle(i._markerStyle),i._measureSource.addFeature(i._marker)},t.__updateProfileMarker=function(e,r){var i=e;t.__removeProfileMarker(i),t.__createProfileMarker(i,r)},t.__customRawProfileOperation=function(e,r){si.log("__customRawProfileOperation");for(var i=e,o=r.points,s=i.getMap().getView().getProjection(),a=0;a<o.length;a++){var c=o[a],h=Qi([c.lon,c.lat],"EPSG:4326",s),p=new nc(h);i._marker=new jd({geometry:p}),si.trace(p);var m=t.DEFAULT_STYLES.RESULTS,E=new Bd({radius:m.imageRadius,stroke:new Gi({color:m.imageStrokeColor,width:m.imageStrokeWidth}),fill:new ro({color:m.imageFillColor})});i._marker.setStyle(new br({image:E})),i._measureSource.addFeature(i._marker)}},t.__customRawProfileMouseOverEvent=function(e,r){si.log("__customRawProfileMouseOverEvent",e,r)},t.DISPLAY_PROFILE_LIB_AMCHARTS=function(e,r,i){if(si.trace("ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS"),"undefined"!=typeof AmCharts){var o=_2.displayProfileLibAmCharts(e,r,i,t);o&&(this._profile=o)}else si.log("Lib. AmCharts is not loaded !")},t.DISPLAY_PROFILE_LIB_D3=function(e,r,i){if(si.trace("ElevationPath.DISPLAY_PROFILE_LIB_D3"),"undefined"!=typeof d3){var o=_2.displayProfileLibD3(e,r,i,t);o&&(this._profile=o)}else si.log("Lib. D3 is not loaded !")},t.DISPLAY_PROFILE_RAW=function(e,r,i){si.trace("ElevationPath.DISPLAY_PROFILE_RAW");var o=_2.displayProfileRaw(e,r,i,t);o&&(this._profile=o)},t.DISPLAY_PROFILE_BY_DEFAULT=function(e,r,i){si.trace("ElevationPath.DISPLAY_PROFILE_BY_DEFAULT");var o=_2.displayProfileByDefault(e,r,i,t);o&&(this._profile=o)},t.DEFAULT_STYLES={MARKER:new wu({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAsCAYAAAAATWqyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABTtJREFUeNq8WGtsFUUU/rb3gtdCAykFG9AUDTQUKimhxUewEusrJYoBo4FfEgoqotHERH6oP9TGmJhIrIlWAf9hjAaEiME2pgFfVVpFii8sWqIQLLSx3EJLW7p+Z2Z2b2l7d/b23vZLTmZ2duacb2fmnDk7DlKA67rXs1hJKacsohRQppjXFygnKT9TDlH2O47zFzIFGnco91EOuqnjoBnr2Ow4FhIlLN6m3DykFTh3BGj/Doj/CfSe082xPCDnBmDWTUBeyXDVjZTHOUNHUiZCEs+weI0ySTV0/w0c2wa07gIungn+vOx8YN46oPhpYOp1Xms/5TmSeSMUERKImFnYqBoGuPRNL5LEW8BgX2rrmjWZZLYApS8BUW8r4T0zO5eTEjFr+S6lSjV0HgPqVwNdf6S30abNB+7aDeQWey3bKZtIxvU5DxvyrE/izJfAvuXpkxCIDtElOjWqjK2RM8LZWMbiG0oEnUc5kB7a14WMYvI04H56du5ieZKluZWz8r0/IyQh5TuKRH8cqFuTeRIC0Sm6xYbYok1j21+ahyhLVO3wC8D5VowbRLfY0FhibOulIavDLEoRZyD8sJDeMWBXKG5ZsIobsdDsg+OMq3u1m1u9KQo8zP45EqjRxOUpk6i50IRl4FuGjpZtwUoiMYa314GFj/EzIsN8n8v+C1e4kfvwcm+wnhsZY27xQ8oiWZpKrWRQB6tAElfxpKnjsCdGklDzG9HvpI/0DYLYEpsalVnmAAM6fgR62oMHl70C5N9mn3rpI32DILbEpkZ5ljlFgbPNFtebzij5VPhNKX1lTBASNtXSzPZ3cxCuvVOH7FTCu4yxeZDGbCES0z5+PniQ3uGpwTYmYTOWCPGTpgYP6u9OnYhtzBCbQkSH0NiM4EEdP6VOxDYmYbNLiJxQ1elFwYPaG3XQCn3QHddjgpCweUKI6K2bvzw4YROf//rJob6fZl/H2FRoFiINfqo3qyzYwD8MVIeYLw32J+8j76SP9A2C2BKbGg1CZL+EF/W4YKP9a3/fCeyhkrY9DOOXEu1SlzZ5J31sSNjqURm/OfQkY9qgvkYOvXhbuH0g505Oga7HT9rPF9+t5+pDL0ulwzt46FV5ROax+JUSRRtP0LoHMK64+xNg7iqVEVOKSKRVxRGpsKhRnaRD4SPjR0J0axKCGmP7ilQxm4X8d8xXmfvHJZlPkCR3WfODl9FLMlxCIhevSJ5Nwzo1XdKxYpe3hpmB6BKdmoS43VqPxIgsni+aWOg8biZ3f+nLmSMiuvKWek/P01az7QdLyNVT7lC/l59WAKcb0iMxhzpW1nvmvpDtSiKD1l9OkpnDgv8UyMWFU9wvTP8vdY6NhJwnD1JVtso2OiiLSeL0iJUbNfg6zikVVwRTyOn2HWOfjfLtHgnBhtFIJCViyNDZUatdmnGlaFPqJIoe1WM1aqlz71ivJbLNobgAA9zgu7nZ/vstHAk5WVdzaPRqmGC5lER6kjpV4OWJdq+1kkshSk4VH9izcy/bV66qSPQZV+0J9G7rTY6+XNmqHmYwyJVV24kse1X31dhKHdasygkzy+a64oC4nWr47F4e858nSbLv4V/KAe9JKpVDrx/SImLIXMOiRUKdujESl+49O8xVZxpXzVc/C/I/RxL/hgq8YYkYhev9q6kVO4d9B+sr3vdICNaHJTHWW8Ya/87wqy2uWwstUk/gTYw3aCRGOarMDfS67kfFWqSuIe9imAjQEC272nJHixYNaSvGRIIGN49ywbsZEw1zI11N6TZSHeaGORn+F2AAJtRIMx4t+hUAAAAASUVORK5CYII=",anchor:[.5,1],snapToPixel:!0}),RESULTS:{imageRadius:5,imageFillColor:"rgba(128, 128, 128, 0.2)",imageStrokeColor:"rgba(0, 0, 0, 0.7)",imageStrokeWidth:2}},t.prototype.constructor=t,t.prototype.setMap=function(e){si.trace("ElevationPath::setMap"),e&&(this.options.active&&(null===this._profile&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(e),this._addMeasureInteraction(e)),this.options.target||y2.add(e,this)),n.prototype.setMap.call(this,e)},t.prototype.getActive=function(){return si.trace("ElevationPath::getActive"),this.options.active},t.prototype.setActive=function(e){si.trace("ElevationPath::setActive"),this.options.active=e},t.prototype.clean=function(){si.trace("ElevationPath::clean");var e=this.getMap();this._panelContainer.style.display="none",this._showContainer.checked=!1,this._removeProfile(),this._removeMeasure(),this._removeMeasureInteraction(e)},t.prototype._removeMeasure=function(){if(this._lastSketch=null,this._currentSketch=null,this._measureSource){this._marker&&(this._measureSource.removeFeature(this._marker),this._marker=null);for(var e=this._measureSource.getFeatures(),r=0;r<e.length;r++)this._measureSource.removeFeature(e[r])}},t.prototype._removeProfile=function(){if(this._profile=null,this._profileContainer)for(;this._profileContainer.firstChild;)this._profileContainer.removeChild(this._profileContainer.firstChild)},t.prototype._initialize=function(e){si.trace("ElevationPath::_initialize : ",e),this.options={target:null,render:null,active:!1,apiKey:null,elevationOptions:{},layerDescription:{title:"Profil altim\xe9trique",description:"Mon profil altim\xe9trique"},displayProfileOptions:{totalDistance:!0,greaterSlope:!0,meanSlope:!0,ascendingElevation:!0,descendingElevation:!0,currentSlope:!0,apply:null,target:null},stylesOptions:{profile:null,draw:null,marker:null}},vr.mergeParams(this.options,e),this.options.target=e.target||null,this.options.apiKey=e.apiKey;var r=e.displayProfileOptions||{},i=r.apply;this.options.displayProfileOptions.apply="function"==typeof i?i:t.DISPLAY_PROFILE_BY_DEFAULT;var o=r.target;this.options.displayProfileOptions.target=void 0!==o?o:null;var s=e.stylesOptions||{};this.options.stylesOptions.draw=s.draw||{},this._createStylingDraw(),this.options.stylesOptions.marker=s.marker||{},this._createStylingMarker()},t.prototype._initializeContainer=function(){si.trace("ElevationPath::_initializeContainer : ",this._uid);var e=this._createMainContainerElement(),r=this._showContainer=this._createShowElevationPathElement();e.appendChild(r);var i=this._pictoContainer=this._createShowElevationPathPictoElement();e.appendChild(i),this.options.active&&(this._showContainer.checked=!0);var o=this._panelContainer=this._createElevationPathPanelElement(),s=this._createElevationPathPanelHeaderElement();o.appendChild(s);var a=this._profileContainer=this._createElevationPathPanelProfilElement();o.appendChild(a);var c=this._waitingContainer=this._createElevationPathWaitingElement();o.appendChild(c);var h=this._infoContainer=this._createElevationPathInformationsElement();return o.appendChild(h),null===this.options.displayProfileOptions.target&&e.appendChild(o),e},t.prototype._checkRightsManagement=function(){si.trace("ElevationPath::_checkRightsManagement");var e=zp_check({key:this.options.apiKey,resources:["SERVICE_CALCUL_ALTIMETRIQUE_RSC"],services:["Elevation"]});e?this.options.apiKey||(this.options.apiKey=e.key):this._noRightManagement=!0},t.prototype._createStylingMarker=function(){si.trace("ElevationPath::_createStylingMarker ");var e=t.DEFAULT_STYLES.MARKER;si.trace("style marker",e),this.options.stylesOptions.marker instanceof tD&&(e=this.options.stylesOptions.marker),this._markerStyle=new br({image:e})},t.prototype._createStylingDraw=function(){si.trace("ElevationPath::_createStylingDraw");var e=this.options.stylesOptions.draw;si.trace("style start",e.start);var r={image:jS.DEFAULT_POINTER_STYLE,stroke:jS.DEFAULT_DRAW_START_STYLE.getStroke()};e.hasOwnProperty("pointer")&&e.pointer instanceof tD&&(r.image=e.pointer),e.hasOwnProperty("start")&&e.start instanceof Gi&&(r.stroke=e.start),this._drawStyleStart=new br(r),si.trace("style finish",e.finish);var i={stroke:jS.DEFAULT_DRAW_FINISH_STYLE.getStroke()};e.hasOwnProperty("finish")&&e.finish instanceof Gi&&(i.stroke=e.finish),this._drawStyleFinish=new br(i)},t.prototype._createStylingProfile=function(){si.trace("ElevationPath::_createStylingProfile");var e=this.options.stylesOptions.profile;si.trace("style profile",e);var r=t.DEFAULT_STYLES.PROFILE;Object.keys(r).forEach(i=>{if(e.hasOwnProperty(i)){var o=r[i];"object"==typeof o&&(vr.mergeParams(o,e[i]),e[i]=o)}else e[i]=r[i]})},t.prototype._initMeasureInteraction=function(e){si.trace("ElevationPath::_initMeasureInteraction()"),e&&(this._measureSource=new bu,this._measureVector=new rc({source:this._measureSource,style:this._drawStyleFinish}),this._measureVector.gpResultLayerId="measure",e.addLayer(this._measureVector),e.getControls().forEach(r=>{if(r instanceof Sm){var i=this._measureVector.gpLayerId;r._layers[i].title===i&&r.addLayer(this._measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}}))},t.prototype._addMeasureInteraction=function(e){si.trace("ElevationPath::_addMeasureInteraction()"),e&&(this._measureDraw=new wh({source:this._measureSource,type:"LineString",style:this._drawStyleStart,stopClick:!0}),this._measureDraw.setProperties({name:"ElevationPath",source:this}),e.addInteraction(this._measureDraw),this._measureDraw.on("drawstart",r=>{si.trace("drawstart",r),null!==this._marker&&(this._measureSource.removeFeature(this._marker),this._marker=null),null!==this._lastSketch&&(this._measureSource.removeFeature(this._lastSketch),this._lastSketch=null),this._currentSketch=r.feature;for(var i=this._measureSource.getFeatures(),o=0;o<i.length;o++)this._measureSource.removeFeature(i[o]);this.dispatchEvent("elevationpath:drawstart")}),this._measureDraw.on("drawend",r=>{si.trace("drawend",r),this.dispatchEvent("elevationpath:drawend"),this._lastSketch=this._currentSketch,void 0===this.options.elevationOptions.onSuccess&&null===this.options.displayProfileOptions.target&&(this._panelContainer.style.display="block"),this._measureDraw.setActive(!1),this._requestService()}))},t.prototype._removeMeasureInteraction=function(e){si.trace("ElevationPath::_removeMeasureInteraction()"),e&&(this._measureVector&&(e.removeLayer(this._measureVector),this._measureVector=null),this._measureDraw&&(e.removeInteraction(this._measureDraw),this._measureDraw=null))},t.prototype._getGeometry=function(){if(null!==this._currentSketch){for(var e=[],i=this.getMap().getView().getProjection(),o="EPSG:4326",s=this._currentSketch.getGeometry().getCoordinates(),a=0;a<s.length;a++){var c=s[a],h=c;i!==o&&(h=Qi(c,i,o)),e.push({lon:Math.round(1e8*h[0])/1e8,lat:Math.round(1e8*h[1])/1e8})}return e}si.warn("Current Feature undefined !?")},t.prototype._getLength=function(){if(null!==this._currentSketch){for(var e=0,i=this.getMap().getView().getProjection(),o="EPSG:4326",s=this._currentSketch.getGeometry().getCoordinates(),a=0,c=s.length-1;a<c;++a){var h=Qi(s[a],i,o),p=Qi(s[a+1],i,o);h[0]=Math.round(1e8*h[0])/1e8,h[1]=Math.round(1e8*h[1])/1e8,p[0]=Math.round(1e8*p[0])/1e8,p[1]=Math.round(1e8*p[1])/1e8,e+=cm(h,p)}return e}si.warn("Current Feature undefined !?")},t.prototype._getSketchCoords=function(){if(null!==this._currentSketch){for(var r=this.getMap().getView().getProjection(),o=[],s=this._currentSketch.getGeometry().getCoordinates(),a=0;a<s.length;a++){var c=Qi(s[a],r,"EPSG:4326");c[0]=Math.round(1e8*c[0])/1e8,c[1]=Math.round(1e8*c[1])/1e8,o.push(c)}return o}si.warn("Current Feature undefined !?")},t.prototype._requestService=function(){si.trace("ElevationPath::_requestService");var e=this._getGeometry();if(si.trace("geometry",e),e)if(this._noRightManagement)si.warn("no rights to this service !");else{var r={};vr.mergeParams(r,this.options.elevationOptions),vr.mergeParams(r,{apiKey:r.apiKey||this.options.apiKey}),"boolean"!=typeof r.ssl&&(r.ssl="boolean"!=typeof this.options.ssl||this.options.ssl),vr.mergeParams(r,{ssl:r.ssl});var i=this;if(vr.mergeParams(r,{onSuccess:this.options.elevationOptions.onSuccess||function(E){si.trace(E),E&&(i._panelContainer.style.display="block",i._displayProfile(E.elevations),i._waitingContainer.className="GPelevationPathCalcWaitingContainerHidden",i._waiting=!1,i._measureDraw.setActive(!0))},onFailure:this.options.elevationOptions.onFailure||function(E){i._panelContainer.style.display="none",si.error(E.message),i._waitingContainer.className="GPelevationPathCalcWaitingContainerHidden",i._waiting=!1,i._measureDraw.setActive(!0)}}),!r.sampling){var c,h=this._getLength();si.trace("length",h);var p=Math.max(50,Math.floor(h)/5);c=p>200?200:Math.floor(p),this._getSketchCoords().length>100&&(c=0)}c>0&&vr.mergeParams(r,{sampling:c}),vr.mergeParams(r,{positions:e}),si.trace("options du service",r),this._waitingContainer.className="GPelevationPathCalcWaitingContainerVisible",aa.Services.getAltitude(r)}else si.warn("missing geometry !?")},t.prototype._computeElevationMeasure=function(e){si.trace("ElevationPath::_computeElevationMeasure",e);var r=e,o=this._getSketchCoords(),s=0,a=0,c=o[1];r[0].dist=0,r[0].slope=0,r[0].lat=Math.round(1e4*r[0].lat)/1e4,r[0].lon=Math.round(1e4*r[0].lon)/1e4;for(var h=0,p=0,m=0,E=0,S=0,x=0,P=[],R=1;R<r.length;R++){var F=[r[R].lon,r[R].lat],D=a+cm(F,o[s]),j=D-S;F[0]===c[0]&&F[1]===c[1]&&(s++,a=D,R!==r.length-1&&(c=o[s+1]));var G=r[R].z,X=r[R-1].z;G<0&&(G=0),X<0&&(X=0);var J=G-X;J<0?(h+=j,E+=J):J>0&&(p+=j,m+=J),S=D,r[R].dist=D,P.push(D),x+=J?Math.abs(Math.round(J/j*100)):0,r[R].slope=J?Math.abs(Math.round(J/j*100)):0;var $=r[R].slope;r[R].color=$>15&&$<30?"#005b4c":$>30&&$<45?"#00362d":$>45?"#00120f":"#00B798",r[R].lat=Math.round(1e4*r[R].lat)/1e4,r[R].lon=Math.round(1e4*r[R].lon)/1e4}si.trace("List Distances",P);for(var le=r[0].z,ie=r[0].z,Fe=r[0].slope,Ce=0;Ce<r.length;Ce++){var $e=r[Ce];$e.z<-100&&($e.z=0),$e.z>ie&&(ie=$e.z),$e.z<le&&(le=$e.z),$e.slope>Fe&&(Fe=$e.slope)}return{greaterSlope:Fe,meanSlope:Math.round(x/r.length),distancePlus:p,distanceMinus:h,ascendingElevation:m,descendingElevation:E,altMin:le.toLocaleString(),altMax:ie.toLocaleString(),distance:this._getLength(),unit:"m",points:r}},t.prototype._displayProfile=function(e){si.trace("ElevationPath::_displayProfile",e),this._data&&(this._data={});var r=this._data=this._computeElevationMeasure(e);this._updateInfoContainer();var i=this.options.displayProfileOptions.target;i&&i.appendChild(this._panelContainer),this.options.displayProfileOptions.apply.call(this,r,i=this._profileContainer,this);var a=this.options.displayProfileOptions,c=document.getElementById("GPelevationPathPanelInfo-"+this._uid);c&&(a.totalDistance||a.greaterSlope||a.meanSlope||a.ascendingElevation||a.descendingElevation)&&(c.style.display="block")},t.prototype._updateInfoContainer=function(){si.trace("ElevationPath::_updateInfoContainer");var e=this.options.displayProfileOptions.totalDistance,r=this.options.displayProfileOptions.meanSlope,i=this.options.displayProfileOptions.greaterSlope,o=this.options.displayProfileOptions.ascendingElevation,s=this.options.displayProfileOptions.descendingElevation,a=this._infoContainer;if(a.childElementCount)for(;a.firstChild;)a.removeChild(a.firstChild);e&&this._addElevationPathInformationsItem("Distance totale : "+Math.round(this._data.distance).toLocaleString()+" m"),o&&this._addElevationPathInformationsItem("D\xe9nivel\xe9 positif : "+this._data.ascendingElevation.toLocaleString()+" m"),s&&this._addElevationPathInformationsItem("D\xe9nivel\xe9 n\xe9gatif : "+this._data.descendingElevation.toLocaleString()+" m"),r&&this._addElevationPathInformationsItem("Pente moyenne : "+this._data.meanSlope.toLocaleString()+" %"),i&&this._addElevationPathInformationsItem("Plus forte pente : "+this._data.greaterSlope.toLocaleString()+" %")},t.prototype.onShowElevationPathClick=function(){var e=this.getMap();GL.unset(e,{current:"ElevationPath"}),this._showContainer.checked?(this._panelContainer.style.display="none",this._removeMeasure(),this._removeProfile(),this._removeMeasureInteraction(e)):(null===this._profile&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(e),this._addMeasureInteraction(e))},t.prototype.onOpenElevationPathInfoClick=function(){var e=this._infoContainer;"GPelevationPathInformationsContainerVisible"===e.className?(clearTimeout(this._timerHdlr),e.className="GPelevationPathInformationsContainerHidden"):e.className="GPelevationPathInformationsContainerVisible",this._timerHdlr=setTimeout(function(){e.className="GPelevationPathInformationsContainerHidden"},4e3)},t}(Su);const noe=nV;window.ol&&window.ol.control&&(window.ol.control.ElevationPath=nV);const ioe={_addUID:function(n){return this._uid?n+"-"+this._uid:n},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPmeasureLength"),n.className="GPwidget",n},_createShowMeasureLengthElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowMeasureLength"),n.type="checkbox",n},_createShowMeasureLengthPictoElement:function(){var n=this,t=document.createElement("label");t.id=this._addUID("GPshowMeasureLengthPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowMeasureLength"),t.title="Mesurer une distance",t.addEventListener?t.addEventListener("click",function(r){n.onShowMeasureLengthClick(r)}):t.attachEvent&&t.attachEvent("onclick",function(r){n.onShowMeasureLengthClick(r)});var e=document.createElement("span");return e.id=this._addUID("GPshowMeasureLengthOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t}};var ob=Ki_getLogger("measurelength"),rV=function(n){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureLength",this._uid=ni.generate(),this._showContainer=null,this._pictoContainer=null,this._initialize(e);var r=e.element?e.element:this._initializeContainer();n.call(this,{element:r,target:e.target,render:e.render})}return n&&(t.__proto__=n),t.prototype=Object.create(n.prototype,{}),vr.assign(t.prototype,jS),vr.assign(t.prototype,ioe),t.prototype.constructor=t,t.prototype.setMap=function(e){ob.trace("setMap()");var r=this.CLASSNAME;e?this.options.target||y2.add(e,this):this.clean(),this.tools[r].push({instance:e?this:null,active:!1,map:e?e.getTargetElement().id:null});var i="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;i&&(i.gpShareMeasures||(i.gpShareMeasures={}),i.gpShareMeasures[r]=this.tools[r]),n.prototype.setMap.call(this,e)},t.prototype._initialize=function(e){ob.trace("call MeasureLength::_initialize() : ",e),this.options={},this.options.geodesic=void 0===e.geodesic||e.geodesic,this.options.target=void 0!==e.target?e.target:null,this.options.render=void 0!==e.render?e.render:null,this.options.layerDescription=void 0!==e.layerDescription?e.layerDescription:{title:"Mesures de distance",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)},t.prototype._initializeContainer=function(){ob.trace("call MeasureLength::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),r=this._showContainer=this._createShowMeasureLengthElement();e.appendChild(r),this._showContainer.checked=!1;var i=this._pictoContainer=this._createShowMeasureLengthPictoElement();return e.appendChild(i),e},t.prototype.addMeasureEvents=function(){ob.trace("call MeasureLength::addMeasureEvents()");var e=this.getMap();e.on("singleclick",r=>this.onPointerMoveHandler(r)),e.on("pointermove",r=>this.onPointerMoveHandler(r))},t.prototype.removeMeasureEvents=function(){ob.trace("call MeasureLength::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",r=>this.onPointerMoveHandle(r)),e.un("pointermove",r=>this.onPointerMoveHandler(r))},t.prototype.format=function(e){ob.trace("call MeasureLength::format()");var i,r=this.getMap();if(this.options.geodesic){var o=e.getCoordinates();i=0;for(var s=r.getView().getProjection(),a=0,c=o.length-1;a<c;++a)i+=cm(Qi(o[a],s,"EPSG:4326"),Qi(o[a+1],s,"EPSG:4326"))}else i=Math.round(100*e.getLength())/100;return i>1e3?Math.round(i/1e3*100)/100+" km":Math.round(100*i)/100+" m"},t.prototype.onShowMeasureLengthClick=function(e){ob.trace("call MeasureLength::onShowMeasureLengthClick()",e),this.onShowMeasureClick(e,"LineString")},t}(Su);const ooe=rV;window.ol&&window.ol.control&&(window.ol.control.MeasureLength=rV);const aoe={_addUID:function(n){return this._uid?n+"-"+this._uid:n},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPmeasureArea"),n.className="GPwidget",n},_createShowMeasureAreaElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowMeasureArea"),n.type="checkbox",n},_createShowMeasureAreaPictoElement:function(){var n=this,t=document.createElement("label");t.id=this._addUID("GPshowMeasureAreaPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowMeasureArea"),t.title="Mesurer une surface",t.addEventListener?t.addEventListener("click",function(r){n.onShowMeasureAreaClick(r)}):t.attachEvent&&t.attachEvent("onclick",function(r){n.onShowMeasureAreaClick(r)});var e=document.createElement("span");return e.id=this._addUID("GPshowMeasureAreaOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t}};var sb=Ki_getLogger("measurearea"),iV=function(n){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureArea",this._uid=ni.generate(),this._showContainer=null,this._pictoContainer=null,this._initialize(e);var r=e.element?e.element:this._initializeContainer();n.call(this,{element:r,target:e.target,render:e.render})}return n&&(t.__proto__=n),t.prototype=Object.create(n.prototype,{}),vr.assign(t.prototype,jS),vr.assign(t.prototype,aoe),t.prototype.constructor=t,t.prototype.setMap=function(e){sb.trace("setMap()");var r=this.CLASSNAME;e?this.options.target||y2.add(e,this):this.clean(),this.tools[r].push({instance:e?this:null,active:!1,map:e?e.getTargetElement().id:null});var i="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;i&&(i.gpShareMeasures||(i.gpShareMeasures={}),i.gpShareMeasures[r]=this.tools[r]),n.prototype.setMap.call(this,e)},t.prototype._initialize=function(e){sb.trace("call MeasureArea::_initialize() : ",e),this.options={},this.options.geodesic=void 0===e.geodesic||e.geodesic,this.options.target=void 0!==e.target?e.target:null,this.options.render=void 0!==e.render?e.render:null,this.options.layerDescription=void 0!==e.layerDescription?e.layerDescription:{title:"Mesures de surface",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)},t.prototype._initializeContainer=function(){sb.trace("call MeasureArea::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),r=this._showContainer=this._createShowMeasureAreaElement();e.appendChild(r),this._showContainer.checked=!1;var i=this._pictoContainer=this._createShowMeasureAreaPictoElement();return e.appendChild(i),e},t.prototype.addMeasureEvents=function(){sb.trace("call MeasureArea::addMeasureEvents()");var e=this.getMap();e.on("singleclick",r=>this.onPointerMoveHandler(r)),e.on("pointermove",r=>this.onPointerMoveHandler(r))},t.prototype.removeMeasureEvents=function(){sb.trace("call MeasureArea::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",r=>this.onPointerMoveHandler(r)),e.un("pointermove",r=>this.onPointerMoveHandler(r))},t.prototype.format=function(e){var r;if(sb.trace("call MeasureArea::format()"),this.options.geodesic){var o=e.clone().getLinearRing(0).getCoordinates();r=Math.abs(sa(new Yc([o])))}else r=e.getArea();return r>1e6?Math.round(r/1e6*100)/100+" km<sup>2</sup>":r>1e5?Math.round(r/1e6*1e3)/1e3+" km<sup>2</sup>":r>1e3?10*Math.round(r/10)+" m<sup>2</sup>":Math.round(100*r)/100+" m<sup>2</sup>"},t.prototype.onShowMeasureAreaClick=function(e){sb.trace("call MeasureArea::onShowMeasureAreaClick()",e),this.onShowMeasureClick(e,"Polygon")},t}(Su);const loe=iV;window.ol&&window.ol.control&&(window.ol.control.MeasureArea=iV);const coe={_addUID:function(n){return this._uid?n+"-"+this._uid:n},_createMainContainerElement:function(){var n=document.createElement("div");return n.id=this._addUID("GPmeasureAzimuth"),n.className="GPwidget",n},_createShowMeasureAzimuthElement:function(){var n=document.createElement("input");return n.id=this._addUID("GPshowMeasureAzimuth"),n.type="checkbox",n},_createShowMeasureAzimuthPictoElement:function(){var n=this,t=document.createElement("label");t.id=this._addUID("GPshowMeasureAzimuthPicto"),t.className="GPshowAdvancedToolPicto",t.htmlFor=this._addUID("GPshowMeasureAzimuth"),t.title="Mesurer un azimut",t.addEventListener?t.addEventListener("click",function(r){n.onShowMeasureAzimuthClick(r)}):t.attachEvent&&t.attachEvent("onclick",function(r){n.onShowMeasureAzimuthClick(r)});var e=document.createElement("span");return e.id=this._addUID("GPshowMeasureAzimuthOpen"),e.className="GPshowAdvancedToolOpen",t.appendChild(e),t}};var $p=Ki_getLogger("measureazimut"),oV=function(n){function t(e){if(e=e||{},!(this instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureAzimuth",this._uid=ni.generate(),this._showContainer=null,this._pictoContainer=null,this._initialize(e);var r=e.element?e.element:this._initializeContainer();n.call(this,{element:r,target:e.target,render:e.render})}return n&&(t.__proto__=n),t.prototype=Object.create(n.prototype,{}),vr.assign(t.prototype,jS),vr.assign(t.prototype,coe),t.prototype.constructor=t,t.prototype.setMap=function(e){$p.trace("setMap()");var r=this.CLASSNAME;e?this.options.target||y2.add(e,this):this.clean(),this.tools[r].push({instance:e?this:null,active:!1,map:e?e.getTargetElement().id:null});var i="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;i&&(i.gpShareMeasures||(i.gpShareMeasures={}),i.gpShareMeasures[r]=this.tools[r]),n.prototype.setMap.call(this,e)},t.prototype.setGeodesic=function(e){this.options.geodesic=void 0!==e&&e},t.prototype.isGeodesic=function(){return this.options.geodesic},t.prototype._initialize=function(e){$p.trace("call MeasureAzimuth::_initialize() : ",e),this.options={},this.options.geodesic=void 0!==e.geodesic&&e.geodesic,this.options.target=void 0!==e.target?e.target:null,this.options.render=void 0!==e.render?e.render:null,this.options.layerDescription=void 0!==e.layerDescription?e.layerDescription:{title:"Mesures d'azimuth",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)},t.prototype._initializeContainer=function(){$p.trace("call MeasureAzimuth::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),r=this._showContainer=this._createShowMeasureAzimuthElement();e.appendChild(r),this._showContainer.checked=!1;var i=this._pictoContainer=this._createShowMeasureAzimuthPictoElement();return e.appendChild(i),e},t.prototype.addMeasureEvents=function(){$p.trace("call MeasureAzimuth::addMeasureEvents()");var e=this.getMap();e.on("singleclick",r=>this.onPointerMoveAzimutHandler(r)),e.on("pointermove",r=>this.onPointerMoveAzimutHandler(r))},t.prototype.removeMeasureEvents=function(){$p.trace("call MeasureAzimuth::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",r=>this.onPointerMoveAzimutHandler(r)),e.un("pointermove",r=>this.onPointerMoveAzimutHandler(r))},t.prototype.format=function(e){$p.trace("call MeasureAzimuth::format()");var i=this.getMap().getView().getProjection(),o=Qi(e.getFirstCoordinate(),i,"EPSG:4326"),s=Qi(e.getLastCoordinate(),i,"EPSG:4326");if(!this.options.geodesic){var a=cm(o,s);if($p.trace("measure between 2 points with geodesic method",a),a>500){var c=500/a;$p.trace("%",c),s=Qi(e.getCoordinateAt(c),i,"EPSG:4326")}}var h=Math.PI/180,p=180/Math.PI,m=h*o[0],E=h*s[0],S=h*o[1],x=h*s[1],P=Math.sin(E-m)*Math.cos(x),R=Math.cos(S)*Math.sin(x)-Math.sin(S)*Math.cos(x)*Math.cos(E-m),D=p*Math.atan2(P,R);return $p.trace("azimut",D),D<0&&(D+=360),Math.round(100*D)/100+" \xb0"},t.prototype.onShowMeasureAzimuthClick=function(e){$p.trace("call MeasureAzimuth::onShowMeasureAzimuthClick()",e),this.onShowMeasureClick(e,"LineString")},t.prototype.onPointerMoveAzimutHandler=function(e){this.onPointerMoveHandler(e),this.sketch&&this.sketch.getGeometry().getCoordinates().length>2&&this.measureDraw.finishDrawing()},t}(Su);const doe=oV;window.ol&&window.ol.control&&(window.ol.control.MeasureAzimuth=oV),function(){var n=document.getElementsByTagName("script"),t=n[n.length-1].getAttribute("data-key");if(t){var e=t.split(/;|,|\|/);if(e.length>1){for(var r=[],i=0;i<e.length;i++)r.push(e[i]);t=r}}var o=n[n.length-1].getAttribute("data-url"),s=n[n.length-1].getAttribute("data-timeout");if(t||o){var h={apiKey:t,onSuccess:function(){},onFailure:function(p){throw new Error("Configuration load failed : "+p.message)}};o&&(h.serverUrl=o,h.callbackSuffix=""),s&&(h.timeOut=s),aa.Config||aa.Services.getConfig(h)}}(),FL.loadByDefault(),FL.overload();var hoe=aa.Services;function sV(n,t){return function e(r,i){for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)?"object"==typeof r[o]&&e(r[o],i[o]):i[o]=r[o])}(n,t)}var ri={gp:{}};ri.gp.GfiUtils=rL,ri.includeProjections=FL.load,ri.style=ri.style||{},ri.style.Editor=QU,ri.style.editor=ri.style.editor||{},ri.style.editor.Style=y5,ri.style.editor.Filter=_5,ri.style.editor.Layer=KU,ri.style.editor.Legend=E5,ri.style.editor.Group=JU,ri.style.editor.Themes=XU,ri.format=ri.format||{},ri.format.KMLExtended=EL,ri.source=ri.source||{},ri.source.WMTSExtended=d8,ri.source.GeoportalWMTS=v8,ri.source.GeoportalWMS=_8,ri.layer=ri.layer||{},ri.layer.GeoportalWMTS=oq,ri.layer.GeoportalWMS=sq,ri.control=ri.control||{},ri.control.LayerSwitcher=Sm,ri.control.GeoportalAttribution=Zie,ri.control.GetFeatureInfo=mq,ri.control.SearchEngine=bq,ri.control.Route=NQ,ri.control.Isocurve=BQ,ri.control.GeoportalMousePosition=iQ,ri.control.Drawing=dQ,ri.control.ReverseGeocode=VQ,ri.control.LayerImport=Wie,ri.control.MeasureLength=ooe,ri.control.MeasureArea=loe,ri.control.MeasureAzimuth=doe,ri.control.DefaultMarkers=Ls,ri.control.ElevationPath=noe,ri.control.LocationSelector=nI,window.ol&&(sV(ri,window.ol),sV(window.ol,ri));var foe=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function E2(n){return"string"==typeof n?n:""}const goe=function(n){function t(){return n.call(this)||this}return foe(t,n),t.prototype.getType=function(){return"text"},t.prototype.readFeature=function(e,r){return this.readFeatureFromText(E2(e),this.adaptOptions(r))},t.prototype.readFeatureFromText=function(e,r){return Ht()},t.prototype.readFeatures=function(e,r){return this.readFeaturesFromText(E2(e),this.adaptOptions(r))},t.prototype.readFeaturesFromText=function(e,r){return Ht()},t.prototype.readGeometry=function(e,r){return this.readGeometryFromText(E2(e),this.adaptOptions(r))},t.prototype.readGeometryFromText=function(e,r){return Ht()},t.prototype.readProjection=function(e){return this.readProjectionFromText(E2(e))},t.prototype.readProjectionFromText=function(e){return this.dataProjection},t.prototype.writeFeature=function(e,r){return this.writeFeatureText(e,this.adaptOptions(r))},t.prototype.writeFeatureText=function(e,r){return Ht()},t.prototype.writeFeatures=function(e,r){return this.writeFeaturesText(e,this.adaptOptions(r))},t.prototype.writeFeaturesText=function(e,r){return Ht()},t.prototype.writeGeometry=function(e,r){return this.writeGeometryText(e,this.adaptOptions(r))},t.prototype.writeGeometryText=function(e,r){return Ht()},t}(qy);var moe=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),voe={POINT:B,LINESTRING:Uh,POLYGON:za,MULTIPOINT:Sg,MULTILINESTRING:m0,MULTIPOLYGON:Ky},_oe={};for(var cV in Wt)_oe[cV]=Wt[cV].toUpperCase();var Eoe=function(){function n(t){this.wkt=t,this.index_=-1}return n.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},n.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},n.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},n.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},n.prototype.nextToken=function(){var i,t=this.nextChar_(),e=this.index_,r=t;if("("==t)i=2;else if(","==t)i=5;else if(")"==t)i=3;else if(this.isNumeric_(t)||"-"==t)i=4,r=this.readNumber_();else if(this.isAlpha_(t))i=1,r=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);i=6}return{position:e,value:r,type:i}},n.prototype.readNumber_=function(){var t,e=this.index_,r=!1,i=!1;do{"."==t?r=!0:("e"==t||"E"==t)&&(i=!0),t=this.nextChar_()}while(this.isNumeric_(t,r)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},n.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()},n}(),boe=function(){function n(t){this.lexer_=t,this.token_={position:0,type:0},this.layout_="XY"}return n.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},n.prototype.isTokenType=function(t){return this.token_.type==t},n.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},n.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},n.prototype.parseGeometryLayout_=function(){var t="XY",e=this.token_;if(this.isTokenType(1)){var r=e.value;"Z"===r?t="XYZ":"M"===r?t="XYM":"ZM"===r&&(t="XYZM"),"XY"!==t&&this.consume_()}return t},n.prototype.parseGeometryCollectionText_=function(){if(this.match(2)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return t}throw new Error(this.formatErrorMessage_())},n.prototype.parsePointText_=function(){if(this.match(2)){var t=this.parsePoint_();if(this.match(3))return t}throw new Error(this.formatErrorMessage_())},n.prototype.parseLineStringText_=function(){if(this.match(2)){var t=this.parsePointList_();if(this.match(3))return t}throw new Error(this.formatErrorMessage_())},n.prototype.parsePolygonText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}throw new Error(this.formatErrorMessage_())},n.prototype.parseMultiPointText_=function(){if(this.match(2)){var t;if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}throw new Error(this.formatErrorMessage_())},n.prototype.parseMultiLineStringText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}throw new Error(this.formatErrorMessage_())},n.prototype.parseMultiPolygonText_=function(){if(this.match(2)){var t=this.parsePolygonTextList_();if(this.match(3))return t}throw new Error(this.formatErrorMessage_())},n.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,r=0;r<e;++r){var i=this.token_;if(!this.match(4))break;t.push(i.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},n.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(5);)t.push(this.parsePoint_());return t},n.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(5);)t.push(this.parsePointText_());return t},n.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(5);)t.push(this.parseLineStringText_());return t},n.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(5);)t.push(this.parsePolygonText_());return t},n.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(1)&&"EMPTY"==this.token_.value;return t&&this.consume_(),t},n.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},n.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(1)){var e=t.value;this.layout_=this.parseGeometryLayout_();var r=this.isEmptyGeometry_();if("GEOMETRYCOLLECTION"==e){if(r)return new O0([]);var i=this.parseGeometryCollectionText_();return new O0(i)}var o=voe[e];if(!o)throw new Error("Invalid geometry type: "+e);var s=void 0;if(r)s="POINT"==e?[NaN,NaN]:[];else switch(e){case"POINT":s=this.parsePointText_();break;case"LINESTRING":s=this.parseLineStringText_();break;case"POLYGON":s=this.parsePolygonText_();break;case"MULTIPOINT":s=this.parseMultiPointText_();break;case"MULTILINESTRING":s=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":s=this.parseMultiPolygonText_()}return new o(s,this.layout_)}throw new Error(this.formatErrorMessage_())},n}(),woe=function(n){function t(e){var r=n.call(this)||this,i=e||{};return r.splitCollection_=void 0!==i.splitCollection&&i.splitCollection,r}return moe(t,n),t.prototype.parse_=function(e){var r=new Eoe(e);return new boe(r).parse()},t.prototype.readFeatureFromText=function(e,r){var i=this.readGeometryFromText(e,r),o=new R0;return o.setGeometry(i),o},t.prototype.readFeaturesFromText=function(e,r){for(var i,o=this.readGeometryFromText(e,r),s=[],a=0,c=(i=this.splitCollection_&&o.getType()==Wt.GEOMETRY_COLLECTION?o.getGeometriesArray():[o]).length;a<c;++a){var h=new R0;h.setGeometry(i[a]),s.push(h)}return s},t.prototype.readGeometryFromText=function(e,r){return tp(this.parse_(e),!1,r)},t.prototype.writeFeatureText=function(e,r){var i=e.getGeometry();return i?this.writeGeometryText(i,r):""},t.prototype.writeFeaturesText=function(e,r){if(1==e.length)return this.writeFeatureText(e[0],r);for(var i=[],o=0,s=e.length;o<s;++o)i.push(e[o].getGeometry());var a=new O0(i);return this.writeGeometryText(a,r)},t.prototype.writeGeometryText=function(e,r){return fV(tp(e,!0,r))},t}(goe);function dV(n){var t=n.getCoordinates();return 0===t.length?"":t.join(" ")}function C5(n){for(var t=n.getCoordinates(),e=[],r=0,i=t.length;r<i;++r)e.push(t[r].join(" "));return e.join(",")}function hV(n){for(var t=[],e=n.getLinearRings(),r=0,i=e.length;r<i;++r)t.push("("+C5(e[r])+")");return t.join(",")}var Ioe={Point:dV,LineString:C5,Polygon:hV,MultiPoint:function(n){for(var t=[],e=n.getPoints(),r=0,i=e.length;r<i;++r)t.push("("+dV(e[r])+")");return t.join(",")},MultiLineString:function(n){for(var t=[],e=n.getLineStrings(),r=0,i=e.length;r<i;++r)t.push("("+C5(e[r])+")");return t.join(",")},MultiPolygon:function(n){for(var t=[],e=n.getPolygons(),r=0,i=e.length;r<i;++r)t.push("("+hV(e[r])+")");return t.join(",")},GeometryCollection:function(n){for(var t=[],e=n.getGeometries(),r=0,i=e.length;r<i;++r)t.push(fV(e[r]));return t.join(",")}};function fV(n){var t=n.getType(),r=(0,Ioe[t])(n);if(t=t.toUpperCase(),"function"==typeof n.getFlatCoordinates){var i=function(n){var t=n.getLayout(),e="";return("XYZ"===t||"XYZM"===t)&&(e+="Z"),("XYM"===t||"XYZM"===t)&&(e+="M"),e}(n);i.length>0&&(t+=" "+i)}return 0===r.length?t+" EMPTY":t+"("+r+")"}const Aoe=woe;var Om=ee(7716),Moe=ee(4375);const Roe=[{path:"",component:(()=>{class n{constructor(e){var r=this;this.geoService=e,this.ignKey="choisirgeoportail",this.go=()=>{var i,o,s;const a=new qA({collapsed:!0,reordering:!1,selection:!0});null===(i=this.map)||void 0===i||i.addControl(a);const c=new bd({title:"Raster OSM",baseLayer:!0,source:new j0});null===(o=this.map)||void 0===o||o.addLayer(c);const h=new I0({title:"Vector IGN",baseLayer:!0,visible:!1,source:new _A({format:new wx,url:`https://wxs.ign.fr/${this.ignKey}/geoportail/tms/1.0.0/PLAN.IGN/{z}/{x}/{y}.pbf`,tileGrid:el({maxZoom:22,minZoom:1,tileSize:256}),attributions:['<a href="https://geoservices.ign.fr/documentation/geoservices/vecteur-tuile.html">\xa9 IGN</a></br>','<a href="https://github.com/gaetanbloch">\xa9 GBloch</a>']}),declutter:!0});null===(s=this.map)||void 0===s||s.addLayer(h),we(function*(){const m=yield(yield fetch(`https://wxs.ign.fr/${r.ignKey}/static/vectorTiles/styles/PLAN.IGN/standard.json`)).json(),E=function(){var S=we(function*(){!function(n,t,e,r,i){new Promise(function(o,s){if("object"!=typeof t&&(t=JSON.parse(t)),8!=t.version)return s(new Error("glStyle version 8 required."));if(!(n instanceof A_||n instanceof I0))return s(new Error("Can only apply to VectorLayer or VectorTileLayer"));var c,h,p;function m(){p||t.sprite&&!c?p?(n.setStyle(p),o()):s(new Error("Something went wrong trying to apply style.")):(p=LN(n,t,e,i,c,h,FN),n.getStyle()?o():s(new Error("Nothing to show for source ["+e+"]")))}if(t.sprite){var E=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",S=IR(t.sprite,r,E+".json");fetch(S,{credentials:"same-origin"}).then(function(x){return x.ok||""===E?x:(S=IR(t.sprite,r,".json"),fetch(S,{credentials:"same-origin"}))}).then(function(x){if(x.ok)return x.json();s(new Error("Problem fetching sprite from "+S+": "+x.statusText))}).then(function(x){if(void 0===x)return s(new Error("No sprites found."));c=x,h=IR(t.sprite,r,E+".png"),m()}).catch(function(x){s(new Error("Sprites cannot be loaded: "+S+": "+x.message))})}else m()})}(h,m,"plan_ign")});return function(){return S.apply(this,arguments)}}();h.getSource()?yield E():h.once("change:source",E)})().catch(console.error)},this.subGeo=this.geoService.onPointSet().subscribe(i=>{var o,s,a;null===(o=this.map)||void 0===o||o.getLayers().getArray().filter(P=>"point"===P.get("title")).forEach(P=>{var R;return null===(R=this.map)||void 0===R?void 0:R.removeLayer(P)}),console.log(i);const c=new Ml({radius:7,fill:new md({color:"rgba(0,0,0,0.6)"}),stroke:new op({color:"rgba(0,0,0,0.6)",width:1})}),p={Point:new Wh({image:c})},m=new d1({features:(new Mt).readFeatures(i,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}),E=new A_({title:"point",source:m,style:function(P){return p[P.getGeometry().getType()]}});null===(s=this.map)||void 0===s||s.addLayer(E);const x=m.getFeatures()[0].getGeometry();console.log(x.getCoordinates()),null===(a=this.view)||void 0===a||a.fit(x,{padding:[50,50,50,50],minResolution:3})}),this.subIti=this.geoService.onitiSet().subscribe(i=>{var o,s,a;null===(o=this.map)||void 0===o||o.getLayers().getArray().filter(E=>"itinerary"===E.get("title")).forEach(E=>{var S;return null===(S=this.map)||void 0===S?void 0:S.removeLayer(E)}),console.log(i);const h=(new Aoe).readFeature(i,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),p=new d1({features:[h]}),m=new A_({title:"itinerary",source:p,style:new Wh({stroke:new op({color:"rgba(0,0,0,0.7)",width:3})})});null===(s=this.map)||void 0===s||s.addLayer(m),null===(a=this.view)||void 0===a||a.fit(p.getExtent(),{padding:[50,50,50,50],minResolution:3})})}ngOnDestroy(){var e,r;null===(e=this.subGeo)||void 0===e||e.unsubscribe(),null===(r=this.subIti)||void 0===r||r.unsubscribe()}ngOnInit(){this.view=new US({center:[287963,5948655],zoom:6,constrainResolution:!0,maxZoom:22,minZoom:0,resolutions:[156543.033928041,78271.51696402048,39135.758482010235,19567.87924100512,9783.93962050256,4891.96981025128,2445.98490512564,1222.99245256282,611.49622628141,305.7481131407048,152.8740565703525,76.43702828517624,38.21851414258813,19.10925707129406,9.554628535647032,4.777314267823516,2.388657133911758,1.194328566955879,.5971642834779395,.2985821417389697,.1492910708694849,.0746455354347424]}),this.map=new zy({target:"map",view:this.view}),hoe.getConfig({apiKey:this.ignKey,onSuccess:this.go})}}return n.\u0275fac=function(e){return new(e||n)(Om.Y36(Moe._))},n.\u0275cmp=Om.Xpm({type:n,selectors:[["app-map-container"]],decls:2,vars:0,consts:[[1,"container"],["id","map"]],template:function(e,r){1&e&&(Om.TgZ(0,"div",0),Om._UZ(1,"div",1),Om.qZA())},styles:['body[_ngcontent-%COMP%]{margin:0;width:100vw;height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,"Helvetica Neue",sans-serif}.container[_ngcontent-%COMP%]{display:flex;flex:1;position:absolute;width:calc(100% - 15em);height:100%}#map[_ngcontent-%COMP%]{display:block;width:100%;height:100%}']}),n})()}];let Ooe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Om.oAB({type:n}),n.\u0275inj=Om.cJS({imports:[[_.Bz.forChild(Roe)],_.Bz]}),n})(),Doe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Om.oAB({type:n}),n.\u0275inj=Om.cJS({imports:[[Q.ez,Ooe]]}),n})()},4375:(Tt,St,ee)=>{"use strict";ee.d(St,{_:()=>Ke});var Q=ee(9765),_=ee(8002),Pe=ee(7716),we=ee(1841);let Ke=(()=>{class _e{constructor(xe){this.http=xe,this.currentPoint=new Q.xQ,this.iti=new Q.xQ,this.getCoordinatesFromAddress=We=>this.http.get(We).pipe((0,_.U)(ve=>(console.log(ve),{longitude:ve.features[0].geometry.coordinates[0],latitude:ve.features[0].geometry.coordinates[1],features:ve}))),this.getAddressFromCoordinates=We=>this.http.get(We).pipe((0,_.U)(ve=>(console.log(ve),{address:ve.features[0].properties.label,features:ve}))),this.getIti=We=>this.http.get(We).pipe((0,_.U)(ve=>(console.log(ve),{wkt:ve.geometryWkt,distance:ve.distance,duration:ve.duration}))),this.setPoint=We=>{console.log(We),this.currentPoint.next(We)},this.onPointSet=()=>this.currentPoint.asObservable(),this.setIti=We=>{console.log(We),this.iti.next(We)},this.onitiSet=()=>this.iti.asObservable()}}return _e.\u0275fac=function(xe){return new(xe||_e)(Pe.LFG(we.eN))},_e.\u0275prov=Pe.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})()},8331:(Tt,St,ee)=>{"use strict";var Q=ee(9075),_=ee(7716),Pe=ee(2305);const we=[{path:"",loadChildren:()=>Promise.resolve().then(ee.bind(ee,7478)).then(Ie=>Ie.BodyModule)}];let Ke=(()=>{class Ie{}return Ie.\u0275fac=function(Ft){return new(Ft||Ie)},Ie.\u0275mod=_.oAB({type:Ie}),Ie.\u0275inj=_.cJS({imports:[[Pe.Bz.forRoot(we)],Pe.Bz]}),Ie})(),_e=(()=>{class Ie{constructor(){this.title="fr-gis"}}return Ie.\u0275fac=function(Ft){return new(Ft||Ie)},Ie.\u0275cmp=_.Xpm({type:Ie,selectors:[["app-root"]],decls:1,vars:0,template:function(Ft,Se){1&Ft&&_._UZ(0,"router-outlet")},directives:[Pe.lC],styles:[""]}),Ie})();var nt=ee(7478),xe=ee(6237),We=ee(1841);let ve=(()=>{class Ie{}return Ie.\u0275fac=function(Ft){return new(Ft||Ie)},Ie.\u0275mod=_.oAB({type:Ie,bootstrap:[_e]}),Ie.\u0275inj=_.cJS({providers:[],imports:[[Q.b2,Ke,nt.BodyModule,xe.PW,We.JF]]}),Ie})();(0,_.G48)(),Q.q6().bootstrapModule(ve).catch(Ie=>console.error(Ie))},7594:Tt=>{"use strict";Tt.exports='/* BOOST RELIEF */\n\n  div[id^=GPboostRelief-] {\n    font-size: 11px;\n    width: 150px;\n  }\n\n  div[id^=GPboostRelief-] label {\n    display: block;\n  }\n\n  div[id^=GPBoostReliefListContainer-] {\n    position: relative;\n    width: 100%;\n    height: 28px;\n    padding-left: 8px;\n    line-height: 28px;\n  }\n\n  .GPlayerRelief,\n  .GPlayerReliefValue {\n    position: absolute;\n    top: 0;\n  }\n\n  .GPlayerRelief {\n    width: calc(100% - 60px);\n    height: 28px;\n    padding-left: 8px;\n  }\n\n  .GPlayerReliefValue {\n    width: 32px;\n    left: calc(100% - 40px);\n    line-height: 28px;\n    font-size: 10px;\n    font-style: italic;\n    cursor: default;\n  }\n\n  /* Showing/hiding boost relief panel */\n\n  label[id^=GPshowBoostReliefPicto] {\n    display: inline-block;\n  }\n\n  input[id^=GPshowBoostRelief-] + label {\n    display: block;\n  }\n\n  input[id^=GPshowBoostRelief-]:checked + label {\n    display: none;\n  }\n\n  input[id^=GPshowBoostRelief-] + label + div {\n    display: none;\n  }\n\n  input[id^=GPshowBoostRelief-]:checked + label + div {\n    display: block;\n  }\n\n  /* Showing layer advanced tools */\n\n  div[id^=GPboostRelief-] input[type="checkbox"]:checked + label + .GPlayerAdvancedToolsRelief {\n    max-height: 28px;\n    opacity: 1;\n  }\n\n  .GPlayerAdvancedToolsRelief {\n    display: block;\n    position: relative;\n    width: 100%;\n    border-bottom : 1px dotted #CCC;\n    background-color : #FFF;\n  }\n\n  .GPlayerReliefLayerId {\n    position: relative;\n    width: 100px;\n    height: 28px;\n    padding-left: 8px;\n    line-height: 28px;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n\n  /* Relief slider : general */\n\n  .GPlayerRelief input {\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    background: none;\n    display: block;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n    cursor: pointer;\n  }\n\n  .GPlayerRelief input[type="range"]:focus {\n    box-shadow: none;\n    outline: none;\n  }\n\n  /* Relief slider : Chrome, Safari, Opera */\n\n  .GPlayerRelief input[type="range"]::-webkit-slider-runnable-track {\n    -webkit-appearance: none;\n    height: 3px;\n  }\n\n  .GPlayerRelief input[type="range"]::-webkit-slider-thumb:before {\n    position: absolute;\n    top: 0;\n    right: 50%;\n    left: -200px;\n    height: 3px;\n    pointer-events: none;\n  }\n\n  .GPlayerRelief input[type="range"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    width: 9px;\n    height: 17px;\n    -webkit-appearance: none;\n    border: 2px solid #FFF;\n    background-color: #505050;\n    position: relative;\n    top: -7px;\n  }\n\n  /* Relief slider : Firefox */\n\n  .GPlayerRelief input[type="range"]::-moz-range-track {\n    width: 80px;\n    height: 3px;\n  }\n\n  .GPlayerRelief input[type="range"]::-moz-range-thumb {\n    width: 5px;\n    height: 13px;\n    border: 2px solid #FFF;\n    border-radius: 0;\n    box-shadow: 0;\n    background-color: #505050;\n    position: relative;\n  }\n\n  /* Relief slider : IE */\n\n  .GPlayerRelief input[type="range"]::-ms-track {\n    border: 0;\n    border-color: transparent;\n    border-radius: 0;\n    border-width: 0;\n    color: transparent;\n    height: 3px;\n    width: 80px;\n  }\n\n  .GPlayerRelief input[type="range"]::-ms-fill-lower,\n  .GPlayerRelief input[type="range"]::-ms-fill-upper {\n    background: transparent;\n    border-radius: 0;\n  }\n\n  .GPlayerRelief input[type="range"]::-ms-thumb {\n    width: 5px;\n    height: 13px;\n    border: 2px solid #FFF;\n    background-color: #505050;\n  }\n\n  .GPlayerRelief input[type="range"]::-ms-tooltip {\n    display: none;\n  }'},5277:Tt=>{"use strict";Tt.exports="/* MOUSE POSITION */\r\n\r\n/* Showing/hiding drawing panel */\r\n\r\nlabel[id^=GPshowDrawingPicto-] {\r\n  display: inline-block;\r\n}\r\n\r\ninput[id^=GPshowDrawing-] + label {\r\n  display: block;\r\n}\r\n\r\ninput[id^=GPshowDrawing-]:checked + label {\r\n  display: none;\r\n}\r\n\r\ninput[id^=GPshowDrawing-] + label + div {\r\n  display: none;\r\n}\r\n\r\ninput[id^=GPshowDrawing-]:checked + label + div {\r\n  display: block;\r\n}\r\n\r\n/* General panels */\r\n\r\ndiv[id^=GPdrawingPanel-] {\r\n  width: 240px;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Basic infos */\r\n\r\ndiv[id^=GPdrawingBasicPanel-] {\r\n  padding: 10px 15px;\r\n}\r\n\r\n.GPdrawingLabel,\r\n.GPdrawingCoords {\r\n  display: inline-block;\r\n  line-height: 20px;\r\n}\r\n\r\n.GPdrawingLabel {\r\n  width: 80px;\r\n  font-weight: bold;\r\n}\r\n\r\n.GPdrawingCoords {\r\n  width: 110px;\r\n}\r\n\r\n/* markers selector */\r\n\r\n.marker-input-radio {\r\n  display : none ;\r\n}\r\n\r\ninput.marker-input-radio:checked + label {\r\n  border: 1px solid red;\r\n}\r\n\r\n"},8745:Tt=>{"use strict";Tt.exports="div[id^=GPelevationPathPanelInfo] {\n  display: none; /* on n'affiche pas le bouton d'information par defaut */\n}\n\n/* Calc waiting */\n\n.GPelevationPathCalcWaitingContainerVisible,\n.GPelevationPathCalcWaitingContainerHidden {\n  position: absolute;\n  top: 32px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: rgba(255,255,255,0.9);\n  font-size: 1.5em;\n  font-weight: bold;\n  overflow: hidden;\n}\n\n.GPelevationPathInformationsContainerVisible,\n.GPelevationPathInformationsContainerHidden {\n  position: absolute;\n  top: 32px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: rgba(255,255,255,0.9);\n  font-size: 13px;\n  font-weight: bold;\n  overflow: hidden;\n}\n\n.GPelevationPathCalcWaitingContainerVisible {\n  display: flex;\n}\n\n.GPelevationPathInformationsContainerVisible {\n  display: flex;\n  flex-direction: column;\n}\n\n.GPelevationPathCalcWaitingContainerHidden,\n.GPelevationPathInformationsContainerHidden {\n  display: none;\n}\n\n.GPelevationPathCalcWaiting,\n.GPelevationPathInformations {\n  margin: auto;\n}\n\n.GPelevationPathInformations {\n  font-size: 0.8em;\n}\n\n.GPelevationPathCalcWaitingContainerVisible,\n.GPelevationPathCalcWaitingContainerHidden,\n.GPelevationPathInformationsContainerVisible,\n.GPelevationPathInformationsContainerHidden {\n  border-radius: 5px;\n}\n\n/* CSS : Raw */\n\n#profileElevationRaw {\n  resize: none;\n  padding: unset;\n}\n\n/* CSS : default */\n\n#profileElevationByDefault {\n  display:flex;\n  flex-direction:column;\n  height:100%;\n}\n\n.altiPathValue {\n  font-weight: 700;\n  fill: #5E5E5E;\n}\n\n.altiPathCoords {\n  font-style: italic;\n  fill: #5E5E5E;\n}\n\n.tooltipInit {\n  opacity: 0;\n}\n\n.tooltipFadeIn {\n  transition: opacity 300ms ease 0ms, transform 50ms ease 0s, top 50ms ease 0s, left 50ms ease 0s;\n  opacity: 1;\n}\n\n.tooltipFadeOut {\n  transition: opacity 500ms ease 0ms;\n  opacity: 0;\n}\n\n/* CSS : D3 */\n\n.axis-d3 > text {\n  fill: rgb(94, 94, 94);\n  font-family: Verdana;\n  font-size: 10px;\n  opacity: 1;\n  text-anchor: end;\n}\n\n.axis-d3 {\n  fill: none;\n  stroke: #5E5E5E;\n  stroke-width: 1;\n  shape-rendering: crispEdges;\n}\n\n.area-d3 {\n  fill: #C77A04;\n  stroke: #5E5E5E;\n  stroke-width: 0;\n  fill-opacity: 0.4;\n}\n\n.line-d3 {\n  fill: none;\n  stroke: #C77A04;\n  stroke-width: 1px;\n}\n\n.grid-d3 .tick {\n  stroke: lightgrey;\n  opacity: 0.7;\n}\n\n.grid-d3 path {\n  stroke-width: 0;\n}\n\n.grid-d3 .tick {\n  stroke: lightgrey;\n  opacity: 0.7;\n}\n\n.grid-d3 path {\n  stroke-width: 0;\n}\n\n.overlay-d3 {\n  fill: none;\n  pointer-events: all;\n}\n\n.focusLine-d3 {\n  fill: none;\n  stroke: #C77A04;\n  stroke-width: 0.5px;\n}\n\n.focusCircle-d3 {\n  fill: #C77A04;\n}\n\ndiv.tooltip-d3 {\n    position: inherit;;\n    text-align: left;\n    width: 80px;\n    height: 45px;\n    padding: 5px;\n    font: 8px sans-serif;\n    background: white;\n    border: 0px;\n    border-radius: 8px;\n    pointer-events: none;\n}\n"},2984:Tt=>{"use strict";Tt.exports='/* Widgets : general */\r\n\r\n.GPwidget {\r\n  position: absolute;\r\n  font-family: "Helvetica Neue",Arial,Helvetica,sans-serif;\r\n  font-size: 13px;\r\n  color: #333;\r\n}\r\n\r\n.GPwidget input[type=\'text\'],\r\n.GPwidget input[type=\'button\'] {\r\n  -webkit-appearance: none;\r\n  color: #333333;\r\n}\r\n\r\n.GPwidget input[type="checkbox"] {\r\n  display: none;\r\n}\r\n\r\n.GPwidget select {\r\n  padding-left: 3px;\r\n  border-radius: 3px;\r\n}\r\n\r\n.GPwidget form {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.GPwidget * {\r\n  box-sizing: border-box;\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n/* waiting */\r\n\r\n.GPwaiting {\r\n    background-image : url(\'waiting.84926d9a24580720a06e.gif\');\r\n    background-position : center center;\r\n    background-repeat : no-repeat;\r\n}\r\n\r\n/* General panels */\r\n\r\n.GPpanel {\r\n  background-color: #FFF;\r\n}\r\n\r\n.GPpanelHeader {\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n\r\n.GPpanelTitle {\r\n  width: 100%;\r\n  height: 100%;\r\n  text-align: center;\r\n  font-weight: bold;\r\n}\r\n\r\n.GPpanelClose, .GPpanelReduce, .GPpanelInfo {\r\n  position: absolute;\r\n  cursor: pointer;\r\n}\r\n\r\n/* Showing/hiding advanced panels */\r\n\r\n.GPshowAdvancedToolPicto {\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  cursor: pointer;\r\n}\r\n\r\n.GPshowAdvancedToolOpen {\r\n  position: absolute;\r\n  display: block;\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* Flex inputs */\r\n\r\n.GPflexInput {\r\n  display: flex;\r\n  transition: max-height 0.3s ease-out, opacity 0.3s ease-out;\r\n}\r\n\r\n/* FIXME tempory hack with :not(.GPlocationOriginHidden) !\r\n.GPflexInput > *:not(.GPlocationOriginHidden) */\r\n\r\n.GPflexInput > * {\r\n  display: block;\r\n  height: 28px;\r\n  line-height: 26px;\r\n  border: 1px solid #999;\r\n  border-radius: 0;\r\n}\r\n\r\n.GPflexInput *:not(:last-child) {\r\n  border-right:none;\r\n}\r\n\r\n.GPflexInput *:first-child {\r\n  border-radius: 3px 0 0 3px;\r\n}\r\n\r\n.GPflexInput *:last-child {\r\n  border-radius: 0 3px 3px 0;\r\n}\r\n\r\n.GPflexInput > *:not(input) {\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.GPflexInput > input {\r\n  flex: 1;\r\n  padding: 0 5px;\r\n  min-width: 0;\r\n}\r\n\r\n.GPflexInput > select {\r\n  flex: 1;\r\n  padding-right: 7px;\r\n}\r\n\r\n.GPflexInput > label {\r\n  background-color:  #F2F2F2;\r\n  color: #666;\r\n  padding-left: 7px;\r\n  padding-right: 9px;\r\n  cursor: pointer;\r\n}\r\n\r\n/* Particular inputs */\r\n\r\n.GPinputSelect {\r\n  display: block;\r\n  height: 28px;\r\n  line-height: 26px;\r\n  margin: auto;\r\n  border: 1px solid #999;\r\n  color: #333;\r\n  cursor: pointer;\r\n}\r\n\r\ninput.GPinputSubmit {\r\n  display: block;\r\n  width: 80px;\r\n  margin: auto;\r\n  height: 28px;\r\n  line-height: 26px;\r\n  padding: 0;\r\n  background: none;\r\n  border: none;\r\n  border-radius: 3px;\r\n  font-family: "Helvetica Neue",Arial,Helvetica,sans-serif;\r\n  color: #FFF;\r\n  font-weight: bold;\r\n  opacity: 0.8;\r\n  transition: opacity 0.2s ease-out;\r\n  cursor: pointer;\r\n}\r\n\r\ninput.GPinputSubmit:hover {\r\n  opacity: 1;\r\n}\r\n\r\n/* Autocomplete/geocode results */\r\n\r\n.GPautoCompleteList,\r\n.GPadvancedAutoCompleteList {\r\n  z-index: 2;\r\n  display: none;\r\n  position: absolute;\r\n  max-height: 140px;\r\n  background-color: #FFF;\r\n  border: 1px solid #999;\r\n  overflow-y: hidden;\r\n}\r\n\r\n.GPadvancedAutoCompleteList {\r\n  width: calc(100% - 28px);\r\n  border-top: none;\r\n  font-size: 0.9em;\r\n}\r\n\r\n.GPautoCompleteProposal {\r\n  width: 100%;\r\n  height: 28px;\r\n  line-height: 16px;\r\n  padding: 6px 10px;\r\n  color: #5E5E5E;\r\n  font-size: 1.0em;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow:ellipsis;\r\n  cursor: pointer;\r\n}\r\n\r\n.GPautoCompleteProposal:hover {\r\n  color: #000000;\r\n  background-color: #CEDBEF\r\n}\r\n\r\n/* Showing additional hidden options */\r\n\r\n.GPshowMoreOptions {\r\n  display: block;\r\n  position: absolute;\r\n  width: 28px;\r\n  height: 28px;\r\n  cursor: pointer;\r\n  transition: all 0.5s ease-out 0s;\r\n}\r\n\r\ninput[type="checkbox"]:checked + .GPshowMoreOptions {\r\n  transform: rotateX(180deg);\r\n  /* bottom: 90px; */\r\n}\r\n'},1025:Tt=>{"use strict";Tt.exports='/* GET FEATURE INFO */\n\nlabel[id^=GPgetFeatureInfoPicto] {\n  display: inline-block;\n}\n\ndiv[id^=GPgetFeatureInfo-] + label {\n  display: block;\n}\n\nspan[id^=GPgetFeatureInfoActivate],\nspan[id^=GPgetFeatureInfoDeactivate] {\n  position: absolute;\n  display: block;\n  transition: border-radius 0.5s ease-out 0s, opacity 0.5s ease-out 0s;\n}\n\nspan[id^=GPgetFeatureInfoActivate] {\n  background-position: 0 0;\n  opacity: 1;\n}\n\nspan[id^=GPgetFeatureInfoDeactivate] {\n  opacity: 0;\n}\n\ndiv[id^=GPgetFeatureInfo-] input[type="checkbox"]:not(:checked) + label[id^=GPgetFeatureInfoPicto] span[id^=GPgetFeatureInfoDeactivate] {\n  opacity: 1;\n}\n'},9312:Tt=>{"use strict";Tt.exports='/* ISOCHRON */\r\n\r\ndiv[id^=GPisochron-] {\r\n  top: 140px;\r\n}\r\n\r\n/* Showing/hiding mouse position panel */\r\n\r\nlabel[id^=GPshowIsochronPicto] {\r\n  display: inline-block;\r\n}\r\n\r\ninput[id^=GPshowIsochron-] + label {\r\n  display: block;\r\n}\r\n\r\ninput[id^=GPshowIsochron-]:checked + label {\r\n  display: none;\r\n}\r\n\r\ninput[id^=GPshowIsochron-] + label + div {\r\n  display: none;\r\n}\r\n\r\ninput[id^=GPshowIsochron-]:checked + label + div {\r\n  display: block;\r\n}\r\n\r\n/* General panels */\r\n\r\ndiv[id^=GPisochronPanel-] {\r\n  width: 280px;\r\n}\r\n\r\n/* Calc waiting */\r\n\r\n.GPisochronCalcWaitingContainerVisible,\r\n.GPisochronCalcWaitingContainerHidden {\r\n  position: absolute;\r\n  top: 32px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: rgba(255,255,255,0.9);\r\n  font-size: 1.5em;\r\n  font-weight: bold;\r\n  overflow: hidden;\r\n}\r\n\r\n.GPisochronCalcWaitingContainerVisible {\r\n  display: flex;\r\n}\r\n\r\n.GPisochronCalcWaitingContainerHidden {\r\n  display: none;\r\n}\r\n\r\n.GPisochronCalcWaiting {\r\n  margin: auto;\r\n}\r\n\r\n/* Isochron form */\r\n\r\nform[id^=GPisochronForm] {\r\n  padding: 15px;\r\n}\r\n\r\n.GPisochronFormMini {\r\n  max-height: 58px;\r\n  overflow: hidden;\r\n}\r\n\r\n.GPisochronFormMini div[id^="GPisochronReset-"],\r\n.GPisochronFormMini label[id^="GPshowIsoExclusionsPicto-"] {\r\n    display: none;\r\n}\r\n\r\n.GPisochronOriginVisible {\r\n  display: block;\r\n}\r\n\r\n.GPisochronOriginHidden {\r\n  display: none;\r\n}\r\n\r\n.GPisochronOriginPointerImg {\r\n  width: 28px;\r\n  background-color: #F2F2F2;\r\n  cursor: pointer;\r\n}\r\n\r\ninput[id^="GPisochronOriginPointer"] + .GPisochronOriginPointerImg {\r\n  background-position: -1px -1px;\r\n}\r\n\r\ninput[id^="GPisochronOriginPointer"]:checked + .GPisochronOriginPointerImg {\r\n  background-position: -29px -1px;\r\n}\r\n\r\ninput[id^=GPisochronSubmit] {\r\n  margin-top: 5px;\r\n}\r\n\r\n/* Alternative choice */\r\n\r\ndiv[id^=GPisochronChoice] {\r\n  display: flex;\r\n  width: 160px;\r\n  justify-content: space-between;\r\n  margin: auto;\r\n  margin-top: 15px;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.GPisochronChoiceAlt input {\r\n  display: none;\r\n}\r\n\r\n.GPisochronChoiceAltImg {\r\n  display: block;\r\n  width: 28px;\r\n  height: 28px;\r\n  margin: auto;\r\n  cursor: pointer;\r\n}\r\n\r\ninput[id^=GPisochronChoiceAltChron] + .GPisochronChoiceAltImg {\r\n  background-position: -56px 0;\r\n}\r\n\r\ninput[id^=GPisochronChoiceAltChron]:checked + .GPisochronChoiceAltImg {\r\n  background-position: -84px 0;\r\n}\r\n\r\ninput[id^=GPisochronChoiceAltDist] + .GPisochronChoiceAltImg {\r\n  background-position: -112px 0;\r\n}\r\n\r\ninput[id^=GPisochronChoiceAltDist]:checked + .GPisochronChoiceAltImg {\r\n  background-position: -140px 0;\r\n}\r\n\r\n.GPisochronChoiceAlt span {\r\n  cursor: pointer;\r\n  display:block;\r\n  color: #999;\r\n}\r\n\r\n.GPisochronValueHidden {\r\n  display: none;\r\n}\r\n\r\ndiv[id^=GPisochronValueChron],\r\ndiv[id^=GPisochronValueDist] {\r\n  width: 220px;\r\n  margin: auto;\r\n}\r\n\r\n/* Mode choice */\r\n\r\ndiv[id^=GPisochronModeChoice] {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin: 15px 0;\r\n}\r\n\r\n.GPisochronModeLabel {\r\n  display: block;\r\n  text-align: center;\r\n  margin-bottom: 5px;\r\n}\r\n\r\ndiv[id^=GPisochronTransportChoice] input {\r\n  display: none;\r\n}\r\n\r\n.GPisochronTransportImg {\r\n  display: inline-block;\r\n  width: 28px;\r\n  height: 28px;\r\n  cursor: pointer;\r\n}\r\n\r\n.GPisochronTransportImg:first-of-type {\r\n    margin-left: 18px;\r\n    margin-right: 10px;\r\n}\r\n\r\ninput[id^=GPisochronTransportCar] + .GPisochronTransportImg {\r\n  background-position: -168px 0;\r\n}\r\n\r\ninput[id^=GPisochronTransportCar]:checked + .GPisochronTransportImg {\r\n  background-position: -196px 0;\r\n}\r\n\r\ninput[id^=GPisochronTransportPedestrian] + .GPisochronTransportImg {\r\n  background-position: -224px 0;\r\n}\r\n\r\ninput[id^=GPisochronTransportPedestrian]:checked + .GPisochronTransportImg {\r\n  background-position: -252px 0;\r\n}\r\n\r\nselect[id^=GPisochronDirectionSelect] {\r\n  width: 80px;\r\n}\r\n\r\n/* Showing/hiding exclusions */\r\n\r\ninput[id^=GPshowIsoExclusions] {\r\n  display: none;\r\n}\r\n\r\n.GPshowIsoExclusionsPicto {\r\n  top: 250px;\r\n  right: 0;\r\n  transition: all 0.5s ease-out 0s;\r\n}\r\n\r\ninput[id^=GPshowIsoExclusions] + label + div[id^=GPisoExclusions] {\r\n  max-height: 0;\r\n  opacity: 0;\r\n  margin-bottom: 0;\r\n}\r\n\r\ninput[id^=GPshowIsoExclusions]:checked + label + div[id^=GPisoExclusions] {\r\n  display: block;\r\n  max-height: 60px;\r\n  opacity: 1;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n/* Exclusions */\r\n\r\ndiv[id^=GPisoExclusions] {\r\n  transition: max-height 0.5s ease-in-out 0.25s, opacity 0.5s ease-in-out 0.25s, margin 0.3s ease-in-out 0.25s;\r\n  overflow: hidden;\r\n}\r\n\r\n.GPisoExclusionsLabel {\r\n  display: block;\r\n  text-align: center;\r\n  margin-bottom: 10px;\r\n  font-weight: bold;\r\n  line-height: 16px;\r\n}\r\n\r\n.GPisoExclusionsOptions {\r\n  display: flex;\r\n  justify-content: space-around;\r\n}\r\n\r\n.GPisoExclusionsOption {\r\n  display: block;\r\n  height: 28px;\r\n  line-height: 26px;\r\n  color: #A77;\r\n  background-color: #FEE;\r\n  padding-left: 28px;\r\n  padding-right: 5px;\r\n  border: 1px solid #A77;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n}\r\n\r\ninput:checked + .GPisoExclusionsOption {\r\n  background-color: #EFE;\r\n  background-position: 0 -28px;\r\n  color: #797;\r\n  border: 1px solid #797;\r\n}\r\n\r\n/* Reset picto */\r\n\r\ndiv[id^=GPisochronReset] {\r\n  position: absolute;\r\n  margin-top: 5px;\r\n  width: 28px;\r\n  height: 28px;\r\n  border-radius: 3px;\r\n  opacity: 0.8;\r\n  background-position: -281px 0;\r\n  transition: opacity 0.2s ease-out;\r\n  cursor: pointer;\r\n}\r\n\r\ndiv[id^=GPisochronReset]:hover {\r\n  opacity: 1;\r\n}\r\n'},5716:Tt=>{"use strict";Tt.exports='/* LAYER SWITCHER */\r\n\r\ndiv[id^=GPlayerSwitcher-] {\r\n  font-size: 11px;\r\n}\r\n\r\ndiv[id^=GPlayerSwitcher-] [draggable] {\r\n  -webkit-user-select: none;\r\n  user-select: none;\r\n  /* Required to make elements draggable in old WebKit */\r\n  -khtml-user-drag: element;\r\n  -webkit-user-drag: element;\r\n}\r\n\r\n/* Manage opening of the components through hiden checkboxes */\r\n\r\ndiv[id^=GPlayerSwitcher-] input[type="checkbox"] + div,\r\ndiv[id^=GPlayerSwitcher-] input[type="checkbox"] + label + div {\r\n  max-height: 0px;\r\n}\r\n\r\ndiv[id^=GPlayerSwitcher-] label {\r\n  display: block;\r\n}\r\n\r\n/* Showing/hiding layers list */\r\n\r\nlabel[id^=GPshowLayersListPicto] {\r\n  position: relative;\r\n  float: right;\r\n  display: block;\r\n  opacity: 1;\r\n  transition: opacity 0.5s ease-out 0s, box-shadow  0.5s ease-out 0s, border  0.5s ease-out 0s, border-radius  0.5s ease-out 0s;\r\n  cursor: pointer;\r\n}\r\n\r\nspan[id^=GPshowLayersListOpen],\r\nspan[id^=GPshowLayersListClose] {\r\n  position: absolute;\r\n  display: block;\r\n  transition: border-radius 0.5s ease-out 0s, opacity 0.5s ease-out 0s;\r\n}\r\n\r\nspan[id^=GPshowLayersListOpen] {\r\n  background-position: 0 0;\r\n  opacity: 1;\r\n}\r\n\r\nspan[id^=GPshowLayersListClose] {\r\n  opacity: 0;\r\n}\r\n\r\ndiv[id^=GPlayerSwitcher-] input[type="checkbox"]:checked + div + label[id^=GPshowLayersListPicto] {\r\n  border-top-left-radius: 0;\r\n  border-top-right-radius: 0;\r\n}\r\n\r\ndiv[id^=GPlayerSwitcher-] input[type="checkbox"]:checked + div + label[id^=GPshowLayersListPicto] span[id^=GPshowLayersListClose] {\r\n  opacity: 1;\r\n}\r\n\r\n/* Layers list */\r\n\r\ndiv[id^=GPlayersList] {\r\n  position: relative;\r\n  width: 180px;\r\n  border-bottom-right-radius: 0;\r\n  opacity: 0;\r\n  overflow: auto;\r\n  transition: max-height 0.5s ease-out 0s, opacity 0.5s ease-out 0.25s;\r\n}\r\n\r\ndiv[id^=GPlayerSwitcher-] input[type="checkbox"]:checked + div[id^=GPlayersList] {\r\n  max-height: 232px;\r\n  opacity: 1;\r\n  transition: max-height 0.5s ease-in 0s, opacity 0.25s ease-in 0s;\r\n}\r\n\r\n/* Layer : general */\r\n\r\n.GPlayerSwitcher_layer {\r\n  position: relative;\r\n  top: 0;\r\n  background-color: #FFF;\r\n  border-bottom: 1px dotted #CCC;\r\n  overflow: hidden;\r\n}\r\n\r\ndiv[id^=GPlayersList] .GPlayerSwitcher_layer:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.GPlayerBasicTools,\r\n.GPlayerAdvancedTools {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 28px;\r\n}\r\n\r\n.GPlayerVisibility,\r\n.GPlayerInfo,\r\n.GPlayerInfoOpened,\r\n.GPlayerRemove {\r\n  width: 28px;\r\n  height: 28px;\r\n  cursor: pointer;\r\n}\r\n\r\n.GPlayerVisibility,\r\n.GPlayerName,\r\n.GPlayerInfo,\r\n.GPlayerInfoOpened,\r\n.GPlayerRemove,\r\n.GPlayerOpacity,\r\n.GPlayerOpacityValue {\r\n  position: absolute;\r\n  top: 0;\r\n}\r\n\r\n.GPghostLayer {\r\n  opacity: 0;\r\n}\r\n\r\n/* Layer basic tools */\r\n\r\n.GPlayerBasicTools {\r\n  background-color: #FFF;\r\n}\r\n\r\n.GPlayerVisibility {\r\n  left: 0;\r\n  background-position: -28px 0;\r\n}\r\n\r\ninput[type="checkbox"]:checked + .GPlayerVisibility {\r\n  background-position: 0 0;\r\n}\r\n\r\n.GPlayerName {\r\n  left: 28px;\r\n  width: calc(100% - 56px);\r\n  line-height: 28px;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  padding-left: 4px;\r\n  cursor: move;\r\n}\r\n\r\n.outOfRange .GPlayerName {\r\n  color: #AAA;\r\n}\r\n\r\n/* Showing layer advanced tools */\r\n\r\n.GPshowLayerAdvancedTools {\r\n  top: 0;\r\n  right: 0;\r\n  background-position: -112px 0;\r\n}\r\n\r\n.GPlayerAdvancedTools {\r\n  display: block;\r\n  max-height: 0;\r\n  opacity: 0;\r\n  transition: max-height 0.5s ease-out 0s, opacity 0.5s ease-out 0s;\r\n}\r\n\r\ndiv[id^=GPlayerSwitcher-] input[type="checkbox"]:checked + label + .GPlayerAdvancedTools {\r\n  max-height: 28px;\r\n  opacity: 1;\r\n}\r\n\r\n/* Layer advanced tools */\r\n\r\n.GPlayerInfo {\r\n  left: 0;\r\n  background-position: -55px 0;\r\n}\r\n\r\n.GPlayerInfoOpened {\r\n  left: 0;\r\n  background-position: -83px 0;\r\n}\r\n\r\n.GPlayerOpacity {\r\n  left: 28px;\r\n  width: calc(100% - 100px);\r\n  height: 28px;\r\n  padding-left: 8px;\r\n}\r\n\r\n.GPlayerOpacityValue {\r\n  width: 32px;\r\n  left: calc(100% - 60px);\r\n  line-height: 28px;\r\n  font-size: 10px;\r\n  font-style: italic;\r\n  cursor: default;\r\n}\r\n\r\n.GPlayerRemove {\r\n  right: 0;\r\n  background-position: -140px 0;\r\n}\r\n\r\n/* Opacity slider : general */\r\n\r\n.GPlayerOpacity input {\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  background: none;\r\n  display: block;\r\n  width: 100%;\r\n  height: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n}\r\n\r\n.GPlayerOpacity input[type="range"]:focus {\r\n  box-shadow: none;\r\n  outline: none;\r\n}\r\n\r\n/* Opacity slider : Chrome, Safari, Opera */\r\n\r\n.GPlayerOpacity input[type="range"]::-webkit-slider-runnable-track {\r\n  -webkit-appearance: none;\r\n  height: 3px;\r\n}\r\n\r\n.GPlayerOpacity input[type="range"]::-webkit-slider-thumb:before {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 50%;\r\n  left: -200px;\r\n  height: 3px;\r\n  pointer-events: none;\r\n}\r\n\r\n.GPlayerOpacity input[type="range"]::-webkit-slider-thumb {\r\n  width: 9px;\r\n  height: 17px;\r\n  -webkit-appearance: none;\r\n  border: 2px solid #FFF;\r\n  background-color: #505050;\r\n  position: relative;\r\n  top: -7px;\r\n}\r\n\r\n/* Opacity slider : Firefox */\r\n\r\n.GPlayerOpacity input[type="range"]::-moz-range-track {\r\n  width: 80px;\r\n  height: 3px;\r\n}\r\n\r\n.GPlayerOpacity input[type="range"]::-moz-range-thumb {\r\n  width: 5px;\r\n  height: 13px;\r\n  border: 2px solid #FFF;\r\n  border-radius: 0;\r\n  box-shadow: 0;\r\n  background-color: #505050;\r\n  position: relative;\r\n}\r\n\r\n/* Opacity slider : IE */\r\n\r\n.GPlayerOpacity input[type="range"]::-ms-track {\r\n  border: 0;\r\n  border-color: transparent;\r\n  border-radius: 0;\r\n  border-width: 0;\r\n  color: transparent;\r\n  height: 3px;\r\n  width: 80px;\r\n}\r\n\r\n.GPlayerOpacity input[type="range"]::-ms-fill-lower,\r\n.GPlayerOpacity input[type="range"]::-ms-fill-upper {\r\n  background: transparent;\r\n  border-radius: 0;\r\n}\r\n\r\n.GPlayerOpacity input[type="range"]::-ms-thumb {\r\n  width: 5px;\r\n  height: 13px;\r\n  border: 2px solid #FFF;\r\n  background-color: #505050;\r\n}\r\n\r\n.GPlayerOpacity input[type="range"]::-ms-tooltip {\r\n  display: none;\r\n}\r\n\r\n/* Layer info panel */\r\n\r\ndiv[id^=GPlayerInfoPanel] {\r\n  position: absolute;\r\n  top: 0;\r\n  overflow-y: hidden;\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n}\r\n\r\n.GPlayerInfoPanelOpened {\r\n  display: block;\r\n}\r\n\r\n.GPlayerInfoPanelClosed {\r\n  display: none;\r\n}\r\n\r\ndiv[id^=GPlayerInfoContent] {\r\n  position: relative;\r\n  width: 280px;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n}\r\n\r\ndiv[id^=GPlayerInfoTitle] {\r\n  width: calc(100% - 52px);\r\n  margin: auto;\r\n  margin-bottom: 10px;\r\n  padding-bottom: 5px;\r\n  text-align: center;\r\n  font-size: 1.1em;\r\n  font-weight: bold;\r\n}\r\n\r\ndiv[id^=GPlayerInfoQuicklook] {\r\n  position: absolute;\r\n  top: -2px;\r\n  left: 10px;\r\n  width: 20px;\r\n  height: 20px;\r\n  cursor: pointer;\r\n}\r\n\r\ndiv[id^=GPlayerInfoClose] {\r\n  position: absolute;\r\n  top: -8px;\r\n  right: 10px;\r\n  width: 28px;\r\n  height: 28px;\r\n  cursor: pointer;\r\n}\r\n\r\ndiv[id^=GPlayerInfoDescription] {\r\n  font-size: 0.9em;\r\n}\r\n\r\ndiv[id^=GPlayerInfoLegend] {\r\n\r\n}\r\n\r\ndiv[id^=GPlayerInfoMetadata] {\r\n\r\n}\r\n\r\n.GPlayerInfoSubtitle {\r\n  padding-left: 35px;\r\n  font-weight: bold;\r\n  margin-top: 10px;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.GPlayerInfoLink,\r\n.GPlayerInfoPopup {\r\n  line-height: 20px;\r\n  padding-left: 23px;\r\n  white-space: nowrap;\r\n  overflow-x: hidden;\r\n  text-overflow: ellipsis;\r\n  color: #999999;\r\n  background-repeat: no-repeat;\r\n  cursor: pointer;\r\n}\r\n\r\n.GPlayerInfoLink {\r\n  background-position: 0 -20px;\r\n}\r\n\r\n.GPlayerInfoLink:hover,\r\n.GPlayerInfoPopup:hover {\r\n  color: #333;\r\n}\r\n\r\n.GPlayerInfoLink a,\r\n.GPlayerInfoLink a:visited\r\n.GPlayerInfoLink a:focus\r\n.GPlayerInfoLink a:hover {\r\n  text-decoration: none;\r\n  color: inherit;\r\n}\r\n'},5796:Tt=>{"use strict";Tt.exports='/* Location */\r\n\r\n/* Location form */\r\n\r\n.GPlocationStageFlexInput {\r\n  max-height: 28px;\r\n  opacity: 1;\r\n}\r\n\r\n.GPlocationStageFlexInputHidden {\r\n  max-height: 0;\r\n  opacity: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.GPlocationOriginVisible {\r\n  display: block;\r\n}\r\n\r\n.GPlocationOriginHidden {\r\n  display: none;\r\n}\r\n\r\nlabel.GPlocationOriginPointerImg[id*="GPlocationOriginPointerImg"] {\r\n  width: 28px;\r\n  border-top-right-radius: 3px;\r\n  border-bottom-right-radius: 3px;\r\n  border-right: 1px solid #999;\r\n}\r\n\r\ninput[id*="GPlocationOriginPointer"] + .GPlocationOriginPointerImg {\r\n  background-position: -1px -1px;\r\n}\r\n\r\ninput[id*="GPlocationOriginPointer"]:checked + .GPlocationOriginPointerImg {\r\n  background-position: -29px -1px;\r\n}\r\n\r\n.GPlocationStageRemove,\r\ndiv[id^=GPlocationStageAdd] {\r\n  width: 28px;\r\n  border: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.GPlocationStageRemove {\r\n  background-position: -84px 0;\r\n}\r\n\r\ndiv[id^=GPlocationStageAdd] {\r\n  background-position: -56px 0;\r\n}\r\n'},4506:Tt=>{"use strict";Tt.exports="/* Showing/hiding drawing panel */\r\n\r\nlabel[id^=GPshowMeasureAreaPicto-] {\r\n  display: inline-block;\r\n}\r\n\r\ninput[id^=GPshowMeasureArea-] + label {\r\n  display: block;\r\n}\r\n\r\ninput[id^=GPshowMeasureArea-]:checked + label {\r\n  display: block;\r\n  background-color: rgba(0,60,136,0.5);\r\n}\r\n\r\ninput[id^=GPshowMeasureArea-] + label + div {\r\n  display: block;\r\n}\r\n\r\ninput[id^=GPshowMeasureArea-]:checked + label + div {\r\n  display: block;\r\n}\r\n"},7174:Tt=>{"use strict";Tt.exports="/* Showing/hiding drawing panel */\r\n\r\nlabel[id^=GPshowMeasureAzimuthPicto-] {\r\n  display: inline-block;\r\n}\r\n\r\ninput[id^=GPshowMeasureAzimuth-] + label {\r\n  display: block;\r\n}\r\n\r\ninput[id^=GPshowMeasureAzimuth-]:checked + label {\r\n  display: block;\r\n  background-color: rgba(0,60,136,0.5);\r\n}\r\n\r\ninput[id^=GPshowMeasureAzimuth-] + label + div {\r\n  display: block;\r\n}\r\n\r\ninput[id^=GPshowMeasureAzimuth-]:checked + label + div {\r\n  display: block;\r\n}\r\n"},2904:Tt=>{"use strict";Tt.exports="/* Showing/hiding drawing panel */\r\n\r\nlabel[id^=GPshowMeasureLengthPicto-] {\r\n  display: inline-block;\r\n}\r\n\r\ninput[id^=GPshowMeasureLength-] + label {\r\n  display: block;\r\n}\r\n\r\ninput[id^=GPshowMeasureLength-]:checked + label {\r\n  display: block;\r\n  background-color: rgba(0,60,136,0.5);\r\n}\r\n\r\ninput[id^=GPshowMeasureLength-] + label + div {\r\n  display: block;\r\n}\r\n\r\ninput[id^=GPshowMeasureLength-]:checked + label + div {\r\n  display: block;\r\n}\r\n"},2950:Tt=>{"use strict";Tt.exports='/* MEASURE TOOL */\n\n.GPmeasureTooltip {\n  position: relative;\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 4px;\n  color: white;\n  padding: 4px 8px;\n  white-space: nowrap;\n}\n\n.GPmeasureTooltip-measure {\n  font-weight: bold;\n}\n\n.GPmeasureTooltip-info {\n  font-size: 0.75em;\n  text-align: center;\n}\n\n.GPmeasureTooltip-static {\n  background-color: #ffcc33;\n  color: black;\n  border: 1px solid white;\n}\n\n.GPmeasureTooltip-hidden {\n  display: none;\n}\n\n.GPmeasureTooltip-measure::before,\n.GPmeasureTooltip-info::before,\n.GPmeasureTooltip-static::before {\n  border-top: 6px solid rgba(0, 0, 0, 0.5);\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  content: "";\n  position: absolute;\n  bottom: -6px;\n  margin-left: -7px;\n  left: 50%;\n}\n\n.GPmeasureTooltip-static::before {\n  border-top-color: #ffcc33;\n}\n'},1852:Tt=>{"use strict";Tt.exports='/* MOUSE POSITION */\r\n\r\n/* Showing/hiding mouse position panel */\r\n\r\nlabel[id^=GPshowMousePositionPicto] {\r\n  display: inline-block;\r\n}\r\n\r\ninput[id^=GPshowMousePosition-] + label {\r\n  display: block;\r\n}\r\n\r\ninput[id^=GPshowMousePosition-]:checked + label {\r\n  display: none;\r\n}\r\n\r\ninput[id^=GPshowMousePosition-] + label + div {\r\n  display: none;\r\n}\r\n\r\ninput[id^=GPshowMousePosition-]:checked + label + div {\r\n  display: block;\r\n}\r\n\r\n/* General panels */\r\n\r\ndiv[id^=GPmousePositionPanel-] {\r\n  width: 300px;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Basic infos */\r\n\r\ndiv[id^=GPmousePositionBasicPanel] {\r\n  padding: 10px 15px;\r\n  position: relative;\r\n}\r\n\r\n.GPmousePositionLabel,\r\n.GPmousePositionCoords {\r\n  display: inline-block;\r\n  line-height: 20px;\r\n}\r\n\r\n.GPmousePositionLabel {\r\n  width: 80px;\r\n  font-weight: bold;\r\n}\r\n\r\n.GPmousePositionCoords {\r\n  width: 110px;\r\n}\r\n\r\n/* Showing settings */\r\n\r\n.GPshowMousePositionSettingsPicto {\r\n  bottom: 5px;\r\n  right: 0;\r\n  transition: all 0.5s ease-out 0s;\r\n}\r\n\r\ndiv[id^=GPmousePosition-] input[type="checkbox"]:checked + .GPshowMousePositionSettingsPicto {\r\n  bottom: 100px;\r\n}\r\n\r\ndiv[id^=GPmousePositionSettings-] {\r\n  display: block;\r\n  max-height: 0;\r\n  opacity: 0;\r\n  transition: max-height 0.5s ease-out 0s, opacity 0.5s ease-out 0s;\r\n}\r\n\r\ndiv[id^=GPmousePosition-] input[type="checkbox"]:checked + label + div[id^=GPmousePositionSettings-] {\r\n  max-height: 95px;\r\n  opacity: 1;\r\n}\r\n\r\n/* Settings */\r\n\r\ndiv[id^=GPmousePositionSettings-] {\r\n  height: 95px;\r\n  padding-left: 0 15px;\r\n  overflow: hidden;\r\n}\r\n\r\n.GPmousePositionSettingsLabel {\r\n  display: block;\r\n  margin: auto;\r\n  text-align: center;\r\n  font-weight: bold;\r\n  line-height: 16px;\r\n}\r\n\r\n.GPmousePositionSettingsSelect {\r\n  width: 180px;\r\n  margin-top: 5px;\r\n}\r\n\r\n/* General panels */\r\n\r\ndiv[id^=GPmousePositionCoordinate-] input.error {\r\n    border: 1px solid rgb(255, 0, 0);\r\n}\r\n\r\ndiv[id^=GPmousePositionCoordinate-] input[readonly] {\r\n    border: 1px solid transparent;\r\n    padding: 2px;\r\n    text-align: right;\r\n}\r\n\r\ninput[id^=GPmousePositionLat-], input[id^=GPmousePositionLon-] {\r\n    width: 120px;\r\n}\r\n\r\nspan[id^=GPmousePositionAlt-] {\r\n    display: inline-block;\r\n    padding: 2px;\r\n    width: 120px;\r\n    line-height: 20px;\r\n    text-align: right;\r\n}\r\n\r\n/* sexagesimal coordinates */\r\n\r\n.GPSexagesimal, .GPSexagesimalsec {\r\n    margin:0;\r\n    border: 1px solid rgb(204, 204, 204);\r\n    border-radius: 4px;\r\n}\r\n\r\ninput:read-only.GPSexagesimal, input:read-only.GPSexagesimalsec {\r\n    text-align: right;\r\n}\r\n\r\n.GPSexagesimal {\r\n    width: 30px;\r\n}\r\n\r\n.GPSexagesimalsec {\r\n    width: 45px;\r\n}\r\n\r\n.GPmousePositionSexagesimalLabel {\r\n    font-size: 1.2em;\r\n    vertical-align: middle;\r\n    padding: 0;\r\n}\r\n\r\n/* direction N/S ou E/O */\r\n\r\nselect.GPmousePositionDirection {\r\n    border: 1px solid #999;\r\n    margin-left: 2px;\r\n}\r\n\r\nselect.GPmousePositionDirection:disabled{\r\n    border: none;\r\n    background: transparent;\r\n    color: black;\r\n    /*For FireFox*/\r\n   -webkit-appearance: none;\r\n   /*For Chrome*/\r\n   -moz-appearance: none;\r\n}\r\n\r\n/*For IE10+*/\r\n\r\nselect.GPmousePositionDirection:disabled::-ms-expand {\r\n    display: none;\r\n}\r\n\r\nselect.GPmousePositionDirection:disabled::-ms-value {\r\n    color: black;\r\n}\r\n\r\n.GPmousePositionUnits,\r\n.GPmousePositionAltitudeUnits {\r\n    margin-left: 5px;\r\n}\r\n\r\n/* EDIT COORDINATES TOOLS */\r\n\r\n.GPmousePositionPanelEditTools {\r\n    position: absolute;\r\n    top: 20px;\r\n    right: 5px;\r\n}\r\n\r\n.GPmousePositionEditTool {\r\n    width: 18px;\r\n    height: 18px;\r\n    display: inline-block;\r\n    cursor: pointer;\r\n}\r\n\r\nspan[id^=GPmousePositionCloseEdit] {\r\n    background-position: -18px 0;\r\n    margin-left: 5px;\r\n}\r\n\r\nimg[id^=GPmousePositionMarker]:hover {\r\n    cursor: pointer;\r\n    opacity: 0.7;\r\n}\r\n\r\n/* Map center localisation */\r\n\r\n#GPmapCenter {\r\n  display: none;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  width: 50px;\r\n  height: 50px;\r\n  margin-top: -25px;\r\n  margin-left: -25px;\r\n}\r\n\r\n#GPmapCenter.GPmapCenterVisible {\r\n  display: block;\r\n}\r\n'},3425:Tt=>{"use strict";Tt.exports='/* REVERSE GEOCODING */\r\n\r\n[id^="GPreverseGeocoding-"] {\r\n  top: 180px;\r\n}\r\n\r\n/* Showing/hiding reverse geocoding panel */\r\n\r\n[id^="GPshowReverseGeocodingPicto-"] {\r\n  display: inline-block;\r\n}\r\n\r\n[id^="GPshowReverseGeocoding-"] + label {\r\n  display: block;\r\n}\r\n\r\n[id^="GPshowReverseGeocoding-"]:checked + label {\r\n  display: none;\r\n}\r\n\r\n[id^="GPshowReverseGeocoding-"] + label + div {\r\n  display: none;\r\n}\r\n\r\n[id^="GPshowReverseGeocoding-"]:checked + label + div {\r\n  display: block;\r\n}\r\n\r\n/* General panels */\r\n\r\ndiv[id^=GPreverseGeocodingResultsClose] {\r\n  top: 0;\r\n  right: 0;\r\n  width: 30px;\r\n  height: 32px;\r\n  /*background-position: -26px 0;*/\r\n}\r\n\r\n[id^="GPreverseGeocodingPanel-"] {\r\n  width: 280px;\r\n}\r\n\r\n.GPreverseGeocodingComponentHidden {\r\n  display: none;\r\n}\r\n\r\ndiv[id^="GPreverseGeocodingReturnPicto-"] {\r\n  position: absolute;\r\n  width: 26px;\r\n  height: 26px;\r\n  border-radius: 3px;\r\n  opacity: 1;\r\n  background-position: 0 0;\r\n  cursor: pointer;\r\n}\r\n\r\n.GPreverseGeocodingReturnPictoHidden {\r\n    display: none;\r\n}\r\n\r\n/* Calc waiting */\r\n\r\n.GPreverseGeocodingCalcWaitingContainerVisible,\r\n.GPreverseGeocodingCalcWaitingContainerHidden {\r\n  position: absolute;\r\n  top: 32px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: rgba(255,255,255,0.9);\r\n  font-size: 1.5em;\r\n  font-weight: bold;\r\n  overflow: hidden;\r\n}\r\n\r\n.GPreverseGeocodingCalcWaitingContainerVisible {\r\n  display: flex;\r\n}\r\n\r\n.GPreverseGeocodingCalcWaitingContainerHidden {\r\n  display: none;\r\n}\r\n\r\n.GPreverseGeocodingCalcWaiting {\r\n  margin: auto;\r\n}\r\n\r\n/* Search panel */\r\n\r\n[id^="GPreverseGeocodingForm-"] {\r\n  position: relative;\r\n  max-height: 270px;\r\n  overflow-y: auto;\r\n  padding-left: 15px;\r\n  padding-right: 15px;\r\n  padding-top: 10px;\r\n}\r\n\r\n.GPreverseGeocodingCodeLabel,\r\n.GPreverseGeocodingFilterLabel {\r\n  max-width: 105px;\r\n}\r\n\r\n.GPreverseGeocodingCodeLabel,\r\n.GPreverseGeocodingCode {\r\n  margin-top: 5px;\r\n  margin-bottom: 0;\r\n}\r\n\r\n.GPreverseGeocodingFilterLabel,\r\n.GPreverseGeocodingFilterInput {\r\n  margin-bottom: 5px;\r\n}\r\n\r\ninput[id^="GPreverseGeocodingSubmit-"] {\r\n  margin-top: 5px;\r\n  margin-bottom: 15px;\r\n  width: 100px;\r\n}\r\n\r\n/* Calc waiting */\r\n\r\n/* TODO: waiting  */\r\n\r\n.GPreverseGeocodingCalcWaitingContainerVisible,\r\n.GPreverseGeocodingCalcWaitingContainerHidden {\r\n  position: absolute;\r\n  top: 32px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: rgba(255,255,255,0.9);\r\n  font-size: 1.5em;\r\n  font-weight: bold;\r\n  overflow: hidden;\r\n}\r\n\r\n.GPreverseGeocodingCalcWaitingContainerVisible {\r\n  display: flex;\r\n}\r\n\r\n.GPreverseGeocodingCalcWaitingContainerHidden {\r\n  display: none;\r\n}\r\n\r\n.GPreverseGeocodingCalcWaiting {\r\n  margin: auto;\r\n}\r\n\r\n/* Result panel */\r\n\r\ndiv[id^=GPreverseGeocodingResultsList-] {\r\n  position: relative;\r\n  max-height: 210px;\r\n  overflow-y: auto;\r\n}\r\n'},9966:Tt=>{"use strict";Tt.exports='/* ROUTE */\r\n\r\ndiv[id^=GProute-] {\r\n   top: 100px;\r\n}\r\n\r\n/* Showing/hiding route panel */\r\n\r\nlabel[id^=GPshowRoutePicto] {\r\n  display: inline-block;\r\n}\r\n\r\ninput[id^=GPshowRoute-] + label {\r\n  display: block;\r\n}\r\n\r\ninput[id^=GPshowRoute-]:checked + label {\r\n  display: none;\r\n}\r\n\r\ninput[id^=GPshowRoute-] + label + div {\r\n  display: none;\r\n}\r\n\r\ninput[id^=GPshowRoute-]:checked + label + div {\r\n  display: block;\r\n}\r\n\r\n/* General panels */\r\n\r\ndiv[id^=GProutePanel-] {\r\n  width: 320px;\r\n}\r\n\r\n.GProuteComponentHidden {\r\n  display: none;\r\n}\r\n\r\n/* Calc waiting */\r\n\r\n.GProuteCalcWaitingContainerVisible,\r\n.GProuteCalcWaitingContainerHidden {\r\n  position: absolute;\r\n  top: 32px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: rgba(255,255,255,0.9);\r\n  font-size: 1.5em;\r\n  font-weight: bold;\r\n  overflow: hidden;\r\n}\r\n\r\n.GProuteCalcWaitingContainerVisible {\r\n  display: flex;\r\n}\r\n\r\n.GProuteCalcWaitingContainerHidden {\r\n  display: none;\r\n}\r\n\r\n.GProuteCalcWaiting {\r\n  margin: auto;\r\n}\r\n\r\n/* Route form */\r\n\r\nform[id^=GProuteForm] {\r\n  padding: 15px;\r\n}\r\n\r\n.GProuteFormMini {\r\n  max-height: 58px;\r\n  overflow: hidden;\r\n  transform: translateY(-5px);\r\n}\r\n\r\n.GProuteStageFlexInput {\r\n  max-height: 28px;\r\n  opacity: 1;\r\n}\r\n\r\n.GProuteStageFlexInputHidden {\r\n  max-height: 0;\r\n  opacity: 0;\r\n  overflow: hidden;\r\n}\r\n\r\nform[id^=GProuteForm] > .GPlocationStageFlexInput {\r\n  margin-top: 5px;\r\n}\r\n\r\nform[id^=GProuteForm] > .GPlocationStageFlexInputHidden {\r\n  margin-top: 0;\r\n}\r\n\r\nform[id^=GProuteForm].GProuteFormMini .GPlocationStageFlexInput:first-child {\r\n  margin-top: 5px;\r\n}\r\n\r\n.GProuteOriginVisible {\r\n  display: block;\r\n}\r\n\r\n.GProuteOriginHidden {\r\n  display: none;\r\n}\r\n\r\nlabel.GProuteOriginPointerImg[id*="GProuteOriginPointerImg"] {\r\n  width: 28px;\r\n  border-top-right-radius: 3px;\r\n  border-bottom-right-radius: 3px;\r\n  border-right: 1px solid #999;\r\n}\r\n\r\ninput[id*="GProuteOriginPointer"] + .GProuteOriginPointerImg {\r\n  background-position: -1px -1px;\r\n}\r\n\r\ninput[id*="GProuteOriginPointer"]:checked + .GProuteOriginPointerImg {\r\n  background-position: -29px -1px;\r\n}\r\n\r\n.GProuteStageRemove,\r\ndiv[id^=GProuteStageAdd] {\r\n  width: 28px;\r\n  border: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.GProuteFormMini .GProuteStageRemove,\r\n.GProuteFormMini div[id^=GProuteStageAdd] {\r\n  display: none;\r\n}\r\n\r\n.GProuteStageRemove {\r\n  background-position: -84px 0;\r\n}\r\n\r\ndiv[id^=GProuteStageAdd] {\r\n  background-position: -56px 0;\r\n}\r\n\r\n/* Mode choice */\r\n\r\ndiv[id^=GProuteModeChoice] {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  margin: 15px 0;\r\n}\r\n\r\n.GProuteModeLabel {\r\n  display: block;\r\n  text-align: center;\r\n  margin-bottom: 5px;\r\n}\r\n\r\ndiv[id^=GProuteTransportChoice] input {\r\n  display: none;\r\n}\r\n\r\n.GProuteTransportImg {\r\n  display: inline-block;\r\n  width: 28px;\r\n  height: 28px;\r\n  cursor: pointer;\r\n}\r\n\r\n.GProuteTransportImg:first-of-type {\r\n    margin-left: 18px;\r\n    margin-right: 10px;\r\n}\r\n\r\ninput[id^=GProuteTransportCar] + .GProuteTransportImg {\r\n  background-position: -112px 0;\r\n}\r\n\r\ninput[id^=GProuteTransportCar]:checked + .GProuteTransportImg {\r\n  background-position: -140px 0;\r\n}\r\n\r\ninput[id^=GProuteTransportPedestrian] + .GProuteTransportImg {\r\n  background-position: -168px 0;\r\n}\r\n\r\ninput[id^=GProuteTransportPedestrian]:checked + .GProuteTransportImg {\r\n  background-position: -196px 0;\r\n}\r\n\r\nselect[id^=GProuteComputationSelect] {\r\n  width: 100px;\r\n}\r\n\r\n/* Showing/hiding exclusions */\r\n\r\ninput[id^=GPshowRouteExclusions] {\r\n  display: none;\r\n}\r\n\r\n.GPshowRouteExclusionsPicto {\r\n  /* top: 185px; */\r\n  /* bottom: 25px; */\r\n  right: 0;\r\n  transition: all 0.3s ease-out 0s;\r\n}\r\n\r\ninput[id^=GPshowRouteExclusions] + label + div[id^=GProuteExclusions] {\r\n  max-height: 0;\r\n  opacity: 0;\r\n  margin-bottom: 0;\r\n}\r\n\r\ninput[id^=GPshowRouteExclusions]:checked + label + div[id^=GProuteExclusions] {\r\n  display: block;\r\n  max-height: 60px;\r\n  opacity: 1;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n/* Exclusions */\r\n\r\ndiv[id^=GProuteExclusions] {\r\n  transition: max-height 0.5s ease-in-out 0.25s, opacity 0.5s ease-in-out 0.25s, margin 0.3s ease-in-out 0.25s;\r\n  overflow: hidden;\r\n}\r\n\r\n.GProuteExclusionsLabel {\r\n  display: block;\r\n  text-align: center;\r\n  margin-bottom: 10px;\r\n  font-weight: bold;\r\n  line-height: 16px;\r\n}\r\n\r\n.GProuteExclusionsOptions {\r\n  display: flex;\r\n  justify-content: space-around;\r\n}\r\n\r\n.GProuteExclusionsOption {\r\n  display: block;\r\n  height: 28px;\r\n  line-height: 26px;\r\n  color: #A77;\r\n  background-color: #FEE;\r\n  padding-left: 28px;\r\n  padding-right: 5px;\r\n  border: 1px solid #A77;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n}\r\n\r\ninput:checked + .GProuteExclusionsOption {\r\n  background-color: #EFE;\r\n  background-position: 0 -28px;\r\n  color: #797;\r\n  border: 1px solid #797;\r\n}\r\n\r\n/* Reset picto */\r\n\r\ndiv[id^=GProuteReset] {\r\n  position: absolute;\r\n  width: 28px;\r\n  height: 28px;\r\n  border-radius: 3px;\r\n  opacity: 0.8;\r\n  background-position: -224px 0;\r\n  transition: opacity 0.2s ease-out;\r\n  cursor: pointer;\r\n}\r\n\r\ndiv[id^=GProuteReset]:hover {\r\n  opacity: 1;\r\n}\r\n\r\n/* Result panel */\r\n\r\ndiv[id^=GProuteResultsPanel] {\r\n  padding: 15px;\r\n}\r\n\r\n.GProuteResultStage {\r\n  display: flex;\r\n}\r\n\r\ndiv[id^=GProuteResultsStages] {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.GProuteResultStageLabel,\r\n.GProuteResultStageValue,\r\n.GProuteResultsValueLabel,\r\ndiv[id^=GProuteResultsValueDist],\r\ndiv[id^=GProuteResultsValueTime] {\r\n  display: inline-block;\r\n  line-height: 18px;\r\n}\r\n\r\n.GProuteResultStageLabel,\r\n.GProuteResultsValueLabel {\r\n  color: #666;\r\n}\r\n\r\n.GProuteResultStageLabel {\r\n  width: 60px;\r\n}\r\n\r\n.GProuteResultsValueLabel {\r\n  width: 65px;\r\n}\r\n\r\n.GProuteResultStageValue {\r\n  flex: 1;\r\n  overflow-x: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\ndiv[id^=GProuteResultsValueDist],\r\ndiv[id^=GProuteResultsValueTime] {\r\n  width: 80px;\r\n  font-weight: bold;\r\n}\r\n\r\ndiv[id^=GProuteResults-] {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\nselect[id^=GProuteResultsComputationSelect] {\r\n  width: 100px;\r\n}\r\n\r\ndiv[id^=GProuteResultsNew] {\r\n  width: 28px;\r\n  height: 28px;\r\n  border-radius: 3px;\r\n  opacity: 0.8;\r\n  background-position: -224px 0;\r\n  transition: opacity 0.2s ease-out;\r\n  cursor: pointer;\r\n}\r\n\r\ndiv[id^=GProuteResultsNew]:hover {\r\n  opacity: 1;\r\n}\r\n\r\n/* Results details header */\r\n\r\n.GPfakeBorder {\r\n  display: inline-block;\r\n  height: 14px;\r\n  width: 60px;\r\n  border-bottom: 1px solid #999;\r\n}\r\n\r\n.GPfakeBorderLeft {\r\n  margin-left:15px;\r\n}\r\n\r\ninput[id^=GProuteResultsShowDetails] + label,\r\ninput[id^=GProuteResultsShowDetails] + label + label {\r\n  width: 130px;\r\n  line-height: 28px;\r\n  vertical-align: top;\r\n  text-align: center;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  transition: color 0.2s ease-out;\r\n}\r\n\r\ninput[id^=GProuteResultsShowDetails] + label,\r\ninput[id^=GProuteResultsShowDetails]:checked + label + label {\r\n  display: inline-block;\r\n}\r\n\r\ninput[id^=GProuteResultsShowDetails]:checked + label,\r\ninput[id^=GProuteResultsShowDetails] + label + label {\r\n  display: none;\r\n}\r\n\r\ninput[id^=GProuteResultsShowDetails] + label + label + div + div[id^=GProuteResultsDetails] {\r\n  max-height: 0;\r\n  opacity: 0;\r\n}\r\n\r\ninput[id^=GProuteResultsShowDetails]:checked + label + label + div + div[id^=GProuteResultsDetails] {\r\n  max-height: 200px;\r\n  opacity: 1;\r\n}\r\n\r\ndiv[id^=GProuteResultsDetails] {\r\n  overflow-y: auto;\r\n  transition: max-height 0.5s ease-in-out 0.25s, opacity 0.5s ease-in-out 0.25s;\r\n}\r\n\r\n.GProuteResultsDetailsNumber,\r\n.GProuteResultsDetailsInstruction {\r\n  display: inline-block;\r\n  margin-top: 4px;\r\n  line-height: 16px;\r\n  color: #666;\r\n}\r\n\r\n.GProuteResultsDetailsNumber {\r\n  font-weight: bold;\r\n  width: 22px;\r\n  text-align: right;\r\n  vertical-align: top;\r\n}\r\n\r\n.GProuteResultsDetailsInstruction {\r\n  width: calc(100% - 30px);\r\n  padding-left: 5px;\r\n}\r\n'},4474:Tt=>{"use strict";Tt.exports="/* SEARCH ENGINE */\r\n\r\ninput[id^=GPshowSearchEngine-] + label + form[id^=GPsearchInput-] {\r\n  max-width: 0px;\r\n}\r\n\r\n/* Showing/hiding search engine input */\r\n\r\ninput[id^=GPshowSearchEngine-] {\r\n  display: none;\r\n}\r\n\r\nlabel[id^=GPshowSearchEnginePicto] {\r\n  display: inline-block;\r\n  transition: border-radius 0s ease-out 0s;\r\n  transition-delay: 0.5s;\r\n}\r\n\r\ninput[id^=GPshowSearchEngine-]:checked + label {\r\n  border-top-right-radius: 0;\r\n  border-bottom-right-radius: 0;\r\n  transition-delay: 0s;\r\n}\r\n\r\ninput[id^=GPshowSearchEngine-] + label + form[id^=GPsearchInput-] {\r\n  max-width: 0px;\r\n  border: none;\r\n  transition: max-width 0.5s ease-out 0s;\r\n}\r\n\r\ninput[id^=GPshowSearchEngine-]:checked + label + form[id^=GPsearchInput-] {\r\n  max-width: 280px;\r\n}\r\n\r\ninput[id^=GPshowSearchEngine-] + label + form[id^=GPsearchInput-] + div[id^=GPshowAdvancedSearch] {\r\n  display: none;\r\n}\r\n\r\ninput[id^=GPshowSearchEngine-]:checked + label + form[id^=GPsearchInput-] + div[id^=GPshowAdvancedSearch] {\r\n  display: inline-block;\r\n}\r\n\r\ndiv[id^=GPautoCompleteList] {\r\n  display: none;\r\n}\r\n\r\ninput[id^=GPshowSearchEngine-]:checked + label + form[id^=GPsearchInput-] + div[id^=GPautoCompleteList] {\r\n  display: block;\r\n}\r\n\r\n/* Simple search input */\r\n\r\nform[id^=GPsearchInput-] {\r\n  display: inline-block;\r\n  position: relative;\r\n  left: -3px;\r\n  width: 280px;\r\n  overflow: hidden;\r\n}\r\n\r\nform[id^=GPsearchInput-] input {\r\n  display: block;\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 1px solid #999;\r\n  border-top-right-radius: 5px;\r\n  border-bottom-right-radius: 5px;\r\n  padding: 0;\r\n  padding-right: 30px;\r\n  padding-left: 5px;\r\n  color: #333;\r\n  font-size: 1.0em;\r\n}\r\n\r\nform[id^=GPsearchInput-] input:disabled {\r\n  background-color: #DDD;\r\n  color: #999;\r\n}\r\n\r\ndiv[id^=GPsearchInputReset] {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 30px;\r\n  height: 32px;\r\n  background-position: -30px 0;\r\n  cursor: pointer;\r\n}\r\n\r\n/* General panels */\r\n\r\ndiv[id^=GPgeocodeResultsClose],\r\ndiv[id^=GPadvancedSearchClose] {\r\n  top: 0;\r\n  right: 0;\r\n  width: 30px;\r\n  height: 32px;\r\n}\r\n\r\ndiv[id^=GPgeocodeResultsClose] {\r\n  background-position: 0 0;\r\n}\r\n\r\ndiv[id^=GPadvancedSearchClose] {\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n/* Advanced search picto */\r\n\r\ndiv[id^=GPshowAdvancedSearch] {\r\n  transition: border-radius 0s ease-out 0s;\r\n  transition-delay: 0.5s;\r\n}\r\n\r\n/* Advanced search panel */\r\n\r\ndiv[id^=GPadvancedSearchPanel] {\r\n  display: none;\r\n  width: 280px;\r\n  vertical-align: top;\r\n  overflow: hidden;\r\n}\r\n\r\nform[id^=GPadvancedSearchForm] {\r\n  max-height: 220px;\r\n  overflow-y: auto;\r\n  padding-left: 15px;\r\n  padding-right: 15px;\r\n}\r\n\r\n.GPadvancedSearchCodeLabel,\r\n.GPadvancedSearchFilterLabel {\r\n  max-width: 105px;\r\n}\r\n\r\n.GPadvancedSearchCodeLabel,\r\n.GPadvancedSearchCode,\r\n div[id^=GPadvancedSearchFilters] {\r\n  margin-top: 15px;\r\n}\r\n\r\n.GPadvancedSearchFilterLabel,\r\n.GPadvancedSearchFilterInput {\r\n  margin-bottom: 5px;\r\n}\r\n\r\ninput[id^=GPadvancedSearchSubmit] {\r\n  margin-top: 10px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n/* Autocomplete list / geocode results */\r\n\r\ndiv[id^=GPautoCompleteList],\r\ndiv[id^=GPgeocodeResultsList] {\r\n  width: 280px;\r\n}\r\n\r\ndiv[id^=GPautoCompleteList] {\r\n  top: 35px;\r\n}\r\n\r\ndiv[id^=GPgeocodeResultsList] {\r\n  display: none;\r\n  position: absolute;\r\n  top: 40px;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n}\r\n\r\ndiv[id^=GPgeocodeResults-] {\r\n  background-color: #FFF;\r\n  max-height: 140px;\r\n  overflow-y: auto;\r\n}\r\n"},2197:Tt=>{"use strict";Tt.exports='/**\n* Map loading\n* @sample\n* function setMap(map) {\n*   var center = this._createLoadingElement();\n*   map.getViewport().appendChild(center);\n*   center.className = ""; // invisible !\n*   center.className = "GPmapLoadingVisible"; // visible !\n* }\n*\n* function _createLoadingElement() {\n*   var div = document.createElement("div");\n*   div.id = "GPmapLoading";\n*   div.className = "";\n*   return div;\n* }\n*/\n\n#GPmapLoading {\n  display: none;\n  position: absolute;\n  z-index: 50;\n  top: 50%;\n  left: 50%;\n  width: 50px;\n  height: 50px;\n  margin-top: -25px;\n  margin-left: -25px;\n}\n\n#GPmapLoading.GPmapLoadingVisible {\n  display: block;\n}\n\n#GPmapLoading {\n    background-image: url(\'waiting.84926d9a24580720a06e.gif\');\n}\n'},7947:Tt=>{"use strict";Tt.exports="/* Geoportal Attribution */\n\n.ol-attribution .gp-control-attribution-image {\n  max-height: 30px;\n  max-width: inherit;\n  vertical-align: middle;\n}\n"},801:Tt=>{"use strict";Tt.exports='/* MOUSE POSITION */\r\n\r\ndiv[id^=GPdrawing-] {\r\n  top: 48px;\r\n  right: 8px;\r\n}\r\n\r\n/* Showing/hiding mouse position panel */\r\n\r\nspan[id^=GPshowDrawingOpen-] {\r\n  background-image: url(\'GPdrawingOpen.d130e3f29a280c94ba25.png\');\r\n}\r\n\r\n/* General panels */\r\n\r\ndiv[id^=GPdrawingPanel-] {\r\n    top: 0px;\r\n    right: 0px;\r\n    position: absolute;\r\n}\r\n\r\ndiv[id^=GPdrawingPanelClose-] {\r\n  background-image: url(\'GPdrawingOpen.d130e3f29a280c94ba25.png\');\r\n}\r\n\r\n.drawing-tool-section:not(:last-child) {\r\n    border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.drawing-tool-section {\r\n    padding: 2px 5px 5px;\r\n}\r\n\r\n.drawing-tool-section-title {\r\n    /* font-family: OpenSansExtraBold,"Open Sans",Arial,sans-serif; */\r\n    font-size: 0.75em;\r\n    margin-bottom: 0;\r\n    margin-top: 0;\r\n    text-transform: uppercase;\r\n}\r\n\r\nul.drawing-tools-flex-display {\r\n    justify-content: center;\r\n    padding : 0;\r\n}\r\n\r\n.drawing-tools-flex-display {\r\n    align-items: center;\r\n    display: flex;\r\n}\r\n\r\n.drawing-tool:not(:last-child) {\r\n    margin-right: 10px;\r\n}\r\n\r\n.drawing-tool {\r\n    border-radius: 10px;\r\n    cursor: pointer;\r\n    display: block;\r\n    height: 40px;\r\n    width: 40px;\r\n}\r\n\r\n.drawing-tool {\r\n    background-image: url(\'drawing-tools.1954087d9c6c1a628900.svg\');\r\n    background-size: 720px 40px;\r\n}\r\n\r\n.drawing-tool {\r\n    background-color: #e9edf0;\r\n}\r\n\r\n.drawing-tool-active {\r\n    background-color: #002a50;\r\n}\r\n\r\n/*\r\n * Drawing tools\r\n */\r\n\r\nli[id^=drawing-tool-point-] {\r\n    background-position: 0 0;\r\n}\r\n\r\nli[id^=drawing-tool-point.drawing-tool-active] {\r\n    background-position: -40px 0;\r\n}\r\n\r\nli[id^=drawing-tool-line-] {\r\n    background-position: -80px 0;\r\n}\r\n\r\nli[id^=drawing-tool-line.drawing-tool-active-] {\r\n    background-position: -120px 0;\r\n}\r\n\r\nli[id^=drawing-tool-holes-] {\r\n    background-position: -640px 0;\r\n}\r\n\r\nli[id^=drawing-tool-holes.drawing-tool-active] {\r\n    background-position: -680px 0;\r\n}\r\n\r\nli[id^=drawing-tool-polygon-] {\r\n    background-position: -160px 0;\r\n}\r\n\r\nli[id^=drawing-tool-polygon.drawing-tool-active] {\r\n    background-position: -200px 0;\r\n}\r\n\r\nli[id^=drawing-tool-text-] {\r\n    background-position: -240px 0;\r\n}\r\n\r\nli[id^=drawing-tool-text.drawing-tool-active] {\r\n    background-position: -280px 0;\r\n}\r\n\r\n/*\r\n * Editing tools\r\n */\r\n\r\nli[id^=drawing-tool-edit-] {\r\n    background-position: -320px 0;\r\n}\r\n\r\nli[id^=drawing-tool-edit.drawing-tool-active] {\r\n    background-position: -360px 0;\r\n}\r\n\r\nli[id^=drawing-tool-display] {\r\n    background-position: -400px 0;\r\n}\r\n\r\nli[id^=drawing-tool-display.drawing-tool-active] {\r\n    background-position: -440px 0;\r\n}\r\n\r\nli[id^=drawing-tool-tooltip] {\r\n    background-position: -480px 0;\r\n}\r\n\r\nli[id^=drawing-tool-tooltip.drawing-tool-active] {\r\n    background-position: -520px 0;\r\n}\r\n\r\nli[id^=drawing-tool-remove] {\r\n    background-position: -560px 0;\r\n}\r\n\r\nli[id^=drawing-tool-remove.drawing-tool-active] {\r\n    background-position: -600px 0;\r\n}\r\n\r\n/* section d\'export */\r\n\r\ndiv.drawing-tools-flex-display {\r\n    justify-content: space-between;\r\n}\r\n\r\nbutton[id^=drawing-export-] {\r\n    background-position: 2px 0;\r\n}\r\n\r\n.drawing-button {\r\n    margin: auto;\r\n    font-size: 0.7em;\r\n    height: 30px;\r\n    line-height: 30px;\r\n    padding-left: 30px;\r\n    padding-right: 15px;\r\n    /* from site colors-chart */\r\n    background-image: url(\'drawing-save.824254438c1f64b92be9.svg\');\r\n    background-size: 30px 120px;\r\n}\r\n\r\n.tool-form-submit {\r\n    border: medium none;\r\n    border-radius: 20px;\r\n    font-family: "Helvetica Neue",Arial,Helvetica,sans-serif;\r\n    font-size: 0.9em;\r\n    text-align: center;\r\n    text-transform: uppercase;\r\n    /* from site colors-chart */\r\n    background-color: #00b798;\r\n    color: #fff;\r\n}\r\n\r\n/*\r\n * popups\r\n */\r\n\r\n.gp-label-div,\r\n.gp-styling-div {\r\n  position: relative;\r\n  top: 17px;\r\n  border-radius: 10px;\r\n  font-size: 0.75em;\r\n  background-color: #FFF;\r\n  box-shadow: 0 0 5px #000;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.gp-label-div::before,\r\n.gp-styling-div::before {\r\n  content: "";\r\n  position: absolute;\r\n  border-bottom: 15px solid #FFF;\r\n  border-right: 9px solid transparent;\r\n  border-left: 10px solid transparent;\r\n  top: -15px;\r\n  margin-left: -10px;\r\n  left: 50%;\r\n}\r\n\r\n.gp-textarea-att-label-style,\r\n.gp-input-label-style {\r\n  border: none;\r\n}\r\n\r\n.gp-textarea-att-label-style {\r\n  width: 240px;\r\n  height: 80px;\r\n  resize: none;\r\n}\r\n\r\n.gp-input-measure-style {\r\n  width: 240px;\r\n  font-size: 0.75em;\r\n  background-color: #FFF;\r\n  text-align: center;\r\n  border-radius: 10px;\r\n}\r\n\r\n.gp-textarea-att-label-style {\r\n  display: block;\r\n}\r\n\r\n.gp-label-div .closer {\r\n  border-top-right-radius: 10px;\r\n  background-color: #FFF;\r\n}\r\n\r\n.gp-input-label-style {\r\n  width: 180px;\r\n}\r\n\r\n/* Label popups */\r\n\r\n.gp-label-div {\r\n  padding: 10px;\r\n}\r\n\r\n/* Styling popup */\r\n\r\n.gp-styling-div {\r\n  width: 340px;\r\n  padding: 20px;\r\n  padding-top: 50px;\r\n}\r\n\r\n.gp-styling-div::after {\r\n  content: "Modifier le style";\r\n  position: absolute;\r\n  display: block;\r\n  width: 280px;\r\n  height: 30px;\r\n  line-height: 30px;\r\n  text-align: center;\r\n  left: 30px;\r\n  top: 0;\r\n  border-bottom: 1px solid #BBB;\r\n  font-feature-settings: "smcp";\r\n  font-variant: small-caps;\r\n  font-size: 1.2em;\r\n  font-weight: bold;\r\n}\r\n\r\n.gp-label-div .gp-styling-button:not([class*="closer"]) {\r\n  display: block;\r\n  margin: auto;\r\n  margin-top: 10px;\r\n}\r\n\r\n.gp-styling-button:not([class*="closer"]) {\r\n  display: inline-block;\r\n  width: 140px;\r\n  height: 24px;\r\n  line-height: 24px;\r\n  margin-top: 20px;\r\n  border-radius: 12px;\r\n  text-align: center;\r\n  color: #FFF;\r\n  background-color: #00B798;\r\n  font-weight: bold;\r\n  font-size: 0.9em;\r\n  text-transform: uppercase;\r\n  border: none;\r\n}\r\n\r\n.gp-styling-button:not([class*="closer"]):hover {\r\n  color: #00B798;\r\n  background-color: #EEF2F5;\r\n}\r\n\r\n.gp-styling-button:not([class*="closer"]) + .gp-styling-button:not([class*="closer"]) {\r\n  margin-left: 20px;\r\n}\r\n\r\n.gp-label-div .closer,\r\n.gp-styling-div .closer {\r\n  cursor: pointer;\r\n  position: absolute;\r\n  display: block;\r\n  width: 30px;\r\n  height: 30px;\r\n  top: 0;\r\n  right: 0;\r\n  border: none;\r\n  background-color: transparent;\r\n  background-repeat: no-repeat;\r\n  background-image: url(\'close-emeraud.d1812e59c249fcd25762.svg\');\r\n  background-size: 14px 14px;\r\n  background-position: center;\r\n}\r\n\r\n.gp-styling-div ul {\r\n  list-style-type: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.gp-styling-option {\r\n  font-size: 11px;\r\n  position: relative;\r\n  line-height: 30px;\r\n  padding: 0 20px;\r\n}\r\n\r\n.gp-styling-option input {\r\n  display: block;\r\n  position: absolute;\r\n  height: 20px;\r\n  top: 6px;\r\n  cursor: pointer;\r\n  padding: 0;\r\n}\r\n\r\n.gp-styling-option input[type="color"] {\r\n  width: 30px;\r\n  right: 70px;\r\n  padding: 0;\r\n  border: none;\r\n  background: none;\r\n}\r\n\r\n.gp-styling-option input[type="text"] {\r\n  width: 80px;\r\n  right: 40px;\r\n  padding: 0 5px;\r\n  margin: none;\r\n  background: none;\r\n  border: 1px solid #808080;\r\n  color: #0B6BA7;\r\n}\r\n\r\n/* Styling slider : general */\r\n\r\n.gp-styling-option input[type="range"] {\r\n  margin: 0;\r\n  width: 80px;\r\n  right: 40px;\r\n}\r\n\r\n.gp-styling-option input[type="range"]:focus {\r\n  box-shadow: none;\r\n  outline: none;\r\n}\r\n\r\n/* Styling slider : Chrome, Safari, Opera */\r\n\r\n.gp-styling-option input[type="range"]::-webkit-slider-runnable-track {\r\n  -webkit-appearance: none;\r\n  height: 1px;\r\n  background-color: #808080;\r\n}\r\n\r\n.gp-styling-option input[type="range"]::-webkit-slider-thumb:before {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 50%;\r\n  left: -200px;\r\n  height: 1px;\r\n  pointer-events: none;\r\n}\r\n\r\n.gp-styling-option input[type="range"]::-webkit-slider-thumb {\r\n  width: 13px;\r\n  height: 13px;\r\n  -webkit-appearance: none;\r\n  background-color: #0B6BA7;\r\n  border: none;\r\n  border-radius: 50%;\r\n  position: relative;\r\n  top: -6px;\r\n}\r\n\r\n/* Styling slider : Firefox */\r\n\r\n.gp-styling-option input[type="range"]::-moz-range-track {\r\n  width: 70px;\r\n  height: 1px;\r\n  background-color: #808080;\r\n}\r\n\r\n.gp-styling-option input[type="range"]::-moz-range-thumb {\r\n  width: 13px;\r\n  height: 13px;\r\n  background-color: #0B6BA7;\r\n  border: none;\r\n  border-radius: 50%;\r\n  box-shadow: 0;\r\n  position: relative;\r\n}\r\n\r\n/* Styling slider : IE */\r\n\r\n.gp-styling-option input[type="range"]::-ms-track {\r\n  border: 0;\r\n  border-color: transparent;\r\n  border-radius: 0;\r\n  border-width: 0;\r\n  color: transparent;\r\n  height: 1px;\r\n  width: 70px;\r\n  background-color: #808080;\r\n}\r\n\r\n.gp-styling-option input[type="range"]::-ms-fill-lower,\r\n.gp-styling-option input[type="range"]::-ms-fill-upper {\r\n  background: transparent;\r\n  border-radius: 0;\r\n}\r\n\r\n.gp-styling-option input[type="range"]::-ms-thumb {\r\n  width: 13px;\r\n  height: 13px;\r\n  background-color: #0B6BA7;\r\n  border: none;\r\n  border-radius: 50%;\r\n}\r\n\r\n.gp-styling-option input[type="range"]::-ms-tooltip {\r\n  display: none;\r\n}\r\n\r\n.gp-styling-option .marker-input-radio {\r\n  display: none;\r\n}\r\n\r\n.gp-styling-option .marker-label {\r\n  display: inline-block;\r\n  height: 32px;\r\n  padding: 3px;\r\n  margin-right: 5px;\r\n  margin-bottom: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.gp-styling-option .marker-input-radio:checked + .marker-label {\r\n  padding: 2px;\r\n  background-color: rgba(0,183,152,0.5);\r\n  border: 1px solid #002A50;\r\n}\r\n\r\n.gp-styling-option .marker-label img {\r\n  height: 24px;\r\n}\r\n'},2606:Tt=>{"use strict";Tt.exports=".GPimportMapBoxpRoot {\n    padding: 5px;\n}\n\n.GPEditorMapBoxContainer {\n    width: 100%;\n    height: auto;\n    position: relative;\n    padding: 5px;\n    box-sizing: border-box;\n    box-shadow: 0 0 5px #000000;\n    border-style: solid;\n    border-width: 1px;\n    border-color: lightskyblue;\n    border-radius: 5px;\n}\n\n.GPEditorMapBoxSep {\n    display: block;\n    width: 50%;\n    border-style: double;\n    border-width: 4px;\n    border-color: lightskyblue;\n}\n\n.GPEditorMapBoxLayersTitle,\n.GPEditorMapBoxThemesTitle {\n    padding: 5px;\n    font-style: italic;\n    font-weight: bold;\n}\n\n/* desactive un composant */\n\n.disabled {\n    pointer-events: none;\n    opacity: 0.5;\n}\n\n/*******************************************************************************\nGROUPS\n*******************************************************************************/\n\n.GPEditorMapBoxGroupContainer {}\n\n/* FIXME : modifier la couleur de la puce ? */\n\n.GPEditorMapBoxGroupDetails {\n    border-style: dotted;\n    border-width: 1px;\n    border-radius: 5px;\n    border-color: lightskyblue\n}\n\n.GPEditorMapBoxGroupSummary {}\n\n/*******************************************************************************\nLAYERS\n*******************************************************************************/\n\n/* - container principal */\n\n.GPEditorMapBoxLayersContainer {\n\n}\n\n/* - container layers */\n\n.GPEditorMapBoxLayerContainer {\n    width: 100%;\n    min-height: 28px;\n    display: inline-flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    align-items: center;\n    /* background-color: red; */\n}\n\n/* - container titre */\n\n.GPEditorMapBoxLayerTitleContainer {\n    width: inherit;\n    min-height: 28px;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    /* background-color: grey; */\n}\n\n.GPEditorMapBoxLayerImageInput {\n    display: none;\n}\n\n.GPEditorMapBoxLayerImageLabel {\n    min-width: 24px;\n    min-height: 28px;\n    cursor: pointer;\n    /* position: absolute; */\n    background-image: url('GPEditorLayerTools.43ca5b24e342ca25970d.png');\n    background-position: -56px 0;\n    /* background-color: green; */\n}\n\ninput[type=\"checkbox\"]:checked + .GPEditorMapBoxLayerImageLabel {\n    transform: rotate(90deg);\n}\n\n.GPEditorMapBoxLayerTypeImage {\n    min-width: 30px;\n    min-height: 30px;\n    margin-right: 5px;\n    background-repeat: no-repeat;\n    cursor: pointer;\n    /* position: absolute; */\n    /* background-image: url(\"img/GPEditorLayerTypeIcon.svg\"); */\n    background-image: url('GPEditorLayerTypeIcon.92e2a0193e0a9ef0cc96.png');\n    background-position: 0px 0;\n    box-sizing: border-box;\n    box-shadow: 2px 2px 1px lightgrey;\n    border-style: solid;\n    border-width: 1px;\n    border-radius: 5px;\n    border-color: gray;\n    /* background-color: blue; */\n}\n\n.GPEditorMapBoxLayerTitleInput {\n    display: none;\n}\n\n.GPEditorMapBoxLayerTitleLabel {\n    width: inherit;\n    /* margin-inline-start: 28px; */\n    cursor: pointer;\n    /* background-color: yellow; */\n    border-style: solid;\n    border-width: 1px;\n    border-radius: 5px;\n    border-color: gray;\n    box-shadow: 2px 2px 1px lightgrey;\n    padding: 5px;\n    margin-left: 5px;\n    word-break: break-word;\n}\n\ninput[type=\"checkbox\"]:checked + .GPEditorMapBoxLayerTitleLabel {\n    background-color: lightgrey;\n}\n\n/* - container legend */\n\n.GPEditorMapBoxLayerLegendContainer {\n\n}\n\n/* - container outils */\n\n.GPEditorMapBoxToolsContainer {\n    min-width: 28px;\n    height: 28px;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    /* background-color: pink; */\n}\n\n.GPEditorMapBoxToolsVisibilityInput {\n    display: none;\n}\n\n.GPEditorMapBoxToolsVisibilityInputDisable {\n    display: \"block\";\n}\n\n.GPEditorMapBoxToolsVisibilityLabel {\n    width: 28px;\n    height: 28px;\n    cursor: pointer;\n    /* position: absolute; */\n    background-image: url('GPEditorLayerTools.43ca5b24e342ca25970d.png');\n    background-position: -28px 0;\n    /* background-color: white; */\n}\n\n.GPEditorMapBoxToolsVisibilityLabelDisable {\n    cursor: pointer;\n}\n\ninput[type=\"checkbox\"]:checked + .GPEditorMapBoxToolsVisibilityLabel {\n  background-position: 0 0;\n}\n\n/*******************************************************************************\n FILTERS\n*******************************************************************************/\n\n/* - container principal */\n\n.GPEditorMapBoxFilterContainer {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    align-items: flex-start;\n    /* background-color: red; */\n    margin-left: 28px;\n}\n\n/* - container titre + editeur json */\n\n.GPEditorMapBoxFilterJsonContainer {\n    border-style: solid;\n    border-radius: 5px;\n    border-width: 1px;\n    padding: 5px;\n}\n\n.GPEditorMapBoxFilterTitleJson {\n\n}\n\n.GPEditorMapBoxFilterDisplayJson {\n    width: 175px;\n    height: 125px;\n    cursor: pointer;\n    overflow: scroll;\n    resize: vertical;\n}\n\n/* - container outils editions */\n\n.GPEditorMapBoxFilterToolsEditionContainer {\n    /* border-style: solid;\n    border-radius: 5px;\n    padding: 5px; */\n}\n\n/* - container outils boutons enregister/annuler */\n\n.GPEditorMapBoxFilterToolsButtonsContainer {\n    /* border-style: solid;\n    border-radius: 5px;\n    padding: 5px; */\n}\n\n/*******************************************************************************\n THEMES\n*******************************************************************************/\n\n/* - container principal */\n\n.GPEditorMapBoxThemesContainer {\n    width: 175px;\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    align-items: flex-start;\n    /* background-color: red; */\n}\n\n/* - container d'un theme */\n\n.GPEditorMapBoxThemeContainer {\n    width: inherit;\n    border-style: solid;\n    border-radius: 5px;\n    border-width: 1px;\n    padding: 5px;\n    margin: 5px;\n    text-align: center;\n}\n\n.GPEditorMapBoxThemeContainer:focus {\n    background-color: lightgrey;\n}\n\n.GPEditorMapBoxThemeImage {\n    width: 120px;\n    height: 60px;\n    cursor:pointer;\n}\n\n.GPEditorMapBoxThemeTitle {\n    padding: 5px;\n    cursor:pointer;\n}\n\n.GPEditorMapBoxThemeMessage {\n    font-style: italic;\n    color: red;\n}\n\n/*******************************************************************************\n STYLES\n*******************************************************************************/\n\n/* - container principal */\n\n.GPEditorMapBoxStyleContainer {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    align-items: flex-start;\n    /* background-color: red; */\n    margin-left: 28px;\n}\n\n/* - container titre + editeur json */\n\n.GPEditorMapBoxStyleJsonContainer {\n    border-style: solid;\n    border-radius: 5px;\n    border-width: 1px;\n    padding: 5px;\n}\n\n.GPEditorMapBoxStyleTitleJson {\n\n}\n\n.GPEditorMapBoxStyleJsonDisplay {\n    width: 175px;\n    height: 125px;\n    cursor: pointer;\n    overflow: scroll;\n    resize: vertical;\n}\n\n/* - container outils Scale */\n\n.GPEditorMapBoxStyleToolsScaleContainer {\n    width: -webkit-min-content;\n    width: min-content; /* FIXME */\n    border-style: solid;\n    border-radius: 5px;\n    border-width: 1px;\n    padding: 5px;\n}\n\n.GPEditorMapBoxStyleScaleTitle {}\n\n.GPEditorMapBoxStyleToolsScaleMaxContainer,\n.GPEditorMapBoxStyleToolsScaleMinContainer {\n    width: 175px;\n    display: inline-flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n}\n\n.GPEditorMapBoxStyleScaleLabelMin {}\n\n.GPEditorMapBoxStyleScaleInputMin {}\n\n.GPEditorMapBoxStyleScaleLabelMax {}\n\n.GPEditorMapBoxStyleScaleInputMax {}\n\n/* - container outils editions */\n\n.GPEditorMapBoxStyleToolsEditionContainer {\n    /* border-style: solid;\n    border-radius: 5px;\n    padding: 5px; */\n}\n\n/* - container outils boutons enregister/annuler */\n\n.GPEditorMapBoxStyleToolsButtonsContainer {\n    /* border-style: solid;\n    border-radius: 5px;\n    padding: 5px; */\n}\n\n/*******************************************************************************\nJSON display Editor\n*******************************************************************************/\n\n.gp-json-string { color: green; }\n\n.gp-json-number { color: darkorange; }\n\n.gp-json-boolean { color: blue; }\n\n.gp-json-null { color: magenta; }\n\n.gp-json-key { color: red; }\n\n/*******************************************************************************\nLEGEND\n*******************************************************************************/\n\n.GPEditorMapBoxLegendContainer {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    flex-wrap: nowrap;\n    margin-left: 28px;\n}\n\n.GPEditorMapBoxLegendRenderContainer {\n    display: inline-flex;\n    align-items: center;\n    width: 175px;\n    padding: 5px;\n    border-style: solid;\n    border-radius: 5px;\n    border-width: 1px;\n    overflow-y: auto;\n}\n\n.GPEditorMapBoxLegendInput {\n\n}\n\n.GPEditorMapBoxLegendRender {\n    min-width: 28px;\n    min-height: 28px;\n    border-color: transparent;\n    border-style: solid;\n    border-width: 1px;\n    border-radius: 5px;\n    box-shadow: 2px 2px 1px grey;\n    cursor: pointer;\n}\n\n.GPEditorMapBoxLegendEditable {\n    border-color: black;\n}\n\n.GPEditorMapBoxLegendTitle {\n    margin-left: 10px;\n}\n\n.GPEditorMapBoxLegendToolsContainer {\n    display: flex;\n    flex-direction: column;\n    width: 230px;\n    padding: 5px;\n}\n\n.legend-background {}\n\n.legend-fill {}\n\n.legend-line {}\n\n.legend-icon {}\n\n.legend-text {}\n\n.legend-circle {}\n\n.legend-unknow,\n.legend-not-implemented {\n    background-color: #FFFFFF;\n}\n\n.legend-unknow:before {\n    content: '\\2753';\n    color: red;\n    font-size: 15px;\n}\n\n.legend-not-implemented:before {\n    content: '\\2718';\n    color: red;\n    font-size: 15px;\n}\n\n.legend-fill-not-editable {\n\n}\n\n.legend-circle-not-editable,\n.legend-line-not-editable {\n    border-color: white;\n}\n\n.legend-styling-div {\n    display: flex;\n    justify-content: space-between;\n}\n\n.legend-styling {\n    width: 50px;\n}\n"},7254:Tt=>{"use strict";Tt.exports="div[id^=GPelevationPath-] {\n  bottom: 48px;\n  left: 10px;\n}\n\n/* Showing/hiding elevationPath panel */\n\nlabel[id^=GPshowElevationPathPicto] {\n  display: inline-block;\n}\n\ninput[id^=GPshowElevationPath-] + label {\n  display: block;\n  /*visibility: visible;*/\n}\n\ninput[id^=GPshowElevationPath-]:checked + label {\n  background-color: rgba(0,60,136,0.5);\n  /* on garde le picto toujours visible... */\n  /* display: none; */\n}\n\ninput[id^=GPshowElevationPath-] + label + div {\n  display: none;\n  /* visibility: hidden; */\n}\n\ninput[id^=GPshowElevationPath-]:checked + label + div {\n  display: block;\n  /* visibility: visible; */\n}\n\nspan[id^=GPshowElevationPathOpen] {\n  background-image: url('GPshowElevationPath.dbee4f1f2ec2a56f6b88.png');\n}\n\n/* Panel */\n\n[id^=GPelevationPathPanelClose] {\n  background-image: url('GPshowElevationPath.dbee4f1f2ec2a56f6b88.png');\n}\n\ndiv[id^=GPelevationPathPanelReduce] {\n  background-image: url('GPshowElevationPath.dbee4f1f2ec2a56f6b88.png');\n}\n\ndiv[id^=GPelevationPathPanelInfo] {\n  background-image: url('GPshowElevationPath.dbee4f1f2ec2a56f6b88.png');\n}\n\n[id^=GPelevationPathPanel-] {\n  position : relative;\n  top : 6px;\n  left: 32px;\n  width: 280px;\n}\n\n/* ELEVATION PATH DISPLAY */\n\n[id^=GPelevationPathProfil] {\n  height: 150px;\n  width: inherit;\n}\n\n.GPpanelHeader {\n  padding: unset;\n}\n\n/*\n@media (min-width:720px) and (min-height:720px) {\n\n[id^=GPelevationPathPanel] {\ntop: 15px;\nleft: 15px;\n}\n\n}\n\n@media (min-width:720px) and (min-height:520px) {\n\n[id^=GPelevationPathPanel] {\nwidth: 460px;\n}\n\n[id^=GPelevationPathProfil] {\nheight: 220px;\n}\n\n}\n\n@media (max-width:560px), (max-height:340px) {\n\n[id^=GPelevationPathPanel] {\ndisplay: none !important;\n}\n\n}\n*/\n"},9905:Tt=>{"use strict";Tt.exports='/* GET FEATURE INFO */\r\n\r\ndiv[id^=GPgetFeatureInfo-] {\r\n  top: 260px;\r\n  left: 10px;\r\n}\r\n\r\nspan[id^=GPgetFeatureInfoActivate],\r\nspan[id^=GPgetFeatureInfoDeactivate] {\r\n  width: 26px;\r\n  height: 26px;\r\n  background-image: url(\'GPactivateGfi.30e4fe092762568c11b2.png\');\r\n}\r\n\r\nspan[id^=GPgetFeatureInfoDeactivate] {\r\n  background-position: -26px 0;\r\n}\r\n\r\ndiv[id^=GPgetFeatureInfo-] input[type="checkbox"]:not(:checked) + label[id^=GPgetFeatureInfoPicto] span[id^=GPgetFeatureInfoActivate] {\r\n  opacity: 0.7;\r\n}\r\n\r\ndiv[id^=GPgetFeatureInfo-] input[type="checkbox"]:not(:checked) + label[id^=GPgetFeatureInfoPicto] span[id^=GPgetFeatureInfoDeactivate] {\r\n  background-color: rgba(0,60,136,0.3);\r\n}\r\n\r\ndiv[id^=GPgetFeatureInfo-] input[type="checkbox"]:not(:checked) + label[id^=GPgetFeatureInfoPicto]:hover span[id^=GPgetFeatureInfoDeactivate] {\r\n  background-color: rgba(0,60,136,0.4);\r\n}\r\n'},4887:Tt=>{"use strict";Tt.exports="/* ISOCHRON */\r\n\r\ndiv[id^=GPisochron-] {\r\n  left: 10px;\r\n}\r\n\r\n/* Showing/hiding isochron panel */\r\n\r\nspan[id^=GPshowIsochronOpen] {\r\n  background-image: url('GPisochronOpen.c8edd957da59a98506ca.png');\r\n  z-index:1;\r\n}\r\n\r\n/* General panels */\r\n\r\ndiv[id^=GPisochronPanel-] {\r\n  /*left: 8px;*/\r\n  position: absolute;\r\n  z-index:2;\r\n}\r\n\r\ndiv[id^=GPisochronPanelClose] {\r\n  background-image: url('GPisochronOpen.c8edd957da59a98506ca.png');\r\n}\r\n\r\n/* Calc waiting */\r\n\r\n.GPisochronCalcWaitingContainerVisible,\r\n.GPisochronCalcWaitingContainerHidden {\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Isochron form */\r\n\r\n.GPisochronChoiceAlt input:checked + label + span {\r\n  color: #366291;\r\n}\r\n\r\n.GPisochronOriginPointerImg,\r\n.GPisochronChoiceAltImg,\r\n.GPisochronTransportImg {\r\n  background-image: url('GPisochronOptions.d2df1555038b0a613656.png');\r\n}\r\n\r\n.GPisoExclusionsOption {\r\n  background-image: url('GPisochronCheck.ad86be89f18616746f7f.png');\r\n}\r\n\r\n/* Reset picto */\r\n\r\ndiv[id^=GPisochronReset] {\r\n  background-color: #366291;\r\n  background-image: url('GPisochronOptions.d2df1555038b0a613656.png');\r\n}\r\n"},8263:Tt=>{"use strict";Tt.exports='/* Layer Import */\r\n\r\ndiv[id^="GPimport-"] {\r\n  top: 220px;\r\n  left: 10px;\r\n}\r\n\r\n/* Showing/hiding import panel */\r\n\r\nspan[id^="GPshowImportOpen-"] {\r\n  background-image: url(\'GPimportOpen.9e7a48624fcf54fd1282.png\');\r\n}\r\n\r\nlabel[id^="GPshowImportPicto-"] {\r\n  display: inline-block;\r\n}\r\n\r\ninput[id^="GPshowImport-"] + label {\r\n  display: block;\r\n}\r\n\r\ninput[id^="GPshowImport-"]:checked + label {\r\n  display: none;\r\n}\r\n\r\ninput[id^="GPshowImport-"] + label + div {\r\n  display: none;\r\n}\r\n\r\ninput[id^="GPshowImport-"]:checked + label + div {\r\n  display: block;\r\n}\r\n\r\n/* General panels */\r\n\r\ndiv[id^="GPimportPanel-"],\r\ndiv[id^="GPimportGetCapPanel-"],\r\ndiv[id^="GPimportMapBoxPanel-"] {\r\n  left: 8px;\r\n}\r\n\r\ndiv[id^="GPimportPanel-"] {\r\n    position: absolute;\r\n    width: 280px;\r\n}\r\n\r\ndiv[id^="GPimportGetCapPanel-"],\r\ndiv[id^="GPimportMapBoxPanel-"] {\r\n    position: absolute;\r\n    width: 340px;\r\n}\r\n\r\ndiv[id^="GPimportPanelClose-"],\r\ndiv[id^="GPimportGetCapPanelClose-"],\r\ndiv[id^="GPimportMapBoxPanelClose-"] {\r\n  background-image: url(\'GPimportOpen.9e7a48624fcf54fd1282.png\');\r\n}\r\n\r\ndiv[id^="GPimportGetCapPanel-"],\r\ndiv[id^="GPimportMapBoxPanel-"] {\r\n  display: none;\r\n}\r\n\r\ndiv[id^=GPimportMapBoxPanelReturnPicto-] {\r\n  background-color: #366291;\r\n  background-image: url(\'GPimportMapBoxReturn.e50dbe7c9e03d8e4a79e.png\');\r\n}\r\n\r\ndiv[id^="GPimportMapBoxPanelReturnPicto-"] {\r\n  position: absolute;\r\n  width: 26px;\r\n  height: 26px;\r\n  border-radius: 3px;\r\n  opacity: 1;\r\n  background-position: 0 0;\r\n  cursor: pointer;\r\n}\r\n\r\n/* Import waiting */\r\n\r\n.GPimportWaitingContainerVisible,\r\n.GPimportWaitingContainerHidden {\r\n  position: absolute;\r\n  top: 32px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: rgba(255,255,255,0.9);\r\n  font-size: 1.5em;\r\n  font-weight: bold;\r\n  overflow: hidden;\r\n  border-radius: 4px;\r\n}\r\n\r\n.GPimportWaitingContainerVisible {\r\n  display: flex;\r\n}\r\n\r\n.GPimportWaitingContainerHidden {\r\n  display: none;\r\n}\r\n\r\n.GPimportWaiting {\r\n  margin: auto;\r\n}\r\n\r\n/* Import form */\r\n\r\nform[id^="GPimportForm-"] {\r\n  padding: 15px;\r\n}\r\n\r\n.GPimportVisibleParams {\r\n  display: block;\r\n}\r\n\r\n.GPimportHiddenParams,\r\n.GPimportValueHidden {\r\n  display: none;\r\n}\r\n\r\ndiv[id^="GPimportTypeLine-"] {\r\n  border-bottom: 1px solid #999;\r\n  padding-bottom: 15px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\ndiv[id^="GPimportChoice-"] {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  margin-top: 5px;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.GPimportChoiceAlt input[type="radio"] {\r\n  display: none;\r\n}\r\n\r\n.GPimportChoiceAltTxt {\r\n  display: block;\r\n  line-height: 28px;\r\n  color: #BBB;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n}\r\n\r\ninput[type="radio"]:checked + .GPimportChoiceAltTxt {\r\n  color: #366291;\r\n}\r\n\r\ninput[id^="GPimportSubmit-"] {\r\n  margin-top: 20px;\r\n}\r\n\r\n/* Line inputs */\r\n\r\n.GPimportInputLine {\r\n  display: flex;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.GPimportInputLine > * {\r\n  display: block;\r\n  height: 28px;\r\n  line-height: 26px;\r\n  border: 1px solid #999;\r\n  border-radius: 0;\r\n}\r\n\r\n.GPimportInputLine *:not(:last-child) {\r\n  border-right:none;\r\n}\r\n\r\n.GPimportInputLine *:first-child {\r\n  border-radius: 3px 0 0 3px;\r\n}\r\n\r\n.GPimportInputLine *:last-child {\r\n  border-radius: 0 3px 3px 0;\r\n}\r\n\r\n.GPimportInputLine > *:not(input) {\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.GPimportInputLine > input {\r\n  flex: 1;\r\n  padding: 0 5px;\r\n  min-width: 0;\r\n}\r\n\r\n.GPimportInputLine > select {\r\n  flex: 1;\r\n  padding-right: 7px;\r\n}\r\n\r\n.GPimportInputLine > label {\r\n  background-color:  #F2F2F2;\r\n  color: #666;\r\n  padding-left: 7px;\r\n  padding-right: 9px;\r\n  cursor: pointer;\r\n}\r\n\r\n/* Get cap results */\r\n\r\ndiv[id^="GPimportGetCapResults-"],\r\ndiv[id^="GPimportMapBoxResults-"] {\r\n  background-color: #FFF;\r\n  height: 140px;\r\n  overflow-y: auto;\r\n  resize: vertical;\r\n}\r\n\r\ninput[id^="GPimportGetCapRubrique-"],\r\ninput[id^="GPimportMapBoxSource-"] {\r\n  display: none;\r\n}\r\n\r\ninput[id^="GPimportGetCapRubrique-"] ~ li,\r\ninput[id^="GPimportMapBoxSource-"] ~ div {\r\n display: none;\r\n}\r\n\r\ninput[id^="GPimportGetCapRubrique-"]:checked ~ li,\r\ninput[id^="GPimportMapBoxSource-"]:checked ~ div {\r\n display: block;\r\n}\r\n\r\ninput[id^="GPimportGetCapRubrique-"] ~ ul {\r\n display: block;\r\n}\r\n\r\ninput[id^="GPimportGetCapRubrique-"]:checked ~ ul {\r\n display: none;\r\n}\r\n\r\n.GPimportGetCapProposal {\r\n  width: 100%;\r\n  height: 28px;\r\n  line-height: 16px;\r\n  padding: 6px 10px;\r\n  color: #5E5E5E;\r\n  font-size: 1.0em;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow:ellipsis;\r\n  cursor: pointer;\r\n  list-style-type: none;\r\n}\r\n\r\n.GPimportGetCapRubriqueTitle,\r\n.GPimportMapBoxSourceTitle,\r\n.GPimportMapBoxListSourceTitle {\r\n    color: #5E5E5E;\r\n}\r\n\r\n.GPimportGetCapRubrique,\r\n.GPimportGetCapListRubrique,\r\n.GPimportMapBoxSource,\r\n.GPimportMapBoxListSource {\r\n    list-style-type: none;\r\n}\r\n\r\nli.GPimportGetCapRubrique:before,\r\nli.GPimportGetCapListRubrique:before,\r\nli.GPimportMapBoxSource:before,\r\nli.GPimportMapBoxListSource:before {\r\n\t/* content: "\u2192 "; caract\xe8re UTF-8 */\r\n    content: "\xbb ";\r\n}\r\n\r\n.GPimportGetCapProposal:hover,\r\n.GPimportGetCapRubrique:hover,\r\n.GPimportMapBoxSource {\r\n\r\n}\r\n\r\n.GPimportGetCapRubriqueTitle:hover,\r\n.GPimportMapBoxSourceTitle:hover {\r\n    color: #000000;\r\n}\r\n\r\n.GPimportGetCapProposal:hover {\r\n  color: #000000;\r\n}\r\n\r\n.GPimportMapBoxSourceVisibility,\r\n.GPimportMapBoxSourceStyle,\r\n.GPimportMapBoxSourceFilter,\r\n.GPimportMapBoxSourceScale {\r\n    display: inline-block;\r\n    margin-left: 15px;\r\n}\r\n\r\n.GPimportMapBoxJsonEdit {\r\n    outline: 1px solid #ccc;\r\n    padding: 5px;\r\n    margin: 5px;\r\n}\r\n\r\n.GPimportMapBoxJsonEdithidden {\r\n    display: none;\r\n}\r\n\r\n.gp-json-string { color: green; }\r\n\r\n.gp-json-number { color: darkorange; }\r\n\r\n.gp-json-boolean { color: blue; }\r\n\r\n.gp-json-null { color: magenta; }\r\n\r\n.gp-json-key { color: red; }\r\n\r\n.GPimportMapBoxSourceVisibilityInput {\r\n    display: block  !important;\r\n}\r\n\r\n.GPimportMapBoxSourceVisibilityLabel {\r\n\r\n}\r\n\r\n.GPimportMapBoxSourceScale {\r\n}\r\n'},2405:Tt=>{"use strict";Tt.exports="/* LAYER SWITCHER OL3 */\r\n\r\ndiv[id^=GPlayerSwitcher-] {\r\n  top: 8px;\r\n  right: 8px;\r\n}\r\n\r\n/* Showing/hiding layers list */\r\n\r\nlabel[id^=GPshowLayersListPicto] {\r\n  width: 38px;\r\n  height: 38px;\r\n}\r\n\r\nspan[id^=GPshowLayersListOpen],\r\nspan[id^=GPshowLayersListClose] {\r\n  top: 3px;\r\n  left: 3px;\r\n  width: 32px;\r\n  height: 32px;\r\n  background-image: url('GPshowLayersList.f376ff181a7eee5a5f8e.png');\r\n}\r\n\r\nspan[id^=GPshowLayersListClose] {\r\n  background-position: -32px 0;\r\n}\r\n\r\ndiv[id^=GPlayerSwitcher-] input[type=\"checkbox\"]:checked + div + label[id^=GPshowLayersListPicto] span[id^=GPshowLayersListOpen] {\r\n  opacity: 0.7;\r\n}\r\n\r\ndiv[id^=GPlayerSwitcher-] input[type=\"checkbox\"]:checked + div + label[id^=GPshowLayersListPicto] span[id^=GPshowLayersListClose] {\r\n  background-color: rgba(0,60,136,0.3);\r\n}\r\n\r\ndiv[id^=GPlayerSwitcher-] input[type=\"checkbox\"]:checked + div + label[id^=GPshowLayersListPicto]:hover span[id^=GPshowLayersListClose] {\r\n  background-color: rgba(0,60,136,0.4);\r\n}\r\n\r\n/* Layers list */\r\n\r\n.GPlayerVisibility,\r\n.GPshowLayerAdvancedTools,\r\n.GPlayerInfo,\r\n.GPlayerInfoOpened,\r\n.GPlayerRemove {\r\n  background-image: url('GPlayerTools.49b13e7dc17fd0fbf883.png');\r\n}\r\n\r\n/* Opacity slider : Chrome, Safari, Opera */\r\n\r\n.GPlayerOpacity input[type=\"range\"]::-webkit-slider-runnable-track {\r\n  background: url('GPopacitySlider.8e3f7dc44180af6b644f.png');\r\n}\r\n\r\n/* Opacity slider : Firefox */\r\n\r\n.GPlayerOpacity input[type=\"range\"]::-moz-range-track {\r\n  background: url('GPopacitySlider.8e3f7dc44180af6b644f.png');\r\n}\r\n\r\n/* Opacity slider : IE */\r\n\r\n.GPlayerOpacity input[type=\"range\"]::-ms-track {\r\n  background: url('GPopacitySlider.8e3f7dc44180af6b644f.png');\r\n}\r\n\r\n/* Layer info panel */\r\n\r\ndiv[id^=GPlayerInfoPanel] {\r\n  right: 190px;\r\n}\r\n\r\ndiv[id^=GPlayerInfoTitle] {\r\n  color: #366291;\r\n  border-bottom: 1px solid #366291;\r\n}\r\n\r\ndiv[id^=GPlayerInfoQuicklook] {\r\n  background-image: url('GPlayerInfo.7c7bdeb511af604f75aa.png');\r\n}\r\n\r\ndiv[id^=GPlayerInfoClose] {\r\n  background-image: url('GPlayerInfoClose.c2c48906f6e50c6c8038.png');\r\n}\r\n\r\n.GPlayerInfoLink,\r\n.GPlayerInfoPopup {\r\n  background-image: url('GPlayerInfo.7c7bdeb511af604f75aa.png');\r\n}\r\n"},5895:Tt=>{"use strict";Tt.exports='/* Location */\n\n.GPlocationOriginPointerImg,\n.GPlocationStageRemove,\ndiv[id^=GPlocationStageAdd],\n.GPlocationTransportImg {\n  background-image: url(\'GPlocationOptions.7de4fba0ed02918e67ef.png\');\n}\n\n/* All div elements whose class attribute value begins with "GPlocationPoint" */\n\ndiv[class*="GPlocationPoint"] {\n    position: relative;\n}\n\n.GPlocationStageFlexInput {\n    margin-bottom: 5px;\n}\n'},9874:Tt=>{"use strict";Tt.exports="/* MEASURELENGTH POSITION */\r\n\r\ndiv[id^=GPmeasureArea-] {\r\n  top: 260px;\r\n  left: 74px;\r\n}\r\n\r\n/* Showing/hiding measureLength position panel */\r\n\r\nspan[id^=GPshowMeasureAreaOpen-] {\r\n  background-image: url('GPmeasuresOpen.f0d9aa624764e1c62b86.png');\r\n  background-position: -78px;\r\n}\r\n"},8009:Tt=>{"use strict";Tt.exports="/* MEASURELENGTH POSITION */\r\n\r\ndiv[id^=GPmeasureAzimuth-] {\r\n  top: 260px;\r\n  left: 10px;\r\n}\r\n\r\n/* Showing/hiding measureLength position panel */\r\n\r\nspan[id^=GPshowMeasureAzimuthOpen-] {\r\n  background-image: url('GPmeasuresOpen.f0d9aa624764e1c62b86.png');\r\n}\r\n"},4537:Tt=>{"use strict";Tt.exports="/* MEASURELENGTH POSITION */\r\n\r\ndiv[id^=GPmeasureLength-] {\r\n  top: 260px;\r\n  left: 42px;\r\n}\r\n\r\n/* Showing/hiding measureLength position panel */\r\n\r\nspan[id^=GPshowMeasureLengthOpen-] {\r\n  background-image: url('GPmeasuresOpen.f0d9aa624764e1c62b86.png');\r\n  background-position: -26px;\r\n}\r\n"},4497:Tt=>{"use strict";Tt.exports="/* MOUSE POSITION */\n\ndiv[id^=GPmousePosition-] {\n  bottom: 8px;\n  left: 10px;\n}\n\n/* Showing/hiding mouse position panel */\n\nspan[id^=GPshowMousePositionOpen] {\n  background-image: url('GPmousePositionOpen.41cf9b49bbf3ce09aea1.png');\n}\n\n/* General panels */\n\ndiv[id^=GPmousePositionPanel-] {\n    /* on desactive le mode draggable de la fen\xeatre : */\n    position: absolute;\n    left: 10px;\n    top: calc(-8px + -118px);\n    /* transition: top 0.5s ease-out 0s;\n    transition-property: top;\n    transition-duration: 0.5s;\n    transition-timing-function: ease-out;\n    transition-delay: 0s; */\n}\n\ndiv[id^=GPmousePositionPanelClose]  {\n  background-image: url('GPmousePositionOpen.41cf9b49bbf3ce09aea1.png');\n}\n\n.GPmousePositionEditTool {\n    background-image: url('GPmousePositionEditCoordinates.92f75f3c18a4bcc1f9a5.png');\n}\n\n/* Map center localisation */\n\n#GPmapCenter {\n  background-image: url('GPmapCenter.14f23925a1c78a0b8c00.png');\n}\n"},2224:Tt=>{"use strict";Tt.exports='/* REVERSE GEOCODING */\r\n\r\n[id^="GPreverseGeocoding-"] {\r\n  left: 10px;\r\n}\r\n\r\n/* Showing/hiding reverse geocoding panel */\r\n\r\n[id^="GPshowReverseGeocodingOpen-"] {\r\n  background-image: url(\'GPreverseGeocodingOpen.b3b1066fb4bf00c7d6e4.png\');\r\n}\r\n\r\n/* General panels */\r\n\r\n[id^="GPreverseGeocodingResultsClose"] {\r\n  background-image: url(\'GPreverseGeocodingOpen.b3b1066fb4bf00c7d6e4.png\');\r\n}\r\n\r\n[id^="GPreverseGeocodingPanel-"] {\r\n    position: absolute;\r\n    left: 8px;\r\n}\r\n\r\n[id^="GPreverseGeocodingPanelClose-"] {\r\n  background-image: url(\'GPreverseGeocodingOpen.b3b1066fb4bf00c7d6e4.png\');\r\n}\r\n\r\n/* Calc waiting */\r\n\r\n.GPreverseGeocodingCalcWaitingContainerVisible,\r\n.GPreverseGeocodingCalcWaitingContainerHidden {\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Results panel */\r\n\r\ndiv[id^=GPreverseGeocodingReturnPicto-] {\r\n  background-color: #366291;\r\n  background-image: url(\'GPreverseGeocodingReturn.e50dbe7c9e03d8e4a79e.png\');\r\n}\r\n\r\n.GPreverseGeocodedLocationHighlight {\r\n    background-color: rgba(255,200,0,0.25);\r\n    color: #222;\r\n}\r\n'},4553:Tt=>{"use strict";Tt.exports="/* ROUTE */\r\n\r\ndiv[id^=GProute-] {\r\n  left: 10px;\r\n}\r\n\r\n/* Showing/hiding route panel */\r\n\r\nspan[id^=GPshowRouteOpen] {\r\n  background-image: url('GProuteOpen.3575bc3b3d6798664850.png');\r\n  z-index: 1;\r\n}\r\n\r\n/* General panels */\r\n\r\ndiv[id^=GProutePanel-] {\r\n  /*left: 8px;*/\r\n  position: absolute;\r\n  z-index:2;\r\n}\r\n\r\ndiv[id^=GProutePanelClose] {\r\n  background-image: url('GProuteOpen.3575bc3b3d6798664850.png');\r\n}\r\n\r\n/* Calc waiting */\r\n\r\n.GProuteCalcWaitingContainerVisible,\r\n.GProuteCalcWaitingContainerHidden {\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Route form */\r\n\r\n.GProuteOriginPointerImg,\r\n.GProuteStageRemove,\r\ndiv[id^=GProuteStageAdd],\r\n.GProuteTransportImg {\r\n  background-image: url('GProuteOptions.7de4fba0ed02918e67ef.png');\r\n}\r\n\r\n.GProuteExclusionsOption {\r\n  background-image: url('GProuteCheck.ad86be89f18616746f7f.png');\r\n}\r\n\r\n/* Reset picto */\r\n\r\ndiv[id^=GProuteReset] {\r\n  background-color: #366291;\r\n  background-image: url('GProuteOptions.7de4fba0ed02918e67ef.png');\r\n}\r\n\r\n/* Results panel */\r\n\r\ndiv[id^=GProuteResultsValueDist],\r\ndiv[id^=GProuteResultsValueTime]  {\r\n  color: #366291;\r\n}\r\n\r\ndiv[id^=GProuteResultsNew] {\r\n  background-color: #366291;\r\n  background-image: url('GProuteOptions.7de4fba0ed02918e67ef.png');\r\n}\r\n\r\ninput[id^=GProuteResultsShowDetails] + label:hover,\r\ninput[id^=GProuteResultsShowDetails] + label + label:hover {\r\n  color: #366291;\r\n}\r\n\r\n.GProuteResultsDetailsInstructionHighlight {\r\n    background-color: rgba(255,200,0,0.25);\r\n    color: #222;\r\n}\r\n\r\n/* Results popup */\r\n\r\n.gp-features-content-div {\r\n  /* min-width: 240px; */\r\n}\r\n"},7586:Tt=>{"use strict";Tt.exports='/* SEARCH ENGINE */\r\n\r\n[id^="GPsearchEngine-"] {\r\n  top: 8px;\r\n  left: 46px;\r\n}\r\n\r\n/* Showing/hiding search engine input */\r\n\r\n[id^="GPshowSearchEngineOpen"] {\r\n  background-image: url(\'GPsearchEngineOpen.d02c96f4d5691019694f.png\');\r\n  transition: border-radius 0.5s ease-out 0s;\r\n}\r\n\r\n/* Simple search input */\r\n\r\n[id^="GPsearchInput"] {\r\n  height: 32px;\r\n}\r\n\r\n[id^="GPsearchInputReset"] {\r\n  background-image: url(\'GPsearchEngineClose.f3776d2f4066ba8c5967.png\');\r\n}\r\n\r\n/* General panels */\r\n\r\n[id^="GPgeocodeResultsClose"] {\r\n  background-image: url(\'GPsearchEngineClose.f3776d2f4066ba8c5967.png\');\r\n}\r\n\r\n[id^="GPadvancedSearchClose"] {\r\n  background-image: url(\'GPsearchEngineOpen.d02c96f4d5691019694f.png\');\r\n  background-position: -50px 3px;\r\n}\r\n\r\n/* Advanced search picto */\r\n\r\n[id^="GPshowAdvancedSearchOpen"] {\r\n  background-image: url(\'GPsearchEngineOpen.d02c96f4d5691019694f.png\');\r\n  background-position: -26px 0;\r\n  transition: border-radius 0.5s ease-out 0s;\r\n}\r\n\r\n/* Autocomplete list / geocode results */\r\n\r\n[id^="GPautoCompleteList"],\r\n[id^="GPgeocodeResultsList"] {\r\n  margin-left: 33px;\r\n  box-shadow: 0 0 6px #000;\r\n}\r\n\r\n[id^="GPgeocodeResultsList"] {\r\n  top: 40px;\r\n  border-radius: 4px;\r\n}\r\n'},6692:Tt=>{"use strict";Tt.exports="/* TODO coller un peu plus \xe0 la charte\n- liseret blanc transparent 32x32 autour du pictogramme\n- pictogramme 26x26\n- ...\n*/\ndiv[id^=GPtoolbox-measure-main] {\n  float: left;\n  left: 78px;\n  top: 8px;\n  position: absolute;\n  display: inline-block;\n  z-index: 1;\n}\nbutton[id^=GPtoolbox-measure-button] {\n  color: white;\n  border-color: rgba(255, 255, 255, 0.8);\n  border-style: none;\n  border-width: 1px;\n  cursor: pointer;\n  width: 26px;\n  height: 26px;\n  background-color: rgba(0,60,136,0.5);\n  border-radius: 4px;\n  padding: 0px;\n}\nbutton[id^=GPtoolbox-measure-button] {\n  background-repeat: no-repeat;\n  background-image: url('GPtoolBoxMeasureOpen.f54868a2f89a3242c4a8.png');\n}\ndiv[id^=GPtoolbox-measure-widget] {\n  left:auto;\n  display: none;\n  /*visibility: hidden;*/\n  /*position: absolute;*/\n  /*right: 0;*/\n  border-radius: 2px;\n  /*background-color: #f9f9f9;*/\n  /*box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);*/\n}\ndiv[id^=GPtoolbox-measure-widget] > div {\n  display: block;\n  /*visibility: visible;*/\n  position: relative;\n  top: auto;\n  left: auto;\n  bottom: auto;\n  right: auto;\n}\ndiv[id^=GPtoolbox-measure-main]:hover {\n    /*display: block;*/\n    /*visibility: visible;*/\n}\ndiv[id^=GPtoolbox-measure-main]:hover:not(.active) {\n    /*background-color: rgba(0,60,136,0.3);*/\n}\ndiv[id^=GPtoolbox-measure-main]:hover button[id^=GPtoolbox-measure-button] {\n    background-color: rgba(0,60,136,0.7);\n}\n"},5767:Tt=>{"use strict";Tt.exports="/* General panels */\r\n\r\n.GPpanel {\r\n  box-shadow: 0 0 6px #000;\r\n  border-radius: 4px;\r\n}\r\n\r\n.GPpanelHeader {\r\n  height: 32px;\r\n  padding: 3px;\r\n  background-color: #9DB1BD;\r\n  border-top-left-radius: 4px;\r\n  border-top-right-radius: 4px;\r\n}\r\n\r\n.GPpanelTitle {\r\n  line-height: 26px;\r\n  border-top-left-radius: 2px;\r\n  border-top-right-radius: 2px;\r\n  background-color: #366291;\r\n  color: #FFF;\r\n}\r\n\r\n.GPpanelClose {\r\n  top: 3px;\r\n  right: 3px;\r\n  width: 26px;\r\n  height: 26px;\r\n  background-position: -26px 0;\r\n}\r\n\r\n.GPpanelInfo {\r\n  top: 3px;\r\n  left: 3px;\r\n  width: 26px;\r\n  height: 26px;\r\n  background-position: -78px 0;\r\n}\r\n\r\n/* Showing/hiding advanced panels */\r\n\r\n.GPshowAdvancedToolPicto {\r\n  width: 32px;\r\n  height: 32px;\r\n  padding: 3px;\r\n  background-color: rgba(255, 255, 255, 0.4);\r\n  border-radius: 4px;\r\n}\r\n\r\n.GPshowAdvancedToolPicto:hover {\r\n  background-color: rgba(255, 255, 255, 0.6);\r\n}\r\n\r\n.GPshowAdvancedToolOpen {\r\n  width: 26px;\r\n  height: 26px;\r\n  background-color: rgba(0,60,136,0.5);\r\n  border-radius: 2px;\r\n}\r\n\r\n.GPshowAdvancedToolPicto:hover .GPshowAdvancedToolOpen {\r\n  background-color: rgba(0,60,136,0.7);\r\n}\r\n\r\n/* Submit inputs */\r\n\r\ninput.GPinputSubmit {\r\n  background-color: #366291;\r\n}\r\n\r\n/* Showing additional hidden options */\r\n\r\n.GPshowMoreOptionsImage {\r\n  background-image: url('GPshowMoreOptions.9588041dcc44d31cb070.png');\r\n}\r\n\r\n/* Feature info popup */\r\n\r\n.gp-feature-info-div {\r\n  bottom: 17px ;\r\n  position: relative;\r\n  max-width: calc(100vw - 80px);\r\n  padding: 10px;\r\n  border-radius: 10px;\r\n  font-size: 0.75em;\r\n  font-family: \"Open Sans\", sans-serif;\r\n  color: #002A50;\r\n  background-color: #FFF;\r\n  box-shadow: 0 0 5px #000;\r\n}\r\n\r\n.gp-feature-info-div::before {\r\n  content: \"\";\r\n  position: absolute;\r\n  border-top: 15px solid #FFF;\r\n  border-right: 14px solid transparent;\r\n  border-left: 14px solid transparent;\r\n  bottom: -15px;\r\n  margin-left: -14px;\r\n  left: 50%;\r\n}\r\n\r\n.gp-feature-info-div .closer {\r\n  position: absolute;\r\n  display: block;\r\n  width: 30px;\r\n  height: 30px;\r\n  top: 0;\r\n  right: 0;\r\n  border: none;\r\n  cursor: pointer;\r\n  border-top-right-radius: 10px;\r\n  border-bottom-right-radius: 10px;\r\n  background-color: #FFF;\r\n  background-repeat: no-repeat;\r\n  background-image: url('close-emeraud.d1812e59c249fcd25762.svg');\r\n  background-size: 14px 14px;\r\n  background-position: center;\r\n}\r\n\r\n.gp-features-content-div {\r\n  max-width: 420px;\r\n  min-width: 260px;\r\n  max-height: 340px;\r\n  overflow: auto;\r\n}\r\n\r\n.gp-features-content-div h5,\r\n.gp-features-content-div h6,\r\n.gp-features-content-div p,\r\n.gp-features-content-div ul {\r\n  margin: 0;\r\n}\r\n\r\n.gp-features-content-div ul {\r\n  padding: 0;\r\n  list-style-type: none;\r\n}\r\n\r\n.geoportail-popup-content h5,\r\n.geoportail-popup-content h6,\r\n.geoportail-popup-content p,\r\n.gp-att-name-div,\r\n.gp-att-description-div,\r\n.gp-att-others-div {\r\n  padding: 0 10px;\r\n}\r\n\r\n.geoportail-popup-content h5:not(:last-child),\r\n.geoportail-popup-content h6:not(:last-child),\r\n.geoportail-popup-content p:not(:last-child),\r\n.gp-att-description-div:not(:last-child),\r\n.gp-att-others-div:not(:last-child) {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.geoportail-popup-content h5:last-child,\r\n.geoportail-popup-content h6:last-child,\r\n.geoportail-popup-content p:last-child,\r\n.gp-att-description-div:last-child,\r\n.gp-att-others-div:last-child,\r\n.gp-att-name-div {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.geoportail-popup-content h5:first-child,\r\n.geoportail-popup-content h6:first-child,\r\n.geoportail-popup-content p:first-child,\r\n.gp-att-name-div:first-child,\r\n.gp-att-description-div:first-child,\r\n.gp-att-others-div:first-child {\r\n  margin-top: 10px;\r\n}\r\n\r\n.gp-att-name-div,\r\n.gp-features-content-div h5 {\r\n  padding-right: 35px;\r\n  font-weight: bold;\r\n  font-size: 1.2em;\r\n  text-transform: uppercase;\r\n  color: #0B6BA7;\r\n}\r\n\r\n.gp-features-content-div h6 {\r\n  font-size: 1.1em;\r\n}\r\n\r\n.gp-att-description-div:not(:last-child),\r\n.gp-att-others-div:not(:last-child) {\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px dotted #666;\r\n}\r\n"}},Tt=>{Tt(Tt.s=8331)}]);